(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[712],{40010:function(Vt,P,S){"use strict";S.d(P,{m:function(){return W3}});var T={};S.r(T),S.d(T,{Base:function(){return Pn},Circle:function(){return gi},Ellipse:function(){return fa},Image:function(){return so},Line:function(){return Ro},Marker:function(){return yo},Path:function(){return gc},Polygon:function(){return Ju},Polyline:function(){return df},Rect:function(){return Pf},Text:function(){return Bp}});var j={};S.r(j),S.d(j,{Canvas:function(){return nh},Event:function(){return ui.Event},Group:function(){return Sn},Shape:function(){return T},__esModule:function(){return Tc.X},version:function(){return xg}});var y={};S.r(y),S.d(y,{Base:function(){return vf},Circle:function(){return nm},Dom:function(){return kd},Ellipse:function(){return Rd},Image:function(){return od},Line:function(){return Dd},Marker:function(){return Bd},Path:function(){return Fd},Polygon:function(){return zd},Polyline:function(){return pp},Rect:function(){return Pv},Text:function(){return im}});var U={};S.r(U),S.d(U,{Canvas:function(){return kf},Event:function(){return ui.Event},Group:function(){return Sg},Shape:function(){return y},version:function(){return Up}});var F={};S.r(F),S.d(F,{Chart:function(){return Md},ComponentController:function(){return Vl},DIRECTION:function(){return Ht},Event:function(){return vo},Facet:function(){return _n},Geometry:function(){return Rl},GeometryLabel:function(){return $u},Interaction:function(){return me},InteractionAction:function(){return Jn},LAYER:function(){return It},Types:function(){return $f},Util:function(){return L0},VERSION:function(){return Hl},View:function(){return tp},getActionClass:function(){return ko},getAnimation:function(){return Qs},getEngine:function(){return Dt},getFacet:function(){return si},getGeometryLabel:function(){return Ma},getGeometryLabelLayout:function(){return uf},getInteraction:function(){return ti},getShapeFactory:function(){return lf},getTheme:function(){return ye},registerAction:function(){return Ci},registerAnimation:function(){return ks},registerComponentController:function(){return Aa},registerEngine:function(){return Nt},registerFacet:function(){return Jr},registerGeometry:function(){return Zu},registerGeometryLabel:function(){return pu},registerGeometryLabelLayout:function(){return Gs},registerInteraction:function(){return Nn},registerShape:function(){return ws},registerShapeFactory:function(){return Ec},registerTheme:function(){return Ne}});var B={};S.r(B),S.d(B,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var R={};S.r(R),S.d(R,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var N={};S.r(N),S.d(N,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var A={};S.r(A),S.d(A,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var D={};S.r(D),S.d(D,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var M={};S.r(M),S.d(M,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var O={};S.r(O),S.d(O,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var k={};S.r(k),S.d(k,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var V={};S.r(V),S.d(V,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var X={};S.r(X),S.d(X,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var K={};S.r(K),S.d(K,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var q={};S.r(q),S.d(q,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var ct={};S.r(ct),S.d(ct,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var _t={};S.r(_t),S.d(_t,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var yt={};S.r(yt),S.d(yt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var lt={};S.r(lt),S.d(lt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var Lt={};S.r(Lt),S.d(Lt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var wt={};S.r(wt),S.d(wt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var Gt={};S.r(Gt),S.d(Gt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var re={};S.r(re),S.d(re,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var Qt={};S.r(Qt),S.d(Qt,{EVENT_MAP:function(){return Ns},onEvent:function(){return Wl}});var it={};S.r(it),S.d(it,{calculationItemsBBox:function(){return tR},cloneEvent:function(){return RC},formatPadding:function(){return v5},isNaN:function(){return l0},isViewportChanged:function(){return J3},processParallelEdges:function(){return P4}});var dt={};S.r(dt),S.d(dt,{getColorsWithSubjectColor:function(){return uR},mixColor:function(){return ug}});var gt={};S.r(gt),S.d(gt,{Line:function(){return ly},applyMatrix:function(){return U_},distance:function(){return V_},floydWarshall:function(){return _5},fractionToLine:function(){return E5},getAdjMatrix:function(){return b5},getBBoxBoundLine:function(){return w5},getCircleCenterByPoints:function(){return x5},getCircleIntersectByPoint:function(){return SR},getDegree:function(){return zC},getEllipseIntersectByPoint:function(){return wR},getLineIntersect:function(){return G_},getPointsCenter:function(){return IR},getRectIntersectByPoint:function(){return bR},intersectBBox:function(){return TR},invertMatrix:function(){return ER},isPointInPolygon:function(){return Z_},isPointsOverlap:function(){return C5},isPolygonsIntersect:function(){return S5},itemIntersectByLine:function(){return PR},move:function(){return MR},pointLineSquareDist:function(){return OR},pointRectSquareDist:function(){return LR},rotate:function(){return lF},scale:function(){return uF},scaleMatrix:function(){return CR},squareDist:function(){return GC},translate:function(){return AR}});var vt={};S.r(vt),S.d(vt,{getClosedSpline:function(){return A5},getControlPoint:function(){return UC},getSpline:function(){return kR},paddedHull:function(){return zR},pathToPoints:function(){return VC},pointsToPolygon:function(){return RR},roundedHull:function(){return NR}});var Y={};S.r(Y),S.d(Y,{getBBox:function(){return HC},getChartRegion:function(){return RF},getComboBBox:function(){return O5},getLabelPosition:function(){return jC},getLetterWidth:function(){return qR},getLoopCfgs:function(){return KR},getTextSize:function(){return JR},plainCombosToTrees:function(){return P5},radialLayout:function(){return QR},reconstructTree:function(){return I5},traverseTree:function(){return _h},traverseTreeUp:function(){return Cd}});var ot={};S.r(ot),S.d(ot,{adjMatrix:function(){return uA},breadthFirstSearch:function(){return E9},degree:function(){return kD},depthFirstSearch:function(){return pB},detectAllCycles:function(){return M9},detectAllDirectedCycle:function(){return mB},detectAllUndirectedCycle:function(){return gB},detectDirectedCycle:function(){return T9},findAllPath:function(){return k9},findShortestPath:function(){return L9},floydWarshall:function(){return FD},getConnectedComponents:function(){return vB},getPageRank:function(){return V9},minimumSpanningTree:function(){return G9}});var nt=S(67294),rt=S(45687),st=S(60517),d=S(49242),It;(function(i){i.FORE="fore",i.MID="mid",i.BG="bg"})(It||(It={}));var Ht;(function(i){i.TOP="top",i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.RIGHT="right",i.RIGHT_TOP="right-top",i.RIGHT_BOTTOM="right-bottom",i.LEFT="left",i.LEFT_TOP="left-top",i.LEFT_BOTTOM="left-bottom",i.BOTTOM="bottom",i.BOTTOM_LEFT="bottom-left",i.BOTTOM_RIGHT="bottom-right",i.RADIUS="radius",i.CIRCLE="circle",i.NONE="none"})(Ht||(Ht={}));var kt;(function(i){i.AXIS="axis",i.GRID="grid",i.LEGEND="legend",i.TOOLTIP="tooltip",i.ANNOTATION="annotation",i.OTHER="other"})(kt||(kt={}));var Xt={FORE:3,MID:2,BG:1},Kt;(function(i){i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_PAINT="beforepaint",i.AFTER_PAINT="afterpaint",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata",i.BEFORE_CLEAR="beforeclear",i.AFTER_CLEAR="afterclear",i.BEFORE_DESTROY="beforedestroy"})(Kt||(Kt={}));var Jt;(function(i){i.MOUSE_ENTER="plot:mouseenter",i.MOUSE_DOWN="plot:mousedown",i.MOUSE_MOVE="plot:mousemove",i.MOUSE_UP="plot:mouseup",i.MOUSE_LEAVE="plot:mouseleave",i.TOUCH_START="plot:touchstart",i.TOUCH_MOVE="plot:touchmove",i.TOUCH_END="plot:touchend",i.TOUCH_CANCEL="plot:touchcancel",i.CLICK="plot:click",i.DBLCLICK="plot:dblclick",i.CONTEXTMENU="plot:contextmenu",i.LEAVE="plot:leave",i.ENTER="plot:enter"})(Jt||(Jt={}));var ue;(function(i){i.ACTIVE="active",i.INACTIVE="inactive",i.SELECTED="selected",i.DEFAULT="default"})(ue||(ue={}));var ce=["color","shape","size"],$t="_origin",Ut=1,Rt=1,Pt=.25,Yt={};function Dt(i){var r=Yt[i];if(!r)throw new Error("G engine '"+i+"' is not exist, please register it at first.");return r}function Nt(i,r){Yt[i]=r}var ne=S(6056),ve=S(45442);function Re(i){var r=getComputedStyle(i);return{width:(i.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10),height:(i.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)}}function je(i){return typeof i=="number"&&!isNaN(i)}function Cr(i,r,t,e){var n=t,a=e;if(r){var o=Re(i);n=o.width?o.width:n,a=o.height?o.height:a}return{width:Math.max(je(n)?n:Ut,Ut),height:Math.max(je(a)?a:Rt,Rt)}}function $r(i){var r=i.parentNode;r&&r.removeChild(i)}var Qr=S(90494),Ee=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this)||this;e.destroyed=!1;var n=t.visible,a=n===void 0?!0:n;return e.visible=a,e}return r.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},r.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},r.prototype.destroy=function(){this.off(),this.destroyed=!0},r.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},r}(Qr.default),yn=Ee,ui=S(39014),la=S(28014),Or=S(24796),ln=S(21392),Kn=S(50782),jn=S(2443),wi=S(51441),Sa=wi.Axis.Line,to=wi.Axis.Circle,qa=wi.Grid.Line,Ui=wi.Grid.Circle,Ue=wi.Legend.Category,We=wi.Legend.Continuous,fr=wi.Tooltip.Html,Ar=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function qr(i){var r="linear";return Ar.test(i)?r="time":(0,d.isString)(i)&&(r="cat"),r}function nn(i,r,t){var e=r||[];if((0,d.isNumber)(i)||(0,d.isNil)((0,d.firstValue)(e,i))&&(0,d.isEmpty)(t)){var n=(0,jn.getScale)("identity");return new n({field:i.toString(),values:[i]})}var a=(0,d.valuesOfKey)(e,i),o=(0,d.get)(t,"type",qr(a[0])),u=(0,jn.getScale)(o);return new u((0,st.__assign)({field:i,values:a},t))}function an(i,r){if(i.type!=="identity"&&r.type!=="identity"){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);i.change(t)}}function le(i){return i.alias||i.field}var fe=S(31437);function Me(i){var r,t;switch(i){case Ht.TOP:r={x:0,y:1},t={x:1,y:1};break;case Ht.RIGHT:r={x:1,y:0},t={x:1,y:1};break;case Ht.BOTTOM:r={x:0,y:0},t={x:1,y:0};break;case Ht.LEFT:r={x:0,y:0},t={x:0,y:1};break;default:r=t={x:0,y:0}}return{start:r,end:t}}function Te(i){var r,t;return i.isTransposed?(r={x:0,y:0},t={x:1,y:0}):(r={x:0,y:0},t={x:0,y:1}),{start:r,end:t}}function Ze(i,r){var t={start:{x:0,y:0},end:{x:0,y:0}};i.isRect?t=Me(r):i.isPolar&&(t=Te(i));var e=t.start,n=t.end;return{start:i.convert(e),end:i.convert(n)}}function or(i,r){if(i.isRect)return i.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(r)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(r)?-1:1;if(i.isPolar){var t=i.x.start;return t<0?-1:1}return 1}function lr(i){var r=i.start,t=i.end;return r.x===t.x}function Be(i,r){var t=i.start,e=i.end,n=lr(i);return n?(t.y-e.y)*(r.x-t.x)>0?1:-1:(e.x-t.x)*(t.y-r.y)>0?-1:1}function tr(i,r){return(0,d.get)(i,["components","axis",r],{})}function Mr(i){var r=i.x,t=i.y,e=i.circleCenter,n=t.start>t.end,a=i.isTransposed?i.convert({x:n?0:1,y:0}):i.convert({x:0,y:n?0:1}),o=[a.x-e.x,a.y-e.y],u=[1,0],f=a.y>e.y?fe.angle(o,u):fe.angle(o,u)*-1,m=f+(r.end-r.start),x=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2));return{center:e,radius:x,startAngle:f,endAngle:m}}function Xr(i,r){return(0,d.isBoolean)(i)?i===!1?!1:{}:(0,d.get)(i,[r])}function Zr(i,r){return(0,d.get)(i,"position",r)}function tn(i,r){return(0,d.get)(r,["title","text"],le(i))}var _n=function(){function i(r,t){this.destroyed=!1,this.facets=[],this.view=r,this.cfg=(0,d.deepMix)({},this.getDefaultCfg(),t)}return i.prototype.init=function(){this.container||(this.container=this.createContainer());var r=this.view.getData();this.facets=this.generateFacets(r)},i.prototype.render=function(){this.renderViews()},i.prototype.update=function(){},i.prototype.clear=function(){this.clearFacetViews()},i.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},i.prototype.facetToView=function(r){var t=r.region,e=r.data,n=r.padding,a=n===void 0?this.cfg.padding:n,o=this.view.createView({region:t,padding:a});o.data(e||[]),r.view=o,this.beforeEachView(o,r);var u=this.cfg.eachView;return u&&u(o,r),this.afterEachView(o,r),o},i.prototype.createContainer=function(){var r=this.view.getLayer(It.FORE);return r.addGroup()},i.prototype.renderViews=function(){this.createFacetViews()},i.prototype.createFacetViews=function(){var r=this;return this.facets.map(function(t){return r.facetToView(t)})},i.prototype.clearFacetViews=function(){var r=this;(0,d.each)(this.facets,function(t){t.view&&(r.view.removeView(t.view),t.view=void 0)})},i.prototype.getFieldValues=function(r,t){var e=[],n={};return(0,d.each)(r,function(a){var o=a[t];!(0,d.isNil)(o)&&!n[o]&&(e.push(o),n[o]=!0)}),e},i.prototype.getRegion=function(r,t,e,n){var a=1/(t===0?1:t),o=1/(r===0?1:r),u={x:a*e,y:o*n},f={x:a*(e+1),y:o*(n+1)};return{start:u,end:f}},i.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},i.prototype.getDefaultTitleCfg=function(){var r=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:r}}},i.prototype.processAxis=function(r,t){var e=r.getOptions(),n=e.coordinate,a=r.geometries,o=(0,d.get)(n,"type","rect");if(o==="rect"&&a.length){(0,d.isNil)(e.axes)&&(e.axes={});var u=e.axes,f=a[0].getXYFields(),m=f[0],x=f[1],w=Xr(u,m),L=Xr(u,x);w!==!1&&(e.axes[m]=this.getXAxisOption(m,u,w,t)),L!==!1&&(e.axes[x]=this.getYAxisOption(x,u,L,t))}},i.prototype.getFacetDataFilter=function(r){return function(t){return(0,d.every)(r,function(e){var n=e.field,a=e.value;return!(0,d.isNil)(a)&&n?t[n]===a:!0})}},i}(),$n={},si=function(i){return $n[(0,d.lowerCase)(i)]},Jr=function(i,r){$n[(0,d.lowerCase)(i)]=r},Si=function(){function i(r,t){this.context=r,this.cfg=t,r.addAction(this)}return i.prototype.applyCfg=function(r){(0,d.assign)(this,r)},i.prototype.init=function(){this.applyCfg(this.cfg)},i.prototype.destroy=function(){this.context.removeAction(this),this.context=null},i}(),Jn=Si,yi=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.execute=function(){this.callback&&this.callback(this.context)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.callback=null},r}(Jn),Ka=yi,ki={};function ga(i,r){var t=ki[i],e=null;if(t){var n=t.ActionClass,a=t.cfg;e=new n(r,a),e.name=i,e.init()}return e}function ko(i){var r=ki[i];return(0,d.get)(r,"ActionClass")}function Ci(i,r,t){ki[i]={ActionClass:r,cfg:t}}function po(i){delete ki[i]}function oo(i,r){var t=new Ka(r);return t.callback=i,t.name="callback",t}function cn(i){if((0,d.isEmpty)(i))return null;var r=i[0].x,t=i[0].x,e=i[0].y,n=i[0].y;return(0,d.each)(i,function(a){r=r>a.x?a.x:r,t=t<a.x?a.x:t,e=e>a.y?a.y:e,n=n<a.y?a.y:n}),{minX:r,maxX:t,minY:e,maxY:n,centerX:(r+t)/2,centerY:(e+n)/2}}function vn(i,r,t,e){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function Wo(i,r,t,e,n,a){a===void 0&&(a=0);var o=vn(i,r,t,e),u=vn(i,r,t,n),f=vn(i,r,a,e),m=vn(i,r,a,n);if(n-e==Math.PI*2){var x=vn(i,r,t,e+Math.PI),w=vn(i,r,a,e+Math.PI),L=[["M",o.x,o.y],["A",t,t,0,1,1,x.x,x.y],["A",t,t,0,1,1,u.x,u.y],["M",f.x,f.y]];return a&&(L.push(["A",a,a,0,1,0,w.x,w.y]),L.push(["A",a,a,0,1,0,m.x,m.y])),L.push(["M",o.x,o.y]),L.push(["Z"]),L}var H=n-e<=Math.PI?0:1,W=[["M",o.x,o.y],["A",t,t,0,H,1,u.x,u.y],["L",m.x,m.y]];return a&&W.push(["A",a,a,0,H,0,f.x,f.y]),W.push(["L",o.x,o.y]),W.push(["Z"]),W}function mo(i,r,t,e,n){var a=vn(i,r,t,e),o=vn(i,r,t,n);if((0,d.isNumberEqual)(n-e,Math.PI*2)){var u=vn(i,r,t,e+Math.PI);return[["M",a.x,a.y],["A",t,t,0,1,1,u.x,u.y],["A",t,t,0,1,1,a.x,a.y],["A",t,t,0,1,0,u.x,u.y],["A",t,t,0,1,0,a.x,a.y],["Z"]]}var f=n-e<=Math.PI?0:1;return[["M",a.x,a.y],["A",t,t,0,f,1,o.x,o.y]]}function fo(i,r){var t=i.points,e=cn(t),n,a,o=r.startAngle,u=r.endAngle,f=u-o;return r.isTransposed?(n=e.maxY*f,a=e.minY*f):(n=e.maxX*f,a=e.minX*f),n+=o,a+=o,{startAngle:a,endAngle:n}}function Po(i,r){if((0,d.isNumber)(i)&&(0,d.isNumber)(r))return[i,r];for(var t=-1,e=0,n=0,a,o=i.length-1,u,f=0;++t<i.length;)a=o,o=t,f+=u=i[a]*r[o]-i[o]*r[a],e+=(i[a]+i[o])*u,n+=(r[a]+r[o])*u;return f*=3,[e/f,n/f]}function vi(i,r){var t=i.attr(),e=r.attr();return(0,d.each)(t,function(n,a){e[a]===void 0&&(e[a]=void 0)}),e}function pa(i,r,t){var e=Math.min(r,t),n=Math.max(r,t);return i>=e&&i<=n}function An(i,r,t){if((0,d.isString)(i))return i.padEnd(r,t);if((0,d.isArray)(i)){var e=i.length;if(e<r)for(var n=r-e,a=0;a<n;a++)i.push(t)}return i}function Pe(i,r){return r.forEach(function(t){delete i[t]}),i}function Tt(i,r,t){r===void 0&&(r=[]),t===void 0&&(t={});for(var e=0,n=i;e<n.length;e++){var a=n[e];t[a]||(r.push(a),t[a]=!0)}return r}function ae(i){if(i.isPolar&&!i.isTransposed)return(i.endAngle-i.startAngle)*i.getRadius();var r=i.convert({x:0,y:0}),t=i.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function he(i){if(i.isPolar){var r=i.startAngle,t=i.endAngle;return t-r==Math.PI*2}return!1}function zt(i,r){var t=i.getCenter();return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function Wt(i,r){var t=!1;if(i)if(i.type==="theta"){var e=i.start,n=i.end;t=pa(r.x,e.x,n.x)&&pa(r.y,e.y,n.y)}else{var a=i.invert(r);t=pa(a.x,0,1)&&pa(a.y,0,1)}return t}function de(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function Se(i,r){r===void 0&&(r=0);var t=i.start,e=i.end,n=i.getWidth(),a=i.getHeight();if(i.isPolar){var o=i.startAngle,u=i.endAngle,f=i.getCenter(),m=i.getRadius();return{type:"path",startState:{path:Wo(f.x,f.y,m+r,o,o)},endState:function(w){var L=(u-o)*w+o,H=Wo(f.x,f.y,m+r,o,L);return{path:H}},attrs:{path:Wo(f.x,f.y,m+r,o,u)}}}var x;return i.isTransposed?x={height:a+r*2}:x={width:n+r*2},{type:"rect",startState:{x:t.x-r,y:e.y-r,width:i.isTransposed?n+r*2:0,height:i.isTransposed?0:a+r*2},endState:x,attrs:{x:t.x-r,y:e.y-r,width:n+r*2,height:a+r*2}}}function Ae(i,r){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var e=1,n=i.length;e<n;e+=1){var a=i[e];t.push(["L",a.x,a.y])}r&&t.push(["Z"])}return t}function He(i,r){for(var t=[i[0]],e=1,n=i.length;e<n;e=e+2){var a=r.convert({x:i[e],y:i[e+1]});t.push(a.x,a.y)}return t}function _r(i,r,t){var e=t.isTransposed,n=t.startAngle,a=t.endAngle,o={x:i[1],y:i[2]},u={x:r[1],y:r[2]},f=[],m=e?"y":"x",x=Math.abs(u[m]-o[m])*(a-n),w=u[m]>=o[m]?1:0,L=x>Math.PI?1:0,H=t.convert(u),W=zt(t,H);if(W>=.5)if(x===Math.PI*2){var et={x:(u.x+o.x)/2,y:(u.y+o.y)/2},ht=t.convert(et);f.push(["A",W,W,0,L,w,ht.x,ht.y]),f.push(["A",W,W,0,L,w,H.x,H.y])}else f.push(["A",W,W,0,L,w,H.x,H.y]);return f}function Lr(i){(0,d.each)(i,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var n=i[t-1],a=i[t+1];a&&a[0].toLowerCase()==="a"?n&&n[0].toLowerCase()==="l"&&(n[0]="M"):n&&n[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var wn=function(i,r,t,e){var n=[],a,o,u=!!e,f,m;if(u){f=[Infinity,Infinity],m=[-Infinity,-Infinity];for(var x=0,w=i.length;x<w;x++){var L=i[x];f=fe.min([0,0],f,L),m=fe.max([0,0],m,L)}f=fe.min([0,0],f,e[0]),m=fe.max([0,0],m,e[1])}for(var x=0,H=i.length;x<H;x++){var L=i[x];if(t)a=i[x?x-1:H-1],o=i[(x+1)%H];else if(x===0||x===H-1){n.push(L);continue}else a=i[x-1],o=i[x+1];var W=[0,0];W=fe.sub(W,o,a),W=fe.scale(W,W,r);var et=fe.distance(L,a),ht=fe.distance(L,o),bt=et+ht;bt!==0&&(et/=bt,ht/=bt);var xt=fe.scale([0,0],W,-et),qt=fe.scale([0,0],W,ht),ie=fe.add([0,0],L,xt),_e=fe.add([0,0],L,qt);u&&(ie=fe.max([0,0],ie,f),ie=fe.min([0,0],ie,m),_e=fe.max([0,0],_e,f),_e=fe.min([0,0],_e,m)),n.push(ie),n.push(_e)}return t&&n.push(n.shift()),n};function Kr(i,r,t){for(var e=!!r,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var u=wn(n,.4,e,t),f=n.length,m=[],x,w,L,a=0;a<f-1;a++)x=u[a*2],w=u[a*2+1],L=n[a+1],m.push(["C",x[0],x[1],w[0],w[1],L[0],L[1]]);return e&&(x=u[f],w=u[f+1],L=n[0],m.push(["C",x[0],x[1],w[0],w[1],L[0],L[1]])),m}function Fr(i,r){return Ae(i,r)}function pi(i,r,t){var e=[],n=i[0],a=null;if(i.length<=2)return Fr(i,r);for(var o=0,u=i.length;o<u;o++){var f=i[o];(!a||!(a.x===f.x&&a.y===f.y))&&(e.push(f.x),e.push(f.y),a=f)}var m=t||[[0,0],[1,1]],x=Kr(e,r,m);return x.unshift(["M",n.x,n.y]),x}function Pi(i,r){var t=[];return(0,d.each)(r,function(e){var n=e[0];switch(n.toLowerCase()){case"m":case"l":case"c":t.push(He(e,i));break;case"z":default:t.push(e);break}}),t}function ca(i,r){var t=[],e,n,a,o;return(0,d.each)(r,function(u,f){var m=u[0];switch(m.toLowerCase()){case"m":case"c":case"q":t.push(He(u,i));break;case"l":e=r[f-1],n=u,a=i.isTransposed,o=a?e[e.length-2]===n[1]:e[e.length-1]===n[2],o?t=t.concat(_r(e,n,i)):t.push(He(u,i));break;case"z":default:t.push(u);break}}),Lr(t),t}var va=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=r,this.y=t,this.height=n,this.width=e}return i.fromRange=function(r,t,e,n){return new i(r,t,e-r,n-t)},Object.defineProperty(i.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(r){return this.x===r.x&&this.y===r.y&&this.width===r.width&&this.height===r.height},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.add=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,d.each)(r,function(n){e.x=Math.min(n.x,e.x),e.y=Math.min(n.y,e.y),e.width=Math.max(n.maxX,e.maxX)-e.x,e.height=Math.max(n.maxY,e.maxY)-e.y}),e},i.prototype.merge=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,d.each)(r,function(n){e.x=Math.max(n.x,e.x),e.y=Math.max(n.y,e.y),e.width=Math.min(n.maxX,e.maxX)-e.x,e.height=Math.min(n.maxY,e.maxY)-e.y}),e},i.prototype.cut=function(r,t){var e=r.width,n=r.height;switch(t){case Ht.TOP:case Ht.TOP_LEFT:case Ht.TOP_RIGHT:return i.fromRange(this.minX,this.minY+n,this.maxX,this.maxY);case Ht.RIGHT:case Ht.RIGHT_TOP:case Ht.RIGHT_BOTTOM:return i.fromRange(this.minX,this.minY,this.maxX-e,this.maxY);case Ht.BOTTOM:case Ht.BOTTOM_LEFT:case Ht.BOTTOM_RIGHT:return i.fromRange(this.minX,this.minY,this.maxX,this.maxY-n);case Ht.LEFT:case Ht.LEFT_TOP:case Ht.LEFT_BOTTOM:return i.fromRange(this.minX+e,this.minY,this.maxX,this.maxY);default:return this}},i.prototype.shrink=function(r){var t=r[0],e=r[1],n=r[2],a=r[3];return new i(this.x+a,this.y+t,this.width-a-e,this.height-t-n)},i.prototype.exceed=function(r){return[Math.max(-this.minY+r.minY,0),Math.max(this.maxX-r.maxX,0),Math.max(this.maxY-r.maxY,0),Math.max(-this.minX+r.minX,0)]},i.prototype.size=function(){return this.width*this.height},i}(),ji=function(i,r){var t=r.start,e=r.end;return new va(i.x+i.width*t.x,i.y+i.height*t.y,i.width*Math.abs(e.x-t.x),i.height*Math.abs(e.y-t.y))};function ai(i){return[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}var Fe=S(70146);function er(i,r){var t=i.event,e=t.target,n=e.getCanvasBBox();return n.width>=r||n.height>=r?n:null}function Ir(i,r){var t=i.event,e=t.target,n=e.getCanvasBBox();return n.width>=r||n.height>=r?e.attr("path"):null}function hn(i){var r=i.event,t,e=r.target;return e&&(t=e.get("element")),t}function ci(i){var r=i.event,t=r.target,e;return t&&(e=t.get("delegateObject")),e}function wa(i){var r=i.event.gEvent;return!(r&&r.fromShape&&r.toShape&&r.fromShape.get("element")===r.toShape.get("element"))}function no(i){return i&&i.component&&i.component.isList()}function ls(i){return i&&i.component&&i.component.isSlider()}function Jo(i){var r=i.event,t=r.target;return t&&t.get("name")==="mask"}function ps(i,r){var t=i.event.target;if(t.get("type")==="path"){var e=Ir(i,r);return e?ou(i.view,e):void 0}var n=er(i,r);return n?au(i.view,n):null}function Ks(i,r,t){var e=er(i,t);if(!e)return null;var n=i.view,a=Ul(n,r,{x:e.x,y:e.y}),o=Ul(n,r,{x:e.maxX,y:e.maxY}),u={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return au(r,u)}function Fo(i){var r=i.geometries,t=[];return(0,d.each)(r,function(e){var n=e.elements;t=t.concat(n)}),i.views&&i.views.length&&(0,d.each)(i.views,function(e){t=t.concat(Fo(e))}),t}function Vs(i,r,t){var e=Fo(i);return e.filter(function(n){return zs(n,r)===t})}function $s(i,r){var t=i.geometries,e=[];return(0,d.each)(t,function(n){var a=n.getElementsBy(function(o){return o.hasState(r)});e=e.concat(a)}),e}function zs(i,r){var t=i.getModel(),e=t.data,n;return(0,d.isArray)(e)?n=e[0][r]:n=e[r],n}function Ou(i,r){return!(r.minX>i.maxX||r.maxX<i.minX||r.minY>i.maxY||r.maxY<i.minY)}function au(i,r){var t=Fo(i),e=[];return(0,d.each)(t,function(n){var a=n.shape,o=a.getCanvasBBox();Ou(r,o)&&e.push(n)}),e}function Vu(i){var r=[];return(0,d.each)(i,function(t){var e=t[0];if(e!=="A")for(var n=1;n<t.length;n=n+2)r.push([t[n],t[n+1]]);else{var a=t.length;r.push([t[a-2],t[a-1]])}}),r}function ou(i,r){var t=Fo(i),e=Vu(r),n=t.filter(function(a){var o=a.shape,u;if(o.get("type")==="path")u=Vu(o.attr("path"));else{var f=o.getCanvasBBox();u=ai(f)}return(0,Fe.default)(e,u)});return n}function ds(i){return i.getComponents().map(function(r){return r.component})}function Ko(i,r){var t=r.x-i.x,e=r.y-i.y;return Math.sqrt(t*t+e*e)}function Lu(i,r){if(i.length<=2)return Fr(i,!1);var t=i[0],e=[];(0,d.each)(i,function(a){e.push(a.x),e.push(a.y)});var n=Kr(e,r,null);return n.unshift(["M",t.x,t.y]),n}function Gl(i,r){return i.x<=r.x&&i.maxX>=r.x&&i.y<=r.y&&i.maxY>r.y}function Du(i){var r=i.parent,t=null;return r&&(t=r.views.filter(function(e){return e!==i})),t}function Wu(i,r){var t=i.getCoordinate();return t.invert(r)}function Ul(i,r,t){var e=Wu(i,t);return r.getCoordinate().convert(e)}function Ql(i,r,t,e){var n=!1;return(0,d.each)(i,function(a){if(a[t]===r[t]&&a[e]===r[e])return n=!0,!1}),n}function Ku(i,r){var t=i.getScaleByField(r);return!t&&i.views&&(0,d.each)(i.views,function(e){if(t=Ku(e,r),t)return!1}),t}var Nc=function(){function i(r){this.actions=[],this.event=null,this.cacheMap={},this.view=r}return i.prototype.cache=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)return this.cacheMap[r[0]];r.length===2&&(this.cacheMap[r[0]]=r[1])},i.prototype.getAction=function(r){return this.actions.find(function(t){return t.name===r})},i.prototype.addAction=function(r){this.actions.push(r)},i.prototype.removeAction=function(r){var t=this.actions,e=this.actions.indexOf(r);e>=0&&t.splice(e,1)},i.prototype.getCurrentPoint=function(){var r=this.event;if(r)if(r.target instanceof HTMLElement){var t=this.view.getCanvas(),e=t.getPointByClient(r.clientX,r.clientY);return e}else return{x:r.x,y:r.y};return null},i.prototype.getCurrentShape=function(){return(0,d.get)(this.event,["gEvent","shape"])},i.prototype.isInPlot=function(){var r=this.getCurrentPoint();return r?this.view.isPointInPlot(r):!1},i.prototype.isInShape=function(r){var t=this.getCurrentShape();return t?t.get("name")===r:!1},i.prototype.isInComponent=function(r){var t=ds(this.view),e=this.getCurrentPoint();return e?!!t.find(function(n){var a=n.getBBox();return r?n.get("name")===r&&Gl(a,e):Gl(a,e)}):!1},i.prototype.destroy=function(){this.view=null,this.event=null,(0,d.each)(this.actions.slice(),function(r){r.destroy()}),this.actions=null,this.cacheMap=null},i}(),J=Nc,Ct=function(){function i(r,t){this.view=r,this.cfg=t}return i.prototype.init=function(){this.initEvents()},i.prototype.initEvents=function(){},i.prototype.clearEvents=function(){},i.prototype.destroy=function(){this.clearEvents()},i}(),me=Ct;function jt(i,r){var t=i.split(":"),e=t[0],n=r.getAction(e)||ga(e,r);if(!n)throw new Error("There is no action named "+e);var a=t[1];return{action:n,methodName:a}}function ke(i){var r=i.action,t=i.methodName;if(r[t])r[t]();else throw new Error("Action("+r.name+") doesn't have a method called "+t)}var ir={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Gr=function(i){(0,st.__extends)(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.callbackCaches={},n.emitCaches={},n.steps=e,n}return r.prototype.init=function(){this.initContext(),i.prototype.init.call(this)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},r.prototype.initEvents=function(){var t=this;(0,d.each)(this.steps,function(e,n){(0,d.each)(e,function(a){var o=t.getActionCallback(n,a);o&&t.bindEvent(a.trigger,o)})})},r.prototype.clearEvents=function(){var t=this;(0,d.each)(this.steps,function(e,n){(0,d.each)(e,function(a){var o=t.getActionCallback(n,a);o&&t.offEvent(a.trigger,o)})})},r.prototype.initContext=function(){var t=this.view,e=new J(t);this.context=e;var n=this.steps;(0,d.each)(n,function(a){(0,d.each)(a,function(o){if((0,d.isFunction)(o.action))o.actionObject={action:oo(o.action,e),methodName:"execute"};else if((0,d.isString)(o.action))o.actionObject=jt(o.action,e);else if((0,d.isArray)(o.action)){var u=o.action;o.actionObject=[],(0,d.each)(u,function(f){o.actionObject.push(jt(f,e))})}})})},r.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t||t===ir.SHOW_ENABLE)return!0;if(t===ir.PROCESSING)return e===ir.START;if(t===ir.START)return e!==ir.PROCESSING;if(t===ir.END)return e===ir.PROCESSING||e===ir.START;if(t===ir.ROLLBACK){if(n[ir.END])return e===ir.END;if(e===ir.START)return!0}return!1},r.prototype.isAllowExcute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return e.once&&this.emitCaches[n]?!1:e.isEnable?e.isEnable(this.context):!0}return!1},r.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},r.prototype.afterExecute=function(t,e){t!==ir.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},r.prototype.getKey=function(t,e){return t+e.trigger+e.action},r.prototype.getActionCallback=function(t,e){var n=this,a=this.context,o=this.callbackCaches,u=e.actionObject;if(e.action&&u){var f=this.getKey(t,e);if(!o[f]){var m=function(x){a.event=x,n.isAllowExcute(t,e)?((0,d.isArray)(u)?(0,d.each)(u,function(w){a.event=x,ke(w)}):(a.event=x,ke(u)),n.afterExecute(t,e),e.callback&&(a.event=x,e.callback(a))):a.event=null};e.debounce?o[f]=(0,d.debounce)(m,e.debounce.wait,e.debounce.immediate):e.throttle?o[f]=(0,d.throttle)(m,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):o[f]=m}return o[f]}return null},r.prototype.bindEvent=function(t,e){var n=t.split(":");n[0]==="window"?window.addEventListener(n[1],e):n[0]==="document"?document.addEventListener(n[1],e):this.view.on(t,e)},r.prototype.offEvent=function(t,e){var n=t.split(":");n[0]==="window"?window.removeEventListener(n[1],e):n[0]==="document"?document.removeEventListener(n[1],e):this.view.off(t,e)},r}(me),pn=Gr,dn={};function ti(i){return dn[(0,d.lowerCase)(i)]}function Nn(i,r){dn[(0,d.lowerCase)(i)]=r}function Fa(i,r,t){var e=ti(i);if(!e)return null;if((0,d.isPlainObject)(e)){var n=(0,d.mix)((0,d.clone)(e),t);return new pn(r,n)}else{var a=e;return new a(r,t)}}var Xa=S(7755),Wi=S(31506);function rs(i){var r,t={point:{default:{fill:i.pointFillColor,r:i.pointSize,stroke:i.pointBorderColor,lineWidth:i.pointBorder,fillOpacity:i.pointFillOpacity},active:{stroke:i.pointActiveBorderColor,lineWidth:i.pointActiveBorder},selected:{stroke:i.pointSelectedBorderColor,lineWidth:i.pointSelectedBorder},inactive:{fillOpacity:i.pointInactiveFillOpacity,strokeOpacity:i.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:i.hollowPointFillColor,lineWidth:i.hollowPointBorder,stroke:i.hollowPointBorderColor,strokeOpacity:i.hollowPointBorderOpacity,r:i.hollowPointSize},active:{stroke:i.hollowPointActiveBorderColor,strokeOpacity:i.hollowPointActiveBorderOpacity},selected:{lineWidth:i.hollowPointSelectedBorder,stroke:i.hollowPointSelectedBorderColor,strokeOpacity:i.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:i.hollowPointInactiveBorderOpacity}},area:{default:{fill:i.areaFillColor,fillOpacity:i.areaFillOpacity,stroke:null},active:{fillOpacity:i.areaActiveFillOpacity},selected:{fillOpacity:i.areaSelectedFillOpacity},inactive:{fillOpacity:i.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:i.hollowAreaBorderColor,lineWidth:i.hollowAreaBorder,strokeOpacity:i.hollowAreaBorderOpacity},active:{fill:null,lineWidth:i.hollowAreaActiveBorder},selected:{fill:null,lineWidth:i.hollowAreaSelectedBorder},inactive:{strokeOpacity:i.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:i.intervalFillColor,fillOpacity:i.intervalFillOpacity},active:{stroke:i.intervalActiveBorderColor,lineWidth:i.intervalActiveBorder},selected:{stroke:i.intervalSelectedBorderColor,lineWidth:i.intervalSelectedBorder},inactive:{fillOpacity:i.intervalInactiveFillOpacity,strokeOpacity:i.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:i.hollowIntervalFillColor,stroke:i.hollowIntervalBorderColor,lineWidth:i.hollowIntervalBorder,strokeOpacity:i.hollowIntervalBorderOpacity},active:{stroke:i.hollowIntervalActiveBorderColor,lineWidth:i.hollowIntervalActiveBorder,strokeOpacity:i.hollowIntervalActiveBorderOpacity},selected:{stroke:i.hollowIntervalSelectedBorderColor,lineWidth:i.hollowIntervalSelectedBorder,strokeOpacity:i.hollowIntervalSelectedBorderOpacity},inactive:{stroke:i.hollowIntervalInactiveBorderColor,lineWidth:i.hollowIntervalInactiveBorder,strokeOpacity:i.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:i.lineBorderColor,lineWidth:i.lineBorder,strokeOpacity:i.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:i.lineActiveBorder},selected:{lineWidth:i.lineSelectedBorder},inactive:{strokeOpacity:i.lineInactiveBorderOpacity}}},e={title:{autoRotate:!0,position:"center",style:{fill:i.axisTitleTextFillColor,fontSize:i.axisTitleTextFontSize,lineHeight:i.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},label:{autoRotate:!0,autoEllipsis:!0,autoHide:!0,offset:16,style:{fill:i.axisLabelFillColor,fontSize:i.axisLabelFontSize,lineHeight:i.axisLabelLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},line:{style:{lineWidth:i.axisLineBorder,stroke:i.axisLineBorderColor}},tickLine:{style:{lineWidth:i.axisTickLineBorder,stroke:i.axisTickLineBorderColor},alignTick:!0,length:i.axisTickLineLength},subTickLine:null,animate:!0},n={line:{type:"line",style:{stroke:i.axisGridBorderColor,lineWidth:i.axisGridBorder,lineDash:i.axisGridLineDash}},alignTick:!0,animate:!0},a={title:null,marker:{symbol:"circle",style:{r:i.legendCircleMarkerSize,fill:i.legendMarkerColor}},itemName:{spacing:5,style:{fill:i.legendItemNameFillColor,fontFamily:i.fontFamily,fontSize:i.legendItemNameFontSize,lineHeight:i.legendItemNameLineHeight,fontWeight:i.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:.2};return{background:i.backgroundColor,defaultColor:i.brandColor,padding:"auto",fontFamily:i.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:i.paletteQualitative10,colors20:i.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(o){var u=o.geometry.coordinate;if(u.isPolar&&u.isTransposed){var f=fo(o.getModel(),u),m=f.startAngle,x=f.endAngle,w=(m+x)/2,L=7.5,H=L*Math.cos(w),W=L*Math.sin(w);return{matrix:Wi.transform(null,[["t",H,W]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,st.__assign)((0,st.__assign)({},t.line.default),{lineDash:[1,1]})},active:{style:(0,st.__assign)((0,st.__assign)({},t.line.active),{lineDash:[1,1]})},inactive:{style:(0,st.__assign)((0,st.__assign)({},t.line.inactive),{lineDash:[1,1]})},selected:{style:(0,st.__assign)((0,st.__assign)({},t.line.selected),{lineDash:[1,1]})}},dash:{default:{style:(0,st.__assign)((0,st.__assign)({},t.line.default),{lineDash:[5.5,1]})},active:{style:(0,st.__assign)((0,st.__assign)({},t.line.active),{lineDash:[5.5,1]})},inactive:{style:(0,st.__assign)((0,st.__assign)({},t.line.inactive),{lineDash:[5.5,1]})},selected:{style:(0,st.__assign)((0,st.__assign)({},t.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{top:(0,d.deepMix)({},e,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:(0,d.deepMix)({},e,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:(0,d.deepMix)({},e,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:n,verticalLimitLength:1/3}),right:(0,d.deepMix)({},e,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:n,verticalLimitLength:1/3}),circle:(0,d.deepMix)({},e,{title:null,label:{offset:8},grid:(0,d.deepMix)({},n,{line:{type:"line"}})}),radius:(0,d.deepMix)({},e,{title:null,label:{offset:8},grid:(0,d.deepMix)({},n,{line:{type:"circle"}})})},legend:{right:(0,d.deepMix)({},a,{layout:"vertical"}),left:(0,d.deepMix)({},a,{layout:"vertical"}),top:(0,d.deepMix)({},a,{layout:"horizontal"}),bottom:(0,d.deepMix)({},a,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:i.sliderRailHeight,defaultLength:i.sliderRailWidth,style:{fill:i.sliderRailFillColor,stroke:i.sliderRailBorderColor,lineWidth:i.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:i.sliderLabelTextFillColor,fontSize:i.sliderLabelTextFontSize,lineHeight:i.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},handler:{size:i.sliderHandlerWidth,style:{fill:i.sliderHandlerFillColor,stroke:i.sliderHandlerBorderColor}},slidable:!0},margin:[0,0,0,0]},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:i.tooltipCrosshairsBorderColor,lineWidth:i.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(r={},r[""+Xa.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:i.tooltipContainerFillColor,opacity:i.tooltipContainerFillOpacity,boxShadow:i.tooltipContainerShadow,borderRadius:i.tooltipContainerBorderRadius+"px",color:i.tooltipTextFillColor,fontSize:i.tooltipTextFontSize+"px",fontFamily:i.fontFamily,lineHeight:i.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},r[""+Xa.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},r[""+Xa.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},r[""+Xa.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},r[""+Xa.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r[""+Xa.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},r)},annotation:{arc:{style:{stroke:i.annotationArcBorderColor,lineWidth:i.annotationArcBorder},animate:!0},line:{style:{stroke:i.annotationLineBorderColor,lineDash:i.annotationLineDash,lineWidth:i.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textAlign:"start",fontFamily:i.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:i.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:i.annotationRegionBorder,stroke:i.annotationRegionBorderColor,fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:i.brandColor,lineWidth:2}},line:{style:{stroke:i.annotationLineBorderColor,lineWidth:i.annotationLineBorder},length:i.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:i.labelFillColor,fontSize:i.labelFontSize,fontFamily:i.fontFamily,stroke:i.labelBorderColor,lineWidth:i.labelBorder},autoRotate:!0},innerLabels:{style:{fill:i.innerLabelFillColor,fontSize:i.innerLabelFontSize,fontFamily:i.fontFamily,stroke:i.innerLabelBorderColor,lineWidth:i.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:i.labelLineBorder}},autoRotate:!0}}}var io={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Cs={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Ve=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],pe=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],pt={backgroundColor:"transparent",brandColor:Ve[0],paletteQualitative10:Ve,paletteQualitative20:pe,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:io[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:io[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:io[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:io[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:io[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:io[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:io[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Ve[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:io[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:io[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:io[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:io[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:io[25],annotationArcBorderColor:io[15],annotationArcBorder:.5,annotationLineBorderColor:io[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:io[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Cs[95],annotationTextBorder:1.5,annotationRegionFillColor:io[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:io[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:io[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:io[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Cs[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:io[25],pointFillColor:Ve[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Cs[100],pointBorderOpacity:1,pointActiveBorderColor:io[100],pointSelectedBorder:2,pointSelectedBorderColor:io[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Ve[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Cs[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:io[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:io[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Ve[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Ve[0],areaFillOpacity:.25,areaActiveFillColor:Ve[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Ve[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Ve[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:io[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:io[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Ve[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:io[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:io[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Ve[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Cs[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:io[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:io[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},Ot=rs(pt),ee={default:Ot};function ye(i){return(0,d.get)(ee,(0,d.lowerCase)(i),ee.default)}function Ne(i,r){ee[(0,d.lowerCase)(i)]=(0,d.deepMix)({},ee.default,r)}function Ye(i,r,t){var e=t.translate(i),n=t.translate(r);return(0,d.isNumberEqual)(e,n)}function hr(i,r){var t=r.coordinate,e=r.getXScale(),n=e.range,a=n[n.length-1],o=n[0],u=t.invert(i),f=u.x;return t.isPolar&&f>(1+a)/2&&(f=o),e.translate(e.invert(f))}function Er(i,r,t){var e=t.coordinate,n=t.getYScale(),a=n.field,o=e.invert(r),u=n.invert(o.y),f=(0,d.find)(i,function(m){var x=m[$t];return x[a][0]<=u&&x[a][1]>=u});return f||i[i.length-1]}var Hr=(0,d.memoize)(function(i){if(i.isCategory)return 1;for(var r=i.values,t=r.length,e=i.translate(r[0]),n=e,a=0;a<t;a++){var o=r[a],u=i.translate(o);u<e&&(e=u),u>n&&(n=u)}return(n-e)/(t-1)});function bn(i,r,t){var e=t;if(!t){var n=r.getAttribute("position"),a=n.getFields();e=a[0]}var o=r.scales;return o[e]?o[e].getText(i[e]):(0,d.hasKey)(i,e)?i[e]:e}function ri(i){var r=(0,d.values)(i.attributes);return(0,d.filter)(r,function(t){return(0,d.contains)(ce,t.type)})}function qn(i){for(var r=ri(i),t,e=0,n=r;e<n.length;e++){var a=n[e],o=a.getScale(a.type);if(o&&o.isLinear){t=o;break}}var u=i.getXScale(),f=i.getYScale();return t||f||u}function da(i,r){var t=r.field,e=i[t];if((0,d.isArray)(e)){var n=e.map(function(a){return r.getText(a)});return n.join("-")}return r.getText(e)}function Ya(i,r){var t,e=r.getGroupScales();if(e.length&&(t=e[0]),t){var n=t.field;return t.getText(i[n])}var a=qn(r);return le(a)}function Ra(i,r,t){if(r.length===0)return null;var e=t.type,n=t.getXScale(),a=t.getYScale(),o=n.field,u=a.field,f=null;if(e==="heatmap"||e==="point"){for(var m=t.coordinate,x=m.invert(i),w=n.invert(x.x),L=a.invert(x.y),H=Infinity,W=0;W<r.length;W++){var et=r[W],ht=et[$t],bt=Math.pow(ht[o]-w,2)+Math.pow(ht[u]-L,2);bt<H&&(H=bt,f=et)}return f}var xt=r[0],qt=r[r.length-1],ie=hr(i,t),_e=xt[$t][o],ze=xt[$t][u],rr=qt[$t][o],sr=a.isLinear&&(0,d.isArray)(ze);if((0,d.isArray)(_e)){for(var W=0;W<r.length;W++){var qe=r[W],ht=qe[$t];if(n.translate(ht[o][0])<=ie&&n.translate(ht[o][1])>=ie)if(sr)(0,d.isArray)(f)||(f=[]),f.push(qe);else{f=qe;break}}(0,d.isArray)(f)&&(f=Er(f,i,t))}else{var wr=void 0;if(!n.isLinear&&n.type!=="timeCat"){for(var W=0;W<r.length;W++){var qe=r[W],ht=qe[$t];if(Ye(ht[o],ie,n))if(sr)(0,d.isArray)(f)||(f=[]),f.push(qe);else{f=qe;break}else n.translate(ht[o])<=ie&&(qt=qe,wr=r[W+1])}(0,d.isArray)(f)&&(f=Er(f,i,t))}else{if((ie>n.translate(rr)||ie<n.translate(_e))&&(ie>n.max||ie<n.min))return null;for(var Vr=0,Br=r.length-1,Tn=void 0;Vr<=Br;){Tn=Math.floor((Vr+Br)/2);var Hn=r[Tn][$t][o];if(Ye(Hn,ie,n))return r[Tn];n.translate(Hn)<=n.translate(ie)?(Vr=Tn+1,qt=r[Tn],wr=r[Tn+1]):(Br===0&&(qt=r[0]),Br=Tn-1)}}qt&&wr&&Math.abs(n.translate(qt[$t][o])-ie)>Math.abs(n.translate(wr[$t][o])-ie)&&(qt=wr)}var Un=Hr(t.getXScale());return!f&&Math.abs(n.translate(qt[$t][o])-ie)<=Un/2&&(f=qt),f}function ts(i,r,t){t===void 0&&(t="");var e=i[$t],n=bn(e,r,t),a=r.tooltipOption,o=r.theme.defaultColor,u=[],f,m;function x(ze,rr){if(!(0,d.isNil)(rr)&&rr!==""){var sr={title:n,data:e,mappingData:i,name:ze,value:rr,color:i.color||o,marker:!0};u.push(sr)}}if((0,d.isObject)(a)){var w=a.fields,L=a.callback;if(L){var H=w.map(function(ze){return i[$t][ze]}),W=L.apply(void 0,H),et=(0,st.__assign)({data:i[$t],mappingData:i,title:n,color:i.color||o,marker:!0},W);u.push(et)}else for(var ht=r.scales,bt=0,xt=w;bt<xt.length;bt++){var qt=xt[bt];if(!(0,d.isNil)(e[qt])){var ie=ht[qt];f=le(ie),m=ie.getText(e[qt]),x(f,m)}}}else{var _e=qn(r);(0,d.isNil)(e[_e.field])||(m=da(e,_e),f=Ya(e,r),x(f,m))}return u}var $o={};function Aa(i,r){$o[i]=r}function Le(i){delete $o[i]}function gr(){return Object.keys($o)}function Dr(i){return $o[i]}var on=function(){function i(r){this.option=this.wrapperOption(r)}return i.prototype.update=function(r){return this.option=this.wrapperOption(r),this},i.prototype.hasAction=function(r){var t=this.option.actions;return(0,d.some)(t,function(e){return e[0]===r})},i.prototype.create=function(r,t){var e=this.option,n=e.type,a=e.cfg,o=n==="theta",u=(0,st.__assign)({start:r,end:t},a),f=(0,Kn.getCoordinate)(o?"polar":n);return this.coordinate=new f(u),this.coordinate.type=n,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},i.prototype.adjust=function(r,t){return this.coordinate.update({start:r,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},i.prototype.rotate=function(r){return this.option.actions.push(["rotate",r]),this},i.prototype.reflect=function(r){return this.option.actions.push(["reflect",r]),this},i.prototype.scale=function(r,t){return this.option.actions.push(["scale",r,t]),this},i.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},i.prototype.getOption=function(){return this.option},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.wrapperOption=function(r){return(0,st.__assign)({type:"rect",actions:[],cfg:{}},r)},i.prototype.execActions=function(r){var t=this,e=this.option.actions;(0,d.each)(e,function(n){var a,o=n[0],u=n.slice(1),f=(0,d.isNil)(r)?!0:r.includes(o);f&&(a=t.coordinate)[o].apply(a,u)})},i}(),Yn=on,ia=function(){function i(r,t,e){this.view=r,this.gEvent=t,this.data=e,this.type=t.type}return Object.defineProperty(i.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[Event (type="+this.type+")]"},i.prototype.clone=function(){return new i(this.view,this.gEvent,this.data)},i}(),vo=ia;function As(i){return!(0,d.isNumber)(i)&&!(0,d.isArray)(i)}function Bu(i){i===void 0&&(i=0);var r=(0,d.isArray)(i)?i:[i];switch(r.length){case 0:r=[0,0,0,0];break;case 1:r=new Array(4).fill(r[0]);break;case 2:r=(0,st.__spreadArrays)(r,r);break;case 3:r=(0,st.__spreadArrays)(r,[r[1]]);break;default:r=r.slice(0,4);break}return r}var Cl=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.top=r,this.right=t,this.bottom=e,this.left=n}return i.prototype.shrink=function(r){var t=r[0],e=r[1],n=r[2],a=r[3];return this.top+=t,this.right+=e,this.bottom+=n,this.left+=a,this},i.prototype.inc=function(r,t){var e=r.width,n=r.height;switch(t){case Ht.TOP:case Ht.TOP_LEFT:case Ht.TOP_RIGHT:this.top+=n;break;case Ht.RIGHT:case Ht.RIGHT_TOP:case Ht.RIGHT_BOTTOM:this.right+=e;break;case Ht.BOTTOM:case Ht.BOTTOM_LEFT:case Ht.BOTTOM_RIGHT:this.bottom+=n;break;case Ht.LEFT:case Ht.LEFT_TOP:case Ht.LEFT_BOTTOM:this.left+=e;break;default:break}return this},i.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},i}();function Al(i){var r=i.padding;if(!As(r))return Bu(r);var t=i.viewBBox,e=i.autoPadding,n=new Cl;(0,d.each)(i.getComponents(),function(u){var f=u.component,m=u.type;if(!(m===kt.GRID||m===kt.TOOLTIP)){var x=f.getLayoutBBox(),w=new va(x.x,x.y,x.width,x.height);if(m===kt.AXIS){var L=w.exceed(t);n.shrink(L)}else{var H=u.direction;n.inc(w,H)}}});var a=n.getPadding();if(e){var o=Bu(i.appendPadding);return[Math.max(e[0]-o[0],a[0]),Math.max(e[1]-o[1],a[1]),Math.max(e[2]-o[2],a[2]),Math.max(e[3]-o[3],a[3])]}return a}function zc(i){var r=i.getController("axis"),t=i.getController("legend"),e=i.getController("annotation"),n=i.getController("slider"),a=Al(i);i.coordinateBBox=i.viewBBox.shrink(a).shrink(Bu(i.appendPadding)),i.adjustCoordinate(),[r,n,t,e].forEach(function(o){o&&o.layout()})}var Sh=function(){function i(){this.scales=new Map,this.syncScales=new Map}return i.prototype.createScale=function(r,t,e,n){var a=e,o=this.getScaleMeta(n);if(t.length===0&&o){var u=o.scale,f={type:u.type};u.isCategory&&(f.values=u.values),a=(0,d.deepMix)(f,o.scaleDef,e)}var m=nn(r,t,a);return this.cacheScale(m,e,n),m},i.prototype.sync=function(){var r=this;this.syncScales.forEach(function(t,e){var n=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=[];(0,d.each)(t,function(u){var f=r.getScale(u);a=(0,d.isNumber)(f.max)?Math.max(a,f.max):a,n=(0,d.isNumber)(f.min)?Math.min(n,f.min):n,(0,d.each)(f.values,function(m){o.includes(m)||o.push(m)})}),(0,d.each)(t,function(u){var f=r.getScale(u);f.isContinuous?f.change({min:n,max:a,values:o}):f.isCategory&&f.change({values:o})})})},i.prototype.cacheScale=function(r,t,e){var n=this.getScaleMeta(e);n&&n.scale.type===r.type?(an(n.scale,r),n.scaleDef=t):(n={key:e,scale:r,scaleDef:t},this.scales.set(e,n));var a=this.getSyncKey(n);if(n.syncKey=a,this.removeFromSyncScales(e),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(e)}},i.prototype.getScale=function(r){var t=this.getScaleMeta(r);if(!t){var e=(0,d.last)(r.split("-")),n=this.syncScales.get(e);n&&n.length&&(t=this.getScaleMeta(n[0]))}return t&&t.scale},i.prototype.deleteScale=function(r){var t=this.getScaleMeta(r);if(t){var e=t.syncKey,n=this.syncScales.get(e);if(n&&n.length){var a=n.indexOf(r);a!==-1&&n.splice(a,1)}}this.scales.delete(r)},i.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},i.prototype.removeFromSyncScales=function(r){var t=this;this.syncScales.forEach(function(e,n){var a=e.indexOf(r);if(a!==-1)return e.splice(a,1),e.length===0&&t.syncScales.delete(n),!1})},i.prototype.getSyncKey=function(r){var t=r.scale,e=r.scaleDef,n=t.field,a=(0,d.get)(e,["sync"]);return a===!0?n:a===!1?void 0:a},i.prototype.getScaleMeta=function(r){return this.scales.get(r)},i}(),nf=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,{visible:t.visible})||this;e.id=(0,d.uniqueId)("view"),e.views=[],e.geometries=[],e.controllers=[],e.interactions={},e.limitInPlot=!1,e.options={data:[],animate:!0},e.usedControllers=gr(),e.scalePool=new Sh,e.layoutFunc=zc,e.isPreMouseInPlot=!1,e.isDataChanged=!1,e.isCoordinateChanged=!1,e.createdScaleKeys=new Map,e.onCanvasEvent=function(ht){var bt=ht.name;if(!bt.includes(":")){var xt=e.createViewEvent(ht);e.doPlotEvent(xt),e.emit(bt,xt)}},e.onDelegateEvents=function(ht){var bt=ht.name;if(!!bt.includes(":")){var xt=e.createViewEvent(ht);e.emit(bt,xt)}};var n=t.parent,a=t.canvas,o=t.backgroundGroup,u=t.middleGroup,f=t.foregroundGroup,m=t.region,x=m===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:m,w=t.padding,L=t.appendPadding,H=t.theme,W=t.options,et=t.limitInPlot;return e.parent=n,e.canvas=a,e.backgroundGroup=o,e.middleGroup=u,e.foregroundGroup=f,e.region=x,e.padding=w,e.appendPadding=L,e.options=(0,st.__assign)((0,st.__assign)({},e.options),W),e.limitInPlot=et,e.themeObject=(0,d.isObject)(H)?(0,d.deepMix)({},ye("default"),H):ye(H),e.init(),e}return r.prototype.setLayout=function(t){this.layoutFunc=t},r.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new Yn(this.options.coordinate),this.initOptions();for(var t=this.views,e=0;e<t.length;e++)t[e].init()},r.prototype.render=function(t){t===void 0&&(t=!1),this.emit(Kt.BEFORE_RENDER),this.paint(t),this.emit(Kt.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this;this.emit(Kt.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear();this.geometries=[];for(var a=this.controllers,n=0;n<a.length;n++)a[n].clear();this.createdScaleKeys.forEach(function(u,f){t.getRootView().scalePool.deleteScale(f)}),this.createdScaleKeys.clear();for(var o=this.views,n=0;n<o.length;n++)o[n].clear();this.emit(Kt.AFTER_CLEAR)},r.prototype.destroy=function(){this.emit(Kt.BEFORE_DESTROY);var t=this.interactions;(0,d.each)(t,function(u){u&&u.destroy()}),this.clear();for(var e=this.controllers,n=0,a=e.length;n<a;n++){var o=e[n];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),i.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var e=this.geometries,n=0,a=e.length;n<a;n++){var o=e[n];o.changeVisible(t)}for(var u=this.controllers,n=0,a=u.length;n<a;n++){var f=u[n];f.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},r.prototype.data=function(t){return(0,d.set)(this.options,"data",t),this.isDataChanged=!0,this},r.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},r.prototype.filter=function(t,e){return(0,d.isFunction)(e)?((0,d.set)(this.options,["filters",t],e),this):(!e&&(0,d.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},r.prototype.axis=function(t,e){return(0,d.isBoolean)(t)?(0,d.set)(this.options,["axes"],t):(0,d.set)(this.options,["axes",t],e),this},r.prototype.legend=function(t,e){return(0,d.isBoolean)(t)?(0,d.set)(this.options,["legends"],t):(0,d.isString)(t)?(0,d.set)(this.options,["legends",t],e):(0,d.set)(this.options,["legends"],t),this},r.prototype.scale=function(t,e){var n=this;return(0,d.isString)(t)?(0,d.set)(this.options,["scales",t],e):(0,d.isObject)(t)&&(0,d.each)(t,function(a,o){(0,d.set)(n.options,["scales",o],a)}),this},r.prototype.tooltip=function(t){return(0,d.set)(this.options,"tooltip",t),this},r.prototype.annotation=function(){return this.getController("annotation")},r.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},r.prototype.coordinate=function(t,e){return(0,d.isString)(t)?(0,d.set)(this.options,"coordinate",{type:t,cfg:e}):(0,d.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},r.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},r.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var n=si(t);if(!n)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new n(this,(0,st.__assign)((0,st.__assign)({},e),{type:t})),this},r.prototype.animate=function(t){return(0,d.set)(this.options,"animate",t),this},r.prototype.updateOptions=function(t){return this.clear(),(0,d.mix)(this.options,t),this.initOptions(),this},r.prototype.option=function(t,e){if(r.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return(0,d.set)(this.options,t,e),this},r.prototype.theme=function(t){return this.themeObject=(0,d.isObject)(t)?(0,d.deepMix)({},this.themeObject,t):ye(t),this},r.prototype.interaction=function(t,e){var n=this.interactions[t];n&&n.destroy();var a=Fa(t,this,e);return a&&(a.init(),this.interactions[t]=a),this},r.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},r.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Kt.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var e=this.views,n=0,a=e.length;n<a;n++){var o=e[n];o.changeData(t)}this.emit(Kt.AFTER_CHANGE_DATA)},r.prototype.createView=function(t){var e={data:this.options.data,scales:(0,d.clone)(this.options.scales),axes:(0,d.clone)(this.options.axes),coordinate:(0,d.clone)(this.coordinateController.getOption()),tooltip:(0,d.clone)(this.options.tooltip),legends:(0,d.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},n=new r((0,st.__assign)((0,st.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Xt.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Xt.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Xt.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,st.__assign)((0,st.__assign)({},e),(0,d.get)(t,"options",{}))}));return this.views.push(n),n},r.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},r.prototype.removeView=function(t){var e=(0,d.remove)(this.views,function(n){return n===t})[0];return e&&e.destroy(),e},r.prototype.getCoordinate=function(){return this.coordinateInstance},r.prototype.getTheme=function(){return this.themeObject},r.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},r.prototype.getYScales=function(){var t={};return this.geometries.map(function(e){var n=e.getYScale(),a=n.field;if(!t[a])return t[a]=!0,n})},r.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},a=0,o=e.length;a<o;a++){var u=e[a],f=t==="x"?u.getXScale():u.getYScale();f&&!n[f.field]&&(n[f.field]=f)}return n},r.prototype.getScaleByField=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},r.prototype.getOptions=function(){return this.options},r.prototype.getData=function(){return this.filteredData},r.prototype.getLayer=function(t){return t===It.BG?this.backgroundGroup:t===It.MID?this.middleGroup:t===It.FORE?this.foregroundGroup:this.foregroundGroup},r.prototype.isPointInPlot=function(t){return Wt(this.getCoordinate(),t)},r.prototype.getLegendAttributes=function(){return(0,d.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},r.prototype.getGroupScales=function(){var t=this.geometries.map(function(e){return e.getGroupScales()});return Tt((0,d.flatten)(t))},r.prototype.getCanvas=function(){return this.getRootView().canvas},r.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},r.prototype.getXY=function(t){var e=this.getCoordinate(),n=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,u;if((0,d.each)(t,function(f,m){n[m]&&(o=n[m].scale(f)),a[m]&&(u=a[m].scale(f))}),!(0,d.isNil)(o)&&!(0,d.isNil)(u))return e.convert({x:o,y:u})},r.prototype.getController=function(t){return(0,d.find)(this.controllers,function(e){return e.name===t})},r.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},r.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},r.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},r.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},r.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},r.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},r.prototype.getSnapRecords=function(t){for(var e=this.geometries,n=[],a=0,o=e.length;a<o;a++){var u=e[a],f=u.dataArray;u.sort(f);for(var m=void 0,x=0,w=f.length;x<w;x++){var L=f[x];m=Ra(t,L,u),m&&n.push(m)}}for(var H=this.views,a=0,o=H.length;a<o;a++){var W=H[a],et=W.getSnapRecords(t);n=n.concat(et)}return n},r.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,a=e.length;n<a;n++){var o=e[n];t=t.concat(o.getComponents())}return t},r.prototype.filterData=function(t){var e=this.options.filters;return(0,d.size)(e)===0?t:(0,d.filter)(t,function(n,a){var o=Object.keys(e);return o.every(function(u){var f=e[u];return f(n[u],n,a)})})},r.prototype.filterFieldData=function(t,e){var n=this.options.filters,a=(0,d.get)(n,t);return(0,d.isUndefined)(a)?e:e.filter(function(o,u){return a(o[t],o,u)})},r.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,n=t.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if((0,d.isEqual)(e,a)&&(0,d.isEqual)(n,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},r.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Kt.BEFORE_PAINT),this.renderBackgroundStyleShape(),this.renderLayoutRecursive(t),this.renderPaintRecursive(t),this.emit(Kt.AFTER_PAINT),this.isDataChanged=!1},r.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,d.get)(this.themeObject,"background");if(t){this.backgruondStyleRectShape||(this.backgruondStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{zIndex:-1}}));var e=this.viewBBox,n=e.x,a=e.y,o=e.width,u=e.height;this.backgruondStyleRectShape.attr({fill:t,x:n,y:a,width:o,height:u})}else this.backgruondStyleRectShape&&(this.backgruondStyleRectShape.remove(!0),this.backgruondStyleRectShape=void 0)}},r.prototype.renderLayoutRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.doLayout();var e=this.viewBBox,n=this.coordinateBBox;As(this.padding)&&(this.autoPadding=[n.tl.y-e.tl.y,e.tr.x-n.tr.x,e.bl.y-n.bl.y,n.tl.x-e.tl.x]);for(var a=this.views,o=0,u=a.length;o<u;o++){var f=a[o];f.renderLayoutRecursive(t)}},r.prototype.renderPaintRecursive=function(t){if(this.limitInPlot){var e=this.middleGroup,n=Se(this.coordinateInstance),a=n.type,o=n.attrs;e.setClip({type:a,attrs:o})}this.paintGeometries(t),this.renderComponents(t);for(var u=this.views,f=0,m=u.length;f<m;f++){var x=u[f];x.renderPaintRecursive(t)}},r.prototype.createScale=function(t,e,n,a){var o=(0,d.get)(this.options.scales,[t]),u=(0,st.__assign)((0,st.__assign)({},o),n);return this.parent?this.parent.createScale(t,e,u,a):this.scalePool.createScale(t,e,u,a)},r.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,a=e.length;n<a;n++){var o=e[n];o.renderDataRecursive(t)}},r.prototype.calculateViewBBox=function(){var t,e,n,a;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,e=o.y,n=o.width,a=o.height}else t=0,e=0,n=this.canvas.get("width"),a=this.canvas.get("height");var u=this.region,f=u.start,m=u.end,x=new va(t+n*f.x,e+a*f.y,n*(m.x-f.x),a*(m.y-f.y));(!this.viewBBox||!this.viewBBox.isEqual(x))&&(this.viewBBox=new va(t+n*f.x,e+a*f.y,n*(m.x-f.x),a*(m.y-f.y)),this.coordinateBBox=this.viewBBox)},r.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},r.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,n=t.length;e<n;e++){var a=t[e],o=Dr(a);o&&this.controllers.push(new o(this))}},r.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,a=e?e.get("origin"):null,o=new vo(this,t,a);return o.type=n,o},r.prototype.doPlotEvent=function(t){var e=t.type,n=t.x,a=t.y,o={x:n,y:a},u=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(u.includes(e)){var f=this.isPointInPlot(o);if(f){var m="plot:"+e;t.type=m,this.emit(m,t),(e==="mouseleave"||e==="touchend")&&(this.isPreMouseInPlot=!1)}e==="mousemove"||e==="touchmove"?(this.isPreMouseInPlot&&!f?(e==="mousemove"&&(t.type=Jt.MOUSE_LEAVE,this.emit(Jt.MOUSE_LEAVE,t)),t.type=Jt.LEAVE,this.emit(Jt.LEAVE,t)):!this.isPreMouseInPlot&&f&&(e==="mousemove"&&(t.type=Jt.MOUSE_ENTER,this.emit(Jt.MOUSE_ENTER,t)),t.type=Jt.ENTER,this.emit(Jt.ENTER,t)),this.isPreMouseInPlot=f):(e==="mouseleave"||e==="touchend")&&this.isPreMouseInPlot&&(e==="mouseleave"&&(t.type=Jt.MOUSE_LEAVE,this.emit(Jt.MOUSE_LEAVE,t)),t.type=Jt.LEAVE,this.emit(Jt.LEAVE,t),this.isPreMouseInPlot=!1)}},r.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},r.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),n=(0,d.get)(this.options,"scales",{}),a=this.geometries,o=0,u=a.length;o<u;o++){var f=a[o];f.scales=this.getGeometryScales();var m={coordinate:e,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?f.update(m):f.init(m)}this.adjustScales()},r.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),a=n.data,o=n.scales,u=o===void 0?{}:o,f=this.filteredData,m=0,x=t.length;m<x;m++){var w=t[m],L=u[w],H=this.getScaleKey(w);this.createScale(w,e.includes(w)?a:f,L,H),this.createdScaleKeys.set(H,!0)}},r.prototype.syncScale=function(){this.getRootView().scalePool.sync()},r.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var a=t[n];e[a]=this.getScaleByField(a)}return e},r.prototype.getScaleFields=function(){for(var t=[],e={},n=this.geometries,a=0;a<n.length;a++){var o=n[a],u=o.getScaleFields();Tt(u,t,e)}return t},r.prototype.getGroupedFields=function(){for(var t=[],e={},n=this.geometries,a=0;a<n.length;a++){var o=n[a],u=o.getGroupFields();Tt(u,t,e)}return t},r.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},r.prototype.adjustCategoryScaleRange=function(){var t=this,e=(0,st.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(o){return!!o}),n=this.getCoordinate(),a=this.options.scales;(0,d.each)(e,function(o){var u=o.field,f=o.values,m=o.isCategory,x=o.isIdentity;if((m||x)&&f&&!(0,d.get)(a,[u,"range"])){var w=f.length,L=void 0;if(w===1)L=[.5,1];else{var H=1,W=0;he(n)?n.isTransposed?(H=(0,d.get)(t.theme,"widthRatio.multiplePie",1/1.3),W=1/w*H,L=[W/2,1-W/2]):L=[0,1-1/w]:(W=1/w/2,L=[W,1-W])}o.range=L}})},r.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var a=e[n];t?a.update():(a.clear(),a.render())}},r.prototype.doLayout=function(){this.layoutFunc(this)},r.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},r.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,u=0;u<o.length;u++){var f=o[u];f.coordinate=n,f.canvasRegion=a,e||f.animate(!1),f.paint(t)}},r.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){var n=this.getComponents()[e];n.component.render()}},r.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},r.prototype.initOptions=function(){for(var t=this.options,e=t.geometries,n=e===void 0?[]:e,a=t.interactions,o=a===void 0?[]:a,u=t.views,f=u===void 0?[]:u,m=t.annotations,x=m===void 0?[]:m,w=0;w<n.length;w++){var L=n[w];this.createGeometry(L)}for(var H=0;H<o.length;H++){var W=o[H],et=W.type,ht=W.cfg;this.interaction(et,ht)}for(var bt=0;bt<f.length;bt++){var xt=f[bt];this.createView(xt)}for(var qt=this.getController("annotation"),ie=0;ie<x.length;ie++){var _e=x[ie];qt.annotation(_e)}},r.prototype.createGeometry=function(t){var e=t.type,n=t.cfg,a=n===void 0?{}:n;if(this[e]){var o=this[e](a);(0,d.each)(t,function(u,f){(0,d.isFunction)(o[f])&&o[f](u)})}},r.prototype.getScaleKey=function(t){return this.id+"-"+t},r}(yn);function Zu(i,r){nf.prototype[i.toLowerCase()]=function(t){t===void 0&&(t={});var e=(0,st.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),n=new r(e);return this.geometries.push(n),n}}var tp=nf,qp=function(i){(0,st.__extends)(r,i);function r(t){var e=this,n=t.container,a=t.width,o=t.height,u=t.autoFit,f=u===void 0?!1:u,m=t.padding,x=t.appendPadding,w=t.renderer,L=w===void 0?"canvas":w,H=t.pixelRatio,W=t.localRefresh,et=W===void 0?!0:W,ht=t.visible,bt=ht===void 0?!0:ht,xt=t.defaultInteractions,qt=xt===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:xt,ie=t.options,_e=t.limitInPlot,ze=t.theme,rr=(0,d.isString)(n)?document.getElementById(n):n,sr=(0,ne.Z)('<div style="position:relative;"></div>');rr.appendChild(sr);var qe=Cr(rr,f,a,o),wr=Dt(L),Vr=new wr.Canvas((0,st.__assign)({container:sr,pixelRatio:H,localRefresh:et},qe));return e=i.call(this,{parent:null,canvas:Vr,backgroundGroup:Vr.addGroup({zIndex:Xt.BG}),middleGroup:Vr.addGroup({zIndex:Xt.MID}),foregroundGroup:Vr.addGroup({zIndex:Xt.FORE}),padding:m,appendPadding:x,visible:bt,options:ie,limitInPlot:_e,theme:ze})||this,e.onResize=(0,d.debounce)(function(){e.forceFit()},300),e.ele=rr,e.canvas=Vr,e.width=qe.width,e.height=qe.height,e.autoFit=f,e.localRefresh=et,e.renderer=L,e.wrapperElement=sr,e.updateCanvasStyle(),e.bindAutoFit(),e.initDefaultInteractions(qt),e}return r.prototype.initDefaultInteractions=function(t){var e=this;(0,d.each)(t,function(n){e.interaction(n)})},r.prototype.changeSize=function(t,e){return this.width===t&&this.height===e?this:(this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),$r(this.wrapperElement),this.wrapperElement=null},r.prototype.changeVisible=function(t){return i.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},r.prototype.forceFit=function(){if(!this.destroyed){var t=Cr(this.ele,!0,this.width,this.height),e=t.width,n=t.height;this.changeSize(e,n)}},r.prototype.updateCanvasStyle=function(){(0,ve.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},r.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},r.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},r}(tp),Md=qp,Vl=function(){function i(r){this.visible=!0,this.components=[],this.view=r}return i.prototype.clear=function(){(0,d.each)(this.components,function(r){r.component.destroy()}),this.components=[]},i.prototype.destroy=function(){this.clear()},i.prototype.getComponents=function(){return this.components},i.prototype.changeVisible=function(r){this.visible!==r&&(this.components.forEach(function(t){r?t.component.show():t.component.hide()}),this.visible=r)},i}(),wh=0,Ip=1/2,Jp=1/2,Eh=.05,yg=function(){function i(r){var t=r.xField,e=r.yField,n=r.adjustNames,a=n===void 0?["x","y"]:n,o=r.dimValuesMap;this.adjustNames=a,this.xField=t,this.yField=e,this.dimValuesMap=o}return i.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},i.prototype.getAdjustRange=function(r,t,e){var n=this.yField,a=e.indexOf(t),o=e.length,u,f;return!n&&this.isAdjust("y")?(u=0,f=1):o>1?(u=e[a===0?0:a-1],f=e[a===o-1?o-1:a+1],a!==0?u+=(t-u)/2:u-=(f-t)/2,a!==o-1?f-=(f-t)/2:f+=(t-e[o-2])/2):(u=t===0?0:t-.5,f=t===0?1:t+.5),{pre:u,next:f}},i.prototype.adjustData=function(r,t){var e=this,n=this.getDimValues(t);d.each(r,function(a,o){d.each(n,function(u,f){e.adjustDim(f,u,a,o)})})},i.prototype.groupData=function(r,t){return d.each(r,function(e){e[t]===void 0&&(e[t]=wh)}),d.groupBy(r,t)},i.prototype.adjustDim=function(r,t,e,n){},i.prototype.getDimValues=function(r){var t=this,e=t.xField,n=t.yField,a=d.assign({},this.dimValuesMap),o=[];if(e&&this.isAdjust("x")&&o.push(e),n&&this.isAdjust("y")&&o.push(n),o.forEach(function(f){a&&a[f]||(a[f]=d.valuesOfKey(r,f).sort(function(m,x){return m-x}))}),!n&&this.isAdjust("y")){var u="y";a[u]=[wh,1]}return a},i}(),Ch=yg,Xf={},Op=function(i){return Xf[i.toLowerCase()]},Ah=function(i,r){if(Op(i))throw new Error("Adjust type '"+i+"' existed.");Xf[i.toLowerCase()]=r},Ft=S(60153),Lp=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.cacheMap={},e.adjustDataArray=[],e.mergeData=[];var n=t.marginRatio,a=n===void 0?Ip:n,o=t.dodgeRatio,u=o===void 0?Jp:o,f=t.dodgeBy,m=t.intervalPadding,x=t.dodgePadding,w=t.xDimensionLength,L=t.groupNum,H=t.defaultSize,W=t.maxColumnWidth,et=t.minColumnWidth,ht=t.columnWidthRatio,bt=t.customOffset;return e.marginRatio=a,e.dodgeRatio=u,e.dodgeBy=f,e.intervalPadding=m,e.dodgePadding=x,e.xDimensionLegenth=w,e.groupNum=L,e.defaultSize=H,e.maxColumnWidth=W,e.minColumnWidth=et,e.columnWidthRatio=ht,e.customOffset=bt,e}return r.prototype.process=function(t){var e=d.clone(t),n=d.flatten(e),a=this.dodgeBy,o=a?d.group(n,a):e;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=n,this.adjustData(o,n),this.adjustDataArray=[],this.mergeData=[],e},r.prototype.adjustDim=function(t,e,n,a){var o=this,u=this.customOffset,f=this.getDistribution(t),m=this.groupData(n,t);return d.each(m,function(x,w){var L;e.length===1?L={pre:e[0]-1,next:e[0]+1}:L=o.getAdjustRange(t,parseFloat(w),e),d.each(x,function(H){var W=H[t],et=f[W],ht=et.indexOf(a);if(d.isNil(u))H[t]=o.getDodgeOffset(L,ht,et.length);else{var bt=L.pre,xt=L.next;H[t]=d.isFunction(u)?u(H,L):(bt+xt)/2+u}})}),[]},r.prototype.getDodgeOffset=function(t,e,n){var a=this,o=a.dodgeRatio,u=a.marginRatio,f=a.intervalPadding,m=a.dodgePadding,x=t.pre,w=t.next,L=w-x,H;if(!d.isNil(f)&&d.isNil(m)&&f>=0){var W=this.getIntervalOnlyOffset(n,e);H=x+W}else if(!d.isNil(m)&&d.isNil(f)&&m>=0){var W=this.getDodgeOnlyOffset(n,e);H=x+W}else if(!d.isNil(f)&&!d.isNil(m)&&f>=0&&m>=0){var W=this.getIntervalAndDodgeOffset(n,e);H=x+W}else{var et=L*o/n,ht=u*et,W=1/2*(L-n*et-(n-1)*ht)+((e+1)*et+e*ht)-1/2*et-1/2*L;H=(x+w)/2+W}return H},r.prototype.getIntervalOnlyOffset=function(t,e){var n=this,a=n.defaultSize,o=n.intervalPadding,u=n.xDimensionLegenth,f=n.groupNum,m=n.dodgeRatio,x=n.maxColumnWidth,w=n.minColumnWidth,L=n.columnWidthRatio,H=o/u,W=(1-(f-1)*H)/f*m/(t-1),et=((1-H*(f-1))/f-W*(t-1))/t;if(et=d.isNil(L)?et:1/f/t*L,!d.isNil(x)){var ht=x/u;et=Math.min(et,ht)}if(!d.isNil(w)){var bt=w/u;et=Math.max(et,bt)}et=a?a/u:et,W=((1-(f-1)*H)/f-t*et)/(t-1);var xt=((1/2+e)*et+e*W+1/2*H)*f-H/2;return xt},r.prototype.getDodgeOnlyOffset=function(t,e){var n=this,a=n.defaultSize,o=n.dodgePadding,u=n.xDimensionLegenth,f=n.groupNum,m=n.marginRatio,x=n.maxColumnWidth,w=n.minColumnWidth,L=n.columnWidthRatio,H=o/u,W=1*m/(f-1),et=((1-W*(f-1))/f-H*(t-1))/t;if(et=L?1/f/t*L:et,!d.isNil(x)){var ht=x/u;et=Math.min(et,ht)}if(!d.isNil(w)){var bt=w/u;et=Math.max(et,bt)}et=a?a/u:et,W=(1-(et*t+H*(t-1))*f)/(f-1);var xt=((1/2+e)*et+e*H+1/2*W)*f-W/2;return xt},r.prototype.getIntervalAndDodgeOffset=function(t,e){var n=this,a=n.intervalPadding,o=n.dodgePadding,u=n.xDimensionLegenth,f=n.groupNum,m=a/u,x=o/u,w=((1-m*(f-1))/f-x*(t-1))/t,L=((1/2+e)*w+e*x+1/2*m)*f-m/2;return L},r.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,a=n[t];return a||(a={},d.each(e,function(o,u){var f=d.valuesOfKey(o,t);f.length||f.push(0),d.each(f,function(m){a[m]||(a[m]=[]),a[m].push(u)})}),n[t]=a),a},r}(Ch),Sv=Lp;function wv(i,r){return(r-i)*Math.random()+i}var ep=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.process=function(t){var e=d.clone(t),n=d.flatten(e);return this.adjustData(e,n),e},r.prototype.adjustDim=function(t,e,n){var a=this,o=this.groupData(n,t);return d.each(o,function(u,f){return a.adjustGroup(u,t,parseFloat(f),e)})},r.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,a=(n-e)*Eh;return wv(e+a,n-a)},r.prototype.adjustGroup=function(t,e,n,a){var o=this,u=this.getAdjustRange(e,n,a);return d.each(t,function(f){f[e]=o.getAdjustOffset(u)}),t},r}(Ch),Ev=ep,wf=d.Cache,Ms=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this,n=t.adjustNames,a=n===void 0?["y"]:n,o=t.height,u=o===void 0?NaN:o,f=t.size,m=f===void 0?10:f,x=t.reverseOrder,w=x===void 0?!1:x;return e.adjustNames=a,e.height=u,e.size=m,e.reverseOrder=w,e}return r.prototype.process=function(t){var e=this,n=e.yField,a=e.reverseOrder,o=n?this.processStack(t):this.processOneDimStack(t);return a?this.reverse(o):o},r.prototype.reverse=function(t){return t.slice(0).reverse()},r.prototype.processStack=function(t){var e=this,n=e.xField,a=e.yField,o=e.reverseOrder,u=o?this.reverse(t):t,f=new wf,m=new wf;return u.map(function(x){return x.map(function(w){var L,H=d.get(w,n,0),W=d.get(w,[a]),et=H.toString();if(W=d.isArray(W)?W[1]:W,!d.isNil(W)){var ht=W>=0?f:m;ht.has(et)||ht.set(et,0);var bt=ht.get(et),xt=W+bt;return ht.set(et,xt),(0,Ft.__assign)((0,Ft.__assign)({},w),(L={},L[a]=[bt,xt],L))}return w})})},r.prototype.processOneDimStack=function(t){var e=this,n=this,a=n.xField,o=n.height,u=n.reverseOrder,f="y",m=u?this.reverse(t):t,x=new wf;return m.map(function(w){return w.map(function(L){var H,W=e.size,et=L[a],ht=W*2/o;x.has(et)||x.set(et,ht/2);var bt=x.get(et);return x.set(et,bt+ht),(0,Ft.__assign)((0,Ft.__assign)({},L),(H={},H[f]=bt,H))})})},r}(Ch),rp=Ms,Ds=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.process=function(t){var e=d.flatten(t),n=this,a=n.xField,o=n.yField,u=this.getXValuesMaxMap(e),f=Math.max.apply(Math,Object.keys(u).map(function(m){return u[m]}));return d.map(t,function(m){return d.map(m,function(x){var w,L,H=x[o],W=x[a];if(d.isArray(H)){var et=(f-u[W])/2;return(0,Ft.__assign)((0,Ft.__assign)({},x),(w={},w[o]=d.map(H,function(bt){return et+bt}),w))}var ht=(f-H)/2;return(0,Ft.__assign)((0,Ft.__assign)({},x),(L={},L[o]=[ht,H+ht],L))})})},r.prototype.getXValuesMaxMap=function(t){var e=this,n=this,a=n.xField,o=n.yField,u=d.groupBy(t,function(f){return f[a]});return d.mapValues(u,function(f){return e.getDimMaxValue(f,o)})},r.prototype.getDimMaxValue=function(t,e){var n=d.map(t,function(o){return d.get(o,e,[])}),a=d.flatten(n);return Math.max.apply(Math,a)},r}(Ch),af=Ds;Ah("Dodge",Sv),Ah("Jitter",Ev),Ah("Stack",rp),Ah("Symmetric",af);var vs={};function Qs(i){return vs[i.toLowerCase()]}function ks(i,r){vs[i.toLowerCase()]=r}var of={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Ef={interval:function(i){return{enter:{animation:i.isRect?i.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:i.isPolar&&i.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},lu={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(i){var r;return i.isRect?r=i.isTransposed?"grow-in-x":"grow-in-y":(r="grow-in-xy",i.isPolar&&i.isTransposed&&(r="wave-in")),{animation:r}},schema:function(i){var r;return i.isRect?r=i.isTransposed?"grow-in-x":"grow-in-y":r="grow-in-xy",{animation:r}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function np(i,r){return{delay:(0,d.isFunction)(i.delay)?i.delay(r):i.delay,easing:(0,d.isFunction)(i.easing)?i.easing(r):i.easing,duration:(0,d.isFunction)(i.duration)?i.duration(r):i.duration,callback:i.callback}}function Yf(i,r,t){var e=Ef[i];return e&&((0,d.isFunction)(e)&&(e=e(r)),e=(0,d.deepMix)({},of,e),t)?e[t]:e}function fc(i,r,t){var e=(0,d.get)(i.get("origin"),"data",$t),n=r.animation,a=np(r,e);if(n){var o=Qs(n);o&&o(i,a,t)}else i.animate(t.toAttrs,a)}function kp(i,r,t,e,n){if(lu[t]){var a=lu[t](e),o=Qs((0,d.get)(a,"animation",""));if(o){var u=(0,st.__assign)((0,st.__assign)((0,st.__assign)({},of.appear),a),r);i.stopAnimate(),o(i,u,{coordinate:e,minYPoint:n,toAttrs:null})}}}var sf=S(31207),Hu=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.states=[];var n=t.shapeFactory,a=t.container,o=t.offscreenGroup,u=t.visible,f=u===void 0?!0:u;return e.shapeFactory=n,e.container=a,e.offscreenGroup=o,e.visible=f,e}return r.prototype.draw=function(t,e){e===void 0&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),this.visible===!1&&this.changeVisible(!1)},r.prototype.update=function(t){var e=this,n=e.shapeFactory,a=e.shape;if(!!a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var o=this.getOffscreenGroup(),u=n.drawShape(this.shapeType,t,o);u.cfg.data=this.data,u.cfg.origin=t,this.syncShapeStyle(a,u,"",this.getAnimateCfg("update"))}},r.prototype.destroy=function(){var t=this,e=t.shapeFactory,n=t.shape;if(n){var a=this.getAnimateCfg("leave");a?fc(n,a,{coordinate:e.coordinate,toAttrs:(0,st.__assign)({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,i.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(e){e.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(e){e.hide()}))},r.prototype.setState=function(t,e){var n=this,a=this,o=a.states,u=a.shapeFactory,f=a.model,m=a.shape,x=a.shapeType,w=o.indexOf(t);if(e){if(w>-1)return;o.push(t),(t==="active"||t==="selected")&&m.toFront()}else{if(w===-1)return;o.splice(w,1),(t==="active"||t==="selected")&&m.toBack()}var L=u.drawShape(x,f,this.getOffscreenGroup());o.length?o.forEach(function(W){n.syncShapeStyle(m,L,W,null)}):this.syncShapeStyle(m,L,"reset",null),L.remove(!0);var H={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",H),(0,sf.propagationDelegate)(this.shape,"statechange",H)},r.prototype.clearStates=function(){var t=this,e=this.states;(0,d.each)(e,function(n){t.setState(n,!1)}),this.states=[]},r.prototype.hasState=function(t){return this.states.includes(t)},r.prototype.getStates=function(){return this.states},r.prototype.getData=function(){return this.data},r.prototype.getModel=function(){return this.model},r.prototype.getBBox=function(){var t=this,e=t.shape,n=t.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(a=e.getCanvasBBox()),n&&n.forEach(function(o){var u=o.getCanvasBBox();a.x=Math.min(u.x,a.x),a.y=Math.min(u.y,a.y),a.minX=Math.min(u.minX,a.minX),a.minY=Math.min(u.minY,a.minY),a.maxX=Math.max(u.maxX,a.maxX),a.maxY=Math.max(u.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},r.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,n=t.geometry,a=t.shapeFactory,o=n.stateOption,u=a.defaultShapeType,f=a.theme[e]||a.theme[u];this.statesStyle=(0,d.deepMix)({},f,o)}return this.statesStyle},r.prototype.getStateStyle=function(t,e){var n=this.getStatesStyle(),a=(0,d.get)(n,[t,"style"],{}),o=a[e]||a;return(0,d.isFunction)(o)?o(this):o},r.prototype.getAnimateCfg=function(t){var e=this.animate;return e?e[t]:null},r.prototype.drawShape=function(t,e){e===void 0&&(e=!1);var n=this,a=n.shapeFactory,o=n.container,u=n.shapeType;if(this.shape=a.drawShape(u,t,o),this.shape){this.setShapeInfo(this.shape,t);var f=this.shape.cfg.name;f?(0,d.isString)(f)&&(this.shape.cfg.name=["element",f]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var m=e?"enter":"appear",x=this.getAnimateCfg(m);x&&fc(this.shape,x,{coordinate:a.coordinate,toAttrs:(0,st.__assign)({},this.shape.attr())})}},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.setShapeInfo=function(t,e){var n=this;if(t.cfg.origin=e,t.cfg.element=this,t.isGroup()){var a=t.get("children");a.forEach(function(o){n.setShapeInfo(o,e)})}},r.prototype.syncShapeStyle=function(t,e,n,a,o){if(n===void 0&&(n=""),o===void 0&&(o=0),t.isGroup())for(var u=t.get("children"),f=e.get("children"),m=0;m<u.length;m++)this.syncShapeStyle(u[m],f[m],n,a,o+m);else{if(n&&n!=="reset"){var x=t.get("name");(0,d.isArray)(x)&&(x=x[1]);var w=this.getStateStyle(n,x||o);e.attr(w)}var L=vi(t,e);this.animate?a?fc(t,a,{coordinate:this.shapeFactory.coordinate,toAttrs:L,shapeModel:this.model}):n?(t.stopAnimate(),t.animate(L,{duration:300})):t.attr(L):t.attr(L)}},r.prototype.getShapeType=function(t){var e=(0,d.get)(t,"shape");return(0,d.isArray)(e)?e[0]:e},r}(yn),Wf=Hu,Mh={},Fu={};function Ma(i){return Mh[i.toLowerCase()]}function pu(i,r){Mh[i.toLowerCase()]=r}function uf(i){return Fu[i.toLowerCase()]}function Gs(i,r){Fu[i.toLowerCase()]=r}var ql=S(57350),oc={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(i,r){var t=this.getShape(i);return t.getPoints?t.getPoints(r):this.getDefaultPoints(r)},getShape:function(i){var r=this[i]||this[this.defaultShapeType];return r.coordinate=this.coordinate,r},getDefaultPoints:function(){return[]},getMarker:function(i,r){var t=this.getShape(i);if(!t.getMarker){var e=this.defaultShapeType;t=this.getShape(e)}var n=this.theme,a=(0,d.get)(n,[i,"default"],{}),o=t.getMarker(r);return(0,d.deepMix)({},a,o)},drawShape:function(i,r,t){var e=this.getShape(i);return e.draw(r,t)}},td={coordinate:null,parsePath:function(i){var r=this.coordinate,t=(0,ql.parsePathString)(i);return r.isPolar?t=ca(r,t):t=Pi(r,t),t},parsePoint:function(i){var r=this.coordinate;return r.convert(i)},parsePoints:function(i){var r=this.coordinate;return i.map(function(t){return r.convert(t)})},draw:function(i,r){}},Qi={};function Ec(i,r){var t=(0,d.upperFirst)(i),e=(0,st.__assign)((0,st.__assign)((0,st.__assign)({},oc),r),{geometryType:i});return Qi[t]=e,e}function ws(i,r,t){var e=(0,d.upperFirst)(i),n=Qi[e],a=(0,st.__assign)((0,st.__assign)({},td),t);return n[r]=a,a}function lf(i){var r=(0,d.upperFirst)(i);return Qi[r]}function Js(i,r,t){if(t===void 0&&(t={}),!r)return[i];var e=(0,d.groupToMap)(i,r),n=[];if(r.length===1&&t[r[0]])for(var a=t[r[0]],o=0,u=a;o<u.length;o++){var f=u[o],m=e["_"+f];m&&n.push(m)}else for(var x in e)if(e.hasOwnProperty(x)){var w=e[x];n.push(w)}return n}function Zl(i,r){return(0,d.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,d.isEqual)(i[t],r[t])})}function Kf(i){return(0,d.isArray)(i)?i:i.split("*")}function cf(i,r){var t=[];return(0,d.each)(r,function(e,n){var a=n.split(" ")[0];a===i&&t.push(e)}),t}var hc=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="base",e.attributes={},e.elements=[],e.elementsMap={},e.animateOption=!0,e.attributeOption={},e.lastElementsMap={},e.generatePoints=!1,e.beforeMappingData=null,e.adjusts={},e.idFields=[],e.hasSorted=!1,e.isCoordinateChanged=!1;var n=t.container,a=t.labelsContainer,o=t.coordinate,u=t.data,f=t.sortable,m=f===void 0?!1:f,x=t.visible,w=x===void 0?!0:x,L=t.theme,H=t.scales,W=H===void 0?{}:H,et=t.scaleDefs,ht=et===void 0?{}:et;return e.container=n,e.labelsContainer=a,e.coordinate=o,e.data=u,e.sortable=m,e.visible=w,e.userTheme=L,e.scales=W,e.scaleDefs=ht,e}return r.prototype.position=function(t){var e=t;(0,d.isPlainObject)(t)||(e={fields:Kf(t)});var n=(0,d.get)(e,"fields");return n.length===1&&(n.unshift("1"),(0,d.set)(e,"fields",n)),(0,d.set)(this.attributeOption,"position",e),this},r.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},r.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},r.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},r.prototype.adjust=function(t){var e=t;return((0,d.isString)(t)||(0,d.isPlainObject)(t))&&(e=[t]),(0,d.each)(e,function(n,a){(0,d.isObject)(n)||(e[a]={type:n})}),this.adjustOption=e,this},r.prototype.style=function(t,e){if((0,d.isString)(t)){var n=Kf(t);this.styleOption={fields:n,callback:e}}else{var a=t,n=a.fields,o=a.callback,u=a.cfg;n||o||u?this.styleOption=t:this.styleOption={cfg:t}}return this},r.prototype.tooltip=function(t,e){if((0,d.isString)(t)){var n=Kf(t);this.tooltipOption={fields:n,callback:e}}else this.tooltipOption=t;return this},r.prototype.animate=function(t){return this.animateOption=t,this},r.prototype.label=function(t,e,n){if((0,d.isString)(t)){var a={},o=Kf(t);a.fields=o,(0,d.isFunction)(e)?a.callback=e:(0,d.isPlainObject)(e)&&(a.cfg=e),n&&(a.cfg=n),this.labelOption=a}else this.labelOption=t;return this},r.prototype.state=function(t){return this.stateOption=t,this},r.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},r.prototype.update=function(t){t===void 0&&(t={});var e=t.data,n=t.isDataChanged,a=t.isCoordinateChanged,o=this,u=o.attributeOption,f=o.lastAttributeOption;(0,d.isEqual)(u,f)?e&&(n||!(0,d.isEqual)(e,this.data))?(this.setCfg(t),this.processData(e)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},r.prototype.paint=function(t){var e=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,d.deepMix)({},Yf(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var n=this.getOffscreenGroup();n.clear();for(var a=this.beforeMappingData,o=this.beforeMapping(a),u=[],f=0,m=o.length;f<m;f++){var x=o[f],w=this.mapping(x);u.push(w),this.createElements(w,f,t)}if(this.canDoGroupAnimation(t)){var L=this.container,H=this.type,W=this.coordinate,et=(0,d.get)(this.animateOption,"appear"),ht=this.getYScale(),bt=W.convert({x:0,y:ht.scale(this.getYMinValue())});kp(L,et,H,W,bt)}this.labelOption&&this.renderLabels((0,d.flatten)(u),t),this.dataArray=u,(0,d.each)(this.lastElementsMap,function(xt){xt.animate=e.animateOption,xt.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,st.__assign)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,a=t.offscreenGroup;e&&e.clear(),n&&n.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},r.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,i.prototype.destroy.call(this)},r.prototype.getGroupScales=function(){return this.groupScales},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},r.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},r.prototype.getGroupAttributes=function(){var t=[];return(0,d.each)(this.attributes,function(e){ce.includes(e.type)&&t.push(e)}),t},r.prototype.getDefaultValue=function(t){var e,n=this.getAttribute(t);return n&&(0,d.isEmpty)(n.scales)&&(e=n.values[0]),e},r.prototype.getAttributeValues=function(t,e){for(var n=[],a=t.scales,o=0,u=a.length;o<u;o++){var f=a[o],m=f.field;f.isIdentity?n.push(f.values):n.push(e[m])}return t.mapping.apply(t,n)},r.prototype.getAdjust=function(t){return this.adjusts[t]},r.prototype.getShapeMarker=function(t,e){var n=this.getShapeFactory();return n.getMarker(t,e)},r.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},r.prototype.getElementId=function(t){t=(0,d.isArray)(t)?t[0]:t;var e=t[$t];if(this.idFields.length){for(var n=e[this.idFields[0]],a=1;a<this.idFields.length;a++)n+="-"+e[this.idFields[a]];return n}var o=this.type,u=this.getXScale(),f=this.getYScale(),m=u.field||"x",x=f.field||"y",w=e[x],L;u.type==="identity"?L=u.values[0]:L=e[m];var H;o==="interval"||o==="schema"?H=L:o==="line"||o==="area"||o==="path"?H=o:H=L+"-"+w;for(var W=this.groupScales,a=0,et=W.length;a<et;a++){var ht=W[a],bt=ht.field;H=H+"-"+e[bt]}var xt=this.getAdjust("dodge");if(xt){var qt=xt.dodgeBy;qt&&(H=H+"-"+e[qt])}return this.getAdjust("jitter")&&(H=H+"-"+t.x+"-"+t.y),H},r.prototype.getScaleFields=function(){var t=[],e={},n=this,a=n.attributeOption,o=n.labelOption,u=n.tooltipOption;for(var f in a)if(a.hasOwnProperty(f)){var m=a[f];m.fields?Tt(m.fields,t,e):m.values&&Tt(m.values,t,e)}return o&&o.fields&&Tt(o.fields,t,e),(0,d.isObject)(u)&&u.fields&&Tt(u.fields,t,e),t},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var e=this.elements,n=0,a=e.length;n<a;n++){var o=e[n];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},r.prototype.getGroupFields=function(){for(var t=[],e={},n=0,a=ce.length;n<a;n++){var o=ce[n],u=this.attributeOption[o];u&&u.fields&&Tt(u.fields,t,e)}return t},r.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,e=t[0],n=t[1];return[e,n]},r.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,a=0;a<t.length;a++){var o=t[a];o.sort(function(u,f){return e.translate(u[$t][n])-e.translate(f[$t][n])})}this.hasSorted=!0},r.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},r.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!lf(t))return this.shapeFactory||(this.shapeFactory=(0,d.clone)(lf(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},r.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale(),a=this.normalizeValues(t[e.field],e),o;return n?o=this.normalizeValues(t[n.field],n):o=t.y?t.y:.1,{x:a,y:o,y0:n?n.scale(this.getYMinValue()):void 0}},r.prototype.createElement=function(t,e){e===void 0&&(e=!1);var n=this.container,a=this.getDrawCfg(t),o=this.getShapeFactory(),u=new Wf({shapeFactory:o,container:n,offscreenGroup:this.getOffscreenGroup()});return u.animate=this.animateOption,u.geometry=this,u.draw(a,e),u},r.prototype.getDrawCfg=function(t){var e=t[$t],n={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),n.shape=a;var o=this.theme.geometries[this.shapeType];n.defaultStyle=(0,d.get)(o,[a,"default"],{}).style;var u=this.styleOption;return u&&(n.style=this.getStyleCfg(u,e)),this.generatePoints&&(n.points=t.points,n.nextPoints=t.nextPoints),n},r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);for(var a=this,o=a.lastElementsMap,u=a.elementsMap,f=a.elements,m=0,x=t.length;m<x;m++){var w=t[m],L=this.getElementId(w);u[L]&&(L=L+"-"+e+"-"+m);var H=o[L];if(!H)H=this.createElement(w,n);else{var W=this.getDrawCfg(w),et=H.getModel();(this.isCoordinateChanged||Zl(W,et))&&(H.animate=this.animateOption,H.update(W)),delete o[L]}f.push(H),u[L]=H}return f},r.prototype.getLabelType=function(){var t=this,e=t.labelOption,n=t.coordinate,a=t.type,o=n.type,u=(0,d.get)(e,["cfg","type"]);return u||(o==="polar"?u="polar":o==="theta"?u="pie":a==="interval"||a==="polygon"?u="interval":u="base"),u},r.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max,a;return e>=0?a=e:n<=0?a=n:a=0,a},r.prototype.createAttrOption=function(t,e,n){if((0,d.isNil)(e)||(0,d.isObject)(e))(0,d.isObject)(e)&&(0,d.isEqual)(Object.keys(e),["values"])?(0,d.set)(this.attributeOption,t,{fields:e.values}):(0,d.set)(this.attributeOption,t,e);else{var a={};(0,d.isNumber)(e)?a.values=[e]:a.fields=Kf(e),n&&((0,d.isFunction)(n)?a.callback=n:a.values=n),(0,d.set)(this.attributeOption,t,a)}},r.prototype.initAttributes=function(){var t=this,e=this,n=e.attributes,a=e.attributeOption,o=e.theme,u=e.shapeType;this.groupScales=[];var f={},m=function(L){if(a.hasOwnProperty(L)){var H=a[L];if(!H)return{value:void 0};var W=(0,st.__assign)({},H),et=W.callback,ht=W.values,bt=W.fields,xt=bt===void 0?[]:bt,qt=xt.map(function(_e){var ze=t.scales[_e];return ze.isCategory&&!f[_e]&&ce.includes(L)&&(t.groupScales.push(ze),f[_e]=!0),ze});W.scales=qt,L!=="position"&&qt.length===1&&qt[0].type==="identity"?W.values=qt[0].values:!et&&!ht&&(L==="size"?W.values=o.sizes:L==="shape"?W.values=o.shapes[u]||[]:L==="color"&&(qt.length?W.values=qt[0].values.length<=10?o.colors10:o.colors20:W.values=o.colors10));var ie=(0,ln.getAttribute)(L);n[L]=new ie(W)}};for(var x in a){var w=m(x);if(typeof w=="object")return w.value}},r.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales,n=e.filter(function(_e){return _e.isCategory}),a=this.groupData(t),o=[],u=0,f=a.length;u<f;u++){for(var m=a[u],x=[],w=0,L=m.length;w<L;w++){var H=m[w],W={};for(var et in H)W[et]=H[et];W[$t]=H;for(var ht=0,bt=n;ht<bt.length;ht++){var xt=bt[ht],qt=xt.field;W[qt]=xt.translate(W[qt])}x.push(W)}o.push(x)}var ie=this.adjustData(o);return this.beforeMappingData=ie,ie},r.prototype.adjustData=function(t){var e=this.adjustOption,n=t;if(e)for(var a=this.getXScale(),o=this.getYScale(),u=a.field,f=o?o.field:null,m=0,x=e.length;m<x;m++){var w=e[m],L=(0,st.__assign)({xField:u,yField:f},w),H=w.type;if(H==="dodge"){var W=[];if(a.isCategory||a.type==="identity")W.push("x");else if(!o)W.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");L.adjustNames=W,L.dodgeRatio=this.theme.columnWidthRatio}else if(H==="stack"){var et=this.coordinate;if(!o){L.height=et.getHeight();var ht=this.getDefaultValue("size")||3;L.size=ht}!et.isTransposed&&(0,d.isNil)(L.reverseOrder)&&(L.reverseOrder=!0)}var bt=Op(H),xt=new bt(L);n=xt.process(n),this.adjusts[H]=xt}return n},r.prototype.groupData=function(t){for(var e=this.getGroupScales(),n=this.scaleDefs,a={},o=[],u=0;u<e.length;u++){var f=e[u],m=f.field;o.push(m),(0,d.get)(n,[m,"values"])&&(a[m]=n[m].values)}return Js(t,o,a)},r.prototype.updateStackRange=function(t,e){for(var n=(0,d.flatten)(e),a=t.field,o=t.min,u=t.max,f=0;f<n.length;f++){var m=n[f],x=Math.min.apply(null,m[a]),w=Math.max.apply(null,m[a]);x<o&&(o=x),w>u&&(u=w)}var L=this.scaleDefs,H={};o<t.min&&!(0,d.get)(L,[a,"min"])&&(H.min=o),u>t.max&&!(0,d.get)(L,[a,"max"])&&(H.max=u),t.change(H)},r.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,a=e.length;n<a;n++){var o=e[n];this.generateShapePoints(o);var u=e[n+1];u&&(this.generateShapePoints(u),o[0].nextPoints=u[0].points)}return e},r.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),a=0;a<t.length;a++){var o=t[a],u=this.createShapePointsCfg(o),f=n?this.getAttributeValues(n,o):null,m=e.getShapePoints(f,u);o.points=m}},r.prototype.normalizeValues=function(t,e){var n=[];if((0,d.isArray)(t))for(var a=0;a<t.length;a++){var o=t[a];n.push(e.scale(o))}else n=e.scale(t);return n},r.prototype.mapping=function(t){for(var e=this.attributes,n=[],a=0;a<t.length;a++){var o=t[a],u={_origin:o[$t],points:o.points,nextPoints:o.nextPoints};for(var f in e)if(e.hasOwnProperty(f)){var m=e[f],x=m.names,w=this.getAttributeValues(m,o);if(x.length>1)for(var L=0;L<w.length;L+=1){var H=w[L],W=x[L];u[W]=(0,d.isArray)(H)&&H.length===1?H[0]:H}else u[x[0]]=w.length===1?w[0]:w}this.convertPoint(u),n.push(u)}return n},r.prototype.convertPoint=function(t){var e=t.x,n=t.y,a,o,u,f=this.coordinate;if((0,d.isArray)(e)&&(0,d.isArray)(n)){a=[],o=[];for(var m=0,x=0,w=e.length,L=n.length;m<w&&x<L;m+=1,x+=1)u=f.convert({x:e[m],y:n[x]}),a.push(u.x),o.push(u.y)}else if((0,d.isArray)(n)){o=[];for(var H=0;H<n.length;H++){var W=n[H];u=f.convert({x:e,y:W}),a&&a!==u.x?((0,d.isArray)(a)||(a=[a]),a.push(u.x)):a=u.x,o.push(u.y)}}else if((0,d.isArray)(e)){a=[];for(var H=0;H<e.length;H++){var et=e[H];u=f.convert({x:et,y:n}),o&&o!==u.y?((0,d.isArray)(o)||(o=[o]),o.push(u.y)):o=u.y,a.push(u.x)}}else{var ht=f.convert({x:e,y:n});a=ht.x,o=ht.y}t.x=a,t.y=o},r.prototype.getStyleCfg=function(t,e){var n=t.fields,a=n===void 0?[]:n,o=t.callback,u=t.cfg;if(u)return u;var f=a.map(function(m){return e[m]});return o.apply(void 0,f)},r.prototype.setCfg=function(t){var e=this,n=t.coordinate,a=t.data,o=t.theme,u=t.scaleDefs;n&&(this.coordinate=n),a&&(this.data=a),u&&(this.scaleDefs=u,this.idFields=[],(0,d.each)(u,function(f,m){f&&f.key&&e.idFields.push(m)})),o&&(this.theme=this.userTheme?(0,d.deepMix)({},o,this.userTheme):o)},r.prototype.renderLabels=function(t,e){e===void 0&&(e=!1);var n=this.geometryLabel;if(!n){var a=this.getLabelType(),o=Ma(a);n=new o(this),this.geometryLabel=n}n.render(t,e);var u=n.labelsRenderer.shapesMap;(0,d.each)(this.elementsMap,function(f,m){var x=cf(m,u);if(x.length){f.labelShape=x;for(var w=0;w<x.length;w++)for(var L=x[w],H=L.getChildren(),W=0;W<H.length;W++){var et=H[W];et.cfg.name=["element","label"],et.cfg.element=f}}})},r.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,d.get)(this.animateOption,"appear")===void 0||(0,d.get)(this.animateOption,"appear")&&(0,d.get)(this.animateOption,["appear","animation"])===void 0)},r}(yn),Rl=hc,ip=Wi.transform;function ff(i,r,t){var e=ip(i.getMatrix(),[["t",r,t]]);i.setMatrix(e)}function ed(i,r){var t=i.attr(),e=t.x,n=t.y,a=ip(i.getMatrix(),[["t",-e,-n],["r",r],["t",e,n]]);i.setMatrix(a)}function Td(){return[1,0,0,0,1,0,0,0,1]}function Gc(i,r){var t=i.getBBox(),e=(t.minX+t.maxX)/2,n=(t.minY+t.maxY)/2;i.applyToMatrix([e,n,1]);var a=ip(i.getMatrix(),[["t",-e,-n],["s",r,r],["t",e,n]]);i.setMatrix(a)}var sc=function(){function i(r){this.shapesMap={},this.lastShapesMap={};var t=r.layout,e=r.container;this.layout=t,this.container=e}return i.prototype.render=function(r,t,e){var n=this;e===void 0&&(e=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(r.length){for(var u=0,f=r;u<f.length;u++){var m=f[u];m&&this.renderLabel(m,o)}this.doLayout(r,t),this.renderLabelLine(r),this.adjustLabel(r)}var x=this.lastShapesMap,w=this.shapesMap;(0,d.each)(w,function(L,H){if(L.destroyed)delete w[H];else{if(x[H]){var W=L.get("data"),et=L.get("origin"),ht=L.get("coordinate"),bt=x[H],xt=L.get("animateCfg");bt.set("data",W),bt.set("origin",et),bt.set("animateCfg",xt),bt.set("coordinate",ht);var qt=(0,d.get)(xt,"update"),ie=bt.getChildren();L.getChildren().map(function(ze,rr){var sr=ie[rr];sr.set("data",W),sr.set("origin",et),sr.set("animateCfg",xt),sr.set("coordinate",ht);var qe=vi(sr,ze);qt?fc(sr,qt,{toAttrs:qe,coordinate:ht}):sr.attr(qe)}),n.shapesMap[H]=bt}else{a.add(L);var _e=(0,d.get)(L.get("animateCfg"),e?"enter":"appear");_e&&fc(L,_e,{toAttrs:(0,st.__assign)({},L.attr()),coordinate:L.get("coordinate")})}delete x[H]}}),(0,d.each)(x,function(L){var H=(0,d.get)(L.get("animateCfg"),"leave");H?fc(L,H,{toAttrs:null,coordinate:L.get("coordinate")}):L.remove(!0)}),this.lastShapesMap=w,o.destroy()},i.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},i.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},i.prototype.renderLabel=function(r,t){var e=r.id,n=r.data,a=r.mappingData,o=r.coordinate,u=r.animate,f=r.content,m={id:e,data:n,origin:a,coordinate:o},x=t.addGroup((0,st.__assign)({name:"label",animateCfg:this.animate===!1||u===null||u===!1?!1:(0,d.deepMix)({},this.animate,u)},m)),w;if(f.isGroup&&f.isGroup()||f.isShape&&f.isShape()){var L=f.getCanvasBBox(),H=L.width,W=L.height,et=(0,d.get)(r,"textAlign","left"),ht=r.x,bt=r.y-W/2;et==="center"?ht=ht-H/2:(et==="right"||et==="end")&&(ht=ht-H),ff(f,ht,bt),w=f,x.add(f)}else w=x.addShape("text",(0,st.__assign)({attrs:(0,st.__assign)({x:r.x,y:r.y,textAlign:r.textAlign,textBaseline:(0,d.get)(r,"textBaseline","middle"),text:r.content},r.style)},m));r.rotate&&ed(w,r.rotate),this.shapesMap[e]=x},i.prototype.doLayout=function(r,t){var e=this;if(this.layout){var n=(0,d.isArray)(this.layout)?this.layout:[this.layout];(0,d.each)(n,function(a){var o=uf((0,d.get)(a,"type",""));if(o){var u=[],f=[];(0,d.each)(e.shapesMap,function(m,x){u.push(m),f.push(t[x])}),o(r,u,f,e.region,a.cfg)}})}},i.prototype.renderLabelLine=function(r){var t=this;(0,d.each)(r,function(e){var n=(0,d.get)(e,"coordinate");if(!(!e||!n)){var a=n.getCenter(),o=n.getRadius();if(!!e.labelLine){var u=(0,d.get)(e,"labelLine",{}),f=e.id,m=u.path;if(!m){var x=vn(a.x,a.y,o,e.angle);m=[["M",x.x,x.y],["L",e.x,e.y]]}var w=t.shapesMap[f];w.destroyed||w.addShape("path",{capture:!1,attrs:(0,st.__assign)({path:m,stroke:e.color?e.color:(0,d.get)(e,["style","fill"],"#000"),fill:null},u.style),id:f,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}})},i.prototype.createOffscreenGroup=function(){var r=this.container,t=r.getGroupBase(),e=new t({});return e},i.prototype.adjustLabel=function(r){var t=this;(0,d.each)(r,function(e){if(e){var n=e.id,a=t.shapesMap[n];if(!a.destroyed){var o=a.find(function(u){return u.get("type")==="text"});o&&(e.offsetX&&o.attr("x",o.attr("x")+e.offsetX),e.offsetY&&o.attr("y",o.attr("y")+e.offsetY))}}})},i}(),Qo=sc;function hf(i){var r=0;return(0,d.each)(i,function(t){r+=t}),r/i.length}var Uc=function(){function i(r){this.geometry=r}return i.prototype.getLabelItems=function(r){var t=this,e=[],n=this.getLabelCfgs(r);return(0,d.each)(r,function(a,o){var u=n[o];if(!u||(0,d.isNil)(a.x)||(0,d.isNil)(a.y)){e.push(null);return}var f=(0,d.isArray)(u.content)?u.content:[u.content];u.content=f;var m=f.length;(0,d.each)(f,function(x,w){if((0,d.isNil)(x)||x===""){e.push(null);return}var L=(0,st.__assign)((0,st.__assign)({},u),t.getLabelPoint(u,a,w));L.textAlign||(L.textAlign=t.getLabelAlign(L,w,m)),L.offset<=0&&(L.labelLine=null),e.push(L)})}),e},i.prototype.render=function(r,t){t===void 0&&(t=!1);var e=this.getLabelItems(r),n=this.getLabelsRenderer(),a=this.getGeometryShapes();n.render(e,a,t)},i.prototype.clear=function(){var r=this.labelsRenderer;r&&r.clear()},i.prototype.destroy=function(){var r=this.labelsRenderer;r&&r.destroy(),this.labelsRenderer=null},i.prototype.getCoordinate=function(){return this.geometry.coordinate},i.prototype.getDefaultLabelCfg=function(){return(0,d.get)(this.geometry.theme,"labels",{})},i.prototype.setLabelPosition=function(r,t,e,n){},i.prototype.getDefaultOffset=function(r){var t=this.getCoordinate(),e=this.getOffsetVector(r);return t.isTransposed?e[0]:e[1]},i.prototype.getLabelOffset=function(r,t,e){var n=this.getDefaultOffset(r.offset),a=this.getCoordinate(),o=a.isTransposed,u=o?"x":"y",f=o?1:-1,m={x:0,y:0};return t>0||e===1?m[u]=n*f:m[u]=n*f*-1,m},i.prototype.getLabelPoint=function(r,t,e){var n=this.getCoordinate(),a=r.content.length;function o(et,ht){var bt=et;return(0,d.isArray)(bt)&&(r.content.length===1?bt.length<=2?bt=bt[et.length-1]:bt=hf(bt):bt=bt[ht]),bt}var u={content:r.content[e],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(t&&this.geometry.type==="polygon"){var f=Po(t.x,t.y);u.x=f[0],u.y=f[1]}else u.x=o(t.x,e),u.y=o(t.y,e);var m=(0,d.isArray)(t.shape)?t.shape[0]:t.shape;if(m==="funnel"||m==="pyramid"){var x=(0,d.get)(t,"nextPoints"),w=(0,d.get)(t,"points");if(x){var L=n.convert(w[1]),H=n.convert(x[1]);u.x=(L.x+H.x)/2,u.y=(L.y+H.y)/2}else if(m==="pyramid"){var L=n.convert(w[1]),H=n.convert(w[2]);u.x=(L.x+H.x)/2,u.y=(L.y+H.y)/2}}r.position&&this.setLabelPosition(u,t,e,r.position);var W=this.getLabelOffset(r,e,a);return u.start={x:u.x,y:u.y},u.x+=W.x,u.y+=W.y,u.color=t.color,u},i.prototype.getLabelAlign=function(r,t,e){var n="center",a=this.getCoordinate();if(a.isTransposed){var o=this.getDefaultOffset(r.offset);o<0?n="right":o===0?n="center":n="left",e>1&&t===0&&(n==="right"?n="left":n==="left"&&(n="right"))}return n},i.prototype.getLabelId=function(r){var t=this.geometry,e=t.type,n=t.getXScale(),a=t.getYScale(),o=r[$t],u=t.getElementId(r);return e==="line"||e==="area"?u+=" "+o[n.field]:e==="path"&&(u+=" "+o[n.field]+"-"+o[a.field]),u},i.prototype.getLabelsRenderer=function(){var r=this.geometry,t=r.labelsContainer,e=r.labelOption,n=r.canvasRegion,a=r.animateOption,o=this.geometry.coordinate,u=this.labelsRenderer;return u||(u=new Qo({container:t,layout:(0,d.get)(e,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=u),u.region=n,u.animate=a?Yf("label",o):!1,u},i.prototype.getLabelCfgs=function(r){var t=this,e=this.geometry,n=this.getDefaultLabelCfg(),a=e.type,o=e.theme,u=e.labelOption,f=e.scales,m=e.coordinate,x=u,w=x.fields,L=x.callback,H=x.cfg,W=w.map(function(ht){return f[ht]}),et=[];return(0,d.each)(r,function(ht,bt){var xt=ht[$t],qt=t.getLabelText(xt,W),ie;if(L){var _e=w.map(function(sr){return xt[sr]});if(ie=L.apply(void 0,_e),(0,d.isNil)(ie)){et.push(null);return}}var ze=(0,st.__assign)((0,st.__assign)({id:t.getLabelId(ht),data:xt,mappingData:ht,coordinate:m},H),ie),rr=ze.content;(0,d.isFunction)(rr)?ze.content=rr(xt,ht,bt):(0,d.isUndefined)(rr)&&(ze.content=qt[0]),(0,d.isFunction)(ze.position)&&(ze.position=ze.position(xt,ht,bt)),a==="polygon"||ze.offset<0&&!["line","point","path"].includes(a)?ze=(0,d.deepMix)({},n,o.innerLabels,ze):ze=(0,d.deepMix)({},n,o.labels,ze),et.push(ze)}),et},i.prototype.getLabelText=function(r,t){var e=[];return(0,d.each)(t,function(n){var a=r[n.field];(0,d.isArray)(a)?a=a.map(function(o){return n.getText(o)}):a=n.getText(a),(0,d.isNil)(a)||a===""?e.push(null):e.push(a)}),e},i.prototype.getOffsetVector=function(r){r===void 0&&(r=0);var t=this.getCoordinate();return t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},i.prototype.getGeometryShapes=function(){var r=this.geometry,t={};return(0,d.each)(r.elementsMap,function(e,n){t[n]=e.shape}),(0,d.each)(r.getOffscreenGroup().getChildren(),function(e){var n=r.getElementId(e.get("origin").mappingData);t[n]=e}),t},i}(),$u=Uc,$f=S(66002),Hl="4.0.15",Ml={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},cs={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Qu=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Wa=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],za={backgroundColor:"#141414",brandColor:Qu[0],paletteQualitative10:Qu,paletteQualitative20:Wa,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:cs[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:cs[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:cs[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:cs[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:cs[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:cs[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:cs[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Qu[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:cs[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:cs[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:cs[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ml[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ml[25],annotationArcBorderColor:cs[15],annotationArcBorder:.5,annotationLineBorderColor:cs[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:cs[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Ml[95],annotationTextBorder:1.5,annotationRegionFillColor:cs[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:cs[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:cs[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:cs[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ml[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:cs[25],pointFillColor:Qu[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ml[100],pointBorderOpacity:1,pointActiveBorderColor:cs[100],pointSelectedBorder:2,pointSelectedBorderColor:cs[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Qu[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ml[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:cs[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:cs[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Qu[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Qu[0],areaFillOpacity:.25,areaActiveFillColor:Qu[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Qu[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Qu[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:cs[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:cs[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Qu[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:cs[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:cs[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Qu[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ml[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:cs[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:cs[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},qu=S(73890),Zo=S(21830),uc=S(46812),Rs=S(66631),gs=S(27154),rd=S(9217),nd=S(5253),Zs=S(39984),Hs=S(98229),Cv=S(35755);function Cf(){return window?window.devicePixelRatio:1}function Vc(i,r,t,e){var n=i-t,a=r-e;return Math.sqrt(n*n+a*a)}function as(i,r,t,e,n,a){return n>=i&&n<=i+t&&a>=r&&a<=r+e}function gu(i,r){return!(r.minX>i.maxX||r.maxX<i.minX||r.minY>i.maxY||r.maxY<i.minY)}function pc(i,r){return!i||!r?i||r:{minX:Math.min(i.minX,r.minX),minY:Math.min(i.minY,r.minY),maxX:Math.max(i.maxX,r.maxX),maxY:Math.max(i.maxY,r.maxY)}}function dc(i,r){return i[0]===r[0]&&i[1]===r[1]}var Th=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Af=/[^\s\,]+/gi,Ph=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ju=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ap=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Qf=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Rp(i,r){var t=i.match(Qf);(0,gs.default)(t,function(e){var n=e.split(":");r.addColorStop(n[0],n[1])})}function qf(i,r,t){var e=Ph.exec(t),n=parseFloat(e[1])%360*(Math.PI/180),a=e[2],o=r.getBBox(),u,f;n>=0&&n<1/2*Math.PI?(u={x:o.minX,y:o.minY},f={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(u={x:o.maxX,y:o.minY},f={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(u={x:o.maxX,y:o.maxY},f={x:o.minX,y:o.minY}):(u={x:o.minX,y:o.maxY},f={x:o.maxX,y:o.minY});var m=Math.tan(n),x=m*m,w=(f.x-u.x+m*(f.y-u.y))/(x+1)+u.x,L=m*(f.x-u.x+m*(f.y-u.y))/(x+1)+u.y,H=i.createLinearGradient(u.x,u.y,w,L);return Rp(a,H),H}function Jf(i,r,t){var e=ju.exec(t),n=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]),u=e[4];if(o===0){var f=u.match(Qf);return f[f.length-1].split(":")[1]}var m=r.getBBox(),x=m.maxX-m.minX,w=m.maxY-m.minY,L=Math.sqrt(x*x+w*w)/2,H=i.createRadialGradient(m.minX+x*n,m.minY+w*a,0,m.minX+x/2,m.minY+w/2,o*L);return Rp(u,H),H}function op(i,r,t){if(r.get("patternSource")&&r.get("patternSource")===t)return r.get("pattern");var e,n,a=ap.exec(t),o=a[1],u=a[2];function f(){e=i.createPattern(n,o),r.set("pattern",e),r.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,u.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=u,n.complete?f():(n.onload=f,n.src=n.src),e}function pf(i,r,t){if((0,Zo.default)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return qf(i,r,t);if(t[0]==="r")return Jf(i,r,t);if(t[0]==="p")return op(i,r,t)}return t}}function Cc(i){var r=0,t=0,e=0,n=0;return(0,Rs.default)(i)?i.length===1?r=t=e=n=i[0]:i.length===2?(r=e=i[0],t=n=i[1]):i.length===3?(r=i[0],t=n=i[1],e=i[2]):(r=i[0],t=i[1],e=i[2],n=i[3]):r=t=e=n=i,[r,t,e,n]}function th(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ih(i,r){return th(i)*th(r)?(i[0]*r[0]+i[1]*r[1])/(th(i)*th(r)):1}function id(i,r){return(i[0]*r[1]<i[1]*r[0]?-1:1)*Math.acos(Ih(i,r))}function Oh(i,r){var t=r[1],e=r[2],n=(0,nd.default)((0,rd.default)(r[3]),Math.PI*2),a=r[4],o=r[5],u=i[0],f=i[1],m=r[6],x=r[7],w=Math.cos(n)*(u-m)/2+Math.sin(n)*(f-x)/2,L=-1*Math.sin(n)*(u-m)/2+Math.cos(n)*(f-x)/2,H=w*w/(t*t)+L*L/(e*e);H>1&&(t*=Math.sqrt(H),e*=Math.sqrt(H));var W=t*t*(L*L)+e*e*(w*w),et=W?Math.sqrt((t*t*(e*e)-W)/W):1;a===o&&(et*=-1),isNaN(et)&&(et=0);var ht=e?et*t*L/e:0,bt=t?et*-e*w/t:0,xt=(u+m)/2+Math.cos(n)*ht-Math.sin(n)*bt,qt=(f+x)/2+Math.sin(n)*ht+Math.cos(n)*bt,ie=[(w-ht)/t,(L-bt)/e],_e=[(-1*w-ht)/t,(-1*L-bt)/e],ze=id([1,0],ie),rr=id(ie,_e);return Ih(ie,_e)<=-1&&(rr=Math.PI),Ih(ie,_e)>=1&&(rr=0),o===0&&rr>0&&(rr=rr-2*Math.PI),o===1&&rr<0&&(rr=rr+2*Math.PI),{cx:xt,cy:qt,rx:dc(i,[m,x])?0:t,ry:dc(i,[m,x])?0:e,startAngle:ze,endAngle:ze+rr,xRotation:n,arcFlag:a,sweepFlag:o}}var E=Math.sin,I=Math.cos,C=Math.atan2,Z=Math.PI;function ut(i,r,t,e,n,a,o){var u=r.stroke,f=r.lineWidth,m=t-n,x=e-a,w=C(x,m),L=new gc({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*I(Z/6)+","+10*E(Z/6)+" L0,0 L"+10*I(Z/6)+",-"+10*E(Z/6),stroke:u,lineWidth:f}});L.translate(n,a),L.rotateAtPoint(n,a,w),i.set(o?"startArrowShape":"endArrowShape",L)}function St(i,r,t,e,n,a,o){var u=r.startArrow,f=r.endArrow,m=r.stroke,x=r.lineWidth,w=o?u:f,L=w.d,H=w.fill,W=w.stroke,et=w.lineWidth,ht=(0,Ft.__rest)(w,["d","fill","stroke","lineWidth"]),bt=t-n,xt=e-a,qt=C(xt,bt);L&&(n=n-I(qt)*L,a=a-E(qt)*L);var ie=new gc({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,Ft.__assign)((0,Ft.__assign)({},ht),{stroke:W||m,lineWidth:et||x,fill:H})});ie.translate(n,a),ie.rotateAtPoint(n,a,qt),i.set(o?"startArrowShape":"endArrowShape",ie)}function At(i,r,t,e,n){var a=C(e-r,t-i);return{dx:I(a)*n,dy:E(a)*n}}function te(i,r,t,e,n,a){typeof r.startArrow=="object"?St(i,r,t,e,n,a,!0):r.startArrow?ut(i,r,t,e,n,a,!0):i.set("startArrowShape",null)}function we(i,r,t,e,n,a){typeof r.endArrow=="object"?St(i,r,t,e,n,a,!1):r.endArrow?ut(i,r,t,e,n,a,!1):i.set("startArrowShape",null)}var Oe={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ke(i,r){var t=r.attr();for(var e in t){var n=t[e],a=Oe[e]?Oe[e]:e;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=pf(i,r,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function nr(i,r,t){for(var e=0;e<r.length;e++){var n=r[e];n.get("visible")?n.draw(i,t):n.skipDraw()}}function $e(i,r,t,e){var n=t.path,a=t.startArrow,o=t.endArrow,u=[0,0],f=[0,0],m={dx:0,dy:0};r.beginPath();for(var x=0;x<n.length;x++){var w=n[x],L=w[0];if(x===0&&a&&a.d){var H=i.getStartTangent();m=At(H[0][0],H[0][1],H[1][0],H[1][1],a.d)}else if(x===n.length-2&&n[x+1][0]==="Z"&&o&&o.d){var W=n[x+1];if(W[0]==="Z"){var H=i.getEndTangent();m=At(H[0][0],H[0][1],H[1][0],H[1][1],o.d)}}else if(x===n.length-1&&o&&o.d&&n[0]!=="Z"){var H=i.getEndTangent();m=At(H[0][0],H[0][1],H[1][0],H[1][1],o.d)}var et=m.dx,ht=m.dy;switch(L){case"M":r.moveTo(w[1]-et,w[2]-ht),f=[w[1],w[2]];break;case"L":r.lineTo(w[1]-et,w[2]-ht);break;case"Q":r.quadraticCurveTo(w[1],w[2],w[3]-et,w[4]-ht);break;case"C":r.bezierCurveTo(w[1],w[2],w[3],w[4],w[5]-et,w[6]-ht);break;case"A":{var bt=void 0;e?(bt=e[x],bt||(bt=Oh(u,w),e[x]=bt)):bt=Oh(u,w);var xt=bt.cx,qt=bt.cy,ie=bt.rx,_e=bt.ry,ze=bt.startAngle,rr=bt.endAngle,sr=bt.xRotation,qe=bt.sweepFlag;if(r.ellipse)r.ellipse(xt,qt,ie,_e,sr,ze,rr,1-qe);else{var wr=ie>_e?ie:_e,Vr=ie>_e?1:ie/_e,Br=ie>_e?_e/ie:1;r.translate(xt,qt),r.rotate(sr),r.scale(Vr,Br),r.arc(0,0,wr,ze,rr,1-qe),r.scale(1/Vr,1/Br),r.rotate(-sr),r.translate(-xt,-qt)}break}case"Z":r.closePath();break;default:break}if(L==="Z")u=f;else{var Tn=w.length;u=[w[Tn-2],w[Tn-1]]}}}function pr(i,r){var t=i.get("canvas");t&&(r==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(t.refreshElement(i,r,t),t.get("autoDraw")&&t.draw(),i.set("hasChanged",!0)))}function Sr(i){var r;if(i.destroyed)r=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),e=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);e&&a?r=pc(t,n):e?r=t:a&&(r=n)}return r}function zr(i){if(!i.length)return null;var r=[],t=[],e=[],n=[];return(0,d.each)(i,function(a){var o=Sr(a);o&&(r.push(o.minX),t.push(o.minY),e.push(o.maxX),n.push(o.maxY))}),{minX:Math.min.apply(null,r),minY:Math.min.apply(null,t),maxX:Math.max.apply(null,e),maxY:Math.max.apply(null,n)}}function dr(i,r){return!i||!r||!gu(i,r)?null:{minX:Math.max(i.minX,r.minX),minY:Math.max(i.minY,r.minY),maxX:Math.min(i.maxX,r.maxX),maxY:Math.min(i.maxY,r.maxY)}}var Ur=S(41056),en=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(t){pr(this,t)},r.prototype.getShapeBase=function(){return T},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(t,e){e&&(t.save(),Ke(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var n=this.getChildren();n.length&&(t.save(),Ke(t,this),this._applyClip(t,this.getClip()),nr(t,n,e),t.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(ui.AbstractGroup),Sn=en,Zn=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return T},r.prototype.getGroupBase=function(){return Sn},r.prototype.onCanvasChange=function(t){pr(this,t)},r.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=(0,Ur.b)(t),a=n(this),o=e/2,u=a.x-o,f=a.y-o,m=a.x+a.width+o,x=a.y+a.height+o;return{x:u,minX:u,y:f,minY:f,width:a.width+e,height:a.height+e,maxX:m,maxY:x}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(t,e){e&&(t.save(),Ke(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var n=this.getClip();if(e){var a=n?zr([this,n]):this.getCanvasBBox();if(!gu(e,a)){this.set("hasChanged",!1);return}}t.save(),Ke(t,this),this._applyClip(t,this.getClip()),this.drawPath(t),t.restore(),this._afterDraw()},r.prototype._afterDraw=function(){var t=this.getCanvasBBox(),e=this.getCanvas();if(this.set("cacheCanvasBBox",t),e){var n=e.getViewRange();this.set("isInView",gu(t,n))}this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},r.prototype.fill=function(t){t.fill()},r.prototype.stroke=function(t){t.stroke()},r.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,a=e.opacity,o=e.strokeOpacity,u=e.fillOpacity;this.isFill()&&(!(0,qu.default)(u)&&u!==1?(t.globalAlpha=u,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,qu.default)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},r.prototype.createPath=function(t){},r.prototype.afterDrawPath=function(t){},r.prototype.isInShape=function(t,e){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,a,o)},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},r}(ui.AbstractShape),Pn=Zn,Fn=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var u=this.attr(),f=u.x,m=u.y,x=u.r,w=o/2,L=Vc(f,m,t,e);return a&&n?L<=x+w:a?L<=x:n?L>=x-w&&L<=x+w:!1},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},r}(Pn),gi=Fn;function Vi(i,r,t,e){return i/(t*t)+r/(e*e)}var Hi=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var u=this.attr(),f=o/2,m=u.x,x=u.y,w=u.rx,L=u.ry,H=(t-m)*(t-m),W=(e-x)*(e-x);return a&&n?Vi(H,W,w+f,L+f)<=1:a?Vi(H,W,w,L)<=1:n?Vi(H,W,w-f,L-f)>=1&&Vi(H,W,w+f,L+f)<=1:!1},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.rx,u=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,u,0,0,Math.PI*2,!1);else{var f=o>u?o:u,m=o>u?1:o/u,x=o>u?u/o:1;t.save(),t.translate(n,a),t.scale(m,x),t.arc(0,0,f,0,Math.PI*2),t.restore(),t.closePath()}},r}(Pn),fa=Hi;function $a(i){return i instanceof HTMLElement&&(0,Zo.default)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Qa=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(t){this._setImage(t.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,Zo.default)(t)){var a=new Image;a.onload=function(){if(e.destroyed)return!1;e.attr("img",a),e.set("loading",!1),e._afterLoading();var o=e.get("callback");o&&o.call(e)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):$a(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t==="img"&&this._setImage(e)},r.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var e=this.attr(),n=e.x,a=e.y,o=e.width,u=e.height,f=e.sx,m=e.sy,x=e.swidth,w=e.sheight,L=e.img;(L instanceof Image||$a(L))&&(!(0,qu.default)(f)&&!(0,qu.default)(m)&&!(0,qu.default)(x)&&!(0,qu.default)(w)?t.drawImage(L,f,m,x,w,n,a,o,u):t.drawImage(L,n,a,o,u))},r}(Pn),so=Qa,No=S(23646);function ea(i,r,t,e,n,a,o){var u=Math.min(i,t),f=Math.max(i,t),m=Math.min(r,e),x=Math.max(r,e),w=n/2;return a>=u-w&&a<=f+w&&o>=m-w&&o<=x+w?No.default.pointToLine(i,r,t,e,a,o)<=n/2:!1}var Eo=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),this.setArrow()},r.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2,u=t.startArrow,f=t.endArrow;u&&te(this,t,a,o,e,n),f&&we(this,t,e,n,a,o)},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){if(!n||!o)return!1;var u=this.attr(),f=u.x1,m=u.y1,x=u.x2,w=u.y2;return ea(f,m,x,w,o,t,e)},r.prototype.createPath=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,u=e.y2,f=e.startArrow,m=e.endArrow,x={dx:0,dy:0},w={dx:0,dy:0};f&&f.d&&(x=At(n,a,o,u,e.startArrow.d)),m&&m.d&&(w=At(n,a,o,u,e.endArrow.d)),t.beginPath(),t.moveTo(n+x.dx,a+x.dy),t.lineTo(o-w.dx,u-w.dy)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2;return No.default.length(e,n,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,u=e.y2;return No.default.pointAt(n,a,o,u,t)},r}(Pn),Ro=Eo,bo=S(74479),ho={circle:function(i,r,t){return[["M",i-t,r],["A",t,t,0,1,0,i+t,r],["A",t,t,0,1,0,i-t,r]]},square:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r-t],["L",i+t,r+t],["L",i-t,r+t],["Z"]]},diamond:function(i,r,t){return[["M",i-t,r],["L",i,r-t],["L",i+t,r],["L",i,r+t],["Z"]]},triangle:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r+e],["L",i,r-e],["L",i+t,r+e],["Z"]]},"triangle-down":function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r-e],["L",i+t,r-e],["L",i,r+e],["Z"]]}},zo=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initAttrs=function(t){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},r.prototype._getPath=function(){var t=this.attr(),e=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),u,f;return(0,uc.default)(a)?(u=a,f=u(e,n,o),f=(0,bo.Z)(f)):(u=r.Symbols[a],f=u(e,n,o)),u?f:(console.warn(a+" marker is not supported."),null)},r.prototype.createPath=function(t){var e=this._getPath(),n=this.get("paramsCache");$e(this,t,{path:e},n)},r.Symbols=ho,r}(Pn),yo=zo,uo=S(15730),tu=S(49274),mu=S(26632);function al(i,r,t){var e=(0,mu.getOffScreenContext)();return i.createPath(e),e.isPointInPath(r,t)}var vl=1e-6;function du(i){return Math.abs(i)<vl?0:i<0?-1:1}function Nu(i,r,t){return(t[0]-i[0])*(r[1]-i[1])==(r[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],r[0])<=t[0]&&t[0]<=Math.max(i[0],r[0])&&Math.min(i[1],r[1])<=t[1]&&t[1]<=Math.max(i[1],r[1])}function Jl(i,r,t){var e=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],u=i[(a+1)%n];if(Nu(o,u,[r,t]))return!0;du(o[1]-t)>0!=du(u[1]-t)>0&&du(r-(t-o[1])*(o[0]-u[0])/(o[1]-u[1])-o[0])<0&&(e=!e)}return e}var jl=S(2879);function tc(i,r,t,e,n,a,o,u){var f=(Math.atan2(u-r,o-i)+Math.PI*2)%(Math.PI*2);if(f<e||f>n)return!1;var m={x:i+t*Math.cos(f),y:r+t*Math.sin(f)};return Vc(m.x,m.y,o,u)<=a/2}var cu=S(35600),Ac=S(77160);function Mc(i){for(var r=!1,t=i.length,e=0;e<t;e++){var n=i[e],a=n[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function Lh(i,r,t,e){for(var n=!1,a=r/2,o=0;o<i.length;o++){var u=i[o],f=u.currentPoint,m=u.params,x=u.prePoint,w=u.box;if(!(w&&!as(w.x-a,w.y-a,w.width+r,w.height+r,t,e))){switch(u.command){case"L":case"Z":n=ea(x[0],x[1],f[0],f[1],r,t,e);break;case"Q":var L=jl.default.pointDistance(x[0],x[1],m[1],m[2],m[3],m[4],t,e);n=L<=r/2;break;case"C":var H=uo.default.pointDistance(x[0],x[1],m[1],m[2],m[3],m[4],m[5],m[6],t,e);n=H<=r/2;break;case"A":var W=u.arcParams,et=W.cx,ht=W.cy,bt=W.rx,xt=W.ry,qt=W.startAngle,ie=W.endAngle,_e=W.xRotation,ze=[t,e,1],rr=[1,0,0,0,1,0,0,0,1],sr=bt>xt?bt:xt,qe=bt>xt?1:bt/xt,wr=bt>xt?xt/bt:1;cu.translate(rr,rr,[-et,-ht]),cu.rotate(rr,rr,-_e),cu.scale(rr,rr,[1/qe,1/wr]),Ac.transformMat3(ze,ze,rr),n=tc(0,0,sr,qt,ie,r,ze[0],ze[1]);break;default:break}if(n)break}}return n}function eh(i){for(var r=i.length,t=[],e=[],n=[],a=0;a<r;a++){var o=i[a],u=o[0];u==="M"?(n.length&&(e.push(n),n=[]),n.push([o[1],o[2]])):u==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&e.push(n),{polygons:t,polylines:e}}var vc=(0,Ft.__assign)({hasArc:Mc,extractPolygons:eh,isPointInStroke:Lh},ui.PathUtil);function Mf(i,r,t){for(var e=!1,n=0;n<i.length;n++){var a=i[n];if(e=Jl(a,r,t),e)break}return e}var sp=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t==="path"&&this._setPathArr(e),this.setArrow()},r.prototype._setPathArr=function(t){this.attrs.path=(0,bo.Z)(t);var e=vc.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,tu.default)(this.attr("path")),this.set("segments",t)),t},r.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,n=t.endArrow;if(e){var a=this.getStartTangent();te(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();we(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var u=this.getSegments(),f=this.get("hasArc"),m=!1;if(n&&(m=vc.isPointInStroke(u,o,t,e)),!m&&a)if(f)m=al(this,t,e);else{var x=this.attr("path"),w=vc.extractPolygons(x);m=Mf(w.polygons,t,e)||Mf(w.polylines,t,e)}return m},r.prototype.createPath=function(t){var e=this.attr(),n=this.get("paramsCache");$e(this,t,e,n)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},r.prototype.getPoint=function(t){var e=this.get("tCache");e||(this._calculateCurve(),this._setTcache(),e=this.get("tCache"));var n,a,o=this.get("curve");if(!e||e.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(e,function(x,w){t>=x[0]&&t<=x[1]&&(n=(t-x[0])/(x[1]-x[0]),a=w)});var u=o[a];if((0,d.isNil)(u)||(0,d.isNil)(a))return null;var f=u.length,m=o[a+1];return uo.default.pointAt(u[f-2],u[f-1],m[1],m[2],m[3],m[4],m[5],m[6],n)},r.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",vc.pathToCurve(t))},r.prototype._setTcache=function(){var t=0,e=0,n=[],a,o,u,f,m=this.get("curve");if(!!m){if((0,d.each)(m,function(x,w){u=m[w+1],f=x.length,u&&(t+=uo.default.length(x[f-2],x[f-1],u[1],u[2],u[3],u[4],u[5],u[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(m,function(x,w){u=m[w+1],f=x.length,u&&(a=[],a[0]=e/t,o=uo.default.length(x[f-2],x[f-1],u[1],u[2],u[3],u[4],u[5],u[6]),e+=o||0,a[1]=e/t,n.push(a))}),this.set("tCache",n)}},r.prototype.getStartTangent=function(){var t=this.getSegments(),e;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([n[0]-o[0],n[1]-o[1]]),e.push([n[0],n[1]])):(e.push([a[0],a[1]]),e.push([n[0],n[1]]))}return e},r.prototype.getEndTangent=function(){var t=this.getSegments(),e=t.length,n;if(e>1){var a=t[e-2].currentPoint,o=t[e-1].currentPoint,u=t[e-1].endTangent;n=[],u?(n.push([o[0]-u[0],o[1]-u[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},r}(Pn),gc=sp;function rh(i,r,t,e,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var u=i[o][0],f=i[o][1],m=i[o+1][0],x=i[o+1][1];if(ea(u,f,m,x,r,t,e))return!0}if(n){var w=i[0],L=i[a-1];if(ea(w[0],w[1],L[0],L[1],r,t,e))return!0}return!1}var Zc=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var u=this.attr().points,f=!1;return n&&(f=rh(u,o,t,e,!0)),!f&&a&&(f=Jl(u,t,e)),f},r.prototype.createPath=function(t){var e=this.attr(),n=e.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},r}(Pn),Ju=Zc,Kc=S(65386),Tf=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,a=e.startArrow,o=e.endArrow,u=n.length,f=n[0][0],m=n[0][1],x=n[u-1][0],w=n[u-1][1];a&&te(this,t,n[1][0],n[1][1],f,m),o&&we(this,t,n[u-2][0],n[u-2][1],x,w)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){if(!n||!o)return!1;var u=this.attr().points;return rh(u,o,t,e,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(t){var e=this.attr(),n=e.points,a=e.startArrow,o=e.endArrow,u=n.length;if(!(n.length<2)){var f=n[0][0],m=n[0][1],x=n[u-1][0],w=n[u-1][1];if(a&&a.d){var L=At(f,m,n[1][0],n[1][1],a.d);f+=L.dx,m+=L.dy}if(o&&o.d){var L=At(n[u-2][0],n[u-2][1],x,w,o.d);x-=L.dx,w-=L.dy}t.beginPath(),t.moveTo(f,m);for(var H=0;H<u-1;H++){var W=n[H];t.lineTo(W[0],W[1])}t.lineTo(x,w)}},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,d.isNil)(e)?(this.set("totalLength",Kc.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(u,f){t>=u[0]&&t<=u[1]&&(a=(t-u[0])/(u[1]-u[0]),o=f)}),No.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var n=0,a=[],o,u;(0,d.each)(t,function(f,m){t[m+1]&&(o=[],o[0]=n/e,u=No.default.length(f[0],f[1],t[m+1][0],t[m+1][1]),n+=u,o[1]=n/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},r}(Pn),df=Tf;function Ps(i,r,t,e,n,a,o){var u=n/2;return as(i-u,r-u,t,n,a,o)||as(i+t-u,r-u,n,e,a,o)||as(i+u,r+e-u,t,n,a,o)||as(i-u,r+u,n,e,a,o)}function mc(i,r,t,e,n,a,o,u){var f=a/2;return ea(i+n,r,i+t-n,r,a,o,u)||ea(i+t,r+n,i+t,r+e-n,a,o,u)||ea(i+t-n,r+e,i+n,r+e,a,o,u)||ea(i,r+e-n,i,r+n,a,o,u)||tc(i+t-n,r+n,n,1.5*Math.PI,2*Math.PI,a,o,u)||tc(i+t-n,r+e-n,n,0,.5*Math.PI,a,o,u)||tc(i+n,r+e-n,n,.5*Math.PI,Math.PI,a,o,u)||tc(i+n,r+n,n,Math.PI,1.5*Math.PI,a,o,u)}var Xl=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var u=this.attr(),f=u.x,m=u.y,x=u.width,w=u.height,L=u.radius;if(L){var W=!1;return n&&(W=mc(f,m,x,w,L,o,t,e)),!W&&a&&(W=al(this,t,e)),W}else{var H=o/2;if(a&&n)return as(f-H,m-H,x+H,w+H,t,e);if(a)return as(f,m,x,w,t,e);if(n)return Ps(f,m,x,w,o,t,e)}},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.width,u=e.height,f=e.radius;if(t.beginPath(),f===0)t.rect(n,a,o,u);else{var m=Cc(f),x=m[0],w=m[1],L=m[2],H=m[3];t.moveTo(n+x,a),t.lineTo(n+o-w,a),w!==0&&t.arc(n+o-w,a+w,w,-Math.PI/2,0),t.lineTo(n+o,a+u-L),L!==0&&t.arc(n+o-L,a+u-L,L,0,Math.PI/2),t.lineTo(n+H,a+u),H!==0&&t.arc(n+H,a+u-H,H,Math.PI/2,Math.PI),t.lineTo(n,a+x),x!==0&&t.arc(n+x,a+x,x,Math.PI,Math.PI*1.5),t.closePath()}},r}(Pn),Pf=Xl,up=S(8914),Dp=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},r.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,up.assembleFont)(t)},r.prototype._setText=function(t){var e=null;(0,Zo.default)(t)&&t.indexOf(`
`)!==-1&&(e=t.split(`
`)),this.set("textArr",e)},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(e)},r.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=t.fontSize*1;return e?e-n:n*.14},r.prototype._drawTextArr=function(t,e,n){var a=this.attrs,o=a.textBaseline,u=a.x,f=a.y,m=a.fontSize*1,x=this._getSpaceingY(),w=(0,up.getTextHeight)(a.text,a.fontSize,a.lineHeight),L;(0,gs.default)(e,function(H,W){L=f+W*(x+m)-w+m,o==="middle"&&(L+=w-m-(w-m)/2),o==="top"&&(L+=w-m),n?t.fillText(H,u,L):t.strokeText(H,u,L)})},r.prototype._drawText=function(t,e){var n=this.attr(),a=n.x,o=n.y,u=this.get("textArr");if(u)this._drawTextArr(t,u,e);else{var f=n.text;e?t.fillText(f,a,o):t.strokeText(f,a,o)}},r.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,a=e.opacity,o=e.strokeOpacity,u=e.fillOpacity;this.isStroke()&&n>0&&(!(0,qu.default)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,qu.default)(u)&&u!==1?(t.globalAlpha=u,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},r.prototype.fill=function(t){this._drawText(t,!0)},r.prototype.stroke=function(t){this._drawText(t,!1)},r}(Pn),Bp=Dp,Tc=S(4555),lp=S(85424),yc=S(22487),If=S(6052);function Fp(i,r){if(r){var t=(0,If.U_)(r);return(0,If.rG)(t,i)}return i}function Hc(i,r,t){var e=i.getTotalMatrix();if(e){var n=Fp([r,t,1],e),a=n[0],o=n[1];return[a,o]}return[r,t]}function ol(i,r,t){if(i.isCanvas&&i.isCanvas())return!0;if(!(0,yc.isAllowCapture)(i)&&i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var e=Hc(i,r,t),n=e[0],a=e[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox;return o||(o=i.getCanvasBBox()),r>=o.minX&&r<=o.maxX&&t>=o.minY&&t<=o.maxY}function cp(i,r,t){if(!ol(i,r,t))return null;for(var e=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var u=n[o];if(u.isGroup())e=cp(u,r,t);else if(ol(u,r,t)){var f=u,m=Hc(u,r,t),x=m[0],w=m[1];f.isInShape(x,w)&&(e=u)}if(e)break}return e}var Pd=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},r.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return T},r.prototype.getGroupBase=function(){return Sn},r.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Cf();return t>=1?Math.ceil(t):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},r.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},r.prototype.setDOMSize=function(t,e){i.prototype.setDOMSize.call(this,t,e);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*e,o>1&&n.scale(o,o)},r.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),e=this.get("el");t.clearRect(0,0,e.width,e.height)},r.prototype.getShape=function(t,e){return this.get("quickHit")?cp(this,t,e):i.prototype.getShape.call(this,t,e,null)},r.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),e=this.getViewRange(),n;if(t.length&&t[0]===this)n=e;else if(n=zr(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY);var a=this.get("clipView");a&&(n=dr(n,e))}return n},r.prototype.refreshElement=function(t){var e=this.get("refreshElements");e.push(t)},r.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,Cv.default)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},r.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Ke(t,this),nr(t,n),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a&&(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Ke(t,this),nr(t,n,a),t.restore()),(0,gs.default)(e,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,Hs.default)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},r.prototype.skipDraw=function(){},r}(ui.AbstractCanvas),nh=Pd,Id=S(71270),xg=Id.version,Od={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ms={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},ad=null;function xc(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function _g(i){var r=Od[i.type],t=i.getParent();if(!r)throw new Error("the type "+i.type+" is not supported by svg");var e=xc(r);if(i.get("id")&&(e.id=i.get("id")),i.set("el",e),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e}function ih(i,r){var t=i.get("el"),e=(0,d.toArray)(t.children).sort(r),n=document.createDocumentFragment();e.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Np(i,r){var t=i.parentNode,e=Array.from(t.childNodes).filter(function(u){return u.nodeType===1&&u.nodeName.toLowerCase()!=="defs"}),n=e[r],a=e.indexOf(i);if(n){if(a>r)t.insertBefore(i,n);else if(a<r){var o=e[r+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function bg(i,r){var t=i.cfg.el,e=i.attr(),n={dx:e.shadowOffsetX,dy:e.shadowOffsetY,blur:e.shadowBlur,color:e.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=r.find("filter",n);a||(a=r.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Ld(i){var r=i.attr().matrix;if(r){for(var t=i.cfg.el,e=[],n=0;n<9;n+=3)e.push(r[n]+","+r[n+1]);e=e.join(","),e.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+e+")"):console.warn("invalid matrix:",r)}}function ah(i,r){var t=i.getClip(),e=i.get("el");if(!t)e.removeAttribute("clip-path");else if(t&&!e.hasAttribute("clip-path")){_g(t),t.createPath(r);var n=r.addClip(t);e.setAttribute("clip-path","url(#"+n+")")}}function Av(i,r){r.forEach(function(t){t.draw(i)})}function p0(i,r){var t=i.get("canvas");if(t&&t.get("autoDraw")){var e=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(r==="remove"){var u=i.get("isClipShape");if(u){var f=o&&o.parentNode,m=f&&f.parentNode;f&&m&&m.removeChild(f)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(r==="show")o.setAttribute("visibility","visible");else if(r==="hide")o.setAttribute("visibility","hidden");else if(r==="zIndex")Np(o,a.indexOf(i));else if(r==="sort"){var x=i.get("children");x&&x.length&&ih(i,function(w,L){return x.indexOf(w)-x.indexOf(L)?1:0})}else r==="clear"?o&&(o.innerHTML=""):r==="matrix"?Ld(i):r==="clip"?ah(i,e):r==="attr"||r==="add"&&i.draw(e)}}var rm=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.isEntityGroup=function(){return!0},r.prototype.createDom=function(){var t=xc("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},r.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context");this.createPath(n,t)}},r.prototype.onCanvasChange=function(t){p0(this,t)},r.prototype.getShapeBase=function(){return y},r.prototype.getGroupBase=function(){return r},r.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),ah(this,t),this.createPath(t),e.length&&Av(t,e))},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){ms[u]&&a.setAttribute(ms[u],o)}),Ld(this)},r}(ui.AbstractGroup),Sg=rm,sa=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context");this.draw(n,t)}},r.prototype.getShapeBase=function(){return y},r.prototype.getGroupBase=function(){return Sg},r.prototype.onCanvasChange=function(t){p0(this,t)},r.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=(0,Ur.b)(this.get("type"));n&&(e=n(this))}if(e){var a=e.x,o=e.y,u=e.width,f=e.height,m=this.getHitLineWidth(),x=m/2,w=a-x,L=o-x,H=a+u+x,W=o+f+x;return{x:w,y:L,minX:w,minY:L,maxX:H,maxY:W,width:u+m,height:f+m}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},r.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},r.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},r.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||_g(this),ah(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},r.prototype.createPath=function(t,e){},r.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),a=n.fill,o=n.fillStyle,u=n.stroke,f=n.strokeStyle,m=n.fillOpacity,x=n.strokeOpacity,w=n.lineWidth,L=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),m&&L.setAttribute(ms.fillOpacity,m)),this.canStroke&&w>0&&(e?"stroke"in n?this._setColor(t,"stroke",u):"strokeStyle"in n&&this._setColor(t,"stroke",f):this._setColor(t,"stroke",u||f),x&&L.setAttribute(ms.strokeOpacity,x),w&&L.setAttribute(ms.lineWidth,w))},r.prototype._setColor=function(t,e,n){var a=this.get("el");if(!n){a.setAttribute(ms[e],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(ms[e],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(ms[e],"url(#"+o+")")}else a.setAttribute(ms[e],n)},r.prototype.shadow=function(t,e){var n=this.attr(),a=e||n,o=a.shadowOffsetX,u=a.shadowOffsetY,f=a.shadowBlur,m=a.shadowColor;(o||u||f||m)&&bg(this,t)},r.prototype.transform=function(t){var e=this.attr(),n=(t||e).matrix;n&&Ld(this)},r.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},r.prototype.isPointInPath=function(t,e){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),u=t+o.left,f=e+o.top,m=document.elementFromPoint(u,f);return!!(m&&m.isEqualNode(n))},r.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},r}(ui.AbstractShape),vf=sa,Vn=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,r:0})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){u==="x"||u==="y"?a.setAttribute("c"+u,o):ms[u]&&a.setAttribute(ms[u],o)})},r}(vf),nm=Vn,sl=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){ms[u]&&a.setAttribute(ms[u],o)}),a.innerHTML=n.html},r}(vf),kd=sl,wg=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){u==="x"||u==="y"?a.setAttribute("c"+u,o):ms[u]&&a.setAttribute(ms[u],o)})},r}(vf),Rd=wg,Mv=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(e||a,function(u,f){f==="img"?n._setImage(a.img):ms[f]&&o.setAttribute(ms[f],u)})},r.prototype.setAttr=function(t,e){this.attrs[t]=e,t==="img"&&this._setImage(e)},r.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},r}(vf),od=Mv,fp=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){if(u==="startArrow"||u==="endArrow")if(o){var f=(0,d.isObject)(o)?t.addArrow(n,ms[u]):t.getDefaultArrow(n,ms[u]);a.setAttribute(ms[u],"url(#"+f+")")}else a.removeAttribute(ms[u]);else ms[u]&&a.setAttribute(ms[u],o)})},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2;return No.default.length(e,n,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,u=e.y2;return No.default.pointAt(n,a,o,u,t)},r}(vf),Dd=fp,Of={circle:function(i,r,t){return[["M",i,r],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r-t],["L",i+t,r+t],["L",i-t,r+t],["Z"]]},diamond:function(i,r,t){return[["M",i-t,r],["L",i,r-t],["L",i+t,r],["L",i,r+t],["Z"]]},triangle:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r+e],["L",i,r-e],["L",i+t,r+e],["z"]]},triangleDown:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r-e],["L",i+t,r-e],["L",i,r+e],["Z"]]}},hp={get:function(i){return Of[i]},register:function(i,r){Of[i]=r},remove:function(i){delete Of[i]},getAll:function(){return Of}},sd=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t){var e=this.get("el");e.setAttribute("d",this._assembleMarker())},r.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(e){return e.join(" ")}).join(""):t},r.prototype._getPath=function(){var t=this.attr(),e=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",u;return(0,d.isFunction)(o)?u=o:u=hp.get(o),u?u(e,n,a):(console.warn(u+" symbol is not exist."),null)},r.symbolsFactory=hp,r}(vf),Bd=sd,kh=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(e||a,function(u,f){if(f==="path"&&(0,d.isArray)(u))o.setAttribute("d",n._formatPath(u));else if(f==="startArrow"||f==="endArrow")if(u){var m=(0,d.isObject)(u)?t.addArrow(a,ms[f]):t.getDefaultArrow(a,ms[f]);o.setAttribute(ms[f],"url(#"+m+")")}else o.removeAttribute(ms[f]);else ms[f]&&o.setAttribute(ms[f],u)})},r.prototype._formatPath=function(t){var e=t.map(function(n){return n.join(" ")}).join("");return~e.indexOf("NaN")?"":e},r.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},r.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength(),a=e?e.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},r}(vf),Fd=kh,Nd=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){u==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(f){return f[0]+","+f[1]}).join(" ")):ms[u]&&a.setAttribute(ms[u],o)})},r}(vf),zd=Nd,zp=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,d.each)(e||n,function(o,u){u==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(f){return f[0]+","+f[1]}).join(" ")):ms[u]&&a.setAttribute(ms[u],o)})},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,d.isNil)(e)?(this.set("totalLength",Kc.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(u,f){t>=u[0]&&t<=u[1]&&(a=(t-u[0])/(u[1]-u[0]),o=f)}),No.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var n=0,a=[],o,u;(0,d.each)(t,function(f,m){t[m+1]&&(o=[],o[0]=n/e,u=No.default.length(f[0],f[1],t[m+1][0],t[m+1][1]),n+=u,o[1]=n/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},r}(vf),pp=zp,Pc=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Gd=/[^\s\,]+/gi;function Ud(i){var r=0,t=0,e=0,n=0;return(0,d.isArray)(i)?i.length===1?r=t=e=n=i[0]:i.length===2?(r=e=i[0],t=n=i[1]):i.length===3?(r=i[0],t=n=i[1],e=i[2]):(r=i[0],t=i[1],e=i[2],n=i[3]):r=t=e=n=i,{r1:r,r2:t,r3:e,r4:n}}function Tv(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Pc),each(i,function(r,t){if(r=r.match(Gd),r[0].length>1){var e=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=e}each(r,function(n,a){isNaN(n)||(r[a]=+n)}),i[t]=r}),i}var Vd=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el"),u=!1,f=["x","y","width","height","radius"];(0,d.each)(e||a,function(m,x){f.indexOf(x)!==-1&&!u?(o.setAttribute("d",n._assembleRect(a)),u=!0):f.indexOf(x)===-1&&ms[x]&&o.setAttribute(ms[x],m)})},r.prototype._assembleRect=function(t){var e=t.x,n=t.y,a=t.width,o=t.height,u=t.radius;if(!u)return"M "+e+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var f=Ud(u);(0,d.isArray)(u)?u.length===1?f.r1=f.r2=f.r3=f.r4=u[0]:u.length===2?(f.r1=f.r3=u[0],f.r2=f.r4=u[1]):u.length===3?(f.r1=u[0],f.r2=f.r4=u[1],f.r3=u[2]):(f.r1=u[0],f.r2=u[1],f.r3=u[2],f.r4=u[3]):f.r1=f.r2=f.r3=f.r4=u;var m=[["M "+(e+f.r1)+","+n],["l "+(a-f.r1-f.r2)+",0"],["a "+f.r2+","+f.r2+",0,0,1,"+f.r2+","+f.r2],["l 0,"+(o-f.r2-f.r3)],["a "+f.r3+","+f.r3+",0,0,1,"+-f.r3+","+f.r3],["l "+(f.r3+f.r4-a)+",0"],["a "+f.r4+","+f.r4+",0,0,1,"+-f.r4+","+-f.r4],["l 0,"+(f.r4+f.r1-o)],["a "+f.r1+","+f.r1+",0,0,1,"+f.r1+","+-f.r1],["z"]];return m.join(" ")},r}(vf),Pv=Vd,oh=S(56463),Rh=.3,d0={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Zd={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},v0={left:"left",start:"left",center:"middle",right:"end",end:"end"},vy=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(e||a,function(u,f){f==="text"?n._setText(""+u):f==="matrix"&&u?Ld(n):ms[f]&&o.setAttribute(ms[f],u)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},r.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,a=e.textAlign,o=(0,oh.detect)();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",Zd[n]||"alphabetic"):t.setAttribute("alignment-baseline",d0[n]||"baseline"),t.setAttribute("text-anchor",v0[a]||"left")},r.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,u=o===void 0?"bottom":o;if(!t)e.innerHTML="";else if(~t.indexOf(`
`)){var f=t.split(`
`),m=f.length-1,x="";(0,d.each)(f,function(w,L){L===0?u==="alphabetic"?x+='<tspan x="'+a+'" dy="'+-m+'em">'+w+"</tspan>":u==="top"?x+='<tspan x="'+a+'" dy="0.9em">'+w+"</tspan>":u==="middle"?x+='<tspan x="'+a+'" dy="'+-(m-1)/2+'em">'+w+"</tspan>":u==="bottom"?x+='<tspan x="'+a+'" dy="-'+(m+Rh)+'em">'+w+"</tspan>":u==="hanging"&&(x+='<tspan x="'+a+'" dy="'+(-(m-1)-Rh)+'em">'+w+"</tspan>"):x+='<tspan x="'+a+'" dy="1em">'+w+"</tspan>"}),e.innerHTML=x}else e.innerHTML=t},r}(vf),im=vy,jc=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Eg=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Iv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function dp(i){var r=i.match(Iv);if(!r)return"";var t="";return r.sort(function(e,n){return e=e.split(":"),n=n.split(":"),Number(e[0])-Number(n[0])}),(0,d.each)(r,function(e){e=e.split(":"),t+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'}),t}function gf(i,r){var t=jc.exec(i),e=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;e>=0&&e<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=e&&e<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=e&&e<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var u=Math.tan(e),f=u*u,m=(o.x-a.x+u*(o.y-a.y))/(f+1)+a.x,x=u*(o.x-a.x+u*(o.y-a.y))/(f+1)+a.y;r.setAttribute("x1",a.x),r.setAttribute("y1",a.y),r.setAttribute("x2",m),r.setAttribute("y2",x),r.innerHTML=dp(n)}function g0(i,r){var t=Eg.exec(i),e=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];r.setAttribute("cx",e),r.setAttribute("cy",n),r.setAttribute("r",a),r.innerHTML=dp(o)}var am=function(){function i(r){this.cfg={};var t=null,e=(0,d.uniqueId)("gradient_");return r.toLowerCase()[0]==="l"?(t=xc("linearGradient"),gf(r,t)):(t=xc("radialGradient"),g0(r,t)),t.setAttribute("id",e),this.el=t,this.id=e,this.cfg=r,this}return i.prototype.match=function(r,t){return this.cfg===t},i}(),sh=am,Gp={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Lf={x:"-40%",y:"-40%",width:"200%",height:"200%"},vp=function(){function i(r){this.type="filter",this.cfg={},this.type="filter";var t=xc("filter");return(0,d.each)(Lf,function(e,n){t.setAttribute(n,e)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=r,this._parseShadow(r,t),this}return i.prototype.match=function(r,t){if(this.type!==r)return!1;var e=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return e=!1,!1}),e},i.prototype.update=function(r,t){var e=this.cfg;return e[Gp[r]]=t,this._parseShadow(e,this.el),this},i.prototype._parseShadow=function(r,t){var e=`<feDropShadow
      dx="`+(r.dx||0)+`"
      dy="`+(r.dy||0)+`"
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;t.innerHTML=e},i}(),fu=vp,uh=function(){function i(r,t){this.cfg={};var e=xc("marker"),n=(0,d.uniqueId)("marker_");e.setAttribute("id",n);var a=xc("path");a.setAttribute("stroke",r.stroke||"none"),a.setAttribute("fill",r.fill||"none"),e.appendChild(a),e.setAttribute("overflow","visible"),e.setAttribute("orient","auto-start-reverse"),this.el=e,this.child=a,this.id=n;var o=r[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=r.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(r.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(r,t){var e=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),e.setAttribute("refX",""+10*Math.cos(Math.PI/6)),e.setAttribute("refY",""+5)},i.prototype._setMarker=function(r,t){var e=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),e.appendChild(t),a&&e.setAttribute("refX",""+a/r)},i.prototype.update=function(r){var t=this.child;t.attr?t.attr("fill",r):t.setAttribute("fill",r)},i}(),Hd=uh,Cg=function(){function i(r){this.type="clip",this.cfg={};var t=xc("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var e=r.cfg.el;return t.appendChild(e),this.cfg=r,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var r=this.el;r.parentNode.removeChild(r)},i}(),Us=Cg,gp=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,tl=function(){function i(r){this.cfg={};var t=xc("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var e=xc("image");t.appendChild(e);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=r;var a=gp.exec(r),o=a[2];e.setAttribute("href",o);var u=new Image;o.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=o;function f(){t.setAttribute("width",""+u.width),t.setAttribute("height",""+u.height)}return u.complete?f():(u.onload=f,u.src=u.src),this}return i.prototype.match=function(r,t){return this.cfg===t},i}(),Ic=tl,jd=function(){function i(r){var t=xc("defs"),e=(0,d.uniqueId)("defs_");t.id=e,r.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=r}return i.prototype.find=function(r,t){for(var e=this.children,n=null,a=0;a<e.length;a++)if(e[a].match(r,t)){n=e[a].id;break}return n},i.prototype.findById=function(r){for(var t=this.children,e=null,n=0;n<t.length;n++)if(t[n].id===r){e=t[n];break}return e},i.prototype.add=function(r){this.children.push(r),r.canvas=this.canvas,r.parent=this},i.prototype.getDefaultArrow=function(r,t){var e=r.stroke||r.strokeStyle;if(this.defaultArrow[e])return this.defaultArrow[e].id;var n=new Hd(r,t);return this.defaultArrow[e]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(r){var t=new sh(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(r,t){var e=new Hd(r,t);return this.el.appendChild(e.el),this.add(e),e.id},i.prototype.addShadow=function(r){var t=new fu(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(r){var t=new Ic(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(r){var t=new Us(r);return this.el.appendChild(t.el),this.add(t),t.id},i}(),m0=jd,om=function(i){(0,Ft.__extends)(r,i);function r(t){return i.call(this,(0,Ft.__assign)((0,Ft.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return r.prototype.getShapeBase=function(){return y},r.prototype.getGroupBase=function(){return Sg},r.prototype.getShape=function(t,e,n){var a=n.target||n.srcElement;if(!Od[a.tagName]){for(var o=a.parentNode;o&&!Od[o.tagName];)o=o.parentNode;a=o}return this.find(function(u){return u.get("el")===a})},r.prototype.createDom=function(){var t=xc("svg"),e=new m0(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},r.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&ih(this,function(u,f){return a.indexOf(u)-a.indexOf(f)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=e.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Ld(this):t==="clip"?ah(this,e):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},r.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();ah(this,t),e.length&&Av(t,e)},r}(ui.AbstractCanvas),kf=om,Xd=S(23231),Up=Xd.version;function Ag(i){return i?!1:i==null||isNaN(i)}function Yd(i){if((0,d.isArray)(i))return Ag(i[1].y);var r=i.y;return(0,d.isArray)(r)?Ag(r[0]):Ag(r)}function Dh(i,r,t){if(r===void 0&&(r=!1),t===void 0&&(t=!0),!i.length||i.length===1&&!t)return[];if(r){for(var e=[],n=0,a=i.length;n<a;n++){var o=i[n];Yd(o)||e.push(o)}return[e]}for(var u=[],f=[],n=0,a=i.length;n<a;n++){var o=i[n];Yd(o)?f.length&&(f.length===1&&!t||u.push(f),f=[]):f.push(o)}return f.length&&u.push(f),u}function gl(i,r,t,e){e===void 0&&(e="");var n=i.style,a=n===void 0?{}:n,o=i.defaultStyle,u=i.color,f=i.size,m=(0,st.__assign)((0,st.__assign)({},o),a);return u&&(r&&(a.stroke||(m.stroke=u)),t&&(a.fill||(m.fill=u))),e&&(0,d.isNil)(a[e])&&!(0,d.isNil)(f)&&(m[e]=f),m}function Wd(i){var r=i.x,t=(0,d.isArray)(i.y)?i.y:[i.y];return t.map(function(e,n){return{x:(0,d.isArray)(r)?r[n]:r,y:e}})}var Kd={line:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},dot:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},dash:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},smooth:function(i,r,t){return[["M",i-t,r],["A",t/2,t/2,0,1,1,i,r],["A",t/2,t/2,0,1,0,i+t,r]]},hv:function(i,r,t){return[["M",i-t-1,r-2.5],["L",i,r-2.5],["L",i,r+2.5],["L",i+t+1,r+2.5]]},vh:function(i,r,t){return[["M",i-t-1,r+2.5],["L",i,r+2.5],["L",i,r-2.5],["L",i+t+1,r-2.5]]},hvh:function(i,r,t){return[["M",i-(t+1),r+2.5],["L",i-t/2,r+2.5],["L",i-t/2,r-2.5],["L",i+t/2,r-2.5],["L",i+t/2,r+2.5],["L",i+t+1,r+2.5]]},vhv:function(i,r){return[["M",i-5,r+2.5],["L",i-5,r],["L",i,r],["L",i,r-3],["L",i,r+3],["L",i+6.5,r+3]]}};function eu(i,r){var t=i.color;return{symbol:Kd[r],style:{lineWidth:2,r:6,stroke:t}}}function Mg(i,r,t){for(var e=i.isStack,n=i.connectNulls,a=i.isInCircle,o=i.showSinglePoint,u=gl(i,!0,!1,"lineWidth"),f=Dh(i.points,n,o),m=[],x=0,w=f.length;x<w;x++){var L=f[x];m=m.concat(Ov(L,a,e,r,t,u))}return u.path=m,u}function Rf(i,r,t,e,n){if(i.length===1)return[["M",i[0].x,i[0].y-n.lineWidth/2],["L",i[0].x,i[0].y],["L",i[0].x,i[0].y+n.lineWidth/2]];var a;return t?(r&&i.length&&i.push({x:i[0].x,y:i[0].y}),a=pi(i,!1,e)):(a=Fr(i,!1),r&&a.push(["Z"])),a}function ud(i,r,t,e,n,a){var o=[],u=[];(0,d.each)(i,function(x){var w=Wd(x);o.push(w[1]),u.push(w[0])});var f=Rf(o,r,e,n,a),m=Rf(u,r,e,n,a);return t?f:f.concat(m)}function Ov(i,r,t,e,n,a){if(i.length){var o=i[0];return(0,d.isArray)(o.y)?ud(i,r,t,e,n,a):Rf(i,r,e,n,a)}return[]}var gy=Ec("line",{defaultShapeType:"line"});(0,d.each)(["line","dot","dash","smooth"],function(i){ws("line",i,{draw:function(r,t){var e=i==="smooth",n;if(e){var a=this.coordinate,o=a.start,u=a.end;n=[[o.x,u.y],[u.x,o.y]]}var f=Mg(r,e,n),m=t.addShape({type:"path",attrs:f,name:"line"});return m},getMarker:function(r){return eu(r,i)}})});var be=null,ar=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="path",e.shapeType="line";var n=t.connectNulls,a=n===void 0?!1:n,o=t.showSinglePoint,u=o===void 0?!0:o;return e.connectNulls=a,e.showSinglePoint=u,e}return r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);var a=this,o=a.lastElementsMap,u=a.elementsMap,f=a.elements,m=a.container,x=this.getElementId(t),w=this.getShapeInfo(t),L=o[x];if(L){var W=L.getModel();(this.isCoordinateChanged||Zl(W,w))&&(L.animate=this.animateOption,L.update(w)),delete o[x]}else{var H=this.getShapeFactory();L=new Wf({shapeFactory:H,container:m,offscreenGroup:this.getOffscreenGroup()}),L.geometry=this,L.animate=this.animateOption,L.draw(w,n)}return f.push(L),u[x]=L,f},r.prototype.getPointsAndData=function(t){for(var e=[],n=[],a=0,o=t.length;a<o;a++){var u=t[a];e.push({x:u.x,y:u.y}),n.push(u[$t])}return{points:e,data:n}},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),a=n.points,o=n.data;return e.mappingData=t,e.data=o,e.isStack=!!this.getAdjust("stack"),e.points=a,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},r}(Rl),Pr=ar;function Ln(i,r,t,e,n){var a=[];if(i.length){for(var o=[],u=[],f=0,m=i.length;f<m;f++){var x=i[f];o.push(x[1]),u.push(x[0])}u=u.reverse(),(0,d.each)([o,u],function(w,L){var H=[],W=e.parsePoints(w),et=W[0];o.length===1&&u.length===1?H=L===0?[["M",et.x-.5,et.y],["L",et.x+.5,et.y]]:[["L",et.x+.5,et.y],["L",et.x-.5,et.y]]:(r&&W.push({x:et.x,y:et.y}),t?H=pi(W,!1,n):H=Fr(W,!1),L>0&&(H[0][0]="L")),a=a.concat(H)}),a.push(["Z"])}return a}function ni(i,r,t,e,n){for(var a=gl(i,r,!r,"lineWidth"),o=i.connectNulls,u=i.isInCircle,f=i.points,m=i.showSinglePoint,x=Dh(f,o,m),w=[],L=0,H=x.length;L<H;L++){var W=x[L];w=w.concat(Ln(W,u,t,e,n))}return a.path=w,a}function On(i){var r=i.start,t=i.end;return[[r.x,t.y],[t.x,r.y]]}var Wn=Ec("area",{defaultShapeType:"area",getDefaultPoints:function(i){var r=i.x,t=i.y0,e=(0,d.isArray)(i.y)?i.y:[t,i.y];return e.map(function(n){return{x:r,y:n}})}});ws("area","area",{draw:function(i,r){var t=ni(i,!1,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:r}}}});var fi=null,xi=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="area",e.shapeType="area",e.generatePoints=!0,e.startOnZero=!0;var n=t.startOnZero,a=n===void 0?!0:n,o=t.sortable,u=o===void 0?!0:o,f=t.showSinglePoint,m=f===void 0?!1:f;return e.startOnZero=a,e.sortable=u,e.showSinglePoint=m,e}return r.prototype.getPointsAndData=function(t){for(var e=[],n=[],a=0,o=t.length;a<o;a++){var u=t[a];e.push(u.points),n.push(u[$t])}return{points:e,data:n}},r.prototype.getYMinValue=function(){if(this.startOnZero)return i.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},r}(Pr),Ii=xi,Ni=Ec("edge",{defaultShapeType:"line",getDefaultPoints:function(i){return Wd(i)}});ws("edge","line",{draw:function(i,r){var t=gl(i,!0,!1,"lineWidth"),e=Fr(this.parsePoints(i.points),this.coordinate.isPolar);return r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var zi=null,ra=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return r}(Rl),Mi=ra,Di=S(55223),fn=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);var a=this.prepareRange(t),o=this.prepareSize(),u=(0,d.get)(this.styleOption,["style","shadowBlur"]);return(0,d.isNumber)(u)||(u=o/2),this.prepareGreyScaleBlurredCircle(o,u),this.drawWithRange(t,a,o,u),null},r.prototype.clear=function(){i.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(u){var f=u[$t][n];f>o&&(o=f),f<a&&(a=f)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,d.isNumber)(t)||(t=this.getDefaultSize()),t},r.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),a=t+e,o=n.getContext("2d");n.width=n.height=a*2,o.clearRect(0,0,n.width,n.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,t,0,Math.PI*2,!0),o.closePath(),o.fill()},r.prototype.drawWithRange=function(t,e,n,a){var o=this.coordinate,u=o.start,f=o.end,m=this.coordinate.getWidth(),x=this.coordinate.getHeight(),w=this.getAttribute("color"),L=w.getFields()[0];this.clearShadowCanvasCtx();var H=this.getShadowCanvasCtx();e&&(t=t.filter(function(sr){return sr[$t][L]<=e[1]&&sr[$t][L]>=e[0]}));for(var W=this.scales[L],et=0,ht=t;et<ht.length;et++){var bt=ht[et],xt=this.getDrawCfg(bt),qt=xt.x,ie=xt.y,_e=W.scale(bt[$t][L]);this.drawGrayScaleBlurredCircle(qt-u.x,ie-f.y,n+a,_e,H)}var ze=H.getImageData(0,0,m,x);this.clearShadowCanvasCtx(),this.colorize(ze),H.putImageData(ze,0,0);var rr=this.getImageShape();rr.attr("x",u.x),rr.attr("y",f.y),rr.attr("width",m),rr.attr("height",x),rr.attr("img",H.canvas),rr.set("origin",this.getShapeInfo(t))},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4))},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},r.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},r.prototype.drawGrayScaleBlurredCircle=function(t,e,n,a,o){var u=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(u,t-n,e-n)},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,a=this.paletteCache,o=3;o<n.length;o+=4){var u=n[o];if((0,d.isNumber)(u)){var f=a[u]?a[u]:Di.default.rgb2arr(e.gradient(u/256));n[o-3]=f[0],n[o-2]=f[1],n[o-1]=f[2],n[o]=u}}},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;return t=e.addShape({type:"image",attrs:{}}),this.imageShape=t,t},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,st.__assign)((0,st.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[$t]})},r}(Rl),zn=fn;function Ai(i,r){r===void 0&&(r=!1);var t=i.x,e=i.y,n=i.y0,a=i.size,o,u;(0,d.isArray)(e)?(o=e[0],u=e[1]):(o=n,u=e);var f,m;(0,d.isArray)(t)?(f=t[0],m=t[1]):(f=t-a/2,m=t+a/2);var x=[{x:f,y:o},{x:f,y:u}];return r?x.push({x:m,y:(u+o)/2}):x.push({x:m,y:u},{x:m,y:o}),x}function Ki(i,r){r===void 0&&(r=!0);var t=[],e=i[0];t.push(["M",e.x,e.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}function li(i,r,t){var e=[];return(0,d.isNil)(r)?t?e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[2].x,i[2].y],["Z"]):e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[3].x,i[3].y],["Z"]):e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",r[1].x,r[1].y],["L",r[0].x,r[0].y],["Z"]),e}var Zi=Ec("interval",{defaultShapeType:"rect",getDefaultPoints:function(i){return Ai(i)}});ws("interval","rect",{draw:function(i,r){var t=gl(i,!1,!0),e=this.parsePath(Ki(i.points)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:r}}:{symbol:"square",style:{r:4,fill:r}}}});var ha=null;function ao(i,r){var t=i.length,e=i;(0,d.isString)(e[0])&&(e=i.map(function(u){return r.translate(u)}));for(var n=e[1]-e[0],a=2;a<t;a++){var o=e[a]-e[a-1];n>o&&(n=o)}return n}function Xn(i,r){if(r){var t=(0,d.flatten)(i),e=(0,d.valuesOfKey)(t,r);return e.length}return i.length}function ei(i){var r=i.theme,t=i.coordinate,e=i.getXScale(),n=e.values,a=i.beforeMappingData,o=n.length;if(e.isLinear&&n.length>1){n.sort();var u=ao(n,e);o=(e.max-e.min)/u,n.length>o&&(o=n.length)}var f=e.range,m=1/o,x=1;if(t.isPolar?t.isTransposed&&o>1?x=r.multiplePieWidthRatio:x=r.roseWidthRatio:(e.isLinear&&(m*=f[1]-f[0]),x=r.columnWidthRatio),m*=x,i.getAdjust("dodge")){var w=i.getAdjust("dodge"),L=w.dodgeBy,H=Xn(a,L);m=m/H}var W=r.maxColumnWidth,et=r.minColumnWidth,ht=ae(i.coordinate);if(W){var bt=W/ht;m>bt&&(m=bt)}if(et){var xt=et/ht;m<xt&&(m=xt)}return m}var ka=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n,a=this.getAttribute("size");if(a){n=this.getAttributeValues(a,t)[0];var o=this.coordinate,u=ae(o);n=n/u}else this.defaultSize||(this.defaultSize=ei(this)),n=this.defaultSize;return e.size=n,e},r.prototype.adjustScale=function(){i.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var e=this.scaleDefs,n=t.field,a=t.min,o=t.max,u=t.type;u!=="time"&&(a>0&&!(0,d.get)(e,[n,"min"])&&t.change({min:0}),o<=0&&!(0,d.get)(e,[n,"max"])&&t.change({max:0}))}},r}(Rl),aa=ka,Oi=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="line";var n=t.sortable,a=n===void 0?!0:n;return e.sortable=a,e}return r}(Pr),ua=Oi,$i={hexagon:function(i,r,t){var e=t/2*Math.sqrt(3);return[["M",i,r-t],["L",i+e,r-t/2],["L",i+e,r+t/2],["L",i,r+t],["L",i-e,r+t/2],["L",i-e,r-t/2],["Z"]]},bowtie:function(i,r,t){var e=t-1.5;return[["M",i-t,r-e],["L",i+t,r+e],["L",i+t,r-e],["L",i-t,r+e],["Z"]]},cross:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r+t],["M",i+t,r-t],["L",i-t,r+t]]},tick:function(i,r,t){return[["M",i-t/2,r-t],["L",i+t/2,r-t],["M",i,r-t],["L",i,r+t],["M",i-t/2,r+t],["L",i+t/2,r+t]]},plus:function(i,r,t){return[["M",i-t,r],["L",i+t,r],["M",i,r-t],["L",i,r+t]]},hyphen:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},line:function(i,r,t){return[["M",i,r-t],["L",i,r+t]]}},Go=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],Io=["cross","tick","plus","hyphen","line"];function na(i,r,t,e,n){var a=gl(r,n,!n,"r"),o=i.parsePoints(r.points),u=o[0];if(r.isStack)u=o[1];else if(o.length>1){for(var f=t.addGroup(),m=0,x=o;m<x.length;m++){var w=x[m];f.addShape({type:"marker",attrs:(0,st.__assign)((0,st.__assign)((0,st.__assign)({},a),{symbol:$i[e]||e}),w)})}return f}return t.addShape({type:"marker",attrs:(0,st.__assign)((0,st.__assign)((0,st.__assign)({},a),{symbol:$i[e]||e}),u)})}var ma=Ec("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(i){return Wd(i)}});(0,d.each)(Go,function(i){ws("point","hollow-"+i,{draw:function(r,t){return na(this,r,t,i,!0)},getMarker:function(r){var t=r.color;return{symbol:$i[i]||i,style:{r:4.5,stroke:t,fill:null}}}})});var Co=null,Do=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return r.prototype.getDrawCfg=function(t){var e=i.prototype.getDrawCfg.call(this,t);return(0,st.__assign)((0,st.__assign)({},e),{isStack:!!this.getAdjust("stack")})},r}(Rl),os=Do;function ku(i){for(var r=i[0],t=1,e=[["M",r.x,r.y]];t<i.length;){var n=i[t];(n.x!==i[t-1].x||n.y!==i[t-1].y)&&(e.push(["L",n.x,n.y]),n.x===r.x&&n.y===r.y&&t<i.length-1&&(r=i[t+1],e.push(["Z"]),e.push(["M",r.x,r.y]),t++)),t++}return(0,d.isEqual)((0,d.last)(e),r)||e.push(["L",r.x,r.y]),e.push(["Z"]),e}var zu=Ec("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(i){var r=[];return(0,d.each)(i.x,function(t,e){var n=i.y[e];r.push({x:t,y:n})}),r}});ws("polygon","polygon",{draw:function(i,r){if(!(0,d.isEmpty)(i.points)){var t=gl(i,!0,!0),e=this.parsePath(ku(i.points));return r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"polygon"})}},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});var ss=null,Dl=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n=e.x,a=e.y,o;if(!((0,d.isArray)(n)&&(0,d.isArray)(a))){var u=this.getXScale(),f=this.getYScale(),m=u.values.length,x=f.values.length,w=.5*1/m,L=.5*1/x;u.isCategory&&f.isCategory?(n=[n-w,n-w,n+w,n+w],a=[a-L,a+L,a+L,a-L]):(0,d.isArray)(n)?(o=n,n=[o[0],o[0],o[1],o[1]],a=[a-L/2,a+L/2,a+L/2,a-L/2]):(0,d.isArray)(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],n=[n-w/2,n-w/2,n+w/2,n+w/2]),e.x=n,e.y=a}return e},r}(Rl),yu=Dl,Tl=Ec("schema",{defaultShapeType:""}),ul=null,Pl=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n,a=this.getAttribute("size");if(a){n=this.getAttributeValues(a,t)[0];var o=this.coordinate,u=ae(o);n=n/u}else this.defaultSize||(this.defaultSize=ei(this)),n=this.defaultSize;return e.size=n,e},r}(Rl),ll=Pl;ws("area","line",{draw:function(i,r){var t=ni(i,!0,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}}),ws("area","smooth",{draw:function(i,r){var t=this.coordinate,e=ni(i,!1,!0,this,On(t)),n=r.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:r}}}}),ws("area","smooth-line",{draw:function(i,r){var t=this.coordinate,e=ni(i,!0,!0,this,On(t)),n=r.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}});function ml(i,r){var t=[];t.push({x:i.x,y:i.y*1/2+r.y*1/2}),t.push({x:r.x,y:i.y*1/2+r.y*1/2}),t.push(r);var e=["C"];return(0,d.each)(t,function(n){e.push(n.x,n.y)}),e}function xu(i,r){var t=[];t.push({x:r.x,y:r.y}),t.push(i);var e=["Q"];return(0,d.each)(t,function(n){e.push(n.x,n.y)}),e}function Uo(i,r,t){var e=xu(r,t),n=[["M",i.x,i.y]];return n.push(e),n}function yl(i,r){var t=xu(i[1],r),e=xu(i[3],r),n=[["M",i[0].x,i[0].y]];return n.push(e),n.push(["L",i[3].x,i[3].y]),n.push(["L",i[2].x,i[2].y]),n.push(t),n.push(["L",i[1].x,i[1].y]),n.push(["L",i[0].x,i[0].y]),n.push(["Z"]),n}ws("edge","arc",{draw:function(i,r){var t=gl(i,!0,!1,"lineWidth"),e=i.points,n=e.length>2?"weight":"normal",a;if(i.isInCircle){var o={x:0,y:1};return n==="normal"?a=Uo(e[0],e[1],o):(t.fill=t.stroke,a=yl(e,o)),a=this.parsePath(a),r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:a})})}else{if(n==="normal")return e=this.parsePoints(e),a=mo((e[1].x+e[0].x)/2,e[0].y,Math.abs(e[1].x-e[0].x)/2,Math.PI,Math.PI*2),r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:a})});var u=ml(e[1],e[3]),f=ml(e[2],e[0]);return a=[["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],u,["L",e[3].x,e[3].y],["L",e[2].x,e[2].y],f,["Z"]],a=this.parsePath(a),t.fill=t.stroke,r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:a})})}},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});function Is(i,r){var t=ml(i,r),e=[["M",i.x,i.y]];return e.push(t),e}ws("edge","smooth",{draw:function(i,r){var t=gl(i,!0,!1,"lineWidth"),e=i.points,n=this.parsePath(Is(e[0],e[1]));return r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:n})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var cl=1/3;function Xi(i,r){var t=[];t.push({x:i.x,y:i.y*(1-cl)+r.y*cl}),t.push({x:r.x,y:i.y*(1-cl)+r.y*cl}),t.push(r);var e=[["M",i.x,i.y]];return(0,d.each)(t,function(n){e.push(["L",n.x,n.y])}),e}ws("edge","vhv",{draw:function(i,r){var t=gl(i,!0,!1,"lineWidth"),e=i.points,n=this.parsePath(Xi(e[0],e[1]));return r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:n})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}}),ws("interval","funnel",{getPoints:function(i){return i.size=i.size*2,Ai(i)},draw:function(i,r){var t=gl(i,!1,!0),e=this.parsePath(li(i.points,i.nextPoints,!1)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}}),ws("interval","hollow-rect",{draw:function(i,r){var t=gl(i,!0,!1),e=this.parsePath(Ki(i.points)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:r,fill:null}}:{symbol:"square",style:{r:4,stroke:r,fill:null}}}});function ya(i){var r=i.x,t=i.y,e=i.y0;return(0,d.isArray)(t)?t.map(function(n,a){return{x:(0,d.isArray)(r)?r[a]:r,y:n}}):[{x:r,y:e},{x:r,y:t}]}ws("interval","line",{getPoints:function(i){return ya(i)},draw:function(i,r){var t=gl(i,!0,!1,"lineWidth"),e=this.parsePath(Ki(i.points,!1)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:r}}}}),ws("interval","pyramid",{getPoints:function(i){return i.size=i.size*2,Ai(i,!0)},draw:function(i,r){var t=gl(i,!1,!0),e=this.parsePath(li(i.points,i.nextPoints,!0)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});function Bs(i){var r=i.x,t=i.y,e=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var u=r+n/2,f=r-n/2;return[{x:r,y:a},{x:r,y:o},{x:f,y:a},{x:u,y:a},{x:f,y:o},{x:u,y:o}]}function fl(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y]]}ws("interval","tick",{getPoints:function(i){return Bs(i)},draw:function(i,r){var t=gl(i,!0,!1),e=this.parsePath(fl(i.points)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:r}}}});var lh=function(i,r,t){var e=i.x,n=i.y,a=r.x,o=r.y,u;switch(t){case"hv":u=[{x:a,y:n}];break;case"vh":u=[{x:e,y:o}];break;case"hvh":var f=(a+e)/2;u=[{x:f,y:n},{x:f,y:o}];break;case"vhv":var m=(n+o)/2;u=[{x:e,y:m},{x:a,y:m}];break;default:break}return u};function yr(i,r){var t=[];return(0,d.each)(i,function(e,n){var a=i[n+1];if(t.push(e),a){var o=lh(e,a,r);t=t.concat(o)}}),t}function Dn(i){return i.map(function(r,t){return t===0?["M",r.x,r.y]:["L",r.x,r.y]})}function Mn(i,r){var t=Dh(i.points,i.connectNulls,i.showSinglePoint),e=[];return(0,d.each)(t,function(n){var a=yr(n,r);e=e.concat(Dn(a))}),(0,st.__assign)((0,st.__assign)({},gl(i,!0,!1,"lineWidth")),{path:e})}(0,d.each)(["hv","vh","hvh","vhv"],function(i){ws("line",i,{draw:function(r,t){var e=Mn(r,i),n=t.addShape({type:"path",attrs:e,name:"line"});return n},getMarker:function(r){return eu(r,i)}})}),(0,d.each)(Io,function(i){ws("point",i,{draw:function(r,t){return na(this,r,t,i,!0)},getMarker:function(r){var t=r.color;return{symbol:$i[i],style:{r:4.5,stroke:t,fill:null}}}})}),ws("point","image",{draw:function(i,r){var t=gl(i,!1,!1,"r").r,e=this.parsePoints(i.points),n=e[0];if(i.isStack)n=e[1];else if(e.length>1){for(var a=r.addGroup(),o=0,u=e;o<u.length;o++){var f=u[o];a.addShape("image",{attrs:{x:f.x-t/2,y:f.y-t,width:t,height:t,img:i.shape[1]}})}return a}return r.addShape("image",{attrs:{x:n.x-t/2,y:n.y-t,width:t,height:t,img:i.shape[1]}})},getMarker:function(i){var r=i.color;return{symbol:"circle",style:{r:4.5,fill:r}}}}),(0,d.each)(Go,function(i){ws("point",i,{draw:function(r,t){return na(this,r,t,i,!1)},getMarker:function(r){var t=r.color;return{symbol:$i[i]||i,style:{r:4.5,fill:t}}}})});function Ta(i){var r=(0,d.isArray)(i)?i:[i],t=r[0],e=r[r.length-1],n=r.length>1?r[1]:t,a=r.length>3?r[3]:e,o=r.length>2?r[2]:n;return{min:t,max:e,min1:n,max1:a,median:o}}function fs(i,r,t){var e=t/2,n;if((0,d.isArray)(r)){var a=Ta(r),o=a.min,u=a.max,f=a.median,m=a.min1,x=a.max1,w=i-e,L=i+e;n=[[w,u],[L,u],[i,u],[i,x],[w,m],[w,x],[L,x],[L,m],[i,m],[i,o],[w,o],[L,o],[w,f],[L,f]]}else{r=(0,d.isNil)(r)?.5:r;var H=Ta(i),o=H.min,u=H.max,f=H.median,m=H.min1,x=H.max1,W=r-e,et=r+e;n=[[o,W],[o,et],[o,r],[m,r],[m,W],[m,et],[x,et],[x,W],[x,r],[u,r],[u,W],[u,et],[f,W],[f,et]]}return n.map(function(ht){return{x:ht[0],y:ht[1]}})}function cr(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y],["L",i[6].x,i[6].y],["L",i[7].x,i[7].y],["L",i[4].x,i[4].y],["Z"],["M",i[8].x,i[8].y],["L",i[9].x,i[9].y],["M",i[10].x,i[10].y],["L",i[11].x,i[11].y],["M",i[12].x,i[12].y],["L",i[13].x,i[13].y]]}ws("schema","box",{getPoints:function(i){var r=i.x,t=i.y,e=i.size;return fs(r,t,e)},draw:function(i,r){var t=gl(i,!0,!1),e=this.parsePath(cr(i.points)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e,name:"schema"})});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){var a=[e-6,e-3,e,e+3,e+6],o=fs(t,a,n);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:r}}}});function Je(i){var r=(0,d.isArray)(i)?i:[i],t=r.sort(function(e,n){return n-e});return An(t,4,t[t.length-1])}function Nr(i,r,t){var e=Je(r);return[{x:i,y:e[0]},{x:i,y:e[1]},{x:i-t/2,y:e[2]},{x:i-t/2,y:e[1]},{x:i+t/2,y:e[1]},{x:i+t/2,y:e[2]},{x:i,y:e[2]},{x:i,y:e[3]}]}function gn(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["L",i[4].x,i[4].y],["L",i[5].x,i[5].y],["Z"],["M",i[6].x,i[6].y],["L",i[7].x,i[7].y]]}ws("schema","candle",{getPoints:function(i){var r=i.x,t=i.y,e=i.size;return Nr(r,t,e)},draw:function(i,r){var t=gl(i,!0,!0),e=this.parsePath(gn(i.points)),n=r.addShape("path",{attrs:(0,st.__assign)((0,st.__assign)({},t),{path:e,name:"schema"})});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){var a=[e+7.5,e+3,e-3,e-7.5],o=Nr(t,a,n);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:r,fill:r,r:6}}}});function In(i,r){var t=Math.abs(i[0].x-i[2].x),e=Math.abs(i[0].y-i[2].y),n=Math.min(t,e);r&&(n=(0,d.clamp)(r,0,Math.min(t,e))),n=n/2;var a=(i[0].x+i[2].x)/2,o=(i[0].y+i[2].y)/2;return{x:a-n,y:o-n,width:n*2,height:n*2}}ws("polygon","square",{draw:function(i,r){if(!(0,d.isEmpty)(i.points)){var t=gl(i,!0,!0),e=this.parsePoints(i.points);return r.addShape("rect",{attrs:(0,st.__assign)((0,st.__assign)({},t),In(e,i.size)),name:"polygon"})}},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});var Yr=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setLabelPosition=function(t,e,n,a){var o=this.getCoordinate(),u=o.isTransposed,f=e.points,m=o.convert(f[0]),x=o.convert(f[2]),w=u?-1:1,L=(m.x-x.x)/2*w,H=(m.y-x.y)/2*w;switch(a){case"right":u||(t.x-=L,t.y+=H),t.textAlign=(0,d.get)(t,"textAlign","left");break;case"left":u?t.x-=L*2:(t.x+=L,t.y+=H),t.textAlign=(0,d.get)(t,"textAlign","right");break;case"bottom":u?(t.x-=L,t.y-=H):t.y+=H*2,t.textAlign=(0,d.get)(t,"textAlign","center"),t.textBaseline=(0,d.get)(t,"textBaseline","top");break;case"middle":u?t.x-=L:t.y+=H,t.textAlign=(0,d.get)(t,"textAlign","center");break;case"top":u&&(t.x-=L,t.y+=H),t.textAlign=(0,d.get)(t,"textAlign","center"),t.textBaseline=(0,d.get)(t,"textBaseline","bottom");break;default:break}},r}($u),Tr=Yr,rn=Math.PI/2,ur=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),n;if(t.labelEmit)n=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!e.isTransposed)n="center";else{var a=e.getCenter(),o=this.getDefaultOffset(t.offset);Math.abs(t.x-a.x)<1?n="center":t.angle>Math.PI||t.angle<=0?n=o>0?"left":"right":n=o>0?"right":"left"}return n},r.prototype.getLabelPoint=function(t,e,n){var a=1,o,u=t.content[n];this.isToMiddle(e)?o=this.getMiddlePoint(e.points):(t.content.length===1&&n===0?n=1:n===0&&(a=-1),o=this.getArcPoint(e,n));var f=this.getDefaultOffset(t.offset)*a,m=this.getPointAngle(o),x=t.labelEmit,w=this.getCirclePoint(m,f,o,x);return w.r===0?w.content="":(w.content=u,w.angle=m,w.color=e.color),w.rotate=t.autoRotate?this.getLabelRotate(m,f,x):t.rotate,w.start={x:o.x,y:o.y},w},r.prototype.getArcPoint=function(t,e){return e===void 0&&(e=0),!(0,d.isArray)(t.x)&&!(0,d.isArray)(t.y)?{x:t.x,y:t.y}:{x:(0,d.isArray)(t.x)?t.x[e]:t.x,y:(0,d.isArray)(t.y)?t.y[e]:t.y}},r.prototype.getPointAngle=function(t){return de(this.getCoordinate(),t)},r.prototype.getCirclePoint=function(t,e,n,a){var o=this.getCoordinate(),u=o.getCenter(),f=zt(o,n);if(f===0)return(0,st.__assign)((0,st.__assign)({},u),{r:f});var m=t;if(o.isTransposed&&f>e&&!a){var x=Math.asin(e/(2*f));m=t+x*2}else f=f+e;return{x:u.x+f*Math.cos(m),y:u.y+f*Math.sin(m),r:f}},r.prototype.getLabelRotate=function(t,e,n){var a=t+rn;return n&&(a-=rn),a&&(a>rn?a=a-Math.PI:a<-rn&&(a=a+Math.PI)),a},r.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),n=t.length,a={x:0,y:0};return(0,d.each)(t,function(o){a.x+=o.x,a.y+=o.y}),a.x/=n,a.y/=n,a=e.convert(a),a},r.prototype.isToMiddle=function(t){return t.x.length>2},r}($u),Rr=ur,vr=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.defaultLayout="distribute",e}return r.prototype.getDefaultLabelCfg=function(){return(0,d.get)(this.geometry.theme,"pieLabels",{})},r.prototype.getDefaultOffset=function(t){return t||0},r.prototype.getLabelRotate=function(t,e,n){var a;return e<0&&(a=t,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),n=e.getCenter(),a;t.angle<=Math.PI/2&&t.x>=n.x?a="left":a="right";var o=this.getDefaultOffset(t.offset);return o<=0&&(a==="right"?a="left":a="right"),a},r.prototype.getArcPoint=function(t){return t},r.prototype.getPointAngle=function(t){var e=this.getCoordinate(),n={x:(0,d.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:(0,d.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},o,u=de(e,n);if(t.points&&t.points[0].y===t.points[1].y)o=u;else{var f=de(e,a);u>=f&&(f=f+Math.PI*2),o=u+(f-u)/2}return o},r.prototype.getCirclePoint=function(t,e,n){var a=this.getCoordinate(),o=a.getCenter(),u=a.getRadius()+e;return(0,st.__assign)((0,st.__assign)({},vn(o.x,o.y,u,t)),{angle:t,r:u})},r}(Rr),mn=vr,Cn=4;function hi(i,r,t,e,n,a){var o=!0,u=e.start,f=e.end,m=Math.min(u.y,f.y),x=Math.abs(u.y-f.y),w,L=0,H=Number.MIN_VALUE,W=r.map(function(_e){return _e.y>L&&(L=_e.y),_e.y<H&&(H=_e.y),{size:t,targets:[_e.y-m]}});for(H-=m,L-m>x&&(x=L-m);o;)for(W.forEach(function(_e){var ze=(Math.min.apply(H,_e.targets)+Math.max.apply(H,_e.targets))/2;_e.pos=Math.min(Math.max(H,ze-_e.size/2),x-_e.size)}),o=!1,w=W.length;w--;)if(w>0){var et=W[w-1],ht=W[w];et.pos+et.size>ht.pos&&(et.size+=ht.size,et.targets=et.targets.concat(ht.targets),et.pos+et.size>x&&(et.pos=x-et.size),W.splice(w,1),o=!0)}w=0,W.forEach(function(_e){var ze=m+t/2;_e.targets.forEach(function(){r[w].y=_e.pos+ze,ze+=t,w++})});for(var bt={},xt=0,qt=i;xt<qt.length;xt++){var ie=qt[xt];bt[ie.get("id")]=ie}r.forEach(function(_e){var ze=_e.r*_e.r,rr=Math.pow(Math.abs(_e.y-n.y),2);if(ze<rr)_e.x=n.x;else{var sr=Math.sqrt(ze-rr);a?_e.x=n.x+sr:_e.x=n.x-sr}var qe=bt[_e.id];qe.attr("x",_e.x),qe.attr("y",_e.y);var wr=(0,d.find)(qe.getChildren(),function(Vr){return Vr.get("type")==="text"});wr&&(wr.attr("y",_e.y),wr.attr("x",_e.x))})}function Ji(i,r,t,e){var n=i[0]?i[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),u=a.getCenter();if(n>0){var f=14,m=o+n,x=m*2+f*2,w={start:a.start,end:a.end},L=[[],[]];i.forEach(function(H){!H||(H.textAlign==="right"?L[0].push(H):L[1].push(H))}),L.forEach(function(H,W){var et=x/f;H.length>et&&(H.sort(function(ht,bt){return bt["..percent"]-ht["..percent"]}),H.splice(et,H.length-et)),H.sort(function(ht,bt){return ht.y-bt.y}),hi(r,H,f,w,u,W)})}(0,d.each)(i,function(H){if(H&&H.labelLine){var W=H.offset,et=H.angle,ht=vn(u.x,u.y,o,et),bt=vn(u.x,u.y,o+W/2,et),xt=H.x+(0,d.get)(H,"offsetX",0),qt=H.y+(0,d.get)(H,"offsetY",0),ie={x:xt-Math.cos(et)*Cn,y:qt-Math.sin(et)*Cn};(0,d.isObject)(H.labelLine)||(H.labelLine={}),H.labelLine.path=["M "+ht.x,ht.y+" Q"+bt.x,bt.y+" "+ie.x,ie.y].join(",")}})}var qi=4;function xa(i,r,t,e,n,a,o){r.sort(function(qe,wr){return qe.y-wr.y});var u=e.start,f=e.end,m=Math.min(u.y,f.y),x=Math.max(u.y,f.y),w,L=r.map(function(qe){return{content:qe.content,size:t,pos:qe.y,targets:[qe.y]}}),H=Math.max.apply(Math,L.map(function(qe){return qe.pos})),W=Math.min.apply(Math,L.map(function(qe){return qe.pos}));if(o){for(var et=Math.min(W,x-(L.length-1)*t),ht=Math.max(et+L.length*t,H+t),bt=!0;bt;)for(bt=!1,w=L.length;w--;)if(w>0){var xt=L[w-1],qt=L[w];xt.pos+xt.size>qt.pos&&(qt.pos+w*t<ht?(xt.size+=qt.size,xt.targets=xt.targets.concat(qt.targets),L.splice(w,1)):xt.pos=qt.pos-xt.size,bt=!0)}}else for(var ht=Math.max(m+(L.length-1)*t,H),et=Math.min(W,ht-(L.length-1)*t),bt=!0;bt;)for(bt=!1,w=L.length;w--;)if(w>0){var xt=L[w-1],qt=L[w];xt.pos+xt.size>qt.pos&&(xt.pos-et>w*t?xt.pos-=xt.size:(xt.size+=qt.size,xt.targets=xt.targets.concat(qt.targets),L.splice(w,1)),bt=!0)}w=0,L.forEach(function(qe){var wr=qe.pos;qe.targets.forEach(function(){r[w].y=wr,wr+=t,w++})});for(var ie={},_e=0,ze=i;_e<ze.length;_e++){var rr=ze[_e];ie[rr.get("id")]=rr}var sr=(Math.max.apply(Math,r.map(function(qe){return qe.y}))-Math.min.apply(Math,r.map(function(qe){return qe.y})))/2;sr=Math.max(sr,a),r.forEach(function(qe){var wr=ie[qe.id],Vr=wr.find(function(Un){return Un.get("type")==="text"});if(Vr&&Vr.attr("y")!==qe.y){var Br=sr*sr,Tn=Math.pow(Math.abs(qe.y-n.y),2);if(Br<Tn)qe.x=n.x;else{var Hn=Math.sqrt(Br-Tn);o?qe.x=n.x+Hn:qe.x=n.x-Hn}}wr.attr("x",qe.x),wr.attr("y",qe.y),Vr&&(Vr.attr("y",qe.y),Vr.attr("x",qe.x))})}function Yi(i,r,t,e){var n=i[0]?i[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),u=a.getCenter();if(n>0){var f=(0,d.get)(i[0],"labelHeight",14),m=o+n,x=m*2+f*2,w={start:a.start,end:a.end},L=[[],[]];i.forEach(function(H){!H||(H.x<u.x?L[0].push(H):L[1].push(H))}),L.forEach(function(H,W){var et=x/f;if(H.length>et){H.sort(function(bt,xt){return xt["data.percent"]-bt["data.percent"]});var ht=H.splice(et,H.length-et+1);ht.forEach(function(bt){var xt=r.findIndex(function(qt){return qt.get("id")===bt.id});r[xt]&&(r[xt].remove(!0),r.splice(xt,1))})}xa(r,H,f,w,u,m,W===1)})}(0,d.each)(i,function(H){if(H&&H.labelLine){var W=H.angle,et=vn(u.x,u.y,o,W),ht=H.x+(0,d.get)(H,"offsetX",0)*(Math.cos(W)>0?1:-1),bt=H.y+(0,d.get)(H,"offsetY",0)*(Math.sin(W)>0?1:-1),xt={x:ht-Math.cos(W)*qi,y:bt-Math.sin(W)*qi},qt=H.labelLine.smooth,ie=[],_e=xt.x-u.x,ze=xt.y-u.y,rr=Math.atan(ze/_e);if(_e<0&&(rr+=Math.PI),qt===!1){(0,d.isObject)(H.labelLine)||(H.labelLine={});var sr=0;(W<0&&W>-Math.PI/2||W>Math.PI*1.5)&&xt.y>et.y&&(sr=1),W>=0&&W<Math.PI/2&&xt.y>et.y&&(sr=1),W>=Math.PI/2&&W<Math.PI&&et.y>xt.y&&(sr=1),(W<-Math.PI/2||W>=Math.PI&&W<Math.PI*1.5)&&et.y>xt.y&&(sr=1);var qe=n/2>4?4:Math.max(n/2-1,0),wr=vn(u.x,u.y,o+qe,W),Vr=vn(u.x,u.y,o+n/2,rr),Br=0;ie.push("M "+et.x+" "+et.y),ie.push("L "+wr.x+" "+wr.y),ie.push("A "+u.x+" "+u.y+" 0 "+Br+" "+sr+" "+Vr.x+" "+Vr.y),ie.push("L "+xt.x+" "+xt.y)}else{var wr=vn(u.x,u.y,o+(n/2>4?4:Math.max(n/2-1,0)),W),Tn=et.x<u.x?1:-1;ie.push("M "+xt.x+" "+xt.y);var Hn=(et.y-u.y)/(et.x-u.x),Un=(xt.y-u.y)/(xt.x-u.x);Math.abs(Hn-Un)>Math.pow(Math.E,-16)&&ie.push.apply(ie,["C",xt.x+Tn*4,xt.y,2*wr.x-et.x,2*wr.y-et.y,et.x,et.y]),ie.push("L "+et.x+" "+et.y)}H.labelLine.path=ie.join(" ")}})}function Ga(i,r,t,e){(0,d.each)(r,function(n){var a=e.minX,o=e.minY,u=e.maxX,f=e.maxY,m=n.getCanvasBBox(),x=m.minX,w=m.minY,L=m.maxX,H=m.maxY,W=m.x,et=m.y,ht=m.width,bt=m.height,xt=W,qt=et;(x<a||L<a)&&(xt=a),(w<o||H<o)&&(qt=o),x>u?xt=u-ht:L>u&&(xt=xt-(L-u)),w>f?qt=f-bt:H>f&&(qt=qt-(H-f)),(xt!==W||qt!==et)&&ff(n,xt-W,qt-et)})}function _a(i,r,t,e){(0,d.each)(r,function(n,a){var o=n.getCanvasBBox(),u=t[a].getBBox();(o.minX<u.minX||o.minY<u.minY||o.maxX>u.maxX||o.maxY>u.maxY)&&n.remove(!0)})}var Da=100,Oa=function(){function i(r){r===void 0&&(r={}),this.bitmap={};var t=r.xGap,e=t===void 0?1:t,n=r.yGap,a=n===void 0?8:n;this.xGap=e,this.yGap=a}return i.prototype.hasGap=function(r){for(var t=!0,e=this.bitmap,n=Math.round(r.minX),a=Math.round(r.maxX),o=Math.round(r.minY),u=Math.round(r.maxY),f=n;f<=a;f+=1){if(!e[f]){e[f]={};continue}if(f===n||f===a){for(var m=o;m<=u;m++)if(e[f][m]){t=!1;break}}else if(e[f][o]||e[f][u]){t=!1;break}}return t},i.prototype.fillGap=function(r){for(var t=this.bitmap,e=Math.round(r.minX),n=Math.round(r.maxX),a=Math.round(r.minY),o=Math.round(r.maxY),u=e;u<=n;u+=1)t[u]||(t[u]={});for(var u=e;u<=n;u+=this.xGap){for(var f=a;f<=o;f+=this.yGap)t[u][f]=!0;t[u][o]=!0}if(this.yGap!==1)for(var u=a;u<=o;u+=1)t[e][u]=!0,t[n][u]=!0;if(this.xGap!==1)for(var u=e;u<=n;u+=1)t[u][a]=!0,t[u][o]=!0},i.prototype.destroy=function(){this.bitmap={}},i}();function Pa(i,r,t){t===void 0&&(t=Da);var e=-1,n=i.attr(),a=n.x,o=n.y,u=i.getCanvasBBox(),f=Math.sqrt(u.width*u.width+u.height*u.height),m,x=-e,w=0,L=0,H=function(bt){var xt=bt*.1;return[xt*Math.cos(xt),xt*Math.sin(xt)]};if(r.hasGap(u))return r.fillGap(u),!0;for(var W=!1,et=0,ht={};Math.min(Math.abs(w),Math.abs(L))<f&&et<t;)if(m=H(x+=e),w=~~m[0],L=~~m[1],!(!w&&!L||ht[w+"-"+L])&&(i.attr({x:a+w,y:o+L}),w+L<0&&i.attr("textAlign","right"),et++,r.hasGap(i.getCanvasBBox()))){r.fillGap(i.getCanvasBBox()),W=!0,ht[w+"-"+L]=!0;break}return W}function So(i,r,t,e){var n=i.getCanvasBBox(),a=n.width,o=n.height,u={x:r,y:t,textAlign:"center"};switch(e){case 0:u.y-=o+1,u.x+=1,u.textAlign="left";break;case 1:u.y-=o+1,u.x-=1,u.textAlign="right";break;case 2:u.y+=o+1,u.x-=1,u.textAlign="right";break;case 3:u.y+=o+1,u.x+=1,u.textAlign="left";break;case 5:u.y-=o*2+2;break;case 6:u.y+=o*2+2;break;case 7:u.x+=a+1,u.textAlign="left";break;case 8:u.x-=a+1,u.textAlign="right";break;default:break}return i.attr(u),i.getCanvasBBox()}function qs(i,r,t,e){var n=new Oa;(0,d.each)(r,function(a){var o=a.find(function(u){return u.get("type")==="text"});Pa(o,n)||a.remove(!0)}),n.destroy()}function Yl(i,r,t,e){var n=new Oa;(0,d.each)(r,function(a){for(var o=a.find(function(H){return H.get("type")==="text"}),u=o.attr(),f=u.x,m=u.y,x=!1,w=0;w<=8;w++){var L=So(o,f,m,w);if(n.hasGap(L)){n.fillGap(L),x=!0;break}}x||a.remove(!0)}),n.destroy()}function vu(i,r,t){var e={fillOpacity:(0,d.isNil)(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),strokeOpacity:(0,d.isNil)(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity"),opacity:(0,d.isNil)(i.attr("opacity"))?1:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),i.animate(e,r)}function js(i,r,t){var e={fillOpacity:0,strokeOpacity:0,opacity:0},n=r.easing,a=r.duration,o=r.delay;i.animate(e,a,n,function(){i.remove(!0)},o)}function Bh(i,r,t){var e,n=r[0],a=r[1];return i.applyToMatrix([n,a,1]),t==="x"?(i.setMatrix(Wi.transform(i.getMatrix(),[["t",-n,-a],["s",.01,1],["t",n,a]])),e=Wi.transform(i.getMatrix(),[["t",-n,-a],["s",100,1],["t",n,a]])):t==="y"?(i.setMatrix(Wi.transform(i.getMatrix(),[["t",-n,-a],["s",1,.01],["t",n,a]])),e=Wi.transform(i.getMatrix(),[["t",-n,-a],["s",1,100],["t",n,a]])):t==="xy"&&(i.setMatrix(Wi.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]])),e=Wi.transform(i.getMatrix(),[["t",-n,-a],["s",100,100],["t",n,a]])),e}function ec(i,r,t,e,n){var a=t.start,o=t.end,u=t.getWidth(),f=t.getHeight(),m,x;n==="y"?(m=a.x+u/2,x=e.y<a.y?e.y:a.y):n==="x"?(m=e.x>a.x?e.x:a.x,x=a.y+f/2):n==="xy"&&(t.isPolar?(m=t.getCenter().x,x=t.getCenter().y):(m=(a.x+o.x)/2,x=(a.y+o.y)/2));var w=Bh(i,[m,x],n);i.animate({matrix:w},r)}function ch(i,r,t){var e=t.coordinate,n=t.minYPoint;ec(i,r,e,n,"x")}function mf(i,r,t){var e=t.coordinate,n=t.minYPoint;ec(i,r,e,n,"y")}function y0(i,r,t){var e=t.coordinate,n=t.minYPoint;ec(i,r,e,n,"xy")}function Oc(i,r,t){var e=i.getTotalLength();i.attr("lineDash",[e]),i.animate(function(n){return{lineDashOffset:(1-n)*e}},r)}function mp(i,r,t){var e=t.toAttrs,n=e.x,a=e.y;delete e.x,delete e.y,i.attr(e),i.animate({x:n,y:a},r)}function ld(i,r,t){var e=i.getBBox(),n=i.get("origin").mappingData,a=n.points,o=a[0].y-a[1].y>0?e.maxX:e.minX,u=(e.minY+e.maxY)/2;i.applyToMatrix([o,u,1]);var f=Wi.transform(i.getMatrix(),[["t",-o,-u],["s",.01,1],["t",o,u]]);i.setMatrix(f),i.animate({matrix:Wi.transform(i.getMatrix(),[["t",-o,-u],["s",100,1],["t",o,u]])},r)}function sm(i,r,t){var e=i.getBBox(),n=i.get("origin").mappingData,a=(e.minX+e.maxX)/2,o=n.points,u=o[0].y-o[1].y<=0?e.maxY:e.minY;i.applyToMatrix([a,u,1]);var f=Wi.transform(i.getMatrix(),[["t",-a,-u],["s",1,.01],["t",a,u]]);i.setMatrix(f),i.animate({matrix:Wi.transform(i.getMatrix(),[["t",-a,-u],["s",1,100],["t",a,u]])},r)}var Eu=S(84909);function fh(i,r){var t,e=(0,Eu.Z)(i,r),n=e.startAngle,a=e.endAngle;return!(0,d.isNumberEqual)(n,-Math.PI*.5)&&n<-Math.PI*.5&&(n+=Math.PI*2),!(0,d.isNumberEqual)(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),r[5]===0&&(t=[a,n],n=t[0],a=t[1]),(0,d.isNumberEqual)(n,Math.PI*1.5)&&(n=Math.PI*-.5),(0,d.isNumberEqual)(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:n,endAngle:a}}function Fh(i){var r;return i[0]==="M"||i[0]==="L"?r=[i[1],i[2]]:(i[0]==="a"||i[0]==="A")&&(r=[i[i.length-2],i[i.length-1]]),r}function Lv(i){var r,t,e,n=i.filter(function(qt){return qt[0]==="A"||qt[0]==="a"}),a=n[0],o=n.length>1?n[1]:n[0],u=i.indexOf(a),f=i.indexOf(o),m=Fh(i[u-1]),x=Fh(i[f-1]),w=fh(m,a),L=w.startAngle,H=w.endAngle,W=fh(x,o),et=W.startAngle,ht=W.endAngle;(0,d.isNumberEqual)(L,et)&&(0,d.isNumberEqual)(H,ht)?(t=L,e=H):(t=Math.min(L,et),e=Math.max(H,ht));var bt=a[1],xt=n[n.length-1][1];return bt<xt?(r=[xt,bt],bt=r[0],xt=r[1]):bt===xt&&(xt=0),{startAngle:t,endAngle:e,radius:bt,innerRadius:xt}}function Tg(i,r,t){var e=t.toAttrs,n=t.coordinate,a=e.path,o=a.map(function(xt){return xt[0]}),u=Lv(a),f=u.startAngle,m=u.endAngle,x=u.radius,w=u.innerRadius,L=Lv(i.attr("path")),H=L.startAngle,W=L.endAngle,et=n.getCenter(),ht=f-H,bt=m-W;i.animate(function(xt){var qt=H+xt*ht,ie=W+xt*bt;return(0,st.__assign)((0,st.__assign)({},e),{path:(0,d.isEqual)(o,["M","A","A","Z"])?mo(et.x,et.y,x,qt,ie):Wo(et.x,et.y,x,qt,ie,w)})},(0,st.__assign)((0,st.__assign)({},r),{callback:function(){i.attr("path",a)}}))}function Pg(i,r,t){var e=Se(t.coordinate,20),n=e.type,a=e.startState,o=e.endState,u=i.setClip({type:n,attrs:a});u.animate(o,(0,st.__assign)((0,st.__assign)({},r),{callback:function(){i&&!i.get("destroyed")&&i.set("clipShape",null),u.remove(!0)}}))}function Vp(i,r,t){if(i.isGroup())(0,d.each)(i.getChildren(),function(u){Vp(u,r,t)});else{var e=i.getBBox(),n=(e.minX+e.maxX)/2,a=(e.minY+e.maxY)/2;if(i.applyToMatrix([n,a,1]),t==="zoomIn"){var o=Wi.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]]);i.setMatrix(o),i.animate({matrix:Wi.transform(i.getMatrix(),[["t",-n,-a],["s",100,100],["t",n,a]])},r)}else i.animate({matrix:Wi.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]])},(0,st.__assign)((0,st.__assign)({},r),{callback:function(){i.remove(!0)}}))}}function Zp(i,r,t){Vp(i,r,"zoomIn")}function yy(i,r,t){Vp(i,r,"zoomOut")}function yp(i){return[Ht.TOP,Ht.BOTTOM].includes(i)?{offsetX:0,offsetY:i===Ht.TOP?-8:8,style:{textAlign:"center",textBaseline:i===Ht.TOP?"bottom":"top"}}:[Ht.LEFT,Ht.RIGHT].includes(i)?{offsetX:i===Ht.LEFT?-8:8,offsetY:0,style:{textAlign:i===Ht.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function $d(i,r,t){return{x:i.x+r*Math.cos(t),y:i.y+r*Math.sin(t)}}var Ys=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.getRegion=function(t,e){var n=1/2,a={x:.5,y:.5},o=Math.PI*2/t,u=-1*Math.PI/2+o*e,f=n/(1+1/Math.sin(o/2)),m=$d(a,n-f,u),x=Math.PI*5/4,w=Math.PI*1/4;return{start:$d(m,f,x),end:$d(m,f,w)}},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,n=this.cfg,a=n.fields,o=n.type,u=a[0];if(!u)throw new Error("No `fields` specified!");var f=this.getFieldValues(t,u),m=f.length,x=[];return f.forEach(function(w,L){var H=[{field:u,value:w,values:f}],W=(0,d.filter)(t,e.getFacetDataFilter(H)),et={type:o,data:W,region:e.getRegion(m,L),columnValue:w,columnField:u,columnIndex:L,columnValuesLength:m,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};x.push(et)}),x},r.prototype.getXAxisOption=function(t,e,n,a){return n},r.prototype.getYAxisOption=function(t,e,n,a){return n},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,d.get)(t.cfg.title,"formatter"),u=(0,d.deepMix)({position:["50%","0%"],content:o?o(n):n},yp(Ht.TOP),t.cfg.title);a.annotation().text(u)})},r}(_n),Hp=Ys,um=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,a=this.cfg.cols,o=n[0];if(!o)throw new Error("No `fields` specified!");var u=this.getFieldValues(t,o),f=u.length;a=a||f;var m=this.getPageCount(f,a),x=[];return u.forEach(function(w,L){var H=e.getRowCol(L,a),W=H.row,et=H.col,ht=[{field:o,value:w,values:u}],bt=(0,d.filter)(t,e.getFacetDataFilter(ht)),xt={type:e.cfg.type,data:bt,region:e.getRegion(m,a,et,W),columnValue:w,rowValue:w,columnField:o,rowField:null,columnIndex:et,rowIndex:W,columnValuesLength:a,rowValuesLength:m,total:f};x.push(xt)}),x},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?(0,st.__assign)((0,st.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):n},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,d.get)(t.cfg.title,"formatter"),u=(0,d.deepMix)({position:["50%","0%"],content:o?o(n):n},yp(Ht.TOP),t.cfg.title);a.annotation().text(u)})},r.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},r.prototype.getRowCol=function(t,e){var n=Math.floor(t/e),a=t%e;return{row:n,col:a}},r}(_n),l=um,v=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,st.__assign)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,st.__assign)({},i.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,a=e.type,o=n.length,u=o,f=[],m=0;m<u;m++)for(var x=n[m],w=0;w<o;w++){var L=n[w],H={type:a,data:t,region:this.getRegion(o,u,m,w),columnValue:x,rowValue:L,columnField:x,rowField:L,columnIndex:m,rowIndex:w,columnValuesLength:u,rowValuesLength:o};f.push(H)}return f},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,st.__assign)((0,st.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):n},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e,n){var a=e.columnIndex,o=e.rowIndex,u=e.columnValuesLength,f=e.rowValuesLength,m=e.columnValue,x=e.rowValue,w=e.view;if(o===0){var L=(0,d.get)(t.cfg.columnTitle,"formatter"),H=(0,d.deepMix)({position:["50%","0%"],content:L?L(m):m},yp(Ht.TOP),t.cfg.columnTitle);w.annotation().text(H)}if(a===u-1){var L=(0,d.get)(t.cfg.rowTitle,"formatter"),H=(0,d.deepMix)({position:["100%","50%"],content:L?L(x):x},yp(Ht.RIGHT),t.cfg.rowTitle);w.annotation().text(H)}})},r}(_n),b=v,z=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this),transpose:!1})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields[0],a=[],o=1,u=1,f=[""],m=[""],x,w;return this.cfg.transpose?(x=n,f=this.getFieldValues(t,x).slice(0,2),o=f.length):(w=n,m=this.getFieldValues(t,w).slice(0,2),u=m.length),f.forEach(function(L,H){m.forEach(function(W,et){var ht=[{field:x,value:L,values:f},{field:w,value:W,values:m}],bt=(0,d.filter)(t,e.getFacetDataFilter(ht)),xt={type:e.cfg.type,data:bt,region:e.getRegion(u,o,H,et),columnValue:L,rowValue:W,columnField:x,rowField:w,columnIndex:H,rowIndex:et,columnValuesLength:o,rowValuesLength:u};a.push(xt)})}),a},r.prototype.getXAxisOption=function(t,e,n,a){return a.columnIndex===1||a.rowIndex===1?(0,st.__assign)((0,st.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return n},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e,n){var a=e.columnValue,o=e.rowValue,u=e.view,f=(0,d.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var m=(0,d.deepMix)({position:["50%","0%"],content:f?f(a):a},yp(Ht.TOP),t.cfg.title);u.annotation().text(m)}else{var m=(0,d.deepMix)({position:["100%","50%"],content:f?f(o):o},yp(Ht.RIGHT),t.cfg.title);u.annotation().text(m)}})},r}(_n),$=z,at=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,st.__assign)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,st.__assign)({},i.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,a=n[0],o=n[1],u=[],f=1,m=1,x=[""],w=[""];return a&&(x=this.getFieldValues(t,a),f=x.length),o&&(w=this.getFieldValues(t,o),m=w.length),x.forEach(function(L,H){w.forEach(function(W,et){var ht=[{field:a,value:L,values:x},{field:o,value:W,values:w}],bt=(0,d.filter)(t,e.getFacetDataFilter(ht)),xt={type:e.cfg.type,data:bt,region:e.getRegion(m,f,H,et),columnValue:L,rowValue:W,columnField:a,rowField:o,columnIndex:H,rowIndex:et,columnValuesLength:f,rowValuesLength:m};u.push(xt)})}),u},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e,n){var a=e.columnIndex,o=e.rowIndex,u=e.columnValuesLength,f=e.columnValue,m=e.rowValue,x=e.view;if(o===0){var w=(0,d.get)(t.cfg.columnTitle,"formatter"),L=(0,d.deepMix)({position:["50%","0%"],content:w?w(f):f},yp(Ht.TOP),t.cfg.columnTitle);x.annotation().text(L)}if(a===u-1){var w=(0,d.get)(t.cfg.rowTitle,"formatter"),L=(0,d.deepMix)({position:["100%","50%"],content:w?w(m):m},yp(Ht.RIGHT),t.cfg.rowTitle);x.annotation().text(L)}})},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?(0,st.__assign)((0,st.__assign)({},n),{title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?(0,st.__assign)((0,st.__assign)({},n),{title:null}):n},r}(_n),mt=at,Mt=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.init=function(){i.prototype.init.call(this),this.view.on(Kt.AFTER_RENDER,this.afterChartRender)},r.prototype.getDefaultCfg=function(){return(0,d.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.generateFacets=function(t){var e=this.cfg.fields;if(!e.length)throw new Error("Please specify for the fields for rootFacet!");var n=[],a={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return n.push(a),a.children=this.getChildFacets(t,1,n),this.setRegion(n),n},r.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach(function(n){n.region=e.getRegion(n.rowValuesLength,n.columnValuesLength,n.columnIndex,n.rowIndex)})},r.prototype.getRegion=function(t,e,n,a){var o=1/e,u=1/t,f={x:o*n,y:u*a},m={x:f.x+o,y:f.y+u*2/3};return{start:f,end:m}},r.prototype.forceColIndex=function(t){var e=this,n=[],a=0;t.forEach(function(L){e.isLeaf(L)&&(n.push(L),L.columnIndex=a,a++)}),n.forEach(function(L){L.columnValuesLength=n.length});for(var o=this.cfg.fields.length,u=o-1;u>=0;u--)for(var f=this.getFacetsByLevel(t,u),m=0,x=f;m<x.length;m++){var w=x[m];this.isLeaf(w)||(w.originColIndex=w.columnIndex,w.columnIndex=this.getRegionIndex(w.children),w.columnValuesLength=n.length)}},r.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach(function(a){a.rowIndex===e&&n.push(a)}),n},r.prototype.getRegionIndex=function(t){var e=t[0],n=t[t.length-1];return(n.columnIndex-e.columnIndex)/2+e.columnIndex},r.prototype.isLeaf=function(t){return!t.children||!t.children.length},r.prototype.getRows=function(){return this.cfg.fields.length+1},r.prototype.getChildFacets=function(t,e,n){var a=this,o=this.cfg.fields,u=o.length;if(!(u<e)){var f=[],m=o[e-1],x=this.getFieldValues(t,m);return x.forEach(function(w,L){var H=[{field:m,value:w,values:x}],W=t.filter(a.getFacetDataFilter(H));if(W.length){var et={type:a.cfg.type,data:W,region:null,columnValue:w,rowValue:"",columnField:m,rowField:"",columnIndex:L,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:e,children:a.getChildFacets(W,e+1,n)};f.push(et),n.push(et)}}),f}},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.renderTitle=function(){var t=this;(0,d.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,d.get)(t.cfg.title,"formatter"),u=(0,d.deepMix)({position:["50%","0%"],content:o?o(n):n},yp(Ht.TOP),t.cfg.title);a.annotation().text(u)})},r.prototype.drawLines=function(t){var e=this;t.forEach(function(n){if(!e.isLeaf(n)){var a=n.children;e.addFacetLines(n,a)}})},r.prototype.addFacetLines=function(t,e){var n=this,a=t.view,o=a.coordinateBBox,u={x:o.x+o.width/2,y:o.y+o.height};e.forEach(function(f){var m=f.view.coordinateBBox,x={x:m.bl.x+(m.tr.x-m.bl.x)/2,y:m.tr.y},w={x:u.x,y:u.y+(x.y-u.y)/2},L={x:x.x,y:w.y};n.drawLine([u,w,L,x])})},r.prototype.getPath=function(t){var e=[],n=this.cfg.line.smooth;return n?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(a,o){o===0?e.push(["M",a.x,a.y]):e.push(["L",a.x,a.y])}),e},r.prototype.drawLine=function(t){var e=this.getPath(t),n=this.cfg.line.style;this.container.addShape("path",{attrs:(0,d.assign)({path:e},n)})},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.originColIndex!==0&&a.columnIndex!==0?(0,st.__assign)((0,st.__assign)({},n),{title:null,label:null}):n},r}(_n),oe=Mt,ge=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.cache=new Map,e.foregroundContainer=e.view.getLayer(It.FORE).addGroup(),e.backgroundContainer=e.view.getLayer(It.BG).addGroup(),e.option=[],e}return Object.defineProperty(r.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.layout=function(){var t=this,e=this.getComponents(),n=function(o){var u=o.component,f=o.extra,m=f.type,x=t.getAnnotationTheme(m);u.update(t.getAnnotationCfg(m,f,x))},a=function(o){var u=t.createAnnotation(o);u&&(u.component.init(),o.type==="regionFilter"&&u.component.render(),t.cache.set(o,u))};e.length?(0,d.each)(e,function(o){var u=o.component;u.get("type")==="regionFilter"?t.view.getRootView().once(Kt.AFTER_RENDER,function(){n(o)}):n(o)}):(0,d.each)(this.option,function(o){o.type==="regionFilter"?t.view.getRootView().once(Kt.AFTER_RENDER,function(){a(o)}):a(o)})},r.prototype.render=function(){},r.prototype.update=function(){var t=this,e=new WeakMap,n=function(a){var o=a.type,u=t.getAnnotationTheme(o),f=t.getAnnotationCfg(o,a,u),m=t.cache.get(a);if(m)Pe(f,["container"]),m.component.update(f),e.set(a,!0);else{var x=t.createAnnotation(a);x&&(x.component.init(),a.type==="regionFilter"&&x.component.render(),t.cache.set(a,x),e.set(a,!0))}};this.view.once(Kt.AFTER_RENDER,function(){(0,d.each)(t.option,function(o){o.type==="regionFilter"&&n(o)});var a=new Map;t.cache.forEach(function(o,u){e.has(u)?a.set(u,o):o.component.destroy()}),t.cache=a}),(0,d.each)(this.option,function(a){a.type!=="regionFilter"&&n(a)})},r.prototype.clear=function(t){t===void 0&&(t=!1),i.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},r.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.createAnnotation=function(t){var e=t.type,n=wi.Annotation[(0,d.upperFirst)(e)];if(n){var a=this.getAnnotationTheme(e),o=this.getAnnotationCfg(e,t,a),u=new n(o);return{component:u,layer:this.isTop(o)?It.FORE:It.BG,direction:Ht.NONE,type:kt.ANNOTATION,extra:t}}},r.prototype.annotation=function(t){this.option.push(t)},r.prototype.arc=function(t){return this.annotation((0,st.__assign)({type:"arc"},t)),this},r.prototype.image=function(t){return this.annotation((0,st.__assign)({type:"image"},t)),this},r.prototype.line=function(t){return this.annotation((0,st.__assign)({type:"line"},t)),this},r.prototype.region=function(t){return this.annotation((0,st.__assign)({type:"region"},t)),this},r.prototype.text=function(t){return this.annotation((0,st.__assign)({type:"text"},t)),this},r.prototype.dataMarker=function(t){return this.annotation((0,st.__assign)({type:"dataMarker"},t)),this},r.prototype.dataRegion=function(t){this.annotation((0,st.__assign)({type:"dataRegion"},t))},r.prototype.regionFilter=function(t){this.annotation((0,st.__assign)({type:"regionFilter"},t))},r.prototype.parsePosition=function(t){var e=this.view.getXScale(),n=this.view.getScalesByDim("y"),a=(0,d.isFunction)(t)?t.call(null,e,n):t,o=0,u=0;if((0,d.isArray)(a)){var f=a[0],m=a[1];if((0,d.isString)(f)&&f.indexOf("%")!==-1&&!isNaN(f.slice(0,-1)))return this.parsePercentPosition(a);o=this.getNormalizedValue(f,e),u=this.getNormalizedValue(m,Object.values(n)[0])}else if(!(0,d.isNil)(a))for(var x=0,w=(0,d.keys)(a);x<w.length;x++){var L=w[x],H=a[L];L===e.field&&(o=this.getNormalizedValue(H,e)),n[L]&&(u=this.getNormalizedValue(H,n[L]))}return this.view.getCoordinate().convert({x:o,y:u})},r.prototype.getRegionPoints=function(t,e){var n=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),u=Object.values(o)[0],f=a.field,m=this.view.getData(),x=(0,d.isArray)(t)?t[0]:t[f],w=(0,d.isArray)(e)?e[0]:e[f],L=[],H;return(0,d.each)(m,function(W,et){if(W[f]===x&&(H=et),et>=H){var ht=n.parsePosition([W[f],W[u.field]]);ht&&L.push(ht)}if(W[f]===w)return!1}),L},r.prototype.getNormalizedValue=function(t,e){var n,a;switch(t){case"start":n=0;break;case"end":n=1;break;case"median":{a=e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2,n=e.scale(a);break}case"min":case"max":e.isCategory?a=t==="min"?0:e.values.length-1:a=e[t],n=e.scale(a);break;default:n=e.scale(t)}return n},r.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,a=this.view.getCoordinate(),o=a.start,u=a.end,f={x:Math.min(o.x,u.x),y:Math.min(o.y,u.y)},m=a.getWidth()*e+f.x,x=a.getHeight()*n+f.y;return{x:m,y:x}},r.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,a=t.getWidth(),o=t.getHeight(),u={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:u.x,y:u.y,minX:u.x,minY:u.y,maxX:u.x+a,maxY:u.y+o,width:a,height:o}},r.prototype.getAnnotationCfg=function(t,e,n){var a=this.view.getCoordinate(),o={};if((0,d.isNil)(e))return null;if(t==="arc"){var u=e,f=u.start,m=u.end,x=this.parsePosition(f),w=this.parsePosition(m),L=de(a,x),H=de(a,w);L>H&&(H=Math.PI*2+H),o={center:a.getCenter(),radius:zt(a,x),startAngle:L,endAngle:H}}else if(t==="image"){var W=e,f=W.start,m=W.end;o={start:this.parsePosition(f),end:this.parsePosition(m),src:e.src}}else if(t==="line"){var et=e,f=et.start,m=et.end;o={start:this.parsePosition(f),end:this.parsePosition(m),text:(0,d.get)(e,"text",null)}}else if(t==="region"){var ht=e,f=ht.start,m=ht.end;o={start:this.parsePosition(f),end:this.parsePosition(m)}}else if(t==="text"){var bt=this.view.getData(),xt=e,qt=xt.position,ie=xt.content,_e=(0,st.__rest)(xt,["position","content"]),ze=ie;(0,d.isFunction)(ie)&&(ze=ie(bt)),o=(0,st.__assign)((0,st.__assign)((0,st.__assign)({},this.parsePosition(qt)),_e),{content:ze})}else if(t==="dataMarker"){var rr=e,qt=rr.position,sr=rr.point,qe=rr.line,wr=rr.text,Vr=rr.autoAdjust,Br=rr.direction;o=(0,st.__assign)((0,st.__assign)({},this.parsePosition(qt)),{coordinateBBox:this.getCoordinateBBox(),point:sr,line:qe,text:wr,autoAdjust:Vr,direction:Br})}else if(t==="dataRegion"){var Tn=e,f=Tn.start,m=Tn.end,Hn=Tn.region,wr=Tn.text,Un=Tn.lineLength;o={points:this.getRegionPoints(f,m),region:Hn,text:wr,lineLength:Un}}else if(t==="regionFilter"){var Ei=e,f=Ei.start,m=Ei.end,Ti=Ei.apply,Li=Ei.color,_i=this.view.geometries,bi=[],Ba=function(Na){!Na||(Na.isGroup()?Na.getChildren().forEach(function(_o){return Ba(_o)}):bi.push(Na))};(0,d.each)(_i,function(Na){Ti?(0,d.contains)(Ti,Na.type)&&(0,d.each)(Na.elements,function(_o){Ba(_o.shape)}):(0,d.each)(Na.elements,function(_o){Ba(_o.shape)})}),o={color:Li,shapes:bi,start:this.parsePosition(f),end:this.parsePosition(m)}}var La=(0,d.deepMix)({},n,(0,st.__assign)((0,st.__assign)({},o),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return La.container=this.getComponentContainer(La),La.animate=this.view.getOptions().animate&&La.animate&&(0,d.get)(e,"animate",La.animate),La.animateOption=(0,d.deepMix)({},of,La.animateOption,e.animateOption),La},r.prototype.isTop=function(t){return(0,d.get)(t,"top",!0)},r.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},r.prototype.getAnnotationTheme=function(t){return(0,d.get)(this.view.getTheme(),["components","annotation",t],{})},r}(Vl),Ce=ge;function Ie(i,r){return(0,d.get)(i,["components","axis",r,"grid"],{})}function Ge(i,r,t,e){var n=[],a=r.getTicks();return i.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,u,f){var m=u.value;if(e)n.push({points:[i.convert(t==="y"?{x:0,y:m}:{x:m,y:0}),i.convert(t==="y"?{x:1,y:m}:{x:m,y:1})]});else if(f){var x=o.value,w=(x+m)/2;n.push({points:[i.convert(t==="y"?{x:0,y:w}:{x:w,y:0}),i.convert(t==="y"?{x:1,y:w}:{x:w,y:1})]})}return u},a[0]),n}function Zt(i,r,t,e,n){var a=r.values.length,o=[],u=t.getTicks();return u.reduce(function(f,m){var x=f?f.value:m.value,w=m.value,L=(x+w)/2;return n==="x"?o.push({points:[i.convert({x:e?w:L,y:0}),i.convert({x:e?w:L,y:1})]}):o.push({points:(0,d.map)(Array(a+1),function(H,W){return i.convert({x:W/a,y:e?w:L})})}),m},u[0]),o}function xr(i,r){var t=(0,d.get)(r,"grid");if(t===null)return!1;var e=(0,d.get)(i,"grid");return!(t===void 0&&e===null)}var mr=["container"],jr=(0,st.__assign)((0,st.__assign)({},of),{appear:null}),kr=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.cache=new Map,e.gridContainer=e.view.getLayer(It.BG).addGroup(),e.axisContainer=e.view.getLayer(It.BG).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){this.update()},r.prototype.layout=function(){var t=this,e=this.view.getCoordinate();(0,d.each)(this.getComponents(),function(n){var a=n.component,o=n.direction,u=n.type,f=n.extra,m=f.dim,x=f.scale,w=f.alignTick,L;if(u===kt.AXIS)e.isPolar?m==="x"?L=e.isTransposed?Ze(e,o):Mr(e):m==="y"&&(L=e.isTransposed?Mr(e):Ze(e,o)):L=Ze(e,o);else if(u===kt.GRID)if(e.isPolar){var H=void 0;e.isTransposed?H=m==="x"?Zt(e,t.view.getYScales()[0],x,w,m):Ge(e,x,m,w):H=m==="x"?Ge(e,x,m,w):Zt(e,t.view.getXScale(),x,w,m),L={items:H,center:t.view.getCoordinate().getCenter()}}else L={items:Ge(e,x,m,w)};a.update(L)})},r.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach(function(n,a){t.has(a)?e.set(a,n):n.component.destroy()}),this.cache=e},r.prototype.clear=function(){i.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(!(!e||e.isIdentity)){var n=Xr(this.option,e.field);if(n!==!1){var a=Zr(n,Ht.BOTTOM),o=It.BG,u="x",f=this.view.getCoordinate(),m=this.getId("axis",e.field),x=this.getId("grid",e.field);if(f.isRect){var w=this.cache.get(m);if(w){var L=this.getLineAxisCfg(e,n,a);Pe(L,mr),w.component.update(L),t.set(m,w)}else w=this.createLineAxis(e,n,o,a,u),this.cache.set(m,w),t.set(m,w);var H=this.cache.get(x);if(H){var L=this.getLineGridCfg(e,n,a,u);Pe(L,mr),H.component.update(L),t.set(x,H)}else H=this.createLineGrid(e,n,o,a,u),H&&(this.cache.set(x,H),t.set(x,H))}else if(f.isPolar){var w=this.cache.get(m);if(w){var L=f.isTransposed?this.getLineAxisCfg(e,n,Ht.RADIUS):this.getCircleAxisCfg(e,n,a);Pe(L,mr),w.component.update(L),t.set(m,w)}else{if(f.isTransposed){if((0,d.isUndefined)(n))return;w=this.createLineAxis(e,n,o,Ht.RADIUS,u)}else w=this.createCircleAxis(e,n,o,a,u);this.cache.set(m,w),t.set(m,w)}var H=this.cache.get(x);if(H){var L=f.isTransposed?this.getCircleGridCfg(e,n,Ht.RADIUS,u):this.getLineGridCfg(e,n,Ht.CIRCLE,u);Pe(L,mr),H.component.update(L),t.set(x,H)}else{if(f.isTransposed){if((0,d.isUndefined)(n))return;H=this.createCircleGrid(e,n,o,Ht.RADIUS,u)}else H=this.createLineGrid(e,n,o,Ht.CIRCLE,u);H&&(this.cache.set(x,H),t.set(x,H))}}}}},r.prototype.updateYAxes=function(t){var e=this,n=this.view.getYScales();(0,d.each)(n,function(a,o){if(!(!a||a.isIdentity)){var u=a.field,f=Xr(e.option,u);if(f!==!1){var m=It.BG,x="y",w=e.getId("axis",u),L=e.getId("grid",u),H=e.view.getCoordinate();if(H.isRect){var W=Zr(f,o===0?Ht.LEFT:Ht.RIGHT),et=e.cache.get(w);if(et){var ht=e.getLineAxisCfg(a,f,W);Pe(ht,mr),et.component.update(ht),t.set(w,et)}else et=e.createLineAxis(a,f,m,W,x),e.cache.set(w,et),t.set(w,et);var bt=e.cache.get(L);if(bt){var ht=e.getLineGridCfg(a,f,W,x);Pe(ht,mr),bt.component.update(ht),t.set(L,bt)}else bt=e.createLineGrid(a,f,m,W,x),bt&&(e.cache.set(L,bt),t.set(L,bt))}else if(H.isPolar){var et=e.cache.get(w);if(et){var ht=H.isTransposed?e.getCircleAxisCfg(a,f,Ht.CIRCLE):e.getLineAxisCfg(a,f,Ht.RADIUS);Pe(ht,mr),et.component.update(ht),t.set(w,et)}else{if(H.isTransposed){if((0,d.isUndefined)(f))return;et=e.createCircleAxis(a,f,m,Ht.CIRCLE,x)}else et=e.createLineAxis(a,f,m,Ht.RADIUS,x);e.cache.set(w,et),t.set(w,et)}var bt=e.cache.get(L);if(bt){var ht=H.isTransposed?e.getLineGridCfg(a,f,Ht.CIRCLE,x):e.getCircleGridCfg(a,f,Ht.RADIUS,x);Pe(ht,mr),bt.component.update(ht),t.set(L,bt)}else{if(H.isTransposed){if((0,d.isUndefined)(f))return;bt=e.createLineGrid(a,f,m,Ht.CIRCLE,x)}else bt=e.createCircleGrid(a,f,m,Ht.RADIUS,x);bt&&(e.cache.set(L,bt),t.set(L,bt))}}}}})},r.prototype.createLineAxis=function(t,e,n,a,o){var u={component:new Sa(this.getLineAxisCfg(t,e,a)),layer:n,direction:a===Ht.RADIUS?Ht.NONE:a,type:kt.AXIS,extra:{dim:o,scale:t}};return u.component.set("field",t.field),u.component.init(),u},r.prototype.createLineGrid=function(t,e,n,a,o){var u=this.getLineGridCfg(t,e,a,o);if(u){var f={component:new qa(u),layer:n,direction:Ht.NONE,type:kt.GRID,extra:{dim:o,scale:t,alignTick:(0,d.get)(u,"alignTick",!0)}};return f.component.init(),f}},r.prototype.createCircleAxis=function(t,e,n,a,o){var u={component:new to(this.getCircleAxisCfg(t,e,a)),layer:n,direction:a,type:kt.AXIS,extra:{dim:o,scale:t}};return u.component.set("field",t.field),u.component.init(),u},r.prototype.createCircleGrid=function(t,e,n,a,o){var u=this.getCircleGridCfg(t,e,a,o);if(u){var f={component:new Ui(u),layer:n,direction:Ht.NONE,type:kt.GRID,extra:{dim:o,scale:t,alignTick:(0,d.get)(u,"alignTick",!0)}};return f.component.init(),f}},r.prototype.getLineAxisCfg=function(t,e,n){var a=this.axisContainer,o=this.view.getCoordinate(),u=Ze(o,n),f=tn(t,e),m=tr(this.view.getTheme(),n),x=(0,d.get)(e,["title"])?(0,d.deepMix)({title:{style:{text:f}}},e):e,w=(0,d.deepMix)((0,st.__assign)((0,st.__assign)({container:a},u),{ticks:t.getTicks().map(function(qt){return{id:""+qt.tickValue,name:qt.text,value:qt.value}}),verticalFactor:o.isPolar?Be(u,o.getCenter())*-1:Be(u,o.getCenter())}),m,x),L=this.getAnimateCfg(w),H=L.animate,W=L.animateOption;w.animateOption=W,w.animate=H;var et=lr(u),ht=(0,d.get)(w,"verticalLimitLength",et?1/3:1/2);if(ht<=1){var bt=this.view.getCanvas().get("width"),xt=this.view.getCanvas().get("height");w.verticalLimitLength=ht*(et?bt:xt)}return w},r.prototype.getLineGridCfg=function(t,e,n,a){if(!!xr(tr(this.view.getTheme(),n),e)){var o=Ie(this.view.getTheme(),n),u=(0,d.deepMix)({container:this.gridContainer},o,(0,d.get)(e,"grid"),this.getAnimateCfg(e));return u.items=Ge(this.view.getCoordinate(),t,a,(0,d.get)(u,"alignTick",!0)),u}},r.prototype.getCircleAxisCfg=function(t,e,n){var a=this.axisContainer,o=this.view.getCoordinate(),u=t.getTicks().map(function(et){return{id:""+et.tickValue,name:et.text,value:et.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&u.pop();var f=tn(t,e),m=tr(this.view.getTheme(),Ht.CIRCLE),x=(0,d.get)(e,["title"])?(0,d.deepMix)({title:{style:{text:f}}},e):e,w=(0,d.deepMix)((0,st.__assign)((0,st.__assign)({container:a},Mr(this.view.getCoordinate())),{ticks:u,verticalFactor:1}),m,x),L=this.getAnimateCfg(w),H=L.animate,W=L.animateOption;return w.animate=H,w.animateOption=W,w},r.prototype.getCircleGridCfg=function(t,e,n,a){if(!!xr(tr(this.view.getTheme(),n),e)){var o=Ie(this.view.getTheme(),Ht.RADIUS),u=(0,d.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,(0,d.get)(e,"grid"),this.getAnimateCfg(e)),f=(0,d.get)(u,"alignTick",!0),m=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return u.items=Zt(this.view.getCoordinate(),m,t,f,a),u}},r.prototype.getId=function(t,e){var n=this.view.getCoordinate();return t+"-"+e+"-"+n.type},r.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,d.get)(t,"animate"),animateOption:t&&t.animateOption?(0,d.deepMix)({},jr,t.animateOption):jr}},r}(Vl),un=kr;function En(i,r,t){return t===Ht.TOP?[i.minX+i.width/2-r.width/2,i.minY]:t===Ht.BOTTOM?[i.minX+i.width/2-r.width/2,i.maxY-r.height]:t===Ht.LEFT?[i.minX,i.minY+i.height/2-r.height/2]:t===Ht.RIGHT?[i.maxX-r.width,i.minY+i.height/2-r.height/2]:t===Ht.TOP_LEFT||t===Ht.LEFT_TOP?[i.tl.x,i.tl.y]:t===Ht.TOP_RIGHT||t===Ht.RIGHT_TOP?[i.tr.x-r.width,i.tr.y]:t===Ht.BOTTOM_LEFT||t===Ht.LEFT_BOTTOM?[i.bl.x,i.bl.y-r.height]:t===Ht.BOTTOM_RIGHT||t===Ht.RIGHT_BOTTOM?[i.br.x-r.width,i.br.y-r.height]:[0,0]}function kn(i,r){if(r.isTransposed)switch(i){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return i}function Gn(i){return i===DIRECTION.LEFT?DIRECTION.RIGHT:i===DIRECTION.RIGHT?DIRECTION.LEFT:i}function oi(i){return i===DIRECTION.TOP?DIRECTION.BOTTOM:i===DIRECTION.BOTTOM?DIRECTION.TOP:i}function Bi(i,r){var t=r.matrix[0],e=r.matrix[4],n=i;return t<0&&(n=Gn(n)),e<0&&(n=oi(n)),n}function oa(i,r){var t=i;return r.isReflect("x")&&(t=Gn(t)),r.isReflect("y")&&(t=oi(t)),t}function eo(i,r){var t=i;return t=kn(t,r),t=Bi(t,r),t=oa(t,r),t}function ba(i,r,t){if(!i)return t;var e;if(i.callback&&i.callback.length>1){var n=Array(i.callback.length-1).fill("");e=i.mapping.apply(i,(0,st.__spreadArrays)([r],n)).join("")}else e=i.mapping(r).join("");return e||t}function lo(i){var r=i.symbol;(0,d.isString)(r)&&$i[r]&&(i.symbol=$i[r])}function Ea(i){return i.startsWith(Ht.LEFT)||i.startsWith(Ht.RIGHT)?"vertical":"horizontal"}function es(i,r,t,e,n){var a=t.getScale(t.type);if(a.isCategory){var o=a.field,u=r.getAttribute("color"),f=r.getAttribute("shape"),m=i.getTheme().defaultColor,x=r.coordinate.isPolar;return a.getTicks().map(function(w){var L,H=w.text,W=w.value,et=H,ht=a.invert(W),bt=i.filterFieldData(o,[(L={},L[o]=ht,L)]).length===0,xt=ba(u,ht,m),qt=ba(f,ht,"point"),ie=r.getShapeMarker(qt,{color:xt,isInPolar:x});return ie=(0,d.deepMix)({},e,ie,n),lo(ie),{id:ht,name:et,value:ht,marker:ie,unchecked:bt}})}return[]}function Ao(i,r,t){return t.map(function(e){var n=(0,d.deepMix)({},i,r,e.marker);return lo(n),e.marker=n,e})}function Za(i,r){return(0,d.isBoolean)(i)?i===!1?!1:{}:(0,d.get)(i,[r],i)}function qo(i){return(0,d.get)(i,"position",Ht.BOTTOM)}var jo=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.container=e.view.getLayer(It.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){var t=this;this.option=this.view.getOptions().legends;var e=function(u,f,m){var x=t.createFieldLegend(u,f,m);x&&(x.component.init(),t.components.push(x))};if((0,d.get)(this.option,"custom")){var n=this.createCustomLegend(void 0,void 0,void 0,this.option);if(n){n.init();var a=It.FORE,o=qo(this.option);this.components.push({id:"global-custom",component:n,layer:a,direction:o,type:kt.LEGEND,extra:void 0})}}else this.loopLegends(e)},r.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox;var e=(0,d.get)(this.view.getTheme(),["components","legend","margin"],[0,0,0,0]);(0,d.each)(this.components,function(n){var a=n.component,o=n.direction,u=Ea(o),f=t.getCategoryLegendSizeCfg(u),m=a.get("maxWidth"),x=a.get("maxHeight");a.update({maxWidth:Math.min(f.maxWidth,m||0),maxHeight:Math.min(f.maxHeight,x||0)});var w=a.getLayoutBBox(),L=new va(w.x,w.y,w.width,w.height),H=En(t.view.viewBBox,L,o),W=H[0],et=H[1],ht=En(t.layoutBBox,L,o),bt=ht[0],xt=ht[1],qt=0,ie=0;o.startsWith("top")||o.startsWith("bottom")?(qt=W,ie=xt):(qt=bt,ie=et),o.indexOf("left")>=0&&(qt+=e[3]),o.indexOf("right")>=0&&(qt-=e[1]),o.indexOf("top")>=0&&(ie+=e[0]),o.indexOf("bottom")>=0&&(ie-=e[2]),a.update({x:qt,y:ie}),t.layoutBBox=t.layoutBBox.cut(L,o)})},r.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={},n=function(L,H,W){var et=t.getId(W.field),ht=t.getComponentById(et);if(ht){var bt=void 0,xt=Za(t.option,W.field);xt!==!1&&((0,d.get)(xt,"custom")?bt=t.getCategoryCfg(L,H,W,xt,!0):W.isLinear?bt=t.getContinuousCfg(L,H,W,xt):W.isCategory&&(bt=t.getCategoryCfg(L,H,W,xt))),bt&&(Pe(bt,["container"]),ht.direction=qo(xt),ht.component.update(bt),e[et]=!0)}else{var qt=t.createFieldLegend(L,H,W);qt&&(qt.component.init(),t.components.push(qt),e[et]=!0)}};if((0,d.get)(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var u=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Pe(u,["container"]),o.component.update(u),e[a]=!0}else{var f=this.createCustomLegend(void 0,void 0,void 0,this.option);if(f){f.init();var m=It.FORE,x=qo(this.option);this.components.push({id:a,component:f,layer:m,direction:x,type:kt.LEGEND,extra:void 0}),e[a]=!0}}}else this.loopLegends(n);var w=[];(0,d.each)(this.getComponents(),function(L){e[L.id]?w.push(L):L.component.destroy()}),this.components=w},r.prototype.clear=function(){i.prototype.clear.call(this),this.container.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.container.remove(!0)},r.prototype.getGeometries=function(t){var e=this,n=t.geometries;return(0,d.each)(t.views,function(a){n=n.concat(e.getGeometries(a))}),n},r.prototype.loopLegends=function(t){var e=this.view.getRootView()===this.view;if(!!e){var n=this.getGeometries(this.view),a={};(0,d.each)(n,function(o){var u=o.getGroupAttributes();(0,d.each)(u,function(f){var m=f.getScale(f.type);!m||m.type==="identity"||a[m.field]||(t(o,f,m),a[m.field]=!0)})})}},r.prototype.createFieldLegend=function(t,e,n){var a,o=Za(this.option,n.field),u=It.FORE,f=qo(o);if(o!==!1&&((0,d.get)(o,"custom")?a=this.createCustomLegend(t,e,n,o):n.isLinear?a=this.createContinuousLegend(t,e,n,o):n.isCategory&&(a=this.createCategoryLegend(t,e,n,o))),a)return a.set("field",n.field),{id:this.getId(n.field),component:a,layer:u,direction:f,type:kt.LEGEND,extra:{scale:n}}},r.prototype.createCustomLegend=function(t,e,n,a){var o=this.getCategoryCfg(t,e,n,a,!0);return new Ue(o)},r.prototype.createContinuousLegend=function(t,e,n,a){var o=this.getContinuousCfg(t,e,n,a);return new We(o)},r.prototype.createCategoryLegend=function(t,e,n,a){var o=this.getCategoryCfg(t,e,n,a);return new Ue(o)},r.prototype.getContinuousCfg=function(t,e,n,a){var o=n.getTicks(),u=(0,d.find)(o,function(et){return et.value===0}),f=(0,d.find)(o,function(et){return et.value===1}),m=o.map(function(et){var ht=et.value,bt=et.tickValue,xt=e.mapping(n.invert(ht)).join("");return{value:bt,attrValue:xt,color:xt,scaleValue:ht}});u||m.push({value:n.min,attrValue:e.mapping(n.invert(0)).join(""),color:e.mapping(n.invert(0)).join(""),scaleValue:0}),f||m.push({value:n.max,attrValue:e.mapping(n.invert(1)).join(""),color:e.mapping(n.invert(1)).join(""),scaleValue:1}),m.sort(function(et,ht){return et.value-ht.value});var x={min:(0,d.head)(m).value,max:(0,d.last)(m).value,colors:[],rail:{type:e.type},track:{}};e.type==="size"&&(x.track={style:{fill:e.type==="size"?this.view.getTheme().defaultColor:void 0}}),e.type==="color"&&(x.colors=m.map(function(et){return et.attrValue}));var w=this.container,L=qo(a),H=Ea(L),W=(0,d.get)(a,"title");return W&&(W=(0,d.deepMix)({text:le(n)},W)),x.container=w,x.layout=H,x.title=W,x.animateOption=of,this.mergeLegendCfg(x,a,"continuous")},r.prototype.getCategoryCfg=function(t,e,n,a,o){var u=this.container,f=(0,d.get)(a,"position",Ht.BOTTOM),m=(0,d.get)(this.view.getTheme(),["components","legend",f,"marker"]),x=(0,d.get)(a,"marker"),w=Ea(f),L=o?Ao(m,x,a.items):es(this.view,t,e,m,x),H=(0,d.get)(a,"title");H&&(H=(0,d.deepMix)({text:n?le(n):""},H));var W=this.getCategoryLegendSizeCfg(w);W.container=u,W.layout=w,W.items=L,W.title=H,W.animateOption=of;var et=this.mergeLegendCfg(W,a,f);et.reversed&&et.items.reverse();var ht=(0,d.get)(et,"maxItemWidth");return ht&&ht<=1&&(et.maxItemWidth=this.view.viewBBox.width*ht),et},r.prototype.mergeLegendCfg=function(t,e,n){var a=n.split("-")[0],o=(0,d.get)(this.view.getTheme(),["components","legend",a],{});return(0,d.deepMix)({},o,t,e)},r.prototype.getId=function(t){return this.name+"-"+t},r.prototype.getComponentById=function(t){return(0,d.find)(this.components,function(e){return e.id===t})},r.prototype.getCategoryLegendSizeCfg=function(t){var e=this.view.viewBBox,n=e.width,a=e.height;return t==="vertical"?{maxWidth:n*Pt,maxHeight:a}:{maxWidth:n,maxHeight:a*Pt}},r}(Vl),ys=jo,co=function(i){(0,st.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.onValueChanged=function(n){var a=n[0],o=n[1];e.updateMinMaxText(a,o),e.view.render(!0)},e.container=e.view.getLayer(It.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var t=this.slider.component.get("start")||0,e=this.slider.component.get("end")||1;this.updateMinMaxText(t,e)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},r.prototype.layout=function(){if(this.slider){var t=this.view.coordinateBBox.width,e=this.slider.component.getLayoutBBox(),n=new va(e.x,e.y,Math.min(e.width,t),e.height),a=En(this.view.viewBBox,n,Ht.BOTTOM),o=a[0],u=a[1],f=En(this.view.coordinateBBox,n,Ht.BOTTOM),m=f[0],x=f[1];this.slider.component.update({x:m,y:u,width:t})}},r.prototype.update=function(){this.render()},r.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new wi.Slider((0,st.__assign)({container:this.container},t));return e.init(),{component:e,layer:It.FORE,direction:Ht.BOTTOM,type:kt.OTHER}},r.prototype.updateSlider=function(){var t=this.getSliderCfg();return Pe(t,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(t),this.slider},r.prototype.getSliderCfg=function(){if((0,d.isObject)(this.option)){var t=(0,st.__assign)({data:this.getData()},(0,d.get)(this.option,"trendCfg",{})),e=0,n=0,a=this.view.coordinateBBox.width,o=(0,d.deepMix)({},{x:e,y:n,width:a},this.option);return(0,st.__assign)((0,st.__assign)({},o),{trendCfg:t})}return{}},r.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var a=n[0],o=a.field,u=a.ticks;return t.reduce(function(f,m){return m[o]===u[0]&&f.push(m[e.field]),f},[])}return t.map(function(f){return f[e.field]||0})},r.prototype.updateMinMaxText=function(t,e){var n=this.view.getOptions().data,a=this.view.getXScale(),o=(0,d.size)(n);if(!(!a||!o)){var u=a.field,f=n.reduce(function(et,ht){return et.includes(ht[u])||et.push(ht[u]),et},[]),m=(0,d.size)(f),x=Math.floor(t*(m-1)),w=Math.floor(e*(m-1)),L=(0,d.get)(f,[x]),H=(0,d.get)(f,[w]),W=this.getSliderCfg().formatter;W&&(L=W(L,n[x],x),H=W(H,n[w],w)),this.slider.component.update({minText:L,maxText:H,start:t,end:e}),this.view.filter(a.field,function(et,ht){var bt=f.indexOf(et);return bt>-1?pa(bt,x,w):!0})}},r.prototype.getComponents=function(){return this.slider?[this.slider]:[]},r}(Vl),Fs=co;function Cu(i){for(var r=[],t=function(n){var a=i[n],o=(0,d.find)(r,function(u){return u.color===a.color&&u.name===a.name&&u.value===a.value&&u.title===a.title});o||r.push(a)},e=0;e<i.length;e++)t(e);return r}var el=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},r.prototype.render=function(){},r.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var e=this.view,n=this.getTooltipItems(t);if(!n.length){this.hideTooltip();return}var a=this.getTitle(n),o={x:n[0].x,y:n[0].y};e.emit("tooltip:show",(0,st.__assign)({items:n,title:a},t));var u=this.getTooltipCfg(),f=u.follow,m=u.showMarkers,x=u.showCrosshairs,w=u.showContent,L=u.marker,H=this.items,W=this.title;if(!(0,d.isEqual)(W,a)||!(0,d.isEqual)(H,n)?(e.emit("tooltip:change",(0,st.__assign)({items:n,title:a},t)),w&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,d.mix)({},u,{items:n,title:a},f?t:{})),this.tooltip.show()),m&&this.renderTooltipMarkers(n,L)):(this.tooltip&&f&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=n,this.title=a,x){var et=(0,d.get)(u,["crosshairs","follow"],!1);this.renderCrosshairs(et?t:o,u)}}},r.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var e=this.tooltipMarkersGroup;e&&e.hide();var n=this.xCrosshair,a=this.yCrosshair;n&&n.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",{}),this.point=null},r.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},r.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},r.prototype.isTooltipLocked=function(){return this.isLocked},r.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,a=t.yCrosshair,o=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),a&&a.clear(),o&&o.clear()},r.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},r.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,a=e.tooltipMarkersGroup,o=e.xCrosshair,u=e.yCrosshair;t?(n&&n.show(),a&&a.show(),o&&o.show(),u&&u.show()):(n&&n.hide(),a&&a.hide(),o&&o.hide(),u&&u.hide()),this.visible=t}},r.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){e=(0,d.flatten)(e);for(var n=0,a=e;n<a.length;n++)for(var o=a[n],u=0,f=o;u<f.length;u++){var m=f[u],x=m.mappingData,w=x.x,L=x.y;m.x=(0,d.isArray)(w)?w[w.length-1]:w,m.y=(0,d.isArray)(L)?L[L.length-1]:L}var H=this.getTooltipCfg().shared;if(H===!1&&e.length>1){for(var W=e[0],et=Math.abs(t.y-W[0].y),ht=0,bt=e;ht<bt.length;ht++){var xt=bt[ht],qt=Math.abs(t.y-xt[0].y);qt<=et&&(W=xt,et=qt)}e=[W]}return Cu((0,d.flatten)(e))}return[]},r.prototype.layout=function(){},r.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},r.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,n=t.getTheme(),a=(0,d.get)(n,["components","tooltip"],{}),o=(0,d.isUndefined)((0,d.get)(e,"enterable"))?a.enterable:(0,d.get)(e,"enterable");return(0,d.deepMix)({},a,e,{capture:!!(o||this.isLocked)})},r.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},r.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},n=this.getTooltipCfg(),a=new fr((0,st.__assign)((0,st.__assign)({parent:t.get("el").parentNode,region:e},n),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},r.prototype.renderTooltipMarkers=function(t,e){for(var n=this.getTooltipMarkersGroup(),a=0,o=t;a<o.length;a++){var u=o[a],f=u.x,m=u.y,x=(0,st.__assign)((0,st.__assign)({fill:u.color,symbol:"circle",shadowColor:u.color},e),{x:f,y:m});n.addShape("marker",{attrs:x})}},r.prototype.renderCrosshairs=function(t,e){var n=(0,d.get)(e,["crosshairs","type"],"x");n==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):n==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):n==="xy"&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},r.prototype.renderXCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(!!Wt(n,t)){var a,o;if(n.isRect)n.isTransposed?(a={x:n.start.x,y:t.y},o={x:n.end.x,y:t.y}):(a={x:t.x,y:n.end.y},o={x:t.x,y:n.start.y});else{var u=de(n,t),f=n.getCenter(),m=n.getRadius();o=vn(f.x,f.y,m,u),a=f}var x=(0,d.deepMix)({start:a,end:o,container:this.getTooltipCrosshairsGroup()},(0,d.get)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete x.type;var w=this.xCrosshair;w?w.update(x):(w=new wi.Crosshair.Line(x),w.init()),w.render(),w.show(),this.xCrosshair=w}},r.prototype.renderYCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(!!Wt(n,t)){var a,o;if(n.isRect){var u=void 0,f=void 0;n.isTransposed?(u={x:t.x,y:n.end.y},f={x:t.x,y:n.start.y}):(u={x:n.start.x,y:t.y},f={x:n.end.x,y:t.y}),a={start:u,end:f},o="Line"}else a={center:n.getCenter(),radius:zt(n,t),startAngle:n.startAngle,endAngle:n.endAngle},o="Circle";a=(0,d.deepMix)({container:this.getTooltipCrosshairsGroup()},a,(0,d.get)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e)),delete a.type;var m=this.yCrosshair;m?n.isRect&&m.get("type")==="circle"||!n.isRect&&m.get("type")==="line"?(m=new wi.Crosshair[o](a),m.init()):m.update(a):(m=new wi.Crosshair[o](a),m.init()),m.render(),m.show(),this.yCrosshair=m}},r.prototype.getCrosshairsText=function(t,e,n){var a=(0,d.get)(n,["crosshairs","text"]),o=(0,d.get)(n,["crosshairs","follow"]),u=this.items;if(a){var f=this.getViewWithGeometry(this.view),m=u[0],x=f.getXScale(),w=f.getYScales()[0],L=void 0,H=void 0;if(o){var W=this.view.getCoordinate().invert(e);L=x.invert(W.x),H=w.invert(W.y)}else L=m.data[x.field],H=m.data[w.field];var et=t==="x"?L:H;return(0,d.isFunction)(a)?a=a(t,et,u,e):a.content=et,{text:a}}},r.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},r.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},r.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},r.prototype.getTooltipItemsByHitShape=function(t,e,n){var a=[],o=t.container,u=o.getShape(e.x,e.y);if(u&&u.get("visible")&&u.get("origin")){var f=u.get("origin").mappingData,m=ts(f,t,n);m.length&&a.push(m)}return a},r.prototype.getTooltipItemsByFindData=function(t,e,n){var a=[],o=t.dataArray;t.sort(o);for(var u=0,f=o;u<f.length;u++){var m=f[u],x=Ra(e,m,t);if(x){var w=t.getElementId(x),L=t.elementsMap[w];if(t.type==="heatmap"||L.visible){var H=ts(x,t,n);H.length&&a.push(H)}}}return a},r.prototype.findItemsFromView=function(t,e){if(t.getOptions().tooltip===!1)return[];for(var n=[],a=t.geometries,o=this.getTooltipCfg(),u=o.shared,f=o.title,m=0,x=a;m<x.length;m++){var w=x[m];if(w.visible&&w.tooltipOption!==!1){var L=w.type,H=void 0;["point","edge","polygon"].includes(L)?H=this.getTooltipItemsByHitShape(w,e,f):["area","line","path","heatmap"].includes(L)?H=this.getTooltipItemsByFindData(w,e,f):u!==!1?H=this.getTooltipItemsByFindData(w,e,f):H=this.getTooltipItemsByHitShape(w,e,f),H.length&&n.push(H)}}for(var W=0,et=t.views;W<et.length;W++){var ht=et[W];n=n.concat(this.findItemsFromView(ht,e))}return n},r.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,d.find)(t.views,function(n){return e.getViewWithGeometry(n)})},r}(Vl),_u=el,Ru=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.context.view,e=this.context.event,n=t.getTooltipItems({x:e.x,y:e.y});if(!(0,d.isEqual)(n,this.items)&&(this.items=n,n.length)){var a=t.getXScale().field,o=n[0].data[a],u=[],f=t.geometries;if((0,d.each)(f,function(Tn){if(Tn.type==="interval"||Tn.type==="schema"){var Hn=Tn.getElementsBy(function(Un){var Ei=Un.getData();return Ei[a]===o});u=u.concat(Hn)}}),u.length){var m=t.getCoordinate(),x=u[0].shape.getCanvasBBox(),w=u[0].shape.getCanvasBBox(),L=x;(0,d.each)(u,function(Tn){var Hn=Tn.shape.getCanvasBBox();m.isTransposed?(Hn.minY<x.minY&&(x=Hn),Hn.maxY>w.maxY&&(w=Hn)):(Hn.minX<x.minX&&(x=Hn),Hn.maxX>w.maxX&&(w=Hn)),L.x=Math.min(Hn.minX,L.minX),L.y=Math.min(Hn.minY,L.minY),L.width=Math.max(Hn.maxX,L.maxX)-L.x,L.height=Math.max(Hn.maxY,L.maxY)-L.y});var H=t.backgroundGroup,W=t.coordinateBBox,et=void 0;if(m.isRect){var ht=t.getXScale(),bt=ht.isLinear?0:.25,xt=void 0,qt=void 0,ie=void 0,_e=void 0;m.isTransposed?(xt=W.minX,qt=Math.min(w.minY,x.minY)-bt*w.height,ie=W.width,_e=L.height+bt*2*w.height):(xt=Math.min(x.minX,w.minX)-bt*x.width,qt=Math.min(W.minY,x.minY),ie=L.width+bt*2*x.width,_e=W.height),et=[["M",xt,qt],["L",xt+ie,qt],["L",xt+ie,qt+_e],["L",xt,qt+_e],["Z"]]}else{var ze=(0,d.head)(u),rr=(0,d.last)(u),sr=fo(ze.getModel(),m).startAngle,qe=fo(rr.getModel(),m).endAngle,wr=m.getCenter(),Vr=m.getRadius(),Br=m.innerRadius*Vr;et=Wo(wr.x,wr.y,Vr,sr,qe,Br)}this.regionPath?(this.regionPath.attr("path",et),this.regionPath.show()):this.regionPath=H.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:et,fill:"#CCD6EC",opacity:.3}})}}},r.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},r.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),i.prototype.destroy.call(this)},r}(Jn),bu=Ru,Bl=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.show=function(){var t=this.context,e=t.event,n=t.view,a=n.isTooltipLocked();if(!a){var o=this.timeStamp,u=+new Date;if(u-o>16){var f=this.location,m={x:e.x,y:e.y};(!f||!(0,d.isEqual)(f,m))&&this.showTooltip(n,m),this.timeStamp=u,this.location=m}}},r.prototype.hide=function(){var t=this.context.view,e=t.isTooltipLocked();e||(this.hideTooltip(t),this.location=null)},r.prototype.showTooltip=function(t,e){t.showTooltip(e)},r.prototype.hideTooltip=function(t){t.hideTooltip()},r}(Jn),Il=Bl,Fl=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.showTooltip=function(t,e){var n=Du(t);(0,d.each)(n,function(a){var o=Ul(t,a,e);a.showTooltip(o)})},r.prototype.hideTooltip=function(t){var e=Du(t);(0,d.each)(e,function(n){n.hideTooltip()})},r}(Il),Nl=Fl,lc=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.show=function(){var t=this.context,e=t.event,n=this.timeStamp,a=+new Date;if(a-n>16){var o=this.location,u={x:e.x,y:e.y};(!o||!(0,d.isEqual)(o,u))&&this.showTooltip(u),this.timeStamp=a,this.location=u}},r.prototype.hide=function(){this.hideTooltip(),this.location=null},r.prototype.showTooltip=function(t){var e=this.context,n=e.event,a=n.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update((0,st.__assign)({title:o},t)),this.tooltip.show()}},r.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var t=this.context.view,e=t.canvas,n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},a=t.getTheme(),o=(0,d.get)(a,["components","tooltip","domStyles"],{}),u=new fr({parent:e.get("el").parentNode,region:n,visible:!1,crosshairs:null,domStyles:o});u.init(),u.setCapture(!1),this.tooltip=u},r}(Jn),rl=lc,Ol=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t}return r.prototype.hasState=function(t){return t.hasState(this.stateName)},r.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},r.prototype.clearViewState=function(t){var e=this,n=$s(t,this.stateName);(0,d.each)(n,function(a){e.setElementState(a,!1)})},r}(Jn),us=Ol;function ru(i){return(0,d.get)(i.get("delegateObject"),"item")}var Ws=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return r.prototype.isItemIgnore=function(t,e){var n=this.ignoreListItemStates,a=n.filter(function(o){return e.hasState(t,o)});return!!a.length},r.prototype.setStateByComponent=function(t,e,n){var a=this.context.view,o=t.get("field"),u=Fo(a);this.setElementsStateByItem(u,o,e,n)},r.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},r.prototype.isMathItem=function(t,e,n){var a=this.context.view,o=Ku(a,e),u=zs(t,e);return!(0,d.isNil)(u)&&n.name===o.getText(u)},r.prototype.setElementsStateByItem=function(t,e,n,a){var o=this;(0,d.each)(t,function(u){o.isMathItem(u,e,n)&&u.setState(o.stateName,a)})},r.prototype.setStateEnable=function(t){var e=hn(this.context);if(e)wa(this.context)&&this.setStateByElement(e,t);else{var n=ci(this.context);if(no(n)){var a=n.item,o=n.component;if(a&&o&&!this.isItemIgnore(a,o)){var u=this.context.event.gEvent;if(u&&u.fromShape&&u.toShape&&ru(u.fromShape)===ru(u.toShape))return;this.setStateByComponent(o,a,t)}}}},r.prototype.toggle=function(){var t=hn(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(us),Os=Ws,Lc=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(Os),cc=Lc,Su=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.cache={},t}return r.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");if(!n)return null;var a=t.getScaleByField(n.getFields()[0]);return a},r.prototype.getLinkPath=function(t,e){var n=t.shape.getCanvasBBox(),a=e.shape.getCanvasBBox(),o=[["M",n.maxX,n.minY],["L",a.minX,a.minY],["L",a.minX,a.maxY],["L",n.maxX,n.maxY],["Z"]];return o},r.prototype.addLinkShape=function(t,e,n){t.addShape({type:"path",attrs:{opacity:.4,fill:e.shape.attr("fill"),path:this.getLinkPath(e,n)}})},r.prototype.linkByElement=function(t){var e=this,n=this.context.view,a=this.getColorScale(n,t);if(!!a){var o=zs(t,a.field);if(!this.cache[o]){var u=Vs(n,a.field,o),f=this.linkGroup,m=f.addGroup();this.cache[o]=m;var x=u.length;(0,d.each)(u,function(w,L){if(L<x-1){var H=u[L+1];e.addLinkShape(m,w,H)}})}}},r.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(!!e){var n=zs(t,e.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},r.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var e=hn(t);e&&this.linkByElement(e)},r.prototype.unlink=function(){var t=hn(this.context);t&&this.removeLink(t)},r.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},r}(Jn),xl=Su,rc=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},r.prototype.getIntersectElements=function(){var t=null;if(Jo(this.context))t=ps(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var a={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)},o=this.context.view;t=au(o,a)}return t},r.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=Fo(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},r.prototype.setSiblingsStateByRecord=function(t,e){var n=this,a=this.context.view,o=Du(a),u=t.map(function(x){return x.getModel().data}),f=a.getXScale().field,m=a.getYScales()[0].field;(0,d.each)(o,function(x){var w=Fo(x),L=w.filter(function(H){var W=H.getModel().data;return Ql(u,W,f,m)});n.setElementsState(L,e,w)})},r.prototype.setSiblingsState=function(t){var e=this,n=this.context.view,a=Du(n);Jo(this.context)&&(0,d.each)(a,function(o){var u=Fo(o),f=Ks(e.context,o,10);f&&f.length?e.setElementsState(f,t,u):e.clearViewState(o)})},r.prototype.setElementsState=function(t,e,n){var a=this;(0,d.each)(n,function(o){t.includes(o)?a.setElementState(o,e):a.setElementState(o,!1)})},r.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},r.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var n=Du(e);(0,d.each)(n,function(a){t.clearViewState(a)})}else this.clearViewState(e)},r}(us),Ls=rc,Nh=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(Ls),$c=Nh,zh=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setStateEnable=function(t){var e=hn(this.context);if(e){if(!wa(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},r.prototype.toggle=function(){var t=hn(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(us),Gu=zh,Gh=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(Gu),Df=Gh,Uh="inactive",hh="active";function jp(i){var r=Fo(i);(0,d.each)(r,function(t){t.hasState(hh)&&t.setState(hh,!1),t.hasState(Uh)&&t.setState(Uh,!1)})}function Vh(i,r,t){(0,d.each)(i,function(e){r(e)?(e.hasState(Uh)&&e.setState(Uh,!1),e.setState(hh,t)):(e.hasState(hh)&&e.setState(hh,!1),e.setState(Uh,t))})}var Bf=ue.INACTIVE,Ff=ue.ACTIVE,Qd=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=Ff,t}return r.prototype.setElementsStateByItem=function(t,e,n,a){var o=this,u=function(f){return o.isMathItem(f,e,n)};this.setHighlightBy(t,u,a)},r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Bf)&&t.setState(Bf,!1),t.setState(Ff,!0)):t.hasState(Ff)||t.setState(Bf,!0)},r.prototype.setHighlightBy=function(t,e,n){var a=this;if(n)(0,d.each)(t,function(f){a.setElementHighlight(f,e)});else{var o=$s(this.context.view,Ff),u=!0;(0,d.each)(o,function(f){if(!e(f))return u=!1,!1}),u?this.clear():(0,d.each)(t,function(f){e(f)&&(f.hasState(Ff)&&f.setState(Ff,!1),f.setState(Bf,!0))})}},r.prototype.setElementState=function(t,e){var n=this.context.view,a=Fo(n);this.setHighlightBy(a,function(o){return t===o},e)},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.context.view;jp(t)},r}(Os),cd=Qd,Ig=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setStateByElement=function(t,e){var n=this.context.view,a=t.geometry.getAttribute("color");if(!!a){var o=n.getScaleByField(a.getFields()[0]),u=zs(t,o.field),f=Fo(n),m=f.filter(function(x){return zs(x,o.field)===u});this.setHighlightBy(f,function(x){return m.includes(x)},e)}},r}(cd),nc=Ig,xp=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Bf)&&t.setState(Bf,!1),t.setState(Ff,!0)):(t.setState(Bf,!0),t.hasState(Ff)&&t.setState(Ff,!1))},r.prototype.setStateByElement=function(t,e){var n=this.context.view,a=n.getXScale(),o=zs(t,a.field),u=Fo(n),f=u.filter(function(m){return zs(m,a.field)===o});this.setHighlightBy(u,function(m){return f.includes(m)},e)},r.prototype.toggle=function(){var t=hn(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},r}(cd),kv=xp,qd=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.clearViewState=function(t){jp(t)},r.prototype.highlight=function(){this.setState()},r.prototype.setElementsState=function(t,e,n){Vh(n,function(a){return t.indexOf(a)>=0},e)},r}(Ls),_p=qd,Jd=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.highlight=function(){this.setState()},r.prototype.setElementState=function(t,e){var n=this.context.view,a=Fo(n);Vh(a,function(o){return t===o},e)},r.prototype.clear=function(){var t=this.context.view;jp(t)},r}(Gu),Og=Jd,Lg=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(Ls),Rv=Lg,Dv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(Os),kg=Dv,Bv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(Gu),Fv=Bv,Nv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return r.prototype.getTriggerListInfo=function(){var t=ci(this.context),e=null;return no(t)&&(e={item:t.item,list:t.component}),e},r.prototype.getAllowComponents=function(){var t=this,e=this.context.view,n=ds(e),a=[];return(0,d.each)(n,function(o){o.isList()&&t.allowSetStateByElement(o)&&a.push(o)}),a},r.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},r.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();(0,d.each)(e,function(n){n.clearItemsState(t.stateName)})},r.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(this.cfg.componentNames.indexOf(n)===-1)return!1}var a=this.context.view,o=Ku(a,e);return o&&o.isCategory},r.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;if(n.length){var a=n.filter(function(o){return e.hasState(t,o)});return a.length===0}return!0},r.prototype.setStateByElement=function(t,e,n){var a=t.get("field"),o=this.context.view,u=Ku(o,a),f=zs(e,a),m=u.getText(f);this.setItemsState(t,m,n)},r.prototype.setStateEnable=function(t){var e=this,n=hn(this.context);if(n){var a=this.getAllowComponents();(0,d.each)(a,function(m){e.setStateByElement(m,n,t)})}else{var o=ci(this.context);if(no(o)){var u=o.item,f=o.component;this.allowSetStateByElement(f)&&this.allowSetStateByItem(u,f)&&this.setItemState(f,u,t)}}},r.prototype.setItemsState=function(t,e,n){var a=this,o=t.getItems();(0,d.each)(o,function(u){u.name===e&&a.setItemState(t,u,n)})},r.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.reset=function(){this.setStateEnable(!1)},r.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,a=this.hasState(e,n);this.setItemState(e,n,!a)}},r.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},r}(Jn),fd=Nv,tv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(fd),x0=tv,ev="inactive",zv="active";function rv(i){var r=i.getItems();(0,d.each)(r,function(t){i.hasState(t,zv)&&i.setItemState(t,zv,!1),i.hasState(t,ev)&&i.setItemState(t,ev,!1)})}var bp="inactive",ph="active",lm=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=ph,t.ignoreItemStates=["unchecked"],t}return r.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,function(a){return a.name===e},n)},r.prototype.setItemState=function(t,e,n){var a=t.getItems();this.setHighlightBy(t,function(o){return o===e},n)},r.prototype.setHighlightBy=function(t,e,n){var a=t.getItems();if(n)(0,d.each)(a,function(f){e(f)?(t.hasState(f,bp)&&t.setItemState(f,bp,!1),t.setItemState(f,ph,!0)):t.hasState(f,ph)||t.setItemState(f,bp,!0)});else{var o=t.getItemsByState(ph),u=!0;(0,d.each)(o,function(f){if(!e(f))return u=!1,!1}),u?this.clear():(0,d.each)(a,function(f){e(f)&&(t.hasState(f,ph)&&t.setItemState(f,ph,!1),t.setItemState(f,bp,!0))})}},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)rv(t.list);else{var e=this.getAllowComponents();(0,d.each)(e,function(n){n.clearItemsState(ph),n.clearItemsState(bp)})}},r}(fd),Rg=lm,_0=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(fd),cm=_0,b0=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="unchecked",t}return r.prototype.unchecked=function(){this.setState()},r}(fd),Dg=b0,Gv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.emitEvent=function(t){var e="mask:"+t,n=this.context.view,a=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},r.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs(),n=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,st.__assign)({fill:"#C5D4EB",opacity:.3},e)});return n},r.prototype.getMaskPath=function(){return[]},r.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},r.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},r.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},r.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,a=t.y-e.y,o=this.points;(0,d.each)(o,function(u){u.x+=n,u.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},r.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},r.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},r.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},r.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},r.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},r.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,i.prototype.destroy.call(this)},r}(Jn),Xu=Gv,Zh=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t}return r.prototype.getMaskAttrs=function(){var t=this.points,e=(0,d.last)(this.points),n=0,a=0,o=0;if(t.length){var u=t[0];n=Ko(u,e)/2,a=(e.x+u.x)/2,o=(e.y+u.y)/2}return{x:a,y:o,r:n}},r}(Xu),F1=Zh,hd=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return r.prototype.getRegion=function(){var t=this.points;return{start:(0,d.head)(t),end:(0,d.last)(t)}},r.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,n=t.end,a=Math.min(e.x,n.x),o=Math.min(e.y,n.y),u=Math.abs(n.x-e.x),f=Math.abs(n.y-e.y);return{x:a,y:o,width:u,height:f}},r}(Xu),S0=hd;function fm(i){i.x=(0,d.clamp)(i.x,0,1),i.y=(0,d.clamp)(i.y,0,1)}var w0=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return r.prototype.getRegion=function(){var t=null,e=null,n=this.points,a=this.dim,o=this.context.view.getCoordinate(),u=o.invert((0,d.head)(n)),f=o.invert((0,d.last)(n));return this.inPlot&&(fm(u),fm(f)),a==="x"?(t=o.convert({x:u.x,y:0}),e=o.convert({x:f.x,y:1})):(t=o.convert({x:0,y:u.y}),e=o.convert({x:1,y:f.y})),{start:t,end:e}},r}(S0),Hh=w0,E0=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&((0,d.each)(t,function(n,a){a===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e.push(["L",t[0].x,t[0].y])),e},r.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},r.prototype.addPoint=function(){this.resize()},r}(Xu),Uv=E0,C0=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points;return Lu(t,!0)},r}(Uv),A0=C0,hm=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setCursor=function(t){var e=this.context.view;e.getCanvas().setCursor(t)},r.prototype.default=function(){this.setCursor("default")},r.prototype.pointer=function(){this.setCursor("pointer")},r.prototype.move=function(){this.setCursor("move")},r.prototype.crosshair=function(){this.setCursor("crosshair")},r.prototype.wait=function(){this.setCursor("wait")},r.prototype.help=function(){this.setCursor("help")},r.prototype.text=function(){this.setCursor("text")},r.prototype.eResize=function(){this.setCursor("e-resize")},r.prototype.wResize=function(){this.setCursor("w-resize")},r.prototype.nResize=function(){this.setCursor("n-resize")},r.prototype.sResize=function(){this.setCursor("s-resize")},r.prototype.neResize=function(){this.setCursor("ne-resize")},r.prototype.nwResize=function(){this.setCursor("nw-resize")},r.prototype.seResize=function(){this.setCursor("se-resize")},r.prototype.swResize=function(){this.setCursor("sw-resize")},r.prototype.nsResize=function(){this.setCursor("ns-resize")},r.prototype.ewResize=function(){this.setCursor("ew-resize")},r}(Jn),xy=hm,Bg=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,n){var a=this;t.getScaleByField(e)&&t.filter(e,n),t.views&&t.views.length&&(0,d.each)(t.views,function(o){a.filterView(o,e,n)})},r.prototype.filter=function(){var t=ci(this.context);if(t){var e=this.context.view,n=t.component,a=n.get("field");if(no(t)){if(a){var o=n.getItemsByState("unchecked"),u=Ku(e,a),f=o.map(function(L){return L.name});f.length?this.filterView(e,a,function(L){var H=u.getText(L);return!f.includes(H)}):this.filterView(e,a,null),e.render(!0)}}else if(ls(t)){var m=n.getValue(),x=m[0],w=m[1];this.filterView(e,a,function(L){return L>=x&&L<=w}),e.render(!0)}}},r}(Jn),_y=Bg;function pm(i,r,t,e){var n=Math.min(t[r],e[r]),a=Math.max(t[r],e[r]),o=i.range,u=o[0],f=o[1];if(n<u&&(n=u),a>f&&(a=f),n===f&&a===f)return null;var m=i.invert(n),x=i.invert(a);if(i.isCategory){var w=i.values.indexOf(m),L=i.values.indexOf(x),H=i.values.slice(w,L+1);return function(W){return H.includes(W)}}else return function(W){return W>=m&&W<=x}}var by=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},r.prototype.filter=function(){var t,e;if(Jo(this.context)){var n=this.context.event.target,a=n.getCanvasBBox();t={x:a.x,y:a.y},e={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var o=this.context.view,u=o.getCoordinate(),f=u.invert(e),m=u.invert(t);if(this.hasDim("x")){var x=o.getXScale(),w=pm(x,"x",f,m);this.filterView(o,x.field,w)}if(this.hasDim("y")){var L=o.getYScales()[0],w=pm(L,"y",f,m);this.filterView(o,L.field,w)}this.reRender(o)}},r.prototype.end=function(){this.isStarted=!1},r.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t)},r.prototype.filterView=function(t,e,n){t.filter(e,n)},r.prototype.reRender=function(t){t.render(!0)},r}(Jn),jh=by,Xp=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,n){var a=Du(t);(0,d.each)(a,function(o){o.filter(e,n)})},r.prototype.reRender=function(t){var e=Du(t);(0,d.each)(e,function(n){n.render(!0)})},r}(jh),kc=Xp,Fg=function(i){(0,st.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filter=function(){var t=ci(this.context),e=this.context.view,n=Fo(e);if(Jo(this.context)){var a=ps(this.context,10);a&&(0,d.each)(n,function(W){a.includes(W)?W.show():W.hide()})}else if(t){var o=t.component,u=o.get("field");if(no(t)){if(u){var f=o.getItemsByState("unchecked"),m=Ku(e,u),x=f.map(function(W){return W.name});(0,d.each)(n,function(W){var et=zs(W,u),ht=m.getText(et);x.indexOf(ht)>=0?W.hide():W.show()})}}else if(ls(t)){var w=o.getValue(),L=w[0],H=w[1];(0,d.each)(n,function(W){var et=zs(W,u);et>=L&&et<=H?W.show():W.hide()})}}},r.prototype.clear=function(){var t=Fo(this.context.view);(0,d.each)(t,function(e){e.show()})},r.prototype.reset=function(){this.clear()},r}(Jn),Ng=Fg,Xh=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.byRecord=!1,t}return r.prototype.filter=function(){Jo(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},r.prototype.filterByRecord=function(){var t=this.context.view,e=ps(this.context,10);if(!!e){var n=t.getXScale().field,a=t.getYScales()[0].field,o=e.map(function(f){return f.getModel().data}),u=Du(t);(0,d.each)(u,function(f){var m=Fo(f);(0,d.each)(m,function(x){var w=x.getModel().data;Ql(o,w,n,a)?x.show():x.hide()})})}},r.prototype.filterByBBox=function(){var t=this,e=this.context.view,n=Du(e);(0,d.each)(n,function(a){var o=Ks(t.context,a,10),u=Fo(a);o&&(0,d.each)(u,function(f){o.includes(f)?f.show():f.hide()})})},r.prototype.reset=function(){var t=Du(this.context.view);(0,d.each)(t,function(e){var n=Fo(e);(0,d.each)(n,function(a){a.show()})})},r}(Jn),dm=Xh,Sy=10,nv=5,Vv=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return r.prototype.getButtonCfg=function(){return(0,d.deepMix)(this.buttonCfg,this.cfg)},r.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=e.addShape({type:"text",name:"button-text",attrs:(0,st.__assign)({text:t.text},t.textStyle)}),a=n.getBBox(),o=Bu(t.padding),u=e.addShape({type:"rect",name:"button-rect",attrs:(0,st.__assign)({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},t.style)});u.toBack(),e.on("mouseenter",function(){u.attr(t.activeStyle)}),e.on("mouseleave",function(){u.attr(t.style)}),this.buttonGroup=e},r.prototype.resetPosition=function(){var t=this.context.view,e=t.getCoordinate(),n=e.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),u=Wi.transform(null,[["t",n.x-o.width-Sy,n.y+o.height+nv]]);a.setMatrix(u)},r.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},r.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},r.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},r}(Jn),iv=Vv,av=4,ov=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},r.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,n=this.context.event;this.dragStart?e.emit("drag",{target:n.target,x:n.x,y:n.y}):Ko(t,this.startPoint)>av&&(e.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},r.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},r}(Jn),M0=ov,vm=5,wy=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},r.prototype.move=function(){if(!!this.starting){var t=this.startPoint,e=this.context.getCurrentPoint(),n=Ko(t,e);if(n>vm&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Wi.transform(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},r.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},r.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},r}(Jn),Ey=wy,zg="x",T0="y",Sp=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=[zg,T0],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.getScale=function(t){var e=this.context.view;return t==="x"?e.getXScale():e.getYScales()[0]},r.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},r.prototype.reset=function(){this.resetDim(zg),this.resetDim(T0);var t=this.context.view;t.render(!0)},r}(Jn),P0=Sp,I0=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return r.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;(0,d.each)(e,function(n){var a=t.getScale(n),o=a.min,u=a.max,f=a.values;t.startCache[n]={min:o,max:u,values:f}})},r.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},r.prototype.translate=function(){var t=this;if(!!this.starting){var e=this.startPoint,n=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=n.invert(e),u=n.invert(a),f=u.x-o.x,m=u.y-o.y,x=this.context.view,w=this.dims;(0,d.each)(w,function(L){t.translateDim(L,{x:f*-1,y:m*-1})}),x.render(!0)}},r.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},r.prototype.translateLinear=function(t,e,n){var a=this.context.view,o=this.startCache[t],u=o.min,f=o.max,m=f-u,x=n[t]*m;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:u,max:f}),a.scale(e.field,{nice:!1,min:u+x,max:f+x})},r.prototype.reset=function(){i.prototype.reset.call(this),this.startPoint=null,this.starting=!1},r}(P0),O0=I0,Cy=function(i){(0,st.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.zoomRatio=.05,t}return r.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},r.prototype.zoom=function(t){var e=this,n=this.dims;(0,d.each)(n,function(a){e.zoomDim(a,t)}),this.context.view.render(!0)},r.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},r.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},r.prototype.zoomLinear=function(t,e,n){var a=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var o=this.cacheScaleDefs[t],u=o.max-o.min,f=e.min,m=e.max,x=n*u,w=f-x,L=m+x,H=L-w,W=H/u;L>w&&W<100&&W>.01&&a.scale(e.field,{nice:!1,min:f-x,max:m+x})},r}(P0),gm=Cy;Ne("dark",rs(za)),Nt("canvas",j),Nt("svg",U),Zu("Polygon",yu),Zu("Interval",aa),Zu("Schema",ll),Zu("Path",Pr),Zu("Point",os),Zu("Line",ua),Zu("Area",Ii),Zu("Edge",Mi),Zu("Heatmap",zn),pu("base",$u),pu("interval",Tr),pu("pie",mn),pu("polar",Rr),Gs("overlap",Yl),Gs("distribute",Ji),Gs("fixed-overlap",qs),Gs("limit-in-shape",_a),Gs("limit-in-canvas",Ga),Gs("pie-outer",Yi),ks("fade-in",vu),ks("fade-out",js),ks("grow-in-x",ch),ks("grow-in-xy",y0),ks("grow-in-y",mf),ks("scale-in-x",ld),ks("scale-in-y",sm),ks("wave-in",Pg),ks("zoom-in",Zp),ks("zoom-out",yy),ks("position-update",mp),ks("sector-path-update",Tg),ks("path-in",Oc),Jr("rect",mt),Jr("mirror",$),Jr("list",l),Jr("matrix",b),Jr("circle",Hp),Jr("tree",oe),Aa("axis",un),Aa("legend",ys),Aa("tooltip",_u),Aa("annotation",Ce),Aa("slider",Fs),Ci("tooltip",Il),Ci("sibling-tooltip",Nl),Ci("ellipsis-text",rl),Ci("element-active",cc),Ci("element-single-active",Df),Ci("element-range-active",$c),Ci("element-highlight",cd),Ci("element-highlight-by-x",kv),Ci("element-highlight-by-color",nc),Ci("element-single-highlight",Og),Ci("element-range-highlight",_p),Ci("element-sibling-highlight",_p,{effectSiblings:!0,effectByRecord:!0}),Ci("element-selected",kg),Ci("element-single-selected",Fv),Ci("element-range-selected",Rv),Ci("element-link-by-color",xl),Ci("active-region",bu),Ci("list-active",x0),Ci("list-selected",cm),Ci("list-highlight",Rg),Ci("list-unchecked",Dg),Ci("legend-item-highlight",Rg,{componentNames:["legend"]}),Ci("axis-label-highlight",Rg,{componentNames:["axis"]}),Ci("rect-mask",S0),Ci("x-rect-mask",Hh,{dim:"x"}),Ci("y-rect-mask",Hh,{dim:"y"}),Ci("circle-mask",F1),Ci("path-mask",Uv),Ci("smooth-path-mask",A0),Ci("cursor",xy),Ci("data-filter",_y),Ci("brush",jh),Ci("brush-x",jh,{dims:["x"]}),Ci("brush-y",jh,{dims:["y"]}),Ci("sibling-filter",kc),Ci("sibling-x-filter",kc),Ci("sibling-y-filter",kc),Ci("element-filter",Ng),Ci("element-sibling-filter",dm),Ci("element-sibling-filter-record",dm,{byRecord:!0}),Ci("view-drag",M0),Ci("view-move",Ey),Ci("scale-translate",O0),Ci("scale-zoom",gm),Ci("reset-button",iv,{name:"reset-button",text:"reset"});function Yp(i){return i.isInPlot()}Nn("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Nn("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Nn("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Nn("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Nn("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Nn("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Nn("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Nn("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Nn("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Nn("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Nn("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Nn("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Nn("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Yp,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Yp,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Yp,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Nn("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Nn("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Yp,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Yp,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Yp,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Nn("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Yp,action:"path-mask:start"},{trigger:"mousedown",isEnable:Yp,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Nn("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Nn("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),Nn("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Nn("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Nn("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),Nn("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function mm(i){return i.gEvent.preventDefault(),i.gEvent.originalEvent.deltaY>0}Nn("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(i){return mm(i.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(i){return!mm(i.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Nn("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});var L0={translate:ff,rotate:ed,zoom:Gc,transform:ip,getAngle:fo,polarToCartesian:vn},Gg=function(){function i(r){this.EVENT="gesture",this.gm=r}return i.prototype.do=function(r){var t=r.type;switch(t){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},i.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},i}(),Ug=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="pan",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y,a=e-this.preX,o=n-this.preY;this.preX=e,this.preY=n,this.emit({x:e,y:n,deltaX:a,deltaY:o,event:t})},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.preX=e,this.preY=n},r}(Gg),wp=typeof performance=="object"&&performance.now?performance:Date,Vg=300,ym=10,Zv=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="press",t}return r.prototype.onTouchCancel=function(t){this.clearTimeout()},r.prototype.onTouchEnd=function(t){this.clearTimeout()},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y;(e-this.touchStartX>ym||n-this.touchStartY>ym)&&this.clearTimeout()},r.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var n=t.x,a=t.y;this.touchStartTime=wp.now(),this.touchStartX=n,this.touchStartY=a,this.pressTimeout=window.setTimeout(function(){e.emit({x:n,y:a,event:t})},Vg)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(Gg),N1=100,pd=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=this.speedX,n=this.speedY;if(wp.now()-this.latestMoveTime<N1){var a=t.x,o=t.y;this.emit({x:a,y:o,speedX:e,speedY:n,event:t})}},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y,a=wp.now(),o=e-this.preX,u=n-this.preY,f=a-this.ms;this.speedX=o/f,this.speedY=u/f,this.latestMoveTime=a},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=n,this.ms=wp.now()},r}(Gg),Ay=300,xm=2,My=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="tap",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=t.x,n=t.y;e-this.touchStartX<xm&&n-this.touchStartY<xm&&wp.now()-this.touchStartTime<Ay&&this.emit({x:e,y:n,event:t})},r.prototype.onTouchMove=function(t){},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.touchStartTime=wp.now(),this.touchStartX=e,this.touchStartY=n},r}(Gg),Ty={Pan:Ug,Press:Zv,Swipe:pd,Tap:My},z1=function(i){return Ty[i]},Py=function(i){(0,Ft.__extends)(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this)||this;return n.onTouchStart=function(a){n.preventEvent(a),n.element.on("touchmove",n.onTouchMove),n.element.on("touchend",n.onTouchEnd),n.element.on("touchcancel",n.onTouchCancel),n.emit("touchdown",a),n.doGestures(a)},n.onTouchMove=function(a){n.preventEvent(a),n.emit("touchmove",a),n.doGestures(a)},n.onTouchEnd=function(a){n.preventEvent(a),n.emit("touchend",a),n.element.off("touchmove",n.onTouchMove),n.element.off("touchend",n.onTouchEnd),n.element.off("touchcancel",n.onTouchCancel),n.doGestures(a)},n.onTouchCancel=function(a){n.preventEvent(a),n.emit("touchcancel",a),n.element.off("touchmove",n.onTouchMove),n.element.off("touchend",n.onTouchEnd),n.element.off("touchcancel",n.onTouchCancel),n.doGestures(a)},n.element=t,n.options=e,n.initialGestures(),n.bindTouchStart(),n}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map(function(n){var a=z1(n);return new a(t)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(t){var e=t.type,n=this.options.prevents||[];n.includes(e)&&t.preventDefault()},r.prototype.doGestures=function(t){this.gestures.forEach(function(e){e.do(t)})},r}(Qr.default),Ep=S(68716),k0=Ep.yD,Iy=800,Hv="swipe",_m="pan",G1="wheel",rb=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.rafMs=0,e.onPan=function(n){var a=n.deltaX,o=n.deltaY,u=e.getWrapperEvent(n,a,o);e.emit(G1,u)},e.onSwipe=function(n){var a=n.speedX,o=n.speedY;e.rafMs=wp.now(),e.ms=e.rafMs,(a!==0||o!==0)&&e.rafInertia(n)},e.element=t,e.gm=new Py(t,{gestures:["Pan","Swipe"]}),e.gm.on(Hv,e.onSwipe),e.gm.on(_m,e.onPan),e}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(t){var e=this,n=t.speedX,a=t.speedY;this.raf=window.requestAnimationFrame(function(){var o=wp.now(),u=(o-e.ms)/Iy;if(u<1){u=k0(1-u);var f=o-e.rafMs,m=n*u*f,x=a*u*f,w=e.getWrapperEvent(t,m,x);e.emit(G1,w),e.rafMs=o,e.rafInertia(t)}})},r.prototype.getWrapperEvent=function(t,e,n){return(0,Ft.__assign)((0,Ft.__assign)({},t),{deltaX:-e,deltaY:-n})},r}(Qr.default),nu=S(29583),nb=S(64815),MA=S(6750),rk=S(61058),TA=S(31882),sv=S(27978),PA=S(38700),ib=S(88373),jv=S(55225);Aa("gesture",rt.Z);var dh="origin",bm="_origin",ab=1e3,ob=60*ab,sb=60*ob,Sm=24*sb,ub=Sm*7,IA=Sm*30,OA=Sm*365,LA={second:{value:ab,format:"HH:mm:ss"},miniute:{value:ob,format:"HH:mm"},hour:{value:sb,format:"HH"},day:{value:Sm,format:"YYYY-MM-DD"},week:{value:ub,format:"YYYY-MM-DD"},month:{value:IA,format:"YYYY-MM"},year:{value:OA,format:"YYYY"}},Oy=["click","dblclick","mousemove","mouseenter","mouseleave","mousedown","mouseup","contextmenu"],kA=[],lb={axis:"axis-label",label:"label",legend:"legend-item"},cb={title:"title",description:"description",breadcrumb:"breadcrumb"},U1=(0,d.deepMix)(Rc(cb),Z1("Plot",Oy)),V1=Z1("Layer",Oy),Ns=(0,d.deepMix)({},Rc(lb),Z1("View",Oy),RA());function Wl(i,r,t){i.view.on(r,function(e){var n={x:e==null?void 0:e.x,y:e==null?void 0:e.y,clientX:e==null?void 0:e.clientX,clientY:e==null?void 0:e.clientY,target:e==null?void 0:e.target,data:(e==null?void 0:e.data)?e.data.data:null,plot:i,canvas:i.canvas,gEvent:e==null?void 0:e.gEvent};t(n)})}function Rc(i){var r={};return(0,d.each)(i,function(t,e){var n=(0,d.upperFirst)(e),a="on"+n,o=t+":";(0,d.each)(Oy,function(u){var f=(0,d.upperFirst)(u),m=""+a+f,x=""+o+u;r[m]=x})}),r}function Z1(i,r){var t={},e="on";return(0,d.each)(r,function(n){var a=(0,d.upperFirst)(n),o=""+e+i+a;t[o]=n}),t}function RA(){var i={},r="on";return(0,d.each)(kA,function(t){var e=(0,d.upperFirst)(t),n=""+r+e;i[n]=t}),i}var fb=S(85800),hb=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.fromBBoxObject=function(t){return new r(t.x,t.y,t.width,t.height)},r}(fb.BBox),ns=hb,pb=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.layers=[],e.destroyed=!1,e.visibility=!0,e.rendered=!1,e.eventHandlers=[],e.options=e.getOptions(t),e.processOptions(e.options),e}return r.prototype.processOptions=function(t){this.id=t.id,this.x=t.x||0,this.y=t.y||0,this.width=t.width,this.height=t.height,this.canvas=t.canvas,this.parent=t.parent},r.prototype.updateConfig=function(t){this.options=(0,d.deepMix)({},this.options,t),this.processOptions(this.options)},r.prototype.beforeInit=function(){return null},r.prototype.init=function(){this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.eachLayer(function(t){t.init()})},r.prototype.afterInit=function(){return null},r.prototype.render=function(){this.rendered||(this.container=this.parent?this.parent.container.addGroup():this.canvas.addGroup()),this.rendered=!0,this.beforeInit(),this.init(),this.afterInit(),this.eachLayer(function(t){t.render()}),this.canvas.draw()},r.prototype.clear=function(){this.eachLayer(function(t){t.destroy()}),this.layers=[],this.container.clear()},r.prototype.destroy=function(){var t=this;this.eachLayer(function(e){e.destroy()}),(0,d.each)(this.eventHandlers,function(e){t.off(e.eventName,e.handler)}),this.container.remove(!0),this.destroyed=!0},r.prototype.show=function(){this.container.attr("visible",!0),this.container.set("visible",!0),this.visibility=!0,this.canvas.draw()},r.prototype.hide=function(){this.container.attr("visible",!1),this.container.set("visible",!1),this.visibility=!1,this.canvas.draw()},r.prototype.addLayer=function(t){var e=(0,d.findIndex)(this.layers,function(n){return n===t});e<0&&(t.parent!==this&&(t.parent=this,t.init()),this.layers.push(t))},r.prototype.removeLayer=function(t){var e=(0,d.findIndex)(this.layers,function(n){return n===t});e>=0&&this.layers.splice(e,1)},r.prototype.updateBBox=function(t,e){e===void 0&&(e=!1);var n={x:this.x,y:this.y,width:this.width,height:this.height},a=(0,d.deepMix)({},n,t);this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.render(),e&&this.eachLayer(function(o){o.updateBBoxByParent(),o.render()}),this.canvas.draw()},r.prototype.updateBBoxByParent=function(){var t=this.layerRegion;this.x=this.parent.x+this.parent.width*t.start.x,this.y=this.parent.y+this.parent.height*t.start.y,this.width=this.parent.width*(t.end.x-t.start.x),this.height=this.parent.height*(t.end.y-t.start.y),this.layerBBox=this.getLayerBBox()},r.prototype.getGlobalPosition=function(){for(var t=this.x,e=this.y,n=this.parent;n;)t+=n.x,e+=n.y,n=n.parent;return{x:t,y:e}},r.prototype.getGlobalBBox=function(){var t=this.getGlobalPosition();return new ns(t.x,t.y,this.width,this.height)},r.prototype.getOptions=function(t){var e=0,n=0;t.parent&&(e=t.parent.width,n=t.parent.height);var a={x:0,y:0,width:e,height:n};return(0,d.deepMix)({},a,t)},r.prototype.eachLayer=function(t){(0,d.each)(this.layers,t)},r.prototype.parseEvents=function(t){var e=this,n=(0,d.keys)(V1);(0,d.each)(t,function(a,o){if((0,d.contains)(n,o)&&(0,d.isFunction)(a)){var u=V1[o]||o,f=a;e.on(u,f),e.eventHandlers.push({name:u,handler:f})}})},r.prototype.getLayerBBox=function(){return new ns(this.x,this.y,this.width,this.height)},r.prototype.getLayerRegion=function(){if(this.parent){var t=this.parent.width,e=this.parent.height,n=this.parent.x,a=this.parent.y,o=(this.x-n)/t,u=(this.y-a)/e,f=(this.x+this.width-n)/t,m=(this.y+this.height-a)/e;return{start:{x:o,y:u},end:{x:f,y:m}}}return{start:{x:0,y:0},end:{x:1,y:1}}},r}(Qr.default),Ly=pb;function R0(i){return i?!!(i.visible===!0&&typeof i.text=="string"&&i.text.trim()):!1}function db(i,r){var t=(0,Ft.__spreadArrays)(i);return r.forEach(function(e,n){t.splice(e+n,0,`
`)}),t.join("")}function DA(i){return i.getComponents().filter(function(r){return r.type===nu.COMPONENT_TYPE.AXIS}).map(function(r){return r.component})}function BA(i){return i.getComponents().filter(function(r){return r.type===nu.COMPONENT_TYPE.LEGEND}).map(function(r){return r.component})}function FA(i){var r=i.backgroundGroup.findAll(function(t){if(t.get("name")){var e=t.get("name").split("-");return e[0]==="axis"}});return r}function NA(i){var r=i.foregroundGroup.findAll(function(t){if(t.get("name"))return t.get("name")==="legend-item-group"});return r}function zA(i,r){for(var t=i.length;t>0&&!(r>=i[t-1]);)t-=1;return t}function vb(i,r){return!(i.maxY<r.minY||r.maxY<i.minY||i.maxX<r.minX||r.maxX<i.minX)}function nk(){return!!navigator.userAgent.match(/(Mobile)|(Android)|(WebOS)|(iPhone)|(iPad)/)}var GA=function(){function i(r){this.position="top",this.destroyed=!1,(0,d.assign)(this,r),this.init()}return i.prototype.getBBox=function(){var r=this;if(this.shape){var t=this.shape.getBBox();if(this.index===0)return ns.fromBBoxObject(t);var e=this.plot.theme.description.padding;return(0,d.isArray)(e)&&(0,d.each)(e,function(n,a){typeof e[a]=="function"&&(e[a]=e[a](r.plot.options.legend.position))}),new ns(t.maxX,t.minY,t.width,t.height)}return null},i.prototype.clear=function(){this.shape&&this.shape.attr("text","")},i.prototype.destroy=function(){this.shape&&this.shape.remove(),this.destroyed=!0},i.prototype.init=function(){var r=this.textWrapper(),t=this.getPosition(),e=t.x,n=t.y;this.shape=this.container.addShape("text",{attrs:(0,d.mix)({x:e,y:n,text:r},this.style,{textAlign:this.getTextAlign()})}),this.shape.name=this.name},i.prototype.getPosition=function(){return this.alignTo==="left"?{x:this.leftMargin,y:this.topMargin}:this.alignTo==="middle"?{x:this.leftMargin+this.wrapperWidth/2,y:this.topMargin}:{x:this.rightMargin,y:this.topMargin}},i.prototype.getTextAlign=function(){return this.alignTo==="left"?"left":this.alignTo==="middle"?"center":"right"},i.prototype.textWrapper=function(){var r=this.wrapperWidth,t=this.style,e=this.text,n=this.container.addShape("text",{attrs:(0,Ft.__assign)({text:"",x:0,y:0},t)}),a=e.split(`
`),o=a.map(function(u){for(var f="",m=u.split(""),x=[],w=0;w<m.length;w++){var L=m[w];n.attr("text",f+=L);var H=n.getBBox().width-1;if(H>r){if(w===0)break;x.push(w),f=""}}return db(m,x)});return n.remove(),o.join(`
`)},i}(),ky=GA,gb=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.container=t.container,e.destroyed=!1,e.config=t,e.disposables=[],e}return r.prototype.init=function(){this.group||this.initGroup(),this.initConfig(this.config)},r.prototype.getGroup=function(){return this.group},r.prototype.getConfig=function(){return this.config},r.prototype.getBBox=function(){return this.getGroup().getBBox()},r.prototype.clear=function(){this.group.clear()},r.prototype.render=function(){this.group.clear(),this.renderInner(this.group),this.getCanvas().draw()},r.prototype.update=function(t){this.config=(0,Ft.__assign)((0,Ft.__assign)({},this.config),t),this.initConfig(this.config)},r.prototype.destroy=function(){(0,d.each)(this.disposables,function(t){t()}),this.disposables=[],this.group.remove(!0),this.destroyed=!0},r.prototype.initGroup=function(){this.group=this.container.addGroup()},r.prototype.getCanvas=function(){return this.container.get("canvas")},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.initConfig=function(t){},r}(Qr.default),D0=gb,UA=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.labelsCfgMap={},t.lastLabelsCfgMap={},t}return r.prototype.getGeometry=function(){return this.geometry},r.prototype.getLabels=function(){return this.labels},r.prototype.show=function(){this.container.show()},r.prototype.hide=function(){this.container.hide()},r.prototype.initConfig=function(t){var e=this;this.layer=t.layer;var n=this.layer.view;this.view=n,this.geometry=t.geometry,this.coord=n.getCoordinate(),this.options=(0,d.deepMix)(this.getDefaultOptions(),t.label);var a=function(){e.clear(),e.labelsCfgMap={},e.lastLabelsCfgMap={},e.render()};n.on(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){n.off(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)})},r.prototype.renderInner=function(t){var e=this;this.labels=[],this.labelsCfgMap={},(0,d.each)(this.geometry.elements,function(u,f){var m=[].concat(e.drawLabelItem(t,u,f));(0,d.each)(m,function(x,w){e.adjustLabel(x,u,w),x.destroyed||(e.labels.push(x),e.labelsCfgMap[x.get("id")]=(0,d.clone)(x.attrs))})}),this.layoutLabels(this.geometry,this.labels);var n=this.lastLabelsCfgMap,a=this.labelsCfgMap,o=this.geometry.animateOption?(0,sv.getDefaultAnimateCfg)("label",this.coord):!1;(0,d.each)(a,function(u,f){var m=t.findById(f);if(m)if(n[f]){var x=n[f],w=(0,d.get)(o,"update");w&&(m.stopAnimate(),m.attr(x),(0,sv.doAnimate)(m,w,{toAttrs:(0,Ft.__assign)({},u),coordinate:e.coord}))}else{var L=(0,d.get)(o,"appear");L&&(m.stopAnimate(),(0,sv.doAnimate)(m,L,{toAttrs:(0,Ft.__assign)({},m.attr()),coordinate:e.coord}))}delete n[f]}),(0,d.each)(n,function(u,f){var m=(0,d.get)(o,"leave");if(m){var x=t.addShape("text",{attrs:u,id:f,name:"label"});x.stopAnimate(),(0,sv.doAnimate)(x,m,{toAttrs:null,coordinate:e.coord})}}),this.lastLabelsCfgMap=this.labelsCfgMap},r.prototype.drawLabelText=function(t,e,n){return n===void 0&&(n={}),t.addShape("text",(0,Ft.__assign)({attrs:e},n))},r.prototype.drawLabelItem=function(t,e,n){var a=this,o=e.getModel(),u=[].concat(this.getLabelItemAttrs(e,n)),f=this.getDefaultOffset(),m=this.getLabelOffset();return(0,d.map)(u,function(x,w){var L,H={x:x.x+m.x,y:x.y+m.y},W=(0,d.isArray)(o.mappingData)?o.mappingData[w]:o.mappingData,et=a.getLabelId(W);return a.drawLabelText(t,(0,Ft.__assign)((0,Ft.__assign)({},x),H),(L={id:et,name:"label",offset:f,element:e},L[dh]=W,L))})},r.prototype.getDefaultOffset=function(){return Number(this.options.offset)},r.prototype.getLabelOffset=function(){var t=this.options,e=t.offsetX,n=t.offsetY;return{x:(0,d.isNumber)(e)?e:0,y:(0,d.isNumber)(n)?n:0}},r.prototype.getLabelOffsetByDimAndFactor=function(t,e){var n=this.options,a=n.offsetX,o=n.offsetY,u=this.getDefaultOffset(),f={x:0,y:0};return f[t]=u*e,(0,d.isNumber)(a)&&(f.x+=a),(0,d.isNumber)(o)&&(f.y+=o),f},r.prototype.getDefaultOptions=function(){return{}},r.prototype.layoutLabels=function(t,e){},r.prototype.getLabelId=function(t){var e=t._origin,n=this.geometry.type,a=this.geometry.getXScale(),o=this.geometry.getYScale(),u=this.geometry.getElementId(t);return n==="line"||n==="area"?u+=" "+e[a.field]:n==="path"&&(u+=" "+e[a.field]+"-"+e[o.field]),u},r.prototype.getCoordinateBBox=function(){var t=this.coord,e=t.start,n=t.end;return new ns(Math.min(e.x,n.x),Math.min(e.y,n.y),t.getWidth(),t.getHeight())},r}(D0),H1=UA,mb={};function Nf(i,r){mb[i]=r}function VA(i){return mb[i]}var Ry=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return function(t,e,n){return i.reduce(function(a,o){return o(a,e,n)},t)}},Dy=function(){return function(i){return i}},j1=function(i){return function(r){var t=Number(r);return isNaN(t)||(0,d.isNil)(i)?r:t.toFixed(i)}},X1=function(i){return function(r){return(0,d.isNil)(i)?r:r+" "+i}};function Xv(i,r,t){i[t]&&(r[t]=i[t])}var yb=function(){function i(r){this.config=!1,this.plot=r.plot,this.dim=r.dim,this.init()}return i.prototype.init=function(){this.config=!1;var r=this.plot.getPlotTheme();this.themeConfig=r&&r.axis&&r.axis[this.dim],this._needDraw()&&this._styleParser()},i.prototype._styleParser=function(){this.config=(0,Ft.__assign)({},this.localProps),this._isVisible("line")?this._lineParser():this.config.line=null,this._isVisible("grid")?this._gridParser():this.config.grid=null,this._isVisible("tickLine")?this._tickLineParser():this.config.tickLine=null,this._isVisible("label")?this._labelParser():this.config.label=null,this._isVisible("title")?this._titleParser():this.config.title=null,Xv(this.localProps,this.config,"autoHideLabel"),Xv(this.localProps,this.config,"autoRotateLabel"),Xv(this.localProps,this.config,"autoRotateTitle")},i.prototype._needDraw=function(){var r=this.plot.options,t=r[this.dim+"Axis"]?r[this.dim+"Axis"]:{},e=(0,d.deepMix)({},this.themeConfig,t);return this.localProps=e,!!e.visible},i.prototype._lineParser=function(){this.config.line=this.localProps.line,this.localProps.line.style&&(this.config.line={style:this.localProps.line.style}),this.applyThemeConfig("line")},i.prototype._gridParser=function(){var r=this,t,e,n,a,o,u=(e=(t=this.localProps.grid)===null||t===void 0?void 0:t.line)===null||e===void 0?void 0:e.style,f=(a=(n=this.localProps.grid)===null||n===void 0?void 0:n.line)===null||a===void 0?void 0:a.type,m=(o=this.localProps.grid)===null||o===void 0?void 0:o.alternateColor;(0,d.isFunction)(u)?this.config.grid=function(x,w,L){var H=u(x,w,L);return{line:{type:f,style:(0,d.deepMix)({},(0,d.get)(r.themeConfig,"grid.line.style"),H)},alternateColor:m}}:u&&(this.config.grid={line:{type:f,style:u},alternateColor:m},this.applyThemeConfig("grid"))},i.prototype._tickLineParser=function(){this.config.tickLine=this.localProps.tickLine,this.localProps.tickLine.style&&(this.config.tickLine={style:this.localProps.tickLine.style}),this.applyThemeConfig("tickLine")},i.prototype._labelParser=function(){var r=this.localProps.label,t=r.style,e=(0,Ft.__rest)(r,["style"]),n=(0,Ft.__assign)({},e);t&&(n.style=(0,Ft.__assign)({},this.localProps.label.style)),n.style=(0,d.deepMix)({},(0,d.get)(this.themeConfig,"label.style"),n.style);var a=this.parseFormatter(n);n.formatter=a,this.config.label=n},i.prototype._titleParser=function(){var r=(0,Ft.__assign)({},this.localProps.title),t=this.localProps.title,e=t.visible,n=t.style,a=t.text;e?(this.config.showTitle=!0,n&&(r.style=n),r.style=(0,d.deepMix)({},(0,d.get)(this.config,"title.style"),r.textStyle),a&&(r.text=a)):this.config.showTitle=!1,this.config.title=r},i.prototype._isVisible=function(r){return!!(this.localProps[r]&&this.localProps[r].visible)},i.prototype.applyThemeConfig=function(r){this.config[r]=(0,d.deepMix)({},(0,d.get)(this.themeConfig,r+".style"),this.config[r])},i.prototype.parseFormatter=function(r){var t=Ry(Dy(),j1(r.precision),X1(r.suffix));return r.formatter&&(t=Ry(t,r.formatter)),t},i}(),ZA=yb;function wm(i){var r=0;return each(i,function(t){r+=t*t}),Math.sqrt(r)}function By(i,r){return i.x*r.y+i.y*r.x}function ik(i,r){var t=wm(i),e=wm(r),n=By(i,r),a=Math.acos(n/t/e);return a}function ak(i,r){var t=wm(i),e=wm(r),n=By(i,r),a=Math.acos(n/t/e);return t*e*Math.sin(a)}function ok(i,r){var t=i.x,e=i.y,n=i.z,a=r.x,o=r.y,u=r.z,f=e*u-n*o,m=n*a-t*u,x=t*o-e*a;return{x:f,y:m,z:x}}function HA(i,r){return{x:i.x-r.x,y:i.y-r.y}}function Em(i,r,t){t===void 0&&(t=1);var e=[i.x,i.y,t];return Ac.transformMat3(e,e,r),{x:e[0],y:e[1]}}function Y1(i,r,t){return i>=r&&i<=t}var W1=.001;function jA(i,r,t,e){var n={x:t.x-i.x,y:t.y-i.y},a={x:r.x-i.x,y:r.y-i.y},o={x:e.x-t.x,y:e.y-t.y},u=a.x*o.y-a.y*o.x,f=u*u,m=a.x*a.x+a.y*a.y,x=o.x*o.x+o.y*o.y,w=null;if(f>W1*m*x){var L=(n.x*o.y-n.y*o.x)/u,H=(n.x*a.y-n.y*a.x)/u;Y1(L,0,1)&&Y1(H,0,1)&&(w={x:i.x+L*a.x,y:i.y+L*a.y})}return w}function xb(i,r){for(var t=!1,e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,u=r[n].x,f=r[n].y,m=o>i.y!=f>i.y&&i.x<=(u-a)*(i.y-o)/(f-o)+a;m&&(t=!t)}return t}function Cm(i){return i*i}function Fy(i,r){return Math.sqrt(Cm(i.x-r.x)+Cm(i.y-r.y))}function _b(i,r){return Math.sqrt(Cm(i.x-r.x)+Cm(i.y-r.y))}function bb(i,r,t){var e=Fy(r,t);if(e===0)return Fy(i,r);var n=((i.x-r.x)*(t.x-r.x)+(i.y-r.y)*(t.y-r.y))/e;n=Math.max(0,Math.min(1,n));var a=Fy(i,{x:r.x+n*(t.x-r.x),y:r.y+n*(t.y-r.y)});return Math.sqrt(a)}function K1(i,r){var t=Infinity;(0,d.each)(r,function(x){var w=Math.sqrt(Fy(x,i));t>w&&(t=w)});for(var e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,u=r[n].x,f=r[n].y,m=bb(i,{x:a,y:o},{x:u,y:f});t>m&&(t=m)}return t}function XA(i,r){for(var t=0,e=i;t<e.length;t++){var n=e[t],a=xb(n,r);if(a)return!0}return!1}function $1(i,r){if(XA(i,r))return 0;var t=Infinity,e=Infinity;return(0,d.each)(i,function(n){var a=K1(n,r);t>a&&(t=a)}),(0,d.each)(r,function(n){var a=K1(n,i);e>a&&(e=a)}),Math.min(t,e)}function YA(i){var r=i.getBBox(),t=r.minX,e=r.minY,n=r.maxX-r.minX,a=r.maxY-r.minY,o=i.attr("matrix"),u;o?u=[o[0],o[1],0,o[3],o[4],0,0,0,1]:u=[1,0,0,0,1,0,0,0,1];var f=Em({x:0,y:0},u);f.x+=t,f.y+=e;var m=Em({x:n,y:0},u);m.x+=t,m.y+=e;var x=Em({x:0,y:a},u);x.x+=t,x.y+=e;var w=Em({x:n,y:a},u);w.x+=t,w.y+=e;var L=[f,m,x,w];L.sort(function(sr,qe){return sr.y-qe.y});var H=L[0].y,W=L[L.length-1].y,et=[L[0],L[1]],ht=[L[2],L[3]],bt=et[0].x<et[1].x?et[0]:et[1],xt=et[0].x<et[1].x?et[1]:et[0],qt=ht[0].x<ht[1].x?ht[0]:ht[1],ie=ht[0].x<ht[1].x?ht[1]:ht[0];L.sort(function(sr,qe){return sr.x-qe.x});var _e=L[0].x,ze=L[L.length-1].x,rr={width:ze-_e,height:W-H,left:_e,right:ze,top:H,bottom:W,topLeft:bt,topRight:xt,bottomLeft:qt,bottomRight:ie,centerX:_e+(ze-_e)/2,centerY:H+(W-H)/2};return rr}var WA=2;function Zg(i){return i.length<5?i:Ny(i,WA)}function Ny(i,r){for(var t,e=-Infinity,n=0,a=i.length-1,o=1;o<a;o++){var u=i[o],f={start:i[0],end:i[a]},m=bb(u,f.start,f.end);m>e&&(e=m,n=o)}if(e>r){var x=Ny(i.slice(0,n+1),r),w=Ny(i.slice(n,i.length),r);t=x.concat(w)}else t=[i[0],i[i.length-1]];return t}function zy(i){var r=(0,d.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2}function sk(i){var r=0;return(0,d.each)(i,function(t){r+=t}),r/i.length}function vh(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1}function KA(i,r,t,e,n){n===void 0&&(n=2);for(var a=[],o=i;o<=i+t;o+=n)a.push([o,r]);for(var u=r;u<=r+e;u+=n)a.push([i+t,u]);for(var o=i+t;o>=i;o-=n)a.push([o,r+e]);for(var u=r+e;u>=r;u-=n)a.push([i,u]);return a}var $A=function(){function i(r){(0,d.assign)(this,r),this._init()}return i.prototype._init=function(){var r=this.plot.options,t=r.yField,e=r.data,n=this.plot.processData(e);if(!((0,d.isEmpty)(n)||!(0,d.isNumber)(n[0][t]))){var a=this.getDefaultStyle(),o={type:"line",top:!0,start:this.cfg.start,end:this.cfg.end};if(o.style=(0,d.deepMix)({},a.line.style,this.cfg.lineStyle),o.text=(0,d.deepMix)({},a.text,this.cfg.text),this.cfg.type){var u=this._getState(this.cfg.type),f=this.getYScale(),m=(1-f.scale(u))*100+"%",x=["0%",m],w=["100%",m];this.config=(0,d.mix)({start:x,end:w},o)}else{var L=this.cfg,H=L.start,W=L.end;this.config=(0,d.clone)(o);var et=this.getXScale(),ht=this.getYScale(),bt=(0,d.clone)(H),xt=(0,d.clone)(W);(0,d.each)(H,function(qt,ie){(!(0,d.contains)((0,d.toArray)(H[ie]),"%")||(0,d.isNumber)(H[ie]))&&(ie===0?bt[ie]=et.scale(H[0])*100+"%":bt[ie]=(1-ht.scale(H[1]))*100+"%")}),(0,d.each)(W,function(qt,ie){(!(0,d.contains)((0,d.toArray)(W[ie]),"%")||(0,d.isNumber)(W[ie]))&&(ie===0?xt[ie]=et.scale(W[0])*100+"%":xt[ie]=(1-ht.scale(W[1]))*100+"%")}),this.config.start=bt,this.config.end=xt}}},i.prototype.getYScale=function(){var r=this._getState("min"),t=this._getState("max"),e=(0,jn.getScale)("linear"),n=new e((0,d.mix)({},{min:this.plot.type==="column"?0:r,max:t,nice:!0,values:this.values},this.plot.config.scales[this.plot.options.yField]));return n},i.prototype.getXScale=function(){var r=this.extractXValue();if((0,d.isString)(r[0])){var t=(0,jn.getScale)("cat"),e=new t((0,d.mix)({},{values:r},this.plot.config.scales[this.plot.options.xField]));return e}else{var n=Math.min.apply(Math,r),a=Math.max.apply(Math,r),t=(0,jn.getScale)("linear"),e=new t((0,d.mix)({},{min:n,max:a,nice:!0,values:r},this.plot.config.scales[this.plot.options.xField]));return e}},i.prototype._getState=function(r){if(this.values=this._extractValues(),r==="median")return zy(this.values);if(r==="mean")return sk(this.values);if(r==="max")return Math.max.apply(Math,this.values);if(r==="min")return Math.min.apply(Math,this.values)},i.prototype._extractValues=function(){var r=this.plot.options,t=r.yField,e=[],n=this.plot.processData(r.data);return(0,d.each)(n,function(a){(0,d.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.extractXValue=function(){var r=this.plot.options,t=r.xField,e=[],n=this.plot.processData(r.data);return(0,d.each)(n,function(a){(0,d.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.getDefaultStyle=function(){return this.getDefaultTextAlign(),{line:{style:{lineWidth:2,stroke:"#333333",opacity:.7,lineDash:[0,0]}},text:{content:"",offsetY:-5,style:{fontSize:14,stroke:"white",lineWidth:2,textAlign:this.getDefaultTextAlign()}}}},i.prototype.getDefaultTextAlign=function(){var r=this.cfg.text;if(r){if(!r.position||r.position==="start")return"left";if(r.position==="center")return"center";if(r.position==="end")return"right"}},i}(),QA=$A,uk=function(){function i(r){this.config={};var t=r.plot,e=(0,Ft.__rest)(r,["plot"]);this.plot=t,this.originConfig=e,this.init(r)}return i.prototype.getConfig=function(){return this.config},i.prototype.init=function(r){var t=this;(0,d.assign)(this.config,r),this.config.callback=function(e){return t.parseCallBack(e)}},i.prototype.parseCallBack=function(r){var t=this.originConfig,e=this.plot.getPlotTheme(),n=(0,Ft.__assign)({},t);return this.parseOffset(t,n),t.position&&((0,d.isFunction)(t.position)?n.position=t.position(r):n.position=t.position),this.parseFormatter(n),t.style&&((0,d.isFunction)(t.style)?n.textStyle=t.style(r):n.textStyle=t.style),n.textStyle=(0,d.deepMix)({},(0,d.get)(e,"label.style"),n.textStyle),t.autoRotate&&(n.autoRotate=t.autoRotate),n},i.prototype.parseOffset=function(r,t){var e=["offset","offsetX","offsetY"],n=0;(0,d.each)(e,function(a){(0,d.has)(r,a)&&(t[a]=r[a],n++)}),n===0&&(0,d.get)(r,"position")==="middle"&&(t.offset=0)},i.prototype.parseFormatter=function(r){var t=this.originConfig;r.content=function(e,n){var a=e[t.fields[0]];return Ry(Dy(),j1(t.precision),X1(t.suffix),t.formatter?t.formatter:Dy())(a,e,n)}},i}(),qA=uk,B0,Q1;function JA(i,r){B0||eM(i),(0,d.each)(B0,function(t){var e=Sb(t,r),n=e.labelData,a=e.con;if(nM(n,a)){var o=ck();t.shape.attr(o)}})}function tM(i,r){B0||eM(i),(0,d.each)(B0,function(t,e){var n=Sb(t,r),a=n.labelData,o=n.con;if(nM(a,o)){var u=Q1[e],f=lk(u);t.shape.attr(f)}})}function eM(i){var r;B0=[],Q1=[];var t=(r=i.view.getController("axis"))===null||r===void 0?void 0:r.getComponents();(0,d.each)(t,function(e){var n=e.component,a=[],o=rM(i,n),u=n.get("labelRenderer").get("group").get("children");if((0,d.each)(u,function(x){x.type==="text"&&(a.push({shape:x}),Q1.push(x.attr()))}),o){var f=o.ticks,m=o.field;(0,d.each)(a,function(x,w){x.value=f[w],x.scaleField=m,x.type=o.type})}B0.push.apply(B0,a)})}function rM(i,r){var t=i.options,e="y",n=r.get("position");(n==="bottom"||n==="top")&&(e="x");var a=t[e+"Field"];return i.view.get("scales")[a]}function Sb(i,r){var t,e=(t={},t[i.scaleField]=i.value,t),n=(0,d.clone)(r);return i.type==="time"&&(0,d.isObject)(r)&&!(0,d.isFunction)(n.exp)&&(n.exp=new Date(n.exp).getTime()),{labelData:e,con:n}}function lk(i){var r=i.opacity||1;return{opacity:r*.2}}function ck(){return{opacity:1,fontWeight:600,fill:"red"}}function nM(i,r){if(!(0,d.isFunction)(r)){var t=r.name,e=r.exp;return i[t]?(0,d.isFunction)(e)?e(i[t]):i[t]===e:!1}return r(i)}var iM={active:JA,selected:JA,disable:tM},wb=function(i){(0,Ft.__extends)(r,i);function r(){var t=i.call(this)||this;return t._states={},t._stateStack={},t}return r.prototype.setState=function(t,e){this._stateStack[t]=e,this._onUpdate()},r.prototype.getState=function(t){return this._states[t]},r.prototype.getAllStates=function(){return this._states},r.prototype.clear=function(){this._states={},this._stateStack={},this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null)},r.prototype._onUpdate=function(){var t=this,e=this._stateStack;this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null),this._changeTimer=setTimeout(function(){(0,d.each)(e,function(n,a){var o=e[a];(!t._states[a]||t._states[a]!==n)&&(t._states[a]=n,t._triggerEvent(a,o))}),t._stateStack={}},16)},r.prototype._triggerEvent=function(t,e){this.emit(t+":change",{name:t,exp:e})},r}(Qr.default),fk=wb;function uv(i,r){if(!(0,d.isFunction)(r)){var t=r.name,e=r.exp;return(0,d.isFunction)(e)?e(i[t]):i[t]===e}return r(i)}var hk=function(){function i(r){this.shapeContainers=[],(0,d.assign)(this,r)}return i.prototype.createStateManager=function(){this.stateManager=new fk},i.prototype.bindStateManager=function(r,t){this.stateManager=r,t.setState&&this._updateStateProcess(t.setState),t.onStateChange&&this._stateChangeProcess(t.onStateChange)},i.prototype.defaultStates=function(r){var t=this;(0,d.each)(r,function(e,n){var a=e.condition,o=e.related;t.setState({type:n,condition:a,related:o})})},i.prototype.setState=function(r){var t=this,e=r.type,n=r.condition,a=r.related;this.shapes=this._getShapes(),this.originAttrs=this._getOriginAttrs(),(0,d.each)(this.shapes,function(o,u){var f=o.get("origin").data,m=(0,d.isArray)(f)?f[0]:f;if(uv(m,n)){var x=r.style?r.style:t._getDefaultStateStyle(e,o),w=t.originAttrs[u],L=void 0;(0,d.isFunction)(x)?L=x(w):L=(0,d.mix)({},w,x),o.attr(L),t.setZIndex(e,o)}}),a&&this._parserRelated(e,a,n),this.plot.canvas.draw()},i.prototype._updateStateProcess=function(r){var t=this;(0,d.each)(r,function(e){var n=e.state,a;(0,d.isFunction)(n)?a=function(o){var u=n(o);t.stateManager.setState(u.name,u.exp)}:a=function(){t.stateManager.setState(n.name,n.exp)},e.event?Wl(t.plot,t._eventParser(e.event),a):a()})},i.prototype._stateChangeProcess=function(r){var t=this;(0,d.each)(r,function(e){t.stateManager.on(e.name+":change",function(n){e.callback(n,t.plot)})})},i.prototype._getShapes=function(){var r=this,t=[],e=this.plot.view.geometries;return(0,d.each)(e,function(n){var a=n.container;r.shapeContainers.push(a),n.destroyed||t.push.apply(t,n.getShapes())}),t},i.prototype._getOriginAttrs=function(){var r=[];return(0,d.each)(this.shapes,function(t){r.push((0,d.clone)(t.attr()))}),r},i.prototype._eventParser=function(r){var t=r.split(":"),e=this.plot.geometryParser("g2",t[0]),n=t[1];return e+":"+n},i.prototype._getDefaultStateStyle=function(r,t){var e=this.plot.theme,n=this.plot.geometryParser("plot",t.name),a=n+"Style";if(e[a]){var o=e[a][r];return(0,d.isFunction)(o)&&(o=o(t.attr())),o}return{}},i.prototype._parserRelated=function(r,t,e){var n=this;(0,d.each)(t,function(a){if(n.plot[a]){var o=uM(a,r);o(n.plot,e)}})},i.prototype.setZIndex=function(r,t){if(r==="active"||r==="selected"){var e=t.get("parent").get("children");e[e.length-1].setZIndex(0),t.setZIndex(1)}},i.prototype.resetZIndex=function(){(0,d.each)(this.shapeContainers,function(r){var t=r.get("children");t.sort(function(e,n){return e._INDEX-n._INDEX})})},i}(),aM=hk,Am,Gy;function Eb(i,r){Am||Mm(i),(0,d.each)(Am,function(t,e){var n=t.get("origin");if(uv(n,r)){var a=Gy[e],o=(0,d.mix)({},a,{opacity:1});t.attr(o)}})}function oM(i,r){Am||Mm(i),(0,d.each)(Am,function(t,e){var n=t.get("origin");if(uv(n,r)){var a=Gy[e],o=pk(a);t.attr(o)}})}function Mm(i){Am=[],Gy=[];var r=i.view.get("elements");(0,d.each)(r,function(t){var e=t.get("labels");e&&(0,d.each)(e,function(n){Am.push(n),Gy.push(n.attr())})})}function pk(i){var r=i.opacity||1;return{opacity:r*.2}}var dk={active:Eb,selected:Eb,disable:oM},Cp=["xField","yField","angleField"];function _c(i,r){var t=i.options;if(sM(t,r)){var e=t.data;(0,d.each)(e,function(n){if(uv(n,r)){var a=i.view.getXY(n);i.view.on("tooltip:create",function(o){xo(r,o,!1)}),i.view.showTooltip(a)}})}}function Yv(i,r){i.view.on("tooltip:change",function(t){xo(r,t,!0)})}function xo(i,r,t){var e=!t,n=(0,d.clone)(r.items);r.items.splice(0),(0,d.each)(n,function(a){var o=a.point._origin;uv(o,i)===e&&r.items.push(a)})}function sM(i,r){var t=Hg(i);return!(0,d.isFunction)(r)&&t.indexOf(r.name)}function Hg(i){var r=[];return(0,d.each)(Cp,function(t){(0,d.has)(i,t)&&r.push(t)}),r}var q1={active:_c,selected:_c,disable:Yv},Wv={axis:ZA,label:qA,guideLine:QA},Cb={tooltip:q1,label:dk,axis:iM};function Dc(i,r){var t=Wv[i];return new t(r).config}function uM(i,r){return Cb[i][r]}var lM=["start","process","end","reset"],cM=function(){function i(r){var t=this.getDefaultCfg();(0,d.assign)(this,t,r),this.canvas=this.view.canvas,this._eventHandlers=[],this._bindEvents()}return i.prototype.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},i.prototype._start=function(r){this.preStart(r),this.start(r),this.afterStart(r)},i.prototype.preStart=function(r){},i.prototype.afterStart=function(r){},i.prototype._process=function(r){this.preProcess(r),this.process(r),this.afterProcess(r)},i.prototype.preProcess=function(r){},i.prototype.process=function(r){},i.prototype.afterProcess=function(r){},i.prototype._end=function(r){this.preEnd(r),this.end(r),this.afterEnd(r)},i.prototype.preEnd=function(r){},i.prototype.end=function(r){},i.prototype.afterEnd=function(r){},i.prototype._reset=function(r){this.preReset(r),this.reset(r),this.afterReset(r)},i.prototype.preReset=function(r){},i.prototype.reset=function(r){},i.prototype.afterReset=function(r){},i.prototype._bindEvents=function(){var r=this;(0,d.each)(lM,function(t){var e=r[t+"Event"],n=(0,d.wrapBehavior)(r,"_"+t);r.view.on(e,n),r._eventHandlers.push({type:e,handler:n})})},i.prototype._unbindEvents=function(){var r=this,t=this._eventHandlers;(0,d.each)(t,function(e){r.view.off(e.type,e.handler)})},i.prototype.destroy=function(){this._unbindEvents(),this._reset()},i}(),F0=cM,fM=function(i){(0,Ft.__extends)(r,i);function r(t,e,n,a){var o=i.call(this,t)||this;return o.viewLayer=e,o.interactionRange=n,o.interactionConfig=a,o.disposables=[],o}return r.registerInteraction=function(t,e){r.GLOBAL_INTERACTION_MAP[t]=e},r.registerPlotInteraction=function(t,e,n){r.PLOT_INTERACTION_MAP[t]||(r.PLOT_INTERACTION_MAP[t]={}),r.PLOT_INTERACTION_MAP[t][e]=n},r.getInteraction=function(t,e){return e&&r.PLOT_INTERACTION_MAP[e]&&r[e][t]?r.PLOT_INTERACTION_MAP[e][t]:r.GLOBAL_INTERACTION_MAP[t]},r.getInteractionRange=function(t,e){},r.prototype.destroy=function(){(0,d.each)(this.disposables,function(t){t()}),this.disposables=[],this.clear(),i.prototype.destroy.call(this)},r.prototype.getViewLayer=function(){return this.viewLayer},r.prototype.getRange=function(){return this.interactionRange},r.prototype.getInteractionConfig=function(){return this.interactionConfig},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.render=function(){},r.prototype.start=function(t){},r.GLOBAL_INTERACTION_MAP={},r.PLOT_INTERACTION_MAP={},r}(F0),Wp=fM,hM=function(i,r,t,e,n){var a=e[0],o=e[1];n===void 0&&(n=!1);var u=(0,d.groupBy)(t,i),f=n?r.slice(r.length-o,r.length-a):r.slice(a,o);return(0,d.flatten)((0,d.map)(f,function(m){return u[m]||[]}))},dd;(function(i){i.BEFORE_INIT="beforeinit",i.AFTER_INIT="afterinit",i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata"})(dd||(dd={}));var Uy=4,Ab=8,pM=32,dM=20,vk=999,Vy=function(i){i===void 0&&(i={});var r=(0,Ft.__assign)({type:"horizontal",categorySize:pM,width:Ab,height:Ab,padding:[0,0,0,0]},i);return i.padding||(r.padding=r.type==="horizontal"?[Uy,0,Uy,0]:[0,Uy,0,Uy]),r},vM=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,d.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=Vy(e),a=n.padding,o=a[0],u=a[1],f=a[2],m=a[3];return n.type==="horizontal"?new ns(t.minX,t.maxY-n.height-o-f,t.width,n.height+o+f):new ns(t.maxX-n.width-m-u,t.minY,n.width+m+u,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view;this.ratio=0,this.thumbOffset=0;var a=function(){var u=t.view.padding;u==="auto"||(0,d.isEqual)(u,[0,0,0,1])||(t.trackLen?t.renderScrollbar():(t.measureScrollBar(),t.changeViewData(t.getScrollRange(),!0)))},o=function(){t.trackLen=0};n.on(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){return n.off(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)}),n.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,a),this.addDisposable(function(){return n.off(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,a)}),e.on(dd.BEFORE_CHANGE_DATA,o),this.addDisposable(function(){return e.off(dd.BEFORE_CHANGE_DATA,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null),this.container&&(this.container.remove(!0),this.container=null),this.trackLen=null,this.thumbLen=null},r.prototype.renderScrollbar=function(){var t=Vy(this.getInteractionConfig()),e=this.getRange(),n=t.type!=="vertical",a=this.view.coordinateBBox,o=t.padding,u=o[0],f=o[3],m=n?{x:a.minX+f,y:e.minY+u}:{x:e.minX+f,y:a.minY+u};this.scrollbar?(this.scrollbar.update({trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.thumbOffset,x:m.x,y:m.y}),this.scrollbar.render()):(this.container=this.canvas.addGroup(),this.scrollbar=new wi.Scrollbar({container:this.container,x:m.x,y:m.y,isHorizontal:n,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.ratio*this.trackLen}),this.scrollbar.init(),this.scrollbar.render(),this.scrollbar.get("group").set("zIndex",vk),this.scrollbar.on("scrollchange",this.onChangeFn))},r.prototype.measureScrollBar=function(){var t=Vy(this.getInteractionConfig()),e=t.padding,n=e[0],a=e[1],o=e[2],u=e[3],f=t.type!=="vertical",m=this.view.coordinateBBox,x=this.view.getXScale(),w=this.view.getYScales().filter(function(L){return L});this.cnt=x.values.length,this.xScaleCfg={field:x.field,values:x.values||[]},this.yScalesCfg=w,this.step=Math.floor((f?m.width:m.height)/t.categorySize),this.trackLen=f?m.width-u-a:m.height-n-o,this.thumbLen=Math.max(this.trackLen*(0,d.clamp)(this.step/x.values.length,0,1),dM)},r.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,d.clamp)(this.ratio,0,1)),e=Math.min(t+this.step,this.cnt);return[t,e]},r.prototype.changeViewData=function(t,e){var n=this,a=t[0],o=t[1],u=Vy(this.getInteractionConfig()),f=this.getViewLayer(),m=f.options.meta,x=f.getData(),w=hM(this.xScaleCfg.field,this.xScaleCfg.values,x,[a,o],u.type==="vertical");this.yScalesCfg.forEach(function(L){var H=(0,d.get)(m,L.field)||{};n.view.scale(L.field,(0,Ft.__assign)((0,Ft.__assign)({formatter:L.formatter},H),{type:L.type,min:L.min,max:L.max}))}),e?(this.view.data(w),this.view.render()):this.view.changeData(w)},r.prototype.onChange=function(t){var e=t.ratio,n=t.thumbOffset;this.ratio=e,this.thumbOffset=n;var a=this.view.getOptions().animate;this.view.animate(!1),this.changeViewData(this.getScrollRange(),!0),this.view.animate(a),this.renderScrollbar()},r}(Wp),gk=vM,Tm=4,J1=16,tx=function(i){i===void 0&&(i={});var r=(0,Ft.__assign)({type:"horizontal",start:0,end:1,width:void 0,height:void 0,padding:[0,0,0,0],backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},trendCfg:{}},i);i.padding||(r.padding=r.type==="horizontal"?[Tm,0,Tm,0]:[0,Tm,0,Tm]),i.height||(r.height=J1),i.width||(r.width=J1);var t=(0,d.clamp)(Math.min(r.start,r.end),0,1),e=(0,d.clamp)(Math.max(r.start,r.end),0,1);return r.start=t,r.end=e,r},gM=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,d.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=tx(e),a=n.padding||[0,0,0,0],o=a[0],u=a[1],f=a[2],m=a[3];if(n.type==="horizontal"){var x=new ns(t.minX,t.maxY-n.height-o-f,t.width,n.height+o+f);return x}else return new ns(t.maxX-n.width-m-u,t.minY,n.width+m+u,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view,a=tx(this.getInteractionConfig());this.curStart=a.start,this.curEnd=a.end,this.xScaleCfg=void 0;var o=function(){var u=t.view.padding;if(!(u==="auto"||(0,d.isEqual)(u,[0,0,0,1]))&&!(0,d.isEmpty)(e.options.data))if(t.xScaleCfg)t.renderSlider();else{var f=n.getXScale();t.xScaleCfg={field:f.field,values:f.values||[]},n.data(t.getSliderData(t.curStart,t.curEnd)),n.render()}};n.on(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,o),this.addDisposable(function(){return n.off(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,o)}),n.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,o),this.addDisposable(function(){return n.off(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.slider&&(this.slider.destroy(),this.slider=null),this.container&&(this.container.remove(!0),this.container=null)},r.prototype.renderSlider=function(){this.slider?(this.slider.update(this.getSliderConfig()),this.slider.render()):(this.container=this.canvas.addGroup(),this.slider=new wi.Slider((0,Ft.__assign)((0,Ft.__assign)({},this.getSliderConfig()),{container:this.container})),this.slider.init(),this.slider.render(),this.slider.on("sliderchange",this.onChangeFn))},r.prototype.getSliderConfig=function(){var t=this.view,e=t.coordinateBBox,n=this.getRange(),a=tx(this.getInteractionConfig()),o=a||{},u=o.padding,f=u===void 0?[0,0,0,0]:u,m=o.backgroundStyle,x=o.foregroundStyle,w=o.handlerStyle,L=o.textStyle,H=o.trendCfg,W=H===void 0?{}:H,et=f[0],ht=f[1],bt=f[2],xt=f[3],qt=this.getSliderMinMaxText(this.curStart,this.curEnd),ie=qt.minText,_e=qt.maxText,ze={x:e.minX+xt,y:n.minY+et,width:e.width-xt-ht,height:n.height-et-bt,start:this.curStart,end:this.curEnd,minText:ie,maxText:_e,backgroundStyle:m,foregroundStyle:x,handlerStyle:w,textStyle:L,trendCfg:(0,Ft.__assign)((0,Ft.__assign)({isArea:!1,smooth:!1},W),{data:this.getSliderTrendData()})};return ze},r.prototype.getSliderTrendData=function(){var t=this.getViewLayer().options,e=t.data,n=t.yField;return(0,d.map)(e,function(a){return a[n]})},r.prototype.getSliderData=function(t,e){var n=this.getViewLayer().getData(),a=(0,d.size)(this.xScaleCfg.values),o=Math.round(t*a),u=Math.max(o+1,Math.round(e*a));return hM(this.xScaleCfg.field,this.xScaleCfg.values,n,[o,u])},r.prototype.getSliderMinMaxText=function(t,e){var n=this.getViewLayer().options,a=n.data,o=a===void 0?[]:a,u=n.xField,f=(0,d.size)(o),m=Math.round(t*f),x=Math.max(m+1,Math.round(e*f)),w=o.slice(m,x);return{minText:w.length>0?(0,d.head)(w)[u]:"",maxText:w.length>0?(0,d.last)(w)[u]:""}},r.prototype.onChange=function(t){var e=this.view,n=(0,d.clamp)(Math.min(t[0],t[1]),0,1),a=(0,d.clamp)(Math.max(t[0],t[1]),0,1),o=this.getSliderData(n,a),u=this.getSliderMinMaxText(n,a),f=u.minText,m=u.maxText;this.curStart=n,this.curEnd=a,this.slider.update({start:n,end:a,minText:f,maxText:m}),this.slider.render();var x=e.getOptions().animate;e.animate(!1),e.data(o),e.render(),e.animate(x)},r}(Wp),Mb=gM,Tb=function(i){(0,Ft.__extends)(r,i);function r(t){return i.call(this,(0,d.deepMix)({},t))||this}return r.prototype.renderInner=function(t){var e=this;this.initElement(t),this.updateElement(),this.renderMarker(),t.off("click"),t.on("click",function(){e.emit("click")})},r.prototype.destroy=function(){this.group.off(),i.prototype.destroy.call(this)},r.prototype.initElement=function(t){this.circle=t.addShape("circle",{attrs:{x:this.config.x,y:this.config.y,r:this.config.r,fill:"#607889"}}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ffffff"}}),this.pauseGroupMarker=t.addGroup();var e=1/4*this.config.r,n=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}})},r.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var t=1/4*this.config.r,e=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-e/2),this.pauseLeftMarker.attr("width",t),this.pauseLeftMarker.attr("height",e),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-e/2),this.pauseRightMarker.attr("width",t),this.pauseRightMarker.attr("height",e)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},r.prototype.getStartMarkerPath=function(){var t=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-t/Math.sqrt(3)/2,this.config.y-t/2],["L",this.config.x+t/Math.sqrt(3),this.config.y],["L",this.config.x-t/Math.sqrt(3)/2,this.config.y+t/2]]},r}(D0),Pb=Tb,Ib="timelinestart",mM="timelinechange",yM="timelineend",Ob="timelineupdate",Lb=20,xM=20,_M=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,(0,d.deepMix)({},{speed:1,loop:!1},t))||this;return e.onTimeSelectMouseMove=function(n){n.stopPropagation(),n.preventDefault();var a=(0,d.get)(n,"touches.0.pageX",n.pageX),o=a-e.prevX;e.setTimeSelectX(o),e.prevX=a},e.onTimeSelectMouseUp=function(){e.syncCurrnentTick(),e.emit(yM,null);var n=e.getCanvas().get("container");n&&(n.removeEventListener("mousemove",e.onTimeSelectMouseMove),n.removeEventListener("mouseup",e.onTimeSelectMouseUp),n.removeEventListener("mouseleave",e.onTimeSelectMouseUp),n.removeEventListener("touchmove",e.onTimeSelectMouseMove),n.removeEventListener("touchend",e.onTimeSelectMouseUp),n.removeEventListener("touchcancel",e.onTimeSelectMouseUp))},e.onTimeSelectMouseDown=function(n){var a=n.originalEvent;a.stopPropagation(),a.preventDefault(),e.isPlay===!1?e.emit(Ib,null):(e.isPlay=!1,e.changePlayStatus(!1)),e.prevX=(0,d.get)(a,"touches.0.pageX",a.pageX);var o=e.getCanvas().get("container");o.addEventListener("mousemove",e.onTimeSelectMouseMove),o.addEventListener("mouseup",e.onTimeSelectMouseUp),o.addEventListener("mouseleave",e.onTimeSelectMouseUp),o.addEventListener("touchmove",e.onTimeSelectMouseMove),o.addEventListener("touchend",e.onTimeSelectMouseUp),o.addEventListener("touchcancel",e.onTimeSelectMouseUp)},e}return r.prototype.renderInner=function(t){var e=this.config,n=e.ticks,a=e.defaultCurrentTick;n&&n.length&&(this.currentTick=this.config.ticks.includes(a)?a:n[0],this.renderPlayButton(t),this.renderTimeLine(t),this.renderTimeSelect(t,this.currentTick),this.initEvent())},r.prototype.update=function(t){i.prototype.update.call(this,t),this.emit(Ob,this.currentTick)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.timeLineButton.destroy(),this.timeLineButton.off(),this.timeSelect.off(),this.playHandler&&window.cancelAnimationFrame(this.playHandler)},r.prototype.renderPlayButton=function(t){var e=this.config,n=e.height,a=e.x,o=e.y,u=.8,f=n/2*u;this.timeLineButton?this.timeLineButton.update({x:a+f,y:o+f+n*(1-u)/2,r:f}):(this.timeLineButton=new Pb({container:t,x:a+f,y:o+f+n*(1-u)/2,r:f,isPlay:this.isPlay}),this.timeLineButton.init()),this.timeLineButton.render()},r.prototype.getTimeLinePath=function(){var t=this.timeLine,e=t.x,n=t.y,a=t.width,o=t.height,u=o/2;return a>0?"M"+e+", "+n+("A"+u+","+u+" 90 0,0 "+e+","+(n+o))+("L"+(e+a)+", "+(n+o))+("A"+u+","+u+" 90 0,0 "+(e+a)+","+n)+("L"+e+", "+n):[]},r.prototype.renderTimeLine=function(t){var e=this,n=this.config,a=n.width,o=n.height,u=n.ticks,f=n.x,m=n.y;this.timeLine||(this.timeLine={}),this.timeLine.height=o*.15,this.timeLine.x=f+o+Lb,this.timeLine.y=m+(o/2-this.timeLine.height/2),this.timeLine.width=a-this.timeLine.x-xM,this.timeLine&&this.timeLine.shape?this.timeLine.shape.attr("path",this.getTimeLinePath()):this.timeLine.shape=t.addShape("path",{attrs:{path:this.getTimeLinePath(),fill:"#607889",opacity:.2}});var x=this.timeLine.width/(u.length-1);this.tickPosList=[],this.timeLine.textList&&this.timeLine.textList.length&&this.timeLine.textList.forEach(function(L){L.destroy()});var w=-Infinity;this.timeLine.textList=u.map(function(L,H){e.tickPosList.push(e.timeLine.x+H*x);var W=t.addShape("text",{attrs:{x:e.timeLine.x+H*x,y:e.timeLine.y+e.timeLine.height+5,text:L,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),et=W.getBBox();return et.minX>w?(W.show(),w=et.minX+et.width+10):W.hide(),W})},r.prototype.renderTimeSelect=function(t,e){var n=this.config,a=n.ticks,o=n.height,u=this.timeLine.width/(a.length-1),f=(0,d.findIndex)(a,function(L){return L===e}),m=this.timeLine.x+f*u,x=this.config.y+o/2,w=o*.15;this.timeSelect?(this.timeSelect.attr("x",m),this.timeSelect.attr("y",x),this.timeSelect.attr("r",w)):this.timeSelect=t.addShape("circle",{attrs:{x:m,y:x,r:w,fill:"#607889"}}),this.timeSelectText?(this.timeSelectText.attr("x",m),this.timeSelectText.attr("y",x-o*.15-14),this.timeSelectText.attr("text",this.currentTick)):this.timeSelectText=t.addShape("text",{attrs:{x:m,y:x-o*.15-14,text:this.currentTick,textAlign:"center",textBaseline:"top",fill:"#607889"}})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1},r.prototype.setTimeSelectX=function(t){var e=this.timeSelect.attr("x")+t;e<this.timeLine.x&&(e=this.timeLine.x),e>this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x+this.timeLine.width,this.isPlay&&(this.config.loop?this.timeSelect.attr("x")===this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x):(this.isPlay=!1,this.changePlayStatus()))),this.timeSelect.attr("x",e),this.timeSelectText.attr("x",e);var n=this.adjustTickIndex(e);this.currentTick!==this.config.ticks[n]&&(this.currentTick=this.config.ticks[n],this.timeSelectText.attr("text",this.currentTick),this.emit(mM,this.currentTick)),this.getCanvas().draw()},r.prototype.syncCurrnentTick=function(){var t=this,e=this.config.ticks,n=this.timeLine.width/(e.length-1),a=(0,d.findIndex)(e,function(u){return u===t.currentTick}),o=this.timeLine.x+a*n;this.timeSelect.attr("x",o),this.timeSelectText.attr("x",o),this.getCanvas().draw()},r.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame(function(){var e=t.config,n=e.speed,a=e.ticks,o=t.timeLine.width,u=o/a.length,f=u/(n*1e3/60);t.setTimeSelectX(f),t.isPlay&&(t.playHandler=t.startPlay())})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.timeLineButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.emit(Ib,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&(this.syncCurrnentTick(),this.emit(yM,null))),this.getCanvas().draw()},r.prototype.initEvent=function(){var t=this;this.timeLineButton.off("click"),this.timeLineButton.on("click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),this.timeSelect.off("mousedown"),this.timeSelect.on("mousedown",function(e){t.onTimeSelectMouseDown(e)})},r}(D0),kb=_M,bM=40;function Rb(i){return(0,Ft.__assign)({loop:!1,auto:!0,height:bM,padding:[0,20,0,0],speed:2},i)}var SM=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,d.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=Rb(e),a=n.padding[0],o=n.padding[2];return new ns(t.minX,t.maxY-n.height-a-o,t.width,n.height+a+o)},r.prototype.setAnimate=function(t){var e=this.view.geometries;this.view.animate(t),e.forEach(function(n){n.animate(t)})},r.prototype.start=function(){},r.prototype.renderTimeLine=function(){var t=this;this.config=Rb(this.getInteractionConfig());var e=this.view.viewBBox,n=this.config,a=n.loop,o=n.padding,u=n.speed,f=o[0],m=o[1],x=o[2],w=o[3],L=this.getRange(),H=this.getTicks(),W=e.width-w-m,et={x:e.minX+w,y:L.tl.y+f,width:W,height:L.height-f-x,loop:a,ticks:H,speed:u,defaultCurrentTick:H[0]};this.timeline?(0,d.isEqual)(et,this.timeLineConfig)||(this.timeLineConfig=et,this.timeline.update(et)):(this.container=this.canvas.addGroup(),this.timeline=new kb((0,Ft.__assign)({container:this.container},et)),this.timeline.init(),this.timeline.render(),this.timeline.on("timelinestart",function(){t.originAnimation=t.view.getOptions().animate,t.setAnimate(!0)}),this.timeline.on("timelineend",function(){t.setAnimate(t.originAnimation)}),this.timeline.on("timelinechange",this.onChangeFn),this.timeline.on("timelineupdate",this.onChange.bind(this)),this.view.data(this.getFilterData(H[0])),this.timeLineConfig=et)},r.prototype.onChange=function(t){var e=this.getFilterData(t);this.view.changeData(e)},r.prototype.getFilterData=function(t){var e=this.config.field,n=this.getViewLayer().options.data;return n.filter(function(a){return a[e]===t})},r.prototype.getTicks=function(){var t=this.config.field,e=this.getViewLayer().options.data;return(0,d.uniq)(e.map(function(n){return n[t]}))},r.prototype.render=function(){var t=this;this.firstRender=!0,this.view.on(nu.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){t.renderTimeLine()}),this.view.on(nu.VIEW_LIFE_CIRCLE.BEFORE_PAINT,function(){t.renderTimeLine()}),this.view.on(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1}),this.view.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1})},r.prototype.clear=function(){this.timeline&&(this.timeline.destroy(),this.timeline=null),this.container&&(this.container.remove(!0),this.container=null)},r}(Wp),wM=SM;function lv(i,r){var t=[1,0,0,0,1,0,0,0,1],e=Wi.transform(t,r);i.setMatrix(e)}function vd(i,r){var t=r?(0,d.clone)(r):[1,0,0,0,1,0,0,0,1];return Wi.transform(t,i)}function gd(i,r,t,e){var n=e?(0,d.clone)(e):[1,0,0,0,1,0,0,0,1];n[6]=r,n[7]=t,i.setMatrix(n)}function Ap(i,r,t){L0.translate(i,r,t)}function Zy(i,r){Util.rotate(i,r)}var Kv=document.createElement("canvas"),N0=Kv.getContext("2d"),jg=(0,d.memoize)(function(i,r){r===void 0&&(r={});var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return N0.font=[a,o,n,t+"px",e].join(" "),N0.measureText((0,d.isString)(i)?i:"").width},function(i,r){return r?(0,Ft.__spreadArrays)([i],(0,d.values)(r)).join(""):i}),Kp=function(i,r,t){var e=16,n=jg("...",t),a;(0,d.isString)(i)?a=i:a=(0,d.toString)(i);var o=r,u=[],f,m;if(jg(i,t)<=r)return i;for(;f=a.substr(0,e),m=jg(f,t),!(m+n>o&&m>o);)if(u.push(f),o-=m,a=a.substr(e),!a)return u.join("");for(;f=a.substr(0,1),m=jg(f,t),!(m+n>o);)if(u.push(f),o-=m,a=a.substr(1),!a)return u.join("");return u.join("")+"..."},Au;(function(i){i.TOOLTIP_INDICATOR_INNER="tooltip_indicator-inner",i.TOOLTIP_INDICATOR_TITLE="tooltip_indicator-title",i.TOOLTIP_INDICATOR_BODY="tooltip_indicator-body",i.TOOLTIP_INDICATOR_ITEM_GROUP="tooltip_indicator-item-group",i.TOOLTIP_INDICATOR_ITEM_BACKGROUND="tooltip_indicator-item-background",i.TOOLTIP_INDICATOR_ITEM_LINE="tooltip_indicator-item-line",i.TOOLTIP_INDICATOR_ITEM_TITLE="tooltip_indicator-item-title",i.TOOLTIP_INDICATOR_ITEM_BODY="tooltip_indicator-item-body",i.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP="tooltip_indicator-item-value-group",i.TOOLTIP_INDICATOR_ITEM_NAME="tooltip_indicator-item-name",i.TOOLTIP_INDICATOR_ITEM_VALUE="tooltip_indicator-item-value"})(Au||(Au={}));var bc;(function(i){i.ON_SELECT_ITEM="onSelectItem"})(bc||(bc={}));var Qc;(function(i){i[i.LARGE=12]="LARGE",i[i.NORMAL=8]="NORMAL",i[i.SMALL=4]="SMALL"})(Qc||(Qc={}));var md=160,Hy=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.curX=0,t.curY=0,t.offsetX=0,t.scrollWidth=0,t.onBodyGroupMousemove=function(e){var n=Db(e.target,function(o){return o.get("name")===Au.TOOLTIP_INDICATOR_ITEM_GROUP});if(n){var a=n.get("delegateObject");t.doSelectItem(a.item.id)}},t.onWheel=function(e){var n=t.config.width,a=n===void 0?0:n,o=e.deltaX,u=Math.min(t.scrollWidth-a,0)-(t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2)),f=Math.max(t.scrollWidth-a,0)+t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2),m=(0,d.clamp)(t.offsetX+o,u,f);m!==t.offsetX&&(Ap(t.bodyGroup,t.offsetX-m,0),t.offsetX=m)},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.selectItem=function(t){this.doSelectItem(t)},r.prototype.resetSelect=function(){this.doSelectItem(this.selectedItemId)},r.prototype.initConfig=function(t){var e,n=t.theme,a=n===void 0?{}:n,o={x:0,y:0,title:{text:"",spacingY:Qc.NORMAL,style:{}},line:{spacingX:Qc.SMALL,width:2,style:{}},itemTitle:{spacingX:0,spacingY:Qc.SMALL,style:{}},itemName:{spacingX:Qc.NORMAL,spacingY:Qc.SMALL,style:{}},itemValue:{style:{}},itemBackground:{style:{opacity:0,fill:"#000"}},itemSpacing:Qc.LARGE};this.config=(0,d.deepMix)({},(e=a==null?void 0:a.components)===null||e===void 0?void 0:e.tooltipIndicator,o,t),this.selectedItemId=this.config.selectedItem},r.prototype.renderInner=function(t){var e=this;this.resetRender();var n=this.config,a=n.items,o=n.x,u=n.y,f=[],m=t.addGroup({name:Au.TOOLTIP_INDICATOR_INNER});this.renderTitle(m),this.bodyGroup=m.addGroup({name:Au.TOOLTIP_INDICATOR_BODY}),a==null||a.forEach(function(x,w){f.push(e.renderItem(e.bodyGroup,x,w))}),this.layoutItems(m),gd(m,o,u),this.applyClip(t),this.bindEvents(m)},r.prototype.renderTitle=function(t){var e=this.config.title;if(e==null?void 0:e.text){var n=t.addShape({type:"text",name:Au.TOOLTIP_INDICATOR_TITLE,attrs:(0,Ft.__assign)({text:e==null?void 0:e.text,textAlign:"left",textBaseline:"top"},(e==null?void 0:e.style)||{})}),a=n.getBBox();return this.curY+=a.height,this.curY+=e.spacingY||0,n}},r.prototype.renderItem=function(t,e,n){var a=this.config.itemBackground,o=t.addGroup({name:Au.TOOLTIP_INDICATOR_ITEM_GROUP,delegateObject:{item:e,index:n}}),u=this.curX,f=this.curY,m=o.addShape({name:Au.TOOLTIP_INDICATOR_ITEM_BACKGROUND,type:"rect",attrs:(0,Ft.__assign)({x:this.curX,y:this.curY,width:1,height:1},a.style||{})}),x=this.renderLine(o,e);this.renderItemTitle(o,e),this.renderItemValues(o,e);var w=o.getBBox();return x.attr({y2:x.attr("y1")+w.height}),this.curX=u+w.width,this.curX+=this.config.itemSpacing||0,m.attr({width:this.curX-u-m.attr("lineWidth")*2,height:this.curY-f-m.attr("lineWidth")*2}),this.curY=f,o},r.prototype.renderLine=function(t,e){var n=this.config.line,a=n.width||2,o=(0,Ft.__assign)({x1:this.curX+a/2,y1:this.curY,x2:this.curX+a/2,y2:this.curY,lineWidth:a,stroke:e.color},(n==null?void 0:n.style)||{}),u=t.addShape({name:Au.TOOLTIP_INDICATOR_ITEM_LINE,type:"line",attrs:o}),f=u.getBBox();return this.curX+=f.width,this.curX+=n.spacingX||0,u},r.prototype.renderItemTitle=function(t,e){var n=this.config.itemTitle,a=Kp(e.title,md,n.style||{}),o=t.addShape({name:Au.TOOLTIP_INDICATOR_ITEM_TITLE,type:"text",attrs:(0,Ft.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:a},n.style||{})}),u=o.getBBox();return this.curY+=u.height,this.curY+=n.spacingY||0,o},r.prototype.renderItemValues=function(t,e){var n=this,a,o=t.addGroup({name:Au.TOOLTIP_INDICATOR_ITEM_BODY}),u=this.curX;return(a=e.values)===null||a===void 0||a.forEach(function(f,m){var x=o.addGroup({name:Au.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,delegateObject:{item:e,valueIndex:m}});n.curX=u,n.renderItemValueName(x,f),n.renderItemValueValue(x,f)}),this.layoutItemValues(o),o},r.prototype.renderItemValueName=function(t,e){var n=this.config.itemName;if(e.name){var a=t.addShape({name:Au.TOOLTIP_INDICATOR_ITEM_NAME,type:"text",attrs:(0,Ft.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.name},n.style||{})}),o=a.getBBox();return e.wrapLine?(this.curY+=o.height,this.curY+=n.spacingY||0):(this.curX+=o.width,this.curX+=n.spacingX||0),a}},r.prototype.renderItemValueValue=function(t,e){var n=this.config,a=n.itemName,o=n.itemValue,u=t.addShape({name:Au.TOOLTIP_INDICATOR_ITEM_VALUE,type:"text",attrs:(0,Ft.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.value},o.style||{})}),f=u.getBBox();return this.curY+=f.height,this.curY+=a.spacingY||0,u},r.prototype.layoutItems=function(t){var e=t.findAllByName(Au.TOOLTIP_INDICATOR_BODY)[0],n=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_GROUP);if(!(!e||n.length===0)){var a=e.getBBox();this.scrollWidth=a.width}},r.prototype.layoutItemValues=function(t){var e=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP),n=e.map(function(f){return ns.fromBBoxObject(f.getBBox())}),a=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_VALUE),o=a.map(function(f){return ns.fromBBoxObject(f.getBBox())}),u=Math.max.apply(Math,o.map(function(f){return f.maxX}));e.forEach(function(f,m){var x=n[m],w=f.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_NAME)[0],L=f.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_VALUE)[0];if(w&&L){var H=ns.fromBBoxObject(w.getBBox()),W=ns.fromBBoxObject(L.getBBox());H.height<x.height&&w.attr("y",w.attr("y")+(x.height-H.height)/2),W.height<x.height&&L.attr("y",L.attr("y")+(x.height-W.height)/2),W.maxX<u&&L.attr("x",L.attr("x")+u-W.maxX)}})},r.prototype.applyClip=function(t){var e=this.config,n=e.x,a=e.y,o=e.width,u=e.height,f=t.getBBox();(o||u)&&t.setClip({type:"rect",attrs:{x:n,y:a,width:o||f.width,height:u||f.height}})},r.prototype.doSelectItem=function(t){var e=this,n=this.getGroup(),a=n.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_GROUP);t!==this.selectedItemId?(a.forEach(function(o){var u=o.get("delegateObject");u&&e.applyItemStyle(o,u.item.id===t?"selected":"inactive")}),this.selectedItemId=t):(a.forEach(function(o){e.applyItemStyle(o)}),this.selectedItemId=void 0),this.emit(bc.ON_SELECT_ITEM,this.selectedItemId)},r.prototype.applyItemStyle=function(t,e){var n=this.config,a=n.line,o=n.itemTitle,u=n.itemName,f=n.itemValue,m=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_LINE)[0],x=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_TITLE)[0],w=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_NAME),L=t.findAllByName(Au.TOOLTIP_INDICATOR_ITEM_VALUE),H=e&&e+"Style";m&&(m.attr(a.style),m.attr(a[H]||{})),x&&(x.attr(o.style),x.attr(o[H]||{})),w.forEach(function(W){W.attr(u.style),W.attr(u[H]||{})}),L.forEach(function(W){W.attr(f.style),W.attr(f[H]||{})})},r.prototype.bindEvents=function(t){var e=this;this.offEvents();var n=t.findAllByName(Au.TOOLTIP_INDICATOR_BODY)[0];n.on("mousemove",this.onBodyGroupMousemove),this.addDisposable(function(){n.off("mousemove",e.onBodyGroupMousemove)}),this.gm=new Py(n),this.wheel=new rb(n),this.wheel.on("wheel",this.onWheel)},r.prototype.offEvents=function(){this.gm&&this.gm.destroy(),this.wheel&&this.wheel.destroy()},r.prototype.resetRender=function(){this.curX=0,this.curY=0,this.offsetX=0},r}(D0),EM=Hy;function Db(i,r){for(var t=i;t;){if(r(t))return t;t=t.getParent()}}function ex(i,r){return(0,d.filter)(i.geometries,function(t){return t.type===r})}function $v(i,r){return(0,d.head)(ex(i,r))}function CM(i){return(0,d.map)(i.elements,function(r){return r.shape})}function AM(i,r){i.geometries.forEach(r)}function jy(i,r){i.geometries.forEach(function(t){t.elements.forEach(function(e){r(e)})})}function MM(i,r,t){return(0,d.some)(r,function(e){return t(e.get(dh),i.get(dh))})}function Xy(i,r){var t=i.getBBox(),e=0,n=0;t.minX<r.minX?e=t.minX-r.minX:t.maxX>r.maxX&&(e=t.maxX-r.maxX),e&&i.attr("x",i.attr("x")-e),t.minY<r.minY?n=t.minY-r.minY:t.maxY>r.maxY&&(n=t.maxY-r.maxY),n&&i.attr("y",i.attr("y")-n)}function Yy(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function Xg(i,r){var t=i.getBBox();return(0,d.some)(r,function(e){var n=e.getBBox();return Yy(t,n,2)>0})}var Bb=8,Yg=function(i){i===void 0&&(i={});var r=(0,Ft.__assign)({showTotal:!1,showPercent:!1,padding:[Bb,24,Bb,24],height:i.showPercent?72:54},i);return r},z0;(function(i){i.ACTIVE_ELEMENT="tooltip_indicator_active_element",i.ACTIVE_ELEMENT_BY_X="tooltip_indicator_active_element_by_x"})(z0||(z0={}));var TM=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.state="selected",t.isSingle=!1,t}return r.prototype.active=function(){var t=TA.getCurrentElement(this.context);t.hasState("selected")?this.isSingle?this.setStateByX(t):this.setState(t):this.setStateByX(t)},r.prototype.setState=function(t){var e=this;jy(this.getView(),function(n){n===t?n.hasState(e.state)||n.setState(e.state,!0):n.setState(e.state,!1)}),this.isSingle=!0,this.getView().emit(z0.ACTIVE_ELEMENT,{element:t,isSingle:!0})},r.prototype.setStateByX=function(t){var e=this,n=this.getXField(),a=t.getData()[n];jy(this.getView(),function(o){o.getData()[n]===a?o.hasState(e.state)||o.setState(e.state,!0):o.setState(e.state,!1)}),this.isSingle=!1,this.getView().emit(z0.ACTIVE_ELEMENT_BY_X,{element:t,isSingle:!1})},r.prototype.setStateByField=function(t,e){var n=this,a=this.getView().getXScale().field,o=this.getView().getGroupScales()[0].field;jy(this.getView(),function(u){var f=u.getData();u.setState(n.state,f[a]===t&&(e===void 0||f[o]===e))})},r.prototype.getView=function(){return this.context.view},r.prototype.getXField=function(){var t=this.context.view;return t.getXScale().field},r}(Jn);Ci("tooltip-indicator",TM),Nn("element-tooltip-indicator",{start:[{trigger:"element:mousemove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"element:touchmove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}}]});var PM=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onElementActive=function(e){var n=e.element,a=e.isSingle,o=t.view.getXScale(),u=t.view.getXScale().field,f=t.view.getGroupScales()[0].field,m=n.getData(),x=m[u],w=t.getLegendItems(x);t.component.update({items:w,title:{text:o.getText(x)}}),t.component.render(),a&&t.component.selectItem(m[f]),t.curX=x},t.onSelectTooltipIndicatorItem=function(e){t.component&&e&&t.getInteractionAction().setStateByField(t.curX,e)},t}return r.getInteractionRange=function(t,e){var n=Yg(e),a=n.padding,o=a[0],u=a[2];return new ns(t.minX,t.minY,t.width,n.height+o+u)},r.prototype.clear=function(){this.component&&this.component.destroy(),this.container&&this.container.remove(!0),this.component=null,this.container=null},r.prototype.render=function(){var t=this,e=this.view,n=function(){var a=t.view.getXScale(),o=(0,d.last)(a.getTicks()).tickValue,u=t.view.padding;(0,d.isEqual)([0,0,0,0],u)||(t.component?t.updateComponent():(t.createComponent(),t.component.on(bc.ON_SELECT_ITEM,t.onSelectTooltipIndicatorItem)),t.curX=o,t.component.update({title:{text:a.getText(t.curX)}}),t.component.render(),t.getInteractionAction().setStateByField(o))};e.legend(!1),e.removeInteraction("active-region"),e.removeInteraction("tooltip"),e.interaction("element-tooltip-indicator"),e.on(nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,n),e.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,n),e.on(z0.ACTIVE_ELEMENT,this.onElementActive),e.on(z0.ACTIVE_ELEMENT_BY_X,this.onElementActive)},r.prototype.getInteractionAction=function(){var t=this.view.interactions["element-tooltip-indicator"];return t&&t.context.getAction("tooltip-indicator")},r.prototype.createComponent=function(){var t=Yg(this.getInteractionConfig()).padding,e=t[0],n=t[1],a=t[2],o=t[3],u=this.getLegendItems(),f=this.getRange(),m=this.view.getXScale(),x=(0,d.last)(m.getTicks()).tickValue;this.container=this.canvas.addGroup(),this.component=new EM({container:this.container,x:f.x+o,y:f.y+e,width:f.width-o-n,height:f.height-e-a,theme:this.getViewLayer().getPlotTheme(),items:u}),this.component.init(),this.getInteractionAction().setStateByField(x)},r.prototype.updateComponent=function(){var t=this.getLegendItems();this.component.update({items:t})},r.prototype.getLegendItems=function(t){var e=this.view,n=e.getData(),a=e.getTheme().defaultColor,o=e.getXScale(),u=e.getYScales()[0],f=t||(0,d.last)(o.getTicks()).tickValue,m=e.getLegendAttributes(),x=m.find(function(et){return et.type==="color"}),w=[],L=e.getGroupScales()[0],H=L.field;L&&L.isCategory&&L.getTicks().forEach(function(et){var ht=et.text,bt=et.tickValue,xt=x.mapping(bt).join("")||a;w.push({id:bt,title:ht,color:xt,values:[]})});var W=(n==null?void 0:n.filter(function(et){return et[o.field]===f}))||[];return w.forEach(function(et){var ht=W.find(function(bt){return bt[H]===et.id});et.values.push({value:u.formatter?u.formatter(ht[u.field]):ht[u.field]})}),w},r}(Wp),IM=PM;Wp.registerInteraction("slider",Mb),Wp.registerInteraction("scrollbar",gk),Wp.registerInteraction("timeline",wM),Wp.registerInteraction("tooltip-indicator",IM);var Fb=Wp,OM=function(){function i(r){this.innerPaddingComponents=[],this.outerPaddingComponents=[],this.plot=r.plot}return i.prototype.registerPadding=function(r,t,e){t===void 0&&(t="outer"),e===void 0&&(e=!1),t==="inner"?e?this.innerPaddingComponents.find(function(n){return n==r})||this.innerPaddingComponents.push(r):this.innerPaddingComponents.push(r):e?this.outerPaddingComponents.find(function(n){return n==r})||this.outerPaddingComponents.push(r):this.outerPaddingComponents.push(r)},i.prototype.getPaddingComponents=function(r){return r===void 0&&(r="outer"),(r==="outer"?this.outerPaddingComponents:this.innerPaddingComponents)||[]},i.prototype.clear=function(){this.innerPaddingComponents=[],this.outerPaddingComponents=(0,d.filter)(this.outerPaddingComponents,function(r){return r.afterRender})},i.prototype.clearOuterComponents=function(){(0,d.each)(this.outerPaddingComponents,function(r){r.afterRender&&r.destroy()}),this.outerPaddingComponents=[]},i.prototype.getPadding=function(){var r=this.plot.options,t=r.padding?r.padding:this.plot.config.theme.padding;return t==="auto"?[0,0,0,1]:t},i.prototype.processAutoPadding=function(){var r=this._getInnerAutoPadding();this.plot.updateConfig({padding:r}),this.plot.render()},i.prototype.processOuterPadding=function(){this.plot.layerBBox||(this.plot.layerBBox=new ns(this.plot.x,this.plot.y,this.plot.width,this.plot.height));var r=this.plot.layerBBox.minX,t=this.plot.layerBBox.maxX,e=this.plot.layerBBox.minY,n=this.plot.layerBBox.maxY;return(0,d.each)(this.outerPaddingComponents,function(a){var o=a.position;if(!a.destroyed){var u=a.getBBox(),f=u.minX,m=u.maxX,x=u.minY,w=u.maxY;w>=e&&w<=n&&o==="top"&&(e=w),x>=e&&x<=n&&o==="bottom"&&(n=x),m>r&&m<=t&&o==="left"&&(r=m),f>=r&&m<=t&&o==="right"&&(t=f)}}),new ns(r,e,t-r,n-e)},i.prototype._getInnerAutoPadding=function(){var r,t=this.plot.options,e=this.plot.view,n=e.coordinateBBox,a=n.maxX,o=n.maxY,u=n.minY,f=n.minX,m=this.plot.config.theme.bleeding;(0,d.isArray)(m)&&(0,d.each)(m,function(et,ht){typeof m[ht]=="function"&&(m[ht]=m[ht](t))}),this.bleeding=(0,d.clone)(m);var x=[new ns(n.minX,n.minY,n.width,n.height)];((r=this.plot.config.coordinate)===null||r===void 0?void 0:r.type)==="cartesian"&&this._getCartesianAxis(e,x[0],x);var w=this._mergeBBox(x);this._getLegend(e,w,x),w=this._mergeBBox(x);var L=this.innerPaddingComponents;(0,d.each)(L,function(et){var ht=et,bt=ht.getBBox();x.push(bt)}),w=this._mergeBBox(x);var H=[u-w.minY+this.bleeding[0],w.maxX-a+this.bleeding[1],w.maxY-o+this.bleeding[2],f-w.minX+this.bleeding[3]],W=this._getPanel(e);return H[0]+=W[0],H[1]+=W[1],H[2]+=W[2],H[3]+=W[3],H},i.prototype._getCartesianAxis=function(r,t,e){var n=DA(r),a=r.getCoordinate().isTransposed;(0,d.each)(n,function(o){if(o.get("group").get("children").length!==0){var u=o.get("position"),f=o.getLayoutBBox(),m=f.minX,x=f.minY,w=f.width,L=f.height;a?u==="bottom"?e.push(new ns(t.minX-w,x,w,L)):u==="left"?e.push(new ns(m,t.maxY,w,L)):u==="top"&&e.push(new ns(t.maxX,x,w,L)):u==="left"?e.push(new ns(t.minX-w,x,w,L)):u==="bottom"?e.push(new ns(m,t.maxY,w,L)):u==="right"&&e.push(new ns(t.maxX,x,w,L))}})},i.prototype._getLegend=function(r,t,e){var n=BA(r);(0,d.each)(n,function(a){var o=a.get("position").split("-")[0],u=a.getLayoutBBox(),f=u.minX,m=u.minY,x=u.width,w=u.height;o==="top"?e.push(new ns(f,t.minY-w,x,w)):o==="bottom"?e.push(new ns(f,t.maxY,x,w)):o==="left"?e.push(new ns(t.minX-x,m,x,w)):e.push(new ns(t.maxX,m,x,w))})},i.prototype._getPanel=function(r){var t=[],e=r.geometries;(0,d.each)(e,function(W){W.labelsContainer&&t.push(W.labelsContainer)});var n=Infinity,a=-Infinity,o=Infinity,u=-Infinity;(0,d.each)(t,function(W){var et=W.get("children");et.forEach(function(ht){if(!(ht.type==="group"&&ht.get("children").length===0)){var bt=ht.getBBox();bt.minX<n&&(n=bt.minX),bt.maxX>a&&(a=bt.maxX),bt.minY<o&&(o=bt.minY),bt.maxY>u&&(u=bt.maxY)}})});var f=r.coordinateBBox,m=Math.max(a-parseFloat(f.maxX),0);if(m>0){var x=f.width/(f.width+m);m*=x}var w=Math.max(parseFloat(f.minX)-n,0);if(w>0){var x=f.width/(f.width+w);w*=x}var L=Math.max(parseFloat(f.minY)-o,0);if(L>0){var x=f.height/(f.height+L);L*=x}var H=Math.max(u-parseFloat(f.maxY),0);if(H>0){var x=f.height/(f.height+H);H*=x}return[L,m,H,w]},i.prototype._mergeBBox=function(r){var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity;return(0,d.each)(r,function(o){var u=o;t=Math.min(u.minX,t),e=Math.max(u.maxX,e),n=Math.min(u.minY,n),a=Math.max(u.maxY,a)}),{minX:t,maxX:e,minY:n,maxY:a}},i}(),LM=OM,kM="#5B8FF9",Nb=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"],yd=["#5B8FF9","#BDD2FD","#5AD8A6","#BDEFDB","#5D7092","#C2C8D5","#F6BD16","#FBE5A2","#E8684A","#F6C3B7","#6DC8EC","#B6E3F5","#9270CA","#D3C6EA","#FF9D4D","#FFD8B8","#269A99","#AAD8D8","#FF99C3","#FFD6E7"],zb=function(i){return i&&i.split("-")[0]==="top"?12:24},Gb=function(i){var r=i.title&&i.title.visible,t=i.description&&i.description.visible;return r||t?12:24},rx=function(i){return(0,d.some)(i.interactions||[],function(r){return(r.type==="slider"||r.type==="scrollbar")&&(r.cfg&&r.cfg.type)!=="vertical"})?8:24},nx={width:400,height:400,bleeding:[Gb,24,rx,24],padding:"auto",defaultColor:kM,colors:Nb,colors_20:yd,title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fill:"black",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,zb,24],fontFamily:"PingFang SC",fontSize:12,fill:"grey",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(0,0,0,0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(0, 0, 0, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},circle:{autoHideLabel:!1,grid:{line:{style:{lineDash:null,lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}}},line:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}},tickLine:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},radius:{label:{textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],margin:[0,24,24,24]},label:{offset:12,textStyle:{fill:"#595959"},style:{fill:"#595959",stroke:"#ffffff",lineWidth:2}},tooltip:{"g2-tooltip":{boxShadow:"0px 0px 8px rgba(0,0,0,0.15)"},offset:10},components:{legend:{margin:[0,24,24,24]},tooltipIndicator:{title:{style:{fontSize:14,fill:"#262626"}},line:{style:{opacity:1},inactiveStyle:{opacity:.3}},itemTitle:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemName:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemValue:{style:{fontSize:14,fontWeight:"bold",fill:"#595959",opacity:1},inactiveStyle:{opacity:.3}}}}},RM={backgroundStyle:{fill:"#262626"},defaultColor:"#5B8FF9",width:400,height:400,bleeding:[Gb,24,rx,24],padding:"auto",title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fontWeight:"bold",fill:"rgba(255,255,255,0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,zb,24],fontFamily:"PingFang SC",fontSize:12,fill:"rgba(255, 255, 255, 0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,autoRotate:!1,autoHide:!0,textStyle:{fill:"rgba(255, 255, 255, 0.45)",fontSize:12}},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)"}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12},offset:16,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12}}},circle:{autoRotateTitle:!0,grid:{style:{lineDash:null,lineWidth:1,stroke:"#E3E8EC"}},line:{style:{lineWidth:1,stroke:"#BFBFBF"}},tickLine:{style:{lineWidth:1,stroke:"#bdc8d3",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"#a0a4aa",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"#767b84",fontSize:12}}},radius:{label:{offset:12,textStyle:{fill:"#a0a4aa",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],title:{visible:!1,style:{fill:"#bdc8d3"}},text:{style:{fill:"#bdc8d3"}}},label:{offset:12,textStyle:{fill:"rgba(255, 255, 255, 0.65)"},style:{fill:"rgba(255, 255, 255, 0.65)",lineWidth:1}},components:{tooltip:{domStyles:{"g2-tooltip":{backgroundColor:"rgba(33,33,33, 0.95)",boxShadow:"0px 0px 8px rgba(0,0,0,0.65)",color:"rgba(255, 255, 255, 0.65)"}}}}},ix={default:nx,dark:RM};function DM(i,r){var t=qc();ix[i.toLowerCase()]=deepMix({},t,r)}function qc(i){i===void 0&&(i="default");var r=ix[i.toLowerCase()];return r||(console.warn("error in theme: Can't find the theme named %s. Please register theme first.",i),nx)}var Ub={};function Jc(i,r){var t={lineStyle:"line.line",columnStyle:"interval.rect",pointStyle:"point.circle"},e={};i==="area"&&(t={areaStyle:"area.area",lineStyle:"area.line",pointStyle:"point.circle"});var n={};return(0,d.each)(r,function(a,o){var u;if((0,d.has)(t,o)){var f=t[o];(0,d.each)(a,function(m,x){(0,d.set)(n,f+"."+[x==="normal"?"default":x==="disable"?"inactive":x]+".style",m)})}else e=(0,d.deepMix)({},e,(u={},u[o]=a,u))}),(0,d.isEmpty)(n)||(e=(0,d.deepMix)({},e,{geometries:n})),e}function yf(i,r){Ub[i.toLowerCase()]=Jc(i,r)}function ax(i){return Ub[i.toLowerCase()]||{}}function Vb(i){var r=(0,d.clone)(i);return r.legend||(r.legend={}),r}var Pm={axis:{x:{category:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"textWrapper",option:{lineNumber:2}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}},linear:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"nodesResampling",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"robustAbbrevaite",option:{unit:"thousand",decimal:1,abbreviateBy:"end"}},{name:"textHide"}]}},dateTime:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"datetimeStringAbbrevaite"},{name:"nodesResamplingByAbbrevate",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"nodesResampling"},{name:"nodesResampling"},{name:"textHide"}]}}},y:{linear:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"digitsAbbreviate"},{name:"textHide"}]}},category:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}}}}},ox={default:Pm};function Zb(i,r){ox[i.toLowerCase()]=(0,d.deepMix)({},Pm,r)}function Hb(i){var r=ox[i.toLowerCase()];return r||Pm}var Qv=ye(),jb=function(){function i(){}return i.getGlobalTheme=function(r){return(0,d.isString)(r)?qc(r):(0,d.deepMix)({},qc(),r)},i.prototype.getPlotTheme=function(r,t){var e=r.theme;return(0,d.isString)(e)?(0,d.deepMix)({},qc(e),ax(t)):(0,d.deepMix)({},qc(),ax(t),Jc(t,e))},i.prototype.getTheme=function(r,t){var e=Vb(this.getPlotTheme(r,t)),n=(0,d.deepMix)({},Qv,e);return n},i.prototype.getResponsiveTheme=function(r){return Hb(r)||Hb("default")},i}(),sx=jb,su=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.interactions=[],e.labels=[],e.options=e.getOptions(t),e.initialOptions=(0,d.deepMix)({},e.options),e.paddingController=new LM({plot:e}),e.stateController=new aM({plot:e}),e.themeController=new sx,e}return r.getDefaultOptions=function(){return{renderer:"canvas",title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"},padding:"auto",legend:{visible:!0,position:"bottom-center"},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20},xAxis:{visible:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},label:{visible:!1},interactions:[{type:"tooltip"},{type:"legend-active"},{type:"legend-filter"}],animation:!0}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t),o=(0,d.reduce)((0,d.flatten)((0,d.map)([n,a,(0,d.hasKey)(t,"interactions")?t:e],function(u){return(0,d.get)(u,"interactions",[])})),function(u,f){var m=(0,d.findIndex)(u,function(x){return x.type===f.type});return m>=0&&u.splice(m,1),(0,Ft.__spreadArrays)(u,[f])},[]);return(0,d.deepMix)({},n,a,e,t,{interactions:o})},r.prototype.beforeInit=function(){this.emit(dd.BEFORE_INIT),i.prototype.beforeInit.call(this)},r.prototype.init=function(){var t=this;i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.config={data:this.processData(this.options.data),scales:{},legends:{},tooltip:{showTitle:!0},axes:{},coordinate:{type:"cartesian"},geometries:[],annotations:[],interactions:[],theme:this.theme,panelRange:{},animate:{},views:[]},this.paddingController.clear(),this.drawTitle(),this.drawDescription(),this.interaction(),this.coord(),this.scale(),this.axis(),this.tooltip(),this.legend(),this.addGeometry(),this.annotation(),this.animation(),this.viewRange=this.getViewRange();var e=this.viewRangeToRegion(this.viewRange);this.view=new tp({parent:null,canvas:this.canvas,backgroundGroup:this.container.addGroup(),middleGroup:this.container.addGroup(),foregroundGroup:this.container.addGroup(),padding:this.paddingController.getPadding(),theme:this.theme,options:this.config,limitInPlot:this.isLimitInPlot(),region:e}),this.applyInteractions(),this.view.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.afterRender()})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this),!(!this.view||this.view.destroyed)&&(this.options.padding!=="auto"&&this.parseEvents(),this.emit(dd.AFTER_INIT))},r.prototype.afterRender=function(){var t,e;if(!(!this.view||this.view.destroyed)){var n=this.options,a=n.padding?n.padding:this.config.theme.padding;n.defaultState&&a!=="auto"&&this.stateController.defaultStates(n.defaultState),a==="auto"&&this.paddingController.processAutoPadding(),((e=(t=n.tooltip)===null||t===void 0?void 0:t.custom)===null||e===void 0?void 0:e.onChange)&&n.padding!=="auto"&&this.customTooltip()}},r.prototype.render=function(){this.emit(dd.BEFORE_RENDER),i.prototype.render.call(this);var t=this.options.data;(0,d.isEmpty)(t)||this.view.render(),this.emit(dd.AFTER_RENDER)},r.prototype.repaint=function(){this.canvas&&this.canvas.draw()},r.prototype.getScaleByField=function(t){return this.view.getScaleByField(t)},r.prototype.getXScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.getYScale=function(){var t=this.options.yField;if(t)return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options;if((0,d.contains)(t,"colorField"))return this.view.getScaleByField(t)},r.prototype.getShapes=function(){var t=this.view.geometries,e={};return(0,d.each)(t,function(n){var a=n.type;e[a]=n.getShapes()}),e},r.prototype.destroy=function(){this.doDestroy(),i.prototype.destroy.call(this)},r.prototype.updateConfig=function(t){this.doDestroy(),!t.padding&&this.initialOptions.padding&&this.initialOptions.padding==="auto"&&(t.padding="auto"),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){this.emit(dd.BEFORE_CHANGE_DATA);var e=(0,d.isEmpty)(this.options.data);this.options.data=this.processData(t),e?(this.options.padding=this.initialOptions.padding||"auto",this.view.data(this.options.data),this.view.render()):this.view.changeData(this.options.data),this.emit(dd.AFTER_CHANGE_DATA)},r.prototype.getPlot=function(){return this.view},r.prototype.getLabels=function(){return this.labels},r.prototype.getTheme=function(){return this.theme?this.theme:this.themeController.getTheme(this.options,this.type)},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme(this.type)},r.prototype.getPlotTheme=function(){return this.themeController.getPlotTheme(this.options,this.type)},r.prototype.getInteractions=function(){return this.interactions},r.prototype.bindStateManager=function(t,e){this.stateController.bindStateManager(t,e)},r.prototype.setActive=function(t,e){this.stateController.setState({type:"active",condition:t,style:e})},r.prototype.setSelected=function(t,e){this.stateController.setState({type:"selected",condition:t,style:e})},r.prototype.setDisable=function(t,e){this.stateController.setState({type:"disable",condition:t,style:e})},r.prototype.setDefault=function(t,e){this.stateController.setState({type:"default",condition:t,style:e})},r.prototype.getData=function(t,e){return this.processData((this.options.data||[]).slice(t,e))},r.prototype.processData=function(t){return t},r.prototype.scale=function(){var t=(0,d.mapValues)(this.config.scales,function(n){var a=n.type;return a?{type:a}:{}}),e=(0,d.deepMix)({},this.config.scales,this.options.meta||{},t);this.setConfig("scales",e)},r.prototype.axis=function(){var t=Dc("axis",{plot:this,dim:"x"}),e=Dc("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.tooltip=function(){var t,e;if(this.options.tooltip.visible===!1){this.setConfig("tooltip",!1);return}var n=(0,d.get)(this.options,"tooltip");((t=n.custom)===null||t===void 0?void 0:t.container)&&(n.container=n.custom.container),((e=n.custom)===null||e===void 0?void 0:e.customContent)&&(n.customContent=n.custom.customContent),this.setConfig("tooltip",(0,d.deepMix)({},n)),(0,d.deepMix)(this.config.theme.tooltip,this.options.tooltip.domStyles)},r.prototype.createTooltipContainer=function(){var t=document.createElement("div");return t.className="g2-tooltip",t},r.prototype.customTooltip=function(){var t=this.options.tooltip.custom,e;t.container&&(e=(0,d.isString)(t.container)?document.getElementById(t.container):t.container),e||(e=this.createTooltipContainer()),this.view.on("tooltip:show",function(n){(t==null?void 0:t.onChange)&&t.onChange(e,n)}),this.view.hideTooltip(),this.view.on("tooltip:change",function(n){t.onChange(e,n)})},r.prototype.getLegendPosition=function(t){var e=t.split("-");return e&&e.length>1&&e[1]==="center"?e[0]:t},r.prototype.legend=function(){var t;if(this.options.legend.visible===!1){this.setConfig("legends",!1);return}var e=(0,d.deepMix)({},this.theme.legend,this.options.legend),n={position:this.getLegendPosition((0,d.get)(e,"position")),offsetX:(0,d.get)(e,"offsetX"),offsetY:(0,d.get)(e,"offsetY"),flipPage:(0,d.get)(e,"flipPage"),marker:(0,d.get)(e,"marker"),title:((t=e.title)===null||t===void 0?void 0:t.visible)?(0,d.get)(e,"title"):null,itemName:(0,d.get)(e,"text")};this.setConfig("legends",n)},r.prototype.annotation=function(){var t=this,e=[];this.config.coordinate.type==="cartesian"&&this.options.guideLine&&(0,d.each)(this.options.guideLine,function(n){var a=Dc("guideLine",{plot:t,cfg:n});e.push(a)}),this.setConfig("annotations",e)},r.prototype.interaction=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e;(0,d.each)(n,function(a){var o=a.type;if(o==="slider"||o==="scrollbar"){var u={label:{autoHide:!0,autoRotate:!1}};t.options.xAxis=(0,d.deepMix)({},t.options.xAxis,u)}t.setConfig("interaction",a)})},r.prototype.animation=function(){this.options.animation===!1&&this.setConfig("animate",!1)},r.prototype.applyInteractions=function(){var t=this,e=ns.fromBBoxObject(this.layerBBox),n=this.title||this.description,a=new ns(e.minX,e.minY,e.width,n?n.getBBox().maxY:0);e=e.cut(a,nu.DIRECTION.TOP);var o=this.options.interactions,u=o===void 0?[]:o;this.interactions&&this.interactions.forEach(function(f){f.destroy()}),this.interactions=[],u.forEach(function(f){var m=Fb.getInteraction(f.type,t.type);if(m){var x=new m({view:t.view},t,m.getInteractionRange(e,f.cfg),f.cfg);x.render(),t.interactions.push(x)}})},r.prototype.setConfig=function(t,e){if(t==="geometry"){this.config.geometries.push(e);return}if(t==="interaction"){this.config.interactions.push(e);return}if(e===!1){this.config[t]=!1;return}(0,d.assign)(this.config[t],e)},r.prototype.parseEvents=function(t){var e=this,n=this.options;if(n.events){i.prototype.parseEvents.call(this,n.events);var a=t?t.EVENT_MAP:Ns;(0,d.each)(n.events,function(o,u){if((0,d.isFunction)(o)){var f=a[u]||u,m=o;Wl(e,f,m)}})}},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),R0(t.title)){var n=this.width,a=this.config.theme,o=new ky({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,d.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:R0(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o,this.paddingController.registerPadding(o,"outer")}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),R0(t.description)){var n=this.width,a=this.config.theme,o=0;if(this.title){var u=this.title.getBBox();o+=u.minY+u.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var f=new ky({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,d.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=f,this.paddingController.registerPadding(f,"outer")}},r.prototype.doRenderLabel=function(t,e){(0,d.each)(this.labels,function(u){u.destroy()}),this.labels=[];var n={layer:this,container:t.labelsContainer,geometry:t,label:e},a=VA(e.type);if(a){var o=new a(n);o.init(),o.render(),this.labels.push(o)}},r.prototype.doDestroy=function(){this.doDestroyInteractions(),this.doDestroyLabels(),this.view.destroyed||this.view.destroy()},r.prototype.doDestroyInteractions=function(){this.interactions&&this.interactions.forEach(function(t){t.destroy()}),this.interactions=[]},r.prototype.doDestroyLabels=function(){(0,d.each)(this.labels,function(t){t.destroy()}),this.labels=[]},r.prototype.getViewRange=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e,a=this.paddingController.processOuterPadding();n.forEach(function(u){var f=Fb.getInteraction(u.type,t.type),m=f&&f.getInteractionRange(a,u.cfg),x="";m&&(m.maxY===a.maxY&&m.minY>a.minY?x="bottom":m.maxX===a.maxX&&m.minX>a.minX?x="right":m.minX===a.minX&&m.maxX>a.maxX?x="left":m.minY===a.minY&&m.maxY<a.maxY&&(x="top"),t.paddingController.registerPadding({interaction:u.type,name:u.type,getBBox:function(){return m},position:x},"outer"))});var o=this.paddingController.processOuterPadding();return o},r.prototype.isLimitInPlot=function(){var t=this.options.yAxis;return!!((0,d.hasKey)(t,"max")||(0,d.hasKey)(t,"min")||(0,d.hasKey)(t,"maxLimit")||(0,d.hasKey)(t,"minLimit"))},r.prototype.viewRangeToRegion=function(t){var e=this,n=e.x,a=e.y,o=e.width,u=e.height,f={x:0,y:0},m={x:1,y:1};return f.x=t.minX/(n+o),f.y=t.minY/(a+u),m.x=t.maxX/(n+o),m.y=t.maxY/(a+u),{start:f,end:m}},r}(Ly),_l=su,Wg=S(91033),mk=function(){function i(r){var t=this;this.onResize=(0,d.debounce)(function(){if(!t.plot.destroyed){var a=t.getCanvasSize(),o=a.width,u=a.height;t.width===o&&t.height===u||(t.width=o,t.height=u,t.plot.updateConfig({width:o,height:u}),t.plot.render())}},300);var e=r.containerDOM,n=r.plot;this.containerDOM=e,this.plot=n,this.init()}return i.prototype.getCanvasSize=function(){var r=qc(),t=this.plot.width?this.plot.width:r.width,e=this.plot.height?this.plot.height:r.height;return this.plot.forceFit&&(t=this.containerDOM.offsetWidth?this.containerDOM.offsetWidth:t,e=this.containerDOM.offsetHeight?this.containerDOM.offsetHeight:e),{width:t,height:e}},i.prototype.getCanvasDOM=function(){return this.canvas.get("container")},i.prototype.updateCanvasSize=function(){var r=this.getCanvasSize(),t=r.width,e=r.height;this.width=t,this.height=e,this.canvas.changeSize(t,e)},i.prototype.updateCanvasTheme=function(){var r=this.plot.theme,t=sx.getGlobalTheme(r),e=(0,d.get)(t,"backgroundStyle.fill");e&&this.updateCanvasStyle({backgroundColor:e})},i.prototype.updateCanvasStyle=function(r){(0,ve.Z)(this.getCanvasDOM(),r),(0,ve.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},i.prototype.destroy=function(){this.resizeObserver&&(this.resizeObserver.unobserve(this.containerDOM),this.resizeObserver.disconnect(),this.containerDOM=null),this.canvas.destroy()},i.prototype.bindForceFit=function(){var r=this.plot.forceFit;r&&(this.resizeObserver=new Wg.Z(this.onResize),this.resizeObserver.observe(this.containerDOM))},i.prototype.init=function(){this.initGCanvas(),this.bindForceFit(),this.updateCanvasStyle({position:"relative"})},i.prototype.initGCanvas=function(){var r=this.plot,t=r.renderer,e=t===void 0?"canvas":t,n=r.pixelRatio,a=r.localRefresh,o=a===void 0?!1:a,u=this.getCanvasSize(),f=u.width,m=u.height,x=e==="canvas"?nh:kf;this.canvas=new x({localRefresh:o,container:this.containerDOM,width:f,height:m,pixelRatio:n}),this.width=f,this.height=m,this.updateCanvasTheme()},i}(),zf=mk;function BM(i,r){return!!(i&&r&&i===r)}function Wy(i,r){return i.x>=r.minX&&i.x<=r.maxX&&i.y>=r.minY&&i.y<=r.maxY}var Xb=function(){function i(r){this.plot=r.plot,this.canvas=r.canvas,this.eventHandlers=[]}return i.prototype.bindEvents=function(){this.addEvent(this.canvas,"mousedown",(0,d.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"mousemove",(0,d.wrapBehavior)(this,"onMove")),this.addEvent(this.canvas,"mouseup",(0,d.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"click",(0,d.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"dblclick",(0,d.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"contextmenu",(0,d.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"wheel",(0,d.wrapBehavior)(this,"onEvents"))},i.prototype.clearEvents=function(){var r=this.eventHandlers;(0,d.each)(r,function(t){t.target.off(t.type,t.handler)})},i.prototype.addEvent=function(r,t,e){r.on(t,e),this.eventHandlers.push({target:r,type:t,handler:e})},i.prototype.onEvents=function(r){var t=this.getEventObj(r),e=r.target;!this.isShapeInView(e)&&e.name&&this.plot.emit(e.name+":"+r.type,r),this.plot.emit(""+r.type,t);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,t,r.type)},i.prototype.onMove=function(r){var t=r.target,e=this.getEventObj(r);!this.isShapeInView(t)&&t.name&&(this.plot.emit(t.name+":"+r.type,e),this.lastShape&&!BM(t,this.lastShape)&&(this.lastShape&&this.plot.emit(this.lastShape.name+":mouseleave",e),this.plot.emit(t.name+":mouseenter",e)),this.lastShape=t),this.plot.emit("mousemove",e);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,e,"mousemove")},i.prototype.isShapeInView=function(r){for(var t=["frontgroundGroup","backgroundGroup","panelGroup"],e=r.get("parent");e;){var n=e.get("name");if(n&&(0,d.contains)(t,n))return!0;e=e.get("parent")}return!1},i.prototype.getEventObj=function(r){var t={clientX:r.clientX,clientY:r.clientY,x:r.x,y:r.y,plot:this.plot,data:r.data?r.data.data:null,canvas:this.canvas,target:r.target,gEvent:r};return t},i.prototype.onLayerEvent=function(r,t,e){var n=this;(0,d.each)(r,function(a){var o=a.getGlobalBBox();if(Wy({x:t.x,y:t.y},o)){a.emit(""+e,t);var u=a.layers;u.length>0&&n.onLayerEvent(u,t,e)}})},i}(),FM=Xb,Yb={};function Es(i,r){Yb[i.toLowerCase()]=r}function NM(i){return Yb[i.toLowerCase()]}var zM=function(i){(0,Ft.__extends)(r,i);function r(t,e){var n=i.call(this)||this;return n.containerDOM=typeof t=="string"?document.getElementById(t):t,n.forceFit=(0,d.isNil)(e.forceFit)?(0,d.isNil)(e.width)&&(0,d.isNil)(e.height):e.forceFit,n.renderer=e.renderer||"canvas",n.pixelRatio=e.pixelRatio||null,n.width=e.width,n.height=e.height,n.theme=e.theme,n.localRefresh=e.localRefresh,n.canvasController=new zf({containerDOM:n.containerDOM,plot:n}),n.width=n.canvasController.width,n.height=n.canvasController.height,n.canvas=n.canvasController.canvas,n.layers=[],n.destroyed=!1,n.createLayers(e),n.eventController=new FM({plot:n,canvas:n.canvasController.canvas}),n.eventController.bindEvents(),n.parseEvents(e),n}return r.prototype.destroy=function(){this.eachLayer(function(t){t.destroy()}),this.canvasController.destroy(),this.eventController.clearEvents(),this.layers=[],this.destroyed=!0},r.prototype.repaint=function(){this.canvasController.canvas.draw()},r.prototype.updateConfig=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof _l&&a.updateConfig(t)});else{var n=this.layers[0];n instanceof Ly&&n.updateConfig(t)}t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.theme&&(this.theme=t.theme),this.canvasController.updateCanvasSize(),this.canvasController.updateCanvasTheme()},r.prototype.changeData=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof _l&&a.changeData(t)});else{var n=this.layers[0];n instanceof _l&&n.changeData(t)}},r.prototype.getScaleByField=function(t){return this.layers[0].getScaleByField(t)},r.prototype.getXScale=function(){return this.layers[0].getXScale()},r.prototype.getYScale=function(){return this.layers[0].getYScale()},r.prototype.getColorScale=function(){return this.layers[0].getColorScale()},r.prototype.getPlotTheme=function(){var t=this.layers[0];return t.getPlotTheme()},r.prototype.getData=function(){var t=this.layers[0];return t.getData()},r.prototype.bindStateManager=function(t,e){this.eachLayer(function(n){n instanceof _l&&n.bindStateManager(t,e)})},r.prototype.setActive=function(t,e){this.eachLayer(function(n){n instanceof _l&&n.setActive(t,e)})},r.prototype.setSelected=function(t,e){this.eachLayer(function(n){n instanceof _l&&n.setSelected(t,e)})},r.prototype.setDisable=function(t,e){this.eachLayer(function(n){n instanceof _l&&n.setDisable(t,e)})},r.prototype.setDefault=function(t,e){this.eachLayer(function(n){n instanceof _l&&n.setDefault(t,e)})},r.prototype.getView=function(){return this.layers[0].view},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers[t]},r.prototype.getCanvas=function(){return this.canvasController.canvas},r.prototype.getLayers=function(){return this.layers},r.prototype.render=function(){this.eachLayer(function(t){return t.render()})},r.prototype.eachLayer=function(t){(0,d.each)(this.layers,t)},r.prototype.addLayer=function(t){var e=(0,d.findIndex)(this.layers,function(n){return n===t});e<0&&this.layers.push(t)},r.prototype.createLayers=function(t){if(!t.layers){if(t.type){var e=NM(t.type),n=(0,d.deepMix)({},t,{canvas:this.canvasController.canvas,x:0,y:0,width:this.width,height:this.height}),a=new e(n);this.addLayer(a)}}},r.prototype.parseEvents=function(t){var e=this,n=(0,d.keys)(U1);t.events&&(0,d.each)(t.events,function(a,o){if((0,d.contains)(n,o)&&(0,d.isFunction)(a)){var u=U1[o]||o,f=a;e.on(u,f)}})},r}(Qr.default),Xo=zM,ux=function(){function i(r){(0,d.assign)(this,r),this.init()}return i.prototype.init=function(){this.config={type:this.type,position:{fields:this.positionFields}}},i}(),G0=ux,GM=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"area",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls||!1},t.smooth&&(this.config.shape={values:["smooth"]}),(this._getColorMappingField()||t.color)&&this.parseColor(),(t.areaStyle||t.area&&t.area.style)&&this.parseStyle()},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();if(n&&(e.fields=n),(0,d.has)(t,"color")){var a=t.color;(0,d.isString)(a)?e.values=[a]:(0,d.isFunction)(a)?e.callback=a:(0,d.isArray)(a)&&(n?e.values=a:a.length>0&&(e.values=[a[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.areaStyle?t.areaStyle:t.area.style,n={};(0,d.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,d.get)(t,o))return[t[o]]}},r}(G0),Wb=GM;function Kb(i,r){var t=[];if(i.length){for(var e=0,n=i.length;e<n;e+=1){var a=i[e],o=e===0?"M":"L";t.push([o,a.x,a.y])}r&&t.push(["Z"])}return t}function lx(i,r){var t=i.getCenter(),e=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));return e}function Xc(i,r){for(var t=[i[0]],e=1,n=i.length;e<n;e=e+2){var a=r.convertPoint({x:i[e],y:i[e+1]});t.push(a.x,a.y)}return t}function UM(i,r,t){var e=t.isTransposed,n=t.startAngle,a=t.endAngle,o={x:i[1],y:i[2]},u={x:r[1],y:r[2]},f=[],m=e?"y":"x",x=Math.abs(u[m]-o[m])*(a-n),w=u[m]>=o[m]?1:0,L=x>Math.PI?1:0,H=t.convertPoint(u),W=lx(t,H);if(W>=.5)if(x===Math.PI*2){var et={x:(u.x+o.x)/2,y:(u.y+o.y)/2},ht=t.convertPoint(et);f.push(["A",W,W,0,L,w,ht.x,ht.y]),f.push(["A",W,W,0,L,w,H.x,H.y])}else f.push(["A",W,W,0,L,w,H.x,H.y]);return f}function VM(i){each(i,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var n=i[t-1],a=i[t+1];a&&a[0].toLowerCase()==="a"?n&&n[0].toLowerCase()==="l"&&(n[0]="M"):n&&n[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var $b=function(i,r,t,e){var n=[],a,o,u=!!e,f,m;if(u){f=[Infinity,Infinity],m=[-Infinity,-Infinity];for(var x=0,w=i.length;x<w;x++){var L=i[x];f=fe.min([0,0],f,L),m=fe.max([0,0],m,L)}f=fe.min([0,0],f,e[0]),m=fe.max([0,0],m,e[1])}for(var x=0,H=i.length;x<H;x++){var L=i[x];if(t)a=i[x?x-1:H-1],o=i[(x+1)%H];else if(x===0||x===H-1){n.push(L);continue}else a=i[x-1],o=i[x+1];var W=[0,0];W=fe.sub(W,o,a),W=fe.scale(W,W,r);var et=fe.distance(L,a),ht=fe.distance(L,o),bt=et+ht;bt!==0&&(et/=bt,ht/=bt);var xt=fe.scale([0,0],W,-et),qt=fe.scale([0,0],W,ht),ie=fe.add([0,0],L,xt),_e=fe.add([0,0],L,qt);u&&(ie=fe.max([0,0],ie,f),ie=fe.min([0,0],ie,m),_e=fe.max([0,0],_e,f),_e=fe.min([0,0],_e,m)),n.push(ie),n.push(_e)}return t&&n.push(n.shift()),n};function Kg(i,r,t){for(var e=!!r,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var u=$b(n,.4,e,t),f=n.length,m=[],x,w,L,a=0;a<f-1;a++)x=u[a*2],w=u[a*2+1],L=n[a+1],m.push(["C",x[0],x[1],w[0],w[1],L[0],L[1]]);return e&&(x=u[f],w=u[f+1],L=n[0],m.push(["C",x[0],x[1],w[0],w[1],L[0],L[1]])),m}function ZM(i,r){return Kb(i,r)}function qv(i,r,t){var e=[],n=i[0],a=null;if(i.length<=2)return ZM(i,r);(0,d.each)(i,function(f){(!a||!(a.x===f.x&&a.y===f.y))&&(e.push(f.x),e.push(f.y),a=f)});var o=t||[[0,0],[1,1]],u=Kg(e,r,o);return u.unshift(["M",n.x,n.y]),u}function HM(i,r){return lx(i,r)}function Qb(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function jM(i,r){var t=[];return each(r,function(e){var n=e[0];switch(n.toLowerCase()){case"m":case"l":case"c":t.push(Xc(e,i));break;case"z":default:t.push(e);break}}),t}function yk(i,r){var t=[],e,n,a,o;return each(r,function(u,f){var m=u[0];switch(m.toLowerCase()){case"m":case"c":case"q":t.push(Xc(u,i));break;case"l":e=r[f-1],n=u,a=i.isTransposed,o=a?e[e.length-2]===n[1]:e[e.length-1]===n[2],o?t=t.concat(UM(e,n,i)):t.push(Xc(u,i));break;case"z":default:t.push(u);break}}),VM(t),t}ws("area","miniArea",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=qb(i,this,!1),n=(0,d.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),a=r.addShape("path",{attrs:{path:e,fill:zl(i.color||qc().defaultColor),opacity:t||.4},style:n});return a}}),ws("area","miniAreaSmooth",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=qb(i,this,!0),n=r.addShape("path",{attrs:{path:e,fill:zl(i.color||qc().defaultColor),opacity:t||.5}});return n}});function qb(i,r,t){var e=[[0,0],[1,1]],n=[],a=[];(0,d.each)(i.points,function(m){n.push(m[1]),a.push(m[0])}),a=r.parsePoints(a.reverse()),n=Zg(r.parsePoints(n));var o=t?qv(n,!1,e):cx(n),u=cx(a);u[0][0]="L";var f=o.concat(u);return f}function cx(i){for(var r=[],t=0;t<i.length;t++){var e=i[t],n=t===0?"M":"L";r.push([n,e.x,e.y])}return r}function zl(i){return"l(90) 0:"+i+" 1:#ffffff"}var XM=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniAreaSmooth"]}:this.config.shape={values:["miniArea"]}},r}(Wb),xd=XM,Jb={main:Wb,mini:xd},YM=["colorField","stackField","groupField"],xk=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.type="interval",i.prototype.init.call(this);var t=this.plot.options;this._needParserColor()&&this.parseColor(),this.config.color||(this.config.color={values:["#5b8ff9"]});var e=this._getSizeProps(t);e&&this.parseSize(e);var n=this._getStyleProps(t);n&&this.parseStyle(n)},r.prototype.parseColor=function(){var t=this.plot.options,e=this._getColorMappingField(t),n={};e&&(n.fields=e),t.color&&((0,d.isString)(t.color)?n.values=[t.color]:(0,d.isFunction)(t.color)?n.callback=t.color:(0,d.isArray)(t.color)?e?n.values=t.color:t.color.length>0&&(n.values=[t.color[0]]):(0,d.isObject)(t.color)&&(n.fields=e,n.callback=function(a){return t.color[a]})),this.config.color=n},r.prototype.parseSize=function(t){var e=this.plot.options,n={};(0,d.isFunction)(e[t])?(n.fields=[this.config.position.fields],n.callback=e[t]):n.values=[e[t]],this.config.size=n},r.prototype.parseStyle=function(t){var e=this.plot.options,n=this.config.color,a=this.plot.options[t],o={};(0,d.isFunction)(a)?(o.fields=(n==null?void 0:n.fields)||[e.xField,e.yField],o.callback=a):o.cfg=a,this.config.style=o},r.prototype._getSizeProps=function(t){for(var e=["columnSize","barSize"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,d.get)(t,o))return o}},r.prototype._getStyleProps=function(t){for(var e=["columnStyle","barStyle","pieStyle","ringStyle"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,d.get)(t,o))return o}},r.prototype._getColorMappingField=function(t){for(var e=0,n=YM;e<n.length;e++){var a=n[e];if((0,d.get)(t,a))return[t[a]]}},r.prototype._needParserColor=function(){var t=this.plot.options;if(t.color)return!0;for(var e=0,n=YM;e<n.length;e++){var a=n[e];if(t[a])return!0}return!1},r}(G0),t2=xk,e2={main:t2},_k=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"line",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls},t.lineSize&&this.parseSize(),t.smooth&&(this.config.shape={values:["smooth"]}),t.step&&(this.config.shape={values:[t.step]}),(t.seriesField||t.color)&&this.parseColor(),(t.lineStyle||(0,d.get)(t,["line","style"]))&&this.parseStyle()},r.prototype.parseSize=function(){var t=this.plot.options.lineSize,e={};(0,d.isFunction)(t)?e.callback=t:e.values=[t],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={};if(t.seriesField&&(e.fields=[t.seriesField]),(0,d.has)(t,"color")){var n=t.color;(0,d.isString)(n)?e.values=[n]:(0,d.isFunction)(n)?e.callback=n:(0,d.isArray)(n)&&(t.seriesField?e.values=n:n.length>0&&(e.values=[n[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.lineStyle||(0,d.get)(t,["line","style"]),n={fields:null,callback:null,cfg:null};(0,d.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r}(G0),Vo=_k,Ky=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;!t.xField||!t.yField||(this.config={type:"line",position:{fields:[t.xField,t.yField]},tooltip:!1},(this._getColorMappingField()||this._needParseAttribute("color"))&&this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.line.style&&this.parseStyle(),t.smooth&&(this.config.shape={values:["smooth"]}))},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.line.size?e.values=[t.line.size]:e.values=[2],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();n&&(e.fields=n),t.line.color?e.values=[t.line.color]:(0,d.isString)(t.color)?e.values=[t.color]:(0,d.isFunction)(t.color)?(e.fields=n,e.callback=t.color):(0,d.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]])),this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.line.style,n={};(0,d.isFunction)(e)?(n.fields=this.config.position.fields,n.callback=e):n.cfg=e,this.config.style=n},r.prototype._needParseAttribute=function(t){var e=this.plot.options;return e[t]?!0:!!e.line[t]},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,d.get)(t,o))return[t[o]]}},r}(Vo),bk=Ky;ws("line","miniLine",{draw:function(i,r){for(var t=Zg(i.points),e=[],n=0;n<t.length;n++){var a=t[n],o=n===0?"M":"L";e.push([o,a.x,a.y])}var u=(0,d.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),f=r.addShape("path",{attrs:(0,d.mix)({path:e,stroke:i.color||qc().defaultColor,lineWidth:i.size||2},u)});return f}}),ws("line","miniLineSmooth",{draw:function(i,r){var t=Zg(i.points),e=[[0,0],[1,1]],n=qv(t,!1,e),a=r.addShape("path",{attrs:(0,d.mix)({path:n,stroke:i.color||qc().defaultColor,lineWidth:i.size||2},i.style)});return a}});var Sc=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniLineSmooth"]}:this.config.shape={values:["miniLine"]}},r}(Vo),Jv=Sc,U0={main:Vo,guide:bk,mini:Jv},fx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.pointStyle,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]}},this.parseColor(),this.parseSize(),t.shape&&this.parseShape(t.shape),t.pointStyle&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=t.colorField;n&&(e.fields=(0,d.isArray)(n)?n:[n]),t.color&&this._parseColor(t,e),(0,d.isEmpty)(e)||(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.sizeField&&(e.fields=[t.sizeField]),t.pointSize&&(e.values=(0,d.isArray)(t.pointSize)?t.pointSize:[t.pointSize]),this.config.size=e},r.prototype.parseShape=function(t){this.config.shape=t},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.pointStyle,n={fields:null,callback:null,cfg:null},a=t.xField,o=t.yField,u=t.colorField;(0,d.isFunction)(e)?(u?n.fields=(0,d.isArray)(u)?[a,o,u].concat(u):[a,o,u]:n.fields=[a,o],n.callback=e):(n.cfg=e,(0,d.isNil)(e.opacity)||(n.cfg.fillOpacity=e.opacity)),this.config.style=n},r.prototype._parseColor=function(t,e){(0,d.isString)(t.color)?e.values=[t.color]:(0,d.isFunction)(t.color)?e.callback=t.color:(0,d.isArray)(t.color)&&(e.values=t.color)},r}(G0),tg=fx;function V0(i,r){var t=[];return(0,d.each)(r,function(e){var n=e[i];t.push(n)}),(0,d.uniq)(t)}var hx=["seriesField","stackField"],Sk=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.point.style,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]},tooltip:!1},this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.point.shape&&this.parseShape(t.point.shape),t.point.style&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField(t);if(n)this._parseColorByField(t,e,n);else if(t.point&&t.point.color)e.values=[t.point.color];else if(t.color)this._parseColor(t,e);else{var a=this.plot.getTheme();e.values=[a.defaultColor]}(0,d.keys)(e).length>0&&(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};e.values=[t.point.size],this.config.size=e},r.prototype.parseShape=function(t){var e={};(0,d.isString)(t)?e.values=[t]:(0,d.isObject)(t)&&(e.fields=t.fields,e.callback=t.callback),this.config.shape=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.point&&t.point.style,n={fields:null,callback:null,cfg:null},a=this._getColorMappingField(t);(0,d.isFunction)(e)?(n.fields=[t.xField,t.yField],n.callback=e,a&&n.fields.unshift(a)):n.cfg=e,this.config.style=n},r.prototype._parseColorByField=function(t,e,n){if(e.fields=[n],t.point.color){for(var a=V0(n,t.data).length,o=[],u=0;u<a;u++)o.push(t.point.color);e.values=o}else t.color&&this._parseColor(t,e)},r.prototype._parseColor=function(t,e){var n=this._getColorMappingField(t);(0,d.isString)(t.color)?e.values=[t.color]:(0,d.isFunction)(t.color)?e.callback=t.color:(0,d.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]]))},r.prototype._needParseAttribute=function(t){var e=this.plot.options,n=e.point&&(0,d.has)(e.point,t);return n},r.prototype._getColorMappingField=function(t){for(var e=0,n=hx;e<n.length;e++){var a=n[e];if((0,d.get)(t,a))return[t[a]]}},r}(G0),r2=Sk,$g={guide:r2,circle:tg},WM={area:Jb,line:U0,point:$g,interval:e2};function Yo(i,r,t){var e=WM[i][r];return new e(t).config}function KM(i){var r=LA,t=i.split(" "),e=r[t[1]],n=parseInt(t[0],10);return[e.format,n*e.value]}function wc(i,r){if(!r)return i;Object.prototype.hasOwnProperty.call(r,"tickCount")&&(i.tickCount=r.tickCount),Object.prototype.hasOwnProperty.call(r,"type")&&r.type!=="dateTime"&&(i.type=r.type),Object.prototype.hasOwnProperty.call(r,"tickInterval")&&(r.type==="time"?i.tickInterval=KM(r.tickInterval):i.tickInterval=r.tickInterval),r.type==="time"&&r.mask&&(i.mask=r.mask),Object.prototype.hasOwnProperty.call(r,"min")&&(i.min=r.min),Object.prototype.hasOwnProperty.call(r,"max")&&(i.max=r.max),Object.prototype.hasOwnProperty.call(r,"minLimit")&&(i.minLimit=r.minLimit),Object.prototype.hasOwnProperty.call(r,"maxLimit")&&(i.maxLimit=r.maxLimit),Object.prototype.hasOwnProperty.call(r,"nice")&&(i.nice=r.nice),Object.prototype.hasOwnProperty.call(r,"formatter")&&(i.formatter=r.formatter),Object.prototype.hasOwnProperty.call(r,"exponent")&&(i.exponent=r.exponent),Object.prototype.hasOwnProperty.call(r,"base")&&(i.base=r.base),r.tickMethod&&(i.tickMethod=r.tickMethod)}function n2(i,r){var t=(0,d.filter)(r,function(a){return(0,d.isNumber)(a)}),e=Math.min.apply(Math,t),n=Math.max.apply(Math,t);e>0?(0,d.isNil)(i.min)&&(i.min=0):n<0&&(0,d.isNil)(i.max)&&(i.max=0)}var px;function Mp(i,r){var t={easing:"easeLinear",duration:1e4},e=(0,d.deepMix)({},r,t),n=i.get("element").geometry;n.labelsContainer.set("visible",!1);var a=i.get("index"),o=n.coordinate,u=n.scales,f=u[px.options.yField],m=(0,d.clone)(i.get("origin"));Qg(i,o);var x=i.get("clipShape"),w=i.get("parent"),L=12,H=null,W=px.options.seriesField;W&&(H=w.addShape("text",{attrs:{x:o.start.x+L,y:0,text:m.data[0][W],fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}}));var et=H?16:0,ht=w.addShape("text",{attrs:{x:o.start.x+L,y:et,text:"test"+a,fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}});e.callback=function(){i&&!i.get("destroyed")&&(i.setClip(null),x.remove(),ht.animate({opacity:0},300,function(){ht.remove(),(0,d.isNil)(H)||H.remove();var qt=n.labelsContainer;qt.get("visible")||qt.set("visible",!0)}))};var bt=e.delay;(0,d.isFunction)(bt)&&(bt=e.delay(a));var xt=e.easing;(0,d.isFunction)(xt)&&(xt=e.easing(a)),x.animate({width:o.getWidth()},e.duration,xt,e.callback,bt),e.onFrame=function(qt){var ie=eg(qt,m,o);if(!!ie){ht.attr("x",ie[0]+L),ht.attr("y",ie[1]+et);var _e=Im(f,ie[1],o);f.formatter&&(_e=f.formatter(_e)),ht.attr("text",_e)}},ht.animate(e.onFrame,{duration:e.duration,easing:xt,callback:e.callback,delay:bt}),H&&H.animate({onFrame:function(qt){var ie=eg(qt,m,o);!ie||(H.attr("x",ie[0]+L),H.attr("y",ie[1]))}},e.duration,xt,e.callback,bt)}function Qg(i,r){var t=r.start,e=r.end,n=r.height;i.setClip({type:"rect",attrs:{x:t.x,y:e.y,width:0,height:n}})}function eg(i,r,t){for(var e=r.points,n=t.start.x+t.getWidth()*i,a=0;a<e.length-1;a++){var o=e[a],u=e[a+1];if(n>=o.x&&n<=u.x){var f=(u.y-o.y)/(u.x-o.x),m=o.y+f*(n-o.x);return[n,m]}}}function Im(i,r,t){var e=(r-t.start.y)/(t.end.y-t.start.y);return i.invert(e).toFixed(2)}function i2(i){px=i}ks("clipingWithData",Mp);var a2=function(){function i(r){this.type="shape",this.shapes=r.shapes,this.nodes=[],this._parserNodes(),this.origion_nodes=(0,d.deepMix)([],this.nodes)}return i.prototype.measure=function(r){var t=(0,d.deepMix)({},YA(r),{shape:r});return t},i.prototype.measureNodes=function(){var r=this,t=[],e=[];(0,d.each)(this.shapes,function(n,a){var o=(0,d.deepMix)({},r.nodes[a],r.measure(n));o.width!==0&&o.height!==0&&(t.push(o),e.push(n))}),this.nodes=t,this.shapes=e},i.prototype._parserNodes=function(){var r=this;(0,d.each)(this.shapes,function(t){var e=r.measure(t);r.nodes.push(e)})},i}(),dx=a2;function o2(i,r,t){return t===void 0&&(t={ratio:.6}),r.width*t.ratio}var s2={type:"padding",usage:"assign",expression:o2};function Z0(i,r){var t=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],e=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],n=$1(t,e);return Math.round(n)>=2}var $y={type:"group",usage:"compare",expression:Z0};function u2(i,r,t){t===void 0&&(t={value:4});var e=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],n=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],a=$1(e,n);return Math.round(a)>=t.value}var $M={type:"chain",usage:"compare",expression:u2};function l2(i,r,t){t===void 0&&(t={value:5});var e=Math.abs(i.bottom-r.top);return Math.round(e)>=t.value}var c2={type:"chain",usage:"compare",expression:l2};function f2(i,r,t){return t===void 0&&(t={ratio:.15}),i.width<r.width*t.ratio}var QM={type:"padding",usage:"compare",expression:f2};function qM(i,r){var t=2,e=r.coord.radius/t;return Math.min(e,i.value)}var JM={type:"padding",usage:"assign",expression:qM};function tT(i,r,t){return t===void 0&&(t={ratio:.8}),r.radius*t.ratio}var h2={type:"padding",usage:"assign",expression:tT},vx={elementDist:$M,elementDistVertical:c2,elementCollision:$y,elementWidth:QM,columnWidth:s2,ringThickness:h2,minRingThickness:JM};function eT(i,r){vx[i]=r}function cv(i){i.attr("text","")}function rT(i,r,t,e){var n=e.nodes.nodes,a=n[t],o=[];if(!a.shape.get("blank"))for(var u=0;u<n.length;u++){var f=n[u],m=f.shape;if(u!==t&&!m.get("blank")){var x=p2(a,f);x&&o.push(f)}}o.length>0&&(o.push(a),o.sort(function(w,L){return L.top-w.top}),(0,d.each)(o,function(w,L){if(L>0){var H=w.shape;cv(H),H.set("blank",!0)}}))}function p2(i,r){return!(i.bottom<r.top||r.bottom<i.top||i.right<r.left||r.right<i.left)}var qg=S(19432),nT=1e3,iT=60*nT,gx=60*iT,Jg=24*gx,aT=31*Jg,oT=365*Jg;function d2(i,r,t,e){var n=e.nodes.nodes,a;t===n.length-1?a=n[t-1].shape.get("delegateObject").item.name:a=n[t+1].shape.get("delegateObject").item.name;var o=new Date(a),u=i.get("delegateObject").item.name,f=new Date(u),m=n[0].shape.get("delegateObject").item.name,x=new Date(m),w=n[n.length-1].shape.get("delegateObject").item.name,L=new Date(w),H=v2(x,L),W=v2(f,o);if(H===W){if(t!==0&&t!==n.length-1){var et=lT(H);i.attr("text",qg.default.format(f,et))}return}if(t!==0){var ht=n[t-1].shape.get("delegateObject").item.name,bt=new Date(ht),xt=sT(H,f,bt);if(xt){var et=uT(H,W);i.attr("text",qg.default.format(f,et));return}}}function sT(i,r,t){var e=g2(r,i),n=g2(t,i);return e===n}function v2(i,r){var t,e=Math.abs(i-r),n={minute:[iT,gx],hour:[gx,Jg],day:[Jg,aT],month:[aT,oT],year:[oT,Infinity]};return(0,d.each)(n,function(a,o){e>=a[0]&&e<a[1]&&(t=o)}),t}function uT(i,r){for(var t=["year","month","day","hour","minute"],e=["YYYY","MM","DD","HH","MM"],n=t.indexOf(i)+1,a=t.indexOf(r),o="",u=n;u<=a;u++)o+=e[u],u<a&&(o+="-");return o}function lT(i){var r=["year","month","day","hour","minute"],t=["YYYY","MM","DD","HH","MM"],e=r.indexOf(i),n=t[e];return n}function g2(i,r){if(r==="year")return i.getFullYear();if(r==="month")return i.getMonth()+1;if(r==="day")return i.getDay()+1;if(r==="hour")return i.getHours()+1;if(r==="minute")return i.getMinutes()+1}function cT(i){var r=/^(?:(?:[0-2][0-3])|(?:[01]\d)):[0-5]\d$/,t=/^(?:(?:[0-2][0-3])|(?:[01]\d))(?::[0-5]\d){2}$/;return r.test(i)||t.test(i)}var m2={k:{number:1e3,index:0},m:{number:1e6,index:1},b:{number:1e9,index:2},t:{number:1e12,index:3}};function y2(i,r,t,e){if(!(!(0,d.has)(e,"node")||!(0,d.has)(e.node,"node"))){var n=e.nodes.nodes,a=parseFloat(i.get("origin").text);if(a!==0){if(r.formatter){i.attr("text",r.formatter(a));return}if(r.unit){var o=x2(r,a),u=o.num,f=o.unitname;i.attr("text",u+f)}else{var m=hT(n),x=zy(m),f=fT(x),w=m2[f].number,L=pT(n),H=dT(L,w),u=x2({unit:f,decimal:H},a).num;i.attr("text",u+f)}}}}function x2(i,r){var t=["k","m","b","t"],e,n;if(i.unit==="auto"){var a=Math.floor(Math.log(r)/Math.log(1e3));n=t[a-1],e=(r/Math.pow(1e3,a)).toFixed(i.decimal)}else if(i.unit){var o=m2[i.unit];n=i.unit,e=(r/o.number).toFixed(i.decimal)}return{num:e,unitname:n}}function fT(i){var r=["k","m","b","t"],t=Math.floor(Math.log(i)/Math.log(1e3));return r[t-1]}function hT(i){var r=[];return(0,d.each)(i,function(t){var e=t,n=parseFloat(e.shape.get("origin").text);r.push(n)}),r}function pT(i){if(i.length>=2){var r=parseFloat(i[0].shape.get("origin").text),t=parseFloat(i[1].shape.get("origin").text);return Math.abs(r-t)}return 0}function dT(i,r){var t=Math.floor(Math.log10(r));if(i>=r){var e=i%r;if(e>0){var n=Math.floor(Math.log10(e));return Math.abs(n-t)}}else{var a=Math.floor(Math.log10(i));return Math.abs(a-t)}return 0}function vT(i,r,t){var e=t.nodes.nodes;if(r!==e.length-1){var n=e[r],a=e[r+1],o=gT(n,a).dir,u=i.get("startPoint");o==="x"&&i.attr("y",u.y+20)}}function gT(i,r){var t,e={x:r.centerX-i.centerX,y:r.centerY-i.centerY},n=Math.sqrt(e.x*e.x+e.y*e.y),a={x:10,y:0},o=Math.sqrt(a.x*a.x+a.y*a.y),u=By(e,a),f=u/(n*o)*180/Math.PI;f<0&&(f=360-f),f=mT(f);var m=Math.abs(i.centerX-r.centerX),x=Math.abs(i.centerY-r.centerY);return f>45?t="x":f<45&&(t="y"),{dir:t,distX:m,distY:x}}function mT(i){return i>90&&i<=180?180-i:i>180&&i<270?i-180:360-i}function yT(i,r,t,e){var n=e.nodes.nodes;if(t!==0){var a=n[t],o=n[t-1];if(p2(a,o)){var u=e.plot.view.geometries[0].elements[0],f=o.top-a.height/2,m=10;if(f-m>e.region.top){var x=a.shape.get("origin"),w=u.getShapeId(x),L=u.getShapes(),H=xT(w,L).get("box"),W=H.left+H.width/2,et=H.top,ht=u.get("labelController").labelsContainer,bt=ht.addShape("path",{attrs:{path:[["M",W,et],["L",a.shape.attr("x"),f]],stroke:"#ccc",lineWidth:1}}),xt={x:i.attr("x"),y:i.attr("y")};a.shape.attr("y",f-m),n[t]=e.nodes.measure(a.shape),n[t].line=bt,n[t].origin_position=xt}}}}function xT(i,r){var t;return(0,d.each)(r,function(e){var n=e,a=n.get("id");a===i&&(t=n)}),t}function _2(i,r,t,e){var n=e.nodes.nodes,a=n.length%2!=0;if(!mx(r.keep,t,n)){var o=t%2==0;(!a&&o||a&&!o)&&cv(i)}}function mx(i,r,t){var e=[];(0,d.each)(i,function(u){u==="start"?e.push(r===0):u==="end"?e.push(r===t.length-1):(0,d.isNumber)(u)&&e.push(r===u)});for(var n=0,a=e;n<a.length;n++){var o=a[n];if(o===!0)return!0}return!1}function b2(i,r,t,e){var n=e.nodes.nodes;if(!mx(r.keep,t,n)){var a=i.attr("text"),o=i.get("delegateObject").item.name;a!==o&&cv(i)}}function S2(i,r,t,e){var n=e.nodes.nodes,a=bT(n);if(!(t<=1)){var o=n[t],u=_T(t,n),f=u.centerX-o.centerX,m=u.centerY-o.centerY,x=Math.sqrt(f*f+m*m);x<a&&(cv(i),i.set("blank",!0))}}function _T(i,r){for(var t=i-1;t>0;t--){var e=r[t];if(!e.shape.get("blank"))return e}}function bT(i){var r=(0,d.deepMix)([],i);return r.sort(function(t,e){return e.width-t.width}),Math.round(r[0].width)}function ST(i,r,t,e){var n=e.nodes.nodes,a=n[t];a.line&&a.line.remove();var o=e.plot.initialOptions.data,u=e.plot[e.plot.type]||e.plot[e.plot.baseType],f=(0,d.get)(u,["label","fields",0],(0,d.get)(u,["position","fields",1])),m=wT(o,f,n),x=!1;if((0,d.each)(m,function(W){W.shape.get("origin")===a.shape.get("origin")&&(x=!0)}),x){if(a.origin_position){var w=a.origin_position,L=w.x,H=w.y;i.attr("x",L),i.attr("y",H)}}else cv(i)}function wT(i,r,t){var e=[];(0,d.each)(i,function(x){e.push(x[r])}),e.sort(function(x,w){return x-w});var n=e[0],a=yx(t,r,n),o=e[e.length-1],u=yx(t,r,o),f=ET(e),m=yx(t,r,f);return{min:a,max:u,median:m}}function ET(i){var r=(0,d.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2,r[t]}function yx(i,r,t){for(var e=0,n=i;e<n.length;e++){var a=n[e],o=a.shape.get("origin")._origin;if(o[r]===t)return a}}function w2(i,r){var t=r.abbreviateBy?r.abbreviateBy:"end",e=i.attr("text"),n;t==="end"&&(n=e[0]+"..."),t==="start"&&(n="..."+e[e.length-1]),t==="middle"&&(n=e[0]+"..."+e[e.length-1]),i.resetMatrix(),i.attr({text:n,textAlign:"center",textBaseline:"top"})}function CT(i,r,t,e){var n=e.nodes.nodes,a=i.attr("text"),o=/^\d+$/.test(a);o?y2(i,r,t,n):cT(a)?d2(i,r,t,n):w2(i,r)}function E2(i,r){i.resetMatrix(),i.attr({rotate:360-r.degree,textAlign:"right",textBaseline:"middle"})}function AT(i,r){for(var t=i.attr("text"),e=Math.ceil(t.length/r.lineNumber),n="",a=1;a<r.lineNumber;a++){var o=e*a;n=t.slice(0,o)+`
`+t.slice(o)}var u=i.attr("fontSize");i.attr({text:n,lineHeight:u,textAlign:"center",textBaseline:"top"})}var C2={textWrapper:AT,textRotation:E2,textAbbreviate:w2,textHide:cv,digitsAbbreviate:y2,datetimeStringAbbrevaite:d2,robustAbbrevaite:CT,nodesResampling:_2,nodesResamplingByAbbrevate:b2,nodesResamplingByChange:S2,nodesResamplingByState:ST,nodeJitter:vT,nodeJitterUpward:yT,clearOverlapping:rT};function wk(i,r){C2[i]=r}var MT=function(){function i(r){this.iterationTime=10,this.iterationIndex=0,this.rulesLocker=[],this.constraintIndex=0,(0,d.assign)(this,r),this.currentConstraint=this.constraints[0],this.rules&&(this.iterationTime=this.rules[this.currentConstraint.name].length),this._start(),this._run(),this._end()}return i.prototype._start=function(){this.onStart&&this.onStart(this.nodes)},i.prototype._iteration=function(){var r;this.nodes.type==="shape"?r=this.nodes:r=this.nodes,r.type==="shape"&&r.measureNodes(),this.rules&&this._applyRules(),r.type==="shape"&&r.measureNodes(),this.onIteration&&this.onIteration(this.nodes)},i.prototype._end=function(){this.onEnd&&this.onEnd(this.nodes)},i.prototype._run=function(){for(var r=this._constraintsTest();!r&&!(this.iterationIndex>this.iterationTime-1);)this._iteration(),r=this._constraintsTest(),this.iterationIndex++;this.constraintIndex<this.constraints.length-1&&(this.constraintIndex++,this.currentConstraint=this.constraints[this.constraintIndex],this.iterationTime=this.rules?this.rules[this.currentConstraint.name].length:1,this.iterationIndex=0,this._run())},i.prototype._constraintsTest=function(){var r=vx[this.currentConstraint.name],t=this.currentConstraint.option;return r.usage==="compare"?this._constraintCompare(r,t):this._constraintAssignment(r,t)},i.prototype._constraintCompare=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintCompare(n,a,t);if(e==="padding")return this._paddingConstraintCompare(n,this.region,a,t);if(e==="group")return this._groupConstraintCompare(n,a,t)},i.prototype._chainConstraintCompare=function(r,t,e){for(var n=0;n<t.length-1;n++){var a=t[n],o=t[n+1];if(r(a,o,e)===!1)return!1}return!0},i.prototype._paddingConstraintCompare=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var u=o[a];if(r(u,t,n)===!1)return!1}return!0},i.prototype._groupConstraintCompare=function(r,t,e){for(var n=0;n<t.length;n++)for(var a=t[n],o=0;o<t.length;o++)if(o!==n){var u=t[o];if(r(a,u,e)===!1)return!1}return!0},i.prototype._constraintAssignment=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintAssign();if(e==="padding")return this._paddingConstraintAssign(n,this.region,a,t)},i.prototype._chainConstraintAssign=function(){return!0},i.prototype._paddingConstraintAssign=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var u=o[a],f=r(u,t,n);u.value=f}return!0},i.prototype._applyRules=function(){for(var r=this.rules[this.currentConstraint.name][this.iterationIndex],t=C2[r.name],e=r.option?r.option:{},n=this.nodes.nodes,a=0;a<n.length;a++){var o=n[a];this._applyRule(o.shape,t,e,a)}},i.prototype._applyRule=function(r,t,e,n){var a={nodes:this.nodes,region:this.region,plot:this.plot};t(r,e,n,a)},i}(),A2=MT,TT=function(){function i(r){(0,d.assign)(this,r),this.init()}return i.prototype.init=function(){this.type=this.getType(),this.shouldApply()&&this.apply()},i}(),M2=TT,PT={cat:"category",timeCat:"category",time:"dateTime",linear:"linear"},IT=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.axisInstance=this.getAxisInstance(),i.prototype.init.call(this)},r.prototype.shouldApply=function(){var t=this.plot.options;return this.responsiveTheme.axis?!!(this.responsiveTheme.axis[this.dim]&&t[this.dim+"Axis"].visible&&t[this.dim+"Axis"].label&&t[this.dim+"Axis"].label.visible):!1},r.prototype.apply=function(){for(var t=this,e=this.plot.view.backgroundGroup.findAll(function(x){var w=x.get("name");if(w==="axis-label"){var L=x.get("delegateObject").axis.get("field");if(L===t.plot.options[t.dim+"Field"])return x}}),n=[],a=0;a<e.length;a++)n.push(e[a]);var o=new dx({shapes:n}),u=this.responsiveTheme.axis.x[this.type],f=u.constraints,m=u.rules;new A2({nodes:o,constraints:f,region:this.plot.getViewRange(),rules:m,plot:this.plot,onEnd:function(x){t.updateTicks(x.origion_nodes)}})},r.prototype.getType=function(){var t=this.plot.options,e=this.dim+"Axis",n=this.dim+"Field";if(t[e]&&t[e].type&&t[e].type==="dateTime")return"dateTime";var a=this.plot.view.getScaleByField([t[n]]).type;return PT[a]},r.prototype.getAxisInstance=function(){var t,e,n=this.dim==="x"?0:1,a=(t=this.plot.view.getController("axis"))===null||t===void 0?void 0:t.getComponents();if(a)return(e=a[n])===null||e===void 0?void 0:e.component},r.prototype.updateTicks=function(t){var e=this,n=this.plot.view.backgroundGroup.findAll(function(o){var u=o.get("name");if(u==="axis-tickline-group"){var f=o.get("delegateObject").axis.get("field");if(f===e.plot.options[e.dim+"Field"])return o}})[0];if(n){var a=n.get("children");(0,d.each)(t,function(o,u){o.shape.attr("text")===""&&a[u].attr("opacity",0)})}this.plot.canvas.draw()},r}(M2),rg=IT;function OT(i){var r=i.getResponsiveTheme(),t=i.canvas;new rg({plot:i,responsiveTheme:r,dim:"x"}),new rg({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var LT=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldApply=function(){return!(!this.responsiveTheme.label||!this.responsiveTheme.label[this.type])},r.prototype.apply=function(){var t=this.plot.view.geometries[0].labelsContainer.get("children"),e=[];(0,d.each)(t,function(f){e=e.concat(f.findAllByName("label"))});var n=new dx({shapes:e}),a=this.responsiveTheme.label[this.type],o=a.constraints,u=a.rules;new A2({nodes:n,constraints:o,rules:u,plot:this.plot,region:this.plot.view.coordinateBBox})},r.prototype.getType=function(){return null},r}(M2),T2=LT,kT=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,d.get)(this.plot.options,["label","type"],"point")},r}(T2);function RT(i){var r=i.getResponsiveTheme();new kT({plot:i,responsiveTheme:r})}var DT=[],BT=[{name:"responsiveAxis",method:OT},{name:"responsivePointLabel",method:RT}],FT={preRender:DT,afterRender:BT},P2=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Ft.__assign)({offsetX:0,offsetY:0},n)},r.prototype.getLabelOffset=function(){return this.getLabelOffsetByDimAndFactor("y",-1)},r.prototype.getLabelItemAttrs=function(t,e){var n=this,a=this.options,o=a.style,u=a.formatter,f=(0,d.get)(t,"model.mappingData",[]);return(0,d.map)(f,function(m,x){var w,L=n.getValue(m);return(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},n.getPosition(m)),{text:u?u(L,(w={},w[bm]=m._origin,w.mappingDatum=m,w.mappingDatumIndex=x,w.element=t,w.elementIndex=e,w),e):L,textAlign:"center",textBaseline:"middle"}),o)})},r.prototype.getValue=function(t){return(0,d.get)(t._origin,this.layer.options.yField)},r.prototype.getPosition=function(t){var e={x:(0,d.isArray)(t.x)?(0,d.last)(t.x):t.x,y:(0,d.isArray)(t.y)?(0,d.last)(t.y):t.y};return e},r.prototype.layoutLabels=function(t,e){var n=this;if(!!this.options.adjustPosition){var a=this.isOverlapped(e);if(a){var o=this.getGlobalTolerance(e);(0,d.each)(e,function(u,f){f>1&&n.labelResamplingByChange(u,e,f,o)})}a=this.isOverlapped(e),a&&(0,d.each)(e,function(u,f){u.get("visible")&&n.clearOverlapping(u,e,f)})}},r.prototype.adjustLabel=function(){},r.prototype.labelResamplingByChange=function(t,e,n,a){var o=this.findPrevious(n,e),u=this.getCenter(t),f=this.getCenter(o),m=f.x-u.x,x=f.y-u.y,w=Math.sqrt(m*m+x*x);w<a&&t.set("visible",!1)},r.prototype.clearOverlapping=function(t,e,n){for(var a=[],o=0;o<e.length;o++){var u=e[o];if(o!==n&&u.get("visible")){var f=vb(t.getBBox(),u.getBBox());f&&a.push(u)}}a.length>0&&(a.push(t),a.sort(function(m,x){return x.minY-m.minY}),(0,d.each)(a,function(m,x){x>0&&m.set("visible",!1)}))},r.prototype.isOverlapped=function(t){for(var e=0;e<t.length;e++)if(t[e].get("visible")){for(var n=t[e].getBBox(),a=0;a<t.length;a++)if(a!==e&&t[a].get("visible")){var o=t[a].getBBox(),u=vb(n,o);if(u)return!0}}return!1},r.prototype.getGlobalTolerance=function(t){var e=t.slice();return e.sort(function(n,a){return a.getBBox().width-n.getBBox().width}),Math.round(e[0].getBBox().width)},r.prototype.findPrevious=function(t,e){for(var n=t-1;n>0;n--)if(e[n].get("visible"))return e[n]},r.prototype.getCenter=function(t){var e=t.getBBox(),n=e.minX,a=e.maxX,o=e.minY,u=e.maxY;return{x:n+(a-n)/2,y:o+(u-o)/2}},r}(H1),I2=P2;Nf("point",P2);var O2=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){var n=this,a,o=[],u=ns.fromBBoxObject(this.getCoordinateBBox()),f=t.getXYFields(),m=f[0],x=f[1],w=(0,d.groupBy)(e,function(H){return H.get(dh)[nu.FIELD_ORIGIN][m]}),L=(a=e[0])===null||a===void 0?void 0:a.get("offset");(0,d.each)((0,d.keys)(w).reverse(),function(H){for(var W=n.sortLabels(t,w[H]);W.length;){var et=W.shift();if(MM(et,o,function(xt,qt){return xt._origin[m]===qt._origin[m]&&xt._origin[x]===qt._origin[x]})){et.set("visible",!1);continue}Xy(et,u);var ht=Xg(et,o),bt=void 0;if(ht&&(et.attr("y",et.attr("y")+2*L),Xy(et,u),bt=Xg(et,o)),bt){et.set("visible",!1);continue}o.push(et)}})},r.prototype.sortLabels=function(t,e){var n=t.getXYFields()[1],a=[];return e.sort(function(o,u){return u.get(dh)[nu.FIELD_ORIGIN][n]-o.get(dh)[nu.FIELD_ORIGIN][n]}),e.length>0&&a.push(e.shift()),e.length>0&&a.push(e.pop()),a.push.apply(a,e),a},r}(I2),NT=O2;Nf("point-auto",O2);var zT=8,GT=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,d.each)(t,function(e){var n=r.getShapeInfo(e.shape),a=r.options,o=a.style,u=a.offsetX,f=a.offsetY,m=r.options.formatter,x=m?m(n.name):n.name;r.container.addShape("text",{attrs:(0,d.deepMix)({},{x:n.x+u,y:n.y+f,text:x,fill:n.color,textAlign:"left",textBaseline:"middle"},o),name:"label"})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,d.clone)(r.label.style);return delete t.fill,{offsetX:zT,offsetY:0,style:t}},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="line"})},i.prototype.getShapeInfo=function(r){var t=r.get("origin").points,e=t[t.length-1],n=r.attr("stroke"),a=this.plot.options.seriesField,o=r.get("origin").data[0][a];return{x:e.x,y:e.y,color:n,name:o}},i}(),L2=GT,UT={line:"line",point:"point"},VT=Rc(UT);(0,d.assign)(Ns,VT);var ZT={stroke:"transparent",fill:"#FCC509",lineWidth:0},HT={stroke:"#FFF",fill:"#FCC509",lineWidth:1},jT={stroke:"rgba(0,0,0,0.85)",fill:"#FCC509",lineWidth:1},XT=function(){function i(r){this.points=[],this.labels=[],this.name="markerPoints",this.defaultCfg={offsetX:0,offsetY:0,style:{normal:ZT,selected:jT,active:HT},label:{visible:!1,offsetY:-8,position:"top",style:{fill:"rgba(0, 0, 0, 0.85)"}},animation:!1},this.view=r.view,this.size=r.size||6,this.config=(0,d.deepMix)({},this.defaultCfg,r),this._init()}return i.prototype.render=function(){var r=this.getDataArray();this._renderPoints(r),this.view.canvas.draw(),this._addInteraction()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.points=[],this.labels=[]},i.prototype.getDataArray=function(){var r=this.view.geometries[0];return r.dataArray},i.prototype._init=function(){var r=this,t=this.view.foregroundGroup;this.container=t.addGroup(),this.render(),this.view.on("beforerender",function(){r.clear()})},i.prototype._renderPoints=function(r){var t=this;(0,d.each)(this.config.data,function(e,n){(0,d.each)(r,function(a){var o=(0,d.find)(a,function(bt){return(0,d.isMatch)(bt._origin,e)});if(o){var u=t.config.style.normal,f=t.container.addGroup({name:t.name}),m=o.x,x=o.y;(0,d.isArray)(m)&&(m=m[0]),(0,d.isArray)(x)&&(x=x[0]);var w=t.config.symbol,L=t.config,H=L.offsetX,W=L.offsetY,et=void 0;if((0,d.isString)(w)&&w.startsWith("image://")){var ht=w.substr(8);et=f.addShape("image",{attrs:{x:m-t.size/2+H,y:x-t.size/2+W,img:ht,width:t.size,height:t.size}})}else w=(0,d.isString)(w)?MA.MarkerSymbols[w]:w,et=f.addShape({type:"marker",name:"marker-point",id:"point-"+n,attrs:(0,Ft.__assign)((0,Ft.__assign)({x:m+H,y:x+W,r:t.size/2},u),{symbol:w})});t.points.push(et),t._animatePoint(et),t._renderLabel(f,o,n),f.set("data",e),f.set("origin",o)}})})},i.prototype._renderLabel=function(r,t,e){var n=this.config.label;if(n&&n.visible){var a=n.offsetX,o=a===void 0?0:a,u=n.offsetY,f=u===void 0?0:u,m=n.formatter,x=n.position,w=n.field,L=t._origin[w];m&&(L=m(L,{_origin:t._origin},e));var H=(0,d.isArray)(t.x)?t.x[0]:t.x,W=(0,d.isArray)(t.y)?t.y[0]:t.y,et=r.addShape("text",{name:"marker-label",id:"label-"+e,attrs:(0,Ft.__assign)((0,Ft.__assign)({x:H+o,y:W+f,text:L||""},n.style),{textAlign:"center",textBaseline:x==="top"?"bottom":"top"})});this.labels.push(et)}},i.prototype._addInteraction=function(){var r=this,t=this.config.events;(0,d.each)(t,function(e,n){r.container.on(r.name+":"+n,function(a){e(a);var o=a.target.get("parent"),u=o.get("children")[0];if(u){var f=u.get("data"),m=u.get("id"),x={id:m,data:f};n==="click"?r.selectedPoint&&r.selectedPoint.get("id")===m?(r.selectedPoint=null,r.setState("inactive",x)):(r.selectedPoint=u,r.setState("selected",x)):n==="mouseenter"?r.setState("active",x):n==="mouseleave"&&r.setState("inactive",x)}r.view.canvas.draw()}),r.view.on("click",function(a){var o=a.target.get("parent");(!o||o.get("name")!==r.name&&r.selectedPoint)&&(r.selectedPoint=null,r.setState("inactive"))})})},i.prototype.setState=function(r,t){var e=this;r==="active"?(!this.selectedPoint||t.id!==this.selectedPoint.get("id"))&&this._onActive(t):r==="inactive"?this.points.forEach(function(n){return e._onInactive(n)}):r==="selected"&&this._onSelected(t)},i.prototype._onActive=function(r){var t=this,e=this.config.style.active;(0,d.each)(this.points,function(n){n.get("id")===r.id?(0,d.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._onInactive=function(r){var t=this.config.style.normal;(!this.selectedPoint||r.get("id")!==this.selectedPoint.get("id"))&&(0,d.each)(t,function(e,n){r.attr(n,e)})},i.prototype._onSelected=function(r){var t=this,e=this.config.style.selected;(0,d.each)(this.points,function(n){n.get("id")===r.id?(0,d.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._animatePoint=function(r){var t=this.config,e=t.animation,n=t.size;if(e!==!1){var a=e,o=a.endState,u=o===void 0?{}:o,f=a.animateCfg,m=f===void 0?sv.DEFAULT_ANIMATE_CFG.appear:f;r.animate((0,Ft.__assign)({r:Number.isNaN(u.size/2)?n/2:u.size/2},u),m)}},i}(),YT=XT,WT=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+1}},KT=function(i){var r=i.shape,t=r.attr("opacity")||1;return{opacity:t*.2}},$T=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+2}};yf("line",{lineStyle:{normal:{},active:WT,disable:KT,selected:$T},pointStyle:{normal:{},active:{},disable:{},selected:{}}});var QT={label:{point:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodesResamplingByChange"},{name:"clearOverlapping"}]}}}};Zb("line",QT);var qT=function(i){(0,Ft.__extends)(r,i);function r(t){return i.call(this,(0,Ft.__assign)({processEvent:"mousemove"},t))||this}return r.prototype.start=function(){},r.prototype.process=function(t){var e=(0,d.filter)(this.view.geometries,function(o){return o.type=="line"}),n=t.target;if(n.get("name")==="line"){var a=(0,d.get)(t,"data.data");(0,d.each)(e,function(o){(0,d.each)(o.elements,function(u){u.setState("active",u.data===a)})})}else(0,d.each)(e,function(o){(0,d.each)(o.elements,function(u){u.setState("active",!1)})})},r}(F0),JT=qT,tP=function(i){(0,Ft.__extends)(r,i);function r(t){return i.call(this,(0,Ft.__assign)({endEvent:"click"},t))||this}return r.prototype.start=function(){},r.prototype.end=function(t){var e=t.target,n=(0,d.filter)(this.view.geometries,function(o){return o.type=="line"});if(e.get("name")==="line"){var a=(0,d.get)(t,"data.data");(0,d.each)(n,function(o){(0,d.each)(o.elements,function(u){u.setState("inactive",u.data!==a)})})}else(0,d.each)(n,function(o){(0,d.each)(o.elements,function(u){u.setState("inactive",!1)})})},r}(F0),eP=tP,rP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"selected-tooltip"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{showContent:!1,showCrosshairs:!0,showMarkers:!0,shared:!0})},r}(nb.Z);Aa("selected-tooltip",rP);var nP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.getPoint();(0,d.isEqual)(t,this.location)||(this.location=t,this.showTooltip(t))},r.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},r.prototype.showTooltip=function(t){var e=this.getTooltipController();e.showTooltip(t)},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:this.getLastXPoint()},r.prototype.getLastXPoint=function(){var t=this.getView(),e=t.getXScale(),n=t.getYScales()[0],a=t.getCoordinate(),o=(0,d.last)(e.getTicks()).value;return a.convert({x:o,y:(n.range[0]+n.range[1])/2})},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("selected-tooltip")},r}(Jn),iP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip-active"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,Ft.__assign)((0,Ft.__assign)({},t),{showCrosshairs:!0,showMarkers:!1,shared:!0})},r}(nb.Z);Aa("tooltip-active",iP);var aP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.getView().removeInteraction("tooltip")},r.prototype.show=function(){var t=this.getPoint();t&&this.showTooltip(t)},r.prototype.hide=function(){var t=this.getView(),e=this.getTooltipController();e.hideTooltip();var n=(0,d.filter)(t.geometries,function(a){return a.type=="point"});(0,d.each)(n,function(a){(0,d.each)(a.elements,function(o){o.setState("active",!1)})})},r.prototype.showTooltip=function(t){var e=this.getView(),n=this.getTooltipController();n.showTooltip(t);var a=n.getTooltipItems(t),o=(0,d.filter)(e.geometries,function(u){return u.type=="point"});(0,d.each)(o,function(u){(0,d.each)(u.elements,function(f){f.setState("active",(0,d.findIndex)(a,function(m){return m.data===f.data})!==-1)})})},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:null},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("tooltip-active")},r}(Jn),oP=aP;Ci("selected-tooltip",nP),Nn("selected-tooltip",{start:[{trigger:nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"selected-tooltip:show"},{trigger:nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"selected-tooltip:show"},{trigger:"plot:mousemove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}]}),Ci("marker-active",oP),Nn("marker-active",{start:[{trigger:nu.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"marker-active:show"},{trigger:nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"marker-active:show"},{trigger:"plot:mousemove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:mouseleave",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchend",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}}]});var sP={line:"line",point:"point"},k2=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.markerPoints=[],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{connectNulls:!1,smooth:!1,lineSize:2,lineStyle:{lineJoin:"round",lineCap:"round"},point:{visible:!1,size:3,shape:"circle"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{showContent:!0,crosshairs:{line:{style:{stroke:"rgba(0,0,0,0.45)"}}}},markerPoints:[]})},r.prototype.afterRender=function(){var t=this,e=this.options;this.renderLabel(),e.markerPoints&&((0,d.each)(this.markerPoints,function(n){return n.destroy()}),this.markerPoints=[],e.markerPoints.forEach(function(n){if(n.visible){var a=new YT((0,Ft.__assign)((0,Ft.__assign)({},n),{view:t.view}));t.markerPoints.push(a)}})),e.responsive&&e.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.seriesField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return sP[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),this.setConfig("scales",e),n2(e[t.yField],(0,d.map)(t.data||[],function(n){return n[t.yField]})),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.tooltip=function(){(0,d.some)(this.options.markerPoints,function(t){return t.visible})&&(this.options.tooltip.showMarkers=!1),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){this.addLine(),this.addPoint()},r.prototype.addLine=function(){var t=this.options;this.line=Yo("line","main",{plot:this}),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",this.line)},r.prototype.addPoint=function(){var t=this.options,e={visible:!1};t.point&&(t.point=(0,d.deepMix)(e,t.point)),t.point&&t.point.visible&&(this.point=Yo("point","guide",{plot:this}),this.setConfig("geometry",this.point))},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var u=$v(this.view,"line");if(n.type==="line"){var f=new L2((0,Ft.__assign)({view:this.view,plot:this},this.options.label));f.render()}else this.doRenderLabel(u,(0,Ft.__assign)({type:"point",formatter:o.formatter&&function(m){return o.formatter(m)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.line.tooltip={};var t=this.options.tooltip;t.fields&&(this.line.tooltip.fields=t.fields),t.formatter&&(this.line.tooltip.callback=t.formatter,t.fields||(this.line.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.line.tooltip.fields.push(this.options.seriesField)))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation?(i2({options:this.options,view:this.view}),this.line.animate=t.animation):(this.line.animate=!1,this.point&&(this.point.animate=!1))},r.prototype.applyInteractions=function(){i.prototype.applyInteractions.call(this),this.interactions.push(new JT({view:this.view})),this.interactions.push(new eP({view:this.view}))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,B)},r.prototype.applyResponsive=function(t){var e=this,n=FT[t];(0,d.each)(n,function(a){var o=a;o.method(e)})},r.prototype.singleLineLabelCheck=function(){return!this.options.seriesField&&this.options.label.type&&this.options.label.type==="line"},r}(_l),Om=k2;Es("line",k2);var R2=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Om.getDefaultOptions,r}(Xo),D2=R2;function uP(i,r,t,e,n){var a=e-r,o=i.children,u=i.value;o.sort(function(x,w){return w.value-x.value});var f=a/u,m=r;(0,d.each)(o,function(x){x.y0=t,x.y1=n,x.x0=m,m+=x.value*f,x.x1=x.x0+x.value*f})}function lP(i,r,t,e,n){var a=n-t,o=i.children,u=i.value;o.sort(function(x,w){return w.value-x.value});var f=a/u,m=t;(0,d.each)(o,function(x){x.x0=r,x.x1=e,x.y0=m,m+=x.value*f,x.y1=x.y0+x.value*f})}var cP=(1+Math.sqrt(5))/2;function B2(i,r,t,e,n){var a=i.children,o=i.value;a.sort(function(rr,sr){return sr.value-rr.value});for(var u=[],f,m,x,w,L,H,W,et,ht=0,bt=0;ht<a.length;){var xt=e-r,qt=n-t;for(f=a[bt++].value,m=f,x=f,w=Math.max(qt/xt,xt/qt)/(o*cP),L=f*f*w,W=Math.max(m/L,L/x);bt<a.length;bt++){if(et=a[bt].value,f+=et,et<x&&(x=et),et>m&&(m=et),L=f*f*w,H=Math.max(m/L,L/x),H>W){f-=et;break}W=H}var ie={value:f,dice:xt<qt,children:a.slice(ht,bt)};if(u.push(ie),ie.dice){var _e=o?qt*f/o:qt;uP(ie,r,t,e,t+_e),o&&(t+=_e)}else{var ze=o?xt*f/o:xt;lP(ie,r,t,r+ze,n),o&&(r+=ze)}o-=f,ht=bt}return u}var fP=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.listeners=[],t.onItemGroupToggleActive=function(e,n){return function(){var a=e.get("children").find(function(o){return o.get("class")==="item-background"});a&&a.attr(n?t.itemActiveBackgroundStyle:t.itemBackgroundStyle),t.getCanvas().draw()}},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.initConfig=function(t){this.x=t.x,this.y=t.y,this.items=t.items||[],this.itemPadding=t.itemPadding||[2,8,2,8],this.backgroundStyle=(0,Ft.__assign)({lineWidth:1,stroke:"#ffffff"},t.backgroundStyle||{}),this.itemBackgroundStyle=(0,Ft.__assign)({fill:"#fff"},t.itemBackgroundStyle||{}),this.itemActiveBackgroundStyle=(0,Ft.__assign)({fill:"#ccc",opacity:.2},t.itemActiveBackgroundStyle||{}),this.separator=t.separator||"/",this.separatorStyle=(0,Ft.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.separatorStyle||{}),this.itemWidth=t.itemWidth,this.itemHeight=t.itemHeight,this.maxItemWidth=t.maxItemWidth,this.textStyle=(0,Ft.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.textStyle||{})},r.prototype.renderInner=function(t){var e=0,n=0;this.offEvents(),this.renderItems(t,e,n),gd(this.group,this.x,this.y)},r.prototype.renderItems=function(t,e,n){var a=this,o=this.itemPadding,u=o[0],f=o[1],m=o[2],x=o[3],w,L=t.addShape("rect",{class:"breadcrumb-background",attrs:(0,Ft.__assign)({x:e,y:n,width:1,height:1},this.backgroundStyle)});this.items.forEach(function(H,W){var et=t.addGroup({id:"item-group-"+H.key,data:H,class:"item-group",attrs:{cursor:"pointer"}}),ht=et.addShape("rect",{id:"item-background-"+H.key,class:"item-background",attrs:(0,Ft.__assign)((0,Ft.__assign)({x:e,y:n,width:x+f,height:u+m},a.itemBackgroundStyle),{cursor:"pointer"})});ht.name="breadcrumb";var bt=et.addShape("text",{id:"item-text-"+H.key,class:"item-text",attrs:(0,Ft.__assign)((0,Ft.__assign)({x:e+x,y:n+u,text:H.text},a.textStyle),{cursor:"pointer"})});bt.name="breadcrumb";var xt=bt.getBBox();w=a.itemHeight||xt.height;var qt=a.itemWidth||xt.width;a.maxItemWidth&&(qt=Math.min(qt,a.maxItemWidth));var ie={x:e,y:n,width:qt+x+f,height:w+u+m};if(ht.attr("width",ie.width),ht.attr("height",ie.height),et.setClip({type:"rect",attrs:ie}),e+=ie.width,W!==a.items.length-1){var _e=t.addShape("text",{attrs:(0,Ft.__assign)({x:e,y:n+u,text:a.separator},a.separatorStyle),class:"separator"});e+=_e.getBBox().width}}),L.attr({width:e,height:w+u+m})},r.prototype.bindEvents=function(t){var e=this,n=this.items,a=t.get("children").filter(function(u){return u.get("class")==="item-group"}),o=function(u,f,m){return function(){var x=f.get("data"),w=n.find(function(L){return L.key===x});e.emit(m,{item:w})}};a.forEach(function(u){var f=o("click",u,"onItemClick"),m=o("dblclick",u,"onItemDblclick"),x=e.onItemGroupToggleActive(u,!0),w=e.onItemGroupToggleActive(u,!1);u.on("click",f),u.on("dblclick",m),u.on("mouseenter",x),u.on("mouseleave",w),e.listeners.push({target:u,event:"click",callback:f}),e.listeners.push({target:u,event:"dblclick",callback:m}),e.listeners.push({target:u,event:"mouseenter",callback:x}),e.listeners.push({target:u,event:"mouseleave",callback:w})})},r.prototype.offEvents=function(){this.listeners&&this.listeners.forEach(function(t){var e=t.target,n=t.event,a=t.callback;e.off(n,a)}),this.listeners=[]},r}(D0),hP=fP,Qy=[1,0,0,0,1,0,0,0,1],t0=400,H0="easeQuadInOut";function pP(i,r,t){var e=G2(i),n=z2(r),a=n.width/e.width,o=n.height/e.height,u=(n.minX-e.minX)*a,f=(n.minY-e.minY)*o,m=vd([["s",a,o],["t",u,f]]),x=r.geometries[0];qy(x);var w=r.backgroundGroup.addGroup();w.set("zIndex",-100),w.setClip({type:"rect",attrs:{x:n.minX,y:n.minY,width:n.width,height:n.height}});var L=F2(x,w);x.container.set("visible",!1),r.canvas.draw(),t(),window.setTimeout(function(){(0,d.each)(L,function(ht,bt){bt===0?ht.animate({matrix:m},t0,H0,function(){w.remove(),r.canvas.draw()}):ht.animate(vd,t0)}),x=r.geometries[0],qy(x);var H=x.getShapes();(0,d.each)(H,function(ht){ht.attr("opacity",0),ht.animate({opacity:1},t0,H0)});var W=x.container;W.stopAnimate(),W.set("visible",!0),W.attr("matrix",(0,d.clone)(Qy)),lv(W,[["s",e.width/n.width,e.height/n.height],["t",e.minX,e.minY]]);var et=(0,d.clone)(Qy);x.container.animate({matrix:et},t0,H0,function(){U2(x)}),r.canvas.draw()},16)}function F2(i,r){var t=i.getShapes(),e=[];return(0,d.each)(t,function(n){var a=r.addShape("path",{attrs:(0,d.deepMix)({},n.attrs,{capture:!1})});e.push(a)}),e}function N2(i,r,t){var e=r.geometries[0];qy(e);var n=e.container;n.attr("matrix",(0,d.clone)(Qy));var a=r.backgroundGroup.addGroup();a.set("zIndex",-100);var o=F2(e,a);n.set("visible",!1),r.canvas.draw(),t(),e=r.geometries[0],qy(e),n=e.container;var u=dP(e.getShapes(),i),f=G2(u),m=z2(r),x=n.get("parent");x.get("clipShape")||n.setClip({type:"rect",attrs:{x:m.minX,y:m.minY,width:m.width,height:m.height}}),vP(a,o,f,m);var w=m.width/f.width,L=m.height/f.height,H=(m.minX-f.minX)*w,W=(m.minY-f.minY)*L,et=vd([["s",w,L],["t",H,W]]);n.setMatrix(et),n.set("visible",!0),n.animate({matrix:Qy},t0,H0,function(){U2(e)})}function dP(i,r){var t;return(0,d.each)(i,function(e){var n=e.get("origin").data.name;n===r&&(t=e)}),t}function z2(i){var r=i.coordinateBBox,t={minX:r.minX,minY:r.minY,centerX:(r.maxX-r.minX)/2,centerY:(r.maxY-r.minY)/2,width:r.width,height:r.height};return t}function G2(i){var r=i.attr("path"),t=r[0][1],e=r[0][2],n=r[1][1],a=r[2][2],o={minX:t,minY:a,centerX:(n-t)/2,centerY:(e-a)/2,width:Math.abs(n-t),height:Math.abs(e-a)};return o}function vP(i,r,t,e){var n=t.width/e.width,a=t.height/e.height,o=vd([["s",n,a],["t",t.minX,t.minY]]);i.animate({matrix:o},t0,H0,function(){i.remove()}),(0,d.each)(r,function(u){u.animate({opacity:0},t0,H0)})}function qy(i){var r=i.labelsContainer;r.set("visible",!1)}function U2(i){var r=i.labelsContainer;r.set("visible",!0)}var V2=100,e0=30,gP=10,mP=function(i){i===void 0&&(i={});var r=(0,Ft.__assign)({x:0,y:0,startNode:{name:"root"},itemWidth:V2,itemHeight:e0,padding:[0,0,0,0]},i);return r},Z2=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getInteractionRange=function(t,e){var n=mP(e),a=n.padding,o=a[0],u=a[1];if(t)return new ns(t.minX,t.maxY-n.itemHeight-o-u,t.width,n.itemHeight+o+u)},r.prototype.start=function(t){var e=this,n=t.data.data;n.children&&(this.parentNode={color:t.target.attr("fill"),shape:t.target,data:{name:(0,d.clone)(this.currentNode.name),value:(0,d.clone)(this.currentNode.value)},depth:(0,d.clone)(this.currentDepth)},this.currentDepth++,pP(t.target,this.view,function(){e.update(n)}))},r.prototype.update=function(t){(0,d.hasKey)(this.cache,t.name)||(this.cache[t.name]=t);var e=this.plot.getTreemapData(t,t.depth);this.view.changeData(e),this.adjustScale(this.currentDepth),this.currentNode=t,this.render()},r.prototype.render=function(){if(this.breadcrumb){var t=this.getItems();this.breadcrumb.update({items:t}),this.breadcrumb.render(),this.layout()}else this.initGeometry(),this.cache={},this.saveOriginMapping(),this.container=this.plot.canvas.addGroup(),this.startNode||(this.startNode={name:"root"}),this.startNode.name==="root"?(this.startNodeName=(0,d.hasKey)(this.plot.options.data,"name")?this.plot.options.data.name:"root",this.currentNode=this.plot.options.data,this.currentDepth=1):(this.startNodeName=this.startNode.name,this.currentNode=this.startNode),this.y=this.view.coordinateBBox.maxY+gP,this.breadcrumb=new hP({container:this.container,x:0,y:this.y,items:this.getItems()}),this.breadcrumb.init(),this.breadcrumb.render(),this.plot.canvas.draw(),this.layout();this.onInteraction()},r.prototype.clear=function(){},r.prototype.layout=function(){var t=this.container.getBBox().width,e=(this.plot.width-t)/2;this.breadcrumb.update({x:e,y:this.y}),this.breadcrumb.render()},r.prototype.getItems=function(){var t=[];if(this.currentNode.name&&this.currentNode.name===this.startNodeName){var e=this.getRootItem();t.push(e)}else{t=[];var n=[];this.findParent(this.currentNode,n),t.push(this.getRootItem()),(0,d.each)(n,function(a,o){t.push({key:String(o+2),text:a.name,data:a})}),t.push({key:String(n.length+2),text:this.currentNode.name,data:this.currentNode})}return t},r.prototype.findParent=function(t,e){if(t.parent)(0,d.hasKey)(this.cache,t.parent.name)?e.push(this.cache[t.parent.name]):e.push(t.parent),this.findParent(t.parent,e);else return},r.prototype.onInteraction=function(){var t=this;this.container.on("click",function(e){var n=e.target.get("parent");if(n&&n.get("class")==="item-group"){var a=n.get("data");if(a.data)if(a.text===t.startNodeName){var o=1;t.currentDepth-1===o?N2(t.currentNode.name,t.view,function(){t.updateRoot(a)}):t.updateRoot(a),t.currentDepth=1}else{if(t.currentNode===a.data)return;var u=(0,d.clone)(t.currentDepth);t.currentDepth=parseInt(a.key),u-1===t.currentDepth?N2(t.currentNode.name,t.view,function(){t.update(a.data)}):t.update(a.data)}}})},r.prototype.getRootItem=function(){var t=this.plot.options.data,e=(0,d.hasKey)(t,"name")?t.name:"root";return{key:"1",text:e,data:this.plot.rootData}},r.prototype.saveOriginMapping=function(){var t=this.plot.options,e=t.colorField,n=t.colors,a={field:e,values:n};this.originMapping=a},r.prototype.adjustScale=function(t){var e=this.view;if(this.mapping&&(0,d.hasKey)(this.mapping,String(t))){var n=(0,d.clone)(this.mapping[t]);if(n.values&&(0,d.isFunction)(n.values)){var a=n.values(this.parentNode,this.currentNode);n.values=a}this.view.geometries[0].color(n.field,n.values)}else{var n=(0,d.clone)(this.originMapping);this.view.geometries[0].color(n.field,n.values)}e.render()},r.prototype.initGeometry=function(){this.geometry=this.view.geometries[0];var t=this.view.viewBBox,e=this.geometry.container;e.setClip({type:"rect",attrs:{x:t.minX,y:t.minY,width:t.width,height:t.height}})},r.prototype.updateRoot=function(t){this.view.changeData(t.data),this.adjustScale(1),this.currentNode=this.plot.options.data,this.render()},r}(Wp),yP=Z2;Wp.registerInteraction("drilldown",Z2);var H2={drilldown:yP},xP={rect:"polygon",breadcrumb:"breadcrumb"},_P=Rc(xP);(0,d.assign)(Ns,_P);var j2=4,bP=8;function SP(i,r){return!i.children||i.depth>=r}function wP(i,r,t){var e=i.attr("fontSize"),n=i.attr("text"),a=t.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:e}}),o=n.split(`
`),u=o.map(function(f){for(var m="",x=f.split(""),w=[],L=0;L<x.length;L++){var H=x[L];a.attr("text",m+=H);var W=a.getBBox().width-1;if(W>r){if(L===0)break;w.push(L),m=""}}return db(x,w)});return a.remove(),u.join(`
`)}function X2(i,r,t,e){for(var n=e.addShape("text",{attrs:{text:"...",x:0,y:0,fontSize:r}}),a=n.getBBox().width,o=e.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:r}}),u="",f=t-a,m=0;m<i.length;m++){var x=i[m];o.attr("text",u+=x);var w=o.getBBox().width;if(w>=f){var L=u.substr(0,u.length-1);if(L.length>0)return L+"..."}}return o.remove(),n.remove(),u}var EP=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,d.each)(t,function(e){var n=e.shape,a=n.get("origin").data,o=SP(a,r.plot.options.maxLevel);if(a.showLabel){var u=(0,d.clone)(r.options.style),f=r.getPosition(n,o),m=r.options.formatter,x=m?m(a.name):a.name,w=r.getTextBaseLine(o),L=r.container.addShape("text",{attrs:(0,d.deepMix)({},u,{x:f.x,y:f.y,text:x,fill:"black",textAlign:"center",textBaseline:w,fontWeight:o?300:600}),name:"label"});r.adjustLabel(L,n,o)}})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getPosition=function(r,t){var e=r.getBBox(),n=0,a=0;return t?(n=e.minX+e.width/2,a=e.minY+e.height/2):(n=e.x+e.width/2,a=e.y+4),{x:n,y:a}},i.prototype.getTextBaseLine=function(r){return r?"middle":"top"},i.prototype.adjustLabel=function(r,t,e){e?this.adjustLeafLabel(r,t):this.adjustParentLabel(r,t)},i.prototype.adjustLeafLabel=function(r,t){var e=t.getBBox(),n=r.getBBox(),a=(0,d.clone)(r.attr("text")),o=2,u=Math.max(r.attr("fontSize")-o,bP),f=e.x+e.width/2,m=e.y+e.height/2;r.attr({x:f,y:m,textAlign:"center",textBaseline:"middle",lineHeight:u,fontSize:u});var x=e.width-j2*2;if(n.width>e.width&&n.height>e.height){r.attr("text","");return}else if(x<u){r.attr("text","");return}if(n.width>e.width){var w=wP(r,x,this.container);r.attr({lineHeight:r.attr("fontSize"),text:w});var L=r.getBBox();if(L.height>e.height){var H=X2(a,u,x,this.container);r.attr("text",H)}}},i.prototype.adjustParentLabel=function(r,t){var e=t.getBBox(),n=e.width-j2*2;if(r.getBBox().width>n){var a=X2(r.attr("text"),r.attr("fontSize"),n,this.container);r.attr("text",a)}},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,d.clone)(t)}},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="polygon"})},i}(),CP=EP,Y2=4,Lm=4,W2=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="treemap",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{maxLevel:2,padding:[0,0,0,0],tooltip:{visible:!1,showTitle:!1,showCrosshairs:!1,showMarkers:!1,shared:!1},legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},xField:"x",yField:"y",label:{visible:!0,adjustPosition:!0,style:{stroke:"rgba(0,0,0,0)",lineWidth:0,fontSize:12}},meta:{x:{nice:!1},y:{nice:!1}},interactions:[{type:"tooltip"}]})},r.prototype.beforeInit=function(){var t=this;i.prototype.beforeInit.call(this);var e=this.options.interactions;e&&(0,d.each)(e,function(o){o.type==="drilldown"&&(t.isDrilldown=!0,t.options.maxLevel=1)});var n=this.options.data,a=this.getTreemapData(n);this.rootData=a},r.prototype.afterRender=function(){if(i.prototype.afterRender.call(this),this.options.label&&this.options.label.visible){var t=new CP((0,Ft.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.geometryParser=function(){return"polygon"},r.prototype.getTreemapData=function(t,e){var n=this.getViewRange(),a=B2(t,n.x,n.y,n.width,n.height);this.recursive(a,1);var o=[];return this.getAllNodes(a,o,e),o.sort(function(u,f){return u.depth-f.depth}),this.options.xField="x",this.options.yField="y",o},r.prototype.processData=function(){return this.rootData},r.prototype.coord=function(){},r.prototype.addGeometry=function(){var t=this,e=this.options,n=e.data,a=e.colorField,o=e.color,u=this.getTreemapData(n);this.rootData=u;var f=this.isNested(u);this.rect={type:"polygon",position:{fields:["x","y"]},color:{fields:[a],values:o},style:{fields:["depth"],callback:function(m){var x=t.adjustStyleByDepth(m,f);return(0,d.deepMix)({},x,t.options.rectStyle)}},tooltip:{fields:["name","value"]}},this.options.tooltip&&this.options.tooltip.formatter&&(this.rect.tooltip.callback=this.options.tooltip.formatter),this.setConfig("geometry",this.rect)},r.prototype.applyInteractions=function(){var t=this,e=this.options.interactions,n=this.view.interactions;(0,d.each)(e,function(a){var o=H2[a.type];if(o){var u=new o((0,d.deepMix)({},{view:t.view,plot:t,startEvent:"polygon:click"},a.cfg,o.getInteractionRange(t.layerBBox,a.cfg)));n[a.type]=u}})},r.prototype.animation=function(){i.prototype.animation.call(this),this.isDrilldown&&(this.rect.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,R)},r.prototype.recursive=function(t,e){var n=this,a=this.options.colorField;(0,d.each)(t,function(o){(0,d.each)(o.children,function(u){u.depth=e,e>1&&(u.parent=o),(0,d.hasKey)(u,a)||(u[a]=o[a]),u.showLabel=!0;var f=n.isLeaf(u);if(!f){var m=Math.abs(u.y1-u.y0),x=n.getLabelHeight(),w=m/2>x?x:Lm;u.showLabel=w!==Lm;var L=B2(u,u.x0+Lm,u.y0+w,u.x1-Lm,u.y1-Lm);n.fillColorField(L,a,u[a]),n.recursive(L,u.depth+1)}})})},r.prototype.getAllNodes=function(t,e,n){var a=this,o=n||this.options.maxLevel,u=this.getViewRange();(0,d.each)(t,function(f){(0,d.hasKey)(f,"x0")&&f.depth<=o&&e.push((0,Ft.__assign)((0,Ft.__assign)({},f),{x:[f.x0,f.x1,f.x1,f.x0],y:[u.height-f.y1,u.height-f.y1,u.height-f.y0,u.height-f.y0]})),(0,d.hasKey)(f,"children")&&a.getAllNodes(f.children,e)})},r.prototype.fillColorField=function(t,e,n){(0,d.each)(t,function(a){(0,d.hasKey)(a,e)||(a[e]=n)})},r.prototype.getLabelHeight=function(){var t=this.options.label,e=this.getPlotTheme().label.style.fontSize,n=0;if(t&&t.visible){var a=t.style;n=a&&a.fontSize?a.fontSize:e}return n+Y2*2},r.prototype.isLeaf=function(t){return!t.children||t.children.length===0},r.prototype.isNested=function(t){var e=this.options.maxLevel;if(e===1)return!1;for(var n=!1,a=0;a<t.length;a++)if(t[a].children){n=!0;break}return n},r.prototype.adjustStyleByDepth=function(t,e){var n=this.options.maxLevel;return e?t===1?{lineWidth:1,stroke:"black",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.3)",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.9)",opacity:.9}},r}(_l),AP=W2;Es("treemap",W2);var MP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="treemap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=AP.getDefaultOptions,r}(Xo),K2=MP,xx=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="step-line",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{step:"hv"})},r}(Om);Es("step-line",xx);var TP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="step-line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=xx.getDefaultOptions,r}(Xo),$2=TP;function Q2(i,r){var t=[],e=i.get("origin").points;return(0,d.each)(e,function(n){t.push(r.convertPoint(n))}),t}var PP=function(){function i(r){(0,d.deepMix)(this,this.constructor.getDefaultOptions(r),r),this._init()}return i.getDefaultOptions=function(r){var t=r.transpose;return{visible:!0,size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:{visible:!0,headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},value:{visible:!0,style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)"},formatter:function(e,n){return(100*n/e).toFixed(2)+"%"}},animation:(0,d.deepMix)({},sv.DEFAULT_ANIMATE_CFG)}},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype.draw=function(){var r=this,t=this.transpose,e=this.view.getScaleByField(this.field).values,n=this.view.geometries[0],a=n.getShapes(),o,u,f,m;t?a.forEach(function(x,w){u=e[w],w++>0&&r._drawTag(f,m,x,u),m=u,f=x}):a.forEach(function(x,w){m=e[w],w++>0&&r._drawTag(x,m,o,u),u=m,o=x})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._drawTag=function(r,t,e,n){var a=this.transpose,o=this.view.geometries[0].coordinate,u=Q2(r,o)[a?3:0],f=Q2(e,o)[a?0:3];this._drawTagArrow(u,f),this._drawTagValue(u,t,f,n)},i.prototype._drawTagArrow=function(r,t){var e=this.spacing,n=this,a=n.size,o=n.offset,u=n.animation,f=n.transpose,m=this.arrow.headSize,x=t.y-r.y,w=t.x-r.x,L;f?(w-m)/2<e?(e=Math.max(1,(w-m)/2),L=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e,t.y-o-a/2]]):L=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e-m,t.y-o-a],[t.x-e,t.y-o-a/2],[t.x-e-m,t.y-o]]:(x-m)/2<e?(e=Math.max(1,(x-m)/2),L=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a/2,t.y-e]]):L=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a,t.y-e-m],[t.x+o+a/2,t.y-e],[t.x+o,t.y-e-m]];var H=this.container.addShape("polygon",{name:"arrow",attrs:(0,Ft.__assign)((0,Ft.__assign)({},this.arrow.style),{points:L})});u!==!1&&this._fadeInTagShape(H)},i.prototype._drawTagValue=function(r,t,e,n){var a=this,o=a.size,u=a.offset,f=a.animation,m=a.transpose,x=this.value.formatter(t,n),w=this.container.addShape("text",{name:"value",attrs:(0,Ft.__assign)((0,Ft.__assign)({},this.value.style),{text:x,x:m?(r.x+e.x)/2:r.x+u+o/2,y:m?r.y-u-o/2:(r.y+e.y)/2,textAlign:"center",textBaseline:"middle"})});if(m){var L=e.x-r.x,H=w.getBBox().width;if(H>L){var W=H/x.length,et=Math.max(1,Math.ceil(L/W)-1),ht=x.slice(0,et)+"...";w.attr("text",ht)}}f!==!1&&this._fadeInTagShape(w)},i.prototype._fadeInTagShape=function(r){var t=this.animation,e=r.attr("opacity");r.attr("opacity",0);var n=(0,d.get)(t,"appear",sv.DEFAULT_ANIMATE_CFG.appear).duration;r.animate({opacity:e},n)},i}(),q2=PP;function IP(i){var r=i.getResponsiveTheme(),t=i.canvas;new rg({plot:i,responsiveTheme:r,dim:"x"}),new rg({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var OP=[],LP=[{name:"responsiveAxis",method:IP}],J2={preRender:OP,afterRender:LP},kP=function(i){var r=i.opacity||1;return{opacity:r*.5}},RP=function(i){var r=i.opacity||1;return{opacity:r*.5}},_x={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:kP,disable:RP,selected:{lineWidth:1,stroke:"black"}}};yf("bar",_x);function _d(i){var r=i.indexOf("#")===0?i.substr(1):i,t=[];return t.push(parseInt(r.substr(0,2),16)),t.push(parseInt(r.substr(2,2),16)),t.push(parseInt(r.substr(4,2),16)),t}function bx(i){var r;return r=Math.round(i),r=r.toString(16),r.length===1&&(r="0"+i),r}function DP(i){return"#"+(bx(i[0])+bx(i[1])+bx(i[2]))}function km(i,r){var t;return(0,d.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var Jy=function(i){var r=_d(i),t=r[0],e=r[1],n=r[2],a=(t*299+e*587+n*114)/1e3<128;return a},Sx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a=this.options,o=a.style,u=a.formatter,f=[].concat(t.getModel().mappingData),m=this.getValue(t);return(0,d.deepMix)({},o,(0,Ft.__assign)((0,Ft.__assign)({},this.getPosition(t)),{text:u?u(m,(n={},n[bm]=f[0]._origin,n.mappingDatum=f[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):m,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline()}))},r.prototype.adjustLabel=function(t,e){var n=this.options,a=n.adjustPosition,o=n.style;if(a){var u=this.getDefaultOffset(),f=t.getBBox(),m=this.getElementShapeBBox(e);if(m.width<=f.width){var x=m.maxX+this.options.offsetX+u;t.attr("x",x),t.attr("fill",o.fill)}}},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Ft.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.getValue=function(t){return(0,d.get)(t.getData(),this.layer.options.xField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,u=a.maxX,f=a.minY,m=a.height,x=a.width,w=this.options,L=w.offsetX,H=w.offsetY,W=w.position,et=f+m/2+H,ht=n<0?-1:1,bt;if(W==="left"){var xt=n>0?o:u;bt=xt+e*ht+L}else if(W==="right"){var xt=n>0?u:o;bt=xt+e*ht+L}else bt=o+x/2+L;return{x:bt,y:et}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="right"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=_d(n),u=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,f=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],m=km(f,u);return m}var x=this.options.style.fill;return x},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="right"&&o&&e!=="black"?null:void 0},r.prototype.getTextAlign=function(t){var e=this.getValue(t),n=this.options.position,a={right:"left",left:"left",middle:"center"},o={right:"right",left:"right",middle:"center"};return e<0?o[n]:a[n]},r.prototype.getTextBaseline=function(){return"middle"},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,d.each)(n.get("origin").points,function(H){a.push(e.coord.convertPoint(H))});var o=a.map(function(H){return H.x}),u=Math.min.apply(Math,o),f=Math.max.apply(Math,o),m=a.map(function(H){return H.y}),x=Math.min.apply(Math,m),w=Math.max.apply(Math,m),L=new ns(u,x,f-u,w-x);return L},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(H1),tS=Sx;Nf("bar",Sx);var eS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,u=a.maxX,f=a.minY,m=a.height,x=this.options,w=x.offsetX,L=x.offsetY,H=f+m/2+L,W=n<0?-1:1,et=n>0?u:o,ht=et+e*W+w;return{x:ht,y:H}},r.prototype.getTextAlign=function(t){var e=this.getValue(t);return e>0?"left":"right"},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,d.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),u=e.getElementShapeBBox(o);return u.height>=a.height})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],u=this.options,f=u.darkStyle,m=u.lightStyle,x=(0,d.groupBy)(e,function(w){return w.get(dh)[nu.FIELD_ORIGIN][o]});(0,d.each)(e,function(w){var L=x[w.get(dh)[nu.FIELD_ORIGIN][o]]||[],H=w.get("element"),W=H.shape,et=Jy(W.attr("fill")),ht=n.getElementShapeBBox(H),bt=ns.fromBBoxObject(w.getBBox());if(Yy(a,ht)<=0&&w.set("visible",!1),bt.width>ht.width){var xt=(0,d.findIndex)(L,function(ie){return ie===w});xt!==L.length-1&&w.set("visible",!1)}else{w.attr({x:ht.x+ht.width/2,textAlign:"center"});var qt=bt.width>ht.width||bt.height>ht.height;qt?w.attr({stroke:m==null?void 0:m.stroke}):w.attr({fill:et?m==null?void 0:m.fill:f==null?void 0:f.fill,fillOpacity:et?m==null?void 0:m.fillOpacity:f==null?void 0:f.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],u=[],f=[],m=(0,d.groupBy)(a,function(H){return H.get(dh)[nu.FIELD_ORIGIN][o]}),x=(0,d.uniq)((0,d.map)(a,function(H){return H.get(dh)[nu.FIELD_ORIGIN][o]})),w;for((0,d.size)(x)>0&&(w=x.shift(),(0,d.each)(m[w],function(H){return f.push(H)})),(0,d.size)(x)>0&&(w=x.pop(),(0,d.each)(m[w],function(H){return f.push(H)})),(0,d.each)(x.reverse(),function(H){(0,d.each)(m[H],function(W){return f.push(W)})});f.length>0;){var L=f.shift();L.get("visible")&&(Xy(L,n),Xg(L,u)?L.set("visible",!1):u.push(L))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,d.each)(t,function(o,u){u%a==0?n.push(o):o.set("visible",!1)}),n},r}(tS),BP=eS;Nf("bar-auto",eS);var FP={bar:"interval"},NP=Rc(FP);(0,d.assign)(Ns,NP);var zP={bar:"interval"},rS={interval:"bar"},nS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bar",t}return r.getDefaultOptions=function(){var t={xAxis:{visible:!0,line:{visible:!1},title:{visible:!0},label:{visible:!1},tickLine:{visible:!1},grid:{visible:!1},nice:!0},yAxis:{visible:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!0,position:"left",adjustColor:!0},legend:{visible:!1,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}};return(0,d.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this);var t=this.options;t.responsive&&t.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),t.responsive&&t.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new q2((0,Ft.__assign)({view:this.view,field:t.xField,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?zP[e]:rS[e]},r.prototype.processData=function(t){var e=t&&t.slice().reverse(),n=this.options.yField,a=[];return(0,d.each)(e,function(o){var u=(0,d.clone)(o);u[n]=u[n].toString(),a.push(u)}),a},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={type:"cat"},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),e[t.xField]={},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.axis=function(){var t=Dc("axis",{plot:this,dim:"x"}),e=Dc("axis",{plot:this,dim:"y"});t&&(t.position="left"),e&&(e.position="bottom");var n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.adjustBar=function(t){return null},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.yField,t.xField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,d.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustBar(e),this.bar=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.bar.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,N)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var u=$v(this.view,"interval");this.doRenderLabel(u,(0,Ft.__assign)({type:"bar",formatter:o.formatter&&function(f){return o.formatter(f)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.bar.tooltip.fields.push(this.options.colorField)))},r.prototype.applyResponsive=function(t){var e=this,n=J2[t];(0,d.each)(n,function(a){var o=a;o.method(e)})},r.prototype.getLabelOptionsByPosition=function(t){if(t==="middle")return{offset:0};if(t==="left")return{offset:7,style:{stroke:null,lineWidth:0}};if(t==="right")return{offset:4}},r}(_l),t1=nS;Es("bar",nS);var iS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="bar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=t1.getDefaultOptions,r}(Xo),Ex=iS;yf("stackedBar",_x);var aS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){if(this.options.adjustPosition){var n=t.getBBox(),a=this.getElementShapeBBox(e);a.maxX<=n.maxX&&t.set("visible",!1)}},r}(tS),GP=null;Nf("stacked-bar",aS);var UP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(BP),Ek=null;Nf("stacked-bar-auto",UP);var oS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},legend:{visible:!0,position:"top-left",offsetY:0}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustBar=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var u=$v(this.view,"interval");this.doRenderLabel(u,(0,Ft.__assign)({type:"stacked-bar",formatter:o.formatter&&function(f){return o.formatter(f)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(t1),Cx=oS;Es("stackedBar",oS);var VP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Cx.getDefaultOptions,r}(Xo),sS=VP;yf("groupedBar",_x);var uS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,grid:{visible:!0}},yAxis:{visible:!0,title:{visible:!1}},label:{visible:!0,position:"right",adjustColor:!0},legend:{visible:!0,position:"right-top",offsetY:0}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=(0,d.valuesOfKey)(this.options.data,this.options.groupField)||[];this.view.on("tooltip:change",function(e){var n=e.items,a=n===void 0?[]:n,o=(0,d.sortBy)(a.slice(),function(u){return t.indexOf(u.name)}).reverse();o.forEach(function(u,f){e.items[f]=u})})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.scale=function(){var t={};t[this.options.groupField]={values:(0,d.valuesOfKey)(this.options.data,this.options.groupField)},this.options.meta?this.options.meta=(0,d.deepMix)({},this.options.meta,t):this.options.meta=t,i.prototype.scale.call(this)},r.prototype.adjustBar=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(t1),lS=uS;Es("groupedBar",uS);var ZP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=lS.getDefaultOptions,r}(Xo),cS=ZP,Ax=function(i,r,t){var e=(0,d.groupBy)(i,r);e=(0,d.mapValues)(e,function(o){return(0,d.map)(o,function(u){return(0,d.map)(t,function(f){return u[f]})})}),e=(0,d.mapValues)(e,d.flatten),e=(0,d.mapValues)(e,function(o){return(0,d.map)(o,function(u){var f=Number.parseFloat(u);return!(0,d.isNumber)(f)||isNaN(f)?0:f})});var n=(0,d.mapValues)(e,function(o){return(0,d.reduce)(o,function(u,f){return u+f},0)}),a=(0,d.map)(i,function(o){var u=(0,Ft.__assign)((0,Ft.__assign)({},o),{_origin:o,total:n[o[r]]});return(0,d.each)(t,function(f){u[f]=o[f]/(n[o[r]]||1)}),u});return(0,d.each)((0,d.groupBy)(a,r),function(o){var u=0;(0,d.each)(o,function(f,m){(0,d.each)(t,function(x,w){(u+f[x]>=1||m===o.length-1&&w===t.length-1&&u>0)&&(f[x]=1-u),u+=f[x]})})}),a},fS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedBar",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},grid:{visible:!1},title:{visible:!0,formatter:function(t){return t+" (%)"}},label:{visible:!1,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField,o=i.prototype.processData.call(this,t);return Ax(o,a,[n])},r.prototype.scale=function(){var t={},e=this.options.xField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,d.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(Cx),hS=fS;Es("percentStackedBar",fS);var HP=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=hS.getDefaultOptions,r}(Xo),pS=HP,dS=8;function jP(i,r){var t;return(0,d.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var XP=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.options.leftStyle||(this.options.leftStyle=this.options.style),this.options.rightStyle||(this.options.rightStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.elements,n=t.coordinate;this.coord=n,(0,d.each)(e,function(a){var o=a.shape,u=r.getPosition(o),f=r.getValue(o),m=r.getTextAlign(),x=[];(0,d.each)(u,function(w,L){var H=L===0?r.options.leftStyle:r.options.rightStyle,W=r.getTextColor(o,L);r.options.position==="inner"&&r.options.adjustColor&&W!=="black"&&(H.stroke=null);var et=r.options.formatter,ht=et?et(f[L]):f[L],bt=r.container.addShape("text",{attrs:(0,d.deepMix)({},H,{x:w.x,y:w.y,text:ht,fill:W,textAlign:m[L],textBaseline:"middle"}),name:"label"});x.push(bt),r.doAnimation(bt)}),o.set("labelShapes",x),r.adjustPosition(x[0],x[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,d.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new ns(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:dS,offsetY:0,style:(0,d.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.maxX,a=t.minY,o=t.height,u=this.options,f=u.offsetX,m=u.offsetY,x=a+o/2+m,w,L;return this.options.position==="outer"?(w=e-f,L=n+f):(w=e+f,L=n-f),[{x:w,y:x},{x:L,y:x}]},i.prototype.getValue=function(r){var t=this.plot.options.xField;return r.get("origin").data[t]},i.prototype.getTextAlign=function(){return this.options.position==="outer"?["right","left"]:["left","right"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=_d(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,u=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],f=jP(u,o);return f}var m=t===0?this.options.leftStyle.fill:this.options.rightStyle.fill;return m},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.x[0],o=n.x[1],u=Math.abs(o-a),f=this.view.coordinateBBox,m=[r.getBBox(),t.getBBox()],x=r.attr("x"),w=t.attr("x");if(this.options.adjustPosition&&this.options.position==="inner"){var L=m[0].width+m[1].width,H=m[0].maxX-m[1].minX>2,W=L>u;(H||W)&&(x=a-this.options.offsetX,r.attr("fill",this.options.leftStyle.fill),r.attr("textAlign","right"),m[0]=r.getBBox(),w=o+this.options.offsetX,t.attr("fill",this.options.rightStyle.fill),t.attr("textAlign","left"),m[1]=t.getBBox())}m[0].minX<f.minX&&(x=f.minX+dS,r.attr("textAlign","left")),r.attr("x",x),t.attr("x",w),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),YP=XP,vS;function gS(i,r){var t=i.getBBox(),e=t.minX+t.width/2;i.setClip({type:"rect",attrs:{x:e,y:t.minY,width:0,height:t.height}});var n=i.get("clipShape");n.animate({width:t.width,x:t.minX},r.duration,r.easing,function(){i.setClip(null)},r.delay)}gS.animationName="clipInFromCenter";function WP(i){vS=i}function mS(i,r){var t=yS(i).attr("path"),e=(0,d.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function yS(i){var r=i.id,t;return(0,d.each)(vS,function(e){e.id===r&&(t=e)}),t}mS.animationName="updateFromCenter",ks("clipInFromCenter",gS),ks("updateFromCenter",mS);var xS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeBar",t}return r.getDefaultOptions=function(){return(0,d.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"},xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,d.each)(e,function(n){var a=n.elements;(0,d.each)(a,function(o){t.push(o.shape)})}),WP(t),i.prototype.afterRender.call(this)},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new YP((0,Ft.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.animation=function(){i.prototype.animation.call(this)},r}(t1),KP=xS;Es("rangeBar",xS);var $P=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="rangeBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=KP.getDefaultOptions,r}(Xo),_S=$P,Mx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(I2),QP=Mx;Nf("area-point",Mx);var bS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){i.prototype.layoutLabels.call(this,t,e),this.adjustAreaLabelsStyle(e)},r.prototype.adjustAreaLabelsStyle=function(t){var e=this.view,n=this.options,a=n.darkStyle,o=n.lightStyle,u=$v(e,"area"),f=CM(u).sort(function(m,x){return x.getBBox().height-m.getBBox().height});(0,d.each)(t,function(m){var x=m.getBBox(),w=KA(x.x,x.y,x.width,x.height),L=(0,d.map)(f,function(et){return{area:et,matches:(0,d.filter)(w,function(ht){return!!et.isHit(ht[0],ht[1])}).length}}).sort(function(et,ht){return et.matches-ht.matches});if((0,d.last)(L).matches>0){var H=(0,d.last)(L).area.attr("fill"),W=Jy(H);m.attr({fill:W?o==null?void 0:o.fill:a==null?void 0:a.fill,fillOpacity:W?o.fillOpacity:a.fillOpacity,stroke:W?o==null?void 0:o.stroke:a==null?void 0:a.stroke})}})},r}(NT),qP=bS;Nf("area-point-auto",bS);function JP(i){var r=i.getResponsiveTheme(),t=i.canvas;new rg({plot:i,responsiveTheme:r,dim:"x"}),new rg({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var tI=[],SS=[{name:"responsiveAxis",method:JP}],wS={preRender:tI,afterRender:SS},ES={area:"area",line:"line",point:"point"},CS=Rc(ES);(0,d.assign)(Ns,CS);var AS=function(i){var r=i.opacity||1;return{opacity:r}},Rm=function(i){var r=i.opacity||1;return{opacity:r*.5}},MS=function(i){var r=i.opacity||1;return{opacity:r}},TS=function(i){var r=i.opacity||1;return{opacity:r*.5}},PS=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},IS=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},eI=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},rI=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}},Tx={areaStyle:{normal:{},active:AS,disable:Rm,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:MS,disable:TS,selected:PS},pointStyle:{normal:{},active:IS,disable:rI,selected:eI},label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",fillOpacity:1,stroke:"#2c3542"}}};yf("area",Tx);var OS={area:"area",line:"line",point:"point"},LS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{smooth:!1,areaStyle:{opacity:.25},line:{visible:!0,size:2,style:{opacity:1,lineJoin:"round",lineCap:"round"}},point:{visible:!1,size:4,shape:"point"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return OS[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){return null},r.prototype.addGeometry=function(){var t=this.options,e=Yo("area","main",{plot:this});this.area=e,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.adjustArea(e),this.setConfig("geometry",e),this.addLine(),this.addPoint()},r.prototype.adjustArea=function(t){},r.prototype.adjustLine=function(t){},r.prototype.adjustPoint=function(t){},r.prototype.addLine=function(){var t=this.options,e=(0,d.deepMix)({},t.line);if(e.visible){var n=Yo("line","guide",{type:"line",plot:this,line:e});this.adjustLine(n),this.setConfig("geometry",n),this.line=n}},r.prototype.addPoint=function(){var t=this.options,e=(0,d.deepMix)({},t.point);if(e.visible){var n=Yo("point","guide",{plot:this});this.adjustPoint(n),this.setConfig("geometry",n),this.point=n}},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var u=$v(this.view,"area");this.doRenderLabel(u,(0,Ft.__assign)({type:"area-point",formatter:o.formatter&&function(f){return o.formatter(f)}},this.options.label))}},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area.animate=!1,this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.label=function(){},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.area.tooltip.fields.push(this.options.seriesField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,A)},r.prototype.applyResponsive=function(t){var e=this,n=wS[t];(0,d.each)(n,function(a){var o=a;o.method(e)})},r}(_l),Dm=LS;Es("area",LS);var kS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="area",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Dm.getDefaultOptions,r}(Xo),RS=kS,DS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getShapeInfo=function(t){var e=t.get("origin").points,n=e[e.length-1],a=t.attr("stroke"),o=this.plot.options.stackField,u=t.get("origin").data[0][o],f=(0,d.reduce)(n.y,function(m,x){return m+x},0)/(0,d.size)(n.y);return{x:n.x,y:f,color:a,name:u}},r}(L2),nI=DS,BS=12,e1=.01,iI=100,FS=12;function Ck(i){var r=-Infinity,t=Infinity,e=-Infinity;return(0,d.each)(i,function(n){t=Math.min(n.x,t),e=Math.max(n.x,e);var a=Math.abs(n.y[0]-n.y[1]);r=Math.max(r,a)}),{xRange:[t,e],maxHeight:r}}function aI(i,r,t){var e=r[0],n=r[r.length-1];(0,d.each)(r,function(o){if(o.x===i)return o.y[t];o.x<i&&o.x>e.x&&(e=o),o.x>i&&o.x<n.x&&(n=o)});var a=(i-e.x)/(n.x-e.x);return e.y[t]*(1-a)+n.y[t]*a}function Px(i,r){var t;for(t=0;t<i.length;t++){var e=i[t];if(e.x===r||e.x>r)break}return t}var Ix=function(){function i(r){this.destroyed=!1,this.scaleFactor=[],this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.plot.options.stackField,e=this.getGeometry().dataArray,n=[];(0,d.each)(e,function(o,u){var f=r.drawLabel(o,u);f&&(n.push((0,d.deepMix)({},o[0],f)),r.scaleFactor.push(f.scaleFactor))});var a=[];(0,d.each)(n,function(o,u){var f=r.options,m=f.style,x=f.offsetX,w=f.offsetY,L=r.getFontSize(u),H=r.options.formatter,W=H?H(o._origin[t]):o._origin[t],et=r.container.addShape("text",{attrs:(0,d.deepMix)({},{x:o.x+x,y:o.y+w,text:W,fill:o.color,fontSize:L,textAlign:"center",textBaseline:"top"},m),name:"label"});a.push(et)}),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,d.clone)(r.label.style);return t.stroke=null,delete t.fill,{offsetX:0,offsetY:0,style:t,autoScale:!0}},i.prototype.drawLabel=function(r,t){var e=Ck(r),n=e.xRange,a=e.maxHeight,o=n[1]-n[0],u=this.getInterpolatedPoints(n[0],o,r),f=this.getLabelBbox(t),m={xRange:n,aspect:f.width/f.height,data:u,justTest:!0},x=this.bisection(FS,a,this.testFit,m,e1,iI);if(x!==null){m.justTest=!1;var w=this.testFit(m);return w.x=w.x,w.y=w.y0+(w.y1-w.y0)/2,w.scaleFactor=x/f.height*.2,w}},i.prototype.getInterpolatedPoints=function(r,t,e){for(var n=[],a=2,o=r;o<t;o+=a){var u=aI(o,e,0),f=aI(o,e,1);n.push({x:o,y:[u,f]})}return n},i.prototype.bisection=function(r,t,e,n,a,o){for(var u=0;u<o;u++){var f=(r+t)/2,m=n;m.height=f,m.width=f*m.aspect;var x=e(m),w=(t-r)/2<a;if(x&&w)return f;x?r=f:t=f}return null},i.prototype.testFit=function(r){for(var t=r.xRange,e=r.width,n=r.height,a=r.data,o=r.justTest,u=0;u<a.length;u++){var f=a[u],m=f.x,x=m+e;if(x>t[1])break;for(var w=Px(a,x),L=-Infinity,H=null,W=Infinity,et=u;et<w;et++){var ht=a[et].y[1],bt=a[et].y[0];if(bt<W&&(W=bt),ht>L&&(L=ht,H=bt),W-L<n)break}if(W-L>=n)return o?!0:{x:m,y0:L,y1:H,width:e,height:n}}return!1},i.prototype.getLabelBbox=function(r){var t=(0,d.clone)(this.plot.theme.label.textStyle);t.fontSize=BS;var e=this.container.addShape("text",{attrs:(0,Ft.__assign)({text:r,x:0,y:0},t)}),n=e.getBBox();return e.remove(),n},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="area"})},i.prototype.getFontSize=function(r){if(this.options.autoScale){var t=this.scaleFactor[r];return BS*t}return BS},i}(),Ox=Ix,NS={lineLabel:{Ctr:nI},areaLabel:{Ctr:Ox}};function r1(i,r,t){if(i.options[r]&&i.options[r].visible){var e=NS[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var Lx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(QP),PB=null;Nf("stackedArea-point",Lx);var Ak=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.sortLabels=function(t,e){var n=[];return e.length>0&&n.push(e.shift()),e.length>0&&n.push(e.pop()),n.push.apply(n,e),n},r}(qP),Mk=null;Nf("stackedArea-point-auto",Ak),yf("stackedArea",Tx);var zS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.plotComponents=[],t.type="stackedArea",t.baseType="area",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!1,type:"area"}})},r.prototype.beforeInit=function(){var t=(0,d.get)(this.options,["label","visible"]),e=(0,d.get)(this.options,["label","type"]),n=this.options;t&&(e==="line"&&(n.lineLabel=this.options.label),e==="area"&&(n.areaLabel=this.options.label)),i.prototype.beforeInit.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.label=function(){var t=this.options,e=t.label;if(e&&e.visible===!1){this.line&&(this.line.label=!1),this.point&&(this.point.label=!1),this.area.label=!1;return}},r.prototype.adjustArea=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustLine=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustPoint=function(t){t.adjust=[{type:"stack"}]},r.prototype.afterRender=function(){this.renderPlotComponents(),this.options.responsive=!1,i.prototype.afterRender.call(this)},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r.prototype.renderPlotComponents=function(){var t=this,e=["areaLabel","lineLabel"];(0,d.each)(e,function(n){var a=(0,Ft.__assign)({view:t.view,plot:t},t.options[n]),o=r1(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(Dm),gh=zS;Es("stackedArea",zS);var n1=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=gh.getDefaultOptions,r}(Xo),kx=n1,i1=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedArea",t.baseType="stackedArea",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{visible:!0,label:{visible:!0,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Ax(t,n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[this.options.yField]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,d.deepMix)({},t,this.options.meta),i.prototype.scale.call(this)},r}(gh),oI=i1;Es("percentStackedArea",i1);var sI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=oI.getDefaultOptions,r}(Xo),GS=sI;function US(i){var r=i.getResponsiveTheme(),t=i.canvas;new rg({plot:i,responsiveTheme:r,dim:"x"}),new rg({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var VS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,d.get)(this.plot.options,["label","position"],"inner")},r}(T2);function a1(i){var r=i.getResponsiveTheme();new VS({plot:i,responsiveTheme:r})}var r0=[],uI=[{name:"responsiveAxis",method:US},{name:"responsiveLabel",method:a1}],Tk={preRender:r0,afterRender:uI},ZS={label:{top:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodeJitterUpward"},{name:"nodesResamplingByState",option:{keep:["min","max","median"]}},{name:"textHide"}]}}}};Zb("column",ZS);var Bm=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a,o=this.options,u=o.style,f=o.formatter,m=[].concat(t.getModel().mappingData),x=this.getValue(t);return(0,d.deepMix)({},u,(0,Ft.__assign)((0,Ft.__assign)({},this.getPosition(t)),{text:f?f(x,(n={},n[bm]=(a=m[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=m[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):x,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseLine()}))},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Ft.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=this.getDefaultOffset(),o=t.getBBox(),u=this.getElementShapeBBox(e);if(u.height<=o.height){var f=u.minY+this.options.offsetY-a;t.attr("y",f),t.attr("textBaseline","bottom"),t.attr("fill",this.options.style.fill)}}},r.prototype.getValue=function(t){return(0,d.get)(t.getData(),this.layer.options.yField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,u=a.minY,f=a.maxY,m=a.height,x=a.width,w=this.options,L=w.offsetX,H=w.offsetY,W=w.position,et=o+x/2+L,ht=n>0?-1:1,bt;if(W==="top"){var xt=n>0?u:f;bt=xt+e*ht+H}else if(W==="bottom"){var xt=n>0?f:u;bt=xt+e*ht+H}else bt=u+m/2+H;return{x:et,y:bt}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="top"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=_d(n),u=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,f=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],m=km(f,u);return m}var x=this.options.style.fill;return x},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="top"&&o&&e!=="black"?null:void 0},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,d.each)(n.get("origin").points,function(H){a.push(e.coord.convertPoint(H))});var o=a.map(function(H){return H.x}),u=Math.min.apply(Math,o),f=Math.max.apply(Math,o),m=a.map(function(H){return H.y}),x=Math.min.apply(Math,m),w=Math.max.apply(Math,m),L=new ns(u,x,f-u,w-x);return L},r.prototype.getTextAlign=function(){return"center"},r.prototype.getTextBaseLine=function(){return"middle"},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(H1),fv=Bm;Nf("column",Bm);var hv=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,u=a.minY,f=a.maxY,m=a.width,x=this.options,w=x.offsetX,L=x.offsetY,H=o+m/2+w,W=n>0?-1:1,et=n>0?u:f,ht=et+e*W+L;return{x:H,y:ht}},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,d.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),u=e.getElementShapeBBox(o);return u.width>=a.width})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],u=this.options,f=u.darkStyle,m=u.lightStyle,x=(0,d.groupBy)(e,function(w){return w.get(dh)[nu.FIELD_ORIGIN][o]});(0,d.each)(e,function(w){var L=x[w.get(dh)[nu.FIELD_ORIGIN][o]]||[],H=w.get("element"),W=H.shape,et=Jy(W.attr("fill")),ht=n.getElementShapeBBox(H),bt=ns.fromBBoxObject(w.getBBox());if(Yy(a,ht)<=0&&w.set("visible",!1),bt.height>ht.height){var xt=(0,d.findIndex)(L,function(ie){return ie===w});xt!==0&&w.set("visible",!1)}else{w.attr({y:ht.y+ht.height/2,textBaseline:"middle"});var qt=bt.width>ht.width||bt.height>ht.height;qt?w.attr({stroke:m==null?void 0:m.stroke}):w.attr({fill:et?m==null?void 0:m.fill:f==null?void 0:f.fill,fillOpacity:et?m==null?void 0:m.fillOpacity:f==null?void 0:f.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],u=[],f=[],m=(0,d.groupBy)(a,function(H){return H.get(dh)[nu.FIELD_ORIGIN][o]}),x=(0,d.uniq)((0,d.map)(a,function(H){return H.get(dh)[nu.FIELD_ORIGIN][o]})),w;for((0,d.size)(x)>0&&(w=x.shift(),(0,d.each)(m[w],function(H){return f.push(H)})),(0,d.size)(x)>0&&(w=x.pop(),(0,d.each)(m[w],function(H){return f.push(H)})),(0,d.each)(x.reverse(),function(H){(0,d.each)(m[H],function(W){return f.push(W)})});f.length>0;){var L=f.shift();L.get("visible")&&(Xy(L,n),Xg(L,u)?L.set("visible",!1):u.push(L))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,d.each)(t,function(o,u){u%a==0?n.push(o):o.set("visible",!1)}),n},r}(fv),Pk=hv;Nf("column-auto",hv);var HS={column:"interval"},o1=Rc(HS);(0,d.assign)(Ns,o1);var jS=function(i){var r=i.opacity||1;return{opacity:r*.5}},XS=function(i){var r=i.opacity||1;return{opacity:r*.5,fillOpacity:r*.5}},YS={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:jS,disable:XS,selected:{lineWidth:1,stroke:"black"}}};yf("column",YS);var lI={column:"interval"},cI={interval:"column"},WS=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="column",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},title:{visible:!0}},yAxis:{nice:!0,title:{visible:!0},label:{visible:!0},grid:{visible:!0}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!1,position:"top",adjustColor:!0},legend:{visible:!0,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new q2((0,Ft.__assign)({view:this.view,field:t.yField,transpose:!0,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?lI[e]:cI[e]},r.prototype.processData=function(t){var e=this.options.xField,n=[];return(0,d.each)(t,function(a){var o=(0,d.clone)(a);o[e]=o[e].toString(),n.push(o)}),n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.adjustColumn=function(t){},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.xField,t.yField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,d.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustColumn(e),this.column=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.column.tooltip.fields.push(this.options.colorField)))},r.prototype.animation=function(){i.prototype.animation.call(this),this.options.animation===!1&&(this.column.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,D)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n==null?void 0:n.visible){var u=$v(this.view,"interval");this.doRenderLabel(u,(0,Ft.__assign)({type:"column",formatter:o.formatter&&function(f){return o.formatter(f)}},this.options.label))}},r.prototype.applyResponsive=function(t){var e=this,n=Tk[t];(0,d.each)(n,function(a){var o=a;o.method(e)})},r}(_l),j0=WS;Es("column",WS);var Rx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="column",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=j0.getDefaultOptions,r}(Xo),Dx=Rx;yf("groupedColumn",YS);var Yh=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.baseType="column",t.type="groupedColumn",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{title:{visible:!0}}})},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme("column")},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.addGeometry=function(){i.prototype.addGeometry.call(this)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(j0),Fm=Yh;Es("groupedColumn",Yh);var KS=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Fm.getDefaultOptions,r}(Xo),$S=KS;function QS(i,r){var t=[],e=i.get("origin").points;return(0,d.each)(e,function(n){t.push(r.convertPoint(n))}),t}function s1(){return{areaStyle:{opacity:.2},lineStyle:{lineWidth:2,opacity:.1}}}var Bx=function(){function i(r){this.areas=[],this.lines=[],this._areaStyle={},this._lineStyle={},(0,d.assign)(this,r),this._init()}return i.prototype.draw=function(){var r=this,t=this._getGroupedShapes();(0,d.each)(t,function(e,n){e.length>0&&r._drawConnection(e,n)}),this.triggerOn?this._addInteraction():this.animation&&this._initialAnimation()},i.prototype.clear=function(){this.container&&this.container.clear(),this.areas=[],this.lines=[]},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.setState=function(r,t){r==="active"&&this._onActive(t),r==="disabled"&&this._onDisabled(t),r==="selected"&&this._onSelected(t)},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype._getGroupedShapes=function(){var r=this,t=this.view.getScaleByField(this.field).values,e=this.view.geometries[0],n=e.getShapes(),a={};return(0,d.each)(t,function(o){a[o]=[]}),(0,d.each)(n,function(o){var u=o.get("origin").data,f=u[r.field];a[f].push(o)}),a},i.prototype._drawConnection=function(r,t){var e=r[0].attr("fill");this._areaStyle[t]=this._getShapeStyle(e,"area"),this._lineStyle[t]=this._getShapeStyle(e,"line");for(var n=this.view.geometries[0].coordinate,a=0;a<r.length-1;a++){var o=QS(r[a],n),u=QS(r[a+1],n),f=(0,d.mix)({},this._areaStyle[t]),m=(0,d.mix)({},this._lineStyle[t]);this.triggerOn&&(f.opacity=0,m.opacity=0);var x=this.container.addShape("path",{attrs:(0,d.mix)({},f,{path:[["M",o[2].x,o[2].y],["L",u[1].x,u[1].y],["L",u[0].x,u[0].y],["L",o[3].x,o[3].y]]}),name:"connectedArea"}),w=this.container.addShape("path",{attrs:(0,d.mix)({},m,{path:[["M",o[2].x,o[2].y],["L",u[1].x,u[1].y]]}),name:"connectedArea"}),L=r[a].get("origin").data;x.set("data",L),w.set("data",L),this.areas.push(x),this.lines.push(w)}},i.prototype._getShapeStyle=function(r,t){var e=t+"Style";if(this[e])return this[e];var n=s1()[e],a={fill:r};return t==="line"&&(a={stroke:r}),(0,d.mix)(n,a)},i.prototype._addInteraction=function(){var r=this,t=this.triggerOn;this.view.on("interval:"+t,function(e){var n=e.target.get("origin").data[r.field];r.setState("active",{name:r.field,exp:n}),r.setState("disabled",{name:r.field,exp:function(a){return a!==n}}),r.view.canvas.draw()}),this.view.on("mousemove",function(e){e.gEvent.target.get("name")!=="interval"&&r.setState("disabled",{name:r.field,exp:function(){return!0}})})},i.prototype._initialAnimation=function(){var r=this.view.coordinateBBox,t=r.x,e=r.y,n=r.width,a=r.height;this.container.setClip({type:"rect",attrs:{x:t,y:e,width:0,height:a}}),this.container.set("animating",!0),this.container.getClip().animate({width:n},600,"easeQuadOut",function(){},400)},i.prototype._onActive=function(r){var t=this;(0,d.each)(this.areas,function(e){var n=e.get("data"),a=n[t.field];if(uv(n,r)){var o=t._areaStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}}),(0,d.each)(this.lines,function(e){var n=e.get("data"),a=n[t.field];if(uv(n,r)){var o=t._lineStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}})},i.prototype._onDisabled=function(r){(0,d.each)(this.areas,function(t){var e=t.get("data");uv(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))}),(0,d.each)(this.lines,function(t){var e=t.get("data");uv(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))})},i.prototype._onSelected=function(r){this._onActive(r)},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),qS=Bx;yf("stackedColumn",YS);var fI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=t.getBBox(),o=this.getElementShapeBBox(e);(o.height<a.height||o.width<a.width)&&t.hide()}},r}(fv),Fx=null;Nf("stacked-column",fI);var Nx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(Pk),Ik=null;Nf("stacked-column-auto",Nx);var Nm=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedColumn",t.baseType="column",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0,position:"right-top"},label:{visible:!1,position:"middle",offset:0,adjustColor:!0},connectedArea:{visible:!1,triggerOn:"mouseenter"}})},r.prototype.init=function(){this.options.connectedArea.visible&&(this.options.tooltip.crosshairs=null),i.prototype.init.call(this)},r.prototype.afterRender=function(){var t=this.options;t.connectedArea.visible&&(this.connectedArea=new qS((0,Ft.__assign)({view:this.view,field:t.stackField,animation:t.animation!==!1},t.connectedArea))),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n&&n.visible){var u=$v(this.view,"interval");this.doRenderLabel(u,(0,Ft.__assign)({type:"stacked-column",formatter:o.formatter&&function(f){return o.formatter(f)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(j0),pv=Nm;Es("stackedColumn",Nm);var hI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=pv.getDefaultOptions,r}(Xo),JS=hI,zx=8;function pI(i,r){var t;return(0,d.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var tw=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.options.topStyle||(this.options.topStyle=this.options.style),this.options.bottomStyle||(this.options.bottomStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.coordinate,n=t.elements;this.coord=e,(0,d.each)(n,function(a){var o=a.shape,u=r.getPosition(o),f=r.getValue(o),m=r.getTextBaseline(),x=[];(0,d.each)(u,function(w,L){var H=L===1?r.options.topStyle:r.options.bottomStyle,W=r.getTextColor(o,L);r.options.position==="inner"&&r.options.adjustColor&&W!=="black"&&(H.stroke=null);var et=r.options.formatter,ht=et?et(f[L]):f[L],bt=r.container.addShape("text",{attrs:(0,d.deepMix)({},H,{x:w.x,y:w.y,text:ht,fill:W,textAlign:"center",textBaseline:m[L]}),name:"label"});x.push(bt),r.doAnimation(bt)}),o.set("labelShapes",x),r.adjustPosition(x[0],x[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,d.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new ns(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:0,offsetY:zx,style:(0,d.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.minY,a=t.maxY,o=t.width,u=this.options.offsetY,f=e+o/2,m,x;return this.options.position==="outer"?(m=n-u,x=a+u):(m=n+u,x=a-u),[{x:f,y:x},{x:f,y:m}]},i.prototype.getValue=function(r){var t=this.plot.options.yField;return r.get("origin").data[t]},i.prototype.getTextBaseline=function(){return this.options.position==="outer"?["top","bottom"]:["bottom","top"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=_d(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,u=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],f=pI(u,o);return f}var m=t===1?this.options.topStyle.fill:this.options.bottomStyle.fill;return m},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.y[1],o=n.y[0],u=e.getBBox(),f=u.height,m=f,x=this.view.coordinateBBox,w=[r.getBBox(),t.getBBox()],L=r.attr("y"),H=t.attr("y");if(this.options.adjustPosition&&this.options.position==="inner"){var W=w[0].height+w[1].height,et=w[1].maxY-w[0].minY>2,ht=W>m;(et||ht)&&(H=a-this.options.offsetY,t.attr("fill",this.options.topStyle.fill),t.attr("textBaseline","bottom"),L=o+this.options.offsetY,r.attr("fill",this.options.bottomStyle.fill),r.attr("textBaseline","top"),w[0]=r.getBBox(),w[1]=t.getBBox())}w[0].maxY>x.maxY-zx&&(L=x.maxY-zx/2,r.attr("textBaseline","bottom")),r.attr("y",L),t.attr("y",H),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),dI=tw,Gx;function Ux(i,r){var t=i.getBBox(),e=t.minY+t.height/2;i.setClip({type:"rect",attrs:{x:t.minX,y:e,width:t.width,height:0}});var n=i.get("clipShape");n.animate({height:t.height,y:t.minY},r.duration,r.easing,function(){i.setClip(null)},r.delay)}Ux.animationName="clipInFromCenterVertical";function ew(i){Gx=i}function Vx(i,r){var t=rw(i).attr("path"),e=(0,d.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function rw(i){var r=i.id,t;return(0,d.each)(Gx,function(e){e.id===r&&(t=e)}),t}Vx.animationName="updateFromCenterVertical",ks("clipInFromCenterVertical",Ux),ks("updateFromCenterVertical",Vx);var nw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeColumn",t}return r.getDefaultOptions=function(){return(0,d.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,d.each)(e,function(n){var a=n.elements;(0,d.each)(a,function(o){t.push(o.shape)})}),ew(t),i.prototype.afterRender.call(this)},r.prototype.animation=function(){i.prototype.animation.call(this),this.column.animate={appear:{animation:"clipInFromCenterVertical",duration:600},update:{animation:"updateFromCenterVertical",duration:600}}},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new dI((0,Ft.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r}(j0),u1=nw;Es("rangeColumn",nw);var Zx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="rangeColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=u1.getDefaultOptions,r}(Xo),Hx=Zx,iw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedColumn",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!0,position:"middle",offset:0},yAxis:{visible:!0,tick:{visible:!1},grid:{visible:!1},title:{visible:!0},label:{visible:!1}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Ax(t||[],n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,d.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(pv),aw=iw;Es("percentStackedColumn",iw);var vI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=aw.getDefaultOptions,r}(Xo),ow=vI,l1={pie:"interval"},sw=Rc(l1);(0,d.assign)(Ns,sw);function zm(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}function gI(i){return{x:i.x+i.width/2,y:i.y+i.height/2}}function uw(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function lw(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e&&i.x<r.x&&(e=-e),n&&i.y<r.y&&(n=-n),i.x===r.x&&i.width===r.width&&(e=r.width),i.y===r.y&&i.height===r.height&&(n=r.height),{xOverlap:e,yOverlap:n}}function Ok(i,r){return i.x<r.x&&i.x+i.width>r.x+r.width&&i.y<r.y&&i.y+i.height>r.y+r.height}var mI=function(i,r,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[i,r].includes(Infinity)?Math.abs(i)===Math.abs(r):Math.abs(i-r)<t};function yI(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function xI(i){var r=Math.PI/2,t=i;return(t>r||t<-r)&&(t=t+Math.PI),t}var Lk=4;function cw(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}function _I(i,r){var t=i.getBBox();r.y<=t.y&&r.y+r.height>=t.y+t.height||i.get("parent").set("visible",!1)}var fw=function(){function i(r,t){this.destroyed=!1,this.plot=r,this.coordinateBBox=this.plot.view.coordinateBBox;var e=(0,d.deepMix)(this.getDefaultOptions(),t,{});this.adjustOption(e),this.options=e,this.init()}return i.prototype.adjustOverlap=function(r,t){for(var e=1;e<r.length;e++)for(var n=r[e],a=0,o=e-1;o>=0;o--){var u=r[o],f=u.getBBox(),m=n.getBBox();if(u.get("parent").get("visible")&&(a=uw(f,m),!mI(a,0))){n.get("parent").set("visible",!1);break}}r.forEach(function(x){return _I(x,t)})},i.prototype.adjustItem=function(r){},i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.plot.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){this.clear(),this.initArcPoints(),this.drawTexts(),this.drawLines()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getFilteredSum=function(){var r=this.plot.options.angleField,t=this.plot.view.filteredData||[];return t.reduce(function(e,n){return e+n[r]},0)},i.prototype.drawTexts=function(){var r=this,t=this.options,e=t.style,n=t.formatter,a=t.autoRotate,o=t.offsetX,u=t.offsetY,f=t.adjustPosition,m=t.allowOverlap,x=this.getItems(),w=[];x.map(function(L,H){var W=(0,d.deepMix)({},L,e),et=r.getFilteredSum(),ht=r.plot.options.angleField,bt=L.origin[ht]/et,xt=n?n(L.name,{_origin:L.origin,percent:bt},H):L.name,qt=r.container.addGroup({name:"itemGroup",index:H,capture:!1}),ie=qt.addShape("text",{attrs:(0,d.deepMix)({},W,{x:L.x+o,y:L.y+u,text:xt})});ie.set("id","text-"+L.name+"-"+H),w.push(ie)}),w.forEach(function(L){var H=r.coordinateBBox;r.adjustText(L,H)}),f&&this.layout(w,x,this.coordinateBBox),m||this.adjustOverlap(w,this.coordinateBBox),w.forEach(function(L,H){a&&r.rotateLabel(L,xI(x[H].angle))})},i.prototype.adjustText=function(r,t){var e=r.getBBox(),n=e.width,a=0;if(e.maxX>t.maxX?n=t.maxX-e.minX:e.minX<t.minX&&(n=e.maxX-t.minX),r.attr("textAlign")==="left"?r.attr("x",Math.max(e.x-a,0)):r.attr("textAlign")==="right"&&r.attr("x",Math.max(e.maxX-a,0)),n!==e.width){var o={};["fontSize","fontFamily","fontWeight"].forEach(function(f){o[f]=r.attr(f)});var u=r.attr("text").split(`
`).map(function(f){return Kp(f,n,o)});r.attr("text",u.join(`
`))}},i.prototype.drawLines=function(){var r=this;if(this.options.line.visible){var t=this.container.get("children"),e=this.getCoordinate().center;t.forEach(function(n,a){var o=n.get("children")[0],u=r.arcPoints[a],f=u.x<e.x,m=r.options.offset>4?4:0,x=r.getLinePath(o,u,m),w=r.options.line;n.addShape("path",{attrs:(0,Ft.__assign)({path:x,stroke:u.color},w)}),o.attr("x",o.attr("x")+(f?-m:m))})}},i.prototype.getLinePath=function(r,t,e){var n=this.options.line?this.options.line.smooth:!1,a=t.angle,o=this.getCoordinate(),u=o.center,f=o.radius,m=zm(u,a,f+e);e<4&&(m=t);var x=t.x<u.x,w=r.getBBox(),L={x:x?w.maxX:w.minX,y:w.y+w.height/2},H=["C",L.x+(x?1:-1)*(e<4?e/2:4),L.y,2*m.x-t.x,2*m.y-t.y,m.x,m.y],W=["L",m.x,m.y],et=n?H:W,ht=["M",L.x,L.y].concat(et).concat("L",t.x,t.y);return ht.join(",")},i.prototype.getGeometry=function(){return this.plot.view.geometries[0]},i.prototype.getCoordinate=function(){var r=this.getGeometry().coordinate,t=r.getCenter(),e=r.getRadius(),n=r.startAngle;return{center:t,radius:e,startAngle:n}},i.prototype.adjustOption=function(r){var t=r.offset,e=this.getCoordinate().radius;(0,d.isString)(t)&&(t=e*cw(t)),r.offset=t},i.prototype.rotateLabel=function(r,t){var e=r.attr("x"),n=r.attr("y"),a=Wi.transform(r.getMatrix(),[["t",-e,-n],["r",t],["t",e,n]]);r.setMatrix(a)},i.prototype.getItems=function(){var r=this,t=this.options.offset,e=this.getCoordinate(),n=e.center,a=e.radius,o=this.arcPoints.map(function(u){var f=zm(n,u.angle,a+t),m=(0,Ft.__assign)((0,Ft.__assign)({},u),f);return r.adjustItem(m),m});return o},i.prototype.initArcPoints=function(){var r=this,t=this.plot.options.angleField,e=this.getGeometry().elements,n=this.getCoordinate(),a=n.center,o=n.radius,u=this.getCoordinate().startAngle,f=this.getGeometry().attributes.position.scales,m=f[1],x=m.field,w=e.map(function(L){var H=L.shape.get("origin"),W=H.color,et=H.data[0]||H.data,ht=u+Math.PI*2*m.scale(et[x]),bt=(u+ht)/2,xt=zm(a,bt,o);u=ht;var qt=m.getText(et[t]),ie=xt.x>a.x?"left":"right";return{x:xt.x,y:xt.y,color:W,name:qt,origin:et,angle:yI(r.getGeometry().coordinate,xt),textAlign:ie}});this.arcPoints=w},i}(),c1=fw;function bI(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}var SI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset>0&&(t.offset=0)},r.prototype.adjustItem=function(t){t.textAlign="middle"},r.prototype.drawLines=function(){},r.prototype.layout=function(t,e){var n=this;t.forEach(function(a,o){o>0&&(0,d.each)(t.slice(0,o),function(u){n.resolveCollision(a,u,e[o])})})},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:"-30%",style:(0,Ft.__assign)((0,Ft.__assign)({},e),{textAlign:"center",textBaseline:"middle"})}},r.prototype.resolveCollision=function(t,e,n){var a=this.getCoordinate().center,o=n.angle,u=t.getBBox(),f=e.getBBox(),m={x:(u.minX+u.maxX)/2,y:(u.minY+u.maxY)/2},x=(0,d.clone)(m),w=(0,d.clone)(m);if(e.get("id")!==t.get("id")){var L=lw(u,f),H=L.xOverlap,W=L.yOverlap;if(H&&(x.x=m.x+H,x.y=m.y+Math.tan(o)*H),W){var et=W;m.y<a.y?et=et<0?et:f.minY-u.maxY:et=et>0?et:f.maxY-u.minY,w.y=m.y+et,w.x=m.x+et/Math.tan(o)}var ht=_b(m,x),bt=_b(m,w),xt=ht<bt?x:w;t.attr("x",xt.x),t.attr("y",xt.y)}},r}(c1),wI=SI,EI=16,CI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Ft.__assign)((0,Ft.__assign)({},e),{textBaseline:"middle"})}},r.prototype.layout=function(t,e,n){var a=this,o=this.getCoordinate().center,u=(0,d.filter)(t,function(m){return m.attr("x")<=o.x}),f=(0,d.filter)(t,function(m){return m.attr("x")>o.x});[f,u].forEach(function(m,x){a._antiCollision(m,!x,n)})},r.prototype._antiCollision=function(t,e,n){var a=this,o=this.getLabelHeight(t),u=this.getCoordinate(),f=u.center,m=u.radius,x=this.options.offset,w=m+x,L=Math.min(n.height,Math.max(w*2+o*2,t.length*o)),H=Math.floor(L/o);this.options.allowOverlap||t.slice(H).forEach(function(qe){qe.get("parent").set("visible",!1)}),t.splice(H,t.length-H),t.sort(function(qe,wr){return qe.getBBox().y-wr.getBBox().y});for(var W=!0,et,ht=f.y+L/2,bt=f.y-L/2,xt=t.map(function(qe){var wr=qe.getBBox();return wr.maxY>ht&&(ht=Math.min(n.maxY,wr.maxY)),wr.minY<bt&&(bt=Math.max(n.minY,wr.minY)),{text:qe.attr("text"),size:o,pos:wr.y,targets:[]}}),qt=0;qt<xt.length;)qt===xt.length-1?xt[qt].targets[0]=ht:xt[qt].targets[0]=xt[qt+1].pos-xt[qt+1].size/2,qt++;for(;W;)for(xt.forEach(function(qe){var wr=(0,d.last)(qe.targets);qe.pos=Math.max(bt,Math.min(qe.pos,wr-qe.size))}),W=!1,et=xt.length;et--;)if(et>0){var ie=xt[et-1],_e=xt[et];if(ie.pos+ie.size>_e.pos){ie.size+=_e.size,ie.targets=ie.targets.concat(_e.targets);var ze=(0,d.last)(ie.targets);ie.pos+ie.size>ze&&(ie.pos=ze-ie.size),xt.splice(et,1),W=!0}else ie.targets.splice(-1,1,_e.pos)}et=0,xt.forEach(function(qe){var wr=o/2;qe.targets.forEach(function(){t[et].attr("y",qe.pos+wr),wr+=o,et++})});var rr=[],sr=[];t.forEach(function(qe,wr){var Vr=a.arcPoints[wr];Vr.angle>=0&&Vr.angle<=Math.PI?sr.push(qe):rr.push(qe)}),[rr,sr].forEach(function(qe,wr){if(!!qe.length){var Vr=wr?(0,d.last)(qe).getBBox().maxY-f.y:f.y-(0,d.head)(qe).getBBox().minY;Vr=Math.max(w,Vr);var Br=x>4?4:0,Tn=Math.max.apply(0,(0,d.map)(t,function(Ti){return Ti.getBBox().width}))+x+Br,Hn=Math.max(w,Math.min((Vr+w)/2,f.x-(n.minX+Tn))),Un=Hn*Hn,Ei=Vr*Vr;qe.forEach(function(Ti,Li){var _i=a.arcPoints[Li],bi=Ti.getBBox(),Ba={x:bi.minX+bi.width/2,y:bi.minY+bi.height/2},La=Math.pow(Ba.y-f.y,2),Ha=zm(f,_i.angle,m),Ri=(e?1:-1)*Br*2;if(La>Ei)console.warn("\u5F02\u5E38(\u4E00\u822C\u4E0D\u4F1A\u51FA\u73B0)",Ti.attr("text")),Ti.attr("x",Ha.x+Ri);else{var Na=f.x+(e?1:-1)*Math.sqrt((1-La/Ei)*Un);(f.x===Ha.x&&Ba.y===Ha.y||f.y===Ha.y&&Na===Ha.x)&&(Na=Ha.x),Ti.attr("x",Na+Ri)}})}})},r.prototype.getLabelHeight=function(t){return this.options.labelHeight?this.options.labelHeight:(0,d.head)(t)?(0,d.head)(t).getBBox().height:14},r}(c1),AI=CI,kk=16,jx=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Ft.__assign)((0,Ft.__assign)({},e),{textBaseline:"middle"})}},r.prototype.adjustItem=function(t){var e=this.options.offset;t.textAlign==="left"?t.x+=e>4?4:e/2:t.textAlign==="right"&&(t.x-=e>4?4:e/2)},r.prototype.layout=function(t,e,n){},r}(c1),Rk=jx,Xx={inner:wI,outer:AI,"outer-center":Rk};function hw(i){if(!Xx[i]){console.warn("this label "+i+" is not registered");return}return Xx[i]}var pw=0,Gm=15,Yx="#CCC",Gf=2,Wx=-2,n0=15;function MI(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}var dw=function(){function i(r){this.destroyed=!1,this.view=r.view,this.options=(0,d.deepMix)({},this.getDefaultOptions(),r),this._adjustOptions(this.options),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear()})},i.prototype.render=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,d.clone)(this.view.getData());this.halves=[[],[]];var e=[],n=this.view.geometries[0].elements;(0,d.each)(n,function(_e){e.push(_e.shape)}),this.coord=this.view.geometries[0].coordinate;var a=this.options,o=a.allZero,u=a.angleField,f=this.options.fields[0],m=this.view.getScalesByDim("y")[f],x=this.coord.getCenter(),w=this.coord.startAngle,L=this.coord.polarRadius,H=this.view.coordinateBBox,W=H.width,et=H.height;this.width=W,this.height=et;for(var ht=w,bt=function(_e){var ze=t[_e],rr=m.scale(ze[f]),sr=ht+Math.PI*2*rr,qe=ht+(sr-ht)/2;ht=sr;var wr=MI(x,qe,L+pw),Vr=MI(x,qe,L+Gm),Br=Yx;if(xt.options.fields.length===2){var Tn=xt.options.fields[1],Hn=xt.view.geometries[0].scales[Tn],Un=Hn.scale(ze[Tn]);if(Un){var Ei=Math.floor(Un*(e.length-1));Br=e[Ei].attr("fill")}}var Ti={_anchor:wr,_inflection:Vr,_data:ze,x:Vr.x,y:Vr.y,r:L+Gm,fill:Br,textGroup:null,_side:null},Li=[];if((0,d.each)(xt.options.fields,function(_o){o&&_o===ng?Li.push(ze[u]):Li.push(ze[_o])}),xt.options.formatter){var _i=xt.options.formatter(ze[u],{_origin:ze,color:Br},_e);(0,d.isString)(_i)&&(_i=[_i]),Li=_i}var bi=xt.container.addGroup({capture:!1,visible:!1}),Ba={x:0,y:0,fontSize:xt.options.text.fontSize,lineHeight:xt.options.text.fontSize,fontWeight:xt.options.text.fontWeight,fill:xt.options.text.fill},La=ze[u];xt.options.formatter&&(La=Li[0]);var Ha=(0,d.clone)(Ba);Li.length===2&&(Ha.fontWeight=700);var Ri=bi.addShape("text",{attrs:(0,d.mix)({textBaseline:Li.length===2?"top":"middle",text:La},Ha),data:ze,offsetY:Li.length===2?Gf:0,name:"label"});if(Ri.name="label",Li.length===2){var Na=bi.addShape("text",{attrs:(0,d.mix)({textBaseline:"bottom",text:Li[1]},Ba),data:ze,offsetY:Wx,name:"label"});Na.name="label"}Ti.textGroup=bi,wr.x<x.x?(Ti._side="left",xt.halves[0].push(Ti)):(Ti._side="right",xt.halves[1].push(Ti))},xt=this,qt=0;qt<t.length;qt++)bt(qt);var ie=Math.floor(et/this.options.lineHeight);(0,d.each)(this.halves,function(_e){_e.length>ie&&_e.splice(ie,_e.length-ie),_e.sort(function(ze,rr){return ze.y-rr.y}),r._antiCollision(_e)}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.view.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.view.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getDefaultOptions=function(){return{text:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12},line:{lineWidth:.5,stroke:"rgba(0, 0, 0, 0.45)"},lineHeight:32,sidePadding:20}},i.prototype._antiCollision=function(r){var t=this,e=this.coord,n=e.getHeight(),a=e.center,o=e.getRadius(),u=a.y-o-Gm-this.options.lineHeight,f=!0,m=n,x,w=0,L=Number.MIN_VALUE,H=0,W=r.map(function(qt){var ie=qt.y;ie>w&&(w=ie),ie<L&&(L=ie);var _e=qt.textGroup,ze=_e.getBBox().width;return ze>=H&&(H=ze),{size:t.options.lineHeight,targets:[ie-u]}});w-u>m&&(m=w-u);for(var et=function(qt){qt.forEach(function(ie){var _e=(Math.min.apply(L,ie.targets)+Math.max.apply(L,ie.targets))/2;ie.pos=Math.min(Math.max(L,_e-ie.size/2),m-ie.size)})};f;)for(et(W),f=!1,x=W.length;x--;)if(x>0){var ht=W[x-1],bt=W[x];ht.pos+ht.size>bt.pos&&(ht.size+=bt.size,ht.targets=ht.targets.concat(bt.targets),ht.pos+ht.size>m&&(ht.pos=m-ht.size),W.splice(x,1),f=!0)}x=0,W.forEach(function(qt){var ie=u;qt.targets.forEach(function(){r[x].y=qt.pos+ie+t.options.lineHeight/2,ie+=t.options.lineHeight,x++})});var xt=[];r.forEach(function(qt){var ie=t._drawLabel(qt);t._drawLabelLine(qt,H,ie),xt.push(ie)})},i.prototype._drawLabel=function(r){var t=this.coord,e=t.getCenter(),n=t.getRadius(),a=r.y,o=r.textGroup,u=o.get("children"),f=r._side==="left"?1:-1,m=(0,Ft.__assign)({textAlign:r._side==="left"?"right":"left",x:r._side==="left"?e.x-n-this.options.sidePadding:e.x+n+this.options.sidePadding},this.options.style);return this.options.offsetX&&(m.x+=this.options.offsetX*f),u.forEach(function(x){var w=x.get("offsetY"),L=a+w;x.attr(m),x.attr("y",L)}),o.show(),o},i.prototype._drawLabelLine=function(r,t,e){var n=[r._anchor.x,r._anchor.y],a=[r._inflection.x,r._inflection.y],o=r.y,u=r.textGroup;if(!!u){var f=[r._side==="left"?u.getBBox().maxX+4:u.getBBox().minX-4,o],m=[n,a,f];if(a[1]!==o)if(a[1]<this.height/2&&a[1]<o||a[1]>=this.height/2&&a[1]>o){var x=a,w=f[0]+n0,L=f[0]-n0,H=[r._side==="left"?w:L,a[1]];m=[n,x,H,f],(r._side==="right"&&H[0]<x[0]||r._side==="left"&&H[0]>x[0])&&(m=[n,x,f])}else m=[n,[a[0],o],f];for(var W=[],et=0;et<m.length;et++){var ht=m[et],bt="L";et===0&&(bt="M"),W.push([bt,ht[0],ht[1]])}e.addShape("path",{attrs:{path:W,lineWidth:this.options.line.lineWidth,stroke:this.options.line.stroke}})}},i.prototype._adjustOptions=function(r){r.text.fontSize&&(r.lineHeight=r.text.fontSize*3)},i}(),TI=dw,Dk=function(i){var r=i.opacity||1;return{fillOpacity:r*.8}},f1=function(i){var r=i.opacity||1;return{fillOpacity:r*.5}};yf("pie",{columnStyle:{normal:{},active:Dk,disable:f1,selected:{lineWidth:1,stroke:"black"}}});var ng="$$percentage$$",vw={pie:"interval"},gw={pie:"column"},Kx=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pie",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,label:{visible:!0,type:"inner",autoRotate:!1,adjustPosition:!0,allowOverlap:!1,line:{visible:!0,smooth:!0}},legend:{visible:!0,position:"right-center"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},pieStyle:{stroke:"white",lineWidth:1}})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.angleField,n=t.colorField,a=t.data,o=(0,d.every)(a,function(f){return f[e]===0});if(o){var u=this.view.geometries[0];u.tooltip(n+"*"+e)}},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;if(t.label&&t.label.visible){this.labelComponent&&this.labelComponent.clear();var e=t.label;if(e.type==="spider"){var n=t.data,a=t.colorField,o=t.angleField,u=(0,d.every)(n,function(x){return x[o]===0}),f=u?ng:o;this.labelComponent=new TI((0,Ft.__assign)({view:this.view,fields:a?[f,a]:[f],angleField:o,allZero:u},this.options.label)),this.labelComponent.render()}else{var m=hw(e.type);this.labelComponent=new m(this,t.label),this.labelComponent.render()}}},r.prototype.getAngleScale=function(){var t=this.options.angleField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?vw[e]:gw[e]},r.prototype.scale=function(){var t=this.options;i.prototype.scale.call(this);var e={};e[t.angleField]={},e[t.colorField]={type:"cat"},e=(0,d.deepMix)({},this.config.scales,e),this.setConfig("scales",e)},r.prototype.processData=function(t){var e=this.options.angleField,n=(0,d.every)(t,function(a){return a[e]===0});return n?t.map(function(a){var o;return(0,Ft.__assign)((0,Ft.__assign)({},a),(o={},o[e]=typeof a[e]=="string"?Number.parseFloat(a[e]):a[e],o[ng]=1/t.length,o))}):t.map(function(a){var o,u=a[e];return(0,Ft.__assign)((0,Ft.__assign)({},a),(o={},o[e]=u&&!isNaN(u)?+u:u,o))})},r.prototype.axis=function(){},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=t.data,n=t.angleField,a,o=(0,d.every)(e,function(u){return u[n]===0});o?a=Yo("interval","main",{plot:this,positionFields:[1,ng]}):a=Yo("interval","main",{plot:this,positionFields:[1,t.angleField]}),a.adjust=[{type:"stack"}],this.pie=a,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",a)},r.prototype.geometryTooltip=function(){this.pie.tooltip={};var t=this.options.tooltip;t.fields?this.pie.tooltip.fields=t.fields:this.pie.tooltip.fields=[this.options.angleField,this.options.colorField],t.formatter&&(this.pie.tooltip.callback=t.formatter,t.fields||(this.pie.tooltip.fields=[this.options.angleField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.pie.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,M)},r.prototype.label=function(){this.pie.label=!1},r}(_l),ig=Kx;Es("pie",Kx);var $x=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="pie",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=ig.getDefaultOptions,r}(Xo),Um=$x,PI=.3989422804014327,II=1/255/16,bd="_origin",OI=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="heatmap",e.paletteCache={},e.intensity=t.intensity,e.radius=t.radius,e}return r.prototype.createElements=function(t){var e=this.prepareRange(t);return this.prepareSize(),this.prepareBlur(),this.prepareGreyScaleBlurredCircle(this.radius),this.drawWithRange(t,e),null},r.prototype.clear=function(){this.clearShadowCanvasCtx(),i.prototype.clear.call(this)},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(u){var f=u[bd][n];f>o&&(o=f),f<a&&(a=f)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.radius;this.radius||(t=this.getDefaultValue("size"),(0,d.isNumber)(t)||(t=this.getDefaultSize()),this.radius=t)},r.prototype.prepareBlur=function(){var t=(0,d.get)(this.styleOption,["style","shadowBlur"]);(0,d.isNumber)(t)||(t=this.radius/2),this.blur=t},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate,n=Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4));return n},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,a=this.paletteCache,o=3;o<n.length;o+=4){var u=n[o];if(u){var f=void 0;a[u]?f=a[u]:(f=_d(e.gradient(u/256)),a[u]=f),n[o-3]=f[0],n[o-2]=f[1],n[o-1]=f[2],n[o]=u}}},r.prototype.prepareGreyScaleBlurredCircle=function(t){var e=this.grayScaleCanvas;e||(e=document.createElement("canvas"),this.grayScaleCanvas=e);var n=this.intensity?this.intensity:2,a=Math.sqrt(-2*Math.log(II/t/n/PI))/3*t,o=a-t,u=a+o,f=e.getContext("2d");e.width=e.height=u*2,f.clearRect(0,0,e.width,e.height),f.shadowOffsetX=f.shadowOffsetY=u*2,f.shadowBlur=o,f.shadowColor="black",f.beginPath(),f.arc(-u,-u,t,0,Math.PI*2,!0),f.closePath(),f.fill()},r.prototype.drawGrayScaleBlurredCircle=function(t,e,n,a,o){var u=this.grayScaleCanvas;o.globalAlpha=a,o.drawImage(u,t-n,e-n)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight();var e=t.getContext("2d");return e.globalCompositeOperation="lighter",e},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;t=e.addShape({type:"image",attrs:{}}),this.imageShape=t},r.prototype.drawWithRange=function(t,e){var n=this.coordinate,a=n.start,o=n.end,u=this.coordinate.getWidth(),f=this.coordinate.getHeight(),m=this.getAttribute("color"),x=m.getFields()[0];this.clearShadowCanvasCtx();var w=this.getShadowCanvasCtx();e&&(t=t.filter(function(qt){return qt[bd][x]<=e[1]&&qt[bd][x]>=e[0]}));for(var L=this.scales[x],H=0;H<t.length;H++){var W=t[H],et=this.getDrawCfg(W),ht=L.scale(W[bd][x]);this.drawGrayScaleBlurredCircle(et.x-a.x,et.y-o.y,this.radius+this.blur,ht,w)}var bt=w.getImageData(0,0,u,f);this.clearShadowCanvasCtx(),this.colorize(bt),w.putImageData(bt,0,0);var xt=new Image;xt.src=w.canvas.toDataURL("image/png"),this.getImageShape(),this.imageShape.attr("x",a.x),this.imageShape.attr("y",o.y),this.imageShape.attr("width",u),this.imageShape.attr("height",f),this.imageShape.attr("img",w.canvas),this.imageShape.set("origin",this.getShapeInfo(t))},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,Ft.__assign)((0,Ft.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[bd]})},r}(Rl);Zu("linearHeatmap",OI);var LI=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.options=t,e.view=e.options.view,e.init(),e}return r.prototype.init=function(){var t=this.getCoordinate();this.width=t.getWidth(),this.height=t.getHeight(),this.x=t.start.x,this.y=t.end.y,this.container=this.view.backgroundGroup.addGroup({})},r.prototype.render=function(){if(this.options.type==="color")this.renderColorBackground();else if(this.options.type==="image")this.renderImageBackground();else if(this.options.callback){var t={x:this.x,y:this.y,width:this.width,height:this.height,container:this.container};this.options.callback(t)}},r.prototype.renderColorBackground=function(){this.container.addShape("rect",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,fill:this.options.value},name:"heatmap-background"})},r.prototype.renderImageBackground=function(){this.container.addShape("image",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,img:this.options.src},name:"heatmap-background"})},r.prototype.clear=function(){this.container&&(this.container.clear(),this.emit("background:clear"))},r.prototype.destroy=function(){this.container&&(this.container.remove(),this.emit("background:destroy"))},r.prototype.getCoordinate=function(){var t;return(0,d.each)(this.view.geometries,function(e){e.type==="heatmap"&&(t=e.coordinate)}),t},r}(Qr.default),Bk=LI,Qx=4,kI=1,Fk=.1,Nk=function(){function i(r){this.destroyed=!1,this.dataSlides={};var t=this.getDefaultOptions();r.plot.options.theme&&r.plot.options.theme==="dark"&&(t=this.getDarkOptions()),this.options=(0,d.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var r=this.options.plot.container;this.container=r.addGroup()},i.prototype.render=function(){var r=this.getScales(),t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction(),this.options.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new ns(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=this.width,o=this.height/e.length,u=this.container.addGroup(),f=(0,d.clone)(e).reverse(),m=(t-r)/e.length;(0,d.each)(f,function(x,w){var L=o*w,H={to:t-m*w,from:t-m*(w+1)},W=n.container.addShape("rect",{attrs:{x:0,y:L,width:a,height:o,fill:x,opacity:kI,cursor:"pointer"},name:"legend"});W.set("info",H);var et=n.getDataSlide(H);n.dataSlides[H.from+"-"+H.to]={mode:"active",data:et},u.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",0,L+o],["L",a,L+o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Ft.__assign)({text:t,x:a/2,y:-Qx,textAlign:"center",textBaseline:"bottom"},this.options.text.style),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({text:r,x:a/2,y:this.height+Qx,textAlign:"center",textBaseline:"top"},this.options.text.style),{name:"legend-label"})}),u.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=this.width/e.length,o=this.height,u=this.container.addGroup(),f=(t-r)/e.length;(0,d.each)(e,function(m,x){var w=a*x,L={from:f*x,to:f*(x+1)},H=n.container.addShape("rect",{attrs:{x:w,y:0,width:a,height:o,fill:m,opacity:.8,cursor:"pointer"},name:"legend"});H.set("info",L),u.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",w+a,0],["L",w+a,o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({text:r,x:-Qx,y:o/2},this.options.text.style),{textAlign:"right",textBaseline:"middle"}),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Ft.__assign)({text:t,x:this.width+Qx,y:o/2,textAlign:"left",textBaseline:"middle"},this.options.text.style),name:"legend-label"}),u.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.options.plot.options.width;return r*.5}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.options.plot.options.height;return r*.5}return 10},i.prototype.legendLayout=function(){var r=this,t=this.options.plot.getPlotTheme().bleeding;(0,d.isArray)(t)&&(0,d.each)(t,function(m,x){typeof t[x]=="function"&&(t[x]=t[x](r.options.plot.options))});var e=this.container.getBBox(),n=0,a=0,o=this.options.position.split("-"),u=this.options.plot.width,f=this.options.plot.height;o[0]==="left"?n=t[3]:o[0]==="right"?n=u-t[1]-e.width:o[1]==="center"?n=(u-e.width)/2:o[1]==="left"?n=t[3]:o[1]==="right"&&(n=this.options.plot.width-t[1]-e.width),o[0]==="bottom"?a=f-t[2]-e.height:o[0]==="top"?a=this.getTopPosition(t):o[1]==="center"?a=(f-e.height)/2:o[1]==="top"?a=t[0]:o[1]==="bottom"&&(a=f-t[2]-e.height),this.x=n,this.y=a,this.container.translate(n,a)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}}},i.prototype.getDarkOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(255, 255, 255, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(255, 255, 255, 0.25)"}}},i.prototype.addInteraction=function(){var r=this,t=this.options.plot.options.colorField;this.container.on("click",function(e){var n=e.target;if(n.get("name")==="legend"){var a=n.get("info"),o=a.from+"-"+a.to,u=r.dataSlides[o];u.mode==="active"?(u.mode="deactive",n.stopAnimate(),n.animate({opacity:Fk},200)):(u.mode="active",n.stopAnimate(),n.animate({opacity:kI},200));var f=r.getFilteredData();f.length>0&&(r.view.changeData(f),r.view.scale(t,{min:r.colorScale.min,max:r.colorScale.max,nice:r.colorScale.nice}),r.view.render())}})},i.prototype.getFilteredData=function(){var r=[];return(0,d.each)(this.dataSlides,function(t){t.mode=="active"&&r.push.apply(r,t.data)}),r},i.prototype.getDataSlide=function(r){var t=[],e=this.options.plot.options,n=e.colorField,a=e.data;return(0,d.each)(a,function(o){var u=o[n];u>=r.from&&u<r.to&&t.push(o)}),t},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.getScales=function(){var r;return(0,d.each)(this.view.geometries,function(t){t.type==="heatmap"&&(r=t.scales)}),r},i}(),zk=Nk,Gk={background:{Ctr:Bk},legend:{Ctr:zk,padding:"outer"}};function mw(i,r,t){if(i.options[r]&&i.options[r].visible){var e=Gk[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var qx={heatmap:"heatmap",legendLabel:"legend-label",heatmapBackground:"heatmap-background"},Uk=Rc(qx);(0,d.assign)(Ns,Uk);var Jx=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="densityHeatmap",t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}},tooltip:{visible:!0,showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{stroke:"#000000",lineWidth:1,opacity:.5}}},showMarkers:!1},legend:{visible:!0,position:"bottom-center"},color:["rgba(33,102,172,0)","rgb(103,169,207)","rgb(209,229,240)","rgb(253,219,199)","rgb(239,138,98)","rgb(178,24,43)"],interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.destroy=function(){(0,d.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.geometryParser=function(){return"heatmap"},r.prototype.addGeometry=function(){if(this.options.data.length>1){var t={type:"linearheatmap",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},cfg:{intensity:this.options.intensity,radius:this.options.radius}};this.options.radius&&(t.radius=this.options.radius),this.options.intensity&&(t.intensity=this.options.intensity),this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t),this.addPoint()}},r.prototype.addPoint=function(){var t=this.options,e={visible:!1,size:0};t.point&&t.point.visible?t.point=(0,d.deepMix)(e,t.point):t.point=e;var n=Yo("point","guide",{plot:this});n.active=!1,this.setConfig("geometry",n)},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=Dc("label",(0,Ft.__assign)({plot:this,labelType:"scatterLabel",fields:[t.xField,t.yField],position:"middle",offset:0},e));return n},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,O)},r.prototype.renderPlotComponents=function(){var t=this;(0,d.each)(this.plotComponents,function(n){n.destroy()});var e=["legend","background"];(0,d.each)(e,function(n){var a=(0,Ft.__assign)({view:t.view,plot:t},t.options[n]),o=mw(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(_l),RI=Jx;Es("densityHeatmap",Jx);var Vk=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="densityHeatmap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=RI.getDefaultOptions,r}(Xo),t_=Vk;function h1(i,r,t,e,n){var a=t*n,o=e*n,u=[["M",i-a/2,r+o/2],["Q",i-a/2,r,i-a/2,r-o/2],["Q",i,r-o/2,i+a/2,r-o/2],["Q",i+a/2,r,i+a/2,r+o/2],["Q",i,r+o/2,i-a/2,r+o/2],["Z"]];return u}function e_(i,r,t){var e=[["M",i,r],["l",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-(t*2),0],["Z"]];return e}function r_(i,r,t){var e=[["M",i-t,r],["Q",i-t,r-t,i,r-t],["Q",i+t,r-t,i+t,r],["Q",i+t,r+t,i,r+t],["Q",i-t,r+t,i-t,r],["Z"]];return e}ws("polygon","rect",{draw:function(i,r){var t=this.parsePoints(i.points),e=t[2].x-t[0].x,n=t[0].y-t[1].y,a=t[0].x+e/2,o=t[1].y+n/2,u=h1(a,o,e,n,i.size);return r.addShape("path",{attrs:(0,d.deepMix)({},{path:u,fill:i.color,opacity:1},i.style)})}}),ws("point","curvePoint",{draw:function(i,r){var t=e_(i.x,i.y,i.size);return r.addShape("path",{attrs:(0,d.deepMix)({},{path:t,fill:i.color,opacity:1},i.style)})}});var DI=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.view.geometries[0].elements;(0,d.each)(t,function(e){var n=e.shape,a=r.options,o=a.style,u=a.offsetX,f=a.offsetY,m=r.options.formatter,x=m?m(r.getContent(n)):r.getContent(n),w=r.getPosition(n),L=r.getTextColor(n),H=r.container.addShape("text",{attrs:(0,d.deepMix)({},o,{x:w.x+u,y:w.y+f,text:x,fill:L,textAlign:"center",textBaseline:"middle"}),name:"label"});r.options.adjustPosition&&r.adjustLabel(H,n)})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,d.clone)(t)}},i.prototype.getContent=function(r){var t=r.get("origin").data,e=this.plot.options.colorField;return t[e]},i.prototype.getPosition=function(r){var t=r.getBBox();return{x:t.minX+t.width/2,y:t.minY+t.height/2}},i.prototype.getTextColor=function(r){if(this.options.adjustColor){var t=r.attr("fill"),e=r.attr("opacity")?r.attr("opacity"):1,n=_d(t),a=Math.round(n[0]*.299+n[1]*.587+n[2]*.114)/e,o=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=km(o,a);return u}var f=this.options.style.fill;return f},i.prototype.adjustLabel=function(r,t){var e=r.getBBox(),n=t.getBBox();(e.width>n.width||e.height>n.height)&&r.attr("text","")},i}(),Zk=DI,Vm=4,BI=function(){function i(r){this.destroyed=!1,this.dataSlides={},this.interactiveEvents={};var t=this.getDefaultOptions();this.options=(0,d.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){var r=this;this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var t=this.options.plot.container;this.container&&this.container.remove(),this.container=t.addGroup(),this.view.on("beforerender",function(){r.clear(),r.options.plot.canvas.draw()})},i.prototype.render=function(){var r=this.view.geometries[0].scales,t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.offEvent(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new ns(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),u=this.height/(e.length-1),f="l(90)";(0,d.each)(e,function(L,H){var W=o*H;f+=W+":"+L+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:f},name:"legend"}),(0,d.each)(e,function(L,H){var W=u*H;n.container.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",0,W],["L",n.width,W]]},n.options.ticklineStyle)});var et=Math.round(a*H);n.container.addShape("text",{attrs:(0,Ft.__assign)({text:et,textAlign:"left",textBaseline:"middle",x:n.width+Vm,y:W},n.options.text.style),name:"legend-label"})});var m=10,x=14,w=[["M",-m,-x/2],["L",0,0],["L",-m,x/2],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Ft.__assign)({path:w},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),u=this.width/(e.length-1),f="l(0)";(0,d.each)(e,function(L,H){var W=o*H;f+=W+":"+L+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:f},name:"legend"}),(0,d.each)(e,function(L,H){var W=u*H;n.container.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",W,0],["L",W,n.height]]},n.options.ticklineStyle),name:"legend-label"});var et=Math.round(a*H);n.container.addShape("text",{attrs:(0,Ft.__assign)({text:et,textAlign:"center",textBaseline:"top",x:W,y:n.height+Vm},n.options.text.style)})});var m=14,x=10,w=[["M",0,0],["L",-m/2,-x],["L",m/2,-x],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Ft.__assign)({path:w},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.view.coordinateBBox.width;return r}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.view.coordinateBBox.height;return r}return 10},i.prototype.legendLayout=function(){var r=this,t=this.view.coordinateBBox,e=this.options.plot.getPlotTheme().bleeding;(0,d.isArray)(e)&&(0,d.each)(e,function(x,w){typeof e[w]=="function"&&(e[w]=e[w](r.options.plot.options))});var n=this.container.getBBox(),a=0,o=0,u=this.options.position.split("-"),f=this.options.plot.width,m=this.options.plot.height;u[0]==="left"?a=e[3]:u[0]==="right"?a=f-e[1]-n.width:u[1]==="center"?this.width===t.width?a=t.x:a=(f-n.width)/2:u[1]==="left"?a=e[3]:u[1]==="right"&&(a=this.options.plot.width-e[1]-n.width),u[0]==="bottom"?o=m-e[2]-n.height:u[0]==="top"?o=this.getTopPosition(e):u[1]==="center"?this.height===t.height?o=t.y:o=(m-n.height)/2:u[1]==="top"?o=e[0]:u[1]==="bottom"&&(o=m-e[2]-n.height),this.x=a,this.y=o,this.container.translate(a,o)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},ticklineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.8)"},anchorStyle:{fill:"rgba(0,0,0,0.5)"},triggerOn:"mousemove"}},i.prototype.addInteraction=function(){var r=this,t;this.options.plot.options.shapeType==="rect"?t="polygon":t="point";var e=t+":"+this.options.triggerOn,n=this.options.plot.options.colorField,a=this.colorScale,o=a.min,u=a.max,f=function(x){var w=x.data.data[n],L=(w-o)/(u-o);r.moveAnchor(L)};this.view.on(e,f),this.interactiveEvents[e]={target:this.view,handler:f};var m=function(){r.anchor.set("visible",!1)};this.options.plot.canvas.on("mouseleave",m),this.interactiveEvents.mouseleave={target:this.options.plot.canvas,handler:m}},i.prototype.moveAnchor=function(r){if(this.anchor.set("visible",!0),this.layout==="vertical"){var t=this.height*r,e=[1,0,0,0,1,0,0,0,1];e[7]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}else{var t=this.width*r,e=[1,0,0,0,1,0,0,0,1];e[6]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.offEvent=function(){(0,d.each)(this.interactiveEvents,function(r,t){var e=r.target,n=r.handler;e.off(t,n)})},i}(),Hk=BI,i0={label:{Ctr:Zk},legend:{Ctr:Hk,padding:"outer"}};function yw(i,r,t){if(i.options[r]&&i.options[r].visible){var e=i0[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var Zm=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.gridSize=[],t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{shapeType:"rect",legend:{visible:!0,position:"right-center"},tooltip:{shared:!1,showCrosshairs:!1,showMarkers:!1},xAxis:{visible:!0,gridAlign:"center",grid:{visible:!0},tickLine:{visible:!0},line:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!0}},yAxis:{visible:!0,gridAlign:"center",grid:{visible:!0,align:"center"},tickLine:{visible:!0},label:{autoHide:!0,autoRotate:!1}},color:["#9ae3d5","#66cdbb","#e7a744","#f1e066","#f27664","#e7c1a2"],label:{visible:!0,adjustColor:!0,adjustPosition:!0,offset:0,style:{stroke:"rgba(255,255,255,0)",lineWidth:0}},interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.changeShape=function(t){if(this.options.shapeType!==t){if(this.options.shapeType=t,t==="rect"){var e=this.getShape();this.circleToRect(e)}else if(t==="circle"){var e=this.getShape();this.rectToCircle(e)}}},r.prototype.mappingSize=function(t){if(!(this.options.sizeField&&this.options.sizeField===t)){this.options.sizeField=t;var e=(0,d.valuesOfKey)(this.options.data,t),n=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=(0,jn.getScale)("linear"),u=new o({min:n,max:a}),f=this.getShape();this.options.shapeType==="rect"?this.rectSizeMapping(f,u,t):this.options.shapeType==="circle"&&this.circleSizeMapping(f,u,t)}},r.prototype.disableMappingSize=function(){var t=this.getShape();this.options.shapeType==="rect"?this.rectDisableSizeMapping(t):this.options.shapeType==="circle"&&this.circleDisableSizeMapping(t)},r.prototype.destroy=function(){(0,d.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(){return""},r.prototype.coord=function(){},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.addGeometry=function(){this.gridSize=this.getGridSize();var t;if(this.options.shapeType==="rect")t=this.addRect();else{var e=this.addCircle();t=e}if(this.options.shapeStyle){var n={};(0,d.isFunction)(this.options.shapeStyle)?(n.fields=[this.options.colorField,this.options.xField,this.options.yField,this.options.sizeField],n.callback=this.options.shapeStyle):(0,d.isObject)(this.options.shapeStyle)&&(n.cfg=this.options.shapeStyle),t.style=n}this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t)},r.prototype.addRect=function(){var t=[.3,.9];this.options.shapeSize&&(t[0]=this.options.shapeSize[0]/this.gridSize[0],t[1]=this.options.shapeSize[1]/this.gridSize[1]);var e={type:"polygon",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["rect"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[1]},e},r.prototype.addCircle=function(){var t=[.3,.9];this.options.shapeSize?t=this.options.shapeSize:(t[0]=this.gridSize[0]*t[0]*.5,t[1]=this.gridSize[1]*t[1]*.5);var e={type:"point",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["curvePoint"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[Math.min(this.gridSize[0],this.gridSize[1])*.5*.9]},e},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.getGridSize=function(){if(this.options.padding==="auto")return[0,0];var t=this.getViewRange(),e=this.options,n=e.padding,a=e.xField,o=e.yField,u=e.data,f=t.width-n[1]-n[3],m=t.height-n[0]-n[2],x=(0,d.valuesOfKey)(u,a).length,w=(0,d.valuesOfKey)(u,o).length;return[f/x,m/w]},r.prototype.circleToRect=function(t){var e=this,n=this.gridSize;(0,d.each)(t,function(a){var o=a.get("origin"),u=o.x,f=o.y,m=o.size,x=m*2/Math.min(n[0],n[1]);e.options.sizeField||(x=1);var w=r_(u,f,m),L=h1(u,f,n[0],n[1],x);a.stopAnimate(),a.attr("path",w),a.animate({path:L},500,"easeLinear")})},r.prototype.rectToCircle=function(t){var e=this;(0,d.each)(t,function(n){var a=n.get("coord"),o=n.get("origin").points,u=[];(0,d.each)(o,function(ht){u.push(a.convertPoint(ht))});var f=n.getBBox(),m=f.width,x=f.height,w=f.minX+m/2,L=f.minY+x/2,H=e.options.sizeField?1:.9,W=r_(w,L,Math.min(m,x)/2*H),et=e_(w,L,Math.min(m,x)/2*H);n.stopAnimate(),n.animate({path:W},500,"easeLinear",function(){n.attr("path",et)})})},r.prototype.rectSizeMapping=function(t,e,n){(0,d.each)(t,function(a){var o=a.get("origin").data,u=.3+e.scale(o[n])*.6;a.get("origin").size=u;var f=a.getBBox(),m=f.width,x=f.height,w=f.minX+m/2,L=f.minY+x/2,H=h1(w,L,m,x,u);a.stopAnimate(),a.animate({path:H},500,"easeLinear")})},r.prototype.circleSizeMapping=function(t,e,n){(0,d.each)(t,function(a){var o=a.get("origin").data,u=.3+e.scale(o[n])*.6,f=a.get("origin"),m=f.x,x=f.y,w=f.size,L=e_(m,x,w*u);a.get("origin").size=w*u,a.stopAnimate(),a.animate({path:L},500,"easeLinear")})},r.prototype.circleDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,d.each)(t,function(n){var a=n.get("origin"),o=a.x,u=a.y,f=Math.min(e.gridSize[0],e.gridSize[1])*.9;n.get("origin").size=f/2;var m=e_(o,u,f/2);n.stopAnimate(),n.animate({path:m},500,"easeLinear")})},r.prototype.rectDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,d.each)(t,function(n){var a=n.getBBox(),o=a.width,u=a.height,f=a.minX+o/2,m=a.minY+u/2,x=h1(f,m,e.gridSize[0],e.gridSize[1],1);n.get("origin").size=1,n.stopAnimate(),n.animate({path:x},500,"easeLinear")})},r.prototype.getShape=function(){var t=this.view.geometries[0].elements,e=[];return(0,d.each)(t,function(n){e.push(n.shape)}),e},r.prototype.renderPlotComponents=function(){var t=this;(0,d.each)(this.plotComponents,function(n){n.destroy()}),this.plotComponents=[];var e=["label","legend"];(0,d.each)(e,function(n){var a=(0,Ft.__assign)({view:t.view,plot:t},t.options[n]),o=yw(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(_l),FI=Zm;Es("heatmap",Zm);var NI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="heatmap",i.prototype.createLayers.call(this,e)},r.prototype.changeShape=function(t){var e=this.layers[0];e.changeShape(t)},r.prototype.mappingSize=function(t){var e=this.layers[0];e.mappingSize(t)},r.prototype.disableMappingSize=function(){var t=this.layers[0];t.disableMappingSize()},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=FI.getDefaultOptions,r}(Xo),a0=NI,zI=function(i){(0,Ft.__extends)(r,i);function r(t){var e=this,n=(0,d.deepMix)({},t,{itemTpl:`<div data-index={index}>
        <span style="background-color:{color};" class="g2-tooltip-marker"></span>
        {name}<span class="g2-tooltip-value">{value}</span></div>`},t);return e=i.call(this,n)||this,e}return r}(ib.Z),GI=zI;/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",n=function(o){var u=t.length;return t.push(o),window.postMessage(e+u.toString(36),"*"),u};return window.addEventListener("message",function(o){if(!(typeof o.data!="string"||o.data.substr(0,e.length)!==e)){o.stopImmediatePropagation();var u=parseInt(o.data.substr(e.length),36);!t[u]||(t[u](),t[u]=void 0)}},!0),window.clearImmediate=function(o){!t[o]||(t[o]=void 0)},n}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}());var xw=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var t=r.getContext("2d");return!(!t.getImageData||!t.fillText||!Array.prototype.some||!Array.prototype.push)}(),Hm=function(){if(!!xw){for(var r=document.createElement("canvas").getContext("2d"),t=20,e,n;t;){if(r.font=t.toString(10)+"px sans-serif",r.measureText("\uFF37").width===e&&r.measureText("m").width===n)return t+1;e=r.measureText("\uFF37").width,n=r.measureText("m").width,t--}return 0}}(),jk=function(r){for(var t,e,n=r.length;n;t=Math.floor(Math.random()*n),e=r[--n],r[n]=r[t],r[t]=e);return r},_w=function(r,t){if(!xw)return;Array.isArray(r)||(r=[r]),r.forEach(function(Ja,ii){if(typeof Ja=="string"){if(r[ii]=document.getElementById(Ja),!r[ii])throw"The element id specified is not found."}else if(!Ja.tagName&&!Ja.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var e={data:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minFontSize:Hm,maxFontSize:60,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotateRatio:.5,rotationSteps:1,shuffle:!0,shape:"circle",ellipticity:1,active:!0,animatable:!0,selected:-1,shadowColor:"#333",shadowBlur:10,fontScale:1.2,classes:null,onWordCloudHover:null,onWordCloudClick:null},n=[];if(t)for(var a in t)if(a==="wordStyle")for(var o in t[a])o in e&&(e[o]=t[a][o]);else a in e&&(e[a]=t[a]);if(e.minFontSize<Hm&&(e.minFontSize=Hm),e.minFontSize>e.maxFontSize){console.error("minSize cant bigger than maxSize");return}for(var u=0,f=0;f<e.data.length;f++)u<e.data[f].weight&&(u=e.data[f].weight);var m=function(ii){var Gi=Math.min(Math.max(e.minFontSize,e.maxFontSize*ii/u),e.maxFontSize);return Mo?Gi*e.fontScale:Gi},x=!1;if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(ii){return 1-Math.sin(ii)},x=!0;break;case"diamond":e.shape=function(ii){var Gi=ii%(2*Math.PI/4);return 1/(Math.cos(Gi)+Math.sin(Gi))};break;case"square":e.shape=function(ii){var Gi=(ii+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(Gi)+Math.sin(Gi))};break;case"triangle-forward":e.shape=function(ii){var Gi=ii%(2*Math.PI/3);return 1/(Math.cos(Gi)+Math.sqrt(3)*Math.sin(Gi))};break;case"triangle-backward":e.shape=function(ii){var Gi=(ii+Math.PI)%(2*Math.PI/3);return 1/(Math.cos(Gi)+Math.sqrt(3)*Math.sin(Gi))};break;case"triangle":case"triangle-up":e.shape=function(ii){var Gi=(ii+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(Gi)+Math.sqrt(3)*Math.sin(Gi))};break;case"triangle-down":e.shape=function(ii){var Gi=(ii+Math.PI*5/2)%(2*Math.PI/3);return 1/(Math.cos(Gi)+Math.sqrt(3)*Math.sin(Gi))};break;case"pentagon":e.shape=function(ii){var Gi=(ii+.955)%(2*Math.PI/5);return 1/(Math.cos(Gi)+.726543*Math.sin(Gi))};break;case"star":e.shape=function(ii){var Gi=(ii+.955)%(2*Math.PI/10);return(ii+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-Gi)+3.07768*Math.sin(2*Math.PI/10-Gi)):1/(Math.cos(Gi)+3.07768*Math.sin(Gi))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var w=e.gridSize,L=w-e.maskGapWidth,H=Math.abs(e.maxRotation-e.minRotation),W=Math.min(e.maxRotation,e.minRotation),et=e.rotationSteps,ht,bt,xt,qt,ie,_e,ze;function rr(Ja,ii){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(ii-Ja)+Ja).toFixed()+"%)"}switch(e.color){case"random-dark":ze=function(){return rr(10,50)};break;case"random-light":ze=function(){return rr(50,90)};break;default:typeof e.color=="function"&&(ze=e.color);break}var sr=null;typeof e.classes=="function"&&(sr=e.classes);var qe=!1,wr=[],Vr,Br=function(ii){var Gi=ii.currentTarget,To=Gi.getBoundingClientRect(),Ho,go;ii.touches?(Ho=ii.touches[0].clientX,go=ii.touches[0].clientY):(Ho=ii.clientX,go=ii.clientY);var bs=Ho-To.left,is=go-To.top,Lo=Math.floor(bs*(Gi.width/To.width||1)/w),Ss=Math.floor(is*(Gi.height/To.height||1)/w);return wr&&wr[Lo]&&wr[Lo][Ss]},Tn=function(ii,Gi,To,Ho){Ho(ii?ii.id:-1)},Hn=function(ii){var Gi=Br(ii);if(Vr!==Gi&&!(Mo&&Gi&&Gi.item&&!(0,d.get)(Gi,["item","twiceRender"]))){if(!Gi){e.onWordCloudHover(void 0,void 0,ii,hs),e.active&&Tn(void 0,void 0,ii,hs);return}e.onWordCloudHover(Gi.item,Gi.dimension,ii,hs),e.active&&Tn(Gi.item,Gi.dimension,ii,hs),Vr=Gi}},Un=function(ii){var Gi=Br(ii);!Gi||(e.onWordCloudClick(Gi.item,Gi.dimension,ii),ii.preventDefault())},Ei=[],Ti=function(ii){if(Ei[ii])return Ei[ii];var Gi=ii*8,To=Gi,Ho=[];for(ii===0&&Ho.push([qt[0],qt[1],0]);To--;){var go=1;e.shape!=="circle"&&(go=e.shape(To/Gi*2*Math.PI)),Ho.push([qt[0]+ii*go*Math.cos(-To/Gi*2*Math.PI),qt[1]+ii*go*Math.sin(-To/Gi*2*Math.PI)*e.ellipticity,To/Gi*2*Math.PI])}return Ei[ii]=Ho,Ho},Li=function(){return e.abortThreshold>0&&new Date().getTime()-_e>e.abortThreshold},_i=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:H===0?W:et>0?W+Math.floor(Math.random()*et)*H/et:W+Math.random()*H},bi=function(ii,Gi,To){var Ho=!1,go=m(Gi);if(go<=0)return!1;var bs=1;go<Hm&&(bs=function(){for(var hy=2;hy*go<Hm;)hy+=2;return hy}());var is=document.createElement("canvas"),Lo=is.getContext("2d",{willReadFrequently:!0});Lo.font=e.fontWeight+" "+(go*bs).toString(10)+"px "+e.fontFamily;var Ss=Lo.measureText(ii).width/bs,Xs=Math.max(go*bs,Lo.measureText("m").width,Lo.measureText("\uFF37").width)/bs,pl=Ss+Xs*2,wu=Xs*3,Ll=Math.ceil(pl/w),$l=Math.ceil(wu/w);pl=Ll*w,wu=$l*w;var Sf=-Ss/2,Hf=-Xs*.4,Fc=Math.ceil((pl*Math.abs(Math.sin(To))+wu*Math.abs(Math.cos(To)))/w),wo=Math.ceil((pl*Math.abs(Math.cos(To))+wu*Math.abs(Math.sin(To)))/w),kl=wo*w,ef=Fc*w;is.setAttribute("width",kl),is.setAttribute("height",ef),Ho&&(document.body.appendChild(is),Lo.save()),Lo.scale(1/bs,1/bs),Lo.translate(kl*bs/2,ef*bs/2),Lo.rotate(-To),Lo.font=e.fontWeight+" "+(go*bs).toString(10)+"px "+e.fontFamily,Lo.fillStyle="#000",Lo.textBaseline="middle",Lo.fillText(ii,Sf*bs,(Hf+go*.5)*bs);var Wc;try{Wc=Lo.getImageData(0,0,kl,ef).data}catch(jf){return!1}if(Li())return!1;Ho&&(Lo.strokeRect(Sf*bs,Hf,Ss*bs,Xs*bs),Lo.restore());for(var mg=[],rf=wo,Pu,hu,dl,El=[Fc/2,wo/2,Fc/2,wo/2];rf--;)for(Pu=Fc;Pu--;){dl=w;t:{for(;dl--;)for(hu=w;hu--;)if(Wc[((Pu*w+dl)*kl+(rf*w+hu))*4+3]){mg.push([rf,Pu]),rf<El[3]&&(El[3]=rf),rf>El[1]&&(El[1]=rf),Pu<El[0]&&(El[0]=Pu),Pu>El[2]&&(El[2]=Pu),Ho&&(Lo.fillStyle="rgba(255, 0, 0, 0.5)",Lo.fillRect(rf*w,Pu*w,w-.5,w-.5));break t}Ho&&(Lo.fillStyle="rgba(0, 0, 255, 0.5)",Lo.fillRect(rf*w,Pu*w,w-.5,w-.5))}}return Ho&&(Lo.fillStyle="rgba(0, 255, 0, 0.5)",Lo.fillRect(El[3]*w,El[0]*w,(El[1]-El[3]+1)*w,(El[2]-El[0]+1)*w)),{mu:bs,occupied:mg,bounds:El,gw:wo,gh:Fc,fillTextOffsetX:Sf,fillTextOffsetY:Hf,fillTextWidth:Ss,fillTextHeight:Xs,fontSize:go}},Ba=function(ii,Gi,To,Ho,go){for(var bs=go.length;bs--;){var is=ii+go[bs][0],Lo=Gi+go[bs][1];if(is>=bt||Lo>=xt||is<0||Lo<0){if(!e.drawOutOfBound)return!1;continue}if(!ht[is][Lo])return!1}return!0},La=function(ii,Gi,To,Ho,go,bs,is,Lo,Ss,Xs,pl){var wu=To.fontSize,Ll=e.color,$l=e.classes;if(!pl)ze?Ll=ze(Ho,go,wu,bs,is):Ll=e.color,sr?$l=sr(Ho,go,wu,bs,is):$l=e.classes;else{var Sf=Ua(Xs);Ll=Sf?Sf.color:e.color}var Hf,Fc=To.bounds;Hf={x:(ii+Fc[3])*w,y:(Gi+Fc[0])*w,w:(Fc[1]-Fc[3]+1)*w,h:(Fc[2]-Fc[0]+1)*w},r.forEach(function(wo){if(wo.getContext){var kl=wo.getContext("2d"),ef=To.mu;kl.save();var Wc=e.fontWeight+" "+(wu*ef).toString(10)+"px "+e.fontFamily;kl.scale(1/ef,1/ef),kl.font=Wc,kl.fillStyle=Ll;var mg=(ii+To.gw/2)*w*ef,rf=(Gi+To.gh/2)*w*ef;kl.translate(mg,rf),Lo!==0&&kl.rotate(-Lo),kl.textBaseline="middle",e.selected===Xs&&(kl.shadowColor=e.shadowColor,kl.shadowBlur=e.shadowBlur),kl.fillText(Ho,To.fillTextOffsetX*ef,(To.fillTextOffsetY+wu*.5)*ef),pl||n.push({gx:ii,gy:Gi,info:To,word:Ho,weight:go,distance:bs,theta:is,rotateDeg:Lo,attributes:Ss,id:Xs,color:Ll}),kl.restore()}else{var Pu=document.createElement("span"),hu="";hu="rotate("+-Lo/Math.PI*180+"deg) ",To.mu!==1&&(hu+="translateX(-"+To.fillTextWidth/4+"px) scale("+1/To.mu+")");var dl={position:"absolute",display:"block",font:e.fontWeight+" "+wu*To.mu+"px "+e.fontFamily,left:(ii+To.gw/2)*w+To.fillTextOffsetX+"px",top:(Gi+To.gh/2)*w+To.fillTextOffsetY+"px",width:To.fillTextWidth+"px",height:To.fillTextHeight+"px",lineHeight:wu+"px",whiteSpace:"nowrap",transform:hu,webkitTransform:hu,msTransform:hu,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};Ll&&(dl.color=Ll),Pu.textContent=Ho;for(var El in dl)Pu.style[El]=dl[El];if(Ss)for(var jf in Ss)Pu.setAttribute(jf,Ss[jf]);$l&&(Pu.className+=$l),wo.appendChild(Pu)}})},Ha=function(ii,Gi,To,Ho,go){if(!(ii>=bt||Gi>=xt||ii<0||Gi<0)){if(ht[ii][Gi]=!1,To){var bs=r[0].getContext("2d");bs.fillRect(ii*w,Gi*w,L,L)}qe&&(wr[ii][Gi]={item:go,dimension:Ho})}},Ri=function(ii,Gi,To,Ho,go){var bs=go.occupied,is=e.drawMask,Lo;is&&(Lo=r[0].getContext("2d"),Lo.save(),Lo.fillStyle=e.maskColor);var Ss;if(qe){var Xs=go.bounds;Ss={x:(ii+Xs[3])*w,y:(Gi+Xs[0])*w,w:(Xs[1]-Xs[3]+1)*w,h:(Xs[2]-Xs[0]+1)*w}}for(var pl=bs.length;pl--;){var wu=ii+bs[pl][0],Ll=Gi+bs[pl][1];if(!(wu>=bt||Ll>=xt||wu<0||Ll<0)){var $l=Ua(go.item.id);$l&&(go.item.color=$l.color),Ha(wu,Ll,is,Ss,go.item)}}is&&Lo.restore()},Na=function(ii,Gi,To,Ho,go,bs,is,Lo){var Ss=Math.floor(ii[0]-Gi.gw/2),Xs=Math.floor(ii[1]-Gi.gh/2),pl=Gi.gw,wu=Gi.gh;return Ba(Ss,Xs,pl,wu,Gi.occupied)?(La(Ss,Xs,Gi,To,Ho,go,ii[2],bs,is,Lo,!1),Ri(Ss,Xs,pl,wu,Gi),{gx:Ss,gy:Xs,rot:bs,info:Gi}):!1},_o=function(ii){var Gi,To,Ho,go;Array.isArray(ii)?(Gi=ii[0],To=ii[1]):(Gi=ii.word,To=ii.weight,Ho=ii.attributes,go=ii.id);var bs=(0,d.isNil)(ii.rotateDeg)?_i():ii.rotateDeg,is=bi(Gi,To,bs);if(is&&(is.item=ii),!is||Li())return!1;if(!e.drawOutOfBound){var Lo=is.bounds;if(Lo[1]-Lo[3]+1>bt||Lo[2]-Lo[0]+1>xt)return!1}for(var Ss=ie+1;Ss--;){var Xs=Ti(ie-Ss);e.shuffle&&(Xs=[].concat(Xs),jk(Xs));for(var pl=0;pl<Xs.length;pl++){var wu=Na(Xs[pl],is,Gi,To,ie-Ss,bs,Ho,go);if(wu)return wu}}return null},Va=function(ii,Gi,To){if(Gi)return!r.some(function(Ho){var go=document.createEvent("CustomEvent");return go.initCustomEvent(ii,!0,Gi,To||{}),!Ho.dispatchEvent(go)},this);r.forEach(function(Ho){var go=document.createEvent("CustomEvent");go.initCustomEvent(ii,!0,Gi,To||{}),Ho.dispatchEvent(go)},this)},Ua=function(ii){for(var Gi=0;Gi<n.length;Gi++){var To=n[Gi];if(n[Gi].id===ii)return To}},Mo,hs=function(ii){if(ii!==void 0){if(e.selected!==ii&&r[0].getContext){e.selected=ii;var Gi=r[0].getContext("2d");Gi.fillStyle=e.backgroundColor,Gi.clearRect(0,0,r[0].width,r[0].height),Gi.fillRect(0,0,r[0].width,r[0].height);for(var To=0;To<n.length;To++){var Ho=n[To];(!Mo||Mo&&(0,d.get)(Ho,["info","item","twiceRender"]))&&La(Ho.gx,Ho.gy,Ho.info,Ho.word,Ho.weight,Ho.distance,Ho.theta,Ho.rotateDeg,Ho.attributes,Ho.id,!0)}}return}var go=r[0];if(go.getContext)bt=Math.ceil(go.width/w),xt=Math.ceil(go.height/w);else{var bs=go.getBoundingClientRect();bt=Math.ceil(bs.width/w),xt=Math.ceil(bs.height/w)}if(!!Va("wordcloudstart",!0)){qt=e.origin?[e.origin[0]/w,e.origin[1]/w]:[bt/2,xt/(x?4:2)],ie=Math.floor(Math.sqrt(bt*bt+xt*xt)),ht=[];var is,Lo,Ss;if(!go.getContext||e.clearCanvas)for(r.forEach(function(hu){if(hu.getContext){var dl=hu.getContext("2d");dl.fillStyle=e.backgroundColor,dl.clearRect(0,0,bt*(w+1),xt*(w+1)),dl.fillRect(0,0,bt*(w+1),xt*(w+1))}else hu.textContent="",hu.style.backgroundColor=e.backgroundColor,hu.style.position="relative"}),is=bt;is--;)for(ht[is]=[],Lo=xt;Lo--;)ht[is][Lo]=!0;else{var Xs=document.createElement("canvas").getContext("2d");Xs.fillStyle=e.backgroundColor,Xs.fillRect(0,0,1,1);var pl=Xs.getImageData(0,0,1,1).data,wu=go.getContext("2d").getImageData(0,0,bt*w,xt*w).data;is=bt;for(var Ll,$l;is--;)for(ht[is]=[],Lo=xt;Lo--;){$l=w;t:for(;$l--;)for(Ll=w;Ll--;)for(Ss=4;Ss--;)if(wu[((Lo*w+$l)*bt*w+(is*w+Ll))*4+Ss]!==pl[Ss]){ht[is][Lo]=!1;break t}ht[is][Lo]!==!1&&(ht[is][Lo]=!0)}wu=Xs=pl=void 0}if(e.onWordCloudHover||e.onWordCloudClick){for(qe=!0,is=bt+1;is--;)wr[is]=[];e.onWordCloudHover&&go.addEventListener("mousemove",Hn),e.onWordCloudClick&&(go.addEventListener("click",Un),go.addEventListener("touchstart",Un),go.addEventListener("touchend",function(hu){hu.preventDefault()}),go.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),go.addEventListener("wordcloudstart",function hu(){go.removeEventListener("wordcloudstart",hu),go.removeEventListener("mousemove",Hn),go.removeEventListener("click",Un),Vr=void 0})}if(e.animatable){Ss=0;var kl,ef;e.wait!==0?(kl=window.setTimeout,ef=window.clearTimeout):(kl=window.setImmediate,ef=window.clearImmediate);var Wc=function(dl,El){r.forEach(function(jf){jf.addEventListener(dl,El)},this)},mg=function(dl,El){r.forEach(function(jf){jf.removeEventListener(dl,El)},this)},rf=function hu(){mg("wordcloudstart",hu),ef(Pu)};Wc("wordcloudstart",rf);var Pu=kl(function hu(){if(Ss>=e.data.length){ef(Pu),Va("wordcloudstop",!1),mg("wordcloudstart",rf);return}_e=new Date().getTime();var dl=_o(e.data[Ss]),El=!Va("wordclouddrawn",!0,{item:e.data[Ss],drawn:dl});if(Li()||El){ef(Pu),e.abort(),Va("wordcloudabort",!1),Va("wordcloudstop",!1),mg("wordcloudstart",rf);return}Ss++,Pu=kl(hu,e.wait)},e.wait)}else{t.maskImage&&r.forEach(function(hu){if(hu.getContext){var dl=hu.getContext("2d");dl.fillStyle=e.backgroundColor,dl.clearRect(0,0,bt*(w+1),xt*(w+1)),dl.fillRect(0,0,bt*(w+1),xt*(w+1))}});for(var Sf=[],Hf=0;Hf<e.data.length;Hf++){var Fc=_o(e.data[Hf]);Fc&&Sf.push(Fc)}if(Sf.length===e.data.length&&!Mo){for(r.forEach(function(hu){if(hu.getContext){var dl=hu.getContext("2d");dl.fillStyle=e.backgroundColor,dl.clearRect(0,0,bt*(w+1),xt*(w+1)),dl.fillRect(0,0,bt*(w+1),xt*(w+1))}}),is=bt;is--;)for(ht[is]=[],Lo=xt;Lo--;)ht[is][Lo]=!0;Mo=!0;for(var wo=0;wo<e.data.length;wo++)_o((0,Ft.__assign)((0,Ft.__assign)({},e.data[wo]),{twiceRender:Mo}))}}}};hs()};_w.isSupported=xw,_w.minFontSize=Hm;var Xk=_w,Yk=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e._toolTipsAction=function(n,a,o,u){a?(e._toolTips.update({items:[{color:n.color||"red",name:n.word,value:n.weight}],x:o.offsetX,y:o.offsetY}),e._toolTips.show()):e._toolTips.hide(),e._toolTips.render(),e._configHoverAction&&e._configHoverAction(n,a,o,u)},e._configHoverAction=t.onWordCloudHover,e._enableToolTips=(0,d.get)(t,"tooltip.visible",!0),e.options=(0,d.deepMix)({},{width:400,height:400,enableToolTips:!0},t,{onWordCloudHover:e._enableToolTips?e._toolTipsAction:e._configHoverAction}),e}return r.prototype.init=function(){i.prototype.init.call(this),this._initToolTips()},r.prototype.render=function(){i.prototype.render.call(this),this._render()},r.prototype._initToolTips=function(){this._toolTips=new GI({showTitle:!1,visible:!1,parent:this.options.container,follow:!0,inPanel:!1,items:[]}),this._toolTips.init()},r.prototype._render=function(){this._targetCanvas=this.canvas.get("el"),this.options.maskImage?this._handleMaskImage():this._start()},r.prototype._handleMaskImage=function(){var t=this,e=new Image;e.src=this.options.maskImage+"?"+new Date().getTime(),e.crossOrigin="Anonymous",e.onload=function(){e.naturalHeight+e.naturalWidth===0||e.width+e.height===0?t._start():t._startWithMaskImage(e)},e.onerror=function(){console.error("image %s load failed !!!",t.options.maskImage),t._start()}},r.prototype._start=function(){this._handleG2PlotConfig();var t=this._targetCanvas.getContext("2d"),e=this.canvas.get("width")/this.canvas.get("el").width;t.scale(e,e),Xk(this._targetCanvas,this.options)},r.prototype._handleG2PlotConfig=function(){var t=this.options.wordStyle.fontSize||[10,60],e=this.options.wordStyle.rotation||[-Math.PI/2,Math.PI/2],n,a,o;this.options.wordStyle.active?(n=!0,a=this.options.wordStyle.active.shadowColor||"#333",o=this.options.wordStyle.active.shadowBlur||10):n=!1,this.options=(0,d.deepMix)({},this.options,{minFontSize:t[0],maxFontSize:t[1],minRotation:e[0],maxRotation:e[1],active:n,shadowColor:a,shadowBlur:o})},r.prototype._startWithMaskImage=function(t){var e=this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(t)),n=e.maskImageCanvas,a=e.maskImageContext,o=document.createElement("canvas").getContext("2d");o.fillStyle=this.options.backgroundColor||"#fff",o.fillRect(0,0,1,1);for(var u=o.getImageData(0,0,1,1).data,f=a.getImageData(0,0,n.width,n.height),m=a.createImageData(f),x=0;x<f.data.length;x+=4)f.data[x+3]>128?(m.data[x]=u[0],m.data[x+1]=u[1],m.data[x+2]=u[2],m.data[x+3]=u[3]):(m.data[x]=u[0],m.data[x+1]=u[1],m.data[x+2]=u[2],m.data[x+3]=254);a.putImageData(m,0,0);var w=this._targetCanvas.getContext("2d");w.drawImage(n,0,0),this.options=(0,d.deepMix)({},this.options,{clearCanvas:!1}),this._start()},r.prototype._scaleMaskImageCanvas=function(t){var e=document.createElement("canvas");e.width=this.canvas.get("width"),e.height=this.canvas.get("height");var n=e.getContext("2d");return n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),{maskImageCanvas:e,maskImageContext:n}},r.prototype._transformWhite2BlackPixels=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);for(var a=n.getImageData(0,0,e.width,e.height),o=4,u=0,f=255,m=0;m<a.data.length;m+=o){var x=a.data[m]+a.data[m+1]+a.data[m+2],w=a.data[m+3];w<128||x>250*3?(a.data[m]=f,a.data[m+1]=f,a.data[m+2]=f,a.data[m+3]=u):(a.data[m]=u,a.data[m+1]=u,a.data[m+2]=u,a.data[m+3]=f)}return n.putImageData(a,0,0),e},r}(Ly),Wk=Yk,bw=function(i){(0,Ft.__extends)(r,i);function r(t,e){var n=this;return e.renderer="canvas",n=i.call(this,t,e)||this,n}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="wordCloud",e.container=this.containerDOM,i.prototype.createLayers.call(this,e)},r}(Xo),Sw=bw;Es("wordCloud",Wk);var Kk={rose:"interval"},n_=Rc(Kk);(0,d.assign)(Ns,n_);var jm={rose:"interval"},$k={rose:"column"},p1=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rose",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,innerRadius:0,label:{visible:!0,type:"inner",autoRotate:!0,adjustColor:!1},legend:{visible:!0,position:"right"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},columnStyle:{stroke:"white",lineWidth:1},xAxis:{visible:!1,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t),n=t.sectorStyle,a=t.categoryField,o=t.radiusField;return(0,d.deepMix)({},e,{columnStyle:n,xField:a,yField:o})},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;t&&this.view.getScaleByField(t)},r.prototype.getAngleScale=function(){var t=this.options.categoryField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?jm[e]:$k[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.radiusField]={},e[t.categoryField]={type:"cat"},this.setConfig("scales",e)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{plot:this,positionFields:[t.categoryField,t.radiusField],widthRatio:{rose:1}});e.label=this.extractLabel(),e.adjust=this.adjustRoseAdjust(),this.rose=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.adjustRoseAdjust=function(){},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.rose.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,k)},r.prototype.extractLabel=function(){var t=this.options;if(!t.label||!t.label.visible)return!1;var e=(0,d.deepMix)({},t.label);this.adjustLabelOptions(e);var n=[t.categoryField,t.radiusField],a=Dc("label",(0,Ft.__assign)({plot:this,labelType:"polar",fields:n},e));return a},r.prototype.adjustLabelOptions=function(t){var e=this.options.radiusField;if(t){var n=t.offset,a=t.type,o=t.content;a==="inner"?t.offset=n<0?n:-10:a==="outer"&&(t.offset=n>=0?n:10),o||(t.content=function(u,f){return""+f._origin[e]})}},r}(_l),Xm=p1;Es("rose",p1);var Ym=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="rose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Xm.getDefaultOptions,r}(Xo),ww=Ym,Ew=function(i){var r=i.opacity||1;return{opacity:r*.5}},Yc=function(i){var r=i.opacity||1;return{opacity:r*.5}};yf("funnel",{columnStyle:{normal:{},active:Ew,disable:Yc,selected:{lineWidth:1,stroke:"black"}}});var Cw=S(26485);function UI(i,r){r===void 0&&(r=!1);var t=i.x,e=i.y,n=i.y0,a=i.size,o,u;(0,d.isArray)(e)?(o=e[0],u=e[1]):(o=n,u=e);var f,m;(0,d.isArray)(t)?(f=t[0],m=t[1]):(f=t-a/2,m=t+a/2);var x=[{x:f,y:o},{x:f,y:u}];return r?x.push({x:m,y:(u+o)/2}):x.push({x:m,y:u},{x:m,y:o}),x}function Mu(i,r){var t=[],e=i.points,n=i.nextPoints;if(r){var a=r.yValues,o=r.yValuesMax,u=r.yValuesNext,f=(e[0].y+e[1].y)/2,m=a[0]+a[1],x=a.map(function(et){return et/m/.5}),w=(o[0]/(o[0]+o[1])-.5)*.9,L=.001;if((0,d.isNil)(n))t.push(["M",e[0].x,w+(e[0].y-f)*x[0]+f],["L",e[1].x,w+f],["L",e[2].x,w+f],["L",e[3].x,w+(e[3].y-f)*x[0]+f],["Z"]),t.push(["M",e[0].x,w+.002+f],["L",e[1].x,w+.002+(e[1].y-f)*x[1]+f],["L",e[2].x,w+.002+(e[2].y-f)*x[1]+f],["L",e[3].x,w+.002+f],["Z"]);else{var H=u[0]+u[1],W=u.map(function(et){return et/H/.5});t.push(["M",e[0].x,w+(e[0].y-f)*x[0]+f-L],["L",e[1].x,w+f-L],["L",n[1].x,w+f-L],["L",n[0].x,w+(n[3].y-f)*W[0]+f-L],["Z"]),t.push(["M",e[0].x,w+f+L],["L",e[1].x,w+(e[1].y-f)*x[1]+f+L],["L",n[1].x,w+(n[2].y-f)*W[1]+f+L],["L",n[0].x,w+f+L],["Z"])}}else(0,d.isNil)(n)?t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]);return t}ws("interval","funnel-basic-rect",{getPoints:function(i){return i.size=i.size*1.8,UI(i)},draw:function(i,r){var t,e=(0,Cw.getStyle)(i,!1,!0),n=(0,d.get)(i,"data.__compare__"),a=this.parsePath(Mu(i,n));return r.addShape("path",(t={name:"interval",attrs:(0,Ft.__assign)((0,Ft.__assign)({},e),{path:a})},t.__compare__=n,t))},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});function i_(i,r,t){return(1-t)*i+t*r}function Wm(i,r){var t=r.reverse,e=r.ratioUpper,n=r.ratioLower,a=[],o=i[0],u=(i[1].x+i[2].x)/2,f=1.2,m=.6;if(t){var x=n;n=e,e=x}var w=(o.x-u)*i_(m,f,n)+u;a.push(["M",w,o.y]);for(var L=1,H=i.length;L<H;L++){var W=i[L].x;switch(L){case 1:case 2:W=(W-u)*i_(m,f,e)+u;break;case 3:W=(W-u)*i_(m,f,n)+u;break}a.push(["L",W,i[L].y])}return a.push(["L",w,o.y]),a.push(["z"]),a}ws("interval","funnel-dynamic-rect",{draw:function(i,r){var t=(0,Cw.getStyle)(i,!1,!0),e=(0,d.get)(i,"data.__custom__"),n=this.parsePath(Wm(i.points,e));return r.addShape("path",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},t),{path:n})})},getMarker:function(i){var r=i.color,t=i.isInPolar;return{symbol:t?"circle":"square",style:{r:t?4.5:4,fill:r}}}});function X0(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,u=t.callback,f=t.reverse,m=i.getBBox(),x=f?m.maxX:m.minX,w=(m.minY+m.maxY)/2,L=i.setClip({type:"rect",attrs:{x:m.x,y:m.y,width:m.width,height:m.height}}),H={matrix:[1,0,0,0,1,0,0,0,1]};L.setMatrix(Wi.transform(L.getMatrix(),[["t",-x,-w],["s",0,1],["t",x,w]]));var W={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),L.animate(H,{duration:200,easing:o,callback:function(){i.setClip(null),L.remove()},delay:a}),i.animate(W,{duration:n,easing:o,delay:a}),u&&setTimeout(function(){return u(i)},n+a)}X0.animationName="funnelScaleInX",ks("funnelScaleInX",X0);function Aw(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,u=t.callback,f=t.reverse,m=i.getBBox(),x=(m.minX+m.maxX)/2,w=f?m.maxY:m.minY,L=i.setClip({type:"rect",attrs:{x:m.x,y:m.y,width:m.width,height:m.height}}),H={matrix:[1,0,0,0,1,0,0,0,1]};L.setMatrix(Wi.transform(L.getMatrix(),[["t",-x,-w],["s",1,0],["t",x,w]]));var W={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),L.animate(H,{duration:200,easing:o,callback:function(){i.setClip(null),L.remove()},delay:a}),i.animate(W,{duration:n,easing:o,delay:a}),u&&setTimeout(function(){return u(i)},n+a)}Aw.animationName="funnelScaleInY",ks("funnelScaleInY",Aw);function d1(i,r,t){return(1-t)*i+t*r}var VI={column:"interval"},ZI={interval:"funnel"},Mw=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="funnel",e._shouldResetPercentages=!0,e._shouldResetLabels=!0,e._shouldResetCompareTexts=!0,e._legendsListenerAttached=!1,e._onLegendContainerMouseDown=function(n){var a=e.options,o=n.target.get("name");if(o.startsWith("legend-item")){var u=n.target.get("parent");if(u.set("unchecked",!u.get("unchecked")),e.refreshPercentages(),e.refreshLabels(),a.dynamicHeight){var f=e._findCheckedDataByMouseDownLegendItem(u);e._genCustomFieldForDynamicHeight(f)}if(a.compareField){var f=e._findCheckedDataByMouseDownLegendItem(u);e._updateDataForCompare(f),e.refreshCompareTexts()}}},e.adjustProps(e.options),t.dynamicHeight&&e._genCustomFieldForDynamicHeight(e.getData()),t.compareField&&(e.options.data=e._reduceDataForCompare(e.getData())),e}return r.getDefaultOptions=function(t){var e={label:{visible:!0,adjustColor:!0},percentage:{visible:!0,offsetX:t.transpose?0:40,offsetY:t.transpose?40:0,spacing:4,line:{visible:!0,style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}},text:{content:"\u8F6C\u5316\u7387",style:{fill:"rgba(0, 0, 0, 0.65)"}},value:{visible:!0,style:{fill:"black"},formatter:function(n,a){return(100*a/n).toFixed(2)+"%"}}},tooltip:{visible:!0,shared:!0,showTitle:!1,showCrosshairs:!1,showMarkers:!1},animation:(0,d.deepMix)({},sv.DEFAULT_ANIMATE_CFG,{appear:{duration:800}}),dynamicHeight:!1,compareText:{visible:!0,offsetX:-16,offsetY:-16,style:{fill:"black"}},legend:{position:"bottom-center"},interactions:[{type:"tooltip"},{type:"legend-filter"}]};return(0,d.deepMix)({},i.getDefaultOptions.call(this),e)},r.prototype.getColorScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.coord=function(){var t=this.options,e={type:"rect",actions:t.transpose?t.dynamicHeight?[["transpose"],["scale",1,-1]]:[["scale",1,-1]]:t.dynamicHeight?[]:[["transpose"],["scale",1,-1]]};this.setConfig("coordinate",e)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustFunnel=function(t){var e=this.options;t.shape=e.dynamicHeight?"funnel-dynamic-rect":"funnel-basic-rect",t.color={fields:[e.xField],values:e.color&&(Array.isArray(e.color)?e.color:[e.color])},(0,d.isFunction)(e.funnelStyle)?t.style={callback:e.funnelStyle}:t.style={cfg:e.funnelStyle},t.adjust=[{type:e.dynamicHeight?"stack":"symmetric"}]},r.prototype.tooltip=function(){var t=this.options;t.compareField&&(0,d.deepMix)(t.tooltip,{htmlContent:function(e,n){var a,o,u,f;a=Xa.CONTAINER_CLASS,o=(0,ne.Z)('<div class="'+a+'"></div>'),(0,ve.Z)(o,jv.default[a]);var m=o;if(e){a=Xa.TITLE_CLASS,o=(0,ne.Z)('<div class="'+a+'"></div>'),(0,ve.Z)(o,jv.default[a]),m.appendChild(o);var x=o;a=Xa.MARKER_CLASS,o=(0,ne.Z)('<span class="'+a+'"></span>'),(0,ve.Z)(o,jv.default[a]),(0,ve.Z)(o,{width:"10px",height:"10px"}),x.appendChild(o),f=o,o=(0,ne.Z)("<span>"+e+"</span>"),x.appendChild(o)}if(n){a=Xa.LIST_CLASS,o=(0,ne.Z)('<ul class="'+a+'"></ul>'),(0,ve.Z)(o,jv.default[a]),m.appendChild(o);var w=o;n.reduce(function(L,H){u||(u=H.color);var W=(0,d.get)(H,"point._origin.__compare__.compareValues"),et=(0,d.get)(H,"point._origin.__compare__.yValues");return et.forEach(function(ht,bt){return L.push([W[bt],ht])}),L},[]).forEach(function(L,H){var W=L[0],et=L[1];a=Xa.LIST_ITEM_CLASS,o=(0,ne.Z)('<li class="'+a+'" data-index='+H+"></li>"),(0,ve.Z)(o,jv.default[a]),w.appendChild(o);var ht=o;a=Xa.NAME_CLASS,o=(0,ne.Z)('<span class="'+a+'">'+W+"</span>"),(0,ve.Z)(o,jv.default[a]),ht.appendChild(o),a=Xa.VALUE_CLASS,o=(0,ne.Z)('<span class="'+a+'">'+et+"</span>"),(0,ve.Z)(o,jv.default[a]),ht.appendChild(o)})}return u&&f&&(0,ve.Z)(f,{backgroundColor:u}),m}}),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.dynamicHeight?"_":t.xField,t.yField],plot:this});this.adjustFunnel(e),this.funnel=e,this.setConfig("geometry",e),t.compareField||this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.options.tooltip;t.fields&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.fields=t.fields),t.formatter&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.callback=t.formatter,t.fields||(this.funnel.tooltip.fields=[this.options.xField,this.options.yField]))},r.prototype.animation=function(){var t=this;i.prototype.animation.call(this);var e=this.options;if(e.animation===!1)this.funnel.animate=!1;else{var n=this.getData(),a=(0,d.get)(e,"animation.appear.duration"),o=a/(n.length||1);this._animationAppearTimeoutHandler&&(clearTimeout(this._animationAppearTimeoutHandler),delete this._animationAppearTimeoutHandler),this._animationAppearTimeoutHandler=setTimeout(function(){t.fadeInPercentages(o),e.compareField&&t.fadeInCompareTexts(o),delete t._animationAppearTimeoutHandler},a),this.funnel.animate=(0,d.deepMix)({},e.animation,{appear:{animation:e.transpose?"funnelScaleInX":"funnelScaleInY",duration:o,delay:function(u){return(0,d.findIndex)(n,function(f){return(0,d.isEqual)(f,u)})*o},callback:function(u){t.fadeInLabels(u,.5*o)}},enter:{animation:"fade-in"}})}},r.prototype.afterRender=function(){var t=this.options;if(this.resetLabels(),this.resetPercentages(),t.compareField&&this.resetCompareTexts(),t.padding=="auto"){var e=this._findPercentageContainer();e&&this.paddingController.registerPadding(e,"inner",!0);var n=this._findCompareTextContainer();n&&this.paddingController.registerPadding(n,"inner",!0)}if(i.prototype.afterRender.call(this),t.animation===!1&&(this.fadeInLabels(),this.fadeInPercentages(),t.compareField&&this.fadeInCompareTexts()),!this._legendsListenerAttached){this._legendsListenerAttached=!0;var a=this.view.getController("legend").container;a.on("mousedown",this._onLegendContainerMouseDown)}},r.prototype.updateConfig=function(t){t=this.adjustProps(t),i.prototype.updateConfig.call(this,t),this._legendsListenerAttached=!1},r.prototype.changeData=function(t){var e=this.options;if(e.animation!==!1&&(this._shouldResetPercentages=!1,this._shouldResetLabels=!1),e.dynamicHeight){var n=this._findCheckedDataInNewData(t);this._genCustomFieldForDynamicHeight(n)}if(e.compareField){t=this._reduceDataForCompare(t);var n=this._findCheckedDataInNewData(t);this._updateDataForCompare(n)}i.prototype.changeData.call(this,t),this.refreshPercentages(),this.refreshLabels(),e.compareField&&this.fadeInCompareTexts()},r.prototype.geometryParser=function(t,e){return t==="g2"?VI[e]:ZI[e]},r.prototype.adjustProps=function(t){return t.compareField&&(t.dynamicHeight=!1),t.dynamicHeight&&((0,d.set)(t,"meta."+t.yField+".nice",!1),(0,d.set)(t,"tooltip.shared",!1)),t},r.prototype.resetPercentages=function(){var t=this;if(!!this._shouldResetPercentages){var e=this.options,n=e.percentage||{},a=n.offsetX,o=n.offsetY,u=n.spacing,f=n.line,m=f===void 0?{}:f,x=n.text,w=x===void 0?{}:x,L=n.value,H=L===void 0?{}:L,W=Date.now(),et=this._findPercentageContainer(!0);this._eachShape(function(ht,bt,xt,qt){if(bt>0){var ie=ht.getBBox(),_e=ie.minX,ze=ie.maxX,rr=ie.maxY,sr=ie.minY,qe=e.transpose?_e:ze,wr=e.transpose&&e.compareField?rr:sr,Vr=t._findPercentageMembersInContainerByIndex(et,bt,!0),Br=Vr.line,Tn=Vr.text,Hn=Vr.value,Un=[function(_i,bi,Ba,La,Ha){Ba&&(Ba.attr((0,d.deepMix)({},m.style,{x1:_i,y1:bi,x2:e.transpose?_i+a:_i-a,y2:e.transpose?bi-o:bi+o,opacity:0})),Ba.set("adjustTimestamp",W));var Ri=0,Na=0,_o=function(){La&&(La.attr((0,d.deepMix)({},w.style,{x:e.transpose?_i+a:_i-a-u-Na-u,y:e.transpose?bi-o-u:bi+o,opacity:0,text:w.content,textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),La.set("adjustTimestamp",W),Ri=La.getBBox().width)},Va=function(){Ha&&(Ha.attr((0,d.deepMix)({},H.style,{x:e.transpose?_i+a+Ri+u:_i-a-u,y:e.transpose?bi-o-u:bi+o,opacity:0,text:(0,d.isFunction)(H.formatter)?e.compareField?H.formatter((0,d.get)(qt,"__compare__.yValues.0"),(0,d.get)(xt,"__compare__.yValues.0")):H.formatter(qt[e.yField],xt[e.yField]):"",textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),Ha.set("adjustTimestamp",W),Na=Ha.getBBox().width)};e.transpose?(_o(),Va()):(Va(),_o())},function(_i,bi,Ba,La,Ha){Ba&&(Ba.attr((0,d.deepMix)({},m.style,{x1:_i,y1:bi,x2:_i+a,y2:e.transpose?e.compareField?bi+o:bi-o:bi+o,opacity:0})),Ba.set("adjustTimestamp",W));var Ri=0;La&&(La.attr((0,d.deepMix)({},w.style,{x:e.transpose?_i+a:_i+a+u,y:e.transpose?e.compareField?bi+o+u:bi-o-u:bi+o,opacity:0,text:w.content,textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),La.set("adjustTimestamp",W),Ri=La.getBBox().width),Ha&&(Ha.attr((0,d.deepMix)({},H.style,{x:e.transpose?_i+a+Ri+u:_i+a+u+Ri+u,y:e.transpose?e.compareField?bi+o+u:bi-o-u:bi+o,opacity:0,text:(0,d.isFunction)(H.formatter)?e.compareField?H.formatter((0,d.get)(qt,"__compare__.yValues.1"),(0,d.get)(xt,"__compare__.yValues.1")):H.formatter(qt[e.yField],xt[e.yField]):"",textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),Ha.set("adjustTimestamp",W))}];if(e.compareField){var Ei=[_e,sr],Ti=Ei[0],Li=Ei[1];[[Ti,Li],[qe,wr]].forEach(function(_i,bi){var Ba=_i[0],La=_i[1];return Un[bi](Ba,La,Br&&Br[bi],Tn&&Tn[bi],Hn&&Hn[bi])})}else Un[1](qe,wr,Br,Tn,Hn)}qt=xt,bt++}),et.get("children").forEach(function(ht){ht.get("adjustTimestamp")!=W&&(ht.attr({opacity:0}),et.set(ht.get("id"),null),setTimeout(function(){return ht.remove()},0))})}},r.prototype.fadeInPercentages=function(t,e){var n=this,a=this.options,o=this._findPercentageContainer(),u=function(f){var m={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity};n._eachShape(function(x,w){var L=n._findPercentageMembersInContainerByIndex(o,w),H={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity},W=function(ht){if(ht&&ht.get("type")=="text"){var bt=ht.getBBox(),xt=bt.minX,qt=bt.maxX,ie=bt.minY,_e=bt.maxY;xt<H.minX&&(H.minX=xt),qt>H.maxX&&(H.maxX=qt),ie<H.minY&&(H.minY=ie),_e>H.maxY&&(H.maxY=_e)}};if((0,d.each)(L,function(ht){return(0,d.isArray)(ht)?W(ht[f]):W(ht)}),H.minX>m.maxX||H.maxX<m.minX||H.minY>m.maxY||H.maxY<m.minY){var et=function(ht){if(ht){var bt={opacity:1};t?ht.animate(bt,t):ht.attr(bt)}};(0,d.each)(L,function(ht){return(0,d.isArray)(ht)?et(ht[f]):et(ht)}),(0,d.assign)(m,H)}})};a.compareField?[0,1].forEach(u):u(),t&&e&&setTimeout(e,t)},r.prototype.fadeOutPercentages=function(t,e){var n=this,a=this._findPercentageContainer();this._eachShape(function(o,u){var f=n._findPercentageMembersInContainerByIndex(a,u),m=function(x){if(x){var w={opacity:0};t?x.animate(w,t):x.attr(w)}};(0,d.each)(f,function(x){return(0,d.isArray)(x)?x.forEach(m):m(x)})}),t&&e&&setTimeout(e,t)},r.prototype.refreshPercentages=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,u=a.fadeInDuration;this._shouldResetPercentages=!1,this.fadeOutPercentages(o,function(){e._shouldResetPercentages=!0,e.resetPercentages(),e.fadeInPercentages(u,t)})}},r.prototype._findPercentageContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("percentageContainer");return!n&&t&&(n=e.addGroup(),e.set("percentageContainer",n)),n},r.prototype._findPercentageMembersInContainerByIndex=function(t,e,n){n===void 0&&(n=!1);var a=this.options,o=a.percentage||{},u=o.visible,f=o.line,m=f===void 0?{}:f,x=o.text,w=x===void 0?{}:x,L=o.value,H=L===void 0?{}:L,W={line:void 0,text:void 0,value:void 0};if(u===!1||!t)return W;if(m.visible!==!1){var et=function(qt){var ie="_percentage-line-"+e+"-"+qt,_e=t.get(ie);return!_e&&n&&(_e=t.addShape({id:ie,type:"line",attrs:{}}),t.set(ie,_e)),_e},ht=a.compareField?[0,1].map(et):et(0);W.line=ht}if(w.visible!==!1){var et=function(ie){var _e="_percentage-text-"+e+"-"+ie,ze=t.get(_e);return!ze&&n&&(ze=t.addShape({id:_e,type:"text",attrs:{}}),t.set(_e,ze)),ze},bt=a.compareField?[0,1].map(et):et(0);W.text=bt}if(H.visible!==!1){var et=function(ie){var _e="_percentage-value-"+e+"-"+ie,ze=t.get(_e);return!ze&&n&&(ze=t.addShape({id:_e,type:"text",attrs:{}}),t.set(_e,ze)),ze},xt=a.compareField?[0,1].map(et):et(0);W.value=xt}return W},r.prototype._calcRefreshFadeDurations=function(){var t=this.options,e=(0,d.get)(t,"animation.update.duration"),n=(0,d.get)(t,"animation.enter.duration"),a=Math.min(n,e)*.6,o=Math.max(n,e)*1.2;return{fadeInDuration:a,fadeOutDuration:o}},r.prototype.resetLabels=function(){var t=this;if(!!this._shouldResetLabels){var e=this.options,n=e.xField,a=e.yField,o=Date.now(),u=this._getGeometry().labelsContainer,f=e.label||{},m=(0,d.deepMix)((0,Ft.__assign)({},this.theme.label),e.label.style,{opacity:0,textAlign:"center",textBaseline:"middle"}),x;this._eachShape(function(w,L,H,W){var et,ht=w.get("element");L==0&&(x=H);var bt=w.getBBox(),xt=bt.minX,qt=bt.maxX,ie=bt.minY,_e=bt.maxY,ze=H[n],rr=H[a];f.adjustColor&&(m.fill=t._getAdjustedTextFillByShape(w));var sr=H.__compare__,qe,wr=(et={},et[bm]=H,et.element=ht,et.elementIndex=W,et.mappingDatum=[].concat(ht.getModel().mappingData)[0],et.mappingDatumIndex=0,et);f.formatter?qe=f.formatter(ze,wr,L,rr,x[a]):sr?qe=[0,1].map(function(){return""+rr}).join(e.transpose?`

`:"    "):qe=ze+" "+rr;var Vr=t._findLabelInContainerByIndex(u,L,!0),Br=sr?sr.yValues[0]/(sr.yValues[0]+sr.yValues[1]):.5;Vr&&(Vr.attr((0,Ft.__assign)((0,Ft.__assign)({},m),{x:d1(xt,qt,e.transpose?.5:Br),y:d1(ie,_e,e.transpose?Br:.5),text:qe})),Vr.set("adjustTimestamp",o))}),u.get("children").forEach(function(w){w.get("adjustTimestamp")!=o&&(w.attr({opacity:0}),u.set(w.get("id"),null),setTimeout(function(){return w.remove()}))})}},r.prototype.fadeInLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(u,f){if(!t||t==u){var m=a._findLabelInContainerByIndex(o,f);if(m){var x=u.getBBox(),w=m.getBBox();if(w.minX>=x.minX&&w.maxX<=x.maxX&&w.minY>=x.minY&&w.maxY<=x.maxY){var L={opacity:1};e?m.animate(L,e):m.attr(L)}}}}),e&&n&&setTimeout(n,e)},r.prototype.fadeOutLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(u,f){if(!t||t==u){var m=a._findLabelInContainerByIndex(o,f);if(m){var x={opacity:0};e?m.animate(x,e):m.attr(x)}}}),e&&n&&setTimeout(n,e)},r.prototype.refreshLabels=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,u=a.fadeInDuration;this._shouldResetLabels=!1,this.fadeOutLabels(null,o,function(){e._shouldResetLabels=!0,e.resetLabels(),e.fadeInLabels(null,u,t)})}},r.prototype._findLabelInContainerByIndex=function(t,e,n){var a;n===void 0&&(n=!1);var o=this.options,u;if(((a=o.label)===null||a===void 0?void 0:a.visible)===!1)return u;var f="_label-"+e;return u=t.get(f),!u&&n&&(u=t.addShape({id:f,type:"text",attrs:{}}),t.set(f,u)),u},r.prototype.resetCompareTexts=function(){if(!!this._shouldResetCompareTexts){var t=this.options,e,n;if(this._eachShape(function(H,W,et){W==0&&(e=H.get("parent").getBBox(),n=(0,d.get)(et,"__compare__"))}),e&&n&&(0,d.get)(t,"compareText.visible")!==!1){var a=this._findCompareTextContainer(!0),o=n.yValuesMax,u=n.compareValues,f=e.minX,m=e.maxX,x=e.minY,w=e.maxY,L=a.get("children");[0,1].forEach(function(H){var W=L[H];W||(W=a.addShape({type:"text"})),W.attr((0,d.deepMix)({},(0,d.get)(t,"compareText.style"),{text:t.transpose?u[H]:H?"  "+u[H]:u[H]+"  ",x:t.transpose?f+(0,d.get)(t,"compareText.offsetX"):d1(f,m,o[0]/(o[0]+o[1])),y:t.transpose?d1(x,w,o[0]/(o[0]+o[1]))+(H?8:-8):x+(0,d.get)(t,"compareText.offsetY"),opacity:0,textAlign:t.transpose?"right":H?"left":"right",textBaseline:t.transpose&&H?"top":"bottom"}))})}}},r.prototype.fadeInCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var u=a[o];if(u){var f={opacity:1};t?u.animate(f,t):u.attr(f)}})}t&&e&&setTimeout(e,t)},r.prototype.fadeOutCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var u=a[o];if(u){var f={opacity:0};t?u.animate(f,t):u.attr(f)}})}t&&e&&setTimeout(e,t)},r.prototype.refreshCompareTexts=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeInDuration,u=a.fadeOutDuration;this._shouldResetCompareTexts=!1,this.fadeOutCompareTexts(u,function(){e._shouldResetCompareTexts=!0,e.resetCompareTexts(),e.fadeInCompareTexts(o,t)})}},r.prototype._findCompareTextContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("compareTextContainer");return!n&&t&&(n=e.addGroup(),e.set("compareTextContainer",n)),n},r.prototype._eachShape=function(t){var e,n=this._findCheckedData(this.getData()),a=n.length,o=0,u;(e=this._getGeometry())===null||e===void 0||e.elements.forEach(function(f,m){var x=f.shape,w=n[o];o<a&&t(x,o,w,u,m),u=w,o++})},r.prototype._getGeometry=function(){return this.view.geometries[0]},r.prototype._getAdjustedTextFillByShape=function(t){var e=t.attr("fill"),n=t.attr("opacity")?t.attr("opacity"):1,a=_d(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,u=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],f=km(u,o);return f},r.prototype._genCustomFieldForDynamicHeight=function(t){var e=this.options,n=t.reduce(function(o,u){return o+u[e.yField]},0),a=1;t.forEach(function(o,u){var f=o[e.yField],m=f/n,x=a-m;o.__custom__={datumIndex:u,dataLength:t.length,ratioUpper:a,ratioLower:x,reverse:e.transpose},a=x})},r.prototype._findCheckedDataByMouseDownLegendItem=function(t){var e=t.get("parent").get("children").map(function(a){return!a.get("unchecked")}),n=this.getData().filter(function(a,o){return e[o]});return n},r.prototype._findCheckedDataInNewData=function(t){var e=this.options,n=this.view.getController("legend").container,a=n.findAll(function(u){return u.get("name")=="legend-item"}).filter(function(u){return u.get("unchecked")}).map(function(u){return u.get("id").replace("-legend-item-","")}),o=t.filter(function(u){return!(0,d.contains)(a,u[e.xField])});return o},r.prototype._findCheckedData=function(t){var e,n=this.options;if((e=n.legend)===null||e===void 0?void 0:e.visible){var a=this.view.getController("legend").container,o=a.findAll(function(f){return f.get("name")=="legend-item"}).filter(function(f){return!f.get("unchecked")}).map(function(f){return f.get("id").replace("-legend-item-","")}),u=t.filter(function(f){return(0,d.contains)(o,f[n.xField])});return u}else return this.processData(n.data)},r.prototype._reduceDataForCompare=function(t){var e=this.options,n,a=[-Infinity,-Infinity];return t=t.reduce(function(o,u){var f,m=u[e.xField],x=u[e.yField],w=u[e.compareField];n||(n=w);var L=o.find(function(W){return W[e.xField]==m});L||(L=(f={},f[e.xField]=m,f[e.yField]=0,f.__compare__={compareValues:[],yValues:[],yValuesMax:[],yValuesNext:void 0,transpose:e.transpose},f),o.push(L));var H=w==n?0:1;return L.__compare__.yValues[H]=x,a[H]<x&&(a[H]=x),L.__compare__.compareValues[H]=w,o},[]),t.forEach(function(o,u){o[e.yField]=(0,d.get)(o,"__compare__.yValues",[]).reduce(function(f,m){return f+=m},0),(0,d.set)(o,"__compare__.yValuesMax",a),(0,d.set)(o,"__compare__.yValuesNext",(0,d.get)(t,u+1+".__compare__.yValues"))}),t},r.prototype._updateDataForCompare=function(t){var e=[-Infinity,-Infinity];t.forEach(function(n){var a=(0,d.get)(n,"__compare__.yValues");[0,1].forEach(function(o){a[o]>e[o]&&(e[o]=a[o])})}),t.forEach(function(n,a){(0,d.set)(n,"__compare__.yValuesMax",e),(0,d.set)(n,"__compare__.yValuesNext",(0,d.get)(t,a+1+".__compare__.yValues"))})},r}(_l),Tw=Mw;Es("funnel",Mw);var Pw=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="funnel",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Tw.getDefaultOptions,r}(Xo),HI=Pw,Iw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"stack"}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.stackField]))},r}(Xm),jI=Iw;Es("stackedRose",Iw);var Ow=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedRose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=jI.getDefaultOptions,r}(Xo),Lw=Ow,a_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"dodge",marginRatio:1}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.groupField]))},r}(Xm),XI=a_;Es("groupedRose",a_);var YI=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedRose",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=XI.getDefaultOptions,r}(Xo),kw=YI,WI={area:"area",line:"line",point:"point"},KI=Rc(WI);(0,d.assign)(Ns,KI);var $I=function(i){var r=i.opacity||1;return{opacity:r}},QI=function(i){var r=i.opacity||1;return{opacity:r*.5}},Rw=function(i){var r=i.opacity||1;return{opacity:r}},qI=function(i){var r=i.opacity||1;return{opacity:r*.5}},JI=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},tO=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},Dw=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},eO=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}};yf("radar",{areaStyle:{normal:{},active:$I,disable:QI,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:Rw,disable:qI,selected:JI},pointStyle:{normal:{},active:tO,disable:eO,selected:Dw}});var rO={area:"area",line:"line",point:"point"},Bw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radar",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,smooth:!1,line:{visible:!0,size:2,style:{opacity:1}},area:{visible:!0,style:{opacity:.25}},point:{visible:!1,size:4,shape:"point",style:{opacity:1}},angleAxis:{visible:!0,autoRotateTitle:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1}},radiusAxis:{min:0,visible:!0,nice:!0,autoRotateTitle:!0,line:{visible:!0},tickLine:{visible:!0},gridType:"line",grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1}},label:{visible:!1,type:"point"},legend:{visible:!0,position:"left-top"},tooltip:{visible:!0,shared:!0,showCrosshairs:!1}})},r.prototype.init=function(){var t=this.options;t.xField=t.angleField,t.yField=t.radiusField,i.prototype.init.call(this)},r.prototype.getAngleScale=function(){var t=this.options.angleField;return this.view.getScaleByField(t)},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options.seriesField;return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return rO[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.angleField]={},(0,d.has)(t,"angleAxis")&&wc(e[t.angleField],t.angleAxis),e[t.radiusField]={},(0,d.has)(t,"radiusAxis")&&wc(e[t.radiusField],t.radiusAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius}};this.setConfig("coordinate",e)},r.prototype.axis=function(){var t=this.options,e=Dc("axis",{plot:this,dim:"angle"}),n=Dc("axis",{plot:this,dim:"radius"}),a={};a[t.angleField]=e,a[t.radiusField]=n,this.setConfig("axes",a)},r.prototype.addGeometry=function(){var t=this.options;if(t.area.visible){var e=Yo("area","main",{plot:this});this.setConfig("geometry",e),this.area=e}if(t.line&&t.line.visible){var n=Yo("line","main",{plot:this});this.setConfig("geometry",n),this.line=n}if(t.point&&t.point.visible){var a=Yo("point","guide",{plot:this});this.setConfig("geometry",a),this.point=a}t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.line?this.line:this.area;t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.angleField,this.options.radiusField]),this.options.seriesField&&t.tooltip.fields.push(this.options.seriesField))},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.point&&(this.point.label=!1),this.line&&(this.line.label=!1),this.area&&(this.area.label=!1);return}var e=Dc("label",(0,Ft.__assign)({fields:[t.radiusField],cfg:{type:"polar",autoRotate:!1},plot:this},t.label));this.point?this.point.label=e:this.line?this.line.label=e:this.area&&(this.area.label=e)},r.prototype.annotation=function(){},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area&&(this.area.animate=!1),this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,V)},r}(_l),nO=Bw;Es("radar",Bw);var iO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="radar",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getColorScale=function(){var t=this.layers[0];return t.getColorScale()},r.getDefaultOptions=nO.getDefaultOptions,r}(Xo),Fw=iO,Nw=S(89810),aO=S(79189),oO=function(){function i(r){var t=this.getDefaultOptions();this.options=(0,d.deepMix)(t,r,{}),this.x=this.options.x,this.y=this.options.y,this.html=this.options.html,this.container=this.options.container}return i.prototype.render=function(){if((0,d.isElement)(this.container)){this.wrapperNode=(0,ne.Z)('<div class="g2plot-htmlStatistic"></div>'),this.container.appendChild(this.wrapperNode),(0,ve.Z)(this.wrapperNode,{position:"absolute",pointerEvents:"none"});var r=this.html;this.wrapperNode.appendChild(r),this.setDomPosition(this.x,this.y)}},i.prototype.updateHtml=function(r){(0,d.isType)(r,"HTMLDivElement")?(this.wrapperNode.innerHTML="",this.wrapperNode.appendChild(r)):this.wrapperNode.innerHTML=r,this.setDomPosition(this.x,this.y)},i.prototype.updatePosition=function(r,t){this.x=r,this.y=t,this.setDomPosition(r,t)},i.prototype.destroy=function(){this.container.removeChild(this.wrapperNode)},i.prototype.getDefaultOptions=function(){return{x:0,y:0,width:0,height:0,html:"",container:null,alignX:"middle",alignY:"middle"}},i.prototype.setDomPosition=function(r,t){var e=r,n=t,a=(0,Nw.Z)(this.wrapperNode),o=(0,aO.Z)(this.wrapperNode);this.options.alignX==="middle"&&(e=r-a/2),this.options.alignY==="middle"&&(n=t-o/2),(0,ve.Z)(this.wrapperNode,{top:Math.round(n)+"px",left:Math.round(e)+"px",transform:a>0?"none":"translate(-50%, -50%)"})},i}(),zw=oO,sO="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",uO="font-size:32px;font-weight:bold;color:#4D4D4D";function lO(i,r){var t='<span class="liquid-guide-value" style='+uO+">"+i+"</span>";return'<div class="liquid-guide-html '+r+'" style='+sO+">"+t+"</div>"}var cO=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.getTotalHtmlString=function(){var t=document.createElement("div"),e=this.plot.options,n=e.value,a=n===void 0?0:n,o=e.statistic;if(o&&!o.visible)return t;var u=this.options.htmlContent(a);return(0,d.isType)(u,"HTMLDivElement")?t.appendChild(u):t.innerHTML=lO(u,this.statisticClass),t},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r}(zw),fO=cO,Gw={liquid:"intervl",statistic:"annotation-text"},hO=Rc(Gw);(0,d.assign)(Ns,hO);var Uw=qc(),Vw={splitPoints:function(i){var r=[],t=i.x,e=i.y;return e=(0,d.isArray)(e)?e:[e],(0,d.each)(e,function(n,a){var o={x:(0,d.isArray)(t)?t[a]:t,y:n};r.push(o)}),r},addFillAttrs:function(i,r){r.color&&!i.fill&&(i.fill=r.color),(0,d.isNumber)(r.opacity)&&(i.opacity=i.fillOpacity=r.opacity)},addStrokeAttrs:function(i,r){r.color&&!i.stroke&&(i.stroke=r.color),(0,d.isNumber)(r.opacity)&&(i.opacity=i.strokeOpacity=r.opacity)}},v1={lerp:function(i,r,t){return(1-t)*i+t*r}},pO=function(i){var r={lineWidth:0,fill:Uw.color,fillOpacity:.85},t=(0,d.mix)({},r,i.style);return Vw.addFillAttrs(t,i),i.color&&!t.stroke&&(t.stroke=t.stroke||i.color),t},dO=function(i){var r={fill:"#fff",stroke:Uw.color,fillOpacity:0,lineWidth:2},t=(0,d.mix)({},r,i.style);return Vw.addStrokeAttrs(t,i),t};function vO(i,r,t,e){return r===0?[[i+1/2*t/Math.PI/2,e/2],[i+1/2*t/Math.PI,e],[i+t/4,e]]:r===1?[[i+1/2*t/Math.PI/2*(Math.PI-2),e],[i+1/2*t/Math.PI/2*(Math.PI-1),e/2],[i+t/4,0]]:r===2?[[i+1/2*t/Math.PI/2,-e/2],[i+1/2*t/Math.PI,-e],[i+t/4,-e]]:[[i+1/2*t/Math.PI/2*(Math.PI-2),-e],[i+1/2*t/Math.PI/2*(Math.PI-1),-e/2],[i+t/4,0]]}function gO(i,r,t,e,n,a,o){for(var u=Math.ceil(2*i/t*4)*2,f=[],m=e;m<-Math.PI*2;)m+=Math.PI*2;for(;m>0;)m-=Math.PI*2;m=m/Math.PI/2*t;var x=a-i+m-i*2;f.push(["M",x,r]);for(var w=0,L=0;L<u;++L){var H=L%4,W=vO(L*t/4,H,t,n);f.push(["C",W[0][0]+x,-W[0][1]+r,W[1][0]+x,-W[1][1]+r,W[2][0]+x,-W[2][1]+r]),L===u-1&&(w=W[2][0])}return f.push(["L",w+x,o+i]),f.push(["L",x,o+i]),f.push(["L",x,r]),f}function mO(i,r,t,e,n,a,o,u){for(var f=o.getBBox(),m=f.maxX-f.minX,x=f.maxY-f.minY,w=5e3,L=0;L<e;L++){var H=e<=1?0:L/(e-1),W=a.addShape("path",{attrs:{path:gO(u,f.minY+x*t,m/4,0,m/v1.lerp(56,64,H),i,r),fill:n,opacity:v1.lerp(.6,.3,H)}}),et=vd([["t",m/2,0]]);W.animate({matrix:et},{duration:v1.lerp(w,.7*w,H),repeat:!0})}}ws("interval","liquid-fill-gauge",{draw:function(i,r){var t=.5,e=Infinity;(0,d.each)(i.points,function(L){L.x<e&&(e=L.x)});var n=.5,a=this.parsePoint({x:n,y:t}),o=this.parsePoint({x:e,y:.5}),u=a.x-o.x,f=Math.min(u,o.y),m=pO(i).fill,x=r.addGroup({name:"waves",attrs:{x:a.x,y:a.y}});x.setClip({type:"circle",attrs:{x:a.x,y:a.y,r:f}});var w=x.get("clipShape");return mO(a.x,a.y,1-i.points[1].y,3,m,x,w,f*4),r.addShape("circle",{name:"wrap",attrs:(0,d.mix)(dO(i),{x:a.x,y:a.y,r:f,fill:"transparent"})}),x[0]}});function Zw(i,r){var t=i.get("parent"),e=t.getBBox(),n=Math.min(Math.max(0,(0,d.get)(r,"factor",.5)),1),a=(0,d.get)(r,"delay",0),o=(0,d.get)(r,"duration",800),u=r.callback,f=(e.minX+e.maxX)/2,m=e.maxY,x=t.find(function(et){return et.get("name")=="wrap"}),w=x.attr("opacity");x.attr("opacity",0),x.animate({opacity:w},o*n,"easeLinear",null,a);var L=t.find(function(et){return et.get("name")=="waves"}),H=(0,d.clone)(L.attr("matrix"))||[1,0,0,0,1,0,0,0,1],W=vd(H,[["t",-f,-m],["s",1,0],["t",f,m]]);L.setMatrix(W),L.animate({matrix:H},o,r.easing,function(){return u&&u(t,x,L)},a)}Zw.animationName="liquidMoveIn",ks("liquidMoveIn",Zw);var Hw={column:"interval"},yO={interval:"liquid"},jw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="liquid",t.shouldFadeInAnnotation=!0,t}return r.getDefaultOptions=function(){var t={padding:[0,0,0,0],animation:{factor:.4,easing:"easeExpOut",duration:800},liquidStyle:{lineWidth:2},color:"#6a99f9",interactions:[],statistic:{visible:!0}};return(0,d.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){var t=this.options,e=t.min,n=t.max,a=t.value;if(!(0,d.isNumber)(e))throw new Error("The min value of Liquid is required, and the type of min must be Number.");if(!(0,d.isNumber)(n))throw new Error("The max value of Liquid is required, and the type of max must be Number.");if(!(0,d.isNumber)(a))throw new Error("The value of Liquid is required, and the type of value must be Number.")},r.prototype.init=function(){this.options.data=[{}],i.prototype.init.call(this)},r.prototype.coord=function(){},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a={value:{}};wc(a.value,{min:Math.min(e,n),max:Math.max(e,n)}),this.setConfig("scales",a),i.prototype.scale.call(this)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustLiquid=function(t){var e=this.options;t.shape={values:["liquid-fill-gauge"]},t.tooltip=!1;var n=e.liquidStyle;(0,d.isFunction)(n)&&(n=n()),n&&(t.style=n)},r.prototype.addGeometry=function(){var t=Yo("interval","main",{positionFields:[1,"value"],plot:this});this.adjustLiquid(t);var e=this.getViewRange(),n=Math.min(e.width,e.height)*.8,a=this.options.liquidSize?this.options.liquidSize:n;t.size={values:[a]},this.liquid=t,this.setConfig("geometry",t)},r.prototype.animation=function(){var t=this.options;if(t.animation===!1)this.liquid.animate=!1;else{var e=(0,d.get)(t,"animation.factor"),n=(0,d.get)(t,"animation.easing"),a=(0,d.get)(t,"animation.duration");this.liquid.animate={appear:{animation:"liquidMoveIn",factor:e,easing:n,duration:a}}}},r.prototype.geometryParser=function(t,e){return t==="g2"?Hw[e]:yO[e]},r.prototype.annotation=function(){var t=[],e=this.extractStatistic();t.push(e),this.setConfig("annotations",t)},r.prototype.useHtmlContent=function(){var t=this.options,e=t.statistic||{};return(0,d.isFunction)(e.htmlContent)},r.prototype.extractStatistic=function(){if(!this.useHtmlContent()){var t=this.options,e=t.statistic||{},n;(0,d.isFunction)(e.formatter)?n=e.formatter(t.value):n=""+t.value;var a,o;if(n){var u=Math.min(this.width,this.height);a=u/n.length*.5,o=Math.max(1,Math.ceil(.025*a))}var f;if(e.visible!==!1){var m=(0,d.deepMix)({style:{fontSize:a,shadowBlur:o}},{top:!0,content:n,type:"text",position:["50%","50%"],style:{opacity:f,fill:"transparent",shadowColor:"transparent",textAlign:"center"}},e);return delete m.visible,delete m.formatter,delete m.adjustColor,m}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,X)},r.prototype.afterRender=function(){var t;((t=this.options.statistic)===null||t===void 0?void 0:t.visible)&&!this.useHtmlContent()&&this.fadeInAnnotation();var e=this.options,n=e.padding?e.padding:this.config.theme.padding;if(e.defaultState&&n!=="auto"&&this.stateController.defaultStates(e.defaultState),n==="auto"&&this.paddingController.processAutoPadding(),this.useHtmlContent()){var a=this.canvas.get("container");if(this.statistic&&a.removeChild(this.statistic.wrapperNode),this.options.statistic&&this.options.statistic.visible){var o=this.canvas.get("container");(0,ve.Z)(o,{position:"relative"}),this.statistic=new fO((0,Ft.__assign)({container:o,view:this.view,plot:this},this.options.statistic)),this.statistic.render()}i.prototype.afterRender.call(this)}},r.prototype.processData=function(){var t=this.options;return[{_:"_",value:t.value}]},r.prototype.changeValue=function(t){var e=this.options;e.value=t,this.changeData([])},r.prototype.fadeInAnnotation=function(){var t=this,e=this.options,n=this.view.foregroundGroup.findAll(function(u){return u.get("name")==="annotation-text"})[0],a=e.animation||{},o=this.calcAnnotationColorStyle();this.shouldFadeInAnnotation?n.animate(o,a.duration*Math.min(1,1.5*a.factor),null,function(){t.shouldFadeInAnnotation=!1}):(0,d.forIn)(o,function(u,f){return n.attr(f,u)})},r.prototype.calcAnnotationColorStyle=function(){var t=this.options,e={fill:"#f6f6f6",shadowColor:"black"},n={fill:"#303030",shadowColor:"white"};if((0,d.get)(t,"statistic.adjustColor")===!1)return{fill:(0,d.get)(t,"statistic.style.fill",n.fill),shadowColor:(0,d.get)(t,"statistic.style.shadowColor",n.shadowColor)};var a=t.min,o=t.max,u=t.value;a=Math.min(a,o),o=Math.max(a,o);var f;if(a==o?f=1:f=(u-a)/(o-a),f>.55){var m=this.options.color,x=.8,w=_d(m),L=Math.round(w[0]*.299+w[1]*.587+w[2]*.114)/x;return L<156?e:n}return n},r.prototype.updateConfig=function(t){i.prototype.updateConfig.call(this,t),this.shouldFadeInAnnotation=!0},r.prototype.getViewRange=function(){var t=i.prototype.getViewRange.call(this),e=this.options.liquidStyle,n=e.lineWidth?e.lineWidth:2,a=t.minX,o=t.minY,u=t.width,f=t.height,m=Math.min(u,f)-n*2,x=a+u/2,w=o+f/2,L=x-m/2,H=w-m/2;return new ns(L,H,m,m)},r}(_l),o_=jw;Es("liquid",jw);var xO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="liquid",i.prototype.createLayers.call(this,e)},r.prototype.changeValue=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof o_&&a.changeValue(t)});else{var n=this.layers[0];n instanceof o_&&n.changeValue(t)}},r.getDefaultOptions=o_.getDefaultOptions,r}(Xo),Xw=xO,Yw=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="histogram",t}return r.prototype.init=function(){this.options.xField="range",this.options.yField="count",i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,u=n.binNumber,f=(0,d.clone)(t);(0,d.sortBy)(f,a);var m=(0,d.valuesOfKey)(f,a),x=(0,d.getRange)(m),w=x.max-x.min,L=o;if(!o&&u&&(L=w/u),!o&&!u){var H=vh(m);L=w/H}var W={};(0,d.each)(f,function(ht){var bt=ht[a],xt=e.getBin(bt,L),qt=xt[0]+"-"+xt[1];(0,d.hasKey)(W,qt)||(W[qt]={name:qt,range:xt,count:0,data:[]}),W[qt].data.push(ht),W[qt].count+=1});var et=[];return(0,d.each)(W,function(ht){et.push(ht)}),et},r.prototype.scale=function(){i.prototype.scale.call(this);var t=this.config.scales.range;t.nice=!1,t.type="linear"},r.prototype.getBin=function(t,e){var n=Math.floor(t/e);return[e*n,e*(n+1)]},r}(j0),_O=Yw;Es("histogram",Yw);var bO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="histogram",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=_O.getDefaultOptions,r}(Xo),s_=bO,Ww={epanechnikov:function(i){return Math.abs(i)<=1?.75*(1-i*i):0},gaussian:function(i){return 1/Math.sqrt(Math.PI*2)*Math.exp(-.5*Math.pow(i,2))},uniform:function(i){return Math.abs(i)<=1?.5:0},triangle:function(i){return Math.abs(i)<=1?1-Math.abs(i):0},quartic:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*r*r:0},triweight:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*Math.pow(r,3):0},cosinus:function(i){var r=Math.PI/4*Math.cos(.5*Math.PI*i);return Math.abs(i)<=1?r:0}},u_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="density",t}return r.prototype.init=function(){var t=this.options.xAxis?(0,d.clone)(this.options.xAxis):{};this.options.xField="value",this.options.yField="density",this.options.xAxis=(0,d.deepMix)({},t,{type:"linear"}),this.options.smooth=!0,i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,u=n.binNumber,f=n.kernel,m=f||"epanechnikov",x=Ww[m],w=(0,d.clone)(t);(0,d.sortBy)(w,a);var L=(0,d.valuesOfKey)(w,a),H=(0,d.getRange)(L),W=H.max-H.min,et=u,ht=o;!u&&o&&(et=Math.floor(W/o)),!o&&u&&(ht=W/u),!u&&!o&&(et=vh(L),ht=W/u);var bt=(0,jn.getScale)("linear"),xt=new bt({min:H.min,max:H.max,tickCount:et,nice:!1}),qt=xt.getTicks(),ie=[];return(0,d.each)(qt,function(_e){var ze=e.kernelDensityEstimator(ht,x,_e,L);ie.push({value:_e.text,density:ze})}),ie},r.prototype.kernelDensityEstimator=function(t,e,n,a){var o=0;return(0,d.each)(a,function(u){var f=(n.tickValue-u)/t;o+=e(f)}),a.length===0?0:o/a.length},r}(Dm),Y0=u_;Es("density",u_);var SO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="density",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Y0.getDefaultOptions,r}(Xo),Qk=null,wO={ring:"interval"},EO=Rc(wO);(0,d.assign)(Ns,EO);var CO="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",Km="font-weight:300;white-space: nowrap;text-overflow: ellipsis;",$m="font-size:32px;font-weight:bold;color:#4D4D4D";function Qm(i,r,t,e){var n=CO+"width:"+e+"px;",a=i?'<span class="ring-guide-name" style='+Km+">"+i+"</span><br/>":"",o='<span class="ring-guide-value" style='+$m+">"+r+"</span>";return'<div class="ring-guide-html '+t+'" style='+n+">"+a+o+"</div>"}var qm=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.triggerOn=function(){var t=this,e=this.options.triggerOn;this.view.on("interval:"+e,(0,d.debounce)(function(a){var o=t.parseStatisticData("item",a.data.data,a.data.color),u=t.getStatisticHtmlString(o);t.updateHtml(u)},150));var n=this.options.triggerOff?this.options.triggerOff:"mouseleave";this.view.on("interval:"+n,(0,d.debounce)(function(){var a=t.getTotalHtmlString();t.updateHtml(a)},150))},r.prototype.getTotalHtmlString=function(){var t;if(this.options.content)t=this.options.content;else{var e=this.getTotalValue();t=this.parseStatisticData("total",e)}var n;this.options.htmlContent?n=this.options.htmlContent(t,this.getStatisticSize()):n=this.getStatisticTemplate(t);var a=document.createElement("div");return(0,d.isType)(n,"HTMLDivElement")?a.appendChild(n):a.innerHTML=n,a},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r.prototype.getTotalValue=function(){var t,e=0,n=this.plot.options,a=n.angleField,o=n.colorField,u=this.options.totalLabel;(0,d.each)(this.plot.options.data,function(m){typeof m[a]=="number"&&(e+=m[a])});var f=(t={},t[a]=e,t[o]=u,t);return f},r.prototype.parseStatisticData=function(t,e,n){var a=this.plot,o=a.options,u=o.angleField,f=o.colorField,m=a.getScaleByField(u),x=a.getScaleByField(f),w={name:x?x.getText(e[f]):null,value:m.getText(e[u])};return t==="item"&&(w.itemData=e,w.color=n),w},r.prototype.getStatisticTemplate=function(t){var e=this.getStatisticSize(),n=Qm(t.name,t.value,this.statisticClass,e);return n},r.prototype.getStatisticSize=function(){var t=this.plot.view.coordinateBBox,e=this.plot.options,n=e.radius,a=e.innerRadius,o=Math.min(t.width,t.height),u=o*n*a;return u},r.prototype.getStatisticHtmlString=function(t){var e=this.options.htmlContent,n;return e?n=e(t,this.getStatisticSize()):n=this.getStatisticTemplate(t),n},r}(zw),AO=qm,Kw={ring:"interval"},l_={interval:"ring"},$w=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="donut",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{radius:.8,innerRadius:.64,tooltip:{visible:!1},statistic:{visible:!0,totalLabel:"\u603B\u8BA1",triggerOn:"mouseenter",triggerOff:"mouseleave"}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),r.centralId++,this.statisticClass="statisticClassId"+r.centralId,this.adjustLabelDefaultOptions()},r.prototype.afterRender=function(){var t=this.canvas.get("container");if(this.statistic&&(t.removeChild(this.statistic.wrapperNode),this.statistic=null),this.options.statistic&&this.options.statistic.visible){var e=this.canvas.get("container");(0,ve.Z)(e,{position:"relative"}),this.statistic=new AO((0,Ft.__assign)({container:e,view:this.view,plot:this,statisticClass:this.statisticClass},this.options.statistic)),this.statistic.render(),this.options.statistic.triggerOn&&this.statistic.triggerOn()}i.prototype.afterRender.call(this)},r.prototype.destroy=function(){this.statistic&&this.statistic.destroy(),i.prototype.destroy.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?Kw[e]:l_[e]},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius}};this.setConfig("coordinate",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,K)},r.prototype.adjustLabelDefaultOptions=function(){var t=this.options.label;if(t&&t.type==="inner"){var e=t.style||{};e.textAlign||(e.textAlign="center"),t.style=e,t.offset||(t.offset=(this.options.innerRadius-1)/2*100+"%")}},r.centralId=0,r}(ig),Qw=$w;Es("donut",$w);var qw=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Qw.getDefaultOptions,r}(Xo),Jw=qw;function qk(i,r,t){var e=i.style,n=i.defaultStyle,a=i.color,o=(0,Ft.__assign)((0,Ft.__assign)({},n),e);return a&&(r&&(o.stroke=a),t&&(o.fill=a)),o}function g1(i){var r=[],t=i[0];r.push(["M",t.x,t.y]);for(var e=1,n=i.length;e<n;e++)r.push(["L",i[e].x,i[e].y]);return r.push(["L",t.x,t.y]),r.push(["z"]),r}ws("interval","waterfall",{draw:function(i,r){var t=qk(i,!1,!0),e=this.parsePath(g1(i.points)),n=r.addShape("path",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},t),{path:e}),name:"interval"}),a=(0,d.get)(i.style,"leaderLine");if(a&&a.visible){var o=a.style||{};if(i.nextPoints){var u=[["M",i.points[2].x,i.points[2].y],["L",i.nextPoints[0].x,i.nextPoints[0].y]];u=this.parsePath(u),r.addShape("path",{attrs:(0,Ft.__assign)({path:u,stroke:"#d3d3d3",lineDash:[4,2],lineWidth:1},o),name:"leader-line"})}}return n}});var Jm=2,MO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n,a,o=e.shape,u=o.getBBox(),f=e.getData(),m=f[mh],x=f[this.layer.options.yField],w=(0,d.isArray)(m)?m[1]:m,L=this.options.formatter,H=[].concat(e.getModel().mappingData),W=L?H[0]&&H[0]._origin[y1]:0,et=L?L(w,(n={},n[bm]=(a=H[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=H[0],n.mappingDatumIndex=0,n.element=e,n.elementIndex=W,n),W):w,ht=(u.minY+u.maxY)/2,bt="bottom";x<0?(ht=u.maxY+Jm,bt="top"):ht=u.minY-Jm,t.attr("y",ht),t.attr("text",et),t.attr("textBaseline",bt)},r}(fv),Jk=null;Nf("waterfall",MO);function TO(){return{fill:"#fff",fontSize:12,lineHeight:12,stroke:"rgba(0, 0, 0, 0.45)"}}var tE=function(){function i(r){this.textAttrs={},this.view=r.view,this.fields=r.fields,this.formatter=r.formatter,this.textAttrs=(0,d.mix)(TO(),r.style),this._init()}return i.prototype.draw=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,d.clone)(this.view.getData());this.container=this.view.foregroundGroup.addGroup();var e=this.view.geometries[0].elements.map(function(n){return n.shape});(0,d.each)(e,function(n,a){if(!!n.cfg.origin){var o=n.cfg.origin.data,u=n.getBBox(),f=o[mh],m=f;(0,d.isArray)(f)&&(m=f[1]-f[0]),m=m>0?"+"+m:m,o[c_]&&(m=f[0]-f[1]);var x=m;if(r.formatter){var w=e[a].attr("fill");x=r.formatter(""+m,{_origin:t[a],color:w},a)}var L=r.container.addShape("text",{attrs:(0,Ft.__assign)({text:x,textBaseline:"middle",textAlign:"center",x:(u.minX+u.maxX)/2,y:(u.minY+u.maxY)/2},r.textAttrs),name:"dill-label"});L.getBBox().height>u.height&&L.set("visible",!1)}}),this.view.getCanvas().draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype._init=function(){var r=this;this.view.on(nu.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){r.clear()}),this.view.on(nu.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){r.draw()})},i}(),t3=tE,PO={waterfall:"interval"},m1={interval:"waterfall"},mh="$$value$$",c_="$$total$$",y1="$$index$$",f_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="watarfall",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!1,position:"bottom"},label:{visible:!0,adjustPosition:!0},diffLabel:{visible:!0},leaderLine:{visible:!0},showTotal:{visible:!0,label:"\u603B\u8BA1\u503C"},waterfallStyle:{lineWidth:0},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustLegendOptions(e),this.adjustMeta(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options;t.diffLabel&&t.diffLabel.visible?this.diffLabel=new t3({view:this.view,fields:[t.xField,t.yField,mh],formatter:t.diffLabel.formatter,style:t.diffLabel.style}):this.diffLabel&&(this.diffLabel.clear(),this.diffLabel=null)},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;this.view.on("tooltip:change",function(e){for(var n=e.items,a=0;a<n.length;a++){var o=n[a],u=(0,d.get)(o,"data",{});if(o.name=u[t.xField],o.value=u[t.yField],!o.value&&u[c_]){var f=u[mh];o.value=f[0]-f[1]}e.items[a]=o}}),this.renderLabel()},r.prototype.renderLabel=function(){var t=$v(this.view,"interval");this.options.label&&this.options.label.visible&&this.doRenderLabel(t,(0,Ft.__assign)({type:"waterfall"},this.options.label))},r.prototype.geometryParser=function(t,e){return t==="g2"?PO[e]:m1[e]},r.prototype.interaction=function(){this.setConfig("interactions",[{type:"tooltip"},{type:"active-region"}])},r.prototype.addGeometry=function(){var t=this.options,e={type:"interval",position:{fields:[t.xField,mh]},shape:{values:["waterfall"]}};e.style=this._parseStyle(),e.color=this._parseColor(),this.waterfall=e,this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.processData=function(t){var e,n=[],a=this.options.xField,o=this.options.yField;if((0,d.map)(t,function(m,x){var w,L=m[o];if(x>0){var H=n[x-1][mh];(0,d.isArray)(H)?L=[H[1],m[o]+H[1]]:L=[H,m[o]+H]}n.push((0,Ft.__assign)((0,Ft.__assign)({},m),(w={},w[mh]=L,w[y1]=x,w)))}),this.options.showTotal&&this.options.showTotal.visible){var u=(0,d.map)(t,function(m){return m[o]}),f=(0,d.reduce)(u,function(m,x){return m+x},0);n.push((e={},e[a]=this.options.showTotal.label,e[o]=null,e[mh]=[f,0],e[y1]=n.length,e[c_]=!0,e))}return n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[mh]={},(0,d.has)(t,"yAxis")&&wc(e[mh],t.yAxis),this.setConfig("scales",e)},r.prototype.axis=function(){var t=Dc("axis",{plot:this,dim:"x"}),e=Dc("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[mh]=e,this.setConfig("axes",n)},r.prototype.coord=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,q)},r.prototype.geometryTooltip=function(){this.waterfall.tooltip={};var t=this.options.tooltip;t.fields&&(this.waterfall.tooltip.fields=t.fields),t.formatter&&(this.waterfall.tooltip.callback=t.formatter,t.fields||(this.waterfall.tooltip.fields=[this.options.xField,mh]))},r.prototype._parseStyle=function(){var t=this.options.waterfallStyle,e=this.options.leaderLine,n={};return(0,d.isFunction)(t)?n.callback=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return Object.assign({},t.apply(void 0,a),{leaderLine:e})}:n.cfg=(0,Ft.__assign)((0,Ft.__assign)({},t),{leaderLine:e}),n},r.prototype._parseColor=function(){var t=this,e=this.options,n=this.options,a=n.xField,o=n.yField,u={fields:[a,o,mh,y1]};if((0,d.isFunction)(e.color))u.callback=e.color;else{var f="#f4664a",m="#30bf78",x="rgba(0, 0, 0, 0.25)";if((0,d.isString)(e.color))f=m=x=e.color;else if((0,d.isObject)(e.color)){var w=e.color,L=w.rising,H=w.falling,W=w.total;f=L,m=H,x=W}u.callback=function(et,ht,bt,xt){return xt===t.options.data.length?x||(bt[0]>=0?f:m):((0,d.isArray)(bt)?bt[1]-bt[0]:bt)>=0?f:m}}return u},r.prototype.adjustLegendOptions=function(t){var e=t.legend;e&&(e.visible=!1)},r.prototype.adjustMeta=function(t){var e=t.meta;if(e){var n=e?e[t.yField]:{};n.alias=n.alias||t.yField,t.meta[mh]=n}},r}(_l),e3=f_;Es("waterfall",f_);var $p=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="waterfall",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=e3.getDefaultOptions,r}(Xo),h_=$p,eE=function(){function i(r){this.quadrantGroups=[],this.regionData=[],this.lineData=[],this.options=r,this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options,t=r.xBaseline,e=r.yBaseline,n=this.view.getCoordinate(),a=this.view.getScaleByField(this.options.plotOptions.xField),o=this.view.getScaleByField(this.options.plotOptions.yField),u;if(t>a.min&&t<a.max){var f=(t-a.min)/(a.max-a.min);u=[new ns(n.start.x,n.end.y,n.getWidth()*f,n.getHeight()),new ns(n.start.x+n.getWidth()*f,n.end.y,n.getWidth()*(1-f),n.getHeight())];var m={start:{x:n.start.x+n.getWidth()*f,y:n.end.y},end:{x:n.start.x+n.getWidth()*f,y:n.start.y}};this.lineData.push(m)}else u=[new ns(n.start.x,n.end.y,n.getWidth(),n.getHeight())];if(e>o.min&&e<o.max){var f=(e-o.min)/(o.max-o.min),x={start:{x:n.start.x,y:n.start.y-n.getHeight()*f},end:{x:n.end.x,y:n.start.y-n.getHeight()*f}};this.lineData.push(x);var w={name:t<=a.min?"top-right":"top-left",bbox:new ns(u[0].minX,u[0].minY,u[0].width,u[0].height*(1-f)),index:t<=a.min?2:0};this.regionData.push(w);var L={name:t<=a.min?"bottom-right":"bottom-left",bbox:new ns(u[0].minX,u[0].minY+u[0].height*(1-f),u[0].width,u[0].height*f),index:t<=a.min?3:1};if(this.regionData.push(L),u.length>1){var H={name:"top-right",bbox:new ns(u[1].minX,u[1].minY,u[1].width,u[1].height*(1-f)),index:2};this.regionData.push(H);var W={name:"bottom-right",bbox:new ns(u[1].minX,u[1].minY+u[1].height*(1-f),u[1].width,u[1].height*f),index:3};this.regionData.push(W)}}else if(u.length===2)if(e<=o.min){var et={name:"top-left",bbox:u[0],index:0};this.regionData.push(et);var H={name:"top-right",bbox:u[1],index:2};this.regionData.push(H)}else{var ht={name:"bottom-left",bbox:u[0],index:1};this.regionData.push(ht);var W={name:"bottom-right",bbox:u[1],index:3};this.regionData.push(W)}else if(t<=a.min)if(e<=o.min){var H={name:"top-right",bbox:u[0],index:2};this.regionData.push(H)}else{var W={name:"bottom-right",bbox:u[0],index:3};this.regionData.push(W)}else if(e<=o.min){var et={name:"top-left",bbox:u[0],index:0};this.regionData.push(et)}else{var ht={name:"bottom-left",bbox:u[0],index:1};this.regionData.push(ht)}this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this;if(this.regionData.length>0){var t=this.getDefaultStyle(),e=this.getRegionStyle(this.regionData);(0,d.each)(this.regionData,function(a){var o=a.index,u=r.container.addGroup(),f=u.addShape("rect",{attrs:(0,Ft.__assign)({x:a.bbox.minX,y:a.bbox.minY,width:a.bbox.width,height:a.bbox.height},e[o]),name:"quadrant"});if(r.options.label&&r.options.label.text){var m=(0,d.deepMix)({},t.label,r.options.label),x=r.getLabelConfig(a,m);u.addShape("text",{attrs:(0,Ft.__assign)({},x),name:"quadrant-label"})}f.set("data",a),r.quadrantGroups.push(u)});var n=(0,d.deepMix)({},t.line,this.options.lineStyle);(0,d.each)(this.lineData,function(a){r.container.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",a.start.x,a.start.y],["L",a.end.x,a.end.y]]},n),name:"quadrant-line"})}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.getDefaultStyle=function(){return{line:{stroke:"#9ba29a",lineWidth:1},regionStyle:[{fill:"#000000",opacity:.05},{fill:"#ffffff",opacity:0},{fill:"#ffffff",opacity:0},{fill:"#000000",opacity:.05}],label:{position:"outter-inner",offset:10,style:{fontSize:14,fill:"#ccc"}}}},i.prototype.getRegionStyle=function(r){var t=this.getDefaultStyle(),e=t.regionStyle;if(this.options.regionStyle){var n=this.options.regionStyle;(0,d.isArray)(n)?e=e.map(function(a,o){return n.length>o&&n[o]?n[o]:a}):(0,d.isFunction)(n)&&(0,d.each)(r,function(a,o){e[o]=n(a)})}return e},i.prototype.getLabelConfig=function(r,t){var e=r.index,n=0,a=0,o={},u=t.text;(0,d.isFunction)(u)?u=u(r):(0,d.isArray)(u)&&(u=u[e]);var f=t.position,m=f.split("-"),x=r.name.split("-");return x[1]==="left"?(m[0]==="inner"&&(n=r.bbox.maxX-t.offset,o.textAlign="right"),m[0]==="outter"&&(n=r.bbox.minX+t.offset,o.textAlign="left")):x[1]==="right"&&(m[0]==="inner"&&(n=r.bbox.minX+t.offset,o.textAlign="left"),m[0]==="outter"&&(n=r.bbox.maxX-t.offset,o.textAlign="right")),x[0]==="top"?(m[1]==="inner"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom"),m[1]==="outter"&&(a=r.bbox.minY+t.offset,o.textBaseline="top")):x[0]==="bottom"&&(m[1]==="inner"&&(a=r.bbox.minY+t.offset,o.textBaseline="top"),m[1]==="outter"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom")),o=(0,d.deepMix)({},t.style,o),o.lineHeight=o.fontSize,(0,Ft.__assign)({x:n,y:a,text:u},o)},i}(),rE=eE,dv=S(56645),nE={exp:dv.regressionExp,linear:dv.regressionLinear,loess:dv.regressionLoess,log:dv.regressionLog,poly:dv.regressionPoly,pow:dv.regressionPow,quad:dv.regressionQuad};function IO(i,r){return Math.sqrt(i*(1-i)/r)*1.96}var OO=function(){function i(r){var t={type:"linear",style:{stroke:"#9ba29a",lineWidth:2,opacity:.5,lineJoin:"round",lineCap:"round"},showConfidence:!1,confidenceStyle:{fill:"#ccc",opacity:.1}};this.options=(0,d.deepMix)({},t,r),this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options.plotOptions,t=r.xField,e=r.yField,n=r.data,a=nE[this.options.type]().x(function(o){return o[t]}).y(function(o){return o[e]});this.data=this.processData(a(n)),this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this.view.getScaleByField(this.options.plotOptions.xField),t=this.view.getScaleByField(this.options.plotOptions.yField),e=this.view.getCoordinate(),n=this.data.trendlineData,a=(0,jn.getScale)("linear"),o=this.adjustScale(r,n,"x"),u=new a({min:o.min,max:o.max}),f=this.adjustScale(t,n,"y"),m=new a({min:f.min,max:f.max});if(this.options.showConfidence){var x=this.getConfidencePath(u,m,e);this.container.addShape("path",{attrs:(0,Ft.__assign)({path:x},this.options.confidenceStyle),name:"confidence"})}var w=this.getTrendlinePoints(u,m,e),L=[[0,0],[1,1]],H=qv(w,!1,L);this.shape=this.container.addShape("path",{attrs:(0,Ft.__assign)({path:H},this.options.style),name:"trendline"})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.destroy()},i.prototype.processData=function(r){var t=[],e=[];return(0,d.each)(r,function(n){t.push({x:n[0],y:n[1]});var a=IO(r.rSquared,n[1]);e.push({x:n[0],y0:n[1]-a,y1:n[1]+a})}),{trendlineData:t,confidenceData:e}},i.prototype.getTrendlinePoints=function(r,t,e){var n=[];return(0,d.each)(this.data.trendlineData,function(a){var o=r.scale(a.x),u=t.scale(a.y),f=e.start.x+e.width*o,m=e.start.y-e.height*u;n.push({x:f,y:m})}),n},i.prototype.getConfidencePath=function(r,t,e){var n=[],a=[],o=[];(0,d.each)(this.data.confidenceData,function(w){var L=r.scale(w.x),H=t.scale(w.y0),W=t.scale(w.y1),et=e.start.x+e.width*L,ht=e.start.y-e.height*H,bt=e.start.y-e.height*W;n.push({x:et,y:ht}),a.push({x:et,y:bt})});for(var u=0;u<n.length;u++){var f=u===0?"M":"L",m=n[u];!isNaN(m.x)&&!isNaN(m.y)&&o.push([f,m.x,m.y])}for(var x=a.length-1;x>0;x--){var m=a[x];!isNaN(m.x)&&!isNaN(m.y)&&o.push(["L",m.x,m.y])}return o},i.prototype.adjustScale=function(r,t,e){var n=r.min,a=r.max,o=this.options.plotOptions,u=o.data,f=o.xField,m=o.yField,x=e==="x"?f:m,w=(0,d.minBy)(u,x)[x],L=(0,d.maxBy)(u,x)[x],H=(n-w)/(L-w),W=(a-L)/(L-w),et=(0,d.minBy)(t,e)[e],ht=(0,d.maxBy)(t,e)[e];return{min:et+H*(ht-et),max:ht+W*(ht-et)}},i}(),LO=OO,iE={point:"point",trendline:"trendline",confidence:"confidence",quadrant:"quadrant",quadrantLabel:"quadrant-label",quadrantLine:"quadrant-line"},aE=Rc(iE);(0,d.assign)(Ns,aE);var oE=function(i){var r=i.stroke||"#000";return{stroke:r}},sE=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},x1=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};yf("scatter",{pointStyle:{normal:{},active:oE,selected:sE,inactive:x1}});var uE={scatter:"point"},lE={point:"point"},p_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="scatter",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{pointSize:4,pointStyle:{lineWidth:1,strokeOpacity:1,fillOpacity:.95,stroke:"#fff"},xAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},yAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},tooltip:{visible:!0,shared:null,showTitle:!1,showMarkers:!1,showCrosshairs:!1},label:{visible:!1},shape:"circle"})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.quadrant&&this.quadrant.destroy(),this.trendline&&this.trendline.destroy(),this.options.quadrant&&this.options.quadrant.visible&&(this.quadrant=new rE((0,Ft.__assign)({view:this.view,plotOptions:this.options},this.options.quadrant)),this.quadrant.render()),this.options.trendline&&this.options.trendline.visible&&(this.trendline=new LO((0,Ft.__assign)({view:this.view,plotOptions:this.options},this.options.trendline)),this.trendline.render())},r.prototype.destroy=function(){this.quadrant&&(this.quadrant.destroy(),this.quadrant=null),this.trendline&&(this.trendline.destroy(),this.trendline=null),i.prototype.destroy.call(this)},r.prototype.isValidLinearValue=function(t){return(0,d.isNil)(t)?!1:!Number.isNaN(Number(t))},r.prototype.processData=function(t){var e=this,n=this.options,a=n.xField,o=n.yField,u=(0,d.get)(this.options,["xAxis","type"],"linear"),f=(0,d.get)(this.options,["yAxis","type"],"linear");if(u&&f){var m=t.filter(function(x){return!(u==="linear"&&!e.isValidLinearValue(x[a])||f==="linear"&&!e.isValidLinearValue(x[o]))}).map(function(x){var w;return(0,Ft.__assign)((0,Ft.__assign)({},x),(w={},w[a]=u==="linear"?Number(x[a]):String(x[a]),w[o]=f==="linear"?Number(x[o]):String(x[o]),w))});return m}return t},r.prototype.geometryParser=function(t,e){return t==="g2"?uE[e]:lE[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis);var n=(0,d.find)(t.interactions,function(o){return o.type==="timeline"});if(n&&(0,d.get)(n,"cfg.key")){var a=n.cfg.key;e[a]?e[a].key=!0:e[a]={key:!0}}this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=Yo("point","circle",{plot:this});if(this.points=t,this.options.tooltip&&this.options.tooltip.visible){var e=this.options.tooltip,n=e.showTitle,a=e.titleField;this.extractTooltip(),this.setConfig("tooltip",(0,Ft.__assign)({showTitle:n,title:n?a:void 0},this.options.tooltip))}this.options.label&&this.label(),this.setConfig("geometry",t)},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.points&&(this.points.label=!1);return}var e=Dc("label",(0,Ft.__assign)((0,Ft.__assign)({fields:t.label.field?[t.label.field]:[t.yField]},t.label),{plot:this}));this.points&&(this.points.label=e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.points.animate=!1)},r.prototype.parseEvents=function(t){i.prototype.parseEvents.call(this,t||ct)},r.prototype.extractTooltip=function(){this.points.tooltip={};var t=this.options.tooltip;t.fields?this.points.tooltip.fields=t.fields:this.points.tooltip.fields=[this.options.xField,this.options.yField],t.formatter&&(this.points.tooltip.callback=t.formatter,this.options.colorField&&this.points.tooltip.fields.push(this.options.colorField))},r}(_l),cE=p_;Es("scatter",p_);var kO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="scatter",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=cE.getDefaultOptions,r}(Xo),d_=kO,fE=S(75564);ws("point","bubble-point",{draw:function(i,r){var t=(0,fE.iV)(this,i,r,"circle",!1);if(!i.style.stroke){var e=t.attr("fill");t.attr("stroke",e)}return t},getMarker:function(i){var r=i.color;return{symbol:"circle",style:{r:4.5,fill:r}}}});var RO=function(i){var r=i.stroke||"#000",t=i.fillOpacity||i.opacity||.95;return{stroke:r,fillOpacity:t}},hE=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},pE=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};yf("bubble",{pointStyle:{normal:{},active:RO,selected:hE,inactive:pE}});var dE=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bubble",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{pointSize:[2,32],pointStyle:{stroke:null,strokeOpacity:1,fillOpacity:.5},label:{position:"middle",style:{stroke:"#fff",lineWidth:2}},shape:"bubble-point"})},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.legend=function(){var t;i.prototype.legend.call(this),!(this.options.legend&&this.options.legend.visible===!1)&&this.setConfig("legends",(t={},t[this.options.sizeField]=!1,t))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,ct)},r}(cE),vE=dE;Es("bubble",dE);var gE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="bubble",i.prototype.createLayers.call(this,e)},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=vE.getDefaultOptions,r}(Xo),mE=gE,yE={bullet:"interval",bulletTarget:"bullet-target"},ty=Rc(yE);(0,d.assign)(Ns,ty);var xE=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.middleGroup.addGroup(),this.container.set("name","rectGroups"),this.container.setZIndex(-100);for(var r=this.getGeometry(),t=(0,d.map)(r==null?void 0:r.elements,function(o){return o.shape}),e=0;e<this.cfg.ranges.length;e+=1){var n=t[e].getBBox(),a=n.width/t[e].get("origin").data[this.cfg.yField];this.drawRect(n,this.cfg.ranges[e]||[0,1],a)}this.view.canvas.draw()}},i.prototype.drawRect=function(r,t,e){for(var n=this.cfg,a=n.rangeColors,o=r.minX,u=r.minY-r.height*(n.rangeSize-1)/2,f=1;f<t.length;f+=1){var m=(t[f]-t[f-1])*n.rangeMax*e;this.container.addShape("rect",{name:"bullet-rect",attrs:{width:m,height:r.height*n.rangeSize,x:o,y:u,fill:a[(f-1)%a.length],fillOpacity:.25}}).set("zIndex",-1),o+=m}if(n.axis&&n.axis.visible){var x=n.rangeMax/(n.axis.tickCount-1),w=new ns(r.x,u,o,r.height*n.rangeSize);this.drawBulletTicks(w,x,e)}},i.prototype.drawBulletTicks=function(r,t,e){for(var n=this.cfg,a=n.axis.style,o=n.axis.tickCount,u=n.axis.position,f=(0,d.get)(a,"lineHeight",0)-a.fontSize/2,m=0;m<o;m+=1){var x=r.minX+t*m*e,w=""+t*m;if(n.axis.formatter&&(w=n.axis.formatter(w,m)),this.container.addShape("text",{name:"tick",attrs:(0,Ft.__assign)({x,y:u==="before"?r.minY-f:r.maxY+f,text:""+w},a)}),n.axis.tickLine&&n.axis.tickLine.visible){var L=n.axis.tickLine;m>0&&m!==o-1&&this.container.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",x,r.minY],["L",x,r.maxY]]},L)}).set("zIndex",-1)}}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),DO=xE,BO=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.foregroundGroup.addGroup(),this.container.set("name","targetGroups");for(var r=(0,d.map)(this.getGeometry().elements,function(a){return a.shape}),t=0;t<this.cfg.targets.length;t+=1){var e=r[t].getBBox(),n=e.width/r[t].get("origin").data[this.cfg.yField];this.drawTarget(e,this.cfg.targets[t],n)}this.view.canvas.draw()}},i.prototype.drawTarget=function(r,t,e){var n=this,a=this.cfg,o=a.markerColors;t.forEach(function(u,f){var m=a.markerStyle;n.container.addShape("rect",{name:"bullet-target",attrs:(0,Ft.__assign)((0,Ft.__assign)({width:m.width,height:r.height*a.markerSize-m.width/2,x:r.minX+u*e,y:r.minY-r.height*(a.markerSize-1)/2},m),{fill:o[f%o.length]||m.fill})})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,d.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),FO=BO,r3=function(i){var r=i.opacity||1;return{opacity:r*.5,lineWidth:0}},NO=function(i){var r=i.opacity||1;return{opacity:r*.5}};yf("bullet",{columnStyle:{normal:{},active:r3,disable:NO,selected:{}}});var zO={bullet:"interval"},_E={interval:"bullet"},bE="$$stackField$$",_1="$$xField$$",GO="$$yField$$",v_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bullet",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{data:[],stackField:bE,xField:_1,yField:GO,rangeColors:["rgba(91, 143, 249, 0.45)"],measureSize:12,rangeSize:2,markerSize:2,markerColors:[],markerStyle:{width:2,fill:"#5B8FF9",lineWidth:0},axis:{visible:!1,position:"before",tickCount:6,formatter:function(t,e){return""+e},style:{fill:"rgba(0, 0, 0, 0.25)",textBaseline:"middle",textAlign:"center",fontSize:12,lineHeight:16},tickLine:{visible:!0,lineWidth:1,stroke:"#FFF",lineDash:[4,2]}},xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},label:{visible:!0}},yAxis:{visible:!1,nice:!1},tooltip:{visible:!1,trigger:"item",crosshairs:!1},label:{visible:!0,offset:4,style:{fill:"rgba(0, 0, 0, 0.45)",stroke:"#fff",lineWidth:1}}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.view.removeInteraction("legend-filter")},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={},(0,d.has)(t,"yAxis")&&wc(e[t.yField],t.yAxis),e[t.xField]={type:"cat"},(0,d.has)(t,"xAxis")&&wc(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustOptions(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.data.map(function(a){return a.ranges}),n=t.data.map(function(a){return a.targets});this.bulletRect=new DO(this.view,{ranges:e,rangeMax:t.rangeMax,yField:t.yField,rangeSize:t.rangeSize,rangeColors:t.rangeColors||[],axis:t.axis}),this.bulletTarget=new FO(this.view,{targets:n,yField:t.yField,markerSize:t.markerSize,markerColors:t.markerColors||[],markerStyle:t.markerStyle})},r.prototype.geometryParser=function(t,e){return t==="g2"?zO[e]:_E[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.legend=function(){var t=this.options,e=t.markerStyle.fill,n=t.measureColors||this.theme.colors,a=[{name:"\u5B9E\u9645\u8FDB\u5EA6",value:"\u5B9E\u9645\u8FDB\u5EA6",marker:{symbol:"square",style:{fill:n[0]}}},{name:"\u76EE\u6807\u503C",value:"\u76EE\u6807\u503C",marker:{symbol:"line",style:{stroke:e,lineWidth:2}}}],o=(0,Ft.__assign)({custom:!0,position:"bottom",items:a},t.legend);this.setConfig("legends",o)},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.xField,t.yField],plot:this});e.adjust=[{type:"stack"}],t.label&&(e.label=this.extractLabel()),this.bullet=e,this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,_t)},r.prototype.extractLabel=function(){var t=this.options,e=(0,d.deepMix)({},t.label);if(e.visible===!1)return!1;var n=Dc("label",(0,Ft.__assign)({plot:this,labelType:"barLabel",fields:[t.yField]},e));return n},r.prototype.adjustOptions=function(t){t.barSize=t.measureSize||12,this.adjustYAxisOptions(t)},r.prototype.adjustYAxisOptions=function(t){var e=[];t.data.forEach(function(n){return e.push(n.measures.reduce(function(a,o){return a+o},0))}),e.push(t.rangeMax),t.yAxis.max=Math.max.apply([],e)},r.prototype.processData=function(t){var e=this.options,n=[];return t.forEach(function(a,o){for(var u,f=0;f<a.measures.length;f+=1){var m=a.measures[f],x=a.title||""+o;n.push((u={},u[e.xField]=x,u[e.yField]=m,u[e.stackField]=""+f,u))}}),n},r}(_l),SE=v_;Es("bullet",v_);var UO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="bullet",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=SE.getDefaultOptions,r}(Xo),g_=UO,o0="$$day$$",s0="$$week$$",m_="$$date$$",VO="$$is_month_center$$",u0="YYYY-MM-DD",W0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wE=["S","M","T","W","T","F","S"],K0=864e5;function EE(i){var r=(0,Ft.__spreadArrays)(i).sort(function(t,e){return t.getTime()-e.getTime()});return[qg.default.format((0,d.head)(r),u0),qg.default.format((0,d.last)(r),u0)]}function ZO(i){var r=i||new Date;return[fecha.format(new Date(r.getFullYear(),0,1),FORMATTER),fecha.format(new Date(r.getFullYear(),11,30),FORMATTER)]}function HO(i){return i.getMonth()!==ey(new Date(i),7*K0).getMonth()}function CE(i){return i.getMonth()!==ey(new Date(i),K0).getMonth()}function y_(i){var r=new Date(i.getFullYear(),0,1);return Math.ceil(((i.getTime()-r.getTime())/K0+r.getDay()+1)/7)}function jO(i){return i.getDay()}function ey(i,r){return i.setMilliseconds(i.getMilliseconds()+r),i}function x_(i){var r,t=i[0],e=i[1],n=qg.default.parse(t,u0),a=qg.default.parse(e,u0);return n>a&&(r=[n,a],a=r[0],n=r[1]),[n,a]}function XO(i,r,t){for(var e=[],n=x_(r),a=n[0],o=n[1],u=new Date(a),f=function(){var m,x=qg.default.format(u,u0),w=(0,d.find)(i,function(L){return L[t]===x});e.push((0,Ft.__assign)((m={},m[o0]=jO(u),m[s0]=""+y_(u),m[t]=x,m[m_]=new Date(u),m),w)),ey(u,K0)};u<=o;)f();return e}function n3(i){var r=x_(i),t=r[0],e=r[1],n=new Map;function a(f){var m=f.getMonth(),x=y_(f);n.has(m)||n.set(m,[]),n.get(m).push(x)}for(var o=new Date(t);o<=e;)a(o),ey(o,K0*7);e<o&&a(e);var u={};return n.forEach(function(f,m){var x=Math.ceil(((0,d.head)(f)+(0,d.last)(f))/2);u[x]=m}),u}var AE={rect:"polygon"},i3=Rc(AE);(0,d.assign)(Ns,i3);var ME=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="calendar",t}return r.getDefaultOptions=function(){var t;return(0,d.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},yAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},legend:{visible:!1},meta:(t={},t[o0]={type:"cat",alias:"Day",values:[0,1,2,3,4,5,6]},t[s0]={type:"cat",alias:"Month"},t),tooltip:{visible:!0,showTitle:!0,showCrosshairs:!1,showMarkers:!1,title:"date"}})},r.prototype.processData=function(t){var e=this.options.dateField,n=this.options.dateRange;if((0,d.isNil)(n)){var a=(0,d.map)(t,function(o){return qg.default.parse(""+o[e],u0)});n=EE(a)}return XO(t,n,e)},r.prototype.addGeometry=function(){var t=this.options,e=t.valueField,n=t.colors,a=t.tooltip,o={type:"polygon",position:{fields:[s0,o0]},shape:{values:["calendar-polygon"]},color:{fields:[e],values:n},label:this.extractLabel()};a&&(a.fields||a.formatter)&&this.geometryTooltip(o),this.setConfig("geometry",o)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[s0,o0]))},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=this.options.valueField;return Dc("label",(0,Ft.__assign)({plot:this,fields:[n],position:"top",offset:0},e))},r.prototype.coord=function(){var t={type:"rect",cfg:{},actions:[["reflect","y"]]};this.setConfig("coordinate",t)},r.prototype.geometryParser=function(){return""},r.prototype.axis=function(){var t=Dc("axis",{plot:this,dim:"x"}),e=Dc("axis",{plot:this,dim:"y"}),n={};n[s0]=t,n[o0]=e,this.setConfig("axes",n)},r.prototype.scale=function(){i.prototype.scale.call(this);var t=n3(this.options.dateRange),e=this.config.scales,n=this.options,a=n.weeks,o=a===void 0?wE:a,u=n.months,f=u===void 0?W0:u,m=e[s0],x=e[o0];m.formatter=function(W){var et=t[W];return et!==void 0?f[et]:""},x.formatter=function(W){return o[W]||""};var w=this.options,L=w.xAxis,H=w.yAxis;m.alias=(0,d.get)(L,["title","text"],m.alias),x.alias=(0,d.get)(H,["title","text"],x.alias),this.setConfig("scales",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,yt)},r}(_l),a3=ME;Es("calendar",ME),ws("polygon","calendar-polygon",{draw:function(i,r){if(!(0,d.isEmpty)(i.points)){var t=i.points,e=[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]];e=this.parsePath(e);var n=(0,Ft.__assign)((0,Ft.__assign)({stroke:"#fff",lineWidth:1,fill:i.color},i.style),{path:e}),a=r.addShape("path",{attrs:n}),o=i.data[m_];if(HO(o)){var u=[["M",t[2].x,t[2].y],["L",t[3].x,t[3].y]];r.addShape("path",{zIndex:1,attrs:{path:this.parsePath(u),lineWidth:1,stroke:"#404040"}}),CE(o)&&r.addShape("path",{zIndex:1,attrs:{path:this.parsePath([["M",t[1].x,t[1].y],["L",t[2].x,t[2].y]]),lineWidth:1,stroke:"#404040"}})}return r.sort(),a}}});var YO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="calendar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=a3.getDefaultOptions,r}(Xo),WO=YO,__=function(){function i(r){this.uid=r}return i.prototype.setOption=function(r,t){this.type=r,this.options=t,this.axis=t.axis,this.pivot=t.pivot},i.prototype.render=function(){var r=this;ws("point","gauge",{draw:function(t,e){var n,a,o;this.gauge={},this.gauge.options=r.options,this.gauge.axis=r.axis,this.gauge.pivot=r.pivot,this.gauge.type=r.type;var u=this.gauge,f=this.gauge.type,m=t.points[0],x=this.parsePoint({x:0,y:0}),w=this.parsePoint({x:m.x||0,y:1});u.center=x,u.group=e;var L={x:x.x-w.x,y:x.y-w.y};this.gauge.ringRadius=Math.sqrt(L.x*L.x+L.y*L.y);var H=this.getAngleRange(),W=H.starAngle,et=H.endAngle,ht=m.x*(et-W)+W;switch(f){case"meterGauge":this.drawBarGauge(ht),this.gauge.axis.visible&&((n=this.gauge.axis.tickLine)===null||n===void 0?void 0:n.visible)&&this.drawInSideAxis();break;case"fanGauge":this.drawGauge(ht),this.gauge.axis.visible&&((a=this.gauge.axis.tickLine)===null||a===void 0?void 0:a.visible)&&this.drawOutSideAxis();break;case"standardGauge":default:this.drawGauge(ht),this.gauge.axis.visible&&((o=this.gauge.axis.tickLine)===null||o===void 0?void 0:o.visible)&&this.drawAxis();break}this.gauge.pivot.visible&&this.drawPivot(t,e)},drawGauge:function(t){var e=this.gauge.options.range;this.drawBottomRing(),e&&e.length?this.drawRangeColor():this.drawCurrentRing(t)},drawRangeColor:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.range,o=t.color,u=t.rangeStyle,f=o||qc().colors,m=this.getAngleRange(),x=m.starAngle,w=m.endAngle,L={min:e,max:n,starAngle:x,endAngle:w},H=0;H<a.length;H++){var W=this.valueToAngle(a[H],L),et=this.valueToAngle(a[H+1],L);if(et>=W){var ht=this.getPath(W,et),bt=(0,d.deepMix)({fill:f[H]},u);this.drawRing(ht,bt)}}},drawBottomRing:function(){var t=this.getAngleRange(),e=t.starAngle,n=t.endAngle,a=this.gauge.options.rangeBackgroundStyle,o=this.getPath(e,n);this.drawRing(o,a)},drawCurrentRing:function(t){var e=this.getAngleRange().starAngle,n=this.gauge.rangeStyle,a=this.getPath(e,t);this.drawRing(a,n)},drawInSideAxis:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.axis,o=this.getAngleRange(),u=o.starAngle,f=o.endAngle,m={min:e,max:n,starAngle:u,endAngle:f},x=(n-e)/a.tickCount,w=0;w<a.tickCount;w++){var L=e+w*x,H=this.valueToAngle(L+x/2,m);this.drawRect(H,{length:a.tickLine.length,style:a.tickLine.style})}},drawAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),u=o.starAngle,f=o.endAngle,m={min:n,max:a,starAngle:u,endAngle:f},x=(a-n)/(t.tickCount-1),w=0;w<t.tickCount;w++){var L=n+w*x,H=this.valueToAngle(L,m),W=(0,d.clone)(t.tickLine.style);w%5!=0&&(W.lineWidth=W.lineWidth/2),this.drawRect(H,{length:w%5==0?t.tickLine.length:t.tickLine.length/2,style:W})}},drawOutSideAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),u=o.starAngle,f=o.endAngle,m={min:n,max:a,starAngle:u,endAngle:f},x=(a-n)/(t.tickCount-1),w=0;w<t.tickCount;w++){var L=n+w*x,H=this.valueToAngle(L,m);this.drawRect(H,{length:t.tickLine.length,style:t.tickLine.style})}},drawBarGauge:function(t){for(var e=this,n=this.gauge.options,a=n.min,o=n.max,u=n.range,f=n.color,m=n.rangeStyle,x=n.rangeBackgroundStyle,w=f||qc().colors,L=this.getAngleRange(),H=L.starAngle,W=L.endAngle,et={min:a,max:o,starAngle:H,endAngle:W},ht=(W-H)/(50-1),bt=ht/3,xt=0;xt<50;xt++){var qt=H+xt*ht,ie=this.getPath(qt-bt/2,qt+bt-bt/2),_e=x;if(u&&u.length){var ze=u.map(function(qe){return e.valueToAngle(qe,et)}),rr=zA(ze,qt),sr=Math.min(rr,u.length-1);_e=(0,d.deepMix)({},{fill:w[sr-1]},m)||x}else _e=t>=qt?(0,d.deepMix)({},{fill:f},m):x;this.drawRing(ie,_e)}},getAngleRange:function(){var t=this.gauge.options.angle,e=90-(360-t)*.5,n=(270-90-e)*Math.PI/180,a=(270+90+e)*Math.PI/180;return{starAngle:n,endAngle:a}},valueToAngle:function(t,e){var n=e.min,a=e.max,o=e.starAngle,u=e.endAngle;if(t===a)return u;if(t===n)return o;var f=(t-n)/(a-n);a===n&&(f=1);var m=f*(u-o)+o;return m=Math.max(m,o),m=Math.min(m,u),m},drawRing:function(t,e){this.gauge.group.addShape("path",{attrs:(0,d.deepMix)({},{path:t},e)})},drawRect:function(t,e){var n=this.gauge.axis,a=(0,Ft.__assign)((0,Ft.__assign)({},n),e),o=a.offset,u=a.length,f=this.gauge.center,m;o<0?m=this.gauge.ringRadius-this.gauge.options.rangeSize+o:m=this.gauge.ringRadius+o;var x=m*Math.cos(t)+f.x,w=m*Math.sin(t)+f.y,L=(m+u)*Math.cos(t)+f.x,H=(m+u)*Math.sin(t)+f.y,W=this.gauge.group.addShape("line",{attrs:(0,d.deepMix)({},{x1:x,y1:w,x2:L,y2:H},e.style)});W.set("name","axis-tickLine")},getPath:function(t,e){var n=this.gauge.center,a=this.gauge.ringRadius,o=this.gauge.options.rangeSize,u=a*Math.cos(t)+n.x,f=a*Math.sin(t)+n.y,m=(a-o)*Math.cos(t)+n.x,x=(a-o)*Math.sin(t)+n.y,w=a*Math.cos(e)+n.x,L=a*Math.sin(e)+n.y,H=(a-o)*Math.cos(e)+n.x,W=(a-o)*Math.sin(e)+n.y,et=Math.abs(t-e)>Math.PI?1:0;return[["M",u,f],["A",a,a,0,et,1,w,L],["L",H,W],["A",a-o,a-o,0,et,0,m,x],["Z"]]},drawPivot:function(t){var e=this.getAngleRange(),n=e.starAngle,a=e.endAngle,o=this.gauge.options,u=o.radius,f=o.rangeSize,m=this.gauge.pivot,x=m.thickness,w=m.thickness/2.5,L=this.gauge.group,H=t.points[0],W=this.parsePoint({x:0,y:0}),et=H.x*(a-n)+n,ht=(this.gauge.ringRadius-f)*u*Math.cos(et)+this.gauge.center.x,bt=(this.gauge.ringRadius-f)*u*Math.sin(et)+this.gauge.center.y,xt={x:ht,y:bt};if(m.base.visible&&L.addShape("circle",{attrs:(0,d.deepMix)({},{x:W.x,y:W.y,r:m.base.size?m.base.size/2:x*2.2},m.base.style)}),m.pointer.visible){var qt={x:W.x-xt.x,y:W.y-xt.y},ie=Math.sqrt(qt.x*qt.x+qt.y*qt.y);qt.x*=1/ie,qt.y*=1/ie;var _e=-Math.PI/2,ze=Math.cos(_e)*qt.x-Math.sin(_e)*qt.y,rr=Math.sin(_e)*qt.x+Math.cos(_e)*qt.y,sr=Math.PI/2,qe=Math.cos(sr)*qt.x-Math.sin(sr)*qt.y,wr=Math.sin(sr)*qt.x+Math.cos(sr)*qt.y,Vr=[["M",xt.x+ze*w,xt.y+rr*w],["L",W.x+ze*x,W.y+rr*x],["L",W.x+qe*x,W.y+wr*x],["L",xt.x+qe*w,xt.y+wr*w],["Z"]];L.addShape("path",{attrs:(0,d.deepMix)({},{path:Vr},m.pointer.style)}),L.addShape("circle",{attrs:{x:xt.x,y:xt.y,r:w,fill:m.pointer.style.fill}}),L.addShape("circle",{attrs:{x:W.x,y:W.y,r:x,fill:m.pointer.style.fill}})}m.pin.visible&&L.addShape("circle",{attrs:(0,d.deepMix)({},{x:W.x,y:W.y,r:w/1.2},m.pin.style)})}})},i}(),KO={range:"point",statistic:"annotation-text"},$O=Rc(KO);(0,d.assign)(Ns,$O);var QO=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="gauge",e}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{startAngle:-7/6,endAngle:1/6,rangeBackgroundStyle:{fill:"#f0f0f0"},rangeSize:24,statistic:{position:["50%","80%"]},axis:{visible:!0,offset:-10,tickCount:21,subTickCount:4,tickLine:{visible:!0,length:5,style:{stroke:"#aaa",lineWidth:2}},label:{visible:!0,offset:8,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}},pivot:{visible:!0,thickness:6,pin:{visible:!0,size:2,style:{fill:"#2E364B"}},base:{visible:!0,style:{fill:"#EEEEEE"}},pointer:{visible:!0,style:{fill:"#CFCFCF"}}}})},r.prototype.init=function(){var t=this.options,e=t.value,n=t.range,a=(n||[]).map(function(W){return+W}).sort(function(W,et){return W-et}),o=this.options,u=o.min,f=u===void 0?a[0]:u,m=o.max,x=m===void 0?a[a.length-1]:m,w=o.format,L=w===void 0?function(W){return""+W}:w,H=L(e);this.options.data=[{value:e||0}],this.options.valueText=H,this.options.min=f,this.options.max=x,this.options.format=L,this.initG2Shape(),i.prototype.init.call(this)},r.prototype.initG2Shape=function(){this.gaugeShape=new __((0,d.uniqueId)()),this.gaugeShape.setOption(this.type,(0,d.deepMix)({},this.options,{radius:.6,angle:240,textPosition:"100%"})),this.gaugeShape.render()},r.prototype.geometryParser=function(){return"gauge"},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a=t.format,o={value:{}};wc(o.value,{min:e,max:n,minLimit:e,maxLimit:n,nice:!0,formatter:a,tickInterval:20}),this.setConfig("scales",o),i.prototype.scale.call(this)},r.prototype.coord=function(){var t={type:"polar",cfg:{radius:1,startAngle:this.options.startAngle*Math.PI,endAngle:this.options.endAngle*Math.PI}};this.setConfig("coordinate",t)},r.prototype.axis=function(){var t=this.options.axis,e={value:{line:null,grid:null,tickLine:null}},n;t.offset<0?n=t.offset-this.options.rangeSize-t.tickLine.length-t.label.offset:n=t.offset+t.tickLine.length+t.label.offset,t.label.visible?e.value.label={offset:n,textStyle:t.label.style,autoRotate:!0}:e.value.label={style:{opacity:0}},e["1"]=!1,e.value=t.visible?e.value:!1,this.setConfig("axes",e)},r.prototype.addGeometry=function(){var t=this.options.pivot.pointer.style.fill||this.theme.defaultColor,e={type:"point",position:{fields:["value","1"]},shape:{values:["gauge"]},color:{values:[t]}};this.setConfig("geometry",e)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}this.setConfig("annotations",e)},r.prototype.renderStatistic=function(){var t=Math.max(this.options.width,this.options.height)/20,e=this.options.statistic,n={type:"text",content:e.text,top:!0,position:e.position,style:{fill:e.color,fontSize:e.size?e.size:t*1.2,textAlign:"center",textBaseline:"middle"}};return n},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,lt)},r}(_l),TE=QO;Es("gauge",QO);var PE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="gauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=TE.getDefaultOptions,r}(Xo),b1=PE,b_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="fanGauge",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{rangeColor:"#F6445A",rangeSize:70,axis:{visible:!0,offset:5,tickCount:10,subTickCount:4,tickLine:{visible:!0,length:3,style:{stroke:"#aaa",lineWidth:3}},label:{visible:!0,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}}})},r.prototype.initG2Shape=function(){this.gaugeShape=new __((0,d.uniqueId)()),this.gaugeShape.setOption(this.type,(0,d.deepMix)({},this.options,{radius:1,angle:120,textPosition:"125%",bottomRatio:3.5})),this.gaugeShape.render()},r.prototype.axis=function(){var t={value:!1,1:!1};this.setConfig("axes",t)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}var a=this.renderSideText(),o=e.concat(a);this.setConfig("annotations",o)},r.prototype.renderSideText=function(){var t=this.options,e=t.max,n=t.min,a=t.format,o=t.rangeSize,u=t.axis,f=12;return[n,e].map(function(m,x){return{type:"text",top:!0,position:["50%","50%"],content:a(m),style:(0,d.deepMix)({},u.label.style,{textAlign:"center"}),offsetX:x?o:-o,offsetY:f}})},r}(TE),IE=b_;Es("fanGauge",b_);var OE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="fanGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=IE.getDefaultOptions,r}(Xo),LE=OE,kE=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="meterGauge",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{axis:{visible:!0,offset:-10,tickCount:25,subTickCount:4,tickLine:{visible:!0,length:2,style:{stroke:"#aaa",lineWidth:1}}}})},r}(TE),ry=kE;Es("meterGauge",kE);var ny=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="meterGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=ry.getDefaultOptions,r}(Xo),iy=ny,o3=S(42473),ag=S.n(o3),$0=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "Donut" instead of "Ring" which was not recommended.')},r.getDefaultOptions=Qw.getDefaultOptions,r}(Xo),Sd=null,qO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "GroupedColumn" instead of "GroupColumn" which was not recommended.')},r.getDefaultOptions=Fm.getDefaultOptions,r}(Xo),og=null,JO=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "GroupedBar" instead of "GroupBar" which was not recommended.')},r.getDefaultOptions=lS.getDefaultOptions,r}(Xo),RE=null,DE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "PercentStackedArea" instead of "PercentageStackArea" which was not recommended.')},r.getDefaultOptions=oI.getDefaultOptions,r}(Xo),s3=null,tL=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "PercentStackedBar" instead of "PercentageStackBar" which was not recommended.')},r.getDefaultOptions=hS.getDefaultOptions,r}(Xo),u3=null,S_=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "PercentStackedColumn" instead of "PercentageStackColumn" which was not recommended.')},r.getDefaultOptions=aw.getDefaultOptions,r}(Xo),BE=null,IB=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "StackedArea" instead of "StackArea" which was not recommended.')},r.getDefaultOptions=gh.getDefaultOptions,r}(Xo),eL=null,OB=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "StackedBar" instead of "StackBar" which was not recommended.')},r.getDefaultOptions=Cx.getDefaultOptions,r}(Xo),l3=null,c3=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e),ag()(!1,'Please use "StackedColumn" instead of "StackColumn" which was not recommended.')},r.getDefaultOptions=pv.getDefaultOptions,r}(Xo),f3=null,rL=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{title:{visible:!1},description:{visible:!1},padding:[0,0,0,0],legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},tooltip:{visible:!1}})},r.prototype.coord=function(){},r.prototype.addGeometry=function(){},r.prototype.annotation=function(){var t=this,e=this.options,n=[],a={line:{style:{lineWidth:1,stroke:"#66d6a8"}}};(0,d.each)(e.guideLine,function(o){var u=Dc("guideLine",{plot:t,cfg:(0,d.deepMix)({},a,o)});n.push(u)}),this.setConfig("annotations",n)},r}(_l),ay=rL,FE=function(){function i(r){(0,d.assign)(this,r),this.init()}return i.prototype.destroy=function(){this.shape&&this.shape.destroy()},i.prototype.update=function(r,t,e){var n={};if((0,d.assign)(this,r),this.coord=this.view.geometries[0].coordinate,r.value){var a=this.coord.convert({x:0,y:this.value}).x,o=[1,0,0,0,1,0,a,0,1];n.matrix=o}if(r.style){var u=this.shape,f=u.attrs,m=(0,d.deepMix)({},f,r.style);n=(0,d.deepMix)({},m,n)}this.shape.stopAnimate(),this.shape.animate(n,t,e)},i.prototype.init=function(){this.coord=this.view.geometries[0].coordinate,this.container=this.view.foregroundGroup.addGroup();var r=this.coord.convert({x:0,y:this.value}).x,t=this.coord.center.y-this.progressSize/2-2,e=this.coord.center.y+this.progressSize/2+2,n=(0,d.deepMix)({},{stroke:"grey",lineWidth:1},this.style);this.shape=this.container.addShape("path",{attrs:(0,Ft.__assign)({path:[["M",0,t],["L",0,e]]},n),name:"progress-marker"}),this.shape.move(r,0),this.canvas.draw()},i}(),NE=FE,nL={progress:"interval"},zE=Rc(nL);(0,d.assign)(Ns,zE);var iL={progress:"interval"},GE={interval:"progress"},UE=["#55A6F3","#E8EDF3"],w_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="progress",t.isEntered=!1,t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barSize:t.size?t.size:this.getSize(),barStyle:t.progressStyle,color:this.parseColorProps(t)||UE};t=(0,d.mix)(t,e)},r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.beforeInit=function(){var t=this.options.percent;if(!(0,d.isNumber)(t))throw new Error("Percent value is required, and the type of percent must be Number.")},r.prototype.update=function(t){var e=this.options;if((0,d.hasKey)(t,"percent")&&(e.percent=t.percent,this.changeData(this.processData())),t.style&&(this.styleUpdateAnimation(t.style),this.updateColorConfigByStyle(t.style)),t.color){var n=void 0;(0,d.isArray)(t.color)?(this.options.color=t.color,n=[{fill:t.color[0]},{fill:t.color[1]}]):(this.options.color[0]=t.color,n={fill:t.color}),this.styleUpdateAnimation(n)}t.marker&&(this.updateMarkers(t.marker),this.options.marker=t.marker)},r.prototype.destroy=function(){this.markers&&this.markers.length>0&&((0,d.each)(this.markers,function(t){t.destroy()}),this.markers=[]),i.prototype.destroy.call(this)},r.prototype.afterRender=function(){var t=this;this.options.marker&&!this.markers&&(this.markers=[],(0,d.each)(this.options.marker,function(u){var f=(0,d.mix)({canvas:t.canvas,view:t.view,progressSize:t.options.barSize},u),m=new NE(f);t.markers.push(m)}));var e=this.view.geometries[0].container,n=e.getBBox(),a=e.addShape("rect",{attrs:{width:n.width,height:n.height,x:n.minX,y:n.minY,fill:"rgba(0,0,0,0)"}});this.canvas.draw(),a.on("mouseenter",function(u){t.isEntered=!0,t.view.emit("progress:mouseenter",u)}),a.on("mouseleave",function(u){t.isEntered=!1,t.view.emit("progress:mouseleave",u)});var o=this.canvas.get("container");o.addEventListener("mouseleave",function(u){t.isEntered&&(t.view.emit("progress:mouseleave",u),t.isEntered=!1)})},r.prototype.geometryParser=function(t,e){return t==="g2"?iL[e]:GE[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.yField,t.xField],plot:this});e.adjust=[{type:"stack"}],(0,d.has)(t,"animation")&&(e.animate=t.animation),this.setConfig("geometry",e)},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,Lt)},r.prototype.parseColorProps=function(t){var e;if(t.color)if((0,d.isFunction)(t.color)?e=t.color(t.percent):e=t.color,(0,d.isString)(e)){var n=(0,d.clone)(UE);return n[0]=e,n}else return e;return t.color},r.prototype.processData=function(){var t=this.options,e=[{type:"current",value:t.percent},{type:"rest",value:1-t.percent}];return e},r.prototype.updateMarkers=function(t){var e=t.length,n=this.getUpdateAnimationOptions();if((0,d.each)(this.markers,function(m,x){x>e-1?m.destroy():m.update(t[x],n.duration,n.easing)}),this.markers.length<e)for(var a=this.markers.length,o=a;o<e;o++){var u=(0,d.deepMix)({},{canvas:this.canvas,view:this.view,progressSize:this.options.barSize},t[o]),f=new NE(u);this.markers.push(f)}},r.prototype.getSize=function(){var t=this.height;return t>=50?10:4},r.prototype.styleUpdateAnimation=function(t){var e=this.getUpdateAnimationOptions(),n=e.duration,a=e.easing,o=[],u=this.view,f=u.geometries;(0,d.each)(f,function(m){if(m.type==="interval"){var x=m.elements;(0,d.each)(x,function(w){o.push.apply(o,w.shape)})}}),(0,d.isArray)(t)?(0,d.each)(t,function(m,x){o[x].animate(m,n,a)}):o[0].animate(t,n,a)},r.prototype.getUpdateAnimationOptions=function(){var t=450,e="easeQuadInOut",n=this.options.animation;return n&&n.update&&(n.update.duration&&(t=n.update.duration),n.update.easing&&(e=n.update.easing)),{duration:t,easing:e}},r.prototype.updateColorConfigByStyle=function(t){var e=this;(0,d.isArray)(t)?(0,d.each)(t,function(n,a){n.fill&&(e.options.color[a]=n.fill)}):t.fill&&(this.options.color[0]=t.fill)},r}(ay),E_=w_;Es("progress",w_);var VE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="progress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t,e){var n=this.layers[0];n.update(t,e)},r.getDefaultOptions=E_.getDefaultOptions,r}(Xo),C_=VE,ZE={ringProgress:"interval"},HE=Rc(ZE);(0,d.assign)(Ns,HE);var Q0=["#55A6F3","#E8EDF3"],A_=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ringProgrsss",t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barStyle:t.progressStyle,color:this.parseColorProps(t)||Q0};t=(0,d.mix)(t,e)},r.prototype.coord=function(){var t={type:"theta",cfg:{radius:1,innerRadius:this.getThickness(this.options.size)}};this.setConfig("coordinate",t)},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=this.options;this.ring=Yo("interval","main",{positionFields:[t.yField,t.xField],plot:this}),this.ring.adjust=[{type:"stack"}],this.setConfig("geometry",this.ring)},r.prototype.animation=function(){this.ring.animate={appear:{duration:1e3}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,wt)},r.prototype.getThickness=function(t){var e=this.width,n=this.height,a=Math.min(e,n);return t?1-t/a:a>=60?1-20/a:1-10/a},r}(E_),jE=A_;Es("ringProgress",A_);var XE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="ringProgress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t){var e=this.layers[0];e.update(t)},r.getDefaultOptions=jE.getDefaultOptions,r}(Xo),M_=XE,YE={onColumnClick:"interval:click",onColumnDblclick:"interval:dblclick",onColumnMousemove:"interval:mousemove",onColumnMousedown:"interval:mousedown",onColumnMouseup:"interval:mouseup",onColumnMouseenter:"interval:mouseenter",onColumnMouseleave:"interval:mouseleave",onColumnContextmenu:"interval:contextmenu"};(0,d.assign)(Ns,YE);var aL=.6,oL={column:"interval"},WE={interval:"column"},KE=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyColumn",t}return r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?oL[e]:WE[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},this.setConfig("scales",e)},r.prototype.addGeometry=function(){var t=this.options,e=Yo("interval","main",{positionFields:[t.xField,t.yField],plot:this});this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Gt)},r.prototype.processProps=function(){var t={padding:[0,0,0,0],columnSize:this.getSize()};this.options=(0,d.mix)(this.options,t)},r.prototype.getSize=function(){var t=this.options,e=this.getColumnNum(t.data,t.xField),n=this.width;return n/e*aL},r.prototype.getColumnNum=function(t,e){var n=[];return(0,d.each)(t,function(a){var o=a[e];n.indexOf(o)<0&&n.push(o)}),n.length},r}(ay),sL=KE;Es("tinyColumn",KE);var $E=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="tinyColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=sL.getDefaultOptions,r}(Xo),QE=$E,uL={onAreaClick:"area:click",onAreaDblclick:"area:dblclick",onAreaMousemove:"area:mousemove",onAreaMousedown:"area:mousedown",onAreaMouseup:"area:mouseup",onAreaMouseenter:"area:mouseenter",onAreaMouseleave:"area:mouseleave",onAreaContextmenu:"area:contextmenu",onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,d.assign)(Ns,uL);var lL={area:"area",line:"line"},qE=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyArea",t}return r.prototype.geometryParser=function(t,e){return lL[e]},r.prototype.addGeometry=function(){this.area=Yo("area","mini",{plot:this}),this.setConfig("geometry",this.area),this.line=Yo("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,re)},r}(ay),cL=qE;Es("tinyArea",qE);var JE=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="tinyArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=cL.getDefaultOptions,r}(Xo),T_=JE,fL={onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,d.assign)(Ns,fL);var hL={line:"line"},tC=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyLine",t}return r.prototype.geometryParser=function(t,e){return hL[e]},r.prototype.addGeometry=function(){this.line=Yo("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Qt)},r}(ay),pL=tC;Es("tinyLine",tC);var eC=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="tinyLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=pL.getDefaultOptions,r}(Xo),rC=eC,P_=5,dL=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.geomLayers=[],e.legends=[],e.requiredField=["xField","yField"],e.options=e.getOptions(t),e.initialOptions=(0,d.deepMix)({},t),e.themeController=new sx,e}return r.getDefaultOptions=function(){return{title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"}}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t);return(0,d.deepMix)({},n,a,e,t)},r.prototype.checkData=function(){for(var t=this,e,n,a=this.options,o=a.data,u=a.xField,f=a.yField,m=0;m<this.requiredField.length;m++){var x=this.requiredField[m];if(!(0,d.hasKey)(this.options,x))return!1}return!(!(0,d.isArray)(f)||f.length<2||!(0,d.isArray)(o)||o.length===0||((e=o[0])===null||e===void 0?void 0:e.length)===0&&((n=o[1])===null||n===void 0?void 0:n.length)===0||((0,d.each)(o,function(w,L){if(!(0,d.isArray)(w)||w.length===0){var H=t.getMockData(L);o[L]=H}}),!o[0][0][u]||!o[1][0][u]))},r.prototype.init=function(){i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.drawTitle(),this.drawDescription()},r.prototype.updateConfig=function(t){this.doDestroy(),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){t&&t.length<2||!(0,d.isArray)(t[0])||(0,d.each)(this.geomLayers,function(e,n){e.changeData(t[n])})},r.prototype.changeDataByIndex=function(t,e){if(!(0,d.isArray)(t[0])){var n=this.geomLayers[e];n.changeData(t)}},r.prototype.doDestroy=function(){(0,d.each)(this.geomLayers,function(t){t.doDestroy()}),this.geomLayers=[],(0,d.each)(this.legends,function(t){t.destroy()}),this.legends=[]},r.prototype.createLayer=function(t,e,n){var a=this.getViewRange(),o=new t((0,Ft.__assign)({canvas:this.canvas,container:this.container,x:a.minX,y:a.minY,width:a.width,height:a.height,data:e},n));return this.geomLayers.push(o),o},r.prototype.getLeftYAxisMax=function(){var t=this.getScaleData(0),e=this.getScaleData(1);return t.min==0&&t.max===0?Math.max(e.max,0):t.max},r.prototype.yAxis=function(t){var e=this.getScaleData(0),n=this.options.yAxis,a=t===0?n.leftConfig:n.rightConfig,o=this.colors[t],u=(0,d.clone)(a),f={title:"stroke",line:"stroke",label:"fill",tickLine:"stroke"};a.visible&&a.colorMapping&&(0,d.each)(u,function(x,w){if(!(0,d.isString)(x)&&(0,d.hasKey)(f,w)){var L=f[w];x.style||(x.style={}),x.style[L]=o}}),a.visible||(u.title.visible=!1,u.tickLine.visible=!1,u.label.visible=!1,u.line.visible=!1,u.visible=!0);var m=this.getYAxisGlobalConfig();return t===0&&e.max===0&&e.min===0&&(u.max=this.getLeftYAxisMax()),(0,d.deepMix)({},m,u)},r.prototype.getTicks=function(){for(var t=this.options.yAxis,e=this.getScaleData(0),n=(0,jn.getScale)("linear"),a=new n((0,d.deepMix)({},{min:0,max:this.getLeftYAxisMax(),nice:!0,values:e.values},{tickCount:t.tickCount})),o=a.ticks.length,u=t.max?a.max:this.getScaleData(1).max,f=u/(o-1),m=[],x=0;x<o;x++){var w=x*f;Number.isInteger(w)||(w=parseFloat(w.toFixed(1))),m.push(w)}return m},r.prototype.getScaleData=function(t){var e=this.options,n=e.data,a=e.yField,o=e.yAxis,u=[];(0,d.each)(n[t],function(x){u.push(x[a[t]])}),u.sort(function(x,w){return x-w});var f=u[0],m=o.max?o.max:u[u.length-1];return{min:f,max:m,values:u}},r.prototype.getDataByXField=function(t,e){var n=this.options,a=n.data,o=n.xField,u=a[e];return u.filter(function(f){return f[o]===t})},r.prototype.getYAxisGlobalConfig=function(){var t=this.options.yAxis,e=t.min,n=t.max,a=t.tickCount;return{min:e,max:n,tickCount:a}},r.prototype.adjustLayout=function(){var t=this,e,n,a=qc().bleeding;(0,d.isArray)(a)&&(0,d.each)(a,function(H,W){typeof a[W]=="function"&&(a[W]=a[W](t.options))});var o=this.getViewRange(),u=this.transfromPadding(this.geomLayers[0].options.padding),f=this.transfromPadding(this.geomLayers[1].options.padding),m=0,x,w;((e=this.options.legend)===null||e===void 0?void 0:e.visible)&&(x=this.legends[0].getLayoutBBox(),w=this.legends[1].getLayoutBBox(),m=x.height+P_*2);var L=u.map(function(H,W){return W===0?Math.max.apply(null,[H+m,f[W]]):Math.max.apply(null,[H,f[W]])});this.geomLayers[0].updateConfig({padding:L}),this.geomLayers[0].render(),this.geomLayers[1].updateConfig({padding:L}),this.geomLayers[1].render(),((n=this.options.legend)===null||n===void 0?void 0:n.visible)&&(this.legends[0].setLocation({x:a[3],y:o.minY+P_}),this.legends[1].setLocation({x:o.maxX-a[1]-w.width,y:o.minY+P_}))},r.prototype.transfromPadding=function(t){return typeof t=="string"||typeof t=="number"?[Number(t)]:t},r.prototype.legendFilter=function(t){var e=this,n=this.legends[t],a=n.get("group");a.on("click",function(){var o=n.get("items")[0];o.unchecked?(n.setItemState(o,"unchecked",!1),e.showLayer(t)):(n.setItemState(o,"unchecked",!0),e.hideLayer(t))})},r.prototype.hideLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!1),this.setGeometryVisibility(a,!1),this.canvas.draw()},r.prototype.showLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!0),this.setGeometryVisibility(a,!0),this.canvas.draw()},r.prototype.setGeometryVisibility=function(t,e){(0,d.each)(t.geometries,function(n){var a=n.container,o=n.labelsContainer;a&&a.set("visible",e),o&&o.set("visible",e)})},r.prototype.getYAxisContainer=function(t,e){var n,a=t.controllers.filter(function(f){return(0,d.hasKey)(f,"axisContainer")})[0];if(a){var o=a,u=o.axisContainer.get("children");(0,d.each)(u,function(f){var m=f.get("component").get("field");m===e&&(n=f)})}return n},r.prototype.getUnCheckedValue=function(){var t=[];return(0,d.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,d.each)(n,function(a){t.push(a.name)})}),t},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),R0(t.title)){var n=this.width,a=this.theme,o=new ky({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,d.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:R0(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),R0(t.description)){var n=this.width,a=this.theme,o=0;if(this.title){var u=this.title.getBBox();o+=u.minY+u.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var f=new ky({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,d.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=f}},r.prototype.getViewRange=function(){this.layerBBox||(this.layerBBox=new ns(this.x,this.y,this.width,this.height));var t=this.layerBBox.minX,e=this.layerBBox.maxX,n=this.layerBBox.minY,a=this.layerBBox.maxY,o=[this.title,this.description];return(0,d.each)(o,function(u){if(u){var f=u.position,m=u.getBBox(),x=m.minX,w=m.maxX,L=m.minY,H=m.maxY;H>=n&&H<=a&&f==="top"&&(n=H),L>=n&&L<=a&&f==="bottom"&&(a=L),w>t&&w<=e&&f==="left"&&(t=w),x>=t&&w<=e&&f==="right"&&(e=x)}}),new ns(t,n,e-t,a-n)},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o={};return o[n]="null",o[a[t]]=0,[o]},r}(Ly),nC=dL,I_={lineSize:2,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},vL={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,offset:12}},iC=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dualLine",t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0},yAxis:{leftConfig:vL,rightConfig:vL},lineConfigs:[(0,d.deepMix)({},I_,{color:"#5B8FF9"}),(0,d.deepMix)({},I_,{color:"#e76c5e"})]})},r.prototype.init=function(){var t=this;if(i.prototype.init.call(this),!!this.checkData()){var e=this.options,n=e.data,a=e.meta,o=e.xField,u=e.yField,f=e.xAxis,m=e.tooltip,x=e.lineConfigs,w=e.legend,L=e.events,H=e.customMeta;this.colors=[x[0].color,x[1].color];var W=this.getYAxisGlobalConfig(),et=this.createLayer(Om,n[0],(0,Ft.__assign)({meta:a,xField:o,yField:u[0],xAxis:{visible:!1},yAxis:(0,d.deepMix)({},W,{grid:{visible:!1},nice:!0},this.yAxis(0)),tooltip:{visible:!1},events:L},x[0]));et.render();var ht={};ht[u[1]]={ticks:this.getTicks()};var bt=this.createLayer(Om,n[1],(0,Ft.__assign)({xField:o,yField:u[1],meta:H?a:(0,d.deepMix)({},a,ht),serieField:u[1],xAxis:f,yAxis:(0,d.deepMix)({},W,{position:"right",nice:!1},this.yAxis(1)),tooltip:(0,d.deepMix)({},{showMarkers:!1,custom:{onChange:function(xt,qt){t.tooltip(xt,qt)}}},m),events:L},x[1]));bt.render(),w.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.tooltip=function(t,e){var n=this.getUnCheckedValue();if(n.length===this.colors.length){t.style.display="none";return}else t.style.display="block";var a=this.options,o=a.yField,u=a.legend,f=(0,d.clone)(e.items[0]),m=this.getDataByXField(e.title,0)[0];m&&(0,d.findIndex)(e.items,function(x){return x.name===o[0]})<0&&e.items.push((0,Ft.__assign)((0,Ft.__assign)({},f),{mappingData:(0,d.deepMix)({},f.mappingData,{_origin:m}),data:m,name:o[0],value:m[o[0]],color:this.colors[0]})),u.visible&&(0,d.each)(this.legends,function(x,w){var L=x.get("items")[0];if(L.unchecked){var H=w===0?1:0;e.items.splice(H,1)}})},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,u=this.container.addGroup(),f=a;(0,d.each)(this.geomLayers,function(m,x){var w=(0,d.deepMix)({},{symbol:"circle",style:{r:4,fill:o[x]}},f.marker),L=[{name:n[x],unchecked:!1,marker:w}],H=new wi.Legend.Category({id:t.type,container:u,x:0,y:0,items:L,updateAutoRender:!0,itemBackground:null,itemName:f.text});H.init(),H.render(),t.legends.push(H)}),(0,d.each)(this.geomLayers,function(m,x){t.legendFilter(x)})},r}(nC),h3=iC;Es("dualLine",iC);var gL=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="dualLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=h3.getDefaultOptions,r}(Xo),aC=gL,oC={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},mL={color:"#5B8FF9"},sC={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},yL=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="columnLine",t.legends=[],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:sC,rightConfig:sC},lineConfig:oC,columnConfig:mL,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions;if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var u=qc(),f=u.colors,m=u.colors_20,x=this.getValueBySeriesField(),w=x.length>f.length?m:f,L=[];(0,d.each)(x,function(H,W){L.push(w[W+1])}),a.lineConfig.color=L}},r.prototype.init=function(){if(i.prototype.init.call(this),!!this.checkData()){var t=this.options,e=t.data,n=t.meta,a=t.xField,o=t.yField,u=t.lineSeriesField,f=t.legend,m=t.lineConfig,x=t.columnConfig,w=t.events,L=t.customMeta;this.colors=[x.color,m.color],this.drawColumn();var H={};H[o[1]]={ticks:this.getTicks()};var W=this.createLayer(Om,e[1],(0,Ft.__assign)({xField:a,yField:o[1],seriesField:u,meta:L?n:(0,d.deepMix)({},n,H),xAxis:{visible:!1},yAxis:(0,d.deepMix)({},{position:"right",grid:{visible:!1},nice:!0},this.yAxis(1)),tooltip:{visible:!1},legend:{visible:!1},events:w},m));W.render(),f.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,u=e.xAxis,f=e.tooltip,m=e.columnConfig,x=e.meta,w=e.events,L=this.createLayer(j0,n[0],(0,Ft.__assign)({xField:a,yField:o[0],meta:x,xAxis:u,yAxis:(0,d.deepMix)({},{grid:{visible:!0},nice:!0},this.yAxis(0)),tooltip:(0,d.deepMix)({},{showMarkers:!1,custom:{onChange:function(H,W){t.tooltip(H,W)}}},f),events:w},m));L.render()},r.prototype.tooltip=function(t,e){var n=this,a=this.options,o=a.xField,u=a.yField,f=a.tooltip,m=(0,d.clone)(e.items[0]),x=this.getDataByXField(e.title,1),w=(0,d.get)(f,"formatter");if(x&&(0,d.each)(x,function(ht,bt){var xt=n.geomLayers[1].options.seriesField,qt=xt?ht[xt]:u[1],ie=w?w(ht[o],ht[u[1]],ht[xt]):{name:qt,value:ht[u[1]]};e.items.push((0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},m),{mappingData:(0,d.deepMix)({},m.mappingData,{_origin:x}),data:ht}),ie),{color:(0,d.isArray)(n.colors[1])?n.colors[1][bt]:n.colors[1]}))}),this.options.legend.visible){var L=this.getUnCheckedValue(),H=this.legends[0].get("items").length+this.legends[1].get("items").length;if(L.length===H){t.style.display="none";return}else t.style.display="block";var W=[],et=[];(0,d.each)(e.items,function(ht){var bt=ht.name;!(0,d.contains)(W,bt)&&!(0,d.contains)(L,bt)&&(W.push(bt),et.push(ht))}),(0,d.each)(e.items,function(ht,bt){bt<et.length?e.items[bt]=et[bt]:e.items.pop()})}},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,u=this.container.addGroup(),f=a,m=["square","circle"];(0,d.each)(this.geomLayers,function(x,w){var L;if(x.options.seriesField){var H=t.getValueBySeriesField();L=t.createNormalLegend(H,m[w],o[w],f,u)}else L=t.createSingleLegend(n[w],m[w],o[w],f,u);t.legends.push(L)}),(0,d.each)(this.geomLayers,function(x,w){x.options.seriesField?t.multipleLegendFilter(w,x.options.seriesField):t.legendFilter(w)})},r.prototype.createSingleLegend=function(t,e,n,a,o){var u=(0,d.deepMix)({},{symbol:e,style:{r:4,fill:n}},a.marker),f=[{name:t,unchecked:!1,marker:u}],m=new wi.Legend.Category({id:this.type,container:o,x:0,y:0,items:f,updateAutoRender:!0,itemBackground:null,itemName:a.text});return m.init(),m.render(),m},r.prototype.createNormalLegend=function(t,e,n,a,o){var u=[];(0,d.each)(t,function(m,x){u.push({name:m,unchecked:!1,marker:{symbol:e,style:{r:4,fill:n[x]}}})});var f=new wi.Legend.Category({id:this.type,container:o,x:0,y:0,items:u,updateAutoRender:!0,itemBackground:null,itemName:a.text,offsetX:0});return f.init(),f.render(),f},r.prototype.multipleLegendFilter=function(t,e){var n=this,a=this.legends[t],o=[],u=a.get("group"),f=!1;u.on("click",function(m){var x=n.geomLayers[t].view,w=m.target.get("delegateObject").item;w.unchecked?(f===!0&&(n.showLayer(t),f=!1),(0,d.pull)(o,w.name),x.filter(w.value,function(L){return!(0,d.contains)(o,L)}),x.render(),a.setItemState(w,"unchecked",!1)):(a.setItemState(w,"unchecked",!0),o.push(w.name),o.length===n.legends[t].get("items").length?(n.hideLayer(t),f=!0):(x.filter(e,function(L){return!(0,d.contains)(o,L)}),x.render())),n.canvas.draw()})},r.prototype.getValueBySeriesField=function(){var t=this.options,e=t.lineSeriesField,n=t.data,a=n[1],o=[];return(0,d.each)(a,function(u){var f=u[e];(0,d.contains)(o,f)||o.push(f)}),o},r}(nC),uC=yL;Es("columnLine",yL);var lC=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="columnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=uC.getDefaultOptions,r}(Xo),xL=lC,_L={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},p3={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},cC={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},fC=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnGroupField"],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,d.deepMix)({},cC,{colorMapping:!1}),rightConfig:cC},lineConfig:_L,columnConfig:p3,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions,u=this.getValueByGroupField();if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var f=qc(),m=f.colors,x=f.colors_20,w=this.getValueBySeriesField(),L=w.length>m.length?x:m,H=[],W=u.length;(0,d.each)(w,function(ht,bt){H.push(L[bt+W])}),a.lineConfig.color=H}var et=this.options.columnConfig.color;this.options.columnConfig.color=et.slice(0,u.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,u=e.columnGroupField,f=e.xAxis,m=e.tooltip,x=e.columnConfig,w=e.events,L=this.createLayer(Fm,n[0],(0,Ft.__assign)({xField:a,yField:o[0],groupField:u,xAxis:f,yAxis:(0,d.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,d.deepMix)({},m,{showMarkers:!1,custom:{onChange:function(H,W){t.tooltip(H,W)}}}),events:w},x));L.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,u=this.container.addGroup(),f=a,m=["square","circle"];(0,d.each)(this.geomLayers,function(x,w){var L;if(x.options.seriesField){var H=t.getValueBySeriesField();L=t.createNormalLegend(H,m[w],o[w],f,u)}else if(x.options.groupField){var H=t.getValueByGroupField();L=t.createNormalLegend(H,m[w],o[w],f,u)}else L=t.createSingleLegend(n[w],m[w],o[w],f,u);t.legends.push(L)}),(0,d.each)(this.geomLayers,function(x,w){x.options.seriesField?t.multipleLegendFilter(w,x.options.seriesField):x.options.groupField?t.multipleLegendFilter(w,x.options.groupField):t.legendFilter(w)})},r.prototype.getValueByGroupField=function(){var t=this.options,e=t.columnGroupField,n=t.data,a=n[0],o=[];return(0,d.each)(a,function(u){var f=u[e];(0,d.contains)(o,f)||o.push(f)}),o},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnGroupField,u={};u[n]="null_1",u[a[t]]=0,u[o]="null_a";var f={};return f[n]="null_1",f[a[t]]=1,f[o]="null_a",[u,f]},r}(uC),hC=fC;Es("groupedColumnLine",fC);var bL=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="groupedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=hC.getDefaultOptions,r}(Xo),pC=bL,d3={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},v3={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},SL={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},dC=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnStackField"],t}return r.getDefaultOptions=function(){return(0,d.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,d.deepMix)({},SL,{colorMapping:!1}),rightConfig:SL},lineConfig:d3,columnConfig:v3,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this.getValueByStackField(),a=this,o=a.options,u=a.initialOptions;if(o.lineSeriesField&&(o.yAxis.rightConfig.colorMapping=!1,((t=u.lineConfig)===null||t===void 0?void 0:t.lineSize)||(o.lineConfig.lineSize=3),!((e=u.lineConfig)===null||e===void 0?void 0:e.color))){var f=qc(),m=f.colors,x=f.colors_20,w=this.getValueBySeriesField(),L=w.length>m.length?x:m,H=[],W=n.length;(0,d.each)(w,function(ht,bt){H.push(L[bt+W])}),o.lineConfig.color=H}var et=this.options.columnConfig.color;this.options.columnConfig.color=et.slice(0,n.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,u=e.columnStackField,f=e.xAxis,m=e.tooltip,x=e.columnConfig,w=e.events,L=this.createLayer(pv,n[0],(0,Ft.__assign)({xField:a,yField:o[0],stackField:u,xAxis:f,yAxis:(0,d.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,d.deepMix)({},m,{showMarkers:!1,custom:{onChange:function(H,W){t.tooltip(H,W)}}}),events:w},x));L.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,u=this.container.addGroup(),f=a,m=["square","circle"];(0,d.each)(this.geomLayers,function(x,w){var L;if(x.options.seriesField){var H=t.getValueBySeriesField();L=t.createNormalLegend(H,m[w],o[w],f,u)}else if(x.options.stackField){var H=t.getValueByStackField();L=t.createNormalLegend(H,m[w],o[w],f,u)}else L=t.createSingleLegend(n[w],m[w],o[w],f,u);t.legends.push(L)}),(0,d.each)(this.geomLayers,function(x,w){x.options.seriesField?t.multipleLegendFilter(w,x.options.seriesField):x.options.stackField?t.multipleLegendFilter(w,x.options.stackField):t.legendFilter(w)})},r.prototype.getValueByStackField=function(){var t=this.options,e=t.columnStackField,n=t.data,a=n[0],o=[];return(0,d.each)(a,function(u){var f=u[e];(0,d.contains)(o,f)||o.push(f)}),o},r.prototype.getUnCheckedValue=function(){var t=[];return(0,d.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,d.each)(n,function(a){t.push(a.name)})}),t},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnStackField,u={};u[n]="null_1",u[a[t]]=0,u[o]="null_a";var f={};return f[n]="null_1",f[a[t]]=1,f[o]="null_a",[u,f]},r}(uC),wL=dC;Es("stackedColumnLine",dC);var vC=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,d.deepMix)({},t);e.type="stackedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=wL.getDefaultOptions,r}(Xo),gC=vC,EL=function(r){return r.charAt(0).toUpperCase()+r.slice(1).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},LB=function(r,t){return JSON.stringify(r)===JSON.stringify(t)},g3=function(r,t){return new Set(r.concat(t)).size===r.length},mC=function(r,t){var e={}.toString;return e.call(r)==="[object "+t+"]"},m3=function(r){if(!r)return r;var t={};for(var e in r)t[e]=r[e];return t},oy={sameArray:g3,camelCase:EL,isType:mC,clone:m3},y3=S(73935),CL=function(r){var t=document.createElement("div");return t.className="g2-tooltip eva-charts-tootip",y3.render(r,t),t},yC=CL;function O_(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function xC(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?O_(Object(t),!0).forEach(function(e){AL(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):O_(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function AL(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}function Ts(i,r){var t=(0,nt.useRef)(),e=(0,nt.useRef)(null),n=function(){var f,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",x=arguments.length>1?arguments[1]:void 0;return(f=t.current)===null||f===void 0?void 0:f.canvas.cfg.el.toDataURL(m,x)},a=function(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"image/png",x=arguments.length>2?arguments[2]:void 0;try{var w;f&&f.indexOf(".")===-1&&(f="".concat(f,".png"));var L=f;if(!L){var H,W=r;L="".concat((W==null||(H=W.title)===null||H===void 0?void 0:H.text)||(i==null?void 0:i.name),".png")}var et=(w=t.current)===null||w===void 0?void 0:w.canvas.cfg.el.toDataURL(m,x),ht=document.createElement("a");ht.href=et,ht.download=L,document.body.appendChild(ht),ht.click(),document.body.removeChild(ht),ht=null}catch(bt){console.log(bt)}},o=function(){var f,m,x,w,L;if((f=r.statistic)===null||f===void 0?void 0:f.htmlContent){var H=r.statistic.htmlContent;r.statistic.htmlContent=function(){var et=H.apply(void 0,arguments);return oy.isType(et,"String")||oy.isType(et,"Number")||oy.isType(et,"HTMLDivElement")?et:yC(et)}}if(((m=r.tooltip)===null||m===void 0||(x=m.custom)===null||x===void 0?void 0:x.container)&&(r.tooltip.custom.container=yC(r.tooltip.custom.container)),(w=r.tooltip)===null||w===void 0||(L=w.custom)===null||L===void 0?void 0:L.customContent){var W=r.tooltip.custom.customContent;r.tooltip.custom.customContent=function(et,ht){var bt=W(et,ht)||"";return oy.isType(bt,"HTMLDivElement")?bt:yC(bt)}}};return(0,nt.useEffect)(function(){t.current&&(r.onlyChangeData?t.current.changeData((r==null?void 0:r.data)||[]):(o(),t.current.updateConfig(r),t.current.render()))},[(r==null?void 0:r.memoData)?r.memoData:JSON.stringify(r)]),(0,nt.useEffect)(function(){if(!e.current)return function(){return null};o();var u=new i(e.current,xC({},r));return u.__proto__.toDataURL=function(f,m){return n(f,m)},u.__proto__.downloadImage=function(f,m,x){return a(f,m,x)},u.render(),t.current=oy.clone(u),function(){return u.destroy()}},[]),{chart:t,container:e,toDataURL:n,downloadImage:a}}var _C=nt.createContext({});function S1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S1=function(t){return typeof t}:S1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S1(i)}function ML(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function L_(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function bC(i,r,t){return r&&L_(i.prototype,r),t&&L_(i,t),i}function TL(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&k_(i,r)}function k_(i,r){return k_=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},k_(i,r)}function x3(i){var r=wd();return function(){var e=R_(i),n;if(r){var a=R_(this).constructor;n=Reflect.construct(e,arguments,a)}else n=e.apply(this,arguments);return SC(this,n)}}function SC(i,r){return r&&(S1(r)==="object"||typeof r=="function")?r:_3(i)}function _3(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function wd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}function R_(i){return R_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R_(i)}var PL=function(i){TL(t,i);var r=x3(t);function t(){var e;return ML(this,t),e=r.apply(this,arguments),e.state={hasError:!1},e.renderError=function(n){switch(n){default:return nt.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",n.message)}},e}return bC(t,[{key:"render",value:function(){return this.state.hasError?this.renderError(this.state.error):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0,error:n}}},{key:"getDerivedStateFromProps",value:function(n,a){return a.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null}}]),t}(nt.Component),xs=PL,b3=_C.Provider;function S3(i,r){if(i==null)return{};var t=IL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function IL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var wC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=S3(i,["chartRef","style","className"]),u=Ts(RS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});wC.defaultProps=RS.getDefaultOptions();var OL=wC;function w3(i,r){if(i==null)return{};var t=LL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function LL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var EC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=w3(i,["chartRef","style","className"]),u=Ts(Ex,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});EC.defaultProps=Ex.getDefaultOptions();var kL=EC;function RL(i,r){if(i==null)return{};var t=DL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function DL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var CC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=RL(i,["chartRef","style","className"]),u=Ts(mE,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});CC.defaultProps=mE.getDefaultOptions();var BL=CC;function E3(i,r){if(i==null)return{};var t=FL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function FL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var AC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=E3(i,["chartRef","style","className"]),u=Ts(g_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});AC.defaultProps=g_.getDefaultOptions();var NL=AC;function zL(i,r){if(i==null)return{};var t=MC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function MC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var GL=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=zL(i,["chartRef","style","className"]),u=Ts(WO,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))}),UL=GL;function sy(i,r){if(i==null)return{};var t=VL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function VL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var TC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=sy(i,["chartRef","style","className"]),u=Ts(Dx,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});TC.defaultProps=Dx.getDefaultOptions();var C3=TC;function ZL(i,r){if(i==null)return{};var t=A3(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function A3(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var HL=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=ZL(i,["chartRef","style","className"]),u=Ts(xL,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});HL.defaultProps=xL.getDefaultOptions();var M3=HL;function T3(i,r){if(i==null)return{};var t=P3(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function P3(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var jL=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=T3(i,["chartRef","style","className"]),u=Ts(t_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});jL.defaultProps=t_.getDefaultOptions();var I3=jL;function O3(i,r){if(i==null)return{};var t=w1(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function w1(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var D_=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=O3(i,["chartRef","style","className"]),u=Ts(Jw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});D_.defaultProps=Jw.getDefaultOptions();var E1=D_;function XL(i,r){if(i==null)return{};var t=YL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function YL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var B_=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=XL(i,["chartRef","style","className"]),u=Ts(aC,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});B_.defaultProps=aC.getDefaultOptions();var WL=B_;function KL(i,r){if(i==null)return{};var t=F_(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function F_(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var PC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=KL(i,["chartRef","style","className"]),u=Ts(LE,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});PC.defaultProps=LE.getDefaultOptions();var $L=PC;function QL(i,r){if(i==null)return{};var t=qL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function qL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var C1=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=QL(i,["chartRef","style","className"]),u=Ts(HI,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))}),L3=C1;function A1(i,r){if(i==null)return{};var t=JL(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function JL(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var N_=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=A1(i,["chartRef","style","className"]),u=Ts(b1,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});N_.defaultProps=b1.getDefaultOptions();var t5=N_;function e5(i,r){if(i==null)return{};var t=z_(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function z_(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var IC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=e5(i,["chartRef","style","className"]),u=Ts(cS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});IC.defaultProps=cS.getDefaultOptions();var r5=IC;function n5(i,r){if(i==null)return{};var t=i5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function i5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var uy=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=n5(i,["chartRef","style","className"]),u=Ts($S,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});uy.defaultProps=$S.getDefaultOptions();var k3=uy;function R3(i,r){if(i==null)return{};var t=D3(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function D3(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var a5=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=R3(i,["chartRef","style","className"]),u=Ts(pC,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});a5.defaultProps=pC.getDefaultOptions();var B3=a5;function F3(i,r){if(i==null)return{};var t=s(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function s(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var p=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=F3(i,["chartRef","style","className"]),u=Ts(kw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});p.defaultProps=kw.getDefaultOptions();var c=p;function h(i,r){if(i==null)return{};var t=g(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function g(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var _=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=h(i,["chartRef","style","className"]),u=Ts(a0,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});_.defaultProps=a0.getDefaultOptions();var G=_;function Q(i,r){if(i==null)return{};var t=tt(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function tt(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var ft=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Q(i,["chartRef","style","className"]),u=Ts(s_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});ft.defaultProps=s_.getDefaultOptions();var Et=ft;function Bt(i,r){if(i==null)return{};var t=se(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function se(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var xe=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Bt(i,["chartRef","style","className"]),u=Ts(D2,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});xe.defaultProps=D2.getDefaultOptions();var De=xe;function Xe(i,r){if(i==null)return{};var t=Qe(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function Qe(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var br=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Xe(i,["chartRef","style","className"]),u=Ts(Xw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});br.defaultProps=Xw.getDefaultOptions();var Wr=br;function sn(i,r){if(i==null)return{};var t=xn(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function xn(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Rn=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=sn(i,["chartRef","style","className"]),u=Ts(iy,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Rn.defaultProps=iy.getDefaultOptions();var Bn=Rn;function Qn(i,r){if(i==null)return{};var t=di(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function di(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var ta=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Qn(i,["chartRef","style","className"]),u=Ts(GS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});ta.defaultProps=GS.getDefaultOptions();var Ca=ta;function Fi(i,r){if(i==null)return{};var t=ja(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ja(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var ro=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Fi(i,["chartRef","style","className"]),u=Ts(pS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});ro.defaultProps=pS.getDefaultOptions();var Bo=ro;function Uu(i,r){if(i==null)return{};var t=ic(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ic(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var xf=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Uu(i,["chartRef","style","className"]),u=Ts(ow,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});xf.defaultProps=ow.getDefaultOptions();var Tp=xf;function yh(i,r){if(i==null)return{};var t=o5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function o5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var OC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=yh(i,["chartRef","style","className"]),u=Ts(Um,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});OC.defaultProps=Um.getDefaultOptions();var s5=OC;function u5(i,r){if(i==null)return{};var t=l5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function l5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var LC=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=u5(i,["chartRef","style","className"]),u=Ts(C_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});LC.defaultProps=C_.getDefaultOptions();var c5=LC;function f5(i,r){if(i==null)return{};var t=h5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function h5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Oo=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=f5(i,["chartRef","style","className"]),u=Ts(Fw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Oo.defaultProps=Fw.getDefaultOptions();var uu=Oo;function Tu(i,r){if(i==null)return{};var t=Ia(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function Ia(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Uf=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Tu(i,["chartRef","style","className"]),u=Ts(_S,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Uf.defaultProps=_S.getDefaultOptions();var bl=Uf;function Wh(i,r){if(i==null)return{};var t=Kh(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function Kh(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var sg=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Wh(i,["chartRef","style","className"]),u=Ts(Hx,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});sg.defaultProps=Hx.getDefaultOptions();var kC=sg;function kB(i,r){if(i==null)return{};var t=RB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function RB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var N3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=kB(i,["chartRef","style","className"]),u=Ts(M_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});N3.defaultProps=M_.getDefaultOptions();var DB=N3;function BB(i,r){if(i==null)return{};var t=FB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function FB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var z3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=BB(i,["chartRef","style","className"]),u=Ts(ww,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});z3.defaultProps=ww.getDefaultOptions();var NB=z3;function zB(i,r){if(i==null)return{};var t=GB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function GB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var G3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=zB(i,["chartRef","style","className"]),u=Ts(d_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});G3.defaultProps=d_.getDefaultOptions();var UB=G3;function VB(i,r){if(i==null)return{};var t=ZB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ZB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var U3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=VB(i,["chartRef","style","className"]),u=Ts(kx,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});U3.defaultProps=kx.getDefaultOptions();var HB=U3;function jB(i,r){if(i==null)return{};var t=XB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function XB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var V3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=jB(i,["chartRef","style","className"]),u=Ts(sS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});V3.defaultProps=sS.getDefaultOptions();var YB=V3;function WB(i,r){if(i==null)return{};var t=KB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function KB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Z3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=WB(i,["chartRef","style","className"]),u=Ts(JS,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Z3.defaultProps=JS.getDefaultOptions();var $B=Z3;function QB(i,r){if(i==null)return{};var t=qB(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function qB(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var H3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=QB(i,["chartRef","style","className"]),u=Ts(gC,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});H3.defaultProps=gC.getDefaultOptions();var JB=H3;function t4(i,r){if(i==null)return{};var t=e4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function e4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var j3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=t4(i,["chartRef","style","className"]),u=Ts(Lw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});j3.defaultProps=Lw.getDefaultOptions();var r4=j3;function n4(i,r){if(i==null)return{};var t=i4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function i4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var X3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=n4(i,["chartRef","style","className"]),u=Ts($2,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});X3.defaultProps=$2.getDefaultOptions();var a4=X3;function o4(i,r){if(i==null)return{};var t=s4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function s4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Y3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=o4(i,["chartRef","style","className"]),u=Ts(T_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Y3.defaultProps=T_.getDefaultOptions();var W3=Y3;function u4(i,r){if(i==null)return{};var t=l4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function l4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var K3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=u4(i,["chartRef","style","className"]),u=Ts(QE,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});K3.defaultProps=QE.getDefaultOptions();var c4=K3;function f4(i,r){if(i==null)return{};var t=h4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function h4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var $3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=f4(i,["chartRef","style","className"]),u=Ts(rC,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});$3.defaultProps=rC.getDefaultOptions();var p4=$3;function d4(i,r){if(i==null)return{};var t=v4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function v4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Q3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=d4(i,["chartRef","style","className"]),u=Ts(K2,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});Q3.defaultProps=K2.getDefaultOptions();var g4=Q3;function m4(i,r){if(i==null)return{};var t=y4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function y4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var q3=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=m4(i,["chartRef","style","className"]),u=Ts(h_,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))});q3.defaultProps=h_.getDefaultOptions();var x4=q3;function _4(i,r){if(i==null)return{};var t=b4(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function b4(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var S4=(0,nt.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=_4(i,["chartRef","style","className"]),u=Ts(Sw,o),f=u.chart,m=u.container;return(0,nt.useEffect)(function(){t&&(t.current=f.current)},[f.current]),(0,nt.useImperativeHandle)(r,function(){return{getChart:function(){return f.current}}}),nt.createElement(xs,null,nt.createElement("div",{className:a,style:n,ref:m}))}),w4=S4,E4={i8:"3.8.5"},Kl=S(50229),C4={getDefaultCfg:function(){return{}},getEvents:function(){return{}},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(r){var t=this,e=this.events;this.graph=r,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!0),(0,gs.default)(e,function(n,a){r.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(r){var t=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!1),(0,gs.default)(t,function(e,n){r.off(n,e)})},get:function(r){return this[r]},set:function(r,t){return this[r]=t,this}},A4=function(){function i(){}return i.registerBehavior=function(r,t){if(!t)throw new Error("please specify handler for this behavior: "+r);var e=(0,Kl.d9)(C4);Object.assign(e,t);var n=function(o){var u=this;Object.assign(this,this.getDefaultCfg(),o);var f=this.getEvents();this.events=null;var m={};f&&((0,Kl.S6)(f,function(x,w){m[w]=(0,Kl.Ko)(u,x)}),this.events=m)};n.prototype=e,i.types[r]=n},i.hasBehavior=function(r){return!!i.types[r]},i.getBehavior=function(r){return i.types[r]},i.types={},i}(),p5=A4,d5;(function(i){i.CLICK="click",i.DBLCLICK="dblclick",i.MOUSEDOWN="mousedown",i.MOUDEUP="mouseup",i.CONTEXTMENU="contextmenu",i.MOUSEENTER="mouseenter",i.MOUSEOUT="mouseout",i.MOUSEOVER="mouseover",i.MOUSEMOVE="mousemove",i.MOUSELEAVE="mouseleave",i.DRAGSTART="dragstart",i.DRAGEND="dragend",i.DRAG="drag",i.DRAGENTER="dragenter",i.DRAGLEAVE="dragleave",i.DRAGOVER="dragover",i.DRAGOUT="dragout",i.DDROP="drop",i.KEYUP="keyup",i.KEYDOWN="keydown",i.WHEEL="wheel",i.FOCUS="focus",i.BLUR="blur",i.TOUCHSTART="touchstart",i.TOUCHMOVE="touchmove",i.TOUCHEND="touchend",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_CLICK="node:click",i.NODE_DBLCLICK="node:dblclick",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEOUT="node:mouseout",i.NODE_MOUSEOVER="node:mouseover",i.NODE_DROP="node:drop",i.NODE_DRAGOVER="node:dragover",i.NODE_DRAGENTER="node:dragenter",i.NODE_DRAGLEAVE="node:dragleave",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DRAGEND="node:dragend",i.COMBO_CONTEXTMENU="combo:contextmenu",i.COMBO_CLICK="combo:click",i.COMBO_DBLCLICK="combo:dblclick",i.COMBO_MOUSEDOWN="combo:mousedown",i.COMBO_MOUSEUP="combo:mouseup",i.COMBO_MOUSEENTER="combo:mouseenter",i.COMBO_MOUSELEAVE="combo:mouseleave",i.COMBO_MOUSEMOVE="combo:mousemove",i.COMBO_MOUSEOUT="combo:mouseout",i.COMBO_MOUSEOVER="combo:mouseover",i.COMBO_DROP="combo:drop",i.COMBO_DRAGOVER="combo:dragover",i.COMBO_DRAGENTER="combo:dragenter",i.COMBO_DRAGLEAVE="combo:dragleave",i.COMBO_DRAGSTART="combo:dragstart",i.COMBO_DRAG="combo:drag",i.COMBO_DRAGEND="combo:dragend",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_CLICK="edge:click",i.EDGE_DBLCLICK="edge:dblclick",i.EDGE_MOUSEDOWN="edge:mousedown",i.EDGE_MOUSEUP="edge:mouseup",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_MOUSEMOVE="edge:mousemove",i.EDGE_MOUSEOUT="edge:mouseout",i.EDGE_MOUSEOVER="edge:mouseover",i.EDGE_DROP="edge:drop",i.EDGE_DRAGOVER="edge:dragover",i.EDGE_DRAGENTER="edge:dragenter",i.EDGE_DRAGLEAVE="edge:dragleave",i.CANVAS_CONTEXTMENU="canvas:contextmenu",i.CANVAS_CLICK="canvas:click",i.CANVAS_DBLCLICK="canvas:dblclick",i.CANVAS_MOUSEDOWN="canvas:mousedown",i.CANVAS_MOUSEUP="canvas:mouseup",i.CANVAS_MOUSEENTER="canvas:mouseenter",i.CANVAS_MOUSELEAVE="canvas:mouseleave",i.CANVAS_MOUSEMOVE="canvas:mousemove",i.CANVAS_MOUSEOUT="canvas:mouseout",i.CANVAS_MOUSEOVER="canvas:mouseover",i.CANVAS_DROP="canvas:drop",i.CANVAS_DRAGENTER="canvas:dragenter",i.CANVAS_DRAGLEAVE="canvas:dragleave",i.CANVAS_DRAGSTART="canvas:dragstart",i.CANVAS_DRAG="canvas:drag",i.CANVAS_DRAGEND="canvas:dragend",i.BEFORERENDER="beforerender",i.AFTERRENDER="afterrender",i.BEFOREADDITEM="beforeadditem",i.AFTERADDITEM="afteradditem",i.BEFOREREMOVEITEM="beforeremoveitem",i.AFTERREMOVEITEM="afterremoveitem",i.BEFOREUPDATEITEM="beforeupdateitem",i.AFTERUPDATEITEM="afterupdateitem",i.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",i.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",i.BEFOREITEMSTATECHANGE="beforeitemstatechange",i.AFTERITEMSTATECHANGE="afteritemstatechange",i.BEFOREITEMREFRESH="beforeitemrefresh",i.AFTERITEMREFRESH="afteritemrefresh",i.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",i.AFTERITEMSTATESCLEAR="afteritemstatesclear",i.BEFOREMODECHANGE="beforemodechange",i.AFTERMODECHANGE="aftermodechange",i.BEFORELAYOUT="beforelayout",i.AFTERLAYOUT="afterlayout",i.BEFORECREATEEDGE="beforecreateedge",i.AFTERCREATEEDGE="aftercreateedge",i.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",i.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",i.BEFOREGRAPHREFRESH="beforegraphrefresh",i.AFTERGRAPHREFRESH="aftergraphrefresh",i.BEFOREANIMATE="beforeanimate",i.AFTERANIMATE="afteranimate",i.BEFOREPAINT="beforepaint",i.AFTERPAINT="afterpaint",i.GRAPHSTATECHANGE="graphstatechange",i.AFTERACTIVATERELATIONS="afteractivaterelations",i.NODESELECTCHANGE="nodeselectchange",i.TOOLTIPCHANGE="tooltipchange",i.WHEELZOOM="wheelzoom",i.VIEWPORTCHANGE="viewportchange",i.DRAGNODEEND="dragnodeend",i.STACKCHANGE="stackchange"})(d5||(d5={}));var vv=S(16185),M4=S(21885),T4=function(i){(0,Ft.__extends)(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.item=e.item,n.canvasX=e.canvasX,n.canvasY=e.canvasY,n.wheelDelta=e.wheelDelta,n.detail=e.detail,n}return r}(M4.Z),v5=function(r){var t=0,e=0,n=0,a=0;if((0,vv.default)(r))t=e=n=a=r;else if((0,Zo.default)(r)){var o=parseInt(r,10);t=e=n=a=o}else(0,Rs.default)(r)&&(t=r[0],n=(0,qu.default)(r[1])?r[0]:r[1],a=(0,qu.default)(r[2])?r[0]:r[2],e=(0,qu.default)(r[3])?n:r[3]);return[t,n,a,e]},RC=function(r){var t=new T4(r.type,r);return t.clientX=r.clientX,t.clientY=r.clientY,t.x=r.x,t.y=r.y,t.target=r.target,t.currentTarget=r.currentTarget,t.bubbles=!0,t.item=r.item,t},J3=function(r){if(!r)return!1;for(var t=9,e=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(r[n]!==e[n])return!0;return!1},l0=function(r){return Number.isNaN(Number(r))},tR=function(r){for(var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity,o=0;o<r.length;o++){var u=r[o],f=u.getBBox(),m=f.minX,x=f.minY,w=f.maxX,L=f.maxY;m<t&&(t=m),x<n&&(n=x),w>e&&(e=w),L>a&&(a=L)}var H=Math.floor(t),W=Math.floor(n),et=Math.ceil(e)-Math.floor(t),ht=Math.ceil(a)-Math.floor(n);return{x:H,y:W,width:et,height:ht,minX:t,minY:n,maxX:e,maxY:a}},P4=function(r,t){t===void 0&&(t=15);for(var e=r.length,n=t*2,a=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o={},u=[],f={},m=0;m<e;m++){var x=r[m],w=x.source,L=x.target,H=w+"-"+L;if(!u[m]){o[H]||(o[H]=[]),u[m]=!0,o[H].push(x);for(var W=0;W<e;W++)if(m!==W){var et=r[W],ht=et.source,bt=et.target;u[W]||(w===bt&&L===ht?(o[H].push(et),u[W]=!0,f[ht+"|"+bt+"|"+(o[H].length-1)]=!0):w===ht&&L===bt&&(o[H].push(et),u[W]=!0))}}}for(var xt in o)for(var qt=o[xt],ie=qt.length,_e=0;_e<ie;_e++){var ze=qt[_e];if(ze.source===ze.target){ze.type="loop",ze.loopCfg={position:a[_e%8],dist:Math.floor(_e/8)*20+50};continue}ze.type="quadratic";var rr=(_e%2==0?1:-1)*(f[ze.source+"|"+ze.target+"|"+_e]?-1:1);ie%2==1?ze.curveOffset=rr*Math.ceil(_e/2)*n:ze.curveOffset=rr*(Math.floor(_e/2)*n+t)}return r},eR=Math.abs,I4=10,O4=["shift","ctrl","alt","control"],L4={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",mousedown:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp",mouseup:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(r){var t=this.origin,e=+r.clientX,n=+r.clientY;if(!(l0(e)||l0(n))){var a=e-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:e,y:n};var u=this.graph.get("width"),f=this.graph.get("height"),m=this.graph.get("canvas").getCanvasBBox();(m.minX<=u+this.scalableRange&&m.minX+a>u+this.scalableRange||m.maxX+this.scalableRange>=0&&m.maxX+this.scalableRange+a<0)&&(a=0),(m.minY<=f+this.scalableRange&&m.minY+o>f+this.scalableRange||m.maxY+this.scalableRange>=0&&m.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(a,o)}},onMouseDown:function(r){var t=this,e=r.originalEvent;if(!(e&&e.button!==0)&&!(r.name!==d5.TOUCHSTART&&window&&window.event&&typeof window!="undefined"&&!window.event.buttons&&!window.event.button)&&!(t.keydown||r.shape)&&(t.origin={x:r.clientX,y:r.clientY},t.dragging=!1,this.enableOptimize)){for(var n=this.graph,a=n.getEdges(),o=0,u=a.length;o<u;o++){var f=a[o].get("group").get("children");!f||f.forEach(function(xt){xt.hide()})}for(var m=n.getNodes(),x=0,w=m.length;x<w;x++)for(var L=m[x].getContainer(),H=L.get("children"),W=0,et=H;W<et.length;W++){var ht=et[W],bt=ht.get("isKeyShape");bt||ht.hide()}}},onMouseMove:function(r){var t=this.graph;if(!(this.keydown||r.shape)&&(r=RC(r),!!this.origin)){if(this.dragging)r.type="drag",t.emit("canvas:drag",r);else{if(eR(this.origin.x-r.clientX)+eR(this.origin.y-r.clientY)<I4)return;this.shouldBegin.call(this,r)&&(r.type="dragstart",t.emit("canvas:dragstart",r),this.dragging=!0)}this.shouldUpdate.call(this,r)&&this.updateViewport(r)}},onMouseUp:function(r){var t=this.graph;if(!(this.keydown||r.shape)){if(this.enableOptimize){for(var e=t.getEdges(),n=0,a=e.length;n<a;n++){var o=e[n].get("group").get("children");!o||o.forEach(function(ht){ht.show()})}for(var u=t.getNodes(),f=0,m=u.length;f<m;f++)for(var x=u[f].getContainer(),w=x.get("children"),L=0,H=w;L<H.length;L++){var W=H[L],et=W.get("isKeyShape");et||W.show()}}if(!this.dragging){this.origin=null;return}r=RC(r),this.shouldEnd.call(this,r)&&this.updateViewport(r),r.type="dragend",t.emit("canvas:dragend",r),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(r){var t=this,e=r.key;!e||(O4.indexOf(e.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},k4=S(6767),DC=S.n(k4),R4=S(17621),BC=S.n(R4),FC=2,rR=.16,D4=.05,B4=.05,F4=.15,nR=5,iR=4,N4=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function aR(i,r,t){var e;return Math.round(i.h)>=60&&Math.round(i.h)<=240?e=t?Math.round(i.h)-FC*r:Math.round(i.h)+FC*r:e=t?Math.round(i.h)+FC*r:Math.round(i.h)-FC*r,e<0?e+=360:e>=360&&(e-=360),e}function oR(i,r,t){if(i.h===0&&i.s===0)return i.s;var e;return t?e=i.s-rR*r:r===iR?e=i.s+rR:e=i.s+D4*r,e>1&&(e=1),t&&r===nR&&e>.1&&(e=.1),e<.06&&(e=.06),Number(e.toFixed(2))}function sR(i,r,t){var e;return t?e=i.v+B4*r:e=i.v-F4*r,e>1&&(e=1),Number(e.toFixed(2))}function g5(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],e=BC()(i),n=nR;n>0;n-=1){var a=e.toHsv(),o=BC()({h:aR(a,n,!0),s:oR(a,n,!0),v:sR(a,n,!0)}).toHexString();t.push(o)}t.push(e.toHexString());for(var u=1;u<=iR;u+=1){var f=e.toHsv(),m=BC()({h:aR(f,u),s:oR(f,u),v:sR(f,u)}).toHexString();t.push(m)}return r.theme==="dark"?N4.map(function(x){var w=x.index,L=x.opacity,H=BC().mix(r.backgroundColor||"#141414",t[w],L*100).toHexString();return H}):t}var m5={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},xh={},y5={};Object.keys(m5).forEach(function(i){xh[i]=g5(m5[i]),xh[i].primary=xh[i][5],y5[i]=g5(m5[i],{theme:"dark",backgroundColor:"#141414"}),y5[i].primary=y5[i][5]});var Mz=xh.red,Tz=xh.volcano,Pz=xh.gold,Iz=xh.orange,Oz=xh.yellow,Lz=xh.lime,kz=xh.green,Rz=xh.cyan,Dz=xh.blue,Bz=xh.geekblue,Fz=xh.purple,Nz=xh.magenta,zz=xh.grey,ug=function(r,t,e){var n=DC()(r),a=DC()(t);return DC()([(1-e)*n.color[0]+e*a.color[0],(1-e)*n.color[1]+e*a.color[1],(1-e)*n.color[2]+e*a.color[2]]).rgb()},uR=function(r,t,e,n){t===void 0&&(t="#fff"),e===void 0&&(e="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=ug(t,r,.05).rgb().toString(),o=ug(t,n,.02).rgb().toString(),u=ug(t,n,.05).rgb().toString(),f=ug(t,n,.1).rgb().toString(),m=ug(t,n,.2).rgb().toString(),x=ug(t,n,.3).rgb().toString(),w=g5(r,{theme:e,backgroundColor:t}),L=DC()(r).hex().toLowerCase(),H=w.indexOf(L),W=r;return H!==-1&&(W=w[H+1]),{mainStroke:r,mainFill:ug(t,r,.1).rgb().toString(),activeStroke:r,activeFill:a,inactiveStroke:ug(t,r,.4).rgb().toString(),inactiveFill:a,selectedStroke:r,selectedFill:t,highlightStroke:W,highlightFill:ug(t,r,.2).rgb().toString(),disableStroke:x,disableFill:u,edgeMainStroke:x,edgeActiveStroke:r,edgeInactiveStroke:m,edgeSelectedStroke:r,edgeHighlightStroke:r,edgeDisableStroke:f,comboMainStroke:x,comboMainFill:o,comboActiveStroke:r,comboActiveFill:a,comboInactiveStroke:x,comboInactiveFill:o,comboSelectedStroke:r,comboSelectedFill:o,comboHighlightStroke:W,comboHighlightFill:o,comboDisableStroke:m,comboDisableFill:u}},z4="rgb(95, 149, 255)",G4="rgb(255, 255, 255)",lR="rgb(0, 0, 0)",iu=uR(z4,G4),mi={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:iu.mainStroke,fill:iu.mainFill},size:20,color:iu.mainStroke,linkPoints:{size:8,lineWidth:1,fill:iu.activeFill,stroke:iu.activeStroke}},nodeStateStyles:{active:{fill:iu.activeFill,stroke:iu.activeStroke,lineWidth:2,shadowColor:iu.mainStroke,shadowBlur:10},selected:{fill:iu.selectedFill,stroke:iu.selectedStroke,lineWidth:4,shadowColor:iu.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:iu.highlightFill,stroke:iu.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:iu.inactiveFill,stroke:iu.inactiveStroke,lineWidth:1},disable:{fill:iu.disableFill,stroke:iu.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:lR,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:iu.edgeMainStroke,lineAppendWidth:2},color:iu.edgeMainStroke},edgeStateStyles:{active:{stroke:iu.edgeActiveStroke,lineWidth:1},selected:{stroke:iu.edgeSelectedStroke,lineWidth:2,shadowColor:iu.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:iu.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:iu.edgeInactiveStroke,lineWidth:1},disable:{stroke:iu.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:lR,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:iu.comboMainFill,lineWidth:1,stroke:iu.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:iu.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:iu.comboActiveStroke,lineWidth:1,fill:iu.comboActiveFill},selected:{stroke:iu.comboSelectedStroke,lineWidth:2,fill:iu.comboSelectedFill,shadowColor:iu.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:iu.comboHighlightStroke,lineWidth:2,fill:iu.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:iu.comboInactiveStroke,fill:iu.comboInactiveFill,lineWidth:1},disable:{stroke:iu.comboDisableStroke,fill:iu.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},U4={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(r){if(!this.origin||!r||r.destroyed)return!1;var t=r.getType();return t==="combo"},onDragStart:function(r){var t=this;if(!!this.shouldBegin.call(this,r)){var e=r.item;if(!(!e||e.destroyed||e.hasLocked())){var n=e.getContainer();n.set("capture",!1);var a=r.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),m=e.get("id"),x=f.filter(function(L){var H=L.get("id");return m===H});x.length===0?this.targets.push(e):f.length>1?f.forEach(function(L){var H=L.hasLocked();H||t.targets.push(L)}):this.targets.push(e);var w=[];this.targets.forEach(function(L){w.push((0,Kl.d9)(L.getModel()))}),this.set("beforeDragNodes",w),this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}}},onDrag:function(r){var t=this;!this.origin||!this.shouldUpdate(this,r)||(this.get("enableDelegate")?this.updateDelegate(r):this.targets.map(function(e){t.update(e,r)}))},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){var t=r.item;if(t){var e=t.getContainer();e.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(r);var n=this.graph;if(n.get("enabledStack")){var a={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(o){a.after.nodes.push(o.getModel())}),n.pushStack("update",(0,Kl.d9)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(r){var t=r.item;if(!!this.validationCombo(t)){this.updatePositions(r);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&e.updateComboTree(a,n.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(r){var t=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(r),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){var n=e.getModel();n.comboId&&t.updateComboTree(e)}))},onDropNode:function(r){if(!(!this.targets||this.targets.length===0)){var t=this,e=r.item;this.updatePositions(r);var n=t.graph,a=e.getModel().comboId;if(a){var o=n.findById(a);t.comboActiveState&&n.setItemState(o,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(o)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:e})}},onDragEnter:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(r){var t=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&this.targets.map(function(e){return t.update(e,r)})},update:function(r,t){var e=this.origin,n=r.get("model"),a=r.get("id");this.point[a]||(this.point[a]={x:n.x||0,y:n.y||0});var o=t.x-e.x+this.point[a].x,u=t.y-e.y+this.point[a].y,f={x:o,y:u};this.get("updateEdge")?this.graph.updateItem(r,f,!1):r.updatePosition(f)},updateDelegate:function(r){var t=this.graph;if(this.delegateRect){var L=r.x-this.origin.x+this.originPoint.minX,H=r.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:L,y:H})}else{var e=this.graph.get("group"),n=(0,Kl.b$)({},mi.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(r),o=a.x,u=a.y,f=a.width,m=a.height,x=a.minX,w=a.minY;this.originPoint={x:o,y:u,width:f,height:m,minX:x,minY:w},this.delegateRect=e.addShape("rect",{attrs:(0,Ft.__assign)({width:f,height:m,x:o,y:u},n),name:"rect-delegate-shape"}),this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(r){var t=this.graph,e=t.findAllByState("node",this.selectedState);e.length===0&&e.push(r.item);for(var n=Infinity,a=-Infinity,o=Infinity,u=-Infinity,f=0;f<e.length;f++){var m=e[f],x=m.getBBox(),w=x.minX,L=x.minY,H=x.maxX,W=x.maxY;w<n&&(n=w),L<o&&(o=L),H>a&&(a=H),W>u&&(u=W)}var et=Math.floor(n),ht=Math.floor(o),bt=Math.ceil(a)-Math.floor(n),xt=Math.ceil(u)-Math.floor(o);return{x:et,y:ht,width:bt,height:xt,minX:n,minY:o}}},V4={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(r){var t=r.item,e=this.graph;if(this.item=t,!!this.shouldUpdate(r.item,{event:r,action:"activate"})){for(var n=this,a=this.activeState,o=this.inactiveState,u=e.getNodes(),f=e.getEdges(),m=u.length,x=f.length,w=0;w<m;w++){var L=u[w],H=L.hasState("selected");n.resetSelected&&H&&e.setItemState(L,"selected",!1),e.setItemState(L,a,!1),o&&e.setItemState(L,o,!0)}for(var w=0;w<x;w++){var W=f[w];e.setItemState(W,a,!1),o&&e.setItemState(W,o,!0)}o&&e.setItemState(t,o,!1),e.setItemState(t,a,!0);for(var et=t.getEdges(),ht=et.length,w=0;w<ht;w++){var W=et[w],bt=void 0;W.getSource()===t?bt=W.getTarget():bt=W.getSource(),o&&e.setItemState(bt,o,!1),e.setItemState(bt,a,!0),e.setItemState(W,o,!1),e.setItemState(W,a,!0),W.toFront()}e.emit("afteractivaterelations",{item:r.item,action:"activate"})}},clearActiveState:function(r){var t=this,e=t.get("graph");if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){var n=this.activeState,a=this.inactiveState,o=e.get("autoPaint");e.setAutoPaint(!1);for(var u=e.getNodes(),f=e.getEdges(),m=u.length,x=f.length,w=0;w<m;w++){var L=u[w];e.clearItemStates(L,[n,a])}for(var w=0;w<x;w++){var H=f[w];e.clearItemStates(H,[n,a,"deactivate"])}e.paint(),e.setAutoPaint(o),e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}},clearAllItemStates:function(r){var t=this,e=t.graph;if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){for(var n=this.activeState,a=this.inactiveState,o=e.getNodes(),u=e.getEdges(),f=o.length,m=u.length,x=0;x<f;x++){var w=o[x];e.clearItemStates(w,[n,a])}for(var x=0;x<m;x++){var L=u[x];e.clearItemStates(L,[n,a,"deactivate"])}e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}}},NC=Math.min,cR=Math.max,fR=Math.abs,hR="shift",Z4=["drag","shift","ctrl","alt","control"],H4={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:hR,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Z4.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=hR,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(r){var t=r.item,e=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:r.canvasX,y:r.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(r)},onMouseUp:function(r){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(r),this.dragging=!1)},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(r){var t=this,e=this,n=e.graph,a=e.originPoint,o=e.shouldUpdate,u=this.selectedState,f={x:r.x,y:r.y},m=n.getPointByCanvas(a.x,a.y),x=NC(f.x,m.x),w=cR(f.x,m.x),L=NC(f.y,m.y),H=cR(f.y,m.y),W=[],et=[];n.getNodes().forEach(function(bt){var xt=bt.getBBox();if(xt.centerX>=x&&xt.centerX<=w&&xt.centerY>=L&&xt.centerY<=H&&o(bt,"select")){W.push(bt);var qt=bt.getModel();et.push(qt.id),n.setItemState(bt,u,!0)}});var ht=[];this.includeEdges&&W.forEach(function(bt){var xt=bt.getOutEdges();xt.forEach(function(qt){var ie=qt.getModel(),_e=ie.source,ze=ie.target;et.includes(_e)&&et.includes(ze)&&o(qt,"select")&&(ht.push(qt),n.setItemState(qt,t.selectedState,!0))})}),this.selectedEdges=ht,this.selectedNodes=W,this.onSelect&&this.onSelect(W,ht),n.emit("nodeselectchange",{selectedItems:{nodes:W,edges:ht},select:!0})},createBrush:function(){var r=this,t=r.graph.get("canvas").addShape("rect",{attrs:r.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,t},updateBrush:function(r){var t=this.originPoint;this.brush.attr({width:fR(r.canvasX-t.x),height:fR(r.canvasY-t.y),x:NC(r.canvasX,t.x),y:NC(r.canvasY,t.y)})},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},pR="shift",j4=["shift","ctrl","alt","control"],X4={getDefaultCfg:function(){return{multiple:!0,trigger:pR,selectedState:"selected"}},getEvents:function(){var r=this;return j4.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=pR,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),r.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(r){var t=this,e=r.item;if(!(!e||e.destroyed)){var n=e.getType(),a=this,o=a.graph,u=a.keydown,f=a.multiple,m=a.shouldUpdate,x=a.shouldBegin;if(!!x.call(this,r)){if(!u||!f){var w=o.findAllByState(n,this.selectedState);(0,gs.default)(w,function(W){W!==e&&o.setItemState(W,t.selectedState,!1)})}if(e.hasState(this.selectedState)){m.call(this,r)&&o.setItemState(e,this.selectedState,!1);var L=o.findAllByState("node",this.selectedState),H=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:L,combos:H},select:!1})}else{m.call(this,r)&&o.setItemState(e,this.selectedState,!0);var L=o.findAllByState("node",this.selectedState),H=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:L,combos:H},select:!0})}}}},onCanvasClick:function(){var r=this,t=this.graph,e=t.findAllByState("node",this.selectedState);(0,gs.default)(e,function(a){t.setItemState(a,r.selectedState,!1)});var n=t.findAllByState("combo",this.selectedState);(0,gs.default)(n,function(a){t.setItemState(a,r.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Pp=S(31502);Pp.translate=function(i,r,t){var e=new Array(9);return Pp.fromTranslation(e,t),Pp.multiply(i,e,r)},Pp.rotate=function(i,r,t){var e=new Array(9);return Pp.fromRotation(e,t),Pp.multiply(i,e,r)},Pp.scale=function(i,r,t){var e=new Array(9);return Pp.fromScaling(e,t),Pp.multiply(i,e,r)},Pp.transform=function(i,r){for(var t=[].concat(i),e=0,n=r.length;e<n;e++){var a=r[e];switch(a[0]){case"t":Pp.translate(t,t,[a[1],a[2]]);break;case"s":Pp.scale(t,t,[a[1],a[2]]);break;case"r":Pp.rotate(t,t,a[1]);break;default:break}}return t};var c0=Pp,lg=S(76172);lg.angle=function(i,r){var t=lg.dot(i,r)/(lg.length(i)*lg.length(r));return Math.acos((0,d.clamp)(t,-1,1))},lg.direction=function(i,r){return i[0]*r[1]-r[0]*i[1]},lg.angleTo=function(i,r,t){var e=lg.angle(i,r),n=lg.direction(i,r)>=0;return t?n?Math.PI*2-e:e:n?e:Math.PI*2-e},lg.vertical=function(i,r,t){return t?(i[0]=r[1],i[1]=-1*r[0]):(i[0]=-1*r[1],i[1]=r[0]),i};var Sl=lg,Y4=S(88395),dR=Y4,cg=function(i,r){var t=i?(0,d.clone)(i):[1,0,0,0,1,0,0,0,1];return(0,d.each)(r,function(e){switch(e[0]){case"t":c0.translate(t,t,[e[1],e[2]]);break;case"s":c0.scale(t,t,[e[1],e[2]]);break;case"r":c0.rotate(t,t,e[1]);break;case"m":c0.multiply(t,t,e[1]);break;default:return!1}}),t},vR=.05,W4={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.7,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var r=this.fixSelectedItems;return r.fixState||(r.fixState="selected"),r.fixAll&&(r.fixLineWidth=!0,r.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(r){var t=r.originalEvent.touches,e=t[0],n=t[1];r.preventDefault(),!!n&&(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(r){if(!!this.moveable){r.preventDefault();var t=r.originalEvent.touches,e=t[0],n=t[1];if(!!n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(H,W){return Math.hypot(W.x-H.x,W.y-H.y)},o=a({x:e.pageX,y:e.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),u=this.originScale*o;this.currentScale=u;var f=this.get("minZoom")||this.graph.get("minZoom"),m=this.get("maxZoom")||this.graph.get("maxZoom");if(!(u>m||u<f)){var x=this.graph.get("canvas"),w=x.getPointByClient(r.clientX,r.clientY);this.graph.zoomTo(u,{x:w.x,y:w.y}),this.graph.emit("wheelzoom",r)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(r){var t=this,e=this,n=e.graph,a=e.fixSelectedItems;if(!!this.shouldUpdate.call(this,r)){r.preventDefault();var o=n.get("canvas"),u=o.getPointByClient(r.clientX,r.clientY),f=this.get("sensitivity"),m=n.getZoom(),x=m,w=m;r.wheelDelta<0?x=1-vR*f:x=1/(1-vR*f),w=m*x;var L=this.get("minZoom")||n.get("minZoom"),H=this.get("maxZoom")||n.get("maxZoom");if(!(w>H||w<L)){var W=this.get("enableOptimize");if(W){var et=this.get("optimizeZoom"),ht=this.get("optimized"),bt=n.getNodes(),xt=n.getEdges(),qt=bt.length,ie=xt.length;if(!ht){for(var _e=0;_e<qt;_e++){var ze=bt[_e];if(!ze.destroyed)for(var rr=ze.get("group").get("children"),sr=rr.length,qe=0;qe<sr;qe++){var wr=rr[qe];!wr.destoryed&&!wr.get("isKeyShape")&&wr.hide()}}for(var Vr=0;Vr<ie;Vr++)for(var Br=xt[Vr],rr=Br.get("group").get("children"),sr=rr.length,qe=0;qe<sr;qe++){var wr=rr[qe];wr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Tn=setTimeout(function(){var Lo=n.getZoom(),Ss=t.get("optimized");if(Ss){t.set("optimized",!1);for(var Xs=0;Xs<qt;Xs++){var pl=bt[Xs],wu=pl.get("group").get("children"),Ll=wu.length;if(Lo<et)pl.getKeyShape().show();else for(var $l=0;$l<Ll;$l++){var Sf=wu[$l];Sf.get("visible")||Sf.show()}}for(var Hf=0;Hf<ie;Hf++){var Fc=xt[Hf],wu=Fc.get("group").get("children"),Ll=wu.length;if(Lo<et)Fc.getKeyShape().show();else for(var $l=0;$l<Ll;$l++){var Sf=wu[$l];Sf.get("visible")||Sf.show()}}}},500);this.set("timeout",Tn)}if(m<=1){var Hn=void 0,Un=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Hn=n.findAllByState("node",a.fixState),Un=n.findAllByState("edge",a.fixState);for(var Ei=m/w,Ti=Hn.length,Li=0;Li<Ti;Li++){var ze=Hn[Li],_i=ze.getContainer(),bi=ze.getModel(),Ba=ze.getOriginStyle(),La=ze.getStateStyle(a.fixState),Ha=ze.get("shapeFactory").getShape(bi.shape||bi.type).getStateStyle(a.fixState,ze)[a.fixState];if(a.fixAll){if(w<=1){var Ri=(0,d.clone)(_i.getMatrix());Ri||(Ri=[1,0,0,0,1,0,0,0,1]);var Na=ze.getModel(),_o=Na.x,Va=Na.y;c0.translate(Ri,Ri,[-_o,-Va]),c0.scale(Ri,Ri,[Ei,Ei]),c0.translate(Ri,Ri,[_o,Va]),_i.setMatrix(Ri)}}else for(var rr=_i.get("children"),sr=rr.length,qe=0;qe<sr;qe++){var wr=rr[qe],Ua=void 0,Mo=void 0;if(a.fixLabel){var hs=wr.get("type");if(hs==="text"){Ua=wr.attr("fontSize")||12;var Ja=La[wr.get("name")],ii=Ha[wr.get("name")],Gi=Ja?Ja.fontSize:12,To=ii?ii.fontSize:12,Ho=Gi||To||12;if(w<=1&&wr.attr("fontSize",Ho/w),Mo)break}}if(a.fixLineWidth&&wr.get("isKeyShape")){Mo=wr.attr("lineWidth")||0;var go=La.lineWidth||Ha.lineWidth||Ba.lineWidth||0;if(w<=1&&wr.attr("lineWidth",go/w),Ua)break}}}for(var bs=Un.length,is=0;is<bs;is++)for(var Br=Un[is],_i=Br.getContainer(),rr=_i.get("children"),bi=Br.getModel(),La=Br.getStateStyle(a.fixState),Ha=Br.get("shapeFactory").getShape(bi.shape||bi.type).getStateStyle(a.fixState,Br)[a.fixState],sr=rr.length,qe=0;qe<sr;qe++){var wr=rr[qe],Ua=void 0,Mo=void 0;if(a.fixLabel||a.fixAll){var hs=wr.get("type");if(hs==="text"){Ua=wr.attr("fontSize")||12;var Ja=La[wr.get("name")],ii=Ha[wr.get("name")],Gi=Ja?Ja.fontSize:12,To=ii?ii.fontSize:12,Ho=Gi||To||12;if(w<=1&&wr.attr("fontSize",Ho/w),Mo)break}}if((a.fixLineWidth||a.fixAll)&&wr.get("isKeyShape")){Mo=wr.attr("lineWidth")||0;var go=La.lineWidth||Ha.lineWidth||1;if(w<=1&&wr.attr("lineWidth",go/w),Ua)break}}}}n.zoomTo(w,{x:u.x,y:u.y}),n.emit("wheelzoom",r)}}}},nl=S(1513),Bc=S(57821),gR={onMouseEnter:function(r){var t=r.item;this.currentTarget=t,this.showTooltip(r),this.graph.emit("tooltipchange",{item:r.item,action:"show"})},onMouseMove:function(r){if(!this.shouldUpdate(r)){this.hideTooltip();return}!this.currentTarget||r.item!==this.currentTarget||this.updatePosition(r)},onMouseLeave:function(r){!this.shouldEnd(r)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(r){var t=this.container;if(!(!r.item||r.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(r.item.get("model"),r);t.innerHTML=e,(0,nl.Z)(this.container,{visibility:"visible"}),this.updatePosition(r)}},hideTooltip:function(){(0,nl.Z)(this.container,{visibility:"hidden"})},updatePosition:function(r){var t=this.get("shouldBegin"),e=this,n=e.width,a=e.height,o=e.container,u=e.graph;if(!t(r)){(0,nl.Z)(o,{visibility:"hidden"});return}var f=u.getPointByClient(r.clientX,r.clientY),m=u.getCanvasByPoint(f.x,f.y),x=m.x,w=m.y,L=o.getBoundingClientRect();x>n/2?x-=L.width:x+=this.offset,w>a/2?w-=L.height:w+=this.offset;var H=x+"px",W=w+"px";(0,nl.Z)(this.container,{left:H,top:W,visibility:"visible"})},createTooltip:function(r){var t=r.get("el");t.style.position="relative";var e=(0,Bc.Z)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),(0,nl.Z)(e,{position:"absolute",visibility:"visible"}),this.width=r.get("width"),this.height=r.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},K4=(0,Ft.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},gR),$4=(0,Ft.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},gR),Vf=S(90497),Q4={getDefaultCfg:function(){return{delegate:!0,delegateStyle:{},delegateShapes:{},delegateShapeBBoxs:{}}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd","canvas:mouseleave":"onOutOfRange"}},onDragStart:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(!!n){var a=t.get("customGroupControll"),o=a.customGroup,u=o[n].nodeGroup;this.targetGroup=u,this.mouseOrigin={x:r.x,y:r.y};for(var f=t.save().groups,m=null,x=0;x<f.length;x++){var w=f[x];if(n===w.id){m=w.parentId;break}}if(m){var L=o[m].nodeGroup;a.setGroupStyle(L.get("keyShape"),"hover")}}},onDrag:function(r){!this.mouseOrigin||this.updateDelegate(r)},onDragEnd:function(r){var t=this.graph,e=r.target.get("groupId");if(this.delegateShapes[e]&&(this.delegateShapeBBox=this.delegateShapes[e].getBBox(),this.delegateShapes[e].remove(),delete this.delegateShapes[e]),!!this.delegateShapeBBox){var n=t.get("customGroupControll"),a=this.delegateShapeBBoxs[e];n.updateGroup(e,a,this.mouseOrigin),this.mouseOrigin=null,this.shapeOrigin=null,n.resetNodePoint(),this.delegateShapeBBox=null}},updateDelegate:function(r){var t=this.graph,e=r.target.get("groupId"),n=this.targetGroup.get("keyShape"),a=this.delegateShapes[e],o=n.getBBox(),u=n.get("type");if(a){var bt=this,xt=bt.mouseOrigin,qt=bt.shapeOrigin,ie=r.x-xt.x,_e=r.y-xt.y,ze=ie+qt.x,rr=_e+qt.y;a.attr({x:ze,y:rr}),this.delegateShapeBBoxs[e]=a.getBBox()}else{var f=t.get("delegateGroup"),m=o.x,x=o.y,w=o.width,L=o.height,H=(0,Ft.__assign)({width:w,height:L},(0,Vf.default)({},mi.delegateStyle,this.delegateStyle));if(u==="circle"){var W=w>L?w/2:L/2,et=m+W,ht=x+W;a=f.addShape("circle",{attrs:(0,Ft.__assign)({x:et,y:ht,r:W},H),name:"circle-delegate-shape"}),this.shapeOrigin={x:et,y:ht}}else a=f.addShape("rect",{attrs:(0,Ft.__assign)({x:m,y:x},H),name:"rect-delegate-shape"}),this.shapeOrigin={x:m,y:x};this.delegateShapes[e]=a,this.delegateShapeBBoxs[e]=a.getBBox()}},onOutOfRange:function(r){var t=this,e=this.graph.get("canvas").get("el"),n=function a(o){o.target!==e&&(t.onDragEnd(r),document.body.removeEventListener("mouseup",a,!0))};this.mouseOrigin&&document.body.addEventListener("mouseup",n,!0)}},q4=document.body,J4={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},maxMultiple:1.1,minMultiple:1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange",dragover:"onDragOver",dragleave:"onDragLeave"}},onDragOver:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var u=o.nodeGroup,f=u.get("keyShape");this.inGroupId=n,a.setGroupStyle(f,"hover")}}},onDragLeave:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var u=o.nodeGroup,f=u.get("keyShape");a.setGroupStyle(f,"default")}}n||(this.inGroupId=null)},onDragStart:function(r){var t=this.graph;if(!!this.shouldBegin.call(this,r)){var e=r.item;this.target=e;var n=e.getModel(),a=n.groupId;if(a){var o=t.get("customGroupControll"),u=o.getDeletageGroupById(a);if(u){var f=u.nodeGroup,m=f.get("keyShape");o.setGroupStyle(m,"hover"),this.inGroupId=a}}this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}},onDrag:function(r){if(!!this.origin&&!!this.get("shouldUpdate").call(this,r)){this.update(this.target,r,!0);var t=r.item,e=this.graph,n=t.getModel(),a=n.groupId;if(a){var o=e.get("customGroupControll"),u=o.getDeletageGroupById(a);if(u){var f=u.nodeGroup,m=f.get("keyShape");this.inGroupId!==a?o.setGroupStyle(m,"default"):o.setGroupStyle(m,"hover")}}}},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var t=this.target.get("delegateShape");t&&(t.remove(),this.target.set("delegateShape",null))}this.target&&this.update(this.target,r),this.point={},this.origin=null,this.originPoint={},this.target=null,this.setCurrentGroupStyle(r)}},setCurrentGroupStyle:function(r){var t=this.graph,e=r.item,n=e.getModel(),a=n.groupId,o=n.id,u=t.get("customGroupControll"),f=u.customGroup,m=t.get("groupNodes");if(this.inGroupId&&a){var x=f[a].nodeGroup;if(!x)return;var w=x.get("keyShape"),L=e.getBBox(),H=w.getBBox(),W=L.centerX,et=L.centerY,ht=H.minX,bt=H.minY,xt=H.maxX,qt=H.maxY;if(!(W<xt*this.maxMultiple&&W>ht*this.minMultiple&&et<qt*this.maxMultiple&&et>bt*this.minMultiple)||this.inGroupId!==a){var ie=m[a];m[a]=ie.filter(function(rr){return rr!==o}),u.dynamicChangeGroupSize(r,x,w),delete n.groupId}if(this.inGroupId!==a){var _e=f[this.inGroupId].nodeGroup;if(!_e)return;var ze=_e.get("keyShape");m[this.inGroupId].indexOf(o)===-1&&m[this.inGroupId].push(o),n.groupId=this.inGroupId,u.dynamicChangeGroupSize(r,_e,ze)}u.setGroupStyle(w,"default")}else if(this.inGroupId&&!a){var _e=f[this.inGroupId].nodeGroup;if(!_e)return;var w=_e.get("keyShape");m[this.inGroupId].indexOf(o)===-1&&m[this.inGroupId].push(o),n.groupId=this.inGroupId,u.dynamicChangeGroupSize(r,_e,w)}else if(!this.inGroupId&&a){Object.keys(m).forEach(function(qe){var wr=m[qe];m[qe]=wr.filter(function(Vr){return Vr!==o})});var x=f[a].nodeGroup;if(!x)return;var w=x.get("keyShape");u.dynamicChangeGroupSize(r,x,w),delete n.groupId}this.inGroupId=null},onOutOfRange:function(r){var t=this,e=t.graph.get("canvas").get("el");function n(a){a.target!==e&&(r.item=t.target,t.onDragEnd(r),document.body.removeEventListener("mouseup",n,!0))}t.origin&&q4.addEventListener("mouseup",n,!0)},update:function(r,t,e){var n=this.origin,a=r.get("model"),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var u=t.x-n.x+this.point[o].x,f=t.y-n.y+this.point[o].y;if(e){this.updateDelegate(t,u,f);return}var m={x:u,y:f};this.get("updateEdge")?this.graph.updateItem(r,m):(r.updatePosition(m),this.graph.paint())},updateDelegate:function(r,t,e){var n=this.graph,a=r.item,o=n.get("groupType"),u=a.get("keyShape").getBBox();if(!this.shape){var f=n.get("delegateGroup"),m=(0,Vf.default)({},mi.delegateStyle,this.delegateStyle);this.target&&(this.shape=f.addShape("rect",{attrs:(0,Ft.__assign)({width:u.width,height:u.height,x:t-u.width/2,y:e-u.height/2},m),name:"delegate-shape"}),this.target.set("delegateShape",this.shape)),this.shape.set("capture",!1)}this.target&&(o==="circle"?this.shape.attr({x:t-u.width/2,y:e-u.height/2}):o==="rect"&&this.shape.attr({x:t,y:e}))}},mR="dblclick",tF=["click","dblclick"],eF={getDefaultCfg:function(){return{trigger:mR}},getEvents:function(){var r,t;return tF.includes(this.trigger)?t=this.trigger:(t=mR,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r[""+t]="onGroupClick",r},onGroupClick:function(r){var t=r.target,e=this.graph,n=t.get("groupId");if(!!n){var a=e.get("customGroupControll");a.collapseExpandGroup(n)}}},yR="click",rF=["click","dblclick"],nF={getDefaultCfg:function(){return{trigger:yR,onChange:function(){}}},getEvents:function(){var r,t;return rF.includes(this.trigger)?t=this.trigger:(t=yR,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["node:"+t]="onNodeClick",r.touchstart="onNodeClick",r},onNodeClick:function(r){var t=r.item,e=this.graph.findDataById(t.get("id"));if(!!e){var n=e.children;if(!(!n||n.length===0)){var a=!e.collapsed;if(!!this.shouldBegin(r,a)&&(e.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:r.item,collapsed:a}),!!this.shouldUpdate(r,a))){try{this.onChange(t,a)}catch(o){console.warn("G6 \u81EA 3.0.4 \u7248\u672C\u652F\u6301\u76F4\u63A5\u4ECE item.getModel() \u83B7\u53D6\u6E90\u6570\u636E(\u4E34\u65F6\u901A\u77E5\uFF0C\u5C06\u57283.2.0\u7248\u672C\u4E2D\u6E05\u9664)",o)}this.graph.layout()}}}}},iF=function i(r,t){if(t(r)!==!1&&r){var e=r.get("combos");if(e.length===0)return!1;(0,Kl.S6)(e,function(n){i(n,t)})}},aF={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(r){var t=r.item;if(!t||t.destroyed||!this.shouldUpdate(this,r))return!1;var e=t.getType();return e==="combo"},onDragStart:function(r){var t=this,e=this.graph,n=r.item;if(!!this.validationCombo(r)){this.targets=[];var a=e.findAllByState("combo",this.selectedState),o=n.get("id"),u=a.filter(function(f){var m=f.get("id");return o===m});u.length===0?this.targets.push(n):this.targets=a,this.activeState&&this.targets.map(function(f){var m=f.getModel();if(m.parentId){var x=e.findById(m.parentId);x&&e.setItemState(x,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:r.x,y:r.y},this.currentItemChildCombos=[],iF(n,function(f){if(f.destroyed)return!1;var m=f.getModel();return t.currentItemChildCombos.push(m.id),!0})}},onDrag:function(r){var t=this;if(!!this.origin&&!!this.validationCombo(r))if(this.enableDelegate)this.updateDelegate(r);else{if(this.activeState){var e=this.graph,n=r.item,a=n.getModel(),o=e.getCombos(),u=n.getBBox(),f=u.centerX,m=u.centerY,x=u.width,w=o.filter(function(L){var H=L.getModel();return a.parentId,H.id!==a.id&&!t.currentItemChildCombos.includes(H.id)});w.map(function(L){var H=L.getBBox(),W=H.centerX,et=H.centerY,ht=H.width,bt=f-W,xt=m-et,qt=2*Math.sqrt(bt*bt+xt*xt);x+ht-qt>.8*x?e.setItemState(L,t.activeState,!0):e.setItemState(L,t.activeState,!1)})}(0,Kl.S6)(this.targets,function(L){t.updateCombo(L,r)})}},updatePositions:function(r){var t=this;this.enableDelegate&&(0,Kl.S6)(this.targets,function(e){t.updateCombo(e,r)})},onDrop:function(r){var t=this,e=r.item;if(!(!e||!this.targets||e.destroyed)){this.updatePositions(r);var n=this.graph,a=e.getModel();this.targets.map(function(o){var u=o.getModel();u.parentId!==a.id?(t.activeState&&n.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id)):n.updateCombo(e)}),this.end(e,r),this.endComparison=!0}},onNodeDrop:function(r){var t=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(r);var e=this.graph,n=r.item,a=n.getModel().comboId,o;if(a){if(this.activeState){var u=e.findById(a);e.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?e.updateCombo(f):a!==f.getID()&&(o=e.findById(a),a!==f.getModel().parentId&&e.updateComboTree(f,a))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)e.updateCombo(f);else{var m=f.getModel();m.comboId&&e.updateComboTree(f)}});this.endComparison=!0,this.end(o,r)}},onDragEnter:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(r){if(!(!this.targets||this.targets.length===0)){var t=r.item;this.updatePositions(r);var e=this.getParentCombo(t.getModel().parentId),n=this.graph;e&&this.activeState&&n.setItemState(e,this.activeState,!1),this.end(void 0,r)}},end:function(r,t){var e=this;if(!!this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}r&&this.activeState&&n.setItemState(r,this.activeState,!1),r||this.targets.map(function(o){e.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(r,t){var e=this;if(t(r)!==!1&&r){var n=r.get("combos");(0,Kl.S6)(n,function(o){e.traverse(o,t)});var a=r.get("nodes");(0,Kl.S6)(a,function(o){e.traverse(o,t)})}},updateCombo:function(r,t){var e=this;this.traverse(r,function(n){return n.destroyed?!1:(e.updateSignleItem(n,t),!0)})},updateSignleItem:function(r,t){var e=this.origin,n=this.graph,a=r.getModel(),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var u=t.x-e.x+this.point[o].x,f=t.y-e.y+this.point[o].y;n.updateItem(r,{x:u,y:f})},getParentCombo:function(r){var t=this.graph;if(!!r){var e=t.findById(r);if(!!e)return e}},updateDelegate:function(r){var t=this.graph;if(this.delegateShape){var L=r.x-this.origin.x+this.originPoint.minX,H=r.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:L,y:H})}else{var e=t.get("delegateGroup"),n=null;this.targets.length>1?n=tR(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,u=n.width,f=n.height,m=n.minX,x=n.minY;this.originPoint={x:a,y:o,width:u,height:f,minX:m,minY:x};var w=(0,Ft.__assign)((0,Ft.__assign)({},mi.delegateStyle),this.delegateStyle);this.delegateShape=e.addShape("rect",{attrs:(0,Ft.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},w),name:"combo-delegate-shape"})}}},xR="dblclick",oF=["click","dblclick"],sF={getDefaultCfg:function(){return{trigger:xR,relayout:!0}},getEvents:function(){var r,t;return oF.includes(this.trigger)?t=this.trigger:(t=xR,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["combo:"+t]="onComboClick",r},onComboClick:function(r){var t=r.item,e=this,n=e.graph,a=e.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),u=o.id;!u||(n.collapseExpandCombo(u),a&&n.get("layout")?n.layout():n.refreshPositions())}}},_R=function(r,t,e){return r>=t&&r<=e},G_=function(r,t,e,n){var a=.001,o={x:e.x-r.x,y:e.y-r.y},u={x:t.x-r.x,y:t.y-r.y},f={x:n.x-e.x,y:n.y-e.y},m=u.x*f.y-u.y*f.x,x=m*m,w=u.x*u.x+u.y*u.y,L=f.x*f.x+f.y*f.y,H=null;if(x>a*w*L){var W=(o.x*f.y-o.y*f.x)/m,et=(o.x*u.y-o.y*u.x)/m;_R(W,0,1)&&_R(et,0,1)&&(H={x:r.x+W*u.x,y:r.y+W*u.y})}return H},bR=function(r,t){var e=r.x,n=r.y,a=r.width,o=r.height,u=e+a/2,f=n+o/2,m=[],x={x:u,y:f};m.push({x:e,y:n}),m.push({x:e+a,y:n}),m.push({x:e+a,y:n+o}),m.push({x:e,y:n+o}),m.push({x:e,y:n});for(var w=null,L=1;L<m.length&&(w=G_(m[L-1],m[L],x,t),!w);L++);return w},SR=function(r,t){var e=r.x,n=r.y,a=r.r,o=t.x,u=t.y,f=o-e,m=u-n,x=Math.sqrt(f*f+m*m);if(x<a)return null;var w=Math.sign(f),L=Math.sign(m),H=Math.atan(m/f);return{x:e+Math.abs(a*Math.cos(H))*w,y:n+Math.abs(a*Math.sin(H))*L}},wR=function(r,t){var e=r.rx,n=r.ry,a=r.x,o=r.y,u=t.x-a,f=t.y-o,m=Math.atan2(f/n,u/e);return m<0&&(m+=2*Math.PI),{x:a+e*Math.cos(m),y:o+n*Math.sin(m)}},U_=function(r,t,e){e===void 0&&(e=1);var n=[r.x,r.y,e];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),dR.transformMat3(n,n,t),{x:n[0],y:n[1]}},ER=function(r,t,e){e===void 0&&(e=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=c0.invert([],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[r.x,r.y,e];return dR.transformMat3(a,a,n),{x:a[0],y:a[1]}},x5=function(r,t,e){var n=r.x-t.x,a=r.y-t.y,o=r.x-e.x,u=r.y-e.y,f=(r.x*r.x-t.x*t.x-t.y*t.y+r.y*r.y)/2,m=(r.x*r.x-e.x*e.x-e.y*e.y+r.y*r.y)/2,x=a*o-n*u;return{x:-(u*f-a*m)/x,y:-(n*m-o*f)/x}},V_=function(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)},CR=function(r,t){var e=[];return r.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),e.push(a)}),e},_5=function(r){for(var t=[],e=r.length,n=0;n<e;n+=1){t[n]=[];for(var a=0;a<e;a+=1)n===a?t[n][a]=0:r[n][a]===0||!r[n][a]?t[n][a]=Infinity:t[n][a]=r[n][a]}for(var o=0;o<e;o+=1)for(var n=0;n<e;n+=1)for(var a=0;a<e;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},b5=function(r,t){var e=r.nodes,n=r.edges,a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(u,f){o[u.id]=f;var m=[];a.push(m)}),n&&n.forEach(function(u){var f=u.source,m=u.target,x=o[f],w=o[m];a[x][w]=1,t||(a[w][x]=1)}),a},AR=function(r,t){r.translate(t.x,t.y)},MR=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=r.getCanvasBBox(),a=t.x-n.minX,o=t.y-n.minY,u=cg(e,[["t",a,o]]);r.setMatrix(u)},uF=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=t;(0,Rs.default)(t)||(n=[t,t]),(0,Rs.default)(t)&&t.length===1&&(n=[t[0],t[0]]),e=cg(e,[["s",n[0],n[1]]]),r.setMatrix(e)},lF=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=cg(e,[["r",t]]),r.setMatrix(e)},zC=function(r,t,e){for(var n=[],a=0;a<r;a++)n[a]=0;return e.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function cF(i,r,t){return(t[0]-i[0])*(r[1]-i[1])==(r[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],r[0])<=t[0]&&t[0]<=Math.max(i[0],r[0])&&Math.min(i[1],r[1])<=t[1]&&t[1]<=Math.max(i[1],r[1])}var Z_=function(r,t,e){var n=!1,a=r.length,o=1e-6;function u(w){return Math.abs(w)<o?0:w<0?-1:1}if(a<=2)return!1;for(var f=0;f<a;f++){var m=r[f],x=r[(f+1)%a];if(cF(m,x,[t,e]))return!0;u(m[1]-e)>0!=u(x[1]-e)>0&&u(t-(e-m[1])*(m[0]-x[0])/(m[1]-x[1])-m[0])<0&&(n=!n)}return n},TR=function(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)},fF=function(r,t){var e=!1;return(0,d.each)(r,function(n){if(G_(n.from,n.to,t.from,t.to))return e=!0,!1}),e},S5=function(r,t){var e=function(L){var H=L.map(function(et){return et[0]}),W=L.map(function(et){return et[1]});return{minX:Math.min.apply(null,H),maxX:Math.max.apply(null,H),minY:Math.min.apply(null,W),maxY:Math.max.apply(null,W)}},n=function(L){for(var H=[],W=L.length,et=0;et<W-1;et++){var ht=L[et],bt=L[et+1];H.push({from:{x:ht[0],y:ht[1]},to:{x:bt[0],y:bt[1]}})}if(H.length>1){var xt=L[0],qt=L[W-1];H.push({from:{x:qt[0],y:qt[1]},to:{x:xt[0],y:xt[1]}})}return H};if(r.length<2||t.length<2)return!1;var a=e(r),o=e(t);if(!TR(a,o))return!1;var u=!1;if((0,d.each)(t,function(w){if(Z_(r,w[0],w[1]))return u=!0,!1}),u||((0,d.each)(r,function(w){if(Z_(t,w[0],w[1]))return u=!0,!1}),u))return!0;var f=n(r),m=n(t),x=!1;return(0,d.each)(m,function(w){if(fF(f,w))return x=!0,!1}),x},ly=function(){function i(r,t,e,n){this.x1=r,this.y1=t,this.x2=e,this.y2=n}return i.prototype.getBBox=function(){var r=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),e=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:r,y:t,minX:r,minY:t,maxX:e,maxY:n,width:e-r,height:n-t};return a},i}(),w5=function(r,t){var e={top:[r.minX,r.minY,r.maxX,r.minY],left:[r.minX,r.minY,r.minX,r.maxY],bottom:[r.minX,r.maxY,r.maxX,r.maxY],right:[r.maxX,r.minY,r.maxX,r.maxY]};return e[t]},hF=function(r,t){var e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),n=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),a=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(a){var o=e/a,u=n/a;if(o>=0&&o<=1&&u>=0&&u<=1)return o}return Number.POSITIVE_INFINITY},PR=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=0,o=[],u=0;u<4;u++){var f=w5(n,e[u]),m=f[0],x=f[1],w=f[2],L=f[3];o[u]=G_({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:m,y:x},{x:w,y:L}),o[u]&&(a+=1)}return[o,a]},E5=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=Number.POSITIVE_INFINITY,o=0,u=0;u<4;u++){var f=w5(n,e[u]),m=f[0],x=f[1],w=f[2],L=f[3],H=hF(t,new ly(m,x,w,L));H=Math.abs(H-.5),H>=0&&H<=1&&(o+=1,a=H<a?H:a)}return o===0?-1:a},IR=function(r){var t=0,e=0;if(r.length>0){for(var n=0,a=r;n<a.length;n++){var o=a[n];t+=o.x,e+=o.y}t/=r.length,e/=r.length}return{x:t,y:e}},GC=function(r,t){return Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)},OR=function(r,t){var e=t.x1,n=t.y1,a=t.x2-e,o=t.y2-n,u=r.x-e,f=r.y-n,m=u*a+f*o,x;m<=0?x=0:(u=a-u,f=o-f,m=u*a+f*o,m<=0?x=0:x=m*m/(a*a+o*o));var w=u*u+f*f-x;return w<0&&(w=0),w},C5=function(r,t,e){return e===void 0&&(e=.001),Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)<Math.pow(e,2)},LR=function(r,t){var e=r.x<t.x,n=r.x>t.x+t.width,a=r.y>t.y+t.height,o=r.y<t.y,u=e||n||a||o;if(!u)return 0;if(a&&!e&&!n)return Math.pow(t.y+t.height-r.y,2);if(o&&!e&&!n)return Math.pow(r.y-t.y,2);if(e&&!a&&!o)return Math.pow(t.x-r.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-r.x,2);var f=Math.min(Math.abs(t.x-r.x),Math.abs(t.x+t.width-r.x)),m=Math.min(Math.abs(t.y-r.y),Math.abs(t.y+t.height-r.y));return f*f+m*m},pF=function(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){if(e.charAt(0)==="\\")return e.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},kR=function(r){var t=[];if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);for(var e=0,n=r;e<n.length;e++){var a=n[e],o=a.x,u=a.y;t.push(o),t.push(u)}var f=(0,ql.catmullRom2Bezier)(t);return f.unshift(["M",r[0].x,r[0].y]),f},UC=function(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var a={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y},o=[];Sl.normalize(o,[t.x-r.x,t.y-r.y]),o.length===0&&(o=[0,0]);var u=[-o[1]*n,o[0]*n];return a.x+=u[0],a.y+=u[1],a},RR=function(r,t){var e=r.length;if(!e)return"";for(var n="",a="",o=0;o<e;o++){var u=r[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=pF(a,u)}return t&&(n+="Z"),n},VC=function(r){var t=[];return r.forEach(function(e){var n=e[0];if(n!=="A")for(var a=1;a<e.length;a=a+2)t.push([e[a],e[a+1]]);else{var o=e.length;t.push([e[o-2],e[o-1]])}}),t},A5=function(r){if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);var t=r[0],e=r[1],n=r[r.length-1],a=r[r.length-2];r.unshift(n),r.unshift(a),r.push(t),r.push(e);for(var o=[],u=1;u<r.length-2;u+=1){var f=r[u-1].x,m=r[u-1].y,x=r[u].x,w=r[u].y,L=r[u+1].x,H=r[u+1].y,W=u!==r.length-2?r[u+2].x:L,et=u!==r.length-2?r[u+2].y:H,ht=x+(L-f)/6,bt=w+(H-m)/6,xt=L-(W-x)/6,qt=H-(et-w)/6;o.push(["C",ht,bt,xt,qt,L,H])}return o.unshift(["M",n.x,n.y]),o},DR=function(r,t){return Sl.scale([],Sl.normalize([],r),t)},BR=function(r,t){var e=[r[1]-t[1],t[0]-r[0]],n=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[e[0]/n,e[1]/n]},FR=function(r,t){return[t[0]-r[0],t[1]-r[1]]};function NR(i,r){var t=function(w){var L=[w[0][0],w[0][1]-r],H=[w[0][0],w[0][1]+r];return"M "+L+" A "+r+","+r+",0,0,0,"+H+" A "+r+","+r+",0,0,0,"+L},e=function(w){var L=Sl.scale([],BR(w[0],w[1]),r),H=Sl.scale([],L,-1),W=Sl.add([],w[0],L),et=Sl.add([],w[1],L),ht=Sl.add([],w[1],H),bt=Sl.add([],w[0],H);return"M "+W+" L "+et+" A "+[r,r,"0,0,0",ht].join(",")+" L "+bt+" A "+[r,r,"0,0,0",W].join(",")};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return e(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],u=i[a],f=Sl.scale([],BR(o,u),r);n[a]=[Sl.add([],o,f),Sl.add([],u,f)]}var m="A "+[r,r,"0,0,0,"].join(",");return n=n.map(function(x,w){var L="";return w===0&&(L="M "+n[n.length-1][1]+" "),L+=m+x[0]+" L "+x[1],L}),n.join(" ")}function zR(i,r){var t=i.length,e=function(x){var w=[x[0][0],x[0][1]-r],L=[x[0][0],x[0][1]+r];return"M "+w+" A "+[r,r,"0,0,0",L].join(",")+" A "+[r,r,"0,0,0",w].join(",")},n=function(x){var w=FR(x[0],x[1]),L=DR(w,r),H=Sl.add([],x[0],Sl.scale([],L,-1)),W=Sl.add([],x[1],L),et=1.2*r,ht=DR(Sl.normalize([],w),et),bt=Sl.scale([],ht,-1),xt=Sl.add([],H,bt),qt=Sl.add([],W,bt),ie=Sl.add([],H,ht);return"M "+H+" C "+[xt,qt,W].join(",")+" S "+[ie,H].join(",")+" Z"};if(!i||t<1)return"";if(t===1)return e(i);if(t===2)return n(i);for(var a=i.map(function(m,x){var w=i[(x+1)%t];return{p:m,v:Sl.normalize([],FR(m,w))}}),o=0;o<a.length;++o){var u=o>0?o-1:t-1,f=Sl.normalize([],Sl.add([],a[u].v,Sl.scale([],a[o].v,-1)));a[o].p=Sl.add([],a[o].p,Sl.scale([],f,r))}return a.map(function(m){var x=m.p;return{x:x[0],y:x[1]}})}var GR="shift",dF=["drag","shift","ctrl","alt","control"],vF=function(r,t){var e,n=r.getKeyShape();if(r.get("type")==="path")e=VC(n.attr("path"));else{var a=n.getCanvasBBox();e=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return S5(t,e)},gF={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:GR,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return dF.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=GR,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(r){var t=this.lasso,e=r.item;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:r.x,y:r.y},this.points.push(this.originPoint),t.show())},onDragMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:r.x,y:r.y}),this.updateLasso(r))},onDragEnd:function(r){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var r=this.points,t=[];return r.length&&(r.forEach(function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",r[0].x,r[0].y])),t},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var r=this,t=this,e=t.graph,n=t.shouldUpdate,a=this.points.map(function(x){return[e.getCanvasByPoint(x.x,x.y).x,e.getCanvasByPoint(x.x,x.y).y]}),o=this.selectedState,u=[],f=[];e.getNodes().forEach(function(x){if(vF(x,a)&&n(x,"select")){u.push(x);var w=x.getModel();f.push(w.id),e.setItemState(x,o,!0)}});var m=[];this.includeEdges&&u.forEach(function(x){var w=x.getOutEdges();w.forEach(function(L){var H=L.getModel(),W=H.source,et=H.target;f.includes(W)&&f.includes(et)&&n(L,"select")&&(m.push(L),e.setItemState(L,r.selectedState,!0))})}),this.selectedEdges=m,this.selectedNodes=u,this.onSelect&&this.onSelect(u,m),e.emit("nodeselectchange",{selectedItems:{nodes:u,edges:m},select:!0})},createLasso:function(){var r=this,t=r.graph.get("delegateGroup").addShape("path",{attrs:(0,Ft.__assign)({path:[]},r.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.points=[],t},updateLasso:function(r){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},UR="click",mF=["click","drag"],VR=void 0,yF=["shift","ctrl","control","alt","meta",void 0],xF={getDefaultCfg:function(){return{trigger:UR,key:VR,edgeConfig:{}}},getEvents:function(){var r=this;mF.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=UR,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),r.key&&yF.indexOf(r.key.toLowerCase())===-1&&(r.trigger=VR,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return r.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:r.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),r.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item;(!e||e.getID()===t.source||e.getType()!=="node")&&t.cancelCreating({item:t.edge,x:r.x,y:r.y})}},onClick:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item,n=t.graph,a=e.getModel();if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,r))return;var o={target:a.id};t.source===a.id&&(o.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,o),n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,r))return;t.edge=n.addItem("edge",(0,Ft.__assign)({source:a.id,target:a.id},t.edgeConfig),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(r){var t=this;if(!(t.key&&!t.keydown)){var e={x:r.x,y:r.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:e},!1)}},cancelCreating:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=t.graph,n=r.item;if(t.addingEdge&&r.target&&r.target.isCanvas&&r.target.isCanvas()){e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1;return}if(t.addingEdge&&t.edge===n){var a=!0;if(!e.get("groupByTypes"))for(var o=r.x,u=r.y,f=e.getNodes(),m=f.length,x=0;x<m;x++){var w=f[x],L=w.getModel(),H=w.getBBox();if(o<=H.maxX&&o>=H.minX&&u<=H.maxY&&u>=H.minY){if(!t.shouldEnd.call(t,{x:r.x,y:r.y,canvasX:r.canvasX,canvasY:r.canvasY,clientX:r.clientX,clientY:r.clientY,item:w}))return;e.emit("beforecreateedge",{}),e.updateItem(t.edge,{target:L.id}),e.emit("aftercreateedge",{edge:t.edge}),a=!1;break}}a&&e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1}}},onKeyDown:function(r){var t=this,e=r.key;!e||(e.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var r=this;r.addingEdge&&r.edge&&(r.graph.removeItem(r.edge,!1),r.addingEdge=!1,r.edge=null),this.keydown=!1}},ZR="ctrl",_F=["shift","ctrl","alt","control"],bF="1",SF={getDefaultCfg:function(){return{trigger:ZR,combinedKey:bF,functionName:"fitView",functionParams:[]}},getEvents:function(){return _F.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=ZR,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},wF={"drag-canvas":L4,"zoom-canvas":W4,"drag-node":U4,"activate-relations":V4,"brush-select":H4,"click-select":X4,"lasso-select":gF,tooltip:K4,"edge-tooltip":$4,"drag-group":Q4,"drag-node-with-group":J4,"collapse-expand-group":eF,"collapse-expand":nF,"drag-combo":aF,"collapse-expand-combo":sF,"create-edge":xF,"shortcuts-call":SF};(0,gs.default)(wF,function(i,r){p5.registerBehavior(r,i)});var HR=p5,cy=S(19083),H_=S(19270),gv=S(27549),jR=S(54544),EF=function(r){var t=(0,jR.default)(r.groups,"id"),e=(0,jR.default)(r.groups,"parentId"),n={};for(var a in e)if(!!a){var o=e[a],u=t[a];if(u&&o){var f=(0,Ft.__spreadArrays)(o,u);n[a]=f}else o&&(n[a]=o)}var m=(0,Ft.__assign)((0,Ft.__assign)({},t),n),x={};for(var w in m)if(!(!w||w==="undefined")){var o=m[w].map(function(et){return et.id});x[w]=o}var L={},H=function(et){if(!et||et==="undefined")return"continue";for(var ht=x[et],bt=[],xt=0,qt=ht;xt<qt.length;xt++){var ie=qt[xt],_e=m[ie].map(function(rr){return rr.id});bt.push.apply(bt,_e)}var ze=r.nodes?r.nodes.filter(function(rr){return bt.indexOf(rr.groupId)>-1||bt.indexOf(rr.parentId)>-1}).map(function(rr){return rr.id}):[];L[et]=ze};for(var w in x)H(w);return L},CF=function(){function i(r){this.graph=r,this.destroyed=!1,this.modes=r.get("modes")||{default:[]},this.formatModes(),this.mode=r.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var r=this.modes;(0,gs.default)(r,function(t){(0,gs.default)(t,function(e,n){(0,Zo.default)(e)&&(t[n]={type:e})})})},i.prototype.setBehaviors=function(r){var t=this.graph,e=this.modes[r],n=[],a;(0,gs.default)(e||[],function(o){var u=p5.getBehavior(o.type);!u||(a=new u(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(r,t){return(0,gs.default)(t,function(e){r.indexOf(e)<0&&((0,Zo.default)(e)&&(e={type:e}),r.push(e))}),r},i.filterBehaviors=function(r,t){var e=[];return r.forEach(function(n){var a="";(0,Zo.default)(n)?a=n:a=n.type,t.indexOf(a)<0&&e.push(n)}),e},i.prototype.setMode=function(r){var t=this,e=t.modes,n=t.graph,a=r,o=e[a];!o||(n.emit("beforemodechange",{mode:r}),(0,gs.default)(this.currentBehaves,function(u){u.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:r}),this.mode=r)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(r,t,e){var n=this,a;if((0,Rs.default)(r)?a=r:a=[r],(0,Rs.default)(t))return(0,gs.default)(t,function(u){n.modes[u]?e?n.modes[u]=i.mergeBehaviors(n.modes[u]||[],a):n.modes[u]=i.filterBehaviors(n.modes[u]||[],a):e&&(n.modes[u]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||e&&(this.modes[o]=a),e?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),AF=CF,MF=function(){function i(r){this.destroyed=!1,this.graph=r,this.destroyed=!1}return i.prototype.getViewCenter=function(){var r=this.getFormatPadding(),t=this.graph,e=this.graph.get("width"),n=t.get("height");return{x:(e-r[1]-r[3])/2+r[3],y:(n-r[0]-r[2])/2+r[0]}},i.prototype.fitCenter=function(){var r=this.graph,t=r.get("group");t.resetMatrix();var e=t.getCanvasBBox();if(!(e.width===0||e.height===0)){var n=this.getViewCenter(),a={x:e.x+e.width/2,y:e.y+e.height/2};r.translate(n.x-a.x,n.y-a.y)}},i.prototype.fitView=function(){var r=this.graph,t=this.getFormatPadding(),e=r.get("width"),n=r.get("height"),a=r.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var u=this.getViewCenter(),f={x:o.x+o.width/2,y:o.y+o.height/2};r.translate(u.x-f.x,u.y-f.y);var m=(e-t[1]-t[3])/o.width,x=(n-t[0]-t[2])/o.height,w=m;m>x&&(w=x),r.zoom(w,u)}},i.prototype.getFormatPadding=function(){var r=this.graph.get("fitViewPadding");return v5(r)},i.prototype.focusPoint=function(r,t,e){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),u=this.graph.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),t){var f=(o.x-r.x)*u[0],m=(o.y-r.y)*u[4],x=0,w=0,L=0,H=0;this.graph.get("canvas").animate(function(W){L=f*W,H=m*W,n.graph.translate(L-x,H-w),x=L,w=H},(0,Ft.__assign)({},e))}else this.graph.translate((o.x-r.x)*u[0],(o.y-r.y)*u[4])},i.prototype.getPointByCanvas=function(r,t){var e=this.graph.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=ER({x:r,y:t},e);return n},i.prototype.getPointByClient=function(r,t){var e=this.graph.get("canvas"),n=e.getPointByClient(r,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(r,t){var e=this.graph.get("canvas"),n=this.getCanvasByPoint(r,t),a=e.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(r,t){var e=this.graph.get("group").getMatrix();return e||(e=[1,0,0,0,1,0,0,0,1]),U_({x:r,y:t},e)},i.prototype.focus=function(r,t,e){(0,Zo.default)(r)&&(r=this.graph.findById(r));var n=r.get("group"),a=n.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r&&this.focusPoint({x:a[6],y:a[7]},t,e)},i.prototype.changeSize=function(r,t){var e=this.graph;if(!(0,vv.default)(r)||!(0,vv.default)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");e.set({width:r,height:t});var n=e.get("canvas");n.changeSize(r,t);var a=e.get("plugins");a.forEach(function(o){if(o.get("gridContainer")){var u=e.get("minZoom");(0,nl.Z)(o.get("container"),{width:r+"px",height:t+"px"}),(0,nl.Z)(o.get("gridContainer"),{width:r/u+"px",height:t/u+"px",left:0,top:0})}})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),TF=MF,j_=S(73136),ZC=S(61262),PF=function(){function i(r){this.preItem=null,this.graph=r,this.extendEvents=[],this.dragging=!1,this.destroyed=!1,this.initEvents()}return i.prototype.initEvents=function(){var r=this,t=r.graph,e=r.extendEvents,n=t.get("canvas"),a=n.get("el"),o=(0,ZC.default)(this,"onCanvasEvents"),u=(0,ZC.default)(this,"onExtendEvents"),f=(0,ZC.default)(this,"onWheelEvent");n.on("*",o),this.canvasHandler=o,e.push((0,j_.Z)(a,"DOMMouseScroll",f)),e.push((0,j_.Z)(a,"mousewheel",f)),typeof window!="undefined"&&(e.push((0,j_.Z)(window,"keydown",u)),e.push((0,j_.Z)(window,"keyup",u)),e.push((0,j_.Z)(window,"focus",u)))},i.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},i.prototype.onCanvasEvents=function(r){var t=this.graph,e=t.get("canvas"),n=r.target,a=r.type;r.canvasX=r.x,r.canvasY=r.y;var o={x:r.canvasX,y:r.canvasY},u=t.get("group"),f=u.getMatrix();if(f||(f=[1,0,0,0,1,0,0,0,1]),J3(f)&&(o=t.getPointByClient(r.clientX,r.clientY)),r.x=o.x,r.y=o.y,r.currentTarget=t,n===e){a==="mousemove"&&this.handleMouseMove(r,"canvas"),r.target=e,r.item=null,t.emit(a,r),t.emit("canvas:"+a,r);return}var m=i.getItemRoot(n);if(!m){t.emit(a,r);return}var x=m.get("item");if(!x.destroyed){var w=x.getType();if(r.target=n,r.item=x,r.canvasX===r.x&&r.canvasY===r.y){var L=t.getCanvasByPoint(r.x,r.y);r.canvasX=L.x,r.canvasY=L.y}t.emit(a,r),r.name&&!r.name.includes(":")?t.emit(w+":"+a,r):t.emit(r.name,r),a==="dragstart"&&(this.dragging=!0),a==="dragend"&&(this.dragging=!1),a==="mousemove"&&this.handleMouseMove(r,w)}},i.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},i.prototype.onWheelEvent=function(r){(0,qu.default)(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},i.prototype.handleMouseMove=function(r,t){var e=this,n=e.graph,a=e.preItem,o=n.get("canvas"),u=r.target===o?null:r.item;r=RC(r),a&&a!==u&&!a.destroyed&&(r.item=a,this.emitCustomEvent(a.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",r)),u&&a!==u&&(r.item=u,this.emitCustomEvent(t,"mouseenter",r),this.dragging&&this.emitCustomEvent(t,"dragenter",r)),this.preItem=u},i.prototype.emitCustomEvent=function(r,t,e){e.type=t,this.graph.emit(r+":"+t,e)},i.prototype.destroy=function(){var r=this,t=r.graph,e=r.canvasHandler,n=r.extendEvents,a=t.get("canvas");a.off("*",e),(0,gs.default)(n,function(o){o.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},i}(),IF=PF,XR=S(8289),YR=S(33643),WR=S(85260),OF=S(58070),LF={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ed=Math.PI,M5=Math.sin,T5=Math.cos,_f=M5(Ed/8),bf=T5(Ed/8),HC=function(r,t){var e=r.getBBox(),n={x:e.minX,y:e.minY},a={x:e.maxX,y:e.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=U_(n,o),a=U_(a,o)}var u=n.x,f=n.y,m=a.x,x=a.y;return{x:u,y:f,minX:u,minY:f,maxX:m,maxY:x,width:m-u,height:x-f}},KR=function(r){var t=r.sourceNode||r.targetNode,e=t.get("group"),n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),u=r.loopCfg||{},f=u.dist||Math.max(o.width,o.height)*2,m=u.position||mi.defaultLoopPosition,x=[n[6],n[7]],w=[r.startPoint.x,r.startPoint.y],L=[r.endPoint.x,r.endPoint.y],H=o.height/2,W=o.height/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf;if(w[0]===L[0]&&w[1]===L[1]){switch(m){case"top":w=[x[0]-et,x[1]-ht],L=[x[0]+bt,x[1]-xt];break;case"top-right":H=o.height/2,W=o.width/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]+et,x[1]-ht],L=[x[0]+xt,x[1]-bt];break;case"right":H=o.width/2,W=o.width/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]+ht,x[1]-et],L=[x[0]+xt,x[1]+bt];break;case"bottom-right":H=o.width/2,W=o.height/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]+ht,x[1]+et],L=[x[0]+bt,x[1]+xt];break;case"bottom":H=o.height/2,W=o.height/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]+et,x[1]+ht],L=[x[0]-bt,x[1]+xt];break;case"bottom-left":H=o.height/2,W=o.width/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]-et,x[1]+ht],L=[x[0]-xt,x[1]+bt];break;case"left":H=o.width/2,W=o.width/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]-ht,x[1]+et],L=[x[0]-xt,x[1]-bt];break;case"top-left":H=o.width/2,W=o.height/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]-ht,x[1]-et],L=[x[0]-bt,x[1]-xt];break;default:H=o.width/2,W=o.width/2,et=H*_f,ht=H*bf,bt=W*_f,xt=W*bf,w=[x[0]-et,x[1]-ht],L=[x[0]+bt,x[1]-xt]}if(u.clockwise===!1){var qt=[w[0],w[1]];w=[L[0],L[1]],L=[qt[0],qt[1]]}}var ie=[w[0]-x[0],w[1]-x[1]],_e=(H+f)/H,ze=(W+f)/W;u.clockwise===!1&&(_e=(W+f)/W,ze=(H+f)/H);var rr=Sl.scale([],ie,_e),sr=[x[0]+rr[0],x[1]+rr[1]],qe=[L[0]-x[0],L[1]-x[1]],wr=Sl.scale([],qe,ze),Vr=[x[0]+wr[0],x[1]+wr[1]];return r.startPoint={x:w[0],y:w[1]},r.endPoint={x:L[0],y:L[1]},r.controlPoints=[{x:sr[0],y:sr[1]},{x:Vr[0],y:Vr[1]}],r},jC=function(r,t,e,n,a){var o=1e-4,u=[],f=r.getPoint(t);if(f===null)return{x:0,y:0,angle:0};if(t<o)u=r.getStartTangent().reverse();else if(t>1-o)u=r.getEndTangent();else{var m=r.getPoint(t+o);u.push([f.x,f.y]),u.push([m.x,m.y])}var x=Math.atan2(u[1][1]-u[0][1],u[1][0]-u[0][0]);if(x<0&&(x+=Ed*2),e&&(f.x+=T5(x)*e,f.y+=M5(x)*e),n){var w=x-Ed/2;x>1/2*Ed&&x<3*1/2*Ed&&(w-=Ed),f.x+=T5(w)*n,f.y+=M5(w)*n}var L={x:f.x,y:f.y,angle:x};return a?(x>1/2*Ed&&x<3*1/2*Ed&&(x-=Ed),(0,Ft.__assign)({rotate:x},L)):L},$R=function i(r,t){if(t(r)===!1)return!1;if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return!1}return!0},kF=function i(r,t){if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return}return t(r)!==!1},_h=function(r,t){typeof t=="function"&&$R(r,t)},Cd=function(r,t){typeof t=="function"&&kF(r,t)},QR=function(r,t){var e=["V","TB","BT"],n={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",u="y";t&&e.indexOf(t)>=0&&(u="x",o="y");var f=0;_h(r,function(w){return f++,w.x>a.x&&(a.x=w.x),w.x<n.x&&(n.x=w.x),w.y>a.y&&(a.y=w.y),w.y<n.y&&(n.y=w.y),!0});var m=Ed*2/f,x=a[u]-n[u];return x===0||_h(r,function(w){var L=(w[u]-n[u])/x*(Ed*2-m)+m,H=Math.abs(o==="x"?w.x-r.x:w.y-r.y);return w.x=H*Math.cos(L),w.y=H*Math.sin(L),!0}),r},qR=function(r,t){return t*(LF[r]||1)},JR=function(r,t){var e=0,n=new RegExp("[\u4E00-\u9FA5]+");return r.split("").forEach(function(a){n.test(a)?e+=t:e+=qR(a,t)}),[e,t]},P5=function(r,t){var e=[],n={},a={};r.forEach(function(u){a[u.id]=u}),r.forEach(function(u,f){var m=(0,d.clone)(u);m.itemType="combo",m.children=void 0,m.parentId===m.id?(console.warn("The parentId for combo "+m.id+" can not be the same as the combo's id"),delete m.parentId):m.parentId&&!a[m.parentId]&&(console.warn("The parent combo for combo "+m.id+" does not exist!"),delete m.parentId);var x=n[m.id];if(x){if(m.children=x.children,n[m.id]=m,x=m,!x.parentId){e.push(x);return}var w=n[x.parentId];if(w)w.children?w.children.push(m):w.children=[m];else{var L={id:x.parentId,children:[x]};n[x.parentId]=L,n[m.id]=m}return}if((0,d.isString)(u.parentId)){var H=n[u.parentId];if(H)H.children?H.children.push(m):H.children=[m],n[m.id]=m;else{var W={id:u.parentId,children:[m]};n[W.id]=W,n[m.id]=m}}else e.push(m),n[m.id]=m});var o={};return(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var m={id:u.id,comboId:u.comboId};f.children?f.children.push(m):f.children=[m],m.itemType="node",n[u.id]=m}}),e.forEach(function(u){u.depth=0,$R(u,function(f){var m,x=n[f.id].itemType;x==="node"?m=n[f.comboId]:m=n[f.parentId],m?x==="node"?f.depth=m.depth+1:f.depth=m.depth+2:f.depth=0;var w=o[f.id];return w&&(w.depth=f.depth),!0})}),e},I5=function(r,t,e){var n=r,a,o={root:{children:r}},u=!1,f="root";(r||[]).forEach(function(H){if(!u){if(H.id===t){a=H,H.itemType==="combo"?a.parentId=e:a.comboId=e,u=!0;return}_h(H,function(W){return o[W.id]={children:W.children},n=o[W.parentId||W.comboId||"root"].children,W&&(W.removed||t===W.id)&&n?(f=W.parentId||W.comboId||"root",a=W,W.itemType==="combo"?a.parentId=e:a.comboId=e,u=!0,!1):!0})}}),n=o[f].children;var m=n?n.indexOf(a):-1;if(m>-1&&n.splice(m,1),u||(a={id:t,itemType:"node",comboId:e},o[t]={children:void 0}),t){var x=!1;if(e){var w=0;(r||[]).forEach(function(H){x||_h(H,function(W){return e===W.id?(x=!0,W.children?W.children.push(a):W.children=[a],w=W.depth,a.itemType==="node"?a.depth=w+2:a.depth=w+1,!1):!0})})}else(!e||!x)&&a.itemType!=="node"&&r.push(a);var L=a.depth;_h(a,function(H){return H.itemType==="node"?L+=2:L+=1,H.depth=L,!0})}return r},O5=function(r,t){var e={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!r||r.length===0||(r.forEach(function(n){var a=t.findById(n.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&e.minX>o.minX&&(e.minX=o.minX),o.y&&e.minY>o.minY&&(e.minY=o.minY),o.x&&e.maxX<o.maxX&&(e.maxX=o.maxX),o.y&&e.maxY<o.maxY&&(e.maxY=o.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(n){(e[n]===Infinity||e[n]===-Infinity)&&(e[n]=void 0)})),e},RF=function(r){var t=r.group,e=r.height,n=r.width,a=r.x,o=r.y,u=t.get("canvas"),f=u.get("width"),m=u.get("height"),x={start:{x:0,y:0},end:{x:0,y:0}};return x.start.x=a/f,x.start.y=o/m,x.end.x=(a+n)/f,x.end.y=(o+e)/m,x};function XC(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?XC=function(t){return typeof t}:XC=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XC(i)}function tD(i){if(typeof i!="string")return i;var r=function(rr){if(typeof rr!="string")return rr;try{return JSON.parse(rr.trim())}catch(sr){return rr.trim()}},t=r(i);if(typeof t!="string")return t;for(var e=function(rr){return rr[rr.length-1]},n=i.trim(),a=[],o=[],u=function(){for(var rr=[],sr=0;sr<arguments.length;sr++)rr[sr]=arguments[sr];return rr.some(function(qe){return e(o)===qe})},f=function(){return e(a)},m=null,x=0,w="";x<n.length;){var L=n[x],H=u('"',"'");if(!H&&!L.trim()){x+=1;continue}var W=n[x-1]==="\\",et=u("}"),ht=u("]"),bt=u(","),xt=f();if(H)if(e(o)===L&&!W){o.pop();var qt=r(w);xt.push(qt),m=qt,w=""}else w+=L;else if(ht&&L===",")w&&(xt.push(r(w)),w="");else if(et&&L===":")o.push(","),w&&(xt.push(w),w="");else if(bt&&L===",")w&&(xt.push(r(w)),w=""),o.pop();else if(L==="}"&&(et||bt)){w&&(xt.push(r(w)),w=""),bt&&o.pop();for(var ie={},_e=1;_e<xt.length;_e+=2)ie[xt[_e-1]]=xt[_e];a.pop(),a.length&&e(a).push(ie),o.pop(),m=ie}else L==="]"&&ht?(w&&(xt.push(r(w)),w=""),a.pop(),a.length&&e(a).push(xt),o.pop(),m=xt):L==="{"?(a.push([]),o.push("}")):L==="["?(a.push([]),o.push("]")):L==='"'?o.push('"'):L==="'"?o.push("'"):w+=L;x+=1}return m||w}var DF=function(r){return r.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})},BF=function(r){return function(t){for(var e=r.length,n=[],a=0,o="";a<e;)if(r[a]==="{"&&r[a+1]==="{")n.push(o),o="",a+=2;else if(r[a]==="}"&&r[a+1]==="}"){if(n.length){var u=n.pop();o=(0,OF.default)(t,o,u.endsWith("=")?'"{'+o+'}"':o),n.push(u+o)}a+=2,o=""}else o+=r[a],a+=1;return n.push(o),n.map(function(f,m){return n[m-1]&&n[m-1].endsWith("=")?'"{'+f+'}"':f}).join("")}};function eD(i,r){var t={},e=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(u){return eD(u,r)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(e).forEach(function(u){var f=DF(u),m=i.getAttribute(u);try{if(f==="style"||f==="attrs"){var x=tD(m);t=(0,Ft.__assign)((0,Ft.__assign)({},t),x)}else a[f]=tD(m)}catch(w){if(f==="style")throw w;a[f]=m}}),a.attrs=t,r&&r.style&&a.name&&XC(r.style[a.name])==="object"&&(a.attrs=(0,Ft.__assign)((0,Ft.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=(0,Ft.__assign)((0,Ft.__assign)({},a.attrs),r.style)),n.length&&(a.children=n),a}function FF(i,r,t){var e=i.attrs,n=e===void 0?{}:e,a={x:r.x||0,y:r.y||0,width:t.width||0,height:t.height||0},o,u;switch(i.type){case"maker":case"circle":n.r&&(u=2*n.r,o=2*n.r);break;case"text":n.text&&(u=JR(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=u,i.attrs=(0,Ft.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(u=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),u>=0&&(a.width=u),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function rD(i,r){var t;r===void 0&&(r={x:0,y:0});var e=(0,Ft.__assign)({x:0,y:0,width:0,height:0},r);if((t=i.children)===null||t===void 0?void 0:t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,u=(0,Ft.__assign)({},r);o&&(u.y+=o);for(var f=0;f<i.children.length;f++){i.children[f].attrs.key=(a.key||"root")+" -"+f+" ";var m=rD(i.children[f],u);if(m.bbox){var x=m.bbox;m.attrs.next==="inline"?u.x+=m.bbox.width:u.y+=m.bbox.height,x.width+x.x>e.width&&(e.width=x.width+x.x),x.height+x.y>e.height&&(e.height=x.height+x.y)}}}return i.bbox=FF(i,r,e),i.attrs=(0,Ft.__assign)((0,Ft.__assign)({},i.attrs),i.bbox),i}function nD(i,r){var t,e,n,a,o=(i||{}).type,u=((r==null?void 0:r.attrs)||{}).key;if(u&&i&&(i.attrs.key=u),!i&&r)return{action:"delete",val:r,type:o,key:u};if(i&&!r)return{action:"add",val:i,type:o};if(!i&&!r)return{action:"same",type:o};var f=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((e=r.children)===null||e===void 0?void 0:e.length)>0)for(var m=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=r.children)===null||a===void 0?void 0:a.length),x=r.children||[],w=i.children||[],L=0;L<m;L+=1)f.push(nD(w[L],x[L]));var H=Object.keys(r.attrs),W=Object.keys(i.attrs);return r.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:r,key:u,children:f}:H.filter(function(et){return et!=="children"}).some(function(et){return i.attrs[et]!==r.attrs[et]||!W.includes(et)})?{action:"change",val:i,children:f,type:o,key:u}:{action:"same",children:f,type:o,key:u}}function iD(i){var r={},t=function(n){var a=typeof i=="function"?i(n):i,o=BF(a)(n),u=document.createElement("div");u.innerHTML=o;var f=u.children[0],m=rD(eD(f,n));return u.remove(),m};return{draw:function(n,a){var o=t(n),u=a,f=function m(x){var w=x.attrs,L=w===void 0?{}:w,H=x.bbox,W=x.type,et=x.children,ht=(0,Ft.__rest)(x,["attrs","bbox","type","children"]);if(x.type!=="group"){var bt=a.addShape(x.type,(0,Ft.__assign)({attrs:L,origin:{bbox:H,type:W,children:et}},ht));x.keyshape&&(u=bt)}x.children&&x.children.forEach(function(xt){return m(xt)})};return f(o),r[n.id]=[o],u},update:function(n,a){r[n.id]||(r[n.id]=[]);var o=a.getContainer(),u=o.get("children"),f=t(n),m=r[n.id].pop(),x=nD(f,m),w=function W(et){var ht;et.type!=="group"&&o.addShape(et.type,{attrs:et.attrs}),((ht=et.children)===null||ht===void 0?void 0:ht.length)&&et.children.map(function(bt){return W(bt)})},L=function W(et){var ht,bt=u.find(function(xt){return xt.attrs.key===et.attrs.key});bt&&o.removeChild(bt),((ht=et.children)===null||ht===void 0?void 0:ht.length)&&et.children.map(function(xt){return W(xt)})},H=function W(et){var ht=et.key;if(et.type!=="group"){var bt=u.find(function(qt){return qt.attrs.key===ht});switch(et.action){case"change":if(bt){var xt=et.val.keyshape?a.getOriginStyle():{};bt.attr((0,Ft.__assign)((0,Ft.__assign)({},xt),et.val.attrs))}break;case"add":w(et.val);break;case"delete":L(et.val);break;case"restructure":L(et.formerTarget),w(et.nowTarget);break;default:break}}et.children&&et.children.forEach(function(qt){return W(qt)})};H(x),r[n.id].push(f)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var L5={};function aD(i){return L5[i]||(L5[i]=(0,d.upperFirst)(i)),L5[i]}var NF={defaultShapeType:"defaultType",className:null,getShape:function(r){var t=this,e=t[r]||t[t.defaultShapeType];return e},draw:function(r,t,e){var n=this.getShape(r),a=n.draw(t,e);return n.afterDraw&&n.afterDraw(t,e,a),a},baseUpdate:function(r,t,e){var n=this.getShape(r);n.update&&n.update(t,e),n.afterUpdate&&n.afterUpdate(t,e)},setState:function(r,t,e,n){var a=this.getShape(r);a.setState(t,e,n)},shouldUpdate:function(r){var t=this.getShape(r);return!!t.update},getControlPoints:function(r,t){var e=this.getShape(r);return e.getControlPoints(t)},getAnchorPoints:function(r,t){var e=this.getShape(r);return e.getAnchorPoints(t)}},k5={options:{},draw:function(r,t){return this.drawShape(r,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.options.anchorPoints,e=r.anchorPoints||t;return e}},YC=function(){function i(){}return i.registerFactory=function(r,t){var e=aD(r),n=NF,a=(0,Ft.__assign)((0,Ft.__assign)({},n),t);return i[e]=a,a.className=e,a},i.getFactory=function(r){var t=aD(r);return i[t]},i.registerNode=function(r,t,e){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=iD(t);a=(0,Ft.__assign)((0,Ft.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var u=t.jsx,o=iD(u);a=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},n.getShape("single-node")),o),t)}else{var f=e?n.getShape(e):k5;a=(0,Ft.__assign)((0,Ft.__assign)({},f),t)}return a.type=r,a.itemType="node",n[r]=a,a},i.registerEdge=function(r,t,e){var n=i.Edge,a=e?n.getShape(e):k5,o=(0,Ft.__assign)((0,Ft.__assign)({},a),t);return o.type=r,o.itemType="edge",n[r]=o,o},i.registerCombo=function(r,t,e){var n=i.Combo,a=e?n.getShape(e):k5,o=(0,Ft.__assign)((0,Ft.__assign)({},a),t);return o.type=r,o.itemType="combo",n[r]=o,o},i}(),ac=YC;YC.registerFactory("node",{defaultShapeType:"circle"}),YC.registerFactory("edge",{defaultShapeType:"line"}),YC.registerFactory("combo",{defaultShapeType:"circle"});var R5="bboxCache",D5="bboxCanvasCache",zF=function(){function i(r){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),r);var e=this.get("model"),n=e.id,a=this.get("type");n||(n=(0,d.uniqueId)(a),this.get("model").id=n),this.set("id",n);var o=r.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var u=e.shape||e.type||(a==="edge"?"line":"circle"),f=this.get("shapeFactory");if(f&&f[u]){var m=f[u].options;if(m&&m.stateStyles){var x=this.get("styles")||e.stateStyles;x=(0,d.deepMix)({},m.stateStyles,x),this.set("styles",x)}}}return i.prototype.calculateBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=HC(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.calculateCanvasBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=HC(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.drawInner=function(){var r=this,t=r.get("shapeFactory"),e=r.get("group"),n=r.get("model");e.clear();var a=n.visible;if(a!==void 0&&!a&&r.changeVisibility(a),!!t){r.updatePosition(n);var o=r.getShapeCfg(n),u=o.shape||o.type,f=t.draw(u,o,e);f&&(r.set("keyShape",f),f.set("isKeyShape",!0),f.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",u),this.restoreStates(t,u)}},i.prototype.setOriginStyle=function(r){var t={},e=this.get("group"),n=e.get("children"),a=this.getKeyShape(),o=this;(0,d.each)(n,function(m){var x=m.get("name");if(x)t[x]=o.getShapeStyleByName(x);else{var w=a.get("name"),L=o.getShapeStyleByName();w?t[w]=L:Object.assign(t,L)}});var u=this.getOriginStyle(),f={};r?f=(0,d.deepMix)({},u,t,r.style,{labelCfg:r.labelCfg}):f=(0,d.deepMix)({},u,t),o.set("originStyle",f)},i.prototype.restoreStates=function(r,t){var e=this,n=e.get("states");(0,d.each)(n,function(a){r.setState(t,a,!0,e)})},i.prototype.init=function(){var r=ac.getFactory(this.get("type"));this.set("shapeFactory",r)},i.prototype.get=function(r){return this._cfg[r]},i.prototype.set=function(r,t){(0,d.isPlainObject)(r)?this._cfg=(0,Ft.__assign)((0,Ft.__assign)({},this._cfg),r):this._cfg[r]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(R5,null),this.set(D5,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(r){var t=this.get("group"),e=this.getKeyShape();if(r&&(e=t.find(function(a){return a.get("name")===r})),e){var n={};return(0,d.each)(e.attr(),function(a,o){o!=="img"&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(r){var t=this.get("styles");if(t){var e=r;return e.style=(0,Ft.__assign)((0,Ft.__assign)({},t),r.style),e}return r},i.prototype.getStateStyle=function(r){var t=this.get("styles"),e=t&&t[r];return e},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var r=this,t={};return(0,d.each)(r.getStates(),function(e){t=Object.assign(t,r.getStateStyle(e))}),t},i.prototype.setState=function(r,t){var e=this.get("states"),n=this.get("shapeFactory"),a=r,o=r;(0,d.isString)(t)&&(a=r+":"+t,o=r+":");var u=e;if((0,d.isBoolean)(t)){var f=e.indexOf(o);if(t){if(f>-1)return;e.push(a)}else f>-1&&e.splice(f,1)}else if((0,d.isString)(t)){var m=e.filter(function(L){return L.includes(o)});m.length>0&&this.clearStates(m),u=u.filter(function(L){return!L.includes(o)}),u.push(a),this.set("states",u)}if(n){var x=this.get("model"),w=x.shape||x.type;n.setState(w,r,t,this)}},i.prototype.clearStates=function(r){var t=this,e=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.shape||a.type;r||(r=e),(0,d.isString)(r)&&(r=[r]);var u=e.filter(function(f){return r.indexOf(f)===-1});t.set("states",u),r.forEach(function(f){n.setState(o,f,!1,t)})},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(r){var t=this.getStates();return t.indexOf(r)>=0},i.prototype.refresh=function(){var r=this.get("model");this.updatePosition(r),this.updateShape(),this.afterUpdate(),this.clearCache()},i.prototype.isOnlyMove=function(r){return!1},i.prototype.update=function(r){var t=this.get("model"),e=t.visible,n=r.visible;e!==n&&n!==void 0&&this.changeVisibility(n);var a={x:t.x,y:t.y};r.x=isNaN(r.x)?t.x:r.x,r.y=isNaN(r.y)?t.y:r.y;var o=this.get("styles");if(r.stateStyles){var u=r.stateStyles;(0,d.mix)(o,u),delete r.stateStyles}Object.assign(t,r);var f=this.isOnlyMove(r);f?this.updatePosition(r):((a.x!==r.x||a.y!==r.y)&&this.updatePosition(r),this.updateShape()),this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(){var r=this.get("shapeFactory"),t=this.get("model"),e=t.shape||t.type;if(r.shouldUpdate(e)&&e===this.get("currentShape")){var n=this.getShapeCfg(t);r.baseUpdate(e,n,this)}else this.draw();this.setOriginStyle(t),this.restoreStates(r,e)},i.prototype.updatePosition=function(r){var t=this.get("model"),e=(0,d.isNil)(r.x)?t.x:r.x,n=(0,d.isNil)(r.y)?t.y:r.y,a=this.get("group");(0,d.isNil)(e)||(0,d.isNil)(n)||(a.resetMatrix(),AR(a,{x:e,y:n}),t.x=e,t.y=n,this.clearCache())},i.prototype.getBBox=function(){var r=this.get(R5);return r||(r=this.calculateBBox(),this.set(R5,r)),r},i.prototype.getCanvasBBox=function(){var r=this.get(D5);return r||(r=this.calculateCanvasBBox(),this.set(D5,r)),r},i.prototype.toFront=function(){var r=this.get("group");r.toFront()},i.prototype.toBack=function(){var r=this.get("group");r.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(r){var t=this.get("group");r?t.show():t.hide(),this.set("visible",r)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(r){var t=this.get("group");t&&t.set("capture",r)},i.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),t=this.get("group");r&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),oD=zF,WC={source:"start",target:"end"},fg="Node",M1="Point",GF="Anchor",UF=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},r.prototype.setEnd=function(t,e){var n=WC[t]+M1,a=t+fg,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(e)?(this.set(n,e),this.set(a,null)):(e.addEdge(this),this.set(a,e),this.set(n,null))},r.prototype.getLinkPoint=function(t,e,n){var a=WC[t]+M1,o=t+fg,u=this.get(a);if(!u){var f=this.get(o),m=t+GF,x=this.getPrePoint(t,n),w=e[m];(0,d.isNil)(w)||(u=f.getLinkPointByAnchor(w)),u=u||f.getLinkPoint(x),(0,d.isNil)(u.index)||this.set(t+"AnchorIndex",u.index)}return u},r.prototype.getPrePoint=function(t,e){if(e&&e.length){var n=t==="source"?0:e.length-1;return e[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},r.prototype.getEndPoint=function(t){var e=t+fg,n=WC[t]+M1,a=this.get(e);return a?a.get("model"):this.get(n)},r.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.shape||t.type;return a.getControlPoints(o,{startPoint:e,endPoint:n})},r.prototype.getEndCenter=function(t){var e=t+fg,n=WC[t]+M1,a=this.get(e);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},r.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},r.prototype.getShapeCfg=function(t){var e=this,n=e.get("linkCenter"),a=i.prototype.getShapeCfg.call(this,t);if(n)a.startPoint=e.getEndCenter("source"),a.endPoint=e.getEndCenter("target");else{var o=a.controlPoints||e.getControlPointsByCenter(a);a.startPoint=e.getLinkPoint("source",t,o),a.endPoint=e.getLinkPoint("target",t,o)}return a.sourceNode=e.get("sourceNode"),a.targetNode=e.get("targetNode"),a},r.prototype.getModel=function(){var t=this.get("model"),e=this.get("source"+fg),n=this.get("target"+fg);return e?delete t["source"+fg]:t.source=this.get("start"+M1),n?delete t["target"+fg]:t.target=this.get("end"+M1),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},r.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},r.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},r.prototype.getSource=function(){return this.get("source")},r.prototype.getTarget=function(){return this.get("target")},r.prototype.updatePosition=function(){},r.prototype.update=function(t){var e=this.get("model"),n=e.visible,a=t.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o=this.get("styles");if(t.stateStyles){var u=t.stateStyles;(0,d.mix)(o,u),delete t.stateStyles}Object.assign(e,t),this.updateShape(),this.afterUpdate(),this.clearCache()},r.prototype.destroy=function(){var t=this.get("source"+fg),e=this.get("target"+fg);t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),i.prototype.destroy.call(this)},r}(oD),VF=UF,X_=S(66974),B5="anchorPointsCache",ZF="bboxCache",HF=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getNearestPoint=function(t,e){for(var n=0,a=t[0],o=V_(t[0],e),u=0;u<t.length;u++){var f=t[u],m=V_(f,e);m<o&&(a=f,o=m,n=u)}return a.anchorIndex=n,a},r.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},r.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},r.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if(t==="target"){var a=function(m){return m.getSource()===e};return n.filter(a).map(function(f){return f.getTarget()})}if(t==="source"){var o=function(m){return m.getTarget()===e};return n.filter(o).map(function(f){return f.getSource()})}var u=function(m){return m.getSource()===e?m.getTarget():m.getSource()};return n.map(u)},r.prototype.getLinkPointByAnchor=function(t){var e=this.getAnchorPoints();return e[t]},r.prototype.getLinkPoint=function(t){var e=this.get("keyShape"),n=e.get("type"),a=this.get("type"),o,u,f=this.getBBox();a==="combo"?(o=(f.maxX+f.minX)/2,u=(f.maxY+f.minY)/2):(o=f.centerX,u=f.centerY);var m=this.getAnchorPoints(),x;switch(n){case"circle":x=SR({x:o,y:u,r:f.width/2},t);break;case"ellipse":x=wR({x:o,y:u,rx:f.width/2,ry:f.height/2},t);break;default:x=bR(f,t)}var w=x;return m.length&&(w||(w=t),w=this.getNearestPoint(m,w)),w||(w={x:o,y:u}),w},r.prototype.getAnchorPoints=function(){var t=this.get(B5);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),u=a.shape||a.type,f=e.getAnchorPoints(u,o)||[];(0,gs.default)(f,function(m,x){var w=(0,X_.default)({x:n.minX+m[0]*n.width,y:n.minY+m[1]*n.height},m[2],{index:x});t.push(w)}),this.set(B5,t)}return t},r.prototype.addEdge=function(t){this.get("edges").push(t)},r.prototype.lock=function(){this.set("locked",!0)},r.prototype.unlock=function(){this.set("locked",!1)},r.prototype.hasLocked=function(){return this.get("locked")},r.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},r.prototype.clearCache=function(){this.set(ZF,null),this.set(B5,null)},r.prototype.isOnlyMove=function(t){if(!t)return!1;var e=!(0,qu.default)(t.x),n=!(0,qu.default)(t.y),a=Object.keys(t);return a.length===1&&(e||n)||a.length===2&&e&&n},r}(oD),sD=HF,jF="bboxCache",uD="bboxCanvasCache",F5="sizeCache",XF="anchorPointsCache",YF=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},r.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var a=t,o={r:Math.hypot(n.height,n.width)/2||mi.defaultCombo.size[0]/2,width:n.width||mi.defaultCombo.size[0],height:n.height||mi.defaultCombo.size[1]};a.style=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},e),t.style),o);var u=t.padding||mi.defaultCombo.padding;return(0,vv.default)(u)?(o.r+=u,o.width+=u*2,o.height+=u*2):(o.r+=u[0],o.width+=u[1]+u[3]||u[1]*2,o.height+=u[0]+u[2]||u[0]*2),this.set(F5,o),a}return t},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=HC(t,e);n.x=n.minX,n.y=n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(F5);if(a){var o=t.get("type");o==="circle"?(n.width=a.r*2,n.height=a.r*2):(n.width=a.width,n.height=a.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2}else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n},r.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},r.prototype.getNodes=function(){var t=this;return t.get("nodes")},r.prototype.getCombos=function(){var t=this;return t.get("combos")},r.prototype.addChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.addNode(t);break;case"combo":e.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.addCombo=function(t){var e=this;return e.get("combos").push(t),!0},r.prototype.addNode=function(t){var e=this;return e.get("nodes").push(t),!0},r.prototype.removeChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.removeNode(t);break;case"combo":e.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.removeCombo=function(t){if(!!t){var e=this.getCombos(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.removeNode=function(t){if(!!t){var e=this.getNodes(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.isOnlyMove=function(t){return!1},r.prototype.getBBox=function(){this.set(uD,null);var t=this.calculateCanvasBBox();return t},r.prototype.clearCache=function(){this.set(jF,null),this.set(uD,null),this.set(XF,null)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set(F5,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},r}(sD),WF=YF,KC="node",$C="edge",lD="vedge",QC="combo",KF="default",cD="Mapper",f0="stateStyles",$F=Object.hasOwnProperty,QF=function(){function i(r){this.graph=r,this.destroyed=!1}return i.prototype.addItem=function(r,t){var e=this,n=this.graph,a=r===lD?$C:r,o=n.get(a+"Group")||n.get("group"),u=(0,WR.default)(a),f=null,m=n.get(a+(0,WR.default)(f0))||{},x=n.get(KF+u);t[f0]&&(m=t[f0]);var w=n.get(a+cD);if(w){var L=w(t);L[f0]&&(m=L[f0],delete L[f0]),t=(0,Vf.default)({},x,t,L)}else x&&(0,gs.default)(x,function(qt,ie){$F.call(t,ie)||((0,YR.default)(qt)?t[ie]=(0,XR.default)(qt):t[ie]=x[ie])});if(t.shape&&!t.type&&console.warn("shape \u5B57\u6BB5\u5373\u5C06\u88AB\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 type \u4EE3\u66FF"),n.emit("beforeadditem",{type:r,model:t}),r===$C||r===lD){var H=void 0,W=void 0;if(H=t.source,W=t.target,H&&(0,Zo.default)(H)&&(H=n.findById(H)),W&&(0,Zo.default)(W)&&(W=n.findById(W)),!H||!W){console.warn("The source or target node of edge "+t.id+" does not exist!");return}H.getType&&H.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(H)),W.getType&&W.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(W)),f=new VF({model:t,source:H,target:W,styles:m,linkCenter:n.get("linkCenter"),group:o.addGroup()})}else if(r===KC)f=new sD({model:t,styles:m,group:o.addGroup()});else if(r===QC){var et=t.children,ht=O5(et,n);t.x=ht.x||t.x||Math.random()*100,t.y=ht.y||t.y||Math.random()*100;var bt=o.addGroup();bt.setZIndex(t.depth),f=new WF({model:t,styles:m,bbox:ht,group:bt});var xt=f.getModel();(et||[]).forEach(function(qt){var ie=n.findById(qt.id);f.addChild(ie),qt.depth=xt.depth+2}),t.collapsed&&setTimeout(function(){n.collapseCombo(f),e.updateCombo(f,[])},250)}if(f)return n.get(r+"s").push(f),n.get("itemMap")[f.get("id")]=f,n.emit("afteradditem",{item:f,model:t}),f},i.prototype.updateItem=function(r,t){var e=this.graph;if((0,Zo.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n="";r.getType&&(n=r.getType());var a=e.get(n+cD),o=r.getModel();if(a){var u=(0,Vf.default)({},o,t),f=a(u),m=(0,Vf.default)({},o,f,t);f[f0]&&(r.set("styles",m[f0]),delete m[f0]),(0,gs.default)(m,function(H,W){t[W]=H})}else(0,gs.default)(t,function(H,W){o[W]&&(0,YR.default)(H)&&!(0,Rs.default)(H)&&(t[W]=(0,Ft.__assign)((0,Ft.__assign)({},o[W]),t[W]))});if(e.emit("beforeupdateitem",{item:r,cfg:t}),n===$C){if(t.source){var x=t.source;(0,Zo.default)(x)&&(x=e.findById(x)),r.setSource(x)}if(t.target){var w=t.target;(0,Zo.default)(w)&&(w=e.findById(w)),r.setTarget(w)}}if(r.update(t),n===KC||n===QC){var L=r.getEdges();(0,gs.default)(L,function(H){H.refresh()})}e.emit("afterupdateitem",{item:r,cfg:t})}},i.prototype.updateCombo=function(r,t){var e=this.graph;if((0,Zo.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=O5(t,e);r.set("bbox",n),r.update({x:n.x,y:n.y});for(var a=r.getEdges()||[],o=a.length,u=0;u<o;u++){var f=a[u];f==null||f.refresh()}}},i.prototype.collapseCombo=function(r){var t=this.graph;(0,Zo.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.hideItem(n)}),e.combos.forEach(function(n){t.hideItem(n)})},i.prototype.expandCombo=function(r){var t=this.graph;(0,Zo.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.showItem(n)}),e.combos.forEach(function(n){n.getModel().collapsed?n.show():t.showItem(n)})},i.prototype.removeItem=function(r){var t=this,e=this.graph;if((0,Zo.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=(0,XR.default)(r.getModel());e.emit("beforeremoveitem",{item:n});var a="";r.getType&&(a=r.getType());var o=e.get(a+"s"),u=o.indexOf(r);if(u>-1&&o.splice(u,1),a===$C){var f=e.get("v"+a+"s"),m=f.indexOf(r);m>-1&&f.splice(m,1)}var x=r.get("id"),w=e.get("itemMap");delete w[x];var L=e.get("comboTrees"),H=r.get("id");if(a===KC){var W=r.getModel().comboId;if(L){var et=L,ht=!1;L.forEach(function(ze){ht||_h(ze,function(rr){if(rr.id===H&&et){var sr=et.indexOf(rr);return et.splice(sr,1),ht=!0,!1}return et=rr.children,!0})})}for(var bt=r.getEdges(),xt=bt.length-1;xt>=0;xt--)e.removeItem(bt[xt],!1);W&&e.updateCombo(W)}else if(a===QC){var qt=r.getModel().parentId,ie,_e=!1;(L||[]).forEach(function(rr){_e||_h(rr,function(sr){return sr.id===H?(ie=sr,_e=!0,!1):!0})}),ie.removed=!0,ie&&ie.children&&ie.children.forEach(function(rr){t.removeItem(rr.id)});for(var bt=r.getEdges(),xt=bt.length;xt>=0;xt--)e.removeItem(bt[xt],!1);qt&&e.updateCombo(qt)}r.destroy(),e.emit("afterremoveitem",{item:n})}},i.prototype.setItemState=function(r,t,e){var n=this.graph,a=t;(0,Zo.default)(e)&&(a=t+":"+e),!(r.hasState(a)===e||(0,Zo.default)(e)&&r.hasState(a))&&(n.emit("beforeitemstatechange",{item:r,state:a,enabled:e}),r.setState(t,e),n.autoPaint(),n.emit("afteritemstatechange",{item:r,state:a,enabled:e}))},i.prototype.priorityState=function(r,t){var e=this.graph,n=r;(0,Zo.default)(r)&&(n=e.findById(r)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(r,t){var e=this.graph;(0,Zo.default)(r)&&(r=e.findById(r)),e.emit("beforeitemstatesclear",{item:r,states:t}),r.clearStates(t),e.emit("afteritemstatesclear",{item:r,states:t})},i.prototype.refreshItem=function(r){var t=this.graph;(0,Zo.default)(r)&&(r=t.findById(r)),t.emit("beforeitemrefresh",{item:r}),r.refresh(),t.emit("afteritemrefresh",{item:r})},i.prototype.addCombos=function(r,t){var e=this,n=this.graph;(r||[]).forEach(function(o){Cd(o,function(u){var f;return t.forEach(function(m){m.id===u.id&&(m.children=u.children,m.depth=u.depth,f=m)}),f&&e.addItem("combo",f),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(r,t){var e=this,n=this.graph;if((0,Zo.default)(r)&&(r=n.findById(r)),!r){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:r,visible:t}),r.changeVisibility(t),r.getType&&r.getType()===KC){var a=r.getEdges();(0,gs.default)(a,function(x){t&&!(x.get("source").isVisible()&&x.get("target").isVisible())||e.changeItemVisibility(x,t)})}else if(r.getType&&r.getType()===QC){var o=n.get("comboTrees"),u=r.get("id"),f=[],m=!1;(o||[]).forEach(function(w){m||!w.children||w.children.length===0||_h(w,function(L){return L.id===u?(f=L.children,m=!0,!1):!0})}),f.forEach(function(w){var L=n.findById(w.id);e.changeItemVisibility(L,t)});var a=r.getEdges();(0,gs.default)(a,function(w){t&&!(w.get("source").isVisible()&&w.get("target").isVisible())||e.changeItemVisibility(w,t)})}return n.emit("afteritemvisibilitychange",{item:r,visible:t}),r},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),qF=QF,Ad=function(){function i(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return i.prototype.init=function(r){var t=this;t.nodes=r.nodes||[],t.edges=r.edges||[],t.combos=r.combos||[]},i.prototype.execute=function(){},i.prototype.layout=function(r){var t=this;t.init(r),t.execute()},i.prototype.getDefaultCfg=function(){return{}},i.prototype.updateCfg=function(r){var t=this;(0,X_.default)(t,r)},i.prototype.destroy=function(){var r=this;r.positions=null,r.nodes=null,r.edges=null,r.destroyed=!0},i}(),fD={registerLayout:function(r,t,e){if(e===void 0&&(e=Ad),!t)throw new Error("please specify handler for this layout: "+r);var n=function(a){(0,Ft.__extends)(o,a);function o(u){var f=a.call(this)||this,m=f,x={},w=m.getDefaultCfg();return(0,X_.default)(x,w,t,u),(0,gs.default)(x,function(L,H){m[H]=L}),f}return o}(e);fD[r]=n}},hD=fD;function JF(i,r,t,e){i.forEach(function(n,a){i[a].children=[],i[a].parent=[]}),e?r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].parent.push(i[a].id)}):r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].children.push(i[a].id)})}function t6(i,r,t){for(var e=t.length,n=0;n<e;n++)if(i.id===t[n].source&&r.id===t[n].target||r.id===t[n].source&&i.id===t[n].target)return!0;return!1}function e6(i,r){return i.degree<r.degree?-1:i.degree>r.degree?1:0}var r6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.radius=null,t.startRadius=null,t.endRadius=null,t.startAngle=0,t.endAngle=2*Math.PI,t.clockwise=!0,t.divisions=1,t.ordering=null,t.angleRatio=1,t.nodes=[],t.edges=[],t.nodeMap={},t.degrees=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var u=t.radius,f=t.startRadius,m=t.endRadius,x=t.divisions,w=t.startAngle,L=t.endAngle,H=(L-w)/a,W={};e.forEach(function(qe,wr){W[qe.id]=wr}),t.nodeMap=W;var et=zC(e.length,W,n);t.degrees=et,!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),!u&&!f&&!m?u=t.height>t.width?t.width/2:t.height/2:!f&&m?f=m:f&&!m&&(m=f);var ht=t.angleRatio,bt=H*ht;t.astep=bt;var xt=t.ordering,qt=[];xt==="topology"?qt=t.topologyOrdering():xt==="topology-directed"?qt=t.topologyOrdering(!0):xt==="degree"?qt=t.degreeOrdering():qt=e;for(var ie=t.clockwise,_e=Math.ceil(a/x),ze=0;ze<a;++ze){var rr=u;!rr&&f!==null&&m!==null&&(rr=f+ze*(m-f)/(a-1)),rr||(rr=10+ze*100/(a-1));var sr=w+ze%_e*bt+2*Math.PI/x*Math.floor(ze/_e);ie||(sr=L-ze%_e*bt-2*Math.PI/x*Math.floor(ze/_e)),qt[ze].x=o[0]+Math.cos(sr)*rr,qt[ze].y=o[1]+Math.sin(sr)*rr,qt[ze].weight=et[ze]}}},r.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var e=this,n=e.degrees,a=e.edges,o=e.nodes,u=(0,d.clone)(o),f=e.nodeMap,m=[u[0]],x=[o[0]],w=[],L=o.length;w[0]=!0,JF(u,a,f,t);var H=0;return u.forEach(function(W,et){if(et!==0)if((et===L-1||n[et]!==n[et+1]||t6(m[H],W,a))&&w[et]!==!0)m.push(W),x.push(o[f[W.id]]),w[et]=!0,H++;else{for(var ht=m[H].children,bt=!1,xt=0;xt<ht.length;xt++){var qt=f[ht[xt]];if(n[qt]===n[et]&&w[qt]!==!0){m.push(u[qt]),x.push(o[f[u[qt].id]]),w[qt]=!0,bt=!0;break}}for(var ie=0;!bt&&(w[ie]||(m.push(u[ie]),x.push(o[f[u[ie].id]]),w[ie]=!0,bt=!0),ie++,ie!==L););}}),x},r.prototype.degreeOrdering=function(){var t=this,e=t.nodes,n=[],a=t.degrees;return e.forEach(function(o,u){o.degree=a[u],n.push(o)}),n.sort(e6),n},r}(Ad),n6=r6,i6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeSize=30,t.minNodeSpacing=10,t.preventOverlap=!1,t.equidistant=!1,t.startAngle=3/2*Math.PI,t.clockwise=!0,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var u=[],f;(0,Rs.default)(t.nodeSize)?f=Math.max(t.nodeSize[0],t.nodeSize[1]):f=t.nodeSize,e.forEach(function(sr){u.push(sr);var qe=f;(0,Rs.default)(sr.size)?qe=Math.max(sr.size[0],sr.size[1]):(0,d.isNumber)(sr.size)&&(qe=sr.size),f=Math.max(f,qe)}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;var m={},x={};if(u.forEach(function(sr,qe){m[sr.id]=sr,x[sr.id]=qe}),(t.sortBy==="degree"||!(0,Zo.default)(t.sortBy)||u[0][t.sortBy]===void 0)&&(t.sortBy="degree",!(0,d.isNumber)(e[0].degree))){var w=zC(e.length,x,n);u.forEach(function(sr,qe){sr.degree=w[qe]})}u.sort(function(sr,qe){return qe[t.sortBy]-sr[t.sortBy]}),t.maxValueNode=u[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var L=[[]],H=L[0];u.forEach(function(sr){if(H.length>0){var qe=Math.abs(H[0][t.sortBy]-sr[t.sortBy]);t.maxLevelDiff&&qe>=t.maxLevelDiff&&(H=[],L.push(H))}H.push(sr)});var W=f+t.minNodeSpacing;if(!t.preventOverlap){var et=L.length>0&&L[0].length>1,ht=Math.min(t.width,t.height)/2-W,bt=ht/(L.length+(et?1:0));W=Math.min(W,bt)}var xt=0;if(L.forEach(function(sr){var qe=t.sweep;qe===void 0&&(qe=2*Math.PI-2*Math.PI/sr.length);var wr=sr.dTheta=qe/Math.max(1,sr.length-1);if(sr.length>1&&t.preventOverlap){var Vr=Math.cos(wr)-Math.cos(0),Br=Math.sin(wr)-Math.sin(0),Tn=Math.sqrt(W*W/(Vr*Vr+Br*Br));xt=Math.max(Tn,xt)}sr.r=xt,xt+=W}),t.equidistant){for(var qt=0,ie=0,_e=0;_e<L.length;_e++){var ze=L[_e],rr=ze.r-ie;qt=Math.max(qt,rr)}ie=0,L.forEach(function(sr,qe){qe===0&&(ie=sr.r),sr.r=ie,ie+=qt})}L.forEach(function(sr){var qe=sr.dTheta,wr=sr.r;sr.forEach(function(Vr,Br){var Tn=t.startAngle+(t.clockwise?1:-1)*qe*Br;Vr.x=o[0]+wr*Math.cos(Tn),Vr.y=o[1]+wr*Math.sin(Tn)})})}},r}(Ad),a6=i6,o6=S(70681),pD=S.n(o6),s6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.rankdir="TB",t.nodesep=50,t.ranksep=50,t.controlPoints=!1,t.sortByCombo=!1,t}return r.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.nodeSize,a=t.rankdir;if(!!e){var o=t.edges||[],u=new(pD()).graphlib.Graph,f;n?(0,Rs.default)(n)?f=function(){return n}:f=function(){return[n,n]}:f=function(H){return H.size?(0,Rs.default)(H.size)?H.size:[H.size,H.size]:[40,40]};var m=qC(t.nodesepFunc,t.nodesep,50),x=qC(t.ranksepFunc,t.ranksep,50);(a==="LR"||a==="RL")&&(m=qC(t.ranksepFunc,t.ranksep,50),x=qC(t.nodesepFunc,t.nodesep,50)),u.setDefaultEdgeLabel(function(){return{}}),u.setGraph(t),e.forEach(function(L){var H=f(L),W=x(L),et=m(L),ht=H[0]+2*et,bt=H[1]+2*W;u.setNode(L.id,{width:ht,height:bt})}),o.forEach(function(L){u.setEdge(L.source,L.target,{weight:L.weight||1})}),pD().layout(u);var w;u.nodes().forEach(function(L){w=u.node(L);var H=e.findIndex(function(W){return W.id===L});e[H].x=w.x,e[H].y=w.y}),u.edges().forEach(function(L){w=u.edge(L);var H=o.findIndex(function(W){return W.source===L.v&&W.target===L.w});t.controlPoints&&o[H].type!=="loop"&&o[H].shape!=="loop"&&(o[H].controlPoints=w.points.slice(1,w.points.length-1))}),t.sortByCombo&&t.sortLevel("comboId")}},r.prototype.sortLevel=function(t){var e=this,n=e.nodes,a={};n.forEach(function(o){a[o.y]||(a[o.y]={y:o.y,nodes:[]}),a[o.y].nodes.push(o)}),Object.keys(a).forEach(function(o){var u=a[o].nodes,f=u.length,m={};if(u.forEach(function(et){var ht=et.comboId;m[ht]||(m[ht]={x:0,y:0,count:0}),m[ht].x+=et.x,m[ht].y+=et.y,m[ht].count++}),Object.keys(m).forEach(function(et){m[et].x/=m[et].count,m[et].y/=m[et].count}),f!==1){var x=u.sort(function(et,ht){return et.x-ht.x}),w=x[0].x,L=x[f-1].x,H=(L-w)/(f-1),W=u.sort(function(et,ht){var bt=et[t]||"undefined",xt=ht[t]||"undefined";return bt<xt?-1:bt>xt?1:0});W.forEach(function(et,ht){et.x=w+ht*H})}})},r}(Ad),u6=s6;function qC(i,r,t){var e;return i?e=i:(0,d.isNumber)(r)?e=function(){return r}:e=function(){return t},e}function l6(i){const r=+this._x.call(null,i),t=+this._y.call(null,i);return dD(this.cover(r,t),r,t,i)}function dD(i,r,t,e){if(isNaN(r)||isNaN(t))return i;var n,a=i._root,o={data:e},u=i._x0,f=i._y0,m=i._x1,x=i._y1,w,L,H,W,et,ht,bt,xt;if(!a)return i._root=o,i;for(;a.length;)if((et=r>=(w=(u+m)/2))?u=w:m=w,(ht=t>=(L=(f+x)/2))?f=L:x=L,n=a,!(a=a[bt=ht<<1|et]))return n[bt]=o,i;if(H=+i._x.call(null,a.data),W=+i._y.call(null,a.data),r===H&&t===W)return o.next=a,n?n[bt]=o:i._root=o,i;do n=n?n[bt]=new Array(4):i._root=new Array(4),(et=r>=(w=(u+m)/2))?u=w:m=w,(ht=t>=(L=(f+x)/2))?f=L:x=L;while((bt=ht<<1|et)==(xt=(W>=L)<<1|H>=w));return n[xt]=a,n[bt]=o,i}function c6(i){var r,t,e=i.length,n,a,o=new Array(e),u=new Array(e),f=Infinity,m=Infinity,x=-Infinity,w=-Infinity;for(t=0;t<e;++t)isNaN(n=+this._x.call(null,r=i[t]))||isNaN(a=+this._y.call(null,r))||(o[t]=n,u[t]=a,n<f&&(f=n),n>x&&(x=n),a<m&&(m=a),a>w&&(w=a));if(f>x||m>w)return this;for(this.cover(f,m).cover(x,w),t=0;t<e;++t)dD(this,o[t],u[t],i[t]);return this}function f6(i,r){if(isNaN(i=+i)||isNaN(r=+r))return this;var t=this._x0,e=this._y0,n=this._x1,a=this._y1;if(isNaN(t))n=(t=Math.floor(i))+1,a=(e=Math.floor(r))+1;else{for(var o=n-t||1,u=this._root,f,m;t>i||i>=n||e>r||r>=a;)switch(m=(r<e)<<1|i<t,f=new Array(4),f[m]=u,u=f,o*=2,m){case 0:n=t+o,a=e+o;break;case 1:t=n-o,a=e+o;break;case 2:n=t+o,e=a-o;break;case 3:t=n-o,e=a-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=e,this._x1=n,this._y1=a,this}function h6(){var i=[];return this.visit(function(r){if(!r.length)do i.push(r.data);while(r=r.next)}),i}function p6(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function $h(i,r,t,e,n){this.node=i,this.x0=r,this.y0=t,this.x1=e,this.y1=n}function d6(i,r,t){var e,n=this._x0,a=this._y0,o,u,f,m,x=this._x1,w=this._y1,L=[],H=this._root,W,et;for(H&&L.push(new $h(H,n,a,x,w)),t==null?t=Infinity:(n=i-t,a=r-t,x=i+t,w=r+t,t*=t);W=L.pop();)if(!(!(H=W.node)||(o=W.x0)>x||(u=W.y0)>w||(f=W.x1)<n||(m=W.y1)<a))if(H.length){var ht=(o+f)/2,bt=(u+m)/2;L.push(new $h(H[3],ht,bt,f,m),new $h(H[2],o,bt,ht,m),new $h(H[1],ht,u,f,bt),new $h(H[0],o,u,ht,bt)),(et=(r>=bt)<<1|i>=ht)&&(W=L[L.length-1],L[L.length-1]=L[L.length-1-et],L[L.length-1-et]=W)}else{var xt=i-+this._x.call(null,H.data),qt=r-+this._y.call(null,H.data),ie=xt*xt+qt*qt;if(ie<t){var _e=Math.sqrt(t=ie);n=i-_e,a=r-_e,x=i+_e,w=r+_e,e=H.data}}return e}function v6(i){if(isNaN(x=+this._x.call(null,i))||isNaN(w=+this._y.call(null,i)))return this;var r,t=this._root,e,n,a,o=this._x0,u=this._y0,f=this._x1,m=this._y1,x,w,L,H,W,et,ht,bt;if(!t)return this;if(t.length)for(;;){if((W=x>=(L=(o+f)/2))?o=L:f=L,(et=w>=(H=(u+m)/2))?u=H:m=H,r=t,!(t=t[ht=et<<1|W]))return this;if(!t.length)break;(r[ht+1&3]||r[ht+2&3]||r[ht+3&3])&&(e=r,bt=ht)}for(;t.data!==i;)if(n=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,n?(a?n.next=a:delete n.next,this):r?(a?r[ht]=a:delete r[ht],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(e?e[bt]=t:this._root=t),this):(this._root=a,this)}function g6(i){for(var r=0,t=i.length;r<t;++r)this.remove(i[r]);return this}function m6(){return this._root}function y6(){var i=0;return this.visit(function(r){if(!r.length)do++i;while(r=r.next)}),i}function x6(i){var r=[],t,e=this._root,n,a,o,u,f;for(e&&r.push(new $h(e,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!i(e=t.node,a=t.x0,o=t.y0,u=t.x1,f=t.y1)&&e.length){var m=(a+u)/2,x=(o+f)/2;(n=e[3])&&r.push(new $h(n,m,x,u,f)),(n=e[2])&&r.push(new $h(n,a,x,m,f)),(n=e[1])&&r.push(new $h(n,m,o,u,x)),(n=e[0])&&r.push(new $h(n,a,o,m,x))}return this}function _6(i){var r=[],t=[],e;for(this._root&&r.push(new $h(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var n=e.node;if(n.length){var a,o=e.x0,u=e.y0,f=e.x1,m=e.y1,x=(o+f)/2,w=(u+m)/2;(a=n[0])&&r.push(new $h(a,o,u,x,w)),(a=n[1])&&r.push(new $h(a,x,u,f,w)),(a=n[2])&&r.push(new $h(a,o,w,x,m)),(a=n[3])&&r.push(new $h(a,x,w,f,m))}t.push(e)}for(;e=t.pop();)i(e.node,e.x0,e.y0,e.x1,e.y1);return this}function b6(i){return i[0]}function S6(i){return arguments.length?(this._x=i,this):this._x}function w6(i){return i[1]}function E6(i){return arguments.length?(this._y=i,this):this._y}function N5(i,r,t){var e=new z5(r==null?b6:r,t==null?w6:t,NaN,NaN,NaN,NaN);return i==null?e:e.addAll(i)}function z5(i,r,t,e,n,a){this._x=i,this._y=r,this._x0=t,this._y0=e,this._x1=n,this._y1=a,this._root=void 0}function vD(i){for(var r={data:i.data},t=r;i=i.next;)t=t.next={data:i.data};return r}var Qh=N5.prototype=z5.prototype;Qh.copy=function(){var i=new z5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,e;if(!r)return i;if(!r.length)return i._root=vD(r),i;for(t=[{source:r,target:i._root=new Array(4)}];r=t.pop();)for(var n=0;n<4;++n)(e=r.source[n])&&(e.length?t.push({source:e,target:r.target[n]=new Array(4)}):r.target[n]=vD(e));return i},Qh.add=l6,Qh.addAll=c6,Qh.cover=f6,Qh.data=h6,Qh.extent=p6,Qh.find=d6,Qh.remove=v6,Qh.removeAll=g6,Qh.root=m6,Qh.size=y6,Qh.visit=x6,Qh.visitAfter=_6,Qh.x=S6,Qh.y=E6;function qh(i){return function(){return i}}function q0(i){return(i()-.5)*1e-6}var C6={value:function(){}};function gD(){for(var i=0,r=arguments.length,t={},e;i<r;++i){if(!(e=arguments[i]+"")||e in t||/[\s.]/.test(e))throw new Error("illegal type: "+e);t[e]=[]}return new JC(t)}function JC(i){this._=i}function A6(i,r){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}JC.prototype=gD.prototype={constructor:JC,on:function(r,t){var e=this._,n=A6(r+"",e),a,o=-1,u=n.length;if(arguments.length<2){for(;++o<u;)if((a=(r=n[o]).type)&&(a=M6(e[a],r.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<u;)if(a=(r=n[o]).type)e[a]=mD(e[a],r.name,t);else if(t==null)for(a in e)e[a]=mD(e[a],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new JC(r)},call:function(r,t){if((a=arguments.length-2)>0)for(var e=new Array(a),n=0,a,o;n<a;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,a=o.length;n<a;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],a=0,o=n.length;a<o;++a)n[a].value.apply(t,e)}};function M6(i,r){for(var t=0,e=i.length,n;t<e;++t)if((n=i[t]).name===r)return n.value}function mD(i,r,t){for(var e=0,n=i.length;e<n;++e)if(i[e].name===r){i[e]=C6,i=i.slice(0,e).concat(i.slice(e+1));break}return t!=null&&i.push({name:r,value:t}),i}var T6=gD,P6=S(35374),I6=1664525,O6=1013904223,yD=4294967296;function L6(){var i=1;return function(){return(i=(I6*i+O6)%yD)/yD}}function k6(i){return i.x}function R6(i){return i.y}var D6=10,B6=Math.PI*(3-Math.sqrt(5));function xD(i){var r,t=1,e=.001,n=1-Math.pow(e,1/300),a=0,o=.6,u=new Map,f=(0,P6.HT)(w),m=T6("tick","end"),x=L6();i==null&&(i=[]);function w(){L(),m.call("tick",r),t<e&&(f.stop(),m.call("end",r))}function L(et){var ht,bt=i.length,xt;et===void 0&&(et=1);for(var qt=0;qt<et;++qt)for(t+=(a-t)*n,u.forEach(function(ie){ie(t)}),ht=0;ht<bt;++ht)xt=i[ht],xt.fx==null?xt.x+=xt.vx*=o:(xt.x=xt.fx,xt.vx=0),xt.fy==null?xt.y+=xt.vy*=o:(xt.y=xt.fy,xt.vy=0);return r}function H(){for(var et=0,ht=i.length,bt;et<ht;++et){if(bt=i[et],bt.index=et,bt.fx!=null&&(bt.x=bt.fx),bt.fy!=null&&(bt.y=bt.fy),isNaN(bt.x)||isNaN(bt.y)){var xt=D6*Math.sqrt(.5+et),qt=et*B6;bt.x=xt*Math.cos(qt),bt.y=xt*Math.sin(qt)}(isNaN(bt.vx)||isNaN(bt.vy))&&(bt.vx=bt.vy=0)}}function W(et){return et.initialize&&et.initialize(i,x),et}return H(),r={tick:L,restart:function(){return f.restart(w),r},stop:function(){return f.stop(),r},nodes:function(ht){return arguments.length?(i=ht,H(),u.forEach(W),r):i},alpha:function(ht){return arguments.length?(t=+ht,r):t},alphaMin:function(ht){return arguments.length?(e=+ht,r):e},alphaDecay:function(ht){return arguments.length?(n=+ht,r):+n},alphaTarget:function(ht){return arguments.length?(a=+ht,r):a},velocityDecay:function(ht){return arguments.length?(o=1-ht,r):1-o},randomSource:function(ht){return arguments.length?(x=ht,u.forEach(W),r):x},force:function(ht,bt){return arguments.length>1?(bt==null?u.delete(ht):u.set(ht,W(bt)),r):u.get(ht)},find:function(ht,bt,xt){var qt=0,ie=i.length,_e,ze,rr,sr,qe;for(xt==null?xt=Infinity:xt*=xt,qt=0;qt<ie;++qt)sr=i[qt],_e=ht-sr.x,ze=bt-sr.y,rr=_e*_e+ze*ze,rr<xt&&(qe=sr,xt=rr);return qe},on:function(ht,bt){return arguments.length>1?(m.on(ht,bt),r):m.on(ht)}}}function _D(){var i,r,t,e,n=qh(-30),a,o=1,u=Infinity,f=.81;function m(H){var W,et=i.length,ht=N5(i,k6,R6).visitAfter(w);for(e=H,W=0;W<et;++W)r=i[W],ht.visit(L)}function x(){if(!!i){var H,W=i.length,et;for(a=new Array(W),H=0;H<W;++H)et=i[H],a[et.index]=+n(et,H,i)}}function w(H){var W=0,et,ht,bt=0,xt,qt,ie;if(H.length){for(xt=qt=ie=0;ie<4;++ie)(et=H[ie])&&(ht=Math.abs(et.value))&&(W+=et.value,bt+=ht,xt+=ht*et.x,qt+=ht*et.y);H.x=xt/bt,H.y=qt/bt}else{et=H,et.x=et.data.x,et.y=et.data.y;do W+=a[et.data.index];while(et=et.next)}H.value=W}function L(H,W,et,ht){if(!H.value)return!0;var bt=H.x-r.x,xt=H.y-r.y,qt=ht-W,ie=bt*bt+xt*xt;if(qt*qt/f<ie)return ie<u&&(bt===0&&(bt=q0(t),ie+=bt*bt),xt===0&&(xt=q0(t),ie+=xt*xt),ie<o&&(ie=Math.sqrt(o*ie)),r.vx+=bt*H.value*e/ie,r.vy+=xt*H.value*e/ie),!0;if(H.length||ie>=u)return;(H.data!==r||H.next)&&(bt===0&&(bt=q0(t),ie+=bt*bt),xt===0&&(xt=q0(t),ie+=xt*xt),ie<o&&(ie=Math.sqrt(o*ie)));do H.data!==r&&(qt=a[H.data.index]*e/ie,r.vx+=bt*qt,r.vy+=xt*qt);while(H=H.next)}return m.initialize=function(H,W){i=H,t=W,x()},m.strength=function(H){return arguments.length?(n=typeof H=="function"?H:qh(+H),x(),m):n},m.distanceMin=function(H){return arguments.length?(o=H*H,m):Math.sqrt(o)},m.distanceMax=function(H){return arguments.length?(u=H*H,m):Math.sqrt(u)},m.theta=function(H){return arguments.length?(f=H*H,m):Math.sqrt(f)},m}function F6(i,r){var t,e=1;i==null&&(i=0),r==null&&(r=0);function n(){var a,o=t.length,u,f=0,m=0;for(a=0;a<o;++a)u=t[a],f+=u.x,m+=u.y;for(f=(f/o-i)*e,m=(m/o-r)*e,a=0;a<o;++a)u=t[a],u.x-=f,u.y-=m}return n.initialize=function(a){t=a},n.x=function(a){return arguments.length?(i=+a,n):i},n.y=function(a){return arguments.length?(r=+a,n):r},n.strength=function(a){return arguments.length?(e=+a,n):e},n}function N6(i){return i.index}function bD(i,r){var t=i.get(r);if(!t)throw new Error("node not found: "+r);return t}function SD(i){var r=N6,t=w,e,n=qh(30),a,o,u,f,m,x=1;i==null&&(i=[]);function w(ht){return 1/Math.min(u[ht.source.index],u[ht.target.index])}function L(ht){for(var bt=0,xt=i.length;bt<x;++bt)for(var qt=0,ie,_e,ze,rr,sr,qe,wr;qt<xt;++qt)ie=i[qt],_e=ie.source,ze=ie.target,rr=ze.x+ze.vx-_e.x-_e.vx||q0(m),sr=ze.y+ze.vy-_e.y-_e.vy||q0(m),qe=Math.sqrt(rr*rr+sr*sr),qe=(qe-a[qt])/qe*ht*e[qt],rr*=qe,sr*=qe,ze.vx-=rr*(wr=f[qt]),ze.vy-=sr*wr,_e.vx+=rr*(wr=1-wr),_e.vy+=sr*wr}function H(){if(!!o){var ht,bt=o.length,xt=i.length,qt=new Map(o.map(function(_e,ze){return[r(_e,ze,o),_e]})),ie;for(ht=0,u=new Array(bt);ht<xt;++ht)ie=i[ht],ie.index=ht,typeof ie.source!="object"&&(ie.source=bD(qt,ie.source)),typeof ie.target!="object"&&(ie.target=bD(qt,ie.target)),u[ie.source.index]=(u[ie.source.index]||0)+1,u[ie.target.index]=(u[ie.target.index]||0)+1;for(ht=0,f=new Array(xt);ht<xt;++ht)ie=i[ht],f[ht]=u[ie.source.index]/(u[ie.source.index]+u[ie.target.index]);e=new Array(xt),W(),a=new Array(xt),et()}}function W(){if(!!o)for(var ht=0,bt=i.length;ht<bt;++ht)e[ht]=+t(i[ht],ht,i)}function et(){if(!!o)for(var ht=0,bt=i.length;ht<bt;++ht)a[ht]=+n(i[ht],ht,i)}return L.initialize=function(ht,bt){o=ht,m=bt,H()},L.links=function(ht){return arguments.length?(i=ht,H(),L):i},L.id=function(ht){return arguments.length?(r=ht,L):r},L.iterations=function(ht){return arguments.length?(x=+ht,L):x},L.strength=function(ht){return arguments.length?(t=typeof ht=="function"?ht:qh(+ht),W(),L):t},L.distance=function(ht){return arguments.length?(n=typeof ht=="function"?ht:qh(+ht),et(),L):n},L}function z6(i){return i.x+i.vx}function G6(i){return i.y+i.vy}function wD(i){var r,t,e,n=1,a=1;typeof i!="function"&&(i=qh(i==null?1:+i));function o(){for(var m,x=r.length,w,L,H,W,et,ht,bt=0;bt<a;++bt)for(w=N5(r,z6,G6).visitAfter(u),m=0;m<x;++m)L=r[m],et=t[L.index],ht=et*et,H=L.x+L.vx,W=L.y+L.vy,w.visit(xt);function xt(qt,ie,_e,ze,rr){var sr=qt.data,qe=qt.r,wr=et+qe;if(sr){if(sr.index>L.index){var Vr=H-sr.x-sr.vx,Br=W-sr.y-sr.vy,Tn=Vr*Vr+Br*Br;Tn<wr*wr&&(Vr===0&&(Vr=q0(e),Tn+=Vr*Vr),Br===0&&(Br=q0(e),Tn+=Br*Br),Tn=(wr-(Tn=Math.sqrt(Tn)))/Tn*n,L.vx+=(Vr*=Tn)*(wr=(qe*=qe)/(ht+qe)),L.vy+=(Br*=Tn)*wr,sr.vx-=Vr*(wr=1-wr),sr.vy-=Br*wr)}return}return ie>H+wr||ze<H-wr||_e>W+wr||rr<W-wr}}function u(m){if(m.data)return m.r=t[m.data.index];for(var x=m.r=0;x<4;++x)m[x]&&m[x].r>m.r&&(m.r=m[x].r)}function f(){if(!!r){var m,x=r.length,w;for(t=new Array(x),m=0;m<x;++m)w=r[m],t[w.index]=+i(w,m,r)}}return o.initialize=function(m,x){r=m,e=x,f()},o.iterations=function(m){return arguments.length?(a=+m,o):a},o.strength=function(m){return arguments.length?(n=+m,o):n},o.radius=function(m){return arguments.length?(i=typeof m=="function"?m:qh(+m),f(),o):i},o}function U6(i){var r=qh(.1),t,e,n;typeof i!="function"&&(i=qh(i==null?0:+i));function a(u){for(var f=0,m=t.length,x;f<m;++f)x=t[f],x.vx+=(n[f]-x.x)*e[f]*u}function o(){if(!!t){var u,f=t.length;for(e=new Array(f),n=new Array(f),u=0;u<f;++u)e[u]=isNaN(n[u]=+i(t[u],u,t))?0:+r(t[u],u,t)}}return a.initialize=function(u){t=u,o()},a.strength=function(u){return arguments.length?(r=typeof u=="function"?u:qh(+u),o(),a):r},a.x=function(u){return arguments.length?(i=typeof u=="function"?u:qh(+u),o(),a):i},a}function V6(i){var r=qh(.1),t,e,n;typeof i!="function"&&(i=qh(i==null?0:+i));function a(u){for(var f=0,m=t.length,x;f<m;++f)x=t[f],x.vy+=(n[f]-x.y)*e[f]*u}function o(){if(!!t){var u,f=t.length;for(e=new Array(f),n=new Array(f),u=0;u<f;++u)e[u]=isNaN(n[u]=+i(t[u],u,t))?0:+r(t[u],u,t)}}return a.initialize=function(u){t=u,o()},a.strength=function(u){return arguments.length?(r=typeof u=="function"?u:qh(+u),o(),a):r},a.y=function(u){return arguments.length?(i=typeof u=="function"?u:qh(+u),o(),a):i},a}function Z6(){function i(Ri){return function(){return Ri}}var r=function(Na){return Na.cluster},t=i(1),e=i(-1),n=i(100),a=i(.1),o=[0,0],u=[],f={},m=[],x=100,w=100,L={none:{x:0,y:0}},H=[],W,et="force",ht=!0,bt=.1;function xt(Ri){if(!ht)return xt;W.tick(),sr();for(var Na=0,_o=u.length,Va=void 0,Ua=Ri*bt;Na<_o;++Na)Va=u[Na],Va.vx+=(L[r(Va)].x-Va.x)*Ua,Va.vy+=(L[r(Va)].y-Va.y)*Ua}function qt(){!u||ie()}function ie(){if(!(!u||!u.length)){if(r(u[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ri=_e();W=xD(Ri.nodes).force("x",U6(x).strength(.1)).force("y",V6(w).strength(.1)).force("collide",wD(function(Na){return Na.r}).iterations(4)).force("charge",_D().strength(e)).force("links",SD(Ri.nodes.length?Ri.links:[]).distance(n).strength(a)),H=W.nodes(),sr()}}function _e(){var Ri=[],Na=[],_o={},Va=[],Ua={},Mo=[];return Ua=ze(u),Mo=rr(m),Va=Object.keys(Ua),Va.forEach(function(hs,Ja){var ii=Ua[hs];Ri.push({id:hs,size:ii.count,r:Math.sqrt(ii.sumforceNodeSize/Math.PI)}),_o[hs]=Ja}),Mo.forEach(function(hs){var Ja=_o[hs.source],ii=_o[hs.target];Ja!==void 0&&ii!==void 0&&Na.push({source:Ja,target:ii,count:hs.count})}),{nodes:Ri,links:Na}}function ze(Ri){var Na={};return Ri.forEach(function(_o){var Va=r(_o);Na[Va]||(Na[Va]={count:0,sumforceNodeSize:0})}),Ri.forEach(function(_o){var Va=r(_o),Ua=t(_o),Mo=Na[Va];Mo.count=Mo.count+1,Mo.sumforceNodeSize=Mo.sumforceNodeSize+Math.PI*(Ua*Ua)*1.3,Na[Va]=Mo}),Na}function rr(Ri){var Na={},_o=[];Ri.forEach(function(Ua){var Mo=qe(Ua),hs=0;Na[Mo]!==void 0&&(hs=Na[Mo]),hs+=1,Na[Mo]=hs});var Va=Object.entries(Na);return Va.forEach(function(Ua){var Mo=Ua[0],hs=Ua[1],Ja=Mo.split("~")[0],ii=Mo.split("~")[1];Ja!==void 0&&ii!==void 0&&_o.push({source:Ja,target:ii,count:hs})}),_o}function sr(){return L={none:{x:0,y:0}},H.forEach(function(Ri){L[Ri.id]={x:Ri.x-o[0],y:Ri.y-o[1]}}),L}function qe(Ri){var Na=r(f[Ri.source]),_o=r(f[Ri.target]);return Na<=_o?Na+"~"+_o:_o+"~"+Na}function wr(Ri){f={},Ri.forEach(function(Na){f[Na.id]=Na})}function Vr(Ri){return arguments.length?(et=Ri,qt(),xt):et}function Br(Ri){return arguments.length?typeof Ri=="string"?(r=function(_o){return _o[Ri]},xt):(r=Ri,xt):r}function Tn(Ri){return arguments.length?(ht=Ri,xt):ht}function Hn(Ri){return arguments.length?(bt=Ri,xt):bt}function Un(Ri){return arguments.length?(x=Ri,xt):x}function Ei(Ri){return arguments.length?(w=Ri,xt):w}function Ti(Ri){return arguments.length?(wr(Ri||[]),u=Ri||[],xt):u}function Li(Ri){return arguments.length?(m=Ri||[],qt(),xt):m}function _i(Ri){return arguments.length?(typeof Ri=="function"?t=Ri:t=i(+Ri),qt(),xt):t}function bi(Ri){return arguments.length?(typeof Ri=="function"?e=Ri:e=i(+Ri),qt(),xt):e}function Ba(Ri){return arguments.length?(typeof Ri=="function"?n=Ri:n=i(+Ri),qt(),xt):n}function La(Ri){return arguments.length?(typeof Ri=="function"?a=Ri:a=i(+Ri),qt(),xt):a}function Ha(Ri){return arguments.length?(o=Ri,xt):o}return xt.initialize=function(Ri){u=Ri,qt()},xt.template=Vr,xt.groupBy=Br,xt.enableGrouping=Tn,xt.strength=Hn,xt.centerX=Un,xt.centerY=Ei,xt.nodes=Ti,xt.links=Li,xt.forceNodeSize=_i,xt.nodeSize=xt.forceNodeSize,xt.forceCharge=bi,xt.forceLinkDistance=Ba,xt.forceLinkStrength=La,xt.offset=Ha,xt.getFocis=sr,xt}var h0={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK"},H6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeStrength=null,t.edgeStrength=null,t.preventOverlap=!1,t.clusterNodeStrength=null,t.clusterEdgeStrength=null,t.clusterEdgeDistance=null,t.clusterNodeSize=null,t.clusterFociStrength=null,t.linkDistance=50,t.alphaDecay=.028,t.alphaMin=.001,t.alpha=.3,t.collideStrength=1,t.workerEnabled=!1,t.tick=function(){},t.onLayoutEnd=function(){},t.onTick=function(){},t.ticking=void 0,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},r.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map(function(a){var o={},u=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(f){u.indexOf(f)>-1||(o[f]=a[f])}),o}),e.ticking=!1},r.prototype.execute=function(t){var e=this,n=e.nodes,a=e.edges;if(!e.ticking){var o=e.forceSimulation,u=e.alphaMin,f=e.alphaDecay,m=e.alpha;if(o)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(a)),o.nodes(n),e.edgeForce.links(a)),e.preventOverlap&&e.overlapProcess(o),o.alpha(m).restart(),this.ticking=!0;else try{var x=_D();if(e.nodeStrength&&x.strength(e.nodeStrength),o=xD().nodes(n),e.clustering){var w=Z6();w.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),a&&w.links(a),n&&w.nodes(n),w.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=w,o.force("group",w)}if(o.force("center",F6(e.center[0],e.center[1])).force("charge",x).alpha(m).alphaDecay(f).alphaMin(u),e.preventOverlap&&e.overlapProcess(o),a){var L=SD().id(function(et){return et.id}).links(a);e.edgeStrength&&L.strength(e.edgeStrength),e.linkDistance&&L.distance(e.linkDistance),e.edgeForce=L,o.force("link",L)}if(e.workerEnabled&&!Y6()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)o.on("tick",function(){e.tick()}).on("end",function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{o.stop();for(var H=X6(o),W=1;W<=H;W++)o.tick(),postMessage({type:h0.TICK,currentTick:W,totalTicks:H,nodes:n},void 0);e.ticking=!1}e.forceSimulation=o,e.ticking=!0}catch(et){e.ticking=!1,console.warn(et)}}},r.prototype.overlapProcess=function(t){var e=this,n=e.nodeSize,a=e.nodeSpacing,o,u,f=e.collideStrength;if((0,vv.default)(a)?u=function(){return a}:(0,uc.default)(a)?u=a:u=function(){return 0},!n)o=function(H){if(H.size){if((0,Rs.default)(H.size)){var W=H.size[0]>H.size[1]?H.size[0]:H.size[1];return W/2+u(H)}return H.size/2+u(H)}return 10+u(H)};else if((0,uc.default)(n))o=function(H){var W=n(H);return W+u(H)};else if((0,Rs.default)(n)){var m=n[0]>n[1]?n[0]:n[1],x=m/2;o=function(H){return x+u(H)}}else if((0,vv.default)(n)){var w=n/2;o=function(H){return w+u(H)}}else o=function(){return 10};t.force("collisionForce",wD(o).strength(f))},r.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,(0,X_.default)(e,t)},r.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},r}(Ad),j6=H6;function X6(i){var r=i.alphaMin(),t=i.alphaTarget(),e=i.alpha(),n=Math.log((r-t)/(e-t))/Math.log(1-i.alphaDecay()),a=Math.ceil(n);return a}function Y6(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}var W6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=500,t.gravity=10,t.clustering=!1,t.clusterGravity=10,t.linkDistance=50,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.linkStrength=1,t.nodeStrength=30,t.preventOverlap=!1,t.collideStrength=1,t.optimizeRangeFactor=1,t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}var a={},o={};e.forEach(function(u,f){a[u.id]=u,o[u.id]=f}),t.nodeMap=a,t.nodeIdxMap=o,t.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,u=t.velocityDecay,f=t.clustering,m;t.initVals(),f&&(m=t.getClusterMap());for(var x=function(ht){var bt=[];e.forEach(function(xt,qt){bt[qt]={x:0,y:0}}),t.applyCalculate(e,n,bt),f&&t.applyClusterForce(m,bt),e.forEach(function(xt,qt){!(0,d.isNumber)(xt.x)||!(0,d.isNumber)(xt.y)||(xt.x+=bt[qt].x*u,xt.y+=bt[qt].y*u)}),w.alpha+=(w.alphaTarget-w.alpha)*w.alphaDecay,t.tick()},w=this,L=0;L<a;L++)x(L);var H=[0,0];e.forEach(function(et){!(0,d.isNumber)(et.x)||!(0,d.isNumber)(et.y)||(H[0]+=et.x,H[1]+=et.y)}),H[0]/=e.length,H[1]/=e.length;var W=[o[0]-H[0],o[1]-H[1]];e.forEach(function(et,ht){!(0,d.isNumber)(et.x)||!(0,d.isNumber)(et.y)||(et.x+=W[0],et.y+=W[1])})},r.prototype.initVals=function(){for(var t=this,e=t.edges,n={},a=0;a<e.length;++a)n[e[a].source]?n[e[a].source]++:n[e[a].source]=1,n[e[a].target]?n[e[a].target]++:n[e[a].target]=1;for(var o=[],a=0;a<e.length;++a)o[a]=n[e[a].source]/(n[e[a].source]+n[e[a].target]);this.bias=o;var u=t.nodeSize,f=t.nodeSpacing,m,x;if((0,d.isNumber)(f)?x=function(){return f}:(0,d.isFunction)(f)?x=f:x=function(){return 0},!u)m=function(_e){if(_e.size){if((0,d.isArray)(_e.size)){var ze=_e.size[0]>_e.size[1]?_e.size[0]:_e.size[1];return ze/2+x(_e)}return _e.size/2+x(_e)}return 10+x(_e)};else if((0,d.isFunction)(u))m=function(_e){var ze=u(_e);return ze+x(_e)};else if((0,d.isArray)(u)){var w=u[0]>u[1]?u[0]:u[1],L=w/2;m=function(_e){return L+x(_e)}}else if((0,d.isNumber)(u)){var H=u/2;m=function(_e){return H+x(_e)}}else m=function(){return 10};this.nodeSize=m;var W=this.linkDistance,et;W||(W=50),(0,d.isNumber)(W)&&(et=function(_e){return W}),this.linkDistance=et;var ht=this.linkStrength,bt;ht||(ht=1),(0,d.isNumber)(ht)&&(bt=function(_e){return ht}),this.linkStrength=bt;var xt=this.nodeStrength,qt;xt||(xt=30),(0,d.isNumber)(xt)&&(qt=function(_e){return xt}),this.nodeStrength=qt},r.prototype.getClusterMap=function(){var t=this,e=t.nodes,n={};e.forEach(function(o){if(n[o.cluster]===void 0){var u={name:o.cluster,cx:0,cy:0,count:0};n[o.cluster]=u}var f=n[o.cluster];(0,d.isNumber)(o.x)&&(f.cx+=o.x),(0,d.isNumber)(o.y)&&(f.cy+=o.y),f.count++});for(var a in n)n[a].cx/=n[a].count,n[a].cy/=n[a].count;return n},r.prototype.applyClusterForce=function(t,e){var n=this,a=n.gravity,o=n.nodes,u=n.clusterGravity||a,f=this.alpha;o.forEach(function(x,w){if(!(!(0,d.isNumber)(x.x)||!(0,d.isNumber)(x.y))){var L=t[x.cluster],H=x.x-L.cx,W=x.y-L.cy,et=Math.sqrt(H*H+W*W);e[w].x-=H*u*f/et,e[w].y-=W*u*f/et}});for(var m in t)t[m].cx=0,t[m].cy=0,t[m].count=0;o.forEach(function(x){var w=t[x.cluster];(0,d.isNumber)(x.x)&&(w.cx+=x.x),(0,d.isNumber)(x.y)&&(w.cy+=x.y),w.count++});for(var m in t)t[m].cx/=t[m].count,t[m].cy/=t[m].count},r.prototype.applyCalculate=function(t,e,n){var a=this,o={};t.forEach(function(u,f){n[f]={x:0,y:0},t.forEach(function(m,x){if(!(f<x)){var w=u.x-m.x,L=u.y-m.y,H=w*w+L*L;H<1&&(H=Math.sqrt(H)),w===0&&(w=Math.random()*.01,H+=w*w),L===0&&(L=Math.random()*.01,H+=L*L);var W=Math.sqrt(H);o[u.id+"-"+m.id]={vx:w,vy:L,vl:H,sqrtVl:W},o[m.id+"-"+u.id]={vx:-w,vy:-L,vl:H,sqrtVl:W}}})}),a.calRepulsive(t,n,o),a.calAttractive(e,n,o)},r.prototype.calRepulsive=function(t,e,n){var a=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,o=this.nodeStrength,u=this.alpha,f=this.collideStrength,m=this.preventOverlap,x=this.nodeSize;t.forEach(function(w,L){t.forEach(function(H,W){if(L!==W&&!(!(0,d.isNumber)(w.x)||!(0,d.isNumber)(H.x)||!(0,d.isNumber)(w.y)||!(0,d.isNumber)(H.y))){var et=n[w.id+"-"+H.id],ht=et.vl,bt=et.vx,xt=et.vy;if(!(ht>a)&&(e[L].x+=bt*o(H)*u/ht,e[L].y+=xt*o(H)*u/ht,m&&L<W)){var qt=x(w),ie=x(H),_e=qt+ie;if(ht<_e*_e){var ze=n[w.id+"-"+H.id].sqrtVl,rr=(_e-ze)/ze*f,sr=ie*ie/(qt*qt+ie*ie),qe=bt*rr,wr=xt*rr;e[L].x+=qe*sr,e[L].y+=wr*sr,sr=1-sr,e[W].x-=qe*sr,e[W].y-=wr*sr}}}})})},r.prototype.calAttractive=function(t,e,n){var a=this,o=this.linkDistance,u=this.alpha,f=this.linkStrength,m=this.bias;t.forEach(function(x,w){if(!(!x.source||!x.target)){var L=a.nodeIdxMap[x.source],H=a.nodeIdxMap[x.target];if(L!==H){var W=a.nodeMap[x.source],et=a.nodeMap[x.target];if(!(!(0,d.isNumber)(et.x)||!(0,d.isNumber)(W.x)||!(0,d.isNumber)(et.y)||!(0,d.isNumber)(W.y))){var ht=n[x.target+"-"+x.source],bt=ht.vl,xt=ht.sqrtVl,qt=ht.vx,ie=ht.vy,_e=(xt-o(x))/xt*u*f(x),ze=qt*_e,rr=ie*_e,sr=m[w];e[H].x-=ze*sr,e[H].y-=rr*sr,e[L].x+=ze*(1-sr),e[L].y+=rr*(1-sr)}}}})},r}(Ad),K6=W6,$6=800,Q6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.gravity=10,t.speed=1,t.clustering=!1,t.clusterGravity=10,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},r.prototype.execute=function(){var t=this,e=this,n=e.nodes,a=e.center;if(!(!n||n.length===0)){if(n.length===1){n[0].x=a[0],n[0].y=a[1];return}var o={},u={};n.forEach(function(f,m){(0,d.isNumber)(f.x)||(f.x=Math.random()*t.width),(0,d.isNumber)(f.y)||(f.y=Math.random()*t.height),o[f.id]=f,u[f.id]=m}),e.nodeMap=o,e.nodeIdxMap=u,e.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,u=t.width/10,f=Math.sqrt(t.width*t.height/(e.length+1)),m=t.gravity,x=t.speed,w=t.clustering,L={};if(w){e.forEach(function(ht){if(L[ht.cluster]===void 0){var bt={name:ht.cluster,cx:0,cy:0,count:0};L[ht.cluster]=bt}var xt=L[ht.cluster];(0,d.isNumber)(ht.x)&&(xt.cx+=ht.x),(0,d.isNumber)(ht.y)&&(xt.cy+=ht.y),xt.count++});for(var H in L)L[H].cx/=L[H].count,L[H].cy/=L[H].count}for(var W=function(bt){var xt=[];if(e.forEach(function(_e,ze){xt[ze]={x:0,y:0}}),t.applyCalculate(e,n,xt,f),w){var qt=t.clusterGravity||m;e.forEach(function(_e,ze){if(!(!(0,d.isNumber)(_e.x)||!(0,d.isNumber)(_e.y))){var rr=L[_e.cluster],sr=Math.sqrt((_e.x-rr.cx)*(_e.x-rr.cx)+(_e.y-rr.cy)*(_e.y-rr.cy)),qe=f*qt;xt[ze].x-=qe*(_e.x-rr.cx)/sr,xt[ze].y-=qe*(_e.y-rr.cy)/sr}});for(var ie in L)L[ie].cx=0,L[ie].cy=0,L[ie].count=0;e.forEach(function(_e){var ze=L[_e.cluster];(0,d.isNumber)(_e.x)&&(ze.cx+=_e.x),(0,d.isNumber)(_e.y)&&(ze.cy+=_e.y),ze.count++});for(var ie in L)L[ie].cx/=L[ie].count,L[ie].cy/=L[ie].count}e.forEach(function(_e,ze){if(!(!(0,d.isNumber)(_e.x)||!(0,d.isNumber)(_e.y))){var rr=.01*f*m;xt[ze].x-=rr*(_e.x-o[0]),xt[ze].y-=rr*(_e.y-o[1])}}),e.forEach(function(_e,ze){if(!(!(0,d.isNumber)(_e.x)||!(0,d.isNumber)(_e.y))){var rr=Math.sqrt(xt[ze].x*xt[ze].x+xt[ze].y*xt[ze].y);if(rr>0){var sr=Math.min(u*(x/$6),rr);_e.x+=xt[ze].x/rr*sr,_e.y+=xt[ze].y/rr*sr}}})},et=0;et<a;et++)W(et)},r.prototype.applyCalculate=function(t,e,n,a){var o=this;o.calRepulsive(t,n,a),o.calAttractive(e,n,a)},r.prototype.calRepulsive=function(t,e,n){t.forEach(function(a,o){e[o]={x:0,y:0},t.forEach(function(u,f){if(o!==f&&!(!(0,d.isNumber)(a.x)||!(0,d.isNumber)(u.x)||!(0,d.isNumber)(a.y)||!(0,d.isNumber)(u.y))){var m=a.x-u.x,x=a.y-u.y,w=m*m+x*x;if(w===0){w=1;var L=o>f?1:-1;m=.01*L,x=.01*L}var H=n*n/w;e[o].x+=m*H,e[o].y+=x*H}})})},r.prototype.calAttractive=function(t,e,n){var a=this;t.forEach(function(o){if(!(!o.source||!o.target)){var u=a.nodeIdxMap[o.source],f=a.nodeIdxMap[o.target];if(u!==f){var m=a.nodeMap[o.source],x=a.nodeMap[o.target];if(!(!(0,d.isNumber)(x.x)||!(0,d.isNumber)(m.x)||!(0,d.isNumber)(x.y)||!(0,d.isNumber)(m.y))){var w=x.x-m.x,L=x.y-m.y,H=Math.sqrt(w*w+L*L),W=H*H/n;e[f].x-=w/H*W,e[f].y-=L/H*W,e[u].x+=w/H*W,e[u].y+=L/H*W}}}})},r}(Ad),q6=Q6,J6=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.begin=[0,0],t.preventOverlap=!0,t.preventOverlapPadding=10,t.condense=!1,t.sortBy="degree",t.nodeSize=30,t.nodes=[],t.edges=[],t.center=[0,0],t.width=300,t.height=300,t.row=0,t.col=0,t.cellWidth=0,t.cellHeight=0,t.cellUsed={},t.id2manPos={},t}return r.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},r.prototype.execute=function(){var t=this,e=t.nodes,n=e.length,a=t.center;if(n!==0){if(n===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.edges,u=[];e.forEach(function(xt){u.push(xt)});var f={};if(u.forEach(function(xt,qt){f[xt.id]=qt}),(t.sortBy==="degree"||!(0,Zo.default)(t.sortBy)||u[0][t.sortBy]===void 0)&&(t.sortBy="degree",l0(e[0].degree))){var m=zC(u.length,f,o);u.forEach(function(xt,qt){xt.degree=m[qt]})}u.sort(function(xt,qt){return qt[t.sortBy]-xt[t.sortBy]}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var x=t.rows,w=t.cols!=null?t.cols:t.columns;if(t.cells=n,x!=null&&w!=null?(t.rows=x,t.cols=w):x!=null&&w==null?(t.rows=x,t.cols=Math.ceil(t.cells/t.rows)):x==null&&w!=null?(t.cols=w,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var L=t.small(),H=t.large();(L-1)*H>=t.cells?t.small(L-1):(H-1)*L>=t.cells&&t.large(H-1)}else for(;t.cols*t.rows<t.cells;){var L=t.small(),H=t.large();(H+1)*L>=t.cells?t.large(H+1):t.small(L+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&u.forEach(function(xt){(!xt.x||!xt.y)&&(xt.x=0,xt.y=0);var qt,ie;(0,d.isArray)(xt.size)?(qt=xt.size[0],ie=xt.size[1]):(0,d.isNumber)(xt.size)&&(qt=xt.size,ie=xt.size),(qt===void 0||ie===void 0)&&((0,d.isArray)(t.nodeSize)?(qt=t.nodeSize[0],ie=t.nodeSize[1]):(0,d.isNumber)(t.nodeSize)?(qt=t.nodeSize,ie=t.nodeSize):(qt=30,ie=30));var _e=t.preventOverlapPadding,ze=qt+_e,rr=ie+_e;t.cellWidth=Math.max(t.cellWidth,ze),t.cellHeight=Math.max(t.cellHeight,rr)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var W=0;W<u.length;W++){var et=u[W],ht=void 0;if(t.position&&(ht=t.position(et)),ht&&(ht.row!==void 0||ht.col!==void 0)){var bt={row:ht.row,col:ht.col};if(bt.col===void 0)for(bt.col=0;t.used(bt.row,bt.col);)bt.col++;else if(bt.row===void 0)for(bt.row=0;t.used(bt.row,bt.col);)bt.row++;t.id2manPos[et.id]=bt,t.use(bt.row,bt.col)}t.getPos(et)}}},r.prototype.small=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.min(a,o);else{var u=Math.min(a,o);u===e.rows?e.rows=t:e.cols=t}return n},r.prototype.large=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.max(a,o);else{var u=Math.max(a,o);u===e.rows?e.rows=t:e.cols=t}return n},r.prototype.used=function(t,e){var n=this;return n.cellUsed["c-"+t+"-"+e]||!1},r.prototype.use=function(t,e){var n=this;n.cellUsed["c-"+t+"-"+e]=!0},r.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},r.prototype.getPos=function(t){var e=this,n=e.begin,a=e.cellWidth,o=e.cellHeight,u,f,m=e.id2manPos[t.id];if(m)u=m.col*a+a/2+n[0],f=m.row*o+o/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();u=e.col*a+a/2+n[0],f=e.row*o+o/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=u,t.y=f},r}(Ad),tN=J6,eN=S(40670),ED=S(81306),CD=S(59206),tA=S(69610),eA=S(54941);const rN=Object.prototype.toString;function rA(i){return rN.call(i).endsWith("Array]")}function nN(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rA(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],u=e+1;u<a;u++)i[u]>o&&(o=i[u]);return o}function iN(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rA(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],u=e+1;u<a;u++)i[u]<o&&(o=i[u]);return o}function AD(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(rA(i)){if(i.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(r.output!==void 0){if(!rA(r.output))throw new TypeError("output option must be an array if specified");t=r.output}else t=new Array(i.length);var e=iN(i),n=nN(i);if(e===n)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,o=a===void 0?r.autoMinMax?e:0:a,u=r.max,f=u===void 0?r.autoMinMax?n:1:u;if(o>=f)throw new RangeError("min option must be smaller than max option");for(var m=(f-o)/(n-e),x=0;x<i.length;x++)t[x]=(i[x]-e)*m+o;return t}var nA=" ".repeat(2),MD=" ".repeat(4);function aN(){return TD(this)}function TD(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.maxRows,e=t===void 0?15:t,n=r.maxColumns,a=n===void 0?10:n,o=r.maxNumSize,u=o===void 0?8:o;return"".concat(i.constructor.name,` {
`).concat(nA,`[
`).concat(MD).concat(oN(i,e,a,u),`
`).concat(nA,`]
`).concat(nA,"rows: ").concat(i.rows,`
`).concat(nA,"columns: ").concat(i.columns,`
}`)}function oN(i,r,t,e){for(var n=i.rows,a=i.columns,o=Math.min(n,r),u=Math.min(a,t),f=[],m=0;m<o;m++){for(var x=[],w=0;w<u;w++)x.push(sN(i.get(m,w),e));f.push("".concat(x.join(" ")))}return u!==a&&(f[f.length-1]+=" ... ".concat(a-t," more columns")),o!==n&&f.push("... ".concat(n-r," more rows")),f.join(`
`.concat(MD))}function sN(i,r){var t=String(i);if(t.length<=r)return t.padEnd(r," ");var e=i.toPrecision(r-2);if(e.length<=r)return e;var n=i.toExponential(r-2),a=n.indexOf("e"),o=n.slice(a);return n.slice(0,r-o.length)+o}function uN(i,r){i.prototype.add=function(e){return typeof e=="number"?this.addS(e):this.addM(e)},i.prototype.addS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e);return this},i.prototype.addM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e.get(n,a));return this},i.add=function(e,n){var a=new r(e);return a.add(n)},i.prototype.sub=function(e){return typeof e=="number"?this.subS(e):this.subM(e)},i.prototype.subS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e);return this},i.prototype.subM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e.get(n,a));return this},i.sub=function(e,n){var a=new r(e);return a.sub(n)},i.prototype.subtract=i.prototype.sub,i.prototype.subtractS=i.prototype.subS,i.prototype.subtractM=i.prototype.subM,i.subtract=i.sub,i.prototype.mul=function(e){return typeof e=="number"?this.mulS(e):this.mulM(e)},i.prototype.mulS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e);return this},i.prototype.mulM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e.get(n,a));return this},i.mul=function(e,n){var a=new r(e);return a.mul(n)},i.prototype.multiply=i.prototype.mul,i.prototype.multiplyS=i.prototype.mulS,i.prototype.multiplyM=i.prototype.mulM,i.multiply=i.mul,i.prototype.div=function(e){return typeof e=="number"?this.divS(e):this.divM(e)},i.prototype.divS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e);return this},i.prototype.divM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e.get(n,a));return this},i.div=function(e,n){var a=new r(e);return a.div(n)},i.prototype.divide=i.prototype.div,i.prototype.divideS=i.prototype.divS,i.prototype.divideM=i.prototype.divM,i.divide=i.div,i.prototype.mod=function(e){return typeof e=="number"?this.modS(e):this.modM(e)},i.prototype.modS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e);return this},i.prototype.modM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e.get(n,a));return this},i.mod=function(e,n){var a=new r(e);return a.mod(n)},i.prototype.modulus=i.prototype.mod,i.prototype.modulusS=i.prototype.modS,i.prototype.modulusM=i.prototype.modM,i.modulus=i.mod,i.prototype.and=function(e){return typeof e=="number"?this.andS(e):this.andM(e)},i.prototype.andS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e);return this},i.prototype.andM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e.get(n,a));return this},i.and=function(e,n){var a=new r(e);return a.and(n)},i.prototype.or=function(e){return typeof e=="number"?this.orS(e):this.orM(e)},i.prototype.orS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e);return this},i.prototype.orM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e.get(n,a));return this},i.or=function(e,n){var a=new r(e);return a.or(n)},i.prototype.xor=function(e){return typeof e=="number"?this.xorS(e):this.xorM(e)},i.prototype.xorS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e);return this},i.prototype.xorM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e.get(n,a));return this},i.xor=function(e,n){var a=new r(e);return a.xor(n)},i.prototype.leftShift=function(e){return typeof e=="number"?this.leftShiftS(e):this.leftShiftM(e)},i.prototype.leftShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e);return this},i.prototype.leftShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e.get(n,a));return this},i.leftShift=function(e,n){var a=new r(e);return a.leftShift(n)},i.prototype.signPropagatingRightShift=function(e){return typeof e=="number"?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},i.prototype.signPropagatingRightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e);return this},i.prototype.signPropagatingRightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e.get(n,a));return this},i.signPropagatingRightShift=function(e,n){var a=new r(e);return a.signPropagatingRightShift(n)},i.prototype.rightShift=function(e){return typeof e=="number"?this.rightShiftS(e):this.rightShiftM(e)},i.prototype.rightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e);return this},i.prototype.rightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e.get(n,a));return this},i.rightShift=function(e,n){var a=new r(e);return a.rightShift(n)},i.prototype.zeroFillRightShift=i.prototype.rightShift,i.prototype.zeroFillRightShiftS=i.prototype.rightShiftS,i.prototype.zeroFillRightShiftM=i.prototype.rightShiftM,i.zeroFillRightShift=i.rightShift,i.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,~this.get(e,n));return this},i.not=function(e){var n=new r(e);return n.not()},i.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.abs(this.get(e,n)));return this},i.abs=function(e){var n=new r(e);return n.abs()},i.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acos(this.get(e,n)));return this},i.acos=function(e){var n=new r(e);return n.acos()},i.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acosh(this.get(e,n)));return this},i.acosh=function(e){var n=new r(e);return n.acosh()},i.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asin(this.get(e,n)));return this},i.asin=function(e){var n=new r(e);return n.asin()},i.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asinh(this.get(e,n)));return this},i.asinh=function(e){var n=new r(e);return n.asinh()},i.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atan(this.get(e,n)));return this},i.atan=function(e){var n=new r(e);return n.atan()},i.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atanh(this.get(e,n)));return this},i.atanh=function(e){var n=new r(e);return n.atanh()},i.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cbrt(this.get(e,n)));return this},i.cbrt=function(e){var n=new r(e);return n.cbrt()},i.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.ceil(this.get(e,n)));return this},i.ceil=function(e){var n=new r(e);return n.ceil()},i.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.clz32(this.get(e,n)));return this},i.clz32=function(e){var n=new r(e);return n.clz32()},i.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cos(this.get(e,n)));return this},i.cos=function(e){var n=new r(e);return n.cos()},i.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cosh(this.get(e,n)));return this},i.cosh=function(e){var n=new r(e);return n.cosh()},i.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.exp(this.get(e,n)));return this},i.exp=function(e){var n=new r(e);return n.exp()},i.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.expm1(this.get(e,n)));return this},i.expm1=function(e){var n=new r(e);return n.expm1()},i.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.floor(this.get(e,n)));return this},i.floor=function(e){var n=new r(e);return n.floor()},i.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.fround(this.get(e,n)));return this},i.fround=function(e){var n=new r(e);return n.fround()},i.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log(this.get(e,n)));return this},i.log=function(e){var n=new r(e);return n.log()},i.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log1p(this.get(e,n)));return this},i.log1p=function(e){var n=new r(e);return n.log1p()},i.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log10(this.get(e,n)));return this},i.log10=function(e){var n=new r(e);return n.log10()},i.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log2(this.get(e,n)));return this},i.log2=function(e){var n=new r(e);return n.log2()},i.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.round(this.get(e,n)));return this},i.round=function(e){var n=new r(e);return n.round()},i.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sign(this.get(e,n)));return this},i.sign=function(e){var n=new r(e);return n.sign()},i.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sin(this.get(e,n)));return this},i.sin=function(e){var n=new r(e);return n.sin()},i.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sinh(this.get(e,n)));return this},i.sinh=function(e){var n=new r(e);return n.sinh()},i.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sqrt(this.get(e,n)));return this},i.sqrt=function(e){var n=new r(e);return n.sqrt()},i.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tan(this.get(e,n)));return this},i.tan=function(e){var n=new r(e);return n.tan()},i.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tanh(this.get(e,n)));return this},i.tanh=function(e){var n=new r(e);return n.tanh()},i.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.trunc(this.get(e,n)));return this},i.trunc=function(e){var n=new r(e);return n.trunc()},i.pow=function(e,n){var a=new r(e);return a.pow(n)},i.prototype.pow=function(e){return typeof e=="number"?this.powS(e):this.powM(e)},i.prototype.powS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e));return this},i.prototype.powM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e.get(n,a)));return this}}function mv(i,r,t){var e=t?i.rows:i.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function yv(i,r,t){var e=t?i.columns:i.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function T1(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function P1(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function lN(i,r,t){return{row:cN(i,r),column:fN(i,t)}}function cN(i,r){if(typeof r!="object")throw new TypeError("unexpected type for row indices");var t=r.some(function(e){return e<0||e>=i.rows});if(t)throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function fN(i,r){if(typeof r!="object")throw new TypeError("unexpected type for column indices");var t=r.some(function(e){return e<0||e>=i.columns});if(t)throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function PD(i,r,t,e,n){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(aA("startRow",r),aA("endRow",t),aA("startColumn",e),aA("endColumn",n),r>t||e>n||r<0||r>=i.rows||t<0||t>=i.rows||e<0||e>=i.columns||n<0||n>=i.columns)throw new RangeError("Submatrix indices are out of range")}function iA(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=[],e=0;e<i;e++)t.push(r);return t}function aA(i,r){if(typeof r!="number")throw new TypeError("".concat(i," must be a number"))}function I1(i){if(i.isEmpty())throw new Error("Empty matrix has no elements to index")}function hN(i){for(var r=iA(i.rows),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]+=i.get(t,e);return r}function pN(i){for(var r=iA(i.columns),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]+=i.get(t,e);return r}function dN(i){for(var r=0,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r+=i.get(t,e);return r}function vN(i){for(var r=iA(i.rows,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]*=i.get(t,e);return r}function gN(i){for(var r=iA(i.columns,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]*=i.get(t,e);return r}function mN(i){for(var r=1,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r*=i.get(t,e);return r}function yN(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<e;o++){for(var u=0,f=0,m=0,x=0;x<n;x++)m=i.get(o,x)-t[o],u+=m,f+=m*m;r?a.push((f-u*u/n)/(n-1)):a.push((f-u*u/n)/n)}return a}function xN(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<n;o++){for(var u=0,f=0,m=0,x=0;x<e;x++)m=i.get(x,o)-t[o],u+=m,f+=m*m;r?a.push((f-u*u/e)/(e-1)):a.push((f-u*u/e)/e)}return a}function _N(i,r,t){for(var e=i.rows,n=i.columns,a=e*n,o=0,u=0,f=0,m=0;m<e;m++)for(var x=0;x<n;x++)f=i.get(m,x)-t,o+=f,u+=f*f;return r?(u-o*o/a)/(a-1):(u-o*o/a)/a}function bN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[t])}function SN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[e])}function wN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r)}function EN(i){for(var r=[],t=0;t<i.rows;t++){for(var e=0,n=0;n<i.columns;n++)e+=Math.pow(i.get(t,n),2)/(i.columns-1);r.push(Math.sqrt(e))}return r}function CN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[t])}function AN(i){for(var r=[],t=0;t<i.columns;t++){for(var e=0,n=0;n<i.rows;n++)e+=Math.pow(i.get(n,t),2)/(i.rows-1);r.push(Math.sqrt(e))}return r}function MN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[e])}function TN(i){for(var r=i.size-1,t=0,e=0;e<i.columns;e++)for(var n=0;n<i.rows;n++)t+=Math.pow(i.get(n,e),2)/r;return Math.sqrt(t)}function PN(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r)}var tf=function(){function i(){(0,tA.Z)(this,i)}return(0,eA.Z)(i,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);t++}return a}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);for(var u=e+1;u<this.rows;u++)this.get(t,u)!==0&&(a=!1);t++}return a}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var a=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(a,n)&&(a=o);if(t.get(a,n)===0)n++;else{t.swapRows(e,a);for(var u=t.get(e,n),f=n;f<t.columns;f++)t.set(e,f,t.get(e,f)/u);for(var m=e+1;m<t.rows;m++){var x=t.get(m,n)/t.get(e,n);t.set(m,n,0);for(var w=n+1;w<t.columns;w++)t.set(m,w,t.get(m,w)-t.get(e,w)*x)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,a=n-1;a>=0;)if(t.maxRow(a)===0)a--;else{for(var o=0,u=!1;o<n&&u===!1;)t.get(a,o)===1?u=!0:o++;for(var f=0;f<a;f++)for(var m=t.get(f,o),x=o;x<e;x++){var w=t.get(f,x)-m*t.get(a,x);t.set(f,x,w)}a--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.rows,n=e===void 0?1:e,a=t.columns,o=a===void 0?1:a;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var u=new _s(this.rows*n,this.columns*o),f=0;f<n;f++)for(var m=0;m<o;m++)u.setSubMatrix(this,this.rows*f,this.columns*m);return u}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){mv(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return _s.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){mv(this,t),e=T1(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){mv(this,t),mv(this,e);for(var n=0;n<this.columns;n++){var a=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,a)}return this}},{key:"getColumn",value:function(t){yv(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return _s.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){yv(this,t),e=P1(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){yv(this,t),yv(this,e);for(var n=0;n<this.rows;n++){var a=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,a)}return this}},{key:"addRowVector",value:function(t){t=T1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=T1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=T1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=T1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=P1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=P1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=P1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=P1(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){mv(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){yv(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){I1(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)>t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){I1(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)<t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"maxRow",value:function(t){if(mv(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){mv(this,t),I1(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)>e&&(e=this.get(t,a),n[1]=a);return n}},{key:"minRow",value:function(t){if(mv(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){mv(this,t),I1(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)<e&&(e=this.get(t,a),n[1]=a);return n}},{key:"maxColumn",value:function(t){if(yv(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){yv(this,t),I1(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)>e&&(e=this.get(a,t),n[0]=a);return n}},{key:"minColumn",value:function(t){if(yv(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){yv(this,t),I1(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)<e&&(e=this.get(a,t),n[0]=a);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)e=e+this.get(n,a)*this.get(n,a);return Math.sqrt(e)}else throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(t){i.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return n}},{key:"mmul",value:function(t){t=_s.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.columns,o=new _s(e,a),u=new Float64Array(n),f=0;f<a;f++){for(var m=0;m<n;m++)u[m]=t.get(m,f);for(var x=0;x<e;x++){for(var w=0,L=0;L<n;L++)w+=this.get(x,L)*u[L];o.set(x,f,w)}}return o}},{key:"strassen2x2",value:function(t){t=_s.checkMatrix(t);var e=new _s(2,2),n=this.get(0,0),a=t.get(0,0),o=this.get(0,1),u=t.get(0,1),f=this.get(1,0),m=t.get(1,0),x=this.get(1,1),w=t.get(1,1),L=(n+x)*(a+w),H=(f+x)*a,W=n*(u-w),et=x*(m-a),ht=(n+o)*w,bt=(f-n)*(a+u),xt=(o-x)*(m+w),qt=L+et-ht+xt,ie=W+ht,_e=H+et,ze=L-H+W+bt;return e.set(0,0,qt),e.set(0,1,ie),e.set(1,0,_e),e.set(1,1,ze),e}},{key:"strassen3x3",value:function(t){t=_s.checkMatrix(t);var e=new _s(3,3),n=this.get(0,0),a=this.get(0,1),o=this.get(0,2),u=this.get(1,0),f=this.get(1,1),m=this.get(1,2),x=this.get(2,0),w=this.get(2,1),L=this.get(2,2),H=t.get(0,0),W=t.get(0,1),et=t.get(0,2),ht=t.get(1,0),bt=t.get(1,1),xt=t.get(1,2),qt=t.get(2,0),ie=t.get(2,1),_e=t.get(2,2),ze=(n+a+o-u-f-w-L)*bt,rr=(n-u)*(-W+bt),sr=f*(-H+W+ht-bt-xt-qt+_e),qe=(-n+u+f)*(H-W+bt),wr=(u+f)*(-H+W),Vr=n*H,Br=(-n+x+w)*(H-et+xt),Tn=(-n+x)*(et-xt),Hn=(x+w)*(-H+et),Un=(n+a+o-f-m-x-w)*xt,Ei=w*(-H+et+ht-bt-xt-qt+ie),Ti=(-o+w+L)*(bt+qt-ie),Li=(o-L)*(bt-ie),_i=o*qt,bi=(w+L)*(-qt+ie),Ba=(-o+f+m)*(xt+qt-_e),La=(o-m)*(xt-_e),Ha=(f+m)*(-qt+_e),Ri=a*ht,Na=m*ie,_o=u*et,Va=x*W,Ua=L*_e,Mo=Vr+_i+Ri,hs=ze+qe+wr+Vr+Ti+_i+bi,Ja=Vr+Br+Hn+Un+_i+Ba+Ha,ii=rr+sr+qe+Vr+_i+Ba+La,Gi=rr+qe+wr+Vr+Na,To=_i+Ba+La+Ha+_o,Ho=Vr+Br+Tn+Ei+Ti+Li+_i,go=Ti+Li+_i+bi+Va,bs=Vr+Br+Tn+Hn+Ua;return e.set(0,0,Mo),e.set(0,1,hs),e.set(0,2,Ja),e.set(1,0,ii),e.set(1,1,Gi),e.set(1,2,To),e.set(2,0,Ho),e.set(2,1,go),e.set(2,2,bs),e}},{key:"mmulStrassen",value:function(t){t=_s.checkMatrix(t);var e=this.clone(),n=e.rows,a=e.columns,o=t.rows,u=t.columns;a!==o&&console.warn("Multiplying ".concat(n," x ").concat(a," and ").concat(o," x ").concat(u," matrix: dimensions do not match."));function f(L,H,W){var et=L.rows,ht=L.columns;if(et===H&&ht===W)return L;var bt=i.zeros(H,W);return bt=bt.setSubMatrix(L,0,0),bt}var m=Math.max(n,o),x=Math.max(a,u);e=f(e,m,x),t=f(t,m,x);function w(L,H,W,et){if(W<=512||et<=512)return L.mmul(H);W%2==1&&et%2==1?(L=f(L,W+1,et+1),H=f(H,W+1,et+1)):W%2==1?(L=f(L,W+1,et),H=f(H,W+1,et)):et%2==1&&(L=f(L,W,et+1),H=f(H,W,et+1));var ht=parseInt(L.rows/2,10),bt=parseInt(L.columns/2,10),xt=L.subMatrix(0,ht-1,0,bt-1),qt=H.subMatrix(0,ht-1,0,bt-1),ie=L.subMatrix(0,ht-1,bt,L.columns-1),_e=H.subMatrix(0,ht-1,bt,H.columns-1),ze=L.subMatrix(ht,L.rows-1,0,bt-1),rr=H.subMatrix(ht,H.rows-1,0,bt-1),sr=L.subMatrix(ht,L.rows-1,bt,L.columns-1),qe=H.subMatrix(ht,H.rows-1,bt,H.columns-1),wr=w(i.add(xt,sr),i.add(qt,qe),ht,bt),Vr=w(i.add(ze,sr),qt,ht,bt),Br=w(xt,i.sub(_e,qe),ht,bt),Tn=w(sr,i.sub(rr,qt),ht,bt),Hn=w(i.add(xt,ie),qe,ht,bt),Un=w(i.sub(ze,xt),i.add(qt,_e),ht,bt),Ei=w(i.sub(ie,sr),i.add(rr,qe),ht,bt),Ti=i.add(wr,Tn);Ti.sub(Hn),Ti.add(Ei);var Li=i.add(Br,Hn),_i=i.add(Vr,Tn),bi=i.sub(wr,Vr);bi.add(Br),bi.add(Un);var Ba=i.zeros(2*Ti.rows,2*Ti.columns);return Ba=Ba.setSubMatrix(Ti,0,0),Ba=Ba.setSubMatrix(Li,Ti.rows,0),Ba=Ba.setSubMatrix(_i,0,Ti.columns),Ba=Ba.setSubMatrix(bi,Ti.rows,Ti.columns),Ba.subMatrix(0,W-1,0,et-1)}return w(e,t,m,x)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var u=new _s(this.rows,this.columns),f=0;f<this.rows;f++){var m=this.getRow(f);m.length>0&&AD(m,{min:n,max:o,output:m}),u.setRow(f,m)}return u}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var u=new _s(this.rows,this.columns),f=0;f<this.columns;f++){var m=this.getColumn(f);m.length&&AD(m,{min:n,max:o,output:m}),u.setColumn(f,m)}return u}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var a=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,a)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var a=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,a)}return this}},{key:"kroneckerProduct",value:function(t){t=_s.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.rows,o=t.columns,u=new _s(e*a,n*o),f=0;f<e;f++)for(var m=0;m<n;m++)for(var x=0;x<a;x++)for(var w=0;w<o;w++)u.set(a*f+x,o*m+w,this.get(f,m)*t.get(x,w));return u}},{key:"kroneckerSum",value:function(t){if(t=_s.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,a=this.kroneckerProduct(_s.eye(n,n)),o=_s.eye(e,e).kroneckerProduct(t);return a.add(o)}},{key:"transpose",value:function(){for(var t=new _s(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ID,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ID,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,a){PD(this,t,e,n,a);for(var o=new _s(e-t+1,a-n+1),u=t;u<=e;u++)for(var f=n;f<=a;f++)o.set(u-t,f-n,this.get(u,f));return o}},{key:"subMatrixRow",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var a=new _s(t.length,n-e+1),o=0;o<t.length;o++)for(var u=e;u<=n;u++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));a.set(o,u-e,this.get(t[o],u))}return a}},{key:"subMatrixColumn",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var a=new _s(n-e+1,t.length),o=0;o<t.length;o++)for(var u=e;u<=n;u++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));a.set(u-e,o,this.get(u,t[o]))}return a}},{key:"setSubMatrix",value:function(t,e,n){if(t=_s.checkMatrix(t),t.isEmpty())return this;var a=e+t.rows-1,o=n+t.columns-1;PD(this,e,a,n,o);for(var u=0;u<t.rows;u++)for(var f=0;f<t.columns;f++)this.set(e+u,n+f,t.get(u,f));return this}},{key:"selection",value:function(t,e){for(var n=lN(this,t,e),a=new _s(t.length,e.length),o=0;o<n.row.length;o++)for(var u=n.row[o],f=0;f<n.column.length;f++){var m=n.column[f];a.set(o,f,this.get(u,m))}return a}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new _s(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return hN(this);case"column":return pN(this);case void 0:return dN(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return vN(this);case"column":return gN(this);case void 0:return mN(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":{for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(var a=0;a<this.columns;a++)e[a]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.unbiased,o=a===void 0?!0:a,u=n.mean,f=u===void 0?this.mean(t):u;if(typeof o!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Array.isArray(f))throw new TypeError("mean must be an array");return yN(this,o,f)}case"column":{if(!Array.isArray(f))throw new TypeError("mean must be an array");return xN(this,o,f)}case void 0:{if(typeof f!="number")throw new TypeError("mean must be a number");return _N(this,o,f)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){typeof t=="object"&&(e=t,t=void 0);var n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(var a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.center,o=a===void 0?this.mean(t):a;switch(t){case"row":{if(!Array.isArray(o))throw new TypeError("center must be an array");return bN(this,o),this}case"column":{if(!Array.isArray(o))throw new TypeError("center must be an array");return SN(this,o),this}case void 0:{if(typeof o!="number")throw new TypeError("center must be a number");return wN(this,o),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":{if(n===void 0)n=EN(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return CN(this,n),this}case"column":{if(n===void 0)n=AN(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return MN(this,n),this}case void 0:{if(n===void 0)n=TN(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return PN(this,n),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return TD(this,t)}}],[{key:"from1DArray",value:function(t,e,n){var a=t*e;if(a!==n.length)throw new RangeError("data length does not match given dimensions");for(var o=new _s(t,e),u=0;u<t;u++)for(var f=0;f<e;f++)o.set(u,f,n[u*e+f]);return o}},{key:"rowVector",value:function(t){for(var e=new _s(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new _s(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new _s(t,e)}},{key:"ones",value:function(t,e){return new _s(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");for(var a=n.random,o=a===void 0?Math.random:a,u=new _s(t,e),f=0;f<t;f++)for(var m=0;m<e;m++)u.set(f,m,o());return u}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");var a=n.min,o=a===void 0?0:a,u=n.max,f=u===void 0?1e3:u,m=n.random,x=m===void 0?Math.random:m;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(f))throw new TypeError("max must be an integer");if(o>=f)throw new RangeError("min must be smaller than max");for(var w=f-o,L=new _s(t,e),H=0;H<t;H++)for(var W=0;W<e;W++){var et=o+Math.round(x()*w);L.set(H,W,et)}return L}},{key:"eye",value:function(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);for(var a=Math.min(t,e),o=this.zeros(t,e),u=0;u<a;u++)o.set(u,u,n);return o}},{key:"diag",value:function(t,e,n){var a=t.length;e===void 0&&(e=a),n===void 0&&(n=e);for(var o=Math.min(a,e,n),u=this.zeros(e,n),f=0;f<o;f++)u.set(f,f,t[f]);return u}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new _s(n,a),u=0;u<n;u++)for(var f=0;f<a;f++)o.set(u,f,Math.min(t.get(u,f),e.get(u,f)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new this(n,a),u=0;u<n;u++)for(var f=0;f<a;f++)o.set(u,f,Math.max(t.get(u,f),e.get(u,f)));return o}},{key:"checkMatrix",value:function(t){return i.isMatrix(t)?t:new _s(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),i}();tf.prototype.klass="Matrix",typeof Symbol!="undefined"&&(tf.prototype[Symbol.for("nodejs.util.inspect.custom")]=aN);function ID(i,r){return i-r}tf.random=tf.rand,tf.randomInt=tf.randInt,tf.diagonal=tf.diag,tf.prototype.diagonal=tf.prototype.diag,tf.identity=tf.eye,tf.prototype.negate=tf.prototype.neg,tf.prototype.tensorProduct=tf.prototype.kroneckerProduct;var _s=function(i){(0,ED.Z)(t,i);var r=(0,CD.Z)(t);function t(e,n){var a;if((0,tA.Z)(this,t),a=r.call(this),t.isMatrix(e))return(0,eN.Z)(a,e.clone());if(Number.isInteger(e)&&e>=0)if(a.data=[],Number.isInteger(n)&&n>=0)for(var o=0;o<e;o++)a.data.push(new Float64Array(n));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){var u=e;if(e=u.length,n=e?u[0].length:0,typeof n!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var f=0;f<e;f++){if(u[f].length!==n)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(u[f]))}}else throw new TypeError("First argument must be a positive number or an array");return a.rows=e,a.columns=n,a}return(0,eA.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}},{key:"removeRow",value:function(n){return mv(this,n),this.data.splice(n,1),this.rows-=1,this}},{key:"addRow",value:function(n,a){return a===void 0&&(a=n,n=this.rows),mv(this,n,!0),a=Float64Array.from(T1(this,a)),this.data.splice(n,0,a),this.rows+=1,this}},{key:"removeColumn",value:function(n){yv(this,n);for(var a=0;a<this.rows;a++){for(var o=new Float64Array(this.columns-1),u=0;u<n;u++)o[u]=this.data[a][u];for(var f=n+1;f<this.columns;f++)o[f-1]=this.data[a][f];this.data[a]=o}return this.columns-=1,this}},{key:"addColumn",value:function(n,a){typeof a=="undefined"&&(a=n,n=this.columns),yv(this,n,!0),a=P1(this,a);for(var o=0;o<this.rows;o++){for(var u=new Float64Array(this.columns+1),f=0;f<n;f++)u[f]=this.data[o][f];for(u[f++]=a[o];f<this.columns+1;f++)u[f]=this.data[o][f-1];this.data[o]=u}return this.columns+=1,this}}]),t}(tf);uN(tf,_s);var IN=function(i){(0,ED.Z)(t,i);var r=(0,CD.Z)(t);function t(e){var n;return(0,tA.Z)(this,t),n=r.call(this),n.data=e,n.rows=e.length,n.columns=e[0].length,n}return(0,eA.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}}]),t}(tf);function O1(i,r){var t=0;return Math.abs(i)>Math.abs(r)?(t=r/i,Math.abs(i)*Math.sqrt(1+t*t)):r!==0?(t=i/r,Math.abs(r)*Math.sqrt(1+t*t)):0}var OD=function(){function i(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,tA.Z)(this,i),r=IN.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var e=r.rows,n=r.columns,a=t.computeLeftSingularVectors,o=a===void 0?!0:a,u=t.computeRightSingularVectors,f=u===void 0?!0:u,m=t.autoTranspose,x=m===void 0?!1:m,w=Boolean(o),L=Boolean(f),H=!1,W;if(e<n)if(!x)W=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{W=r.transpose(),e=W.rows,n=W.columns,H=!0;var et=w;w=L,L=et}else W=r.clone();for(var ht=Math.min(e,n),bt=Math.min(e+1,n),xt=new Float64Array(bt),qt=new _s(e,ht),ie=new _s(n,n),_e=new Float64Array(n),ze=new Float64Array(e),rr=new Float64Array(bt),sr=0;sr<bt;sr++)rr[sr]=sr;for(var qe=Math.min(e-1,n),wr=Math.max(0,Math.min(n-2,e)),Vr=Math.max(qe,wr),Br=0;Br<Vr;Br++){if(Br<qe){xt[Br]=0;for(var Tn=Br;Tn<e;Tn++)xt[Br]=O1(xt[Br],W.get(Tn,Br));if(xt[Br]!==0){W.get(Br,Br)<0&&(xt[Br]=-xt[Br]);for(var Hn=Br;Hn<e;Hn++)W.set(Hn,Br,W.get(Hn,Br)/xt[Br]);W.set(Br,Br,W.get(Br,Br)+1)}xt[Br]=-xt[Br]}for(var Un=Br+1;Un<n;Un++){if(Br<qe&&xt[Br]!==0){for(var Ei=0,Ti=Br;Ti<e;Ti++)Ei+=W.get(Ti,Br)*W.get(Ti,Un);Ei=-Ei/W.get(Br,Br);for(var Li=Br;Li<e;Li++)W.set(Li,Un,W.get(Li,Un)+Ei*W.get(Li,Br))}_e[Un]=W.get(Br,Un)}if(w&&Br<qe)for(var _i=Br;_i<e;_i++)qt.set(_i,Br,W.get(_i,Br));if(Br<wr){_e[Br]=0;for(var bi=Br+1;bi<n;bi++)_e[Br]=O1(_e[Br],_e[bi]);if(_e[Br]!==0){_e[Br+1]<0&&(_e[Br]=0-_e[Br]);for(var Ba=Br+1;Ba<n;Ba++)_e[Ba]/=_e[Br];_e[Br+1]+=1}if(_e[Br]=-_e[Br],Br+1<e&&_e[Br]!==0){for(var La=Br+1;La<e;La++)ze[La]=0;for(var Ha=Br+1;Ha<e;Ha++)for(var Ri=Br+1;Ri<n;Ri++)ze[Ha]+=_e[Ri]*W.get(Ha,Ri);for(var Na=Br+1;Na<n;Na++)for(var _o=-_e[Na]/_e[Br+1],Va=Br+1;Va<e;Va++)W.set(Va,Na,W.get(Va,Na)+_o*ze[Va])}if(L)for(var Ua=Br+1;Ua<n;Ua++)ie.set(Ua,Br,_e[Ua])}}var Mo=Math.min(n,e+1);if(qe<n&&(xt[qe]=W.get(qe,qe)),e<Mo&&(xt[Mo-1]=0),wr+1<Mo&&(_e[wr]=W.get(wr,Mo-1)),_e[Mo-1]=0,w){for(var hs=qe;hs<ht;hs++){for(var Ja=0;Ja<e;Ja++)qt.set(Ja,hs,0);qt.set(hs,hs,1)}for(var ii=qe-1;ii>=0;ii--)if(xt[ii]!==0){for(var Gi=ii+1;Gi<ht;Gi++){for(var To=0,Ho=ii;Ho<e;Ho++)To+=qt.get(Ho,ii)*qt.get(Ho,Gi);To=-To/qt.get(ii,ii);for(var go=ii;go<e;go++)qt.set(go,Gi,qt.get(go,Gi)+To*qt.get(go,ii))}for(var bs=ii;bs<e;bs++)qt.set(bs,ii,-qt.get(bs,ii));qt.set(ii,ii,1+qt.get(ii,ii));for(var is=0;is<ii-1;is++)qt.set(is,ii,0)}else{for(var Lo=0;Lo<e;Lo++)qt.set(Lo,ii,0);qt.set(ii,ii,1)}}if(L)for(var Ss=n-1;Ss>=0;Ss--){if(Ss<wr&&_e[Ss]!==0)for(var Xs=Ss+1;Xs<n;Xs++){for(var pl=0,wu=Ss+1;wu<n;wu++)pl+=ie.get(wu,Ss)*ie.get(wu,Xs);pl=-pl/ie.get(Ss+1,Ss);for(var Ll=Ss+1;Ll<n;Ll++)ie.set(Ll,Xs,ie.get(Ll,Xs)+pl*ie.get(Ll,Ss))}for(var $l=0;$l<n;$l++)ie.set($l,Ss,0);ie.set(Ss,Ss,1)}for(var Sf=Mo-1,Hf=0,Fc=Number.EPSILON;Mo>0;){var wo=void 0,kl=void 0;for(wo=Mo-2;wo>=-1&&wo!==-1;wo--){var ef=Number.MIN_VALUE+Fc*Math.abs(xt[wo]+Math.abs(xt[wo+1]));if(Math.abs(_e[wo])<=ef||Number.isNaN(_e[wo])){_e[wo]=0;break}}if(wo===Mo-2)kl=4;else{var Wc=void 0;for(Wc=Mo-1;Wc>=wo&&Wc!==wo;Wc--){var mg=(Wc!==Mo?Math.abs(_e[Wc]):0)+(Wc!==wo+1?Math.abs(_e[Wc-1]):0);if(Math.abs(xt[Wc])<=Fc*mg){xt[Wc]=0;break}}Wc===wo?kl=3:Wc===Mo-1?kl=1:(kl=2,wo=Wc)}switch(wo++,kl){case 1:{var rf=_e[Mo-2];_e[Mo-2]=0;for(var Pu=Mo-2;Pu>=wo;Pu--){var hu=O1(xt[Pu],rf),dl=xt[Pu]/hu,El=rf/hu;if(xt[Pu]=hu,Pu!==wo&&(rf=-El*_e[Pu-1],_e[Pu-1]=dl*_e[Pu-1]),L)for(var jf=0;jf<n;jf++)hu=dl*ie.get(jf,Pu)+El*ie.get(jf,Mo-1),ie.set(jf,Mo-1,-El*ie.get(jf,Pu)+dl*ie.get(jf,Mo-1)),ie.set(jf,Pu,hu)}break}case 2:{var hy=_e[wo-1];_e[wo-1]=0;for(var xv=wo;xv<Mo;xv++){var q_=O1(xt[xv],hy),J5=xt[xv]/q_,tk=hy/q_;if(xt[xv]=q_,hy=-tk*_e[xv],_e[xv]=J5*_e[xv],w)for(var J0=0;J0<e;J0++)q_=J5*qt.get(J0,xv)+tk*qt.get(J0,wo-1),qt.set(J0,wo-1,-tk*qt.get(J0,xv)+J5*qt.get(J0,wo-1)),qt.set(J0,xv,q_)}break}case 3:{var J_=Math.max(Math.abs(xt[Mo-1]),Math.abs(xt[Mo-2]),Math.abs(_e[Mo-2]),Math.abs(xt[wo]),Math.abs(_e[wo])),k1=xt[Mo-1]/J_,TB=xt[Mo-2]/J_,EA=_e[Mo-2]/J_,ek=xt[wo]/J_,Cz=_e[wo]/J_,py=((TB+k1)*(TB-k1)+EA*EA)/2,CA=k1*EA*(k1*EA),tb=0;(py!==0||CA!==0)&&(py<0?tb=0-Math.sqrt(py*py+CA):tb=Math.sqrt(py*py+CA),tb=CA/(py+tb));for(var dy=(ek+k1)*(ek-k1)+tb,R1=ek*Cz,Iu=wo;Iu<Mo-1;Iu++){var Jh=O1(dy,R1);Jh===0&&(Jh=Number.MIN_VALUE);var _v=dy/Jh,bv=R1/Jh;if(Iu!==wo&&(_e[Iu-1]=Jh),dy=_v*xt[Iu]+bv*_e[Iu],_e[Iu]=_v*_e[Iu]-bv*xt[Iu],R1=bv*xt[Iu+1],xt[Iu+1]=_v*xt[Iu+1],L)for(var tm=0;tm<n;tm++)Jh=_v*ie.get(tm,Iu)+bv*ie.get(tm,Iu+1),ie.set(tm,Iu+1,-bv*ie.get(tm,Iu)+_v*ie.get(tm,Iu+1)),ie.set(tm,Iu,Jh);if(Jh=O1(dy,R1),Jh===0&&(Jh=Number.MIN_VALUE),_v=dy/Jh,bv=R1/Jh,xt[Iu]=Jh,dy=_v*_e[Iu]+bv*xt[Iu+1],xt[Iu+1]=-bv*_e[Iu]+_v*xt[Iu+1],R1=bv*_e[Iu+1],_e[Iu+1]=_v*_e[Iu+1],w&&Iu<e-1)for(var em=0;em<e;em++)Jh=_v*qt.get(em,Iu)+bv*qt.get(em,Iu+1),qt.set(em,Iu+1,-bv*qt.get(em,Iu)+_v*qt.get(em,Iu+1)),qt.set(em,Iu,Jh)}_e[Mo-2]=dy,Hf=Hf+1;break}case 4:{if(xt[wo]<=0&&(xt[wo]=xt[wo]<0?-xt[wo]:0,L))for(var AA=0;AA<=Sf;AA++)ie.set(AA,wo,-ie.get(AA,wo));for(;wo<Sf&&!(xt[wo]>=xt[wo+1]);){var eb=xt[wo];if(xt[wo]=xt[wo+1],xt[wo+1]=eb,L&&wo<n-1)for(var D1=0;D1<n;D1++)eb=ie.get(D1,wo+1),ie.set(D1,wo+1,ie.get(D1,wo)),ie.set(D1,wo,eb);if(w&&wo<e-1)for(var B1=0;B1<e;B1++)eb=qt.get(B1,wo+1),qt.set(B1,wo+1,qt.get(B1,wo)),qt.set(B1,wo,eb);wo++}Hf=0,Mo--;break}}}if(H){var Az=ie;ie=qt,qt=Az}this.m=e,this.n=n,this.s=xt,this.U=qt,this.V=ie}return(0,eA.Z)(i,[{key:"solve",value:function(t){for(var e=t,n=this.threshold,a=this.s.length,o=_s.zeros(a,a),u=0;u<a;u++)Math.abs(this.s[u])<=n?o.set(u,u,0):o.set(u,u,1/this.s[u]);for(var f=this.U,m=this.rightSingularVectors,x=m.mmul(o),w=m.rows,L=f.rows,H=_s.zeros(w,L),W=0;W<w;W++)for(var et=0;et<L;et++){for(var ht=0,bt=0;bt<a;bt++)ht+=x.get(W,bt)*f.get(et,bt);H.set(W,et,ht)}return H.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(_s.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,a=t.columns,o=new _s(n,this.s.length),u=0;u<n;u++)for(var f=0;f<a;f++)Math.abs(this.s[f])>e&&o.set(u,f,t.get(u,f)/this.s[f]);for(var m=this.U,x=m.rows,w=m.columns,L=new _s(n,x),H=0;H<n;H++)for(var W=0;W<x;W++){for(var et=0,ht=0;ht<w;ht++)et+=o.get(H,ht)*m.get(W,ht);L.set(H,W,et)}return L}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,a=0,o=n.length;a<o;a++)n[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return _s.diag(this.s)}}]),i}(),ON=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.linkDistance=50,t.scaledDistances=null,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=n===void 0?[]:n,o=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=o[0],e[0].y=o[1];return}var u=t.linkDistance,f=b5({nodes:e,edges:a},!1),m=_5(f);t.handleInfinity(m);var x=CR(m,u);t.scaledDistances=x;var w=t.runMDS();t.positions=w,w.forEach(function(L,H){e[H].x=L[0]+o[0],e[H].y=L[1]+o[1]})}},r.prototype.runMDS=function(){var t=this,e=2,n=t.scaledDistances,a=_s.mul(_s.pow(n,2),-.5),o=a.mean("row"),u=a.mean("column"),f=a.mean();a.add(f).subRowVector(o).subColumnVector(u);var m=new OD(a),x=_s.sqrt(m.diagonalMatrix).diagonal();return m.leftSingularVectors.toJSON().map(function(w){return _s.mul([w],[x]).toJSON()[0].splice(0,e)})},r.prototype.handleInfinity=function(t){var e=-999999;t.forEach(function(n){n.forEach(function(a){a!==Infinity&&e<a&&(e=a)})}),t.forEach(function(n,a){n.forEach(function(o,u){o===Infinity&&(t[a][u]=e)})})},r}(Ad),LN=ON,kN=function(){function i(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}return i.prototype.layout=function(){var r=this,t=r.dimension,e=r.distances,n=r.linkDistance;try{var a=_s.mul(_s.pow(e,2),-.5),o=a.mean("row"),u=a.mean("column"),f=a.mean();a.add(f).subRowVector(o).subColumnVector(u);var m=new OD(a),x=_s.sqrt(m.diagonalMatrix).diagonal();return m.leftSingularVectors.toJSON().map(function(et){return _s.mul([et],[x]).toJSON()[0].splice(0,t)})}catch(et){for(var w=[],L=0;L<e.length;L++){var H=Math.random()*n,W=Math.random()*n;w.push([H,W])}return w}},i}(),RN=kN,DN=800,BN=function(){function i(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}return i.prototype.layout=function(){var r=this,t=r.positions,e=[],n=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var o=0;o<n;o++)t.forEach(function(u,f){e[f]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return t},i.prototype.getRepulsion=function(){var r=this,t=r.positions,e=r.nodes,n=r.disp,a=r.k,o=r.radii||[];t.forEach(function(u,f){n[f]={x:0,y:0},t.forEach(function(m,x){if(f!==x&&o[f]===o[x]){var w=u[0]-m[0],L=u[1]-m[1],H=Math.sqrt(w*w+L*L);if(H===0){H=1;var W=f>x?1:-1;w=.01*W,L=.01*W}if(H<r.nodeSizeFunc(e[f])/2+r.nodeSizeFunc(e[x])/2){var et=a*a/H;n[f].x+=w/H*et,n[f].y+=L/H*et}}})})},i.prototype.updatePositions=function(){var r=this,t=r.positions,e=r.disp,n=r.speed,a=r.strictRadial,o=r.focusID,u=r.maxDisplace||r.width/10;a&&e.forEach(function(m,x){var w=t[x][0]-t[o][0],L=t[x][1]-t[o][1],H=Math.sqrt(w*w+L*L),W=L/H,et=-w/H,ht=Math.sqrt(m.x*m.x+m.y*m.y),bt=Math.acos((W*m.x+et*m.y)/ht);bt>Math.PI/2&&(bt-=Math.PI/2,W*=-1,et*=-1);var xt=Math.cos(bt)*ht;m.x=W*xt,m.y=et*xt});var f=r.radii;t.forEach(function(m,x){if(x!==o){var w=Math.sqrt(e[x].x*e[x].x+e[x].y*e[x].y);if(w>0&&x!==o){var L=Math.min(u*(n/DN),w);if(m[0]+=e[x].x/w*L,m[1]+=e[x].y/w*L,a){var H=m[0]-t[o][0],W=m[1]-t[o][1],et=Math.sqrt(H*H+W*W);H=H/et*f[x],W=W/et*f[x],m[0]=t[o][0]+H,m[1]=t[o][1]+W}}}})},i}(),FN=BN;function NN(i){for(var r=i.length,t=i[0].length,e=[],n=0;n<r;n++){for(var a=[],o=0;o<t;o++)i[n][o]!==0?a.push(1/(i[n][o]*i[n][o])):a.push(0);e.push(a)}return e}function zN(i,r){var t=-1;return i.forEach(function(e,n){e.id===r&&(t=n)}),t}function LD(i,r){return Math.sqrt((i[0]-r[0])*(i[0]-r[0])+(i[1]-r[1])*(i[1]-r[1]))}var GN=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.focusNode=null,t.unitRadius=null,t.linkDistance=50,t.preventOverlap=!1,t.strictRadial=!0,t.maxPreventOverlapIteration=200,t.sortStrength=10,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[],a=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.linkDistance,u=null;if((0,Zo.default)(t.focusNode)){for(var f=!1,m=0;m<e.length;m++)e[m].id===t.focusNode&&(u=e[m],t.focusNode=u,f=!0,m=e.length);f||(u=null)}else u=t.focusNode;u||(u=e[0],t.focusNode=u);var x=zN(e,u.id);t.focusIndex=x;var w=b5({nodes:e,edges:n},!1),L=_5(w),H=t.maxToFocus(L,x);t.handleInfinity(L,x,H+1),t.distances=L;var W=L[x];!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var et=t.width||500,ht=t.height||500,bt=et-a[0]>a[0]?a[0]:et-a[0],xt=ht-a[1]>a[1]?a[1]:ht-a[1];bt===0&&(bt=et/2),xt===0&&(xt=ht/2);var qt=xt>bt?bt:xt,ie=Math.max.apply(Math,W),_e=[];W.forEach(function(Li,_i){t.unitRadius||(t.unitRadius=qt/ie),_e[_i]=Li*t.unitRadius}),t.radii=_e;var ze=t.eIdealDisMatrix();t.eIdealDistances=ze;var rr=NN(ze);t.weights=rr;var sr=new RN({distances:ze,linkDistance:o}),qe=sr.layout();qe.forEach(function(Li){l0(Li[0])&&(Li[0]=Math.random()*o),l0(Li[1])&&(Li[1]=Math.random()*o)}),t.positions=qe,qe.forEach(function(Li,_i){e[_i].x=Li[0]+a[0],e[_i].y=Li[1]+a[1]}),qe.forEach(function(Li){Li[0]-=qe[x][0],Li[1]-=qe[x][1]}),t.run();var wr=t.preventOverlap,Vr=t.nodeSize,Br,Tn=t.strictRadial;if(wr){var Hn=t.nodeSpacing,Un;(0,vv.default)(Hn)?Un=function(){return Hn}:(0,uc.default)(Hn)?Un=Hn:Un=function(){return 0},Vr?(0,Rs.default)(Vr)?Br=function(_i){var bi=Vr[0]>Vr[1]?Vr[0]:Vr[1];return bi+Un(_i)}:Br=function(_i){return Vr+Un(_i)}:Br=function(_i){if(_i.size){if((0,Rs.default)(_i.size)){var bi=_i.size[0]>_i.size[1]?_i.size[0]:_i.size[1];return bi+Un(_i)}return _i.size+Un(_i)}return 10+Un(_i)};var Ei={nodeSizeFunc:Br,adjMatrix:w,positions:qe,radii:_e,height:ht,width:et,strictRadial:Tn,focusID:x,iterations:t.maxPreventOverlapIteration||200,k:qe.length/4.5,nodes:e},Ti=new FN(Ei);qe=Ti.layout()}qe.forEach(function(Li,_i){e[_i].x=Li[0]+a[0],e[_i].y=Li[1]+a[1]})}},r.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],u=t.radii||[],f=0;f<=e;f++){var m=f/e;t.oneIteration(m,n,u,o,a)}},r.prototype.oneIteration=function(t,e,n,a,o){var u=this,f=1-t,m=u.focusIndex;e.forEach(function(x,w){var L=LD(x,[0,0]),H=L===0?0:1/L;if(w!==m){var W=0,et=0,ht=0;e.forEach(function(xt,qt){if(w!==qt){var ie=LD(x,xt),_e=ie===0?0:1/ie,ze=a[qt][w];ht+=o[w][qt],W+=o[w][qt]*(xt[0]+ze*(x[0]-xt[0])*_e),et+=o[w][qt]*(xt[1]+ze*(x[1]-xt[1])*_e)}});var bt=n[w]===0?0:1/n[w];ht*=f,ht+=t*bt*bt,W*=f,W+=t*bt*x[0]*H,x[0]=W/ht,et*=f,et+=t*bt*x[1]*H,x[1]=et/ht}})},r.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,a=t.linkDistance,o=t.radii||[],u=t.unitRadius||50,f=[];return n&&n.forEach(function(m,x){var w=[];m.forEach(function(L,H){if(x===H)w.push(0);else if(o[x]===o[H])if(t.sortBy==="data")w.push(L*(Math.abs(x-H)*t.sortStrength)/(o[x]/u));else if(t.sortBy){var W=e[x][t.sortBy]||0,et=e[H][t.sortBy]||0;(0,Zo.default)(W)&&(W=W.charCodeAt(0)),(0,Zo.default)(et)&&(et=et.charCodeAt(0)),w.push(L*(Math.abs(W-et)*t.sortStrength)/(o[x]/u))}else w.push(L*a/(o[x]/u));else{var ht=(a+u)/2;w.push(L*ht)}}),f.push(w)}),f},r.prototype.handleInfinity=function(t,e,n){for(var a=t.length,o=0;o<a;o++)if(t[e][o]===Infinity){t[e][o]=n,t[o][e]=n;for(var u=0;u<a;u++)t[o][u]!==Infinity&&t[e][u]===Infinity&&(t[e][u]=n+t[o][u],t[u][e]=n+t[o][u])}for(var o=0;o<a;o++)if(o!==e){for(var u=0;u<a;u++)if(t[o][u]===Infinity){var f=Math.abs(t[e][o]-t[e][u]);f=f===0?1:f,t[o][u]=f}}},r.prototype.maxToFocus=function(t,e){for(var n=0,a=0;a<t[e].length;a++)t[e][a]!==Infinity&&(n=t[e][a]>n?t[e][a]:n);return n},r}(Ad),UN=GN,VN=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},r.prototype.execute=function(){var t=this,e=t.nodes,n=.9,a=t.center;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(function(o){o.x=(Math.random()-.5)*n*t.width+a[0],o.y=(Math.random()-.5)*n*t.height+a[1]})},r}(Ad),ZN=VN,HN=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=100,t.gravity=10,t.comboGravity=10,t.linkDistance=10,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.edgeStrength=.2,t.nodeStrength=30,t.preventOverlap=!1,t.preventNodeOverlap=!1,t.preventComboOverlap=!1,t.collideStrength=void 0,t.nodeCollideStrength=void 0,t.comboCollideStrength=void 0,t.optimizeRangeFactor=1,t.onTick=function(){},t.onLayoutEnd=function(){},t.depthAttractiveForceScale=.5,t.depthRepulsiveForceScale=2,t.nodes=[],t.edges=[],t.combos=[],t.comboTrees=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.oriComboMap={},t.nodeIdxMap={},t.comboMap={},t.previousLayouted=!1,t}return r.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}t.initVals(),t.run(),t.onLayoutEnd()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,u=t.comboMap;t.previousLayouted||t.initPos(u);for(var f=function(H){var W=[];e.forEach(function(et,ht){W[ht]={x:0,y:0}}),t.applyCalculate(W),t.applyComboCenterForce(W),e.forEach(function(et,ht){!(0,d.isNumber)(et.x)||!(0,d.isNumber)(et.y)||(et.x+=W[ht].x*o,et.y+=W[ht].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},m=0;m<n;m++)f(m);var x=[0,0];e.forEach(function(L){!(0,d.isNumber)(L.x)||!(0,d.isNumber)(L.y)||(x[0]+=L.x,x[1]+=L.y)}),x[0]/=e.length,x[1]/=e.length;var w=[a[0]-x[0],a[1]-x[1]];e.forEach(function(L,H){!(0,d.isNumber)(L.x)||!(0,d.isNumber)(L.y)||(L.x+=w[0],L.y+=w[1])}),t.combos.forEach(function(L){var H=u[L.id];H&&H.empty&&(L.x=H.cx||L.x,L.y=H.cy||L.y)}),t.previousLayouted=!0},r.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,a=t.combos,o={},u={},f={};n.forEach(function(Un,Ei){u[Un.id]=Un,f[Un.id]=Ei}),t.nodeMap=u,t.nodeIdxMap=f;var m={};a.forEach(function(Un){m[Un.id]=Un}),t.oriComboMap=m,t.comboMap=t.getComboMap();var x=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||x,t.preventNodeOverlap=t.preventNodeOverlap||x;var w=t.collideStrength;w&&(t.comboCollideStrength=w,t.nodeCollideStrength=w);for(var L=0;L<e.length;++L)o[e[L].source]?o[e[L].source]++:o[e[L].source]=1,o[e[L].target]?o[e[L].target]++:o[e[L].target]=1;for(var H=[],L=0;L<e.length;++L)H[L]=o[e[L].source]/(o[e[L].source]+o[e[L].target]);this.bias=H;var W=t.nodeSize,et=t.nodeSpacing,ht,bt;if((0,d.isNumber)(et)?bt=function(){return et}:(0,d.isFunction)(et)?bt=et:bt=function(){return 0},this.nodeSpacing=bt,!W)ht=function(Ei){if(Ei.size){if((0,d.isArray)(Ei.size)){var Ti=Ei.size[0]>Ei.size[1]?Ei.size[0]:Ei.size[1];return Ti/2}return Ei.size/2}return 10};else if((0,d.isFunction)(W))ht=function(Ei){return W(Ei)};else if((0,d.isArray)(W)){var xt=W[0]>W[1]?W[0]:W[1],qt=xt/2;ht=function(Ei){return qt}}else{var ie=W/2;ht=function(Ei){return ie}}this.nodeSize=ht;var _e=t.comboSpacing,ze;(0,d.isNumber)(_e)?ze=function(){return _e}:(0,d.isFunction)(_e)?ze=_e:ze=function(){return 0},this.comboSpacing=ze;var rr=t.comboPadding,sr;(0,d.isNumber)(rr)?sr=function(){return rr}:(0,d.isArray)(rr)?sr=function(){return Math.max.apply(null,rr)}:(0,d.isFunction)(rr)?sr=rr:sr=function(){return 0},this.comboPadding=sr;var qe=this.linkDistance,wr;qe||(qe=10),(0,d.isNumber)(qe)?wr=function(Ei){return qe}:wr=qe,this.linkDistance=wr;var Vr=this.edgeStrength,Br;Vr||(Vr=1),(0,d.isNumber)(Vr)?Br=function(Ei){return Vr}:Br=Vr,this.edgeStrength=Br;var Tn=this.nodeStrength,Hn;Tn||(Tn=30),(0,d.isNumber)(Tn)?Hn=function(Ei){return Tn}:Hn=Tn,this.nodeStrength=Hn},r.prototype.initPos=function(t){var e=this,n=e.nodes;n.forEach(function(a,o){if(a.comboId){var u=t[a.comboId];a.x=u.cx+100/(o+1),a.y=u.cy+100/(o+1)}else a.x=100/(o+1),a.y=100/(o+1)})},r.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.nodeIdxMap,a=t.comboTrees,o=t.oriComboMap,u={};return(a||[]).forEach(function(f){var m=[];Cd(f,function(x){if(x.itemType==="node"||!o[x.id])return!0;if(u[x.id]===void 0){var w={name:x.id,cx:0,cy:0,count:0,depth:t.oriComboMap[x.id].depth,children:[]};u[x.id]=w}var L=x.children;L&&L.forEach(function(xt){if(!u[xt.id]&&!e[xt.id])return!0;m.push(xt)});var H=u[x.id];if(H.cx=0,H.cy=0,m.length===0){H.empty=!0;var W=o[x.id],et=Object.keys(e).length,ht=x.id+"-visual-child-"+et,bt={id:ht,x:W.x,y:W.y,depth:H.depth+1,itemType:"node"};t.nodes.push(bt),e[ht]=bt,n[ht]=et,H.cx=W.x,H.cy=W.y,m.push(bt)}return m.forEach(function(xt){if(H.count++,xt.itemType!=="node"){var qt=u[xt.id];(0,d.isNumber)(qt.cx)&&(H.cx+=qt.cx),(0,d.isNumber)(qt.cy)&&(H.cy+=qt.cy);return}var ie=e[xt.id];!ie||((0,d.isNumber)(ie.x)&&(H.cx+=ie.x),(0,d.isNumber)(ie.y)&&(H.cy+=ie.y))}),H.cx/=H.count,H.cy/=H.count,H.children=m,!0})}),u},r.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,a=e.comboGravity||n,o=this.alpha,u=e.comboTrees,f=e.nodeIdxMap,m=e.nodeMap,x=e.comboMap;(u||[]).forEach(function(w){Cd(w,function(L){if(L.itemType==="node")return!0;var H=x[L.id];if(!H)return!0;var W=x[L.id],et=(W.depth+1)*.5,ht=W.cx,bt=W.cy;return W.cx=0,W.cy=0,W.children.forEach(function(xt){if(xt.itemType!=="node"){var qt=x[xt.id];qt&&(0,d.isNumber)(qt.cx)&&(W.cx+=qt.cx),qt&&(0,d.isNumber)(qt.cy)&&(W.cy+=qt.cy);return}var ie=m[xt.id],_e=ie.x-ht||.005,ze=ie.y-bt||.005,rr=Math.sqrt(_e*_e+ze*ze),sr=f[ie.id],qe=a*o/rr*et;t[sr].x-=_e*qe,t[sr].y-=ze*qe,(0,d.isNumber)(ie.x)&&(W.cx+=ie.x),(0,d.isNumber)(ie.y)&&(W.cy+=ie.y)}),W.cx/=W.count,W.cy/=W.count,!0})})},r.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,a=e.nodes,o={};a.forEach(function(f,m){a.forEach(function(x,w){if(!(m<w)){var L=f.x-x.x||.005,H=f.y-x.y||.005,W=L*L+H*H,et=Math.sqrt(W);W<1&&(W=et),o[f.id+"-"+x.id]={vx:L,vy:H,vl2:W,vl:et},o[x.id+"-"+f.id]={vx:-L,vy:-H,vl2:W,vl:et}}})}),e.updateComboSizes(n),e.calRepulsive(t,o),e.calAttractive(t,o);var u=e.preventComboOverlap;u&&e.comboNonOverlapping(t,n)},r.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,a=e.nodeMap,o=e.nodeSize,u=e.comboSpacing,f=e.comboPadding;(n||[]).forEach(function(m){var x=[];Cd(m,function(w){if(w.itemType==="node")return!0;var L=t[w.id];if(!!L){var H=w.children;H&&H.forEach(function(ht){!t[ht.id]&&!a[ht.id]||x.push(ht)}),L.minX=Infinity,L.minY=Infinity,L.maxX=-Infinity,L.maxY=-Infinity,x.forEach(function(ht){if(ht.itemType!=="node")return!0;var bt=a[ht.id];if(!bt)return!0;var xt=o(bt),qt=bt.x-xt,ie=bt.y-xt,_e=bt.x+xt,ze=bt.y+xt;L.minX>qt&&(L.minX=qt),L.minY>ie&&(L.minY=ie),L.maxX<_e&&(L.maxX=_e),L.maxY<ze&&(L.maxY=ze)});var W=e.oriComboMap[w.id].size||mi.defaultCombo.size;(0,d.isArray)(W)&&(W=W[0]);var et=Math.max(L.maxX-L.minX,L.maxY-L.minY,W);return L.r=et/2+u(L)/2+f(L),!0}})})},r.prototype.comboNonOverlapping=function(t,e){var n=this,a=n.comboTree,o=n.comboCollideStrength,u=n.nodeIdxMap,f=n.nodeMap;Cd(a,function(m){if(!(!e[m.id]&&!f[m.id]&&m.id!=="comboTreeRoot")){var x=m.children;return x&&x.length>1&&x.forEach(function(w,L){if(w.itemType!=="node"){var H=e[w.id];!H||x.forEach(function(W,et){if(!(L<=et)&&W.itemType!=="node"){var ht=e[W.id];if(!!ht){var bt=H.cx-ht.cx||.005,xt=H.cy-ht.cy||.005,qt=bt*bt+xt*xt,ie=H.r,_e=ht.r,ze=ie+_e,rr=_e*_e,sr=ie*ie;if(qt<ze*ze){var qe=w.children;if(!qe||qe.length===0)return;var wr=W.children;if(!wr||wr.length===0)return;var Vr=Math.sqrt(qt),Br=(ze-Vr)/Vr*o,Tn=bt*Br,Hn=xt*Br,Un=rr/(sr+rr),Ei=1-Un;qe.forEach(function(Ti){if(Ti.itemType==="node"&&!!f[Ti.id]){var Li=u[Ti.id];wr.forEach(function(_i){if(_i.itemType==="node"&&!!f[_i.id]){var bi=u[_i.id];t[Li].x+=Tn*Un,t[Li].y+=Hn*Un,t[bi].x-=Tn*Ei,t[bi].y-=Hn*Ei}})}})}}}})}}),!0}})},r.prototype.calRepulsive=function(t,e){var n=this,a=n.nodes,o=n.width*n.optimizeRangeFactor,u=n.nodeStrength,f=n.alpha,m=n.nodeCollideStrength,x=n.preventNodeOverlap,w=n.nodeSize,L=n.nodeSpacing,H=n.depthRepulsiveForceScale,W=n.center;a.forEach(function(et,ht){if(!(!et.x||!et.y)){if(W){var bt=n.gravity,xt=et.x-W[0]||.005,qt=et.y-W[1]||.005,ie=Math.sqrt(xt*xt+qt*qt);t[ht].x-=xt*bt*f/ie,t[ht].y-=qt*bt*f/ie}a.forEach(function(_e,ze){if(ht!==ze&&!(!_e.x||!_e.y)){var rr=e[et.id+"-"+_e.id],sr=rr.vl2,qe=rr.vl;if(!(qe>o)){var wr=e[et.id+"-"+_e.id],Vr=wr.vx,Br=wr.vy,Tn=Math.abs(_e.depth-et.depth)+1||1;_e.comboId!==et.comboId&&Tn++;var Hn=Tn?Math.pow(H,Tn):1,Un=u(_e)*f/sr*Hn;if(t[ht].x+=Vr*Un,t[ht].y+=Br*Un,ht<ze&&x){var Ei=w(et)+L(et),Ti=w(_e)+L(_e),Li=Ei+Ti;if(sr<Li*Li){var _i=(Li-qe)/qe*m,bi=Ti*Ti,Ba=bi/(Ei*Ei+bi),La=Vr*_i,Ha=Br*_i;t[ht].x+=La*Ba,t[ht].y+=Ha*Ba,Ba=1-Ba,t[ze].x-=La*Ba,t[ze].y-=Ha*Ba}}}}})}})},r.prototype.calAttractive=function(t,e){var n=this,a=n.edges,o=n.linkDistance,u=n.alpha,f=n.edgeStrength,m=n.bias,x=n.depthAttractiveForceScale;a.forEach(function(w,L){if(!(!w.source||!w.target||w.source===w.target)){var H=n.nodeIdxMap[w.source],W=n.nodeIdxMap[w.target],et=n.nodeMap[w.source],ht=n.nodeMap[w.target],bt=Math.abs(et.depth-ht.depth);et.comboId===ht.comboId&&(bt=bt/2);var xt=bt?Math.pow(x,bt):1;if(et.comboId!==ht.comboId&&xt===1?xt=x/2:et.comboId===ht.comboId&&(xt=2),!(!(0,d.isNumber)(ht.x)||!(0,d.isNumber)(et.x)||!(0,d.isNumber)(ht.y)||!(0,d.isNumber)(et.y))){var qt=e[w.target+"-"+w.source],ie=qt.vl,_e=qt.vx,ze=qt.vy,rr=(ie-o(w))/ie*u*f(w)*xt,sr=_e*rr,qe=ze*rr,wr=m[L];t[W].x-=sr*wr,t[W].y-=qe*wr,t[H].x+=sr*(1-wr),t[H].y+=qe*(1-wr)}}})},r}(Ad),jN=HN,XN={circular:n6,concentric:a6,dagre:u6,force:j6,g6force:K6,comboForce:jN,fruchterman:q6,grid:tN,mds:LN,radial:UN,random:ZN};(0,gs.default)(XN,function(i,r){hD.registerLayout(r,{},i)});var Y_=hD,G5=self;function YN(i){var r=i.data.type;return r===h0.RUN}function WN(i){var r=i.data.type;switch(r){case h0.RUN:{var t=i.data,e=t.nodes,n=t.edges,a=t.layoutCfg,o=a===void 0?{}:a,u=o.type,f=Y_[u];if(!f){G5.postMessage({type:h0.ERROR,message:"layout "+u+" not found"});break}var m=new f(o);m.init({nodes:e,edges:n}),m.execute(),G5.postMessage({type:h0.END,nodes:e}),m.destroy();break}default:break}}G5.onmessage=function(i){YN(i)&&WN(i)};var KN=null;function oA(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oA=function(t){return typeof t}:oA=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oA(i)}var $N=function(r){return setTimeout(r,16)},QN=function(r){return clearTimeout(r)},sA={requestAnimationFrame:function(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||$N;return t(r)},cancelAnimationFrame:function(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||QN;return t(r)}},qN=function(){function i(r){this.graph=r,this.layoutCfg=r.get("layout")||{},this.layoutType=this.layoutCfg.type,this.worker=null,this.workerData={},this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new KN,this.worker)},i.prototype.stopWorker=function(){var r=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,r.requestId&&(sA.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(sA.cancelAnimationFrame(r.requestId2),r.requestId2=null))},i.prototype.getLayoutType=function(){return this.layoutCfg.type},i.prototype.layout=function(r){var t=this.graph;this.data=this.setDataFromGraph();var e=this.data.nodes;if(!e)return!1;var n=t.get("width"),a=t.get("height"),o={};Object.assign(o,{width:n,height:a,center:[n/2,a/2]},this.layoutCfg),this.layoutCfg=o;var u=!!this.layoutType,f=this.layoutMethod;f&&f.destroy(),t.emit("beforelayout");var m=this.initPositions(o.center,e);if(this.stopWorker(),o.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;if(this.layoutType==="force"||this.layoutType==="g6force"){var x=o.onTick,w=function(){x&&x(),t.refreshPositions()};o.tick=w;var L=o.onLayoutEnd;o.onLayoutEnd=function(){L&&L(),t.emit("afterlayout")}}else this.layoutType==="comboForce"&&(o.comboTrees=t.get("comboTrees"));var H=!1;if(this.layoutType!==void 0){try{f=new Y_[this.layoutType](o)}catch(bt){return console.warn("The layout method: "+this.layoutType+" does not exist! Please specify it first."),!1}if(H=f.enableTick,H){var W=o.onTick,et=o.onLayoutEnd,w=function(){W&&W(),t.refreshPositions()};f.tick=w;var ht=function(){et&&et(),t.emit("afterlayout")};f.onLayoutEnd=ht}f.init(this.data),u&&f.execute(),this.layoutMethod=f}return(u||!m)&&this.layoutType!=="force"&&!H&&(t.emit("afterlayout"),this.refreshLayout()),!1},i.prototype.layoutWithWorker=function(r,t){var e=this,n=r.nodes,a=r.edges,o=this,u=o.layoutCfg,f=o.graph,m=this.getWorker(),x=this.workerData;if(!m)return!1;x.requestId=null,x.requestId2=null,x.currentTick=null,x.currentTickData=null;var w=t8(u,function(L){return typeof L!="function"});return m.postMessage({type:h0.RUN,nodes:n,edges:a,layoutCfg:w}),m.onmessage=function(L){e.handleWorkerMessage(L,r,t)},!0},i.prototype.handleWorkerMessage=function(r,t,e){var n=this,a=n.graph,o=n.workerData,u=n.layoutCfg,f=r.data,m=f.type,x=function(){u.onTick&&u.onTick()},w=function(){u.onLayoutEnd&&u.onLayoutEnd(),a.emit("afterlayout")};switch(m){case h0.TICK:o.currentTick=f.currentTick,o.currentTickData=f,o.requestId||(o.requestId=sA.requestAnimationFrame(function(){U5(t,f),a.refreshPositions(),x(),f.currentTick===1&&e&&e(),f.currentTick===f.totalTicks?w():o.currentTick===f.totalTicks&&(o.requestId2=sA.requestAnimationFrame(function(){U5(t,o.currentTickData),a.refreshPositions(),o.requestId2=null,x(),w()})),o.requestId=null}));break;case h0.END:o.currentTick==null&&(U5(t,f),this.refreshLayout(),e&&e(),a.emit("afterlayout"));break;case h0.ERROR:break;default:break}},i.prototype.refreshLayout=function(){var r=this.graph;r.get("animate")?r.positionsAnimate():r.refreshPositions()},i.prototype.updateLayoutCfg=function(r){var t=this,e=t.graph,n=t.layoutMethod;if(this.layoutType=r.type,!n){console.warn("You did not assign any layout type and the graph has no previous layout method!");return}this.data=this.setDataFromGraph(),this.stopWorker(),!(r.workerEnabled&&this.layoutWithWorker(this.data,null))&&(n.init(this.data),n.updateCfg(r),e.emit("beforelayout"),n.execute(),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout())},i.prototype.changeLayout=function(r){var t=this,e=t.graph,n=t.layoutMethod;this.layoutType=r,this.layoutCfg=e.get("layout")||{},this.layoutCfg.type=r,n&&n.destroy(),this.layout()},i.prototype.changeData=function(){var r=this.layoutMethod;r&&r.destroy(),this.layout()},i.prototype.destroyLayout=function(){var r=this,t=r.layoutMethod,e=r.graph;t&&t.destroy(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},i.prototype.setDataFromGraph=function(){var r=[],t=[],e=[],n=this.graph.getNodes(),a=this.graph.getEdges(),o=this.graph.getCombos();n.forEach(function(f){if(!!f.isVisible()){var m=f.getModel();r.push(m)}}),a.forEach(function(f){if(!(f.destroyed||!f.isVisible())){var m=f.getModel();m.isComboEdge||t.push(m)}}),o.forEach(function(f){if(!(f.destroyed||!f.isVisible())){var m=f.getModel();e.push(m)}});var u={nodes:r,edges:t,combos:e};return u},i.prototype.relayout=function(r){var t=this,e=t.graph,n=t.layoutMethod,a=t.layoutCfg;if(r){this.data=this.setDataFromGraph();var o=this.data.nodes;if(!o)return!1;this.initPositions(a.center,o),n.init(this.data)}this.layoutType==="force"&&(n.ticking=!1,n.forceSimulation.stop()),e.emit("beforelayout"),n.execute(r),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout()},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var r=this.graph,t=r.get("data"),e=t.nodes;if(!(e[0].x===void 0||e[0].x===null||l0(e[0].x))){var n=[0,0];e.forEach(function(a){n[0]+=a.x,n[1]+=a.y}),n[0]/=e.length,n[1]/=e.length,e.forEach(function(a){a.x-=n[0],a.y-=n[1]})}},i.prototype.initPositions=function(r,t){var e=this.graph;if(!t)return!1;var n=!0,a=e.get("width")*.85,o=e.get("height")*.85,u=t.length,f=Math.ceil(Math.sqrt(u)*(a/o)),m=Math.ceil(u/f),x=a/(f-1),w=o/(m-1);(!isFinite(x)||!x)&&(x=0),(!isFinite(w)||!x)&&(w=0);var L=r[0]-a/2,H=r[1]-o/2;return t.forEach(function(W,et){l0(W.x)&&(n=!1,W.x=et%f*x+L),l0(W.y)&&(n=!1,W.y=Math.floor(et/f)*w+H)}),n},i.prototype.destroy=function(){var r=this.layoutMethod;this.graph=null,r&&r.destroy();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0},i}(),JN=qN;function U5(i,r){var t=i.nodes,e=r.nodes;t.forEach(function(n,a){n.x=e[a].x,n.y=e[a].y})}function t8(i,r){var t={};return i&&oA(i)==="object"?(Object.keys(i).forEach(function(e){i.hasOwnProperty(e)&&r(i[e])&&(t[e]=i[e])}),t):i}var fy=null,e8=function(){function i(r){this.graph=r,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return i.checkCache=function(r,t,e){if(!!e[t]){var n=e[t].indexOf(r);n>=0&&e[t].splice(n,1)}},i.cacheState=function(r,t,e){e[t]||(e[t]=[]),e[t].push(r)},i.prototype.updateState=function(r,t,e){var n=this,a=i.checkCache,o=i.cacheState;if(!r.destroyed){var u=this.cachedStates,f=u.enabled,m=u.disabled;e?(a(r,t,m),o(r,t,f)):(a(r,t,f),o(r,t,m)),fy&&clearTimeout(fy),fy=setTimeout(function(){fy=null,n.updateGraphStates()},16)}},i.prototype.updateStates=function(r,t,e){var n=this;(0,Zo.default)(t)?this.updateState(r,t,e):t.forEach(function(a){n.updateState(r,a,e)})},i.prototype.updateGraphStates=function(){var r=this.graph.get("states"),t=this.cachedStates;(0,gs.default)(t.disabled,function(e,n){r[n]&&(r[n]=r[n].filter(function(a){return e.indexOf(a)<0&&!e.destroyed}))}),(0,gs.default)(t.enabled,function(e,n){if(!r[n])r[n]=e;else{var a={};r[n].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),e.forEach(function(o){if(!o.destroyed){var u=o.get("id");a[u]||(a[u]=!0,r[n].push(o))}})}}),this.graph.emit("graphstatechange",{states:r}),this.cachedStates={enabled:{},disabled:{}}},i.prototype.destroy=function(){this.graph=null,this.cachedStates=null,fy&&clearTimeout(fy),fy=null,this.destroyed=!0},i}(),r8=e8,V5=null,n8=function(){function i(r){this.graph=r;var t=r.get("groupStyle");this.styles=(0,Vf.default)({},i.getDefaultCfg(),t),this.customGroup={},this.delegateInGroup={},this.nodePoint=[],this.destroyed=!1}return i.getDefaultCfg=function(){return{default:{lineWidth:1,stroke:"#A3B1BF",strokeOpacity:.9,fill:"#F3F9FF",fillOpacity:.8,opacity:.8,disCoefficient:.6,minDis:30,maxDis:30},hover:{stroke:"#faad14",fill:"#ffe58f",fillOpacity:.3,opacity:.3,lineWidth:3},collapse:{r:30,width:80,height:40,stroke:"#A3B1BF",lineWidth:3,fill:"#F3F9FF",offsetX:-15,offsetY:5},icon:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",operatorBtn:{collapse:{img:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",width:16,height:16},expand:{width:16,height:16,img:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg"}},visible:!1}},i.prototype.create=function(r,t,e,n,a,o){e===void 0&&(e="circle"),n===void 0&&(n=0),a===void 0&&(a=!1),o===void 0&&(o={});var u=this.graph,f=u.get("customGroup"),m=f.get("children").map(function(Ha){return Ha.get("id")});if(m.indexOf(r)>-1){console.warn("\u5DF2\u7ECF\u5B58\u5728ID\u4E3A "+r+" \u7684\u5206\u7EC4\uFF0C\u8BF7\u91CD\u65B0\u8BBE\u7F6E\u5206\u7EC4ID\uFF01");return}var x=f.addGroup({id:r,zIndex:n}),w=this.styles.default,L=this.calculationGroupPosition(t),H=L.x,W=L.y,et=L.width,ht=L.height,bt=L.maxX,xt=this.getGroupPadding(r),qt=u.get("groupBBoxs");qt[r]={x:H,y:W,width:et,height:ht,maxX:bt};var ie=null;if(a){var _e=u.get("groups");t.forEach(function(Ha){var Ri=u.findById(Ha),Na=Ri.getModel();Na.groupId||(Na.groupId=r)}),_e.find(function(Ha){return Ha.id===r})||(_e.push({id:r,title:o}),u.set({groups:_e}))}var ze=u.get("groups").filter(function(Ha){return Ha.id===r});ze&&ze.length>0&&(ie=ze[0].title);var rr=0,sr=0,qe=null;if(e==="circle"){var wr=et>ht?et/2:ht/2,Vr=(et+2*H)/2,Br=(ht+2*W)/2,Tn=wr+xt;qe=x.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:Vr,y:Br,r:Tn}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"circle-group-shape"}),rr=Vr,sr=Br-Tn,this.setDeletageGroupByStyle(r,x,{width:et,height:ht,x:Vr,y:Br,r:Tn})}else{var Hn=xt*w.disCoefficient;qe=x.addShape("rect",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H-Hn,y:W-Hn,width:et+Hn*2,height:ht+Hn*2}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"rect-group-shape"}),rr=H-Hn+15,sr=W-Hn+15,this.setDeletageGroupByStyle(r,x,{x:H-Hn,y:W-Hn,width:et+Hn,height:ht+Hn,btnOffset:bt-3})}if(ie){var Un=ie.offsetX,Ei=Un===void 0?0:Un,Ti=ie.offsetY,Li=Ti===void 0?0:Ti,_i=ie.text,bi=_i===void 0?ie:_i,Ba=(0,Ft.__rest)(ie,["offsetX","offsetY","text"]),La=x.addShape("text",{attrs:(0,Ft.__assign)({text:bi,stroke:"#444",x:rr+Ei,y:sr+Li},Ba),className:"group-title",name:"group-title-shape"});La.set("capture",!1)}x.set("keyShape",qe),u.get("groupNodes")[r]=t},i.prototype.setGroupStyle=function(r,t){if(!(!r||r.get("destroyed"))){var e={},n=this.styles,a=n.hover,o=n.default;(0,Zo.default)(t)?t==="default"?e=(0,Vf.default)({},o):t==="hover"&&(e=(0,Vf.default)({},a)):e=(0,Vf.default)({},o,t),Object.keys(e).forEach(function(u){r.attr(u,e[u])})}},i.prototype.calculationGroupPosition=function(r,t){if(t===void 0&&(t={x:100,y:100}),r.length===0)return{x:t.x,y:t.y,width:100,height:100};var e=this.graph,n=Infinity,a=-Infinity,o=Infinity,u=-Infinity;r.forEach(function(L){var H=(0,Zo.default)(L)?e.findById(L):L,W=H.getBBox(),et=W.minX,ht=W.minY,bt=W.maxX,xt=W.maxY;et<n&&(n=et),ht<o&&(o=ht),bt>a&&(a=bt),xt>u&&(u=xt)});var f=Math.floor(n),m=Math.floor(o),x=Math.ceil(a)-f,w=Math.ceil(u)-m;return{x:f,y:m,width:x,height:w,maxX:Math.ceil(a)}},i.prototype.flatToTree=function(r,t,e){t===void 0&&(t="id"),e===void 0&&(e="parentId");var n="children",a=[],o=[];return r.forEach(function(u){a[u[t]]=u}),r.forEach(function(u){var f=a[u[e]];f?(f[n]=f[n]||[],f[n].push(u)):o.push(u)}),o},i.prototype.getGroupPadding=function(r){var t=this.graph,e=this.styles.default,n=t.get("groups"),a=n.filter(function(x){return x.parentId===r}),o=1;a.length>0&&(V5||(V5=this.flatToTree(n)),_h(V5[0],function(x){if(x.parentId===r&&x.children)return o+=x.children.length,!0}));var u=n.filter(function(x){return x.id===r&&!x.parentId});u.length>0&&(o+=1);var f=n.filter(function(x){return x.parentId===r}).length>0,m=f?e.maxDis+(o>1?o/2:1)*30:e.minDis;return m},i.prototype.setDeletageGroupByStyle=function(r,t,e){var n=e.width,a=e.height,o=e.x,u=e.y,f=e.r,m=e.btnOffset,x=this.customGroup[r];if(!x)this.customGroup[r]={nodeGroup:t,groupStyle:{width:n,height:a,x:o,y:u,r:f,btnOffset:m}};else{var w=x.groupStyle,L=(0,Vf.default)({},w,e);this.customGroup[r]={nodeGroup:t,groupStyle:L}}},i.prototype.getDeletageGroupById=function(r){return this.customGroup[r]},i.prototype.collapseExpandGroup=function(r){var t=this.getDeletageGroupById(r),e=t.nodeGroup,n=e.get("hasHidden");n?(e.set("hasHidden",!1),this.expandGroup(r)):(e.set("hasHidden",!0),this.collapseGroup(r))},i.prototype.setGroupTmpNode=function(r,t){var e=this.graph,n=e.get("groupNodes"),a=e.get("groups");n[r].indexOf(t)<0&&n[r].push(t);var o=a.filter(function(f){return f.id===r}),u=null;o.length>0&&(u=o[0].parentId),u&&this.setGroupTmpNode(u,t)},i.prototype.collapseGroup=function(r){var t=this,e=this.getDeletageGroupById(r),n=e.nodeGroup,a=this.styles.collapse,o=this.graph,u=o.get("groupType"),f=o.get("groupNodes")[r],m=n.get("keyShape"),x=a.r,w=a.width,L=a.height,H=a.offsetX,W=a.offsetY,et=(0,Ft.__rest)(a,["r","width","height","offsetX","offsetY"]);Object.keys(et).forEach(function(rr){m.attr(rr,et[rr])});var ht={groupId:r,id:r+"-custom-node",x:m.attr("x"),y:m.attr("y"),style:{r:x},type:"circle"},bt=n.find(function(rr){return rr.get("className")==="group-title"});u==="circle"?(m.animate({r:x},{duration:500,easing:"easeCubic"}),bt&&bt.attr({x:m.attr("x")+H,y:m.attr("y")+W})):u==="rect"&&(m.animate({width:w,height:L},{duration:500,easing:"easeCubic"}),bt&&bt.attr({x:m.attr("x")+10,y:m.attr("y")+L/2+5}),ht={groupId:r,id:r+"-custom-node",x:m.attr("x")+w/2,y:m.attr("y")+L/2,size:[w,L],type:"rect"});var xt=o.getEdges(),qt=xt.filter(function(rr){var sr=rr.getModel();return!f.includes(sr.source)&&f.includes(sr.target)}),ie=xt.filter(function(rr){var sr=rr.getModel();return f.includes(sr.source)&&!f.includes(sr.target)}),_e=xt.filter(function(rr){var sr=rr.getModel();return f.includes(sr.source)&&f.includes(sr.target)});if(f.forEach(function(rr){var sr=o.findById(rr),qe=sr.getModel(),wr=qe.groupId;if(wr&&wr!==r){var Vr=t.getDeletageGroupById(wr),Br=Vr.nodeGroup;Br.hide()}sr.hide()}),_e.forEach(function(rr){var sr=rr.getSource(),qe=rr.getTarget();sr.isVisible()&&qe.isVisible()?rr.show():rr.hide()}),qt.length>0||ie.length>0){var ze=o.add("node",ht);ze.set("capture",!1),ze.hide(),this.delegateInGroup[r]={delegateNode:ze},this.setGroupTmpNode(r,r+"-custom-node"),this.updateEdgeInGroupLinks(r,qt,ie)}},i.prototype.updateEdgeInGroupLinks=function(r,t,e){var n=this.graph,a={};t.map(function(u){var f=u.getModel(),m=u.get("id"),x=f.target;return a[m]=x,n.updateItem(u,{target:r+"-custom-node"}),!0});var o={};e.map(function(u){var f=u.getModel(),m=u.get("id"),x=f.source;return o[m]=x,n.updateItem(u,{source:r+"-custom-node"}),!0}),this.delegateInGroup[r]=(0,Vf.default)({sourceOutTargetInEdges:t,sourceInTargetOutEdges:e,edgesOuts:a,edgesIn:o},this.delegateInGroup[r])},i.prototype.expandGroup=function(r){var t=this,e=this.graph,n=e.get("groupType"),a=e.get("groupNodes")[r],o=a.filter(function(Ti){return Ti.indexOf("custom-node")===-1}),u=this.calculationGroupPosition(o),f=u.width,m=u.height,x=this.getDeletageGroupById(r).nodeGroup,w=x.get("keyShape"),L=this.styles,H=L.default,W=L.collapse;Object.keys(H).forEach(function(Ti){w.attr(Ti,H[Ti])});var et=x.find(function(Ti){return Ti.get("className")==="group-title"}),ht=this.getGroupPadding(r);if(n==="circle"){var bt=f>m?f/2:m/2;w.animate({r:bt+ht},{duration:500,easing:"easeCubic"})}else if(n==="rect"){var xt=W.width,qt=W.height;w.animate({width:xt+f+ht*H.disCoefficient*2,height:qt+m+ht*H.disCoefficient*2},{duration:500,easing:"easeCubic"})}if(et){var ie=null,_e=e.get("groups").filter(function(Ti){return Ti.id===r});_e&&_e.length>0&&(ie=_e[0].title);var ze=ie.offsetX,rr=ze===void 0?0:ze,sr=ie.offsetY,qe=sr===void 0?0:sr;n==="circle"?et.animate({x:w.attr("x")+rr,y:w.attr("y")-w.attr("r")+qe},{duration:600,easing:"easeCubic"}):n==="rect"&&et.animate({x:w.attr("x")+(15+rr),y:w.attr("y")+(15+qe)},{duration:600,easing:"easeCubic"})}setTimeout(function(){a.forEach(function(_i){var bi=e.findById(_i),Ba=bi.getModel(),La=Ba.groupId;if(La&&La!==r){var Ha=t.getDeletageGroupById(La),Ri=Ha.nodeGroup;Ri.show();var Na=Ri.get("hasHidden");Na||bi.show()}else bi.show()});var Ti=e.getEdges(),Li=Ti.filter(function(_i){var bi=_i.getModel();return a.includes(bi.source)||a.includes(bi.target)});Li.forEach(function(_i){var bi=_i.getSource(),Ba=_i.getTarget();bi.isVisible()&&Ba.isVisible()&&_i.show()})},300);var wr=this.delegateInGroup[r];if(wr){var Vr=wr.sourceOutTargetInEdges,Br=wr.sourceInTargetOutEdges,Tn=wr.edgesOuts,Hn=wr.edgesIn,Un=wr.delegateNode;Vr.map(function(Ti){var Li=Ti.get("id"),_i=Tn[Li];return e.updateItem(Ti,{target:_i}),!0}),Br.map(function(Ti){var Li=Ti.get("id"),_i=Hn[Li];return e.updateItem(Ti,{source:_i}),!0});var Ei=Un.getModel();this.deleteTmpNode(r,Ei.id),e.remove(Un),delete this.delegateInGroup[r]}},i.prototype.deleteTmpNode=function(r,t){var e=this.graph,n=e.get("groups"),a=e.get("groupNodes")[r],o=a.indexOf(t);a.splice(o,1);var u=n.filter(function(m){return m.id===r}),f=null;u.length>0&&(f=u[0].parentId),f&&this.deleteTmpNode(f,t)},i.prototype.remove=function(r){var t=this.graph,e=this.getDeletageGroupById(r);if(!!e){var n=e.nodeGroup,a=t.get("groupNodes"),o=a[r];o.forEach(function(H){var W=t.findById(H),et=W.getModel(),ht=et.groupId;!ht||r===ht&&(delete et.groupId,t.updateItem(W,et))}),n.destroy(),delete this.customGroup[r];var u=t.get("groups");if(u.length>0){var f=u.filter(function(H){return H.id!==r});t.set("groups",f)}for(var m=null,x=null,w=0;w<u.length;w++){var L=u[w];if(r===L.id){m=L.parentId,x=L;break}}x&&delete x.parentId,delete a[r],m&&(a[m]=a[m].filter(function(H){return!o.includes(H)}))}},i.prototype.updateGroup=function(r,t,e){var n=this.graph,a=n.get("groupType");this.updateItemInGroup(r,t,e);for(var o=n.save().groups,u=null,f=null,m=0;m<o.length;m++){var x=o[m];if(r===x.id){u=x.parentId,f=x;break}}if(u){var w=this.getDeletageGroupById(u).nodeGroup,L=w.get("keyShape");this.setGroupStyle(L,"default");var H=L.getBBox(),W=H.minX,et=H.minY,ht=H.maxX,bt=H.maxY,xt=this.getDeletageGroupById(r).nodeGroup,qt=xt.get("keyShape"),ie=qt.getBBox(),_e=ie.x,ze=ie.y;if(!(_e<ht&&_e>W&&ze<bt&&ze>et)){delete f.parentId;var rr=n.get("groupNodes"),sr=rr[r],qe=rr[u];rr[u]=qe.filter(function(Va){return sr.indexOf(Va)===-1});var wr=this.calculationGroupPosition(rr[u]),Vr=wr.x,Br=wr.y,Tn=wr.width,Hn=wr.height,Un=this.getGroupPadding(u),Ei=w.find(function(Va){return Va.get("className")==="group-title"}),Ti=0,Li=0;if(a==="circle"){var _i=Tn>Hn?Tn/2:Hn/2,bi=Vr,Ba=Br;L.attr({r:_i+Un,x:bi,y:Ba}),Ti=bi,Li=Ba-L.attr("r")}else if(a==="rect"){var La=this.styles.default,Ha=Un*La.disCoefficient;L.attr({x:Vr-Ha,y:Br-Ha}),Ti=Vr-Ha+15,Li=Br-Ha+15}if(Ei){var Ri=f.title,Na=0,_o=0;Ri&&(Na=Ri.offsetX,_o=Ri.offsetY),Ei.attr({x:Ti+Na,y:Li+_o})}}}},i.prototype.updateItemInGroup=function(r,t,e){var n=this,a=this.graph,o=a.get("groupType"),u=a.get("groupNodes"),f=u[r],m=this.getDeletageGroupById(r).nodeGroup,x=m.getBBox(),w=[];f.forEach(function(L,H){var W=a.findById(L),et=W.getModel(),ht=et.groupId;ht&&!w.includes(ht)&&w.push(ht),n.nodePoint[H]||(n.nodePoint[H]={x:et.x,y:et.y});var bt=t.x-x.x+n.nodePoint[H].x,xt=t.y-x.y+n.nodePoint[H].y;n.nodePoint[H]={x:bt,y:xt},a.updateItem(W,{x:bt,y:xt})}),w.includes(r)||w.push(r),w.forEach(function(L){var H=n.getDeletageGroupById(L).nodeGroup,W=H.get("keyShape"),et=u[L].filter(function(Hn){return Hn.indexOf("custom-node")===-1}),ht=n.calculationGroupPosition(et,t),bt=ht.x,xt=ht.y,qt=ht.width,ie=ht.height,_e=0,ze=0;if(o==="circle"){var rr=(qt+2*bt)/2,sr=(ie+2*xt)/2;W.attr({x:rr,y:sr}),_e=rr,ze=sr-W.attr("r")}else if(o==="rect"){var qe=H.get("hasHidden"),wr=n.getGroupPadding(L),Vr={},Br=n.styles.default,Tn=wr*Br.disCoefficient;_e=bt-Tn+15,ze=xt-Tn+15,qe?(Vr={x:bt-Tn,y:xt-Tn},ze=ze+10):Vr={x:bt-Tn,y:xt-Tn,width:qt+Tn*2,height:ie+Tn*2},W.attr(Vr)}n.updateGroupTitle(H,L,_e,ze)})},i.prototype.updateGroupTitle=function(r,t,e,n){var a=this.graph,o=r.find(function(w){return w.get("className")==="group-title"});if(o){var u=null,f=a.get("groups").filter(function(w){return w.id===t});f&&f.length>0&&(u=f[0].title);var m=0,x=0;u&&(m=u.offsetX||0,x=u.offsetY||0),o.attr({x:e+m,y:n+x})}},i.prototype.dynamicChangeGroupSize=function(r,t,e){var n=r.item,a=n.getModel(),o=a.groupId,u=this.graph,f=u.get("groupType"),m=u.get("groupNodes"),x=m[o];if(x.length===0){delete m[o];var w=u.get("groups");u.set("groups",w.filter(function(qe){return qe.id!==o})),t.remove()}else{var L=this.calculationGroupPosition(x),H=L.x,W=L.y,et=L.width,ht=L.height,bt=this.getGroupPadding(o),xt=0,qt=0;if(f==="circle"){var ie=et>ht?et/2:ht/2,_e=(et+2*H)/2,ze=(ht+2*W)/2;e.attr({r:ie+bt,x:_e,y:ze}),xt=_e,qt=ze-e.attr("r")}else if(f==="rect"){var rr=this.styles.default,sr=bt*rr.disCoefficient;e.attr({x:H-sr,y:W-sr,width:et+sr*2,height:ht+sr*2}),xt=H-sr+15,qt=W-sr+15}this.updateGroupTitle(t,o,xt,qt)}this.setGroupStyle(e,"default")},i.prototype.resetNodePoint=function(){this.nodePoint.length=0},i.prototype.destroy=function(){this.graph=null,this.styles={},this.customGroup={},this.delegateInGroup={},this.resetNodePoint(),this.destroyed=!0},i}(),i8=n8,a8=function(r){var t={};return r.getNodes().forEach(function(e){t[e.getID()]={degree:0,inDegree:0,outDegree:0}}),r.getEdges().forEach(function(e){t[e.getSource().getID()].degree++,t[e.getSource().getID()].outDegree++,t[e.getTarget().getID()].degree++,t[e.getTarget().getID()].inDegree++}),t},kD=a8,o8=function(){function i(r){this.compare=r||i.defaultCompareFunction}return i.defaultCompareFunction=function(r,t){return r===t?0:r<t?-1:1},i.prototype.equal=function(r,t){return this.compare(r,t)===0},i.prototype.lessThan=function(r,t){return this.compare(r,t)<0},i.prototype.greaterThan=function(r,t){return this.compare(r,t)>0},i.prototype.lessThanOrEqual=function(r,t){return this.lessThan(r,t)||this.equal(r,t)},i.prototype.greaterThanOrEqual=function(r,t){return this.greaterThan(r,t)||this.equal(r,t)},i.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},i}(),s8=o8,RD=function(){function i(r,t){t===void 0&&(t=null),this.value=r,this.next=t}return i.prototype.toString=function(r){return r?r(this.value):""+this.value},i}(),u8=function(){function i(r){r===void 0&&(r=null),this.head=null,this.tail=null,this.compare=new s8(r)}return i.prototype.prepend=function(r){var t=new RD(r,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(r){var t=new RD(r);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(r){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,r);)t=this.head,this.head=this.head.next;var e=this.head;if(e!==null)for(;e.next;)this.compare.equal(e.next.value,r)?(t=e.next,e.next=e.next.next):e=e.next;return this.compare.equal(this.tail.value,r)&&(this.tail=e),t},i.prototype.find=function(r){var t=r.value,e=t===void 0?void 0:t,n=r.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||e!==void 0&&this.compare.equal(o.value,e))return o;o=o.next}return null},i.prototype.deleteTail=function(){var r=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,r;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,r},i.prototype.deleteHead=function(){if(!this.head)return null;var r=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),r},i.prototype.fromArray=function(r){var t=this;return r.forEach(function(e){return t.append(e)}),this},i.prototype.toArray=function(){for(var r=[],t=this.head;t;)r.push(t),t=t.next;return r},i.prototype.reverse=function(){for(var r=this.head,t=null,e=null;r;)e=r.next,r.next=t,t=r,r=e;this.tail=this.head,this.head=t},i.prototype.toString=function(r){return r===void 0&&(r=void 0),this.toArray().map(function(t){return t.toString(r)}).toString()},i}(),DD=u8,l8=function(){function i(r){r===void 0&&(r=10),this.linkedList=new DD,this.maxStep=r}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(r){this.linkedList.prepend(r),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(r){return r.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),BD=l8,c8=function(r,t){var e=r.getNodes(),n=r.getEdges(),a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(u,f){o[u.getID()]=f;var m=[];a.push(m)}),n&&n.forEach(function(u){var f=u.getModel(),m=f.source,x=f.target,w=o[m],L=o[x];a[w][L]=1,t||(a[L][w]=1)}),a},uA=c8,f8=function(r,t){var e=r.get("adjMatrix");e||(e=uA(r,t));for(var n=[],a=e.length,o=0;o<a;o+=1){n[o]=[];for(var u=0;u<a;u+=1)o===u?n[o][u]=0:e[o][u]===0||!e[o][u]?n[o][u]=Infinity:n[o][u]=e[o][u]}for(var f=0;f<a;f+=1)for(var o=0;o<a;o+=1)for(var u=0;u<a;u+=1)n[o][u]>n[o][f]+n[f][u]&&(n[o][u]=n[o][f]+n[f][u]);return n},FD=f8,ND=function(r,t,e){return(r.y-e.y)*(t.x-e.x)-(r.x-e.x)*(t.y-e.y)},zD=function(r){var t=r.map(function(u){return{x:u.getModel().x,y:u.getModel().y}});t.sort(function(u,f){return u.x===f.x?u.y-f.y:u.x-f.x});for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&ND(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var a=[],n=t.length-1;n>=0;n--){for(;a.length>=2&&ND(a[a.length-2],a[a.length-1],t[n])<=0;)a.pop();a.push(t[n])}a.pop(),e.pop();var o=e.concat(a);return o},h8={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function p8(i,r,t){var e=!1,n=function(f,m){return r.cells[f+m*r.width]},a=function(f,m){var x=0;return n(f-1,m-1)>=t&&(x+=1),n(f,m-1)>t&&(x+=2),n(f-1,m)>t&&(x+=4),n(f,m)>t&&(x+=8),x},o=function(f,m){for(var x=f,w=m,L,H,W=0;W<r.width*r.height;W++){if(L=x,H=w,i.findIndex(function(ht){return ht.x===x&&ht.y===w})>-1){if(!(i[0].x!==x||i[0].y!==w))return!0}else i.push({x,y:w});var et=a(x,w);switch(et){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:x++;break;case 12:case 14:case 4:x--;break;case 6:L===0&&(H===-1?x-=1:x+=1);break;case 1:case 13:case 5:w--;break;case 9:L===1&&(H===0?w-=1:w+=1);break;case 10:case 8:case 11:w++;break;default:return console.warn("Marching squares invalid state: "+et),!0}}};this.march=function(){for(var u=0;u<r.width&&!e;u+=1)for(var f=0;f<r.height&&!e;f+=1)n(u,f)>t&&a(u,f)!==15&&(e=o(u,f));return e}}var d8=function(r,t,e){var n=Math.ceil(r/e),a=Math.ceil(t/e),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},v8=function(r,t,e){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var u={x:r.getModel().x,y:r.getModel().y},f={x:o.getModel().x,y:o.getModel().y},m=GC(u,f),x=new ly(u.x,u.y,f.x,f.y),w=e.reduce(function(L,H){return E5(H,x)>0?L+1:L},0);m*Math.pow(w+1,2)<a&&(n=o,a=m*Math.pow(w+1,2))}),n},GD=function(r,t){var e=Number.POSITIVE_INFINITY,n=null;return r.forEach(function(a){var o=E5(a,t);o>=0&&o<e&&(n=a,e=o)}),n},g8=function(r,t,e,n){var a=[],o=[];o.push(r);for(var u=!0,f=0,m=function(H,W){var et=!1;return W.forEach(function(ht){et||(C5(H,{x:ht.x1,y:ht.y1})||C5(H,{x:ht.x2,y:ht.y2}))&&(et=!0)}),et},x=function(H,W){for(var et=0,ht=W;et<ht.length;et++){var bt=ht[et],xt=bt.getBBox(),qt=[[xt.x,xt.y],[xt.x+xt.width,xt.y],[xt.x,xt.y+xt.height],[xt.x+xt.width,xt.y+xt.height]];if(Z_(qt,H.x,H.y))return!0}return!1};u&&f<e;){u=!1;for(var w=function(){var H=o.pop(),W=GD(t,H);if(W){var et=PR(W,H),ht=et[0],bt=et[1];if(bt===2){var xt=function(ie){for(var _e=n,ze=UD(W,_e,ht,ie),rr=m(ze,o)||m(ze,a),sr=x(ze,t);!rr&&sr&&_e>=1;)_e/=1.5,ze=UD(W,_e,ht,ie),rr=m(ze,o)||m(ze,a),sr=x(ze,t);ze&&!rr&&(!ie||!sr)&&(o.push(new ly(H.x1,H.y1,ze.x,ze.y)),o.push(new ly(ze.x,ze.y,H.x2,H.y2)),u=!0)};xt(!0),u||xt(!1)}}u||a.push(H),f+=1};!u&&o.length;)w()}for(;o.length;)a.push(o.pop());return a};function m8(i,r,t,e,n){var a=v8(i,t,r);if(a===null)return[];var o=function(w){for(var L=[];w.length>0;){var H=w.pop();if(w.length===0){L.push(H);break}var W=w.pop(),et=new ly(H.x1,H.y1,W.x2,W.y2),ht=GD(r,et);ht?(L.push(H),w.push(W)):w.push(et)}return L},u=new ly(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),f=g8(u,r,e,n),m=o(f);return m}var y8=function(r,t,e){var n=Object.assign(h8,e),a=IR(r.map(function(xt){return{x:xt.getModel().x,y:xt.getModel().y}}));r=r.sort(function(xt,qt){return GC({x:xt.getModel().x,y:xt.getModel().y},a)-GC({x:qt.getModel().x,y:qt.getModel().y},a)});var o=[],u=[];r.forEach(function(xt){var qt=m8(xt,t,o,n.maxRoutingIterations,n.morphBuffer);qt.forEach(function(ie){u.push(ie)}),o.push(xt)});for(var f=x8(r,u,n.nodeR0),m=d8(f.width,f.height,n.pixelGroupSize),x=[],w=[],L=0;L<n.maxMarchingIterations;L++)if(_8(r,t,u,f,m,n),x=[],w=[],!!new p8(x,m,n.threshold).march()){var H=x.map(function(xt){return{x:Math.round(xt.x*n.pixelGroupSize+f.minX),y:Math.round(xt.y*n.pixelGroupSize+f.minY)}});if(H){var W=H.length;if(n.skip>1)for(W=Math.floor(H.length/n.skip);W<3&&n.skip>1;)n.skip-=1,W=Math.floor(H.length/n.skip);for(var et=0,ht=0;ht<W;ht+=1,et+=n.skip)w.push({x:H[et].x,y:H[et].y})}var bt=function(){for(var qt=0,ie=r;qt<ie.length;qt++){var _e=ie[qt],ze=w.map(function(rr){return[rr.x,rr.y]});if(!Z_(ze,_e.getBBox().centerX,_e.getBBox().centerY))return!1}return!0};if(w&&bt())return w;if(n.threshold*=.9,L<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return w};function x8(i,r,t){var e={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(f){n.push(f.getBBox())}),r.forEach(function(f){n.push(f.getBBox())});for(var a=0,o=n;a<o.length;a++){var u=o[a];e.minX=(u.minX<e.minX?u.minX:e.minX)-t,e.minY=(u.minY<e.minY?u.minY:e.minY)-t,e.maxX=(u.maxX>e.maxX?u.maxX:e.maxX)+t,e.maxY=(u.maxY>e.maxY?u.maxY:e.maxY)+t}return e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.x=e.minX,e.y=e.minY,e}function _8(i,r,t,e,n,a){function o(H,W){var et=Math.floor((H-W)/a.pixelGroupSize);return et<0?0:et}function u(H,W){return H*a.pixelGroupSize+W}var f=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),m=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),x=function(W,et){var ht=Math.min(o(W.minX,et+e.minX),n.width),bt=Math.min(o(W.minY,et+e.minY),n.height),xt=Math.min(o(W.maxX,-et+e.minX),n.width),qt=Math.min(o(W.maxY,-et+e.minY),n.height);return[ht,bt,xt,qt]},w=function(W,et){for(var ht=W.getBBox(),bt=x(ht,a.nodeR1),xt=bt[0],qt=bt[1],ie=bt[2],_e=bt[3],ze=qt;ze<_e;ze+=1)for(var rr=xt;rr<ie;rr+=1)if(!(et<0&&n[rr+ze*n.width]<=0)){var sr=u(rr,e.minX),qe=u(ze,e.minY),wr=LR({x:sr,y:qe},{x:ht.minX,y:ht.minY,width:ht.width,height:ht.height});if(wr<Math.pow(a.nodeR1,2)){var Vr=Math.sqrt(wr)-a.nodeR1;n.cells[rr+ze*n.width]+=et*Vr*Vr}}},L=function(W,et){for(var ht=W.getBBox(),bt=x(ht,a.edgeR1),xt=bt[0],qt=bt[1],ie=bt[2],_e=bt[3],ze=qt;ze<_e;ze+=1)for(var rr=xt;rr<ie;rr+=1)if(!(et<0&&n.cells[rr+ze*n.width]<=0)){var sr=u(rr,e.minX),qe=u(ze,e.minY),wr=OR({x:sr,y:qe},W);if(wr<Math.pow(a.edgeR1,2)){var Vr=Math.sqrt(wr)-a.edgeR1;n.cells[rr+ze*n.width]+=et*Vr*Vr}}};a.nodeInfluenceFactor&&i.forEach(function(H){w(H,a.nodeInfluenceFactor/f)}),a.edgeInfluenceFactor&&t.forEach(function(H){L(H,a.edgeInfluenceFactor/m)}),a.negativeNodeInfluenceFactor&&r.forEach(function(H){w(H,a.negativeNodeInfluenceFactor/f)})}function UD(i,r,t,e){var n=i.getBBox(),a=t[0],o=t[1],u=t[2],f=t[3],m={topLeft:{x:n.minX-r,y:n.minY-r},topRight:{x:n.maxX+r,y:n.minY-r},bottomLeft:{x:n.minX-r,y:n.maxY+r},bottomRight:{x:n.maxX+r,y:n.maxY+r}},x=n.height*n.width;function w(W,et){return n.width*((W.y-n.minY+(et.y-n.minY))*.5)}if(o){if(a)return e?m.topLeft:m.bottomRight;if(u)return e?m.bottomLeft:m.topRight;var L=w(o,f);return L<x*.5?o.y>f.y?e?m.topLeft:m.bottomRight:e?m.topRight:m.bottomLeft:o.y<f.y?e?m.bottomLeft:m.topRight:e?m.bottomRight:m.topLeft}if(f){if(a)return e?m.topRight:m.bottomLeft;if(u)return e?m.bottomRight:m.topLeft}var H=w(a,u);return H<x*.5?a.x>u.x?e?m.topLeft:m.bottomRight:e?m.bottomLeft:m.topRight:a.x<u.x?e?m.topRight:m.bottomLeft:e?m.bottomRight:m.topLeft}var b8=function(){function i(r,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=r,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,d.isString)(e)?r.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,d.isString)(e)?r.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var r=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+r:10+r,this.cfg.bubbleCfg={nodeR0:this.padding-r,nodeR1:this.padding-r,morphBuffer:this.padding-r}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(r,t){var e,n,a;switch(this.type){case"round-convex":e=zD(r),a=NR(e.map(function(o){return[o.x,o.y]}),this.padding),n=(0,ql.parsePathString)(a);break;case"smooth-convex":e=zD(r),a=zR(e.map(function(o){return[o.x,o.y]}),this.padding),n=e.length>=2&&A5(a);break;case"bubble":e=y8(r,t,this.cfg.bubbleCfg),n=e.length>=2&&A5(e);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,Ft.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},i.prototype.addMember=function(r){if(!!r){(0,d.isString)(r)&&(r=this.graph.findById(r)),this.members.push(r);var t=this.nonMembers.indexOf(r);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(r){if(!!r){(0,d.isString)(r)&&(r=this.graph.findById(r)),this.nonMembers.push(r);var t=this.members.indexOf(r);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(r){if(!!r){(0,d.isString)(r)&&(r=this.graph.findById(r));var t=this.members.indexOf(r);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(r){if(!!r){(0,d.isString)(r)&&(r=this.graph.findById(r));var t=this.nonMembers.indexOf(r);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(r,t){var e=this;this.group.findById(this.id).remove(),r&&(this.members=r.map(function(n){return(0,d.isString)(n)?e.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?e.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(r){var t=this.group.findById(this.id);t.attr((0,Ft.__assign)({},r))},i.prototype.updateCfg=function(r){var t=this;this.cfg=(0,d.deepMix)(this.cfg,r),this.id=this.cfg.id,this.group=this.cfg.group,r.members&&(this.members=this.cfg.members.map(function(e){return(0,d.isString)(e)?t.graph.findById(e):e})),r.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,d.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(r){var t=this,e;(0,d.isString)(r)?e=this.graph.findById(r):e=r;var n,a=e.getKeyShape();if(e.get("type")==="path")n=VC(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(u){var f=t.graph.getPointByCanvas(u[0],u[1]);return[f.x,f.y]}),S5(n,VC(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),S8=b8,w8="node",E8="svg",C8=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.cfg=(0,d.deepMix)(e.getDefaultCfg(),t),e.init(),e.animating=!1,e.destroyed=!1,e.cfg.enabledStack&&(e.undoStack=new BD(e.cfg.maxStep),e.redoStack=new BD(e.cfg.maxStep)),e}return r.prototype.init=function(){this.initCanvas();var t=new IF(this),e=new TF(this),n=new AF(this),a=new qF(this),o=new JN(this),u=new r8(this),f=new i8(this);this.set({eventController:t,viewController:e,modeController:n,itemController:a,layoutController:o,stateController:u,customGroupControll:f}),this.initPlugin()},r.prototype.initCanvas=function(){var t=this.get("container");if((0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=this.get("width"),n=this.get("height"),a=this.get("renderer"),o;if(a===E8)o=new H_.Z({container:t,width:e,height:n});else{var u={container:t,width:e,height:n},f=this.get("pixelRatio");f&&(u.pixelRatio=f),o=new cy.Z(u)}this.set("canvas",o),this.initGroups()},r.prototype.initPlugin=function(){var t=this;(0,d.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},r.prototype.initGroups=function(){var t=this.get("canvas"),e=this.get("canvas").get("el"),n=e.id,a=t.addGroup({id:n+"-root",className:mi.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:n+"-edge",className:mi.edgeContainerClassName}),u=a.addGroup({id:n+"-node",className:mi.nodeContainerClassName}),f=a.addGroup({id:n+"-combo",className:mi.comboContainerClassName}),m=a.addGroup({id:n+"-group",className:mi.customGroupContainerClassName});m.toBack(),f.toBack(),this.set({nodeGroup:u,edgeGroup:o,customGroup:m,comboGroup:f})}var x=a.addGroup({id:n+"-delegate",className:mi.delegateContainerClassName});this.set({delegateGroup:x}),this.set("group",a)},r.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,groupType:"circle",groupBBoxs:{},groupNodes:{},groups:[],groupStyle:{},enabledStack:!1,maxStep:10,tooltips:[]}},r.prototype.set=function(t,e){return(0,d.isPlainObject)(t)?this.cfg=(0,Ft.__assign)((0,Ft.__assign)({},this.cfg),t):this.cfg[t]=e,this},r.prototype.get=function(t){return this.cfg[t]},r.prototype.getGroup=function(){return this.get("group")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.getMinZoom=function(){return this.get("minZoom")},r.prototype.setMinZoom=function(t){return this.set("minZoom",t)},r.prototype.getMaxZoom=function(){return this.get("maxZoom")},r.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},r.prototype.getWidth=function(){return this.get("width")},r.prototype.getHeight=function(){return this.get("height")},r.prototype.clearItemStates=function(t,e){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e);var a=this.get("stateController");a.updateStates(t,e,!1)},r.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},r.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},r.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},r.prototype.findById=function(t){return this.get("itemMap")[t]},r.prototype.find=function(t,e){var n,a=this.get(t+"s");return(0,d.each)(a,function(o,u){if(e(o,u))return n=o,n}),n},r.prototype.findAll=function(t,e){var n=[];return(0,d.each)(this.get(t+"s"),function(a,o){e(a,o)&&n.push(a)}),n},r.prototype.findAllByState=function(t,e){return this.findAll(t,function(n){return n.hasState(e)})},r.prototype.translate=function(t,e){var n=this.get("group"),a=(0,d.clone)(n.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),gv.wO.translate(a,a,[t,e]),n.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},r.prototype.moveTo=function(t,e){var n=this.get("group");MR(n,{x:t,y:e}),this.emit("viewportchange",{action:"move",matrix:n.getMatrix()})},r.prototype.fitView=function(t){t&&this.set("fitViewPadding",t);var e=this.get("viewController");e.fitView(),this.autoPaint()},r.prototype.fitCenter=function(){var t=this.get("viewController");t.fitCenter(),this.autoPaint()},r.prototype.addBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!0),this},r.prototype.removeBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!1),this},r.prototype.zoom=function(t,e){var n=this.get("group"),a=(0,d.clone)(n.getMatrix()),o=this.get("minZoom"),u=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),e?(gv.wO.translate(a,a,[-e.x,-e.y]),gv.wO.scale(a,a,[t,t]),gv.wO.translate(a,a,[e.x,e.y])):gv.wO.scale(a,a,[t,t]),!(o&&a[0]<o||u&&a[0]>u)&&(n.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},r.prototype.zoomTo=function(t,e){var n=t/this.getZoom();this.zoom(n,e)},r.prototype.focusItem=function(t,e,n){var a=this.get("viewController"),o=!1;e?o=!0:e===void 0&&(o=this.get("animate"));var u={};n?u=n:n===void 0&&(u=this.get("animateCfg")),a.focus(t,o,u),this.autoPaint()},r.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},r.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},r.prototype.getPointByClient=function(t,e){var n=this.get("viewController");return n.getPointByClient(t,e)},r.prototype.getClientByPoint=function(t,e){var n=this.get("viewController");return n.getClientByPoint(t,e)},r.prototype.getPointByCanvas=function(t,e){var n=this.get("viewController");return n.getPointByCanvas(t,e)},r.prototype.getCanvasByPoint=function(t,e){var n=this.get("viewController");return n.getCanvasByPoint(t,e)},r.prototype.showItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var o=a.getID(),u=a.getType(),f={},m={};switch(u){case"node":f.nodes=[{id:o,visible:!1}],m.nodes=[{id:o,visible:!0}];break;case"edge":f.nodes=[{id:o,visible:!1}],m.edges=[{id:o,visible:!0}];break;case"combo":f.nodes=[{id:o,visible:!1}],m.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:f,after:m})}},r.prototype.hideItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var o=a.getID(),u=a.getType(),f={},m={};switch(u){case"node":f.nodes=[{id:o,visible:!0}],m.nodes=[{id:o,visible:!1}];break;case"edge":f.nodes=[{id:o,visible:!0}],m.edges=[{id:o,visible:!1}];break;case"combo":f.nodes=[{id:o,visible:!0}],m.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:f,after:m})}},r.prototype.refreshItem=function(t){var e=this.get("itemController");e.refreshItem(t)},r.prototype.setAutoPaint=function(t){var e=this;e.set("autoPaint",t);var n=e.get("canvas");n.set("autoDraw",t)},r.prototype.remove=function(t,e){e===void 0&&(e=!0),this.removeItem(t,e)},r.prototype.removeItem=function(t,e){e===void 0&&(e=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t)){console.warn("The item to be removed does not exist!");var a=this.get("customGroupControll");a.remove(t)}else if(n){var o="";if(n.getType&&(o=n.getType()),e&&this.get("enabledStack")){var u=(0,Ft.__assign)((0,Ft.__assign)({},n.getModel()),{itemType:o}),f={};switch(o){case"node":{f.nodes=[u],f.edges=[];for(var m=n.getEdges(),x=m.length-1;x>=0;x--)f.edges.push((0,Ft.__assign)((0,Ft.__assign)({},m[x].getModel()),{itemType:"edge"}));break}case"edge":f.edges=[u];break;case"combo":f.combos=[u];break;default:break}this.pushStack("delete",{before:f,after:{}})}var w=this.get("itemController");if(w.removeItem(t),o==="combo"){var L=I5(this.get("comboTrees"));this.set("comboTrees",L)}}},r.prototype.addItem=function(t,e,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var u=this.get("itemController");if(t==="group"){var f=e.groupId,m=e.nodes,x=e.type,w=e.zIndex,L=e.title,H=L;return(0,d.isString)(L)&&(H={text:L}),this.get("customGroupControll").create(f,m,x,w,!0,H)}if(e.id&&this.findById(e.id)){console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","");return}var W,et=this.get("comboTrees");if(et||(et=[]),t==="combo"){var ht=this.get("itemMap"),bt=!1;if(et.forEach(function(wr){bt||Cd(wr,function(Vr){if(e.parentId===Vr.id){bt=!0;var Br=(0,Ft.__assign)({id:e.id,depth:Vr.depth+2},e);Vr.children?Vr.children.push(Br):Vr.children=[Br],e.depth=Br.depth,W=u.addItem(t,e)}var Tn=ht[Vr.id];return bt&&Tn&&Tn.getType&&Tn.getType()==="combo"&&u.updateCombo(Tn,Vr.children),!0})}),!bt){var xt=(0,Ft.__assign)({id:e.id,depth:0},e);e.depth=xt.depth,et.push(xt),W=u.addItem(t,e)}this.set("comboTrees",et)}else if(t==="node"&&(0,d.isString)(e.comboId)&&et){var qt=this.findById(e.comboId);if(qt&&qt.getType&&qt.getType()!=="combo"){console.warn("'"+e.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");return}W=u.addItem(t,e);var ie=this.get("itemMap"),_e=!1,ze=!1;(et||[]).forEach(function(wr){ze||_e||Cd(wr,function(Vr){if(Vr.id===e.id)return ze=!0,!1;if(e.comboId===Vr.id&&!ze){_e=!0;var Br=(0,d.clone)(e);Br.itemType="node",Vr.children?Vr.children.push(Br):Vr.children=[Br],e.depth=Vr.depth+1}return _e&&ie[Vr.id].getType&&ie[Vr.id].getType()==="combo"&&u.updateCombo(ie[Vr.id],Vr.children),!0})})}else W=u.addItem(t,e);if(t==="node"&&e.comboId||t==="combo"&&e.parentId){var qt=this.findById(e.comboId||e.parentId);qt&&qt.addChild(W)}var rr=this.get("combos");if(rr&&rr.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var sr=(0,Ft.__assign)((0,Ft.__assign)({},W.getModel()),{itemType:t}),qe={};switch(t){case"node":qe.nodes=[sr];break;case"edge":qe.edges=[sr];break;case"combo":qe.combos=[sr];break;default:break}this.pushStack("add",{before:{},after:qe})}return W},r.prototype.add=function(t,e,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,e,n,a)},r.prototype.updateItem=function(t,e,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),u;(0,d.isString)(t)?u=this.findById(t):u=t;var f=(0,d.clone)(u.getModel()),m="";u.getType&&(m=u.getType());var x=(0,Ft.__spreadArrays)(u.getStates());if(m==="combo"&&(0,d.each)(x,function(W){return a.setItemState(u,W,!1)}),o.updateItem(u,e),m==="combo"&&(0,d.each)(x,function(W){return a.setItemState(u,W,!0)}),n&&this.get("enabledStack")){var w={nodes:[],edges:[],combos:[]},L={nodes:[],edges:[],combos:[]},H=(0,Ft.__assign)({id:f.id},e);switch(m){case"node":w.nodes.push(f),L.nodes.push(H);break;case"edge":w.edges.push(f),L.edges.push(H);break;case"combo":w.combos.push(f),L.combos.push(H);break;default:break}m==="node"&&w.nodes.push(f),this.pushStack("update",{before:w,after:L})}},r.prototype.update=function(t,e,n){n===void 0&&(n=!0),this.updateItem(t,e,n)},r.prototype.setItemState=function(t,e,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,e,n);var o=this.get("stateController");(0,d.isString)(n)?o.updateState(t,e+":"+n,!0):o.updateState(t,e,n)},r.prototype.priorityState=function(t,e){var n=this.get("itemController");n.priorityState(t,e)},r.prototype.data=function(t){this.set("data",t)},r.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,a=n===void 0?[]:n,o=e.edges,u=o===void 0?[]:o,f=e.combos,m=f===void 0?[]:f;if(this.clear(),this.emit("beforerender"),(0,d.each)(a,function(xt){t.add("node",xt,!1,!1)}),m&&m.length!==0){var x=P5(m,a);this.set("comboTrees",x),t.addCombos(m)}(0,d.each)(u,function(xt){t.add("edge",xt,!1,!1)});var w=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var L=t.get("layoutController");L.layout(H)||H();function H(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",w)}if(!this.get("groupByTypes"))if(m&&m.length!==0)this.sortCombos();else if(e.nodes&&e.edges&&e.nodes.length<e.edges.length){var W=this.getNodes();W.forEach(function(xt){xt.toFront()})}else{var et=this.getEdges();et.forEach(function(xt){xt.toBack()})}if(e.nodes){var ht=e.nodes.filter(function(xt){return xt.groupId});if(ht.length>0){var bt=t.get("groupType");this.renderCustomGroup(e,bt)}}this.get("enabledStack")&&this.pushStack("render")},r.prototype.read=function(t){this.data(t),this.render()},r.prototype.diffItems=function(t,e,n){var a=this,o,u=this.get("itemMap");(0,d.each)(n,function(f){if(o=u[f.id],o){if(a.get("animate")&&t===w8){var m=o.getContainer().getMatrix();m||(m=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:m[6],y:m[7]})}a.updateItem(o,f,!1)}else o=a.addItem(t,f,!1);e[t+"s"].push(o)})},r.prototype.changeData=function(t,e){e===void 0&&(e=!0);var n=this;if(!t)return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:t}),this.set("comboSorted",!1),this.getNodes().map(function(et){return n.clearItemStates(et)}),this.getEdges().map(function(et){return n.clearItemStates(et)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),n.get("data")||(n.data(t),n.render());var u=this.get("itemMap"),f={nodes:[],edges:[]},m=t.combos;if(m){var x=P5(m,t.nodes);this.set("comboTrees",x)}this.diffItems("node",f,t.nodes),(0,d.each)(u,function(et,ht){u[ht].getModel().depth=0,!(et.getType&&et.getType()==="edge")&&(et.getType&&et.getType()==="combo"?(delete u[ht],et.destroy()):f.nodes.indexOf(et)<0&&(delete u[ht],n.remove(et,!1)))});for(var w=this.getCombos(),L=w.length,H=L-1;H>=0;H--)w[H].destroyed&&w.splice(H,1);m&&(n.addCombos(m),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,t.edges),(0,d.each)(u,function(et,ht){et.getType&&(et.getType()==="node"||et.getType()==="combo")||f.edges.indexOf(et)<0&&(delete u[ht],n.remove(et,!1))}),this.set({nodes:f.nodes,edges:f.edges});var W=this.get("layoutController");return W.changeData(),n.get("animate")&&!W.getLayoutType()?n.positionsAnimate():n.autoPaint(),setTimeout(function(){a.set("localRefresh",o)},16),this},r.prototype.addCombos=function(t){var e=this,n=e.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},r.prototype.createCombo=function(t,e){var n=this;this.set("comboSorted",!1);var a="",o;if(!!t){if((0,d.isString)(t))a=t,o={id:t};else{if(a=t.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=t}var u=e.map(function(m){var x=n.findById(m),w="";x.getType&&(w=x.getType());var L={id:x.getID(),itemType:w};return w==="combo"?L.parentId=a:w==="node"&&(L.comboId=a),L});o.children=u,this.addItem("combo",o,!1),this.set("comboSorted",!1);var f=this.get("comboTrees");(f||[]).forEach(function(m){Cd(m,function(x){return x.id===a?(x.itemType="combo",x.children=u,!1):!0})}),f&&this.sortCombos()}},r.prototype.uncombo=function(t){var e=this,n,a=this,o=t;if((0,d.isString)(t)&&(o=this.findById(t)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=o.getModel().parentId,f=a.get("comboTrees");f||(f=[]);var m=this.get("itemMap"),x=o.get("id"),w,L=[],H=this.get("combos"),W=this.findById(u);if(f.forEach(function(ht){w||Cd(ht,function(bt){var xt;if(bt.id===x){w=bt;var qt=o.getEdges();qt.forEach(function(_e){e.removeItem(_e,!1)});var ie=H.indexOf(t);H.splice(ie,1),delete m[x],o.destroy()}if(u&&w&&bt.id===u){W.removeCombo(o),L=bt.children;var ie=L.indexOf(w);return ie!==-1&&L.splice(ie,1),(xt=w.children)===null||xt===void 0||xt.forEach(function(ze){var rr=e.findById(ze.id),sr=rr.getModel();rr.getType&&rr.getType()==="combo"?(ze.parentId=u,delete ze.comboId,sr.parentId=u,delete sr.comboId):rr.getType&&rr.getType()==="node"&&(ze.comboId=u,sr.comboId=u),W.addChild(rr),L.push(ze)}),!1}return!0})}),!u&&w){var et=f.indexOf(w);f.splice(et,1),(n=w.children)===null||n===void 0||n.forEach(function(ht){ht.parentId=void 0;var bt=e.findById(ht.id).getModel();bt.parentId=void 0,ht.itemType!=="node"&&f.push(ht)})}},r.prototype.updateCombos=function(){var t=this,e=this,n=this.get("comboTrees"),a=e.get("itemController"),o=e.get("itemMap");(n||[]).forEach(function(u){Cd(u,function(f){if(!f)return!0;var m=o[f.id];if(m&&m.getType&&m.getType()==="combo"){var x=(0,Ft.__spreadArrays)(m.getStates());(0,d.each)(x,function(w){return t.setItemState(m,w,!1)}),a.updateCombo(m,f.children),(0,d.each)(x,function(w){return t.setItemState(m,w,!0)})}return!0})}),e.sortCombos()},r.prototype.updateCombo=function(t){var e=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var u=this.get("comboTrees"),f=n.get("itemController"),m=n.get("itemMap");(u||[]).forEach(function(x){Cd(x,function(w){if(!w)return!0;var L=m[w.id];if(o===w.id&&L&&L.getType&&L.getType()==="combo"){var H=(0,Ft.__spreadArrays)(L.getStates());(0,d.each)(H,function(W){L.getStateStyle(W)&&e.setItemState(L,W,!1)}),f.updateCombo(L,w.children),(0,d.each)(H,function(W){L.getStateStyle(W)&&e.setItemState(L,W,!0)}),o&&(o=w.parentId)}return!0})})},r.prototype.updateComboTree=function(t,e){var n=this;this.set("comboSorted",!1);var a;(0,d.isString)(t)?a=n.findById(t):a=t;var o=a.getModel(),u=o.comboId||o.parentId;if(e&&a.getType&&a.getType()==="combo"){var f=this.get("comboTrees"),m=!0,x;if((f||[]).forEach(function(et){x||_h(et,function(ht){if(!x)return ht.id===a.getID()&&(x=ht),!0})}),_h(x,function(et){return et.id===e?(m=!1,!1):!0}),!m){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(o.parentId||o.comboId){var w=this.findById(o.parentId||o.comboId);w&&w.removeChild(a)}var L="";if(a.getType&&(L=a.getType()),L==="combo"?o.parentId=e:L==="node"&&(o.comboId=e),e){var H=this.findById(e);H&&H.addChild(a)}if(u){var H=this.findById(u);H&&H.removeChild(a)}var W=I5(this.get("comboTrees"),o.id,e);this.set("comboTrees",W),this.updateCombos()},r.prototype.renderCustomGroup=function(t,e){var n=this,a=t.groups,o=t.nodes,u=o===void 0?[]:o,f=10;if(a){this.set({groups:a});var L=EF(t);Object.keys(L).forEach(function(W){var et=L[W];n.get("customGroupControll").create(W,et,e,f),f--});var H=this.get("customGroup");H.sort()}else{var m=u.filter(function(W){return W.groupId}),x=[],w=(0,d.groupBy)(m,"groupId");Object.keys(w).forEach(function(W){var et=w[W].map(function(ht){return ht.id});n.get("customGroupControll").create(W,et,e,f),f--,x.find(function(ht){return ht.id===W})||x.push({id:W})}),this.set({groups:x})}},r.prototype.save=function(){var t=[],e=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){e.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:e,combos:n,groups:this.get("groups")}},r.prototype.changeSize=function(t,e){var n=this.get("viewController");return n.changeSize(t,e),this},r.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(e,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},r.prototype.getNodes=function(){return this.get("nodes")},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getCombos=function(){return this.get("combos")},r.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},r.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),n=e.onFrame,a=t.getNodes(),o=a.map(function(f){var m=f.getModel();return{id:m.id,x:m.x,y:m.y}});t.isAnimating()&&t.stopAnimate();var u=t.get("canvas");u.animate(function(f){(0,d.each)(o,function(m){var x=t.findById(m.id);if(!(!x||x.destroyed)){var w=x.get("originAttrs"),L=x.get("model");if(!w){var H=x.getContainer().getMatrix();H||(H=[1,0,0,0,1,0,0,0,1]),w={x:H[6],y:H[7]},x.set("originAttrs",w)}if(n){var W=n(x,f,m,w);x.set("model",Object.assign(L,W))}else L.x=w.x+(m.x-w.x)*f,L.y=w.y+(m.y-w.y)*f}}),t.refreshPositions()},{duration:e.duration,easing:e.easing,callback:function(){(0,d.each)(a,function(m){m.set("originAttrs",null)}),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},r.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e=t.get("nodes"),n=t.get("edges"),a=t.get("vedges"),o=t.get("combos"),u,f={};(0,d.each)(e,function(m){u=m.getModel();var x=m.get("originAttrs");x&&u.x===x.x&&u.y===x.y||(m.updatePosition({x:u.x,y:u.y}),f[u.id]=!0,u.comboId&&(f[u.comboId]=!0))}),o&&o.length!==0&&t.updateCombos(),(0,d.each)(n,function(m){var x=m.getSource().getModel(),w=m.getTarget().getModel();(f[x.id]||f[w.id]||m.getModel().isComboEdge)&&m.refresh()}),(0,d.each)(a,function(m){m.refresh()}),t.emit("aftergraphrefreshposition"),t.autoPaint()},r.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},r.prototype.isAnimating=function(){return this.animating},r.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},r.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},r.prototype.setMode=function(t){var e=this.get("modeController");return e.setMode(t),this},r.prototype.clear=function(){var t=this.get("canvas");return t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},r.prototype.toDataURL=function(t,e){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var u="";if(a==="svg"){var f=o.cloneNode(!0),m=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),x=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",m);x.replaceChild(f,x.documentElement);var w=new XMLSerializer().serializeToString(x);u="data:image/svg+xml;charset=utf8,"+encodeURIComponent(w)}else{var L=void 0,H=o.getContext("2d"),W=this.get("width"),et=this.get("height"),ht=void 0;if(e){var bt=window.devicePixelRatio;L=H.getImageData(0,0,W*bt,et*bt),ht=H.globalCompositeOperation,H.globalCompositeOperation="destination-over",H.fillStyle=e,H.fillRect(0,0,W,et)}u=o.toDataURL(t),e&&(H.clearRect(0,0,W,et),H.putImageData(L,0,0),H.globalCompositeOperation=ht)}return u},r.prototype.toFullDataURL=function(t,e,n){var a=this.get("group").getCanvasBBox(),o=a.height,u=a.width,f=this.get("renderer"),m=(0,Bc.Z)('<id="virtual-image"></div>'),x=n?n.backgroundColor:void 0,w=n?n.padding:void 0;w?(0,d.isNumber)(w)&&(w=[w,w,w,w]):w=[0,0,0,0];var L=o+w[0]+w[2],H=u+w[1]+w[3],W={container:m,height:L,width:H,quickHit:!0},et=f==="svg"?new H_.Z(W):new cy.Z(W),ht=this.get("group"),bt=ht.clone(),xt=(0,d.clone)(bt.getMatrix());xt||(xt=[1,0,0,0,1,0,0,0,1]);var qt=(a.maxX+a.minX)/2,ie=(a.maxY+a.minY)/2;gv.wO.translate(xt,xt,[-qt,-ie]),gv.wO.translate(xt,xt,[u/2+w[3],o/2+w[0]]),bt.resetMatrix(),bt.setMatrix(xt),et.add(bt);var _e=et.get("el"),ze="";e||(e="image/png"),setTimeout(function(){if(f==="svg"){var rr=_e.cloneNode(!0),sr=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),qe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",sr);qe.replaceChild(rr,qe.documentElement);var wr=new XMLSerializer().serializeToString(qe);ze="data:image/svg+xml;charset=utf8,"+encodeURIComponent(wr)}else{var Vr=void 0,Br=_e.getContext("2d"),Tn=void 0;if(x){var Hn=window.devicePixelRatio;Vr=Br.getImageData(0,0,H*Hn,L*Hn),Tn=Br.globalCompositeOperation,Br.globalCompositeOperation="destination-over",Br.fillStyle=x,Br.fillRect(0,0,H,L)}ze=_e.toDataURL(e),x&&(Br.clearRect(0,0,H,L),Br.putImageData(Vr,0,0),Br.globalCompositeOperation=Tn)}t==null||t(ze)},16)},r.prototype.downloadFullImage=function(t,e,n){var a=this,o=this.get("group").getCanvasBBox(),u=o.height,f=o.width,m=this.get("renderer"),x=(0,Bc.Z)('<id="virtual-image"></div>'),w=n?n.backgroundColor:void 0,L=n?n.padding:void 0;L?(0,d.isNumber)(L)&&(L=[L,L,L,L]):L=[0,0,0,0];var H=u+L[0]+L[2],W=f+L[1]+L[3],et={container:x,height:H,width:W},ht=m==="svg"?new H_.Z(et):new cy.Z(et),bt=this.get("group"),xt=bt.clone(),qt=(0,d.clone)(xt.getMatrix());qt||(qt=[1,0,0,0,1,0,0,0,1]);var ie=(o.maxX+o.minX)/2,_e=(o.maxY+o.minY)/2;gv.wO.translate(qt,qt,[-ie,-_e]),gv.wO.translate(qt,qt,[f/2+L[3],u/2+L[0]]),xt.resetMatrix(),xt.setMatrix(qt),ht.add(xt);var ze=ht.get("el");e||(e="image/png"),setTimeout(function(){var rr="";if(m==="svg"){var sr=ze.cloneNode(!0),qe=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),wr=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",qe);wr.replaceChild(sr,wr.documentElement);var Vr=new XMLSerializer().serializeToString(wr);rr="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Vr)}else{var Br=void 0,Tn=ze.getContext("2d"),Hn=void 0;if(w){var Un=window.devicePixelRatio;Br=Tn.getImageData(0,0,W*Un,H*Un),Hn=Tn.globalCompositeOperation,Tn.globalCompositeOperation="destination-over",Tn.fillStyle=w,Tn.fillRect(0,0,W,H)}rr=ze.toDataURL(e),w&&(Tn.clearRect(0,0,W,H),Tn.putImageData(Br,0,0),Tn.globalCompositeOperation=Hn)}var Ei=document.createElement("a"),Ti=(t||"graph")+(m==="svg"?".svg":"."+e.split("/")[1]);a.dataURLToImage(rr,m,Ei,Ti);var Li=document.createEvent("MouseEvents");Li.initEvent("click",!1,!1),Ei.dispatchEvent(Li)},16)},r.prototype.downloadImage=function(t,e,n){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var u=o.get("canvas"),f=u.getRenderer();e||(e="image/png");var m=(t||"graph")+(f==="svg"?".svg":e.split("/")[1]),x=document.createElement("a");setTimeout(function(){var w=o.toDataURL(e,n);a.dataURLToImage(w,f,x,m);var L=document.createEvent("MouseEvents");L.initEvent("click",!1,!1),x.dispatchEvent(L)},16)},r.prototype.dataURLToImage=function(t,e,n,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&e!=="svg"){var o=t.split(","),u="";if(o&&o.length>0){var f=o[0].match(/:(.*?);/);f&&f.length>=2&&(u=f[1])}for(var m=atob(o[1]),x=m.length,w=new Uint8Array(x);x--;)w[x]=m.charCodeAt(x);var L=new Blob([w],{type:u});window.navigator.msSaveBlob?window.navigator.msSaveBlob(L,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(L)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},r.prototype.updateLayout=function(t){var e=this.get("layoutController"),n;(0,d.isString)(t)?(n=t,t={type:n}):n=t.type;var a=this.get("layout"),o=a?a.type:void 0;if(!n||o===n){var u={};Object.assign(u,a,t),u.type=o||"random",this.set("layout",u),e.updateLayoutCfg(u)}else this.set("layout",t),e.changeLayout(n)},r.prototype.destroyLayout=function(){var t=this.get("layoutController");t.destroyLayout()},r.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");if(!!e){if(e.workerEnabled){t.layout();return}t.layoutMethod?t.relayout(!0):t.layout()}},r.prototype.collapseCombo=function(t){var e=this;if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.collapseCombo(t),n.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),u=[],f=[],m=this.get("comboTrees"),x=!1,w={};(m||[]).forEach(function(W){w[W.id]=W}),(m||[]).forEach(function(W){x||_h(W,function(et){if(x&&w[et.id])return!1;if(n.parentId===et.id?(w={},et.children.forEach(function(bt){w[bt.id]=bt})):n.id===et.id&&(x=!0),x){var ht=e.findById(et.id);ht&&ht.getType&&ht.getType()==="combo"&&(u=u.concat(ht.getNodes()),f=f.concat(ht.getCombos()))}return!0})});var L={},H=[];o.forEach(function(W){if(!(W.isVisible()&&!W.getModel().isVEdge)){var et=W.getSource(),ht=W.getTarget();if((u.includes(et)||f.includes(et))&&!u.includes(ht)&&!f.includes(ht)||et.getModel().id===n.id){var bt=W.getModel();if(bt.isVEdge){e.removeItem(W,!1);return}for(var xt=ht.getModel();!ht.isVisible();){if(ht=e.findById(xt.parentId||xt.comboId),!ht||!xt.parentId&&!xt.comboId)return;xt=ht.getModel()}var qt=xt.id;if(L[n.id+"-"+qt]){L[n.id+"-"+qt]+=bt.size||1;return}var ie=e.addItem("vedge",{source:n.id,target:qt,isVEdge:!0},!1);L[n.id+"-"+qt]=bt.size||1,H.push(ie)}else if(!u.includes(et)&&!f.includes(et)&&(u.includes(ht)||f.includes(ht))||ht.getModel().id===n.id){var bt=W.getModel();if(bt.isVEdge){e.removeItem(W,!1);return}for(var _e=et.getModel();!et.isVisible();){if(et=e.findById(_e.parentId||_e.comboId),!et||!_e.parentId&&!_e.comboId)return;_e=et.getModel()}var ze=_e.id;if(L[ze+"-"+n.id]){L[ze+"-"+n.id]+=bt.size||1;return}var ie=e.addItem("vedge",{target:n.id,source:ze,isVEdge:!0},!1);L[ze+"-"+n.id]=bt.size||1,H.push(ie)}}}),H.forEach(function(W){var et=W.getModel();e.updateItem(W,{size:L[et.source+"-"+et.target]},!1)})},r.prototype.expandCombo=function(t){var e=this;if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.expandCombo(t),n.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),u=[],f=[],m=this.get("comboTrees"),x=!1,w={};(m||[]).forEach(function(W){w[W.id]=W}),(m||[]).forEach(function(W){x||_h(W,function(et){if(x&&w[et.id])return!1;if(n.parentId===et.id?(w={},et.children.forEach(function(bt){w[bt.id]=bt})):n.id===et.id&&(x=!0),x){var ht=e.findById(et.id);ht&&ht.getType&&ht.getType()==="combo"&&(u=u.concat(ht.getNodes()),f=f.concat(ht.getCombos()))}return!0})});var L={},H={};o.forEach(function(W){if(!(W.isVisible()&&!W.getModel().isVEdge)){var et=W.getSource(),ht=W.getTarget(),bt=et.get("id"),xt=ht.get("id");if((u.includes(et)||f.includes(et))&&!u.includes(ht)&&!f.includes(ht)||bt===n.id){if(W.getModel().isVEdge){e.removeItem(W,!1);return}for(var qt=ht.getModel();!ht.isVisible();){if(ht=e.findById(qt.comboId||qt.parentId),!ht||!qt.parentId&&!qt.comboId)return;qt=ht.getModel()}xt=qt.id;for(var ie=et.getModel();!et.isVisible();){if(et=e.findById(ie.comboId||ie.parentId),!et||!ie.parentId&&!ie.comboId)return;if(ie.comboId===n.id||ie.parentId===n.id)break;ie=et.getModel()}if(bt=ie.id,xt){var _e=bt+"-"+xt;if(L[_e]){L[_e]+=W.getModel().size||1,e.updateItem(H[_e],{size:L[_e]},!1);return}var ze=e.addItem("vedge",{source:bt,target:xt,isVEdge:!0},!1);L[_e]=W.getModel().size||1,H[_e]=ze}}else if(!u.includes(et)&&!f.includes(et)&&(u.includes(ht)||f.includes(ht))||xt===n.id){if(W.getModel().isVEdge){e.removeItem(W,!1);return}for(var ie=et.getModel();!et.isVisible();){if(et=e.findById(ie.comboId||ie.parentId),!et||!ie.parentId&&!ie.comboId)return;ie=et.getModel()}bt=ie.id;for(var qt=ht.getModel();!ht.isVisible();){if(ht=e.findById(qt.comboId||qt.parentId),!ht||!qt.parentId&&!qt.comboId)return;if(qt.comboId===n.id||qt.parentId===n.id)break;qt=ht.getModel()}if(xt=qt.id,bt){var _e=bt+"-"+xt;if(L[_e]){L[_e]+=W.getModel().size||1,e.updateItem(H[_e],{size:L[_e]},!1);return}var ze=e.addItem("vedge",{target:xt,source:bt,isVEdge:!0},!1);L[_e]=W.getModel().size||1,H[_e]=ze}}else(u.includes(et)||f.includes(et))&&(u.includes(ht)||f.includes(ht))&&et.isVisible()&&ht.isVisible()&&W.show()}})},r.prototype.collapseExpandCombo=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!(t.getType&&t.getType()!=="combo")){for(var e=t.getModel(),n=this.findById(e.parentId);n;){var a=n.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),n=void 0;return}n=this.findById(a.parentId)}var o=e.collapsed;o?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},r.prototype.collapseGroup=function(t){var e=this.get("customGroupControll");e.collapseGroup(t)},r.prototype.expandGroup=function(t){var e=this.get("customGroupControll");e.expandGroup(t)},r.prototype.addPlugin=function(t){var e=this;t.destroyed||(e.get("plugins").push(t),t.initPlugin(e))},r.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},r.prototype.sortCombos=function(){var t=this,e=this.get("comboSorted");if(!e){this.set("comboSorted",!0);var n=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(f){_h(f,function(m){return n[m.depth]?n[m.depth].push(m.id):n[m.depth]=[m.id],a[m.id]=m.depth,!0})});var u=this.getEdges().concat(this.get("vedges"));(u||[]).forEach(function(f){var m=f.getModel(),x=a[m.source]||0,w=a[m.target]||0,L=Math.max(x,w);n[L]?n[L].push(m.id):n[L]=[m.id]}),n.forEach(function(f){if(!(!f||!f.length))for(var m=f.length-1;m>=0;m--){var x=t.findById(f[m]);x==null||x.toFront()}})}},r.prototype.getNeighbors=function(t,e){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},r.prototype.getNodeDegree=function(t,e){e===void 0&&(e=void 0);var n=t;(0,d.isString)(t)&&(n=this.findById(t));var a=this.get("degrees");a||(a=kD(this)),this.set("degees",a);var o=a[n.getID()],u;switch(e){case"in":u=o.inDegree;break;case"out":u=o.outDegree;break;case"all":u=o;break;default:u=o.degree;break}return u},r.prototype.getUndoStack=function(){return this.undoStack},r.prototype.getRedoStack=function(){return this.redoStack},r.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},r.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},r.prototype.pushStack=function(t,e,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=e?(0,d.clone)(e):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},r.prototype.getAdjMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=uA(this,e),this.set("adjMatrix",n)),n},r.prototype.getShortestPathMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=uA(this,e),this.set("adjMatrix",n)),(!a||!t)&&(a=FD(this,e),this.set("shortestPathMatrix",a)),a},r.prototype.destroy=function(){this.clear(),this.clearStack(),(0,d.each)(this.get("plugins"),function(o){o.destroyPlugin()});var t=this.get("tooltips");if(t)for(var e=0;e<t.length;e++){var n=t[e];if(!!n){var a=n.parentElement;!a||a.removeChild(n)}}this.get("eventController").destroy(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("layoutController").destroy(),this.get("customGroupControll").destroy(),this.get("canvas").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},r.prototype.createHull=function(t){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e||(e=this.get("group").addGroup({id:"hullGroup"}),e.toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=e.addGroup({id:t.id+"-container"}),o=new S8(this,(0,Ft.__assign)((0,Ft.__assign)({},t),{group:a})),u=o.id;return n[u]=o,o},r.prototype.getHulls=function(){return this.get("hullMap")},r.prototype.getHullById=function(t){return this.get("hullMap")[t]},r.prototype.removeHull=function(t){var e;(0,d.isString)(t)?e=this.getHullById(t):e=t;var n=this.get("hullMap");delete n[e.id],e.destroy()},r.prototype.setImageWaterMarker=function(t,e){t===void 0&&(t=mi.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},mi.imageWaterMarkerConfig,e),u=o.width,f=o.height,m=o.compatible,x=o.image;if(!a){var w={container:n,width:u,height:f,capture:!1},L=this.get("pixelRatio");L&&(w.pixelRatio=L),a=new cy.Z(w),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var H=a.get("context"),W=x.rotate,et=x.x,ht=x.y;H.rotate(-W*Math.PI/180);var bt=new Image;bt.crossOrigin="anonymous",bt.src=t,bt.onload=function(){if(H.drawImage(bt,et,ht,x.width,x.height),H.rotate(W*Math.PI/180),m)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var xt=document.querySelector(".g6-graph-watermarker");xt||(xt=document.createElement("div"),xt.className="g6-graph-watermarker"),xt.className="g6-graph-watermarker",a.destroyed||(xt.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(xt))}}},r.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},mi.textWaterMarkerConfig,e),u=o.width,f=o.height,m=o.compatible,x=o.text;if(!a){var w={container:n,width:u,height:f,capture:!1},L=this.get("pixelRatio");L&&(w.pixelRatio=L),a=new cy.Z(w),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var H=a.get("context"),W=x.rotate,et=x.fill,ht=x.fontFamily,bt=x.fontSize,xt=x.baseline,qt=x.x,ie=x.y,_e=x.lineHeight;H.rotate(-W*Math.PI/180),H.font=bt+"px "+ht,H.fillStyle=et,H.textBaseline=xt;for(var ze=t.length-1;ze>=0;ze--)H.fillText(t[ze],qt,ie+ze*_e);if(H.rotate(W*Math.PI/180),m)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var rr=document.querySelector(".g6-graph-watermarker");rr||(rr=document.createElement("div"),rr.className="g6-graph-watermarker"),rr.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild(rr)}},r}(Qr.default),VD=C8,A8=S(77201),ZD=S.n(A8),M8=function(i){(0,Ft.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.layoutAnimating=!1,e.set("removeList",[]),e.set("layoutMethod",e.getLayout()),e}return r.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var n=ZD()[t.type](e,t);return QR(n),n}:function(e){return ZD()[t.type](e,t)}):null},r.indexOfChild=function(t,e){var n=-1;return(0,Kl.S6)(t,function(a,o){if(e===a.id)return n=o,!1}),n},r.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},r.prototype.innerAddChild=function(t,e,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var u=a.addItem("node",o,!1);if(e){if(u.set("parent",e),n){var f=e.get("originAttrs");if(f)u.set("originAttrs",f);else{var m=e.getModel();u.set("originAttrs",{x:m.x,y:m.y})}}var x=e.get("children");x?x.push(u):e.set("children",[u]),a.addItem("edge",{source:e,target:u,id:e.get("id")+":"+u.get("id")},!1)}return(0,Kl.S6)(t.children||[],function(w){a.innerAddChild(w,u,n)}),a.emit("afteraddchild",{item:u,parent:e}),u},r.prototype.innerUpdateChild=function(t,e,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,e,n);return}(0,Kl.S6)(t.children||[],function(W){a.innerUpdateChild(W,o,n)});var u=o.get("children");if(u){var f=u.length;if(f>0)for(var m=u.length-1;m>=0;m--){var x=u[m].getModel();r.indexOfChild(t.children||[],x.id)===-1&&(a.innerRemoveChild(x.id,{x:t.x,y:t.y},n),u.splice(m,1))}}var w,L;o.get("originAttrs")&&(w=o.get("originAttrs").x,L=o.get("originAttrs").y);var H=o.getModel();n&&o.set("originAttrs",{x:H.x,y:H.y}),o.set("model",t.data),(w!==t.x||L!==t.y)&&o.updatePosition({x:t.x,y:t.y})},r.prototype.innerRemoveChild=function(t,e,n){var a=this,o=a.findById(t);if(!!o)if((0,Kl.S6)(o.get("children"),function(f){a.innerRemoveChild(f.getModel().id,e,n)}),n){var u=o.getModel();o.set("to",e),o.set("originAttrs",{x:u.x,y:u.y}),a.get("removeList").push(o)}else a.removeItem(o)},r.prototype.changeData=function(t){var e=this;this.getNodes().map(function(n){return e.clearItemStates(n)}),this.getEdges().map(function(n){return e.clearItemStates(n)}),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},r.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var e=this;e.updateLayout(t)},r.prototype.updateLayout=function(t){var e=this;if(!t){console.warn("layout cannot be null");return}e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()},r.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var e=this;e.layout(t)},r.prototype.layout=function(t){var e=this,n=e.get("data"),a=e.get("layoutMethod"),o=a(n,e.get("layout")),u=e.get("animate");if(e.emit("beforerefreshlayout",{data:n,layoutData:o}),e.emit("beforelayout"),e.innerUpdateChild(o,void 0,u),t){var f=e.get("viewController");f.fitView()}u?e.layoutAnimate(o):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:o}),e.emit("afterlayout")},r.prototype.addChild=function(t,e){var n=this;n.emit("beforeaddchild",{model:t,parent:e}),(0,Kl.HD)(e)||(e=e.get("id"));var a=n.findDataById(e);a&&(a.children||(a.children=[]),a.children.push(t),n.changeData())},r.prototype.updateChild=function(t,e){var n=this;if(!e||!n.findById(e)){n.changeData(t);return}var a=n.findById(e).getModel(),o=n.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var u=r.indexOfChild(a.children,t.id);a.children[u]=t}n.changeData()},r.prototype.removeChild=function(t){var e=this,n=e.findById(t);if(!!n){var a=n.get("parent");if(a&&!a.destroyed){var o=e.findDataById(a.get("id")),u=o&&o.children||[],f=n.getModel(),m=r.indexOfChild(u,f.id);u.splice(m,1)}e.changeData()}},r.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var a=null;return(0,Kl.S6)(e.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},r.prototype.layoutAnimate=function(t,e){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var u=o.get("model");u.sourceAnchor||(u.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){_h(t,function(u){var f=n.findById(u.id);if(f){var m=f.get("originAttrs"),x=f.get("model");if(m||(m={x:x.x,y:x.y},f.set("originAttrs",m)),e){var w=e(f,o,m,t);f.set("model",Object.assign(x,w))}else x.x=m.x+(u.x-m.x)*o,x.y=m.y+(u.y-m.y)*o}return!0}),(0,Kl.S6)(n.get("removeList"),function(u){var f=u.getModel(),m=u.get("originAttrs"),x=u.get("to");f.x=m.x+(x.x-m.x)*o,f.y=m.y+(x.y-m.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,Kl.S6)(n.getNodes(),function(u){u.set("originAttrs",null)}),(0,Kl.S6)(n.get("removeList"),function(u){n.removeItem(u)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},r.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},r.prototype.isLayoutAnimating=function(){return this.layoutAnimating},r.prototype.render=function(){var t=this,e=t.get("data");if(!e)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},r.prototype.save=function(){return this.get("data")},r}(VD),T8=M8,P8="-shape",HD="-label",lA=["startArrow","endArrow"],Z5="-label-bg",H5={options:{},itemType:"",type:"",getCustomConfig:function(r){return{}},getOptions:function(r){return(0,d.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(r)||{},r)},draw:function(r,t){var e=this.drawShape(r,t);if(e.set("className",this.itemType+P8),r.label){var n=this.drawLabel(r,t);n.set("className",this.itemType+HD)}return e},afterDraw:function(r,t,e){},drawShape:function(r,t){return null},drawLabel:function(r,t){var e=this.getOptions(r).labelCfg,n=e||{},a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var u=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var f=u.getBBox(),m=u.getMatrix();if(m||(m=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":m=cg(m,[["t",-f.width/2,-f.height/2],["r",o],["t",f.width/2,f.height/2]]);break;case"lefttop":m=cg(m,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":m=cg(m,[["t",-a.x,-a.y-f.height/2],["r",o],["t",a.x,a.y+f.height/2]]);break;default:m=cg(m,[["t",-f.width/2,-f.height/2],["r",o],["t",f.width/2,f.height/2]]);break}else m=cg(m,[["t",-a.x,-a.y-f.height/2],["r",o],["t",a.x,a.y+f.height/2]]);u.setMatrix(m)}if(a.background){var x=this.drawLabelBg(r,t,u),w=this.itemType+Z5;x.set("classname",w),u.toFront()}return u},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,d.mix)({},n,r.labelCfg),o=this.getLabelBgStyleByPosition(e,r,a,t),u=t.addShape("rect",{name:"text-bg-shape",attrs:o});return u},getLabelStyleByPosition:function(r,t,e){return{text:r.label}},getLabelBgStyleByPosition:function(r,t,e,n){return{}},getLabelStyle:function(r,t,e){var n=this.getLabelStyleByPosition(r,t,e),a=this.itemType+"Label",o=mi[a]?mi[a].style:null,u=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},o),n),t.style);return u},getShapeStyle:function(r){return r.style},update:function(r,t){this.updateShapeStyle(r,t),this.updateLabel(r,t)},updateShapeStyle:function(r,t){var e=t.getContainer(),n=t.getKeyShape(),a=(0,d.mix)({},n.attr(),r.style),o=function(m){var x,w=a[m];if((0,d.isPlainObject)(w)){var L=e.find(function(H){return H.get("name")===m});L&&L.attr(w)}else n.attr((x={},x[m]=w,x))};for(var u in a)o(u)},updateLabel:function(r,t){var e=t.getContainer(),n=this.getOptions({}).labelCfg,a=this.itemType+HD,o=e.find(function(ie){return ie.get("className")===a}),u=this.itemType+Z5,f=e.find(function(ie){return ie.get("classname")===u});if(r.label||r.label==="")if(o){var x={};t.getModel&&(x=t.getModel().labelCfg);var w=(0,d.deepMix)({},n,x,r.labelCfg),L=this.getLabelStyleByPosition(r,w,e),H=r.labelCfg?r.labelCfg.style:void 0,W=w.style&&w.style.background,et=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},o.attr()),L),H),ht=et.rotate;if(delete et.rotate,ht){var bt=[1,0,0,0,1,0,0,0,1];bt=cg(bt,[["t",-et.x,-et.y],["r",ht],["t",et.x,et.y]]),o.resetMatrix(),o.attr((0,Ft.__assign)((0,Ft.__assign)({},et),{matrix:bt}))}else o.resetMatrix(),o.attr(et);if(!f)et.background&&(f=this.drawLabelBg(r,e,o),f.set("classname",u),o.toFront());else if(et.background){var xt=this.getLabelBgStyleByPosition(o,r,w,e),qt=(0,Ft.__assign)((0,Ft.__assign)({},xt),W);f.resetMatrix(),ht&&f.rotateAtStart(ht),f.attr(qt)}else e.removeChild(f)}else{var m=this.drawLabel(r,e);m.set("className",a)}},afterUpdate:function(r,t){},setState:function(r,t,e){var n,a,o=e.get("keyShape");if(!!o){var u=e.getType(),f=(0,d.isBoolean)(t)?r:r+":"+t,m=this.getStateStyle(f,e),x=e.getStateStyle(f);if(!(!x&&!m)){var w=(0,d.mix)({},x||m),L=e.getContainer();if(t){var H=function(Br){var Tn,Hn=w[Br];if((0,d.isPlainObject)(Hn)&&!lA.includes(Br)){var Un=L.find(function(Ei){return Ei.get("name")===Br});Un&&Un.attr(Hn)}else o.attr((Tn={},Tn[Br]=Hn,Tn))};for(var W in w)H(W)}else{var et=(0,d.clone)(e.getCurrentStatesStyle()),ht=e.getModel(),bt=(0,d.mix)({},ht.style,(0,d.clone)(e.getOriginStyle())),xt=o.get("name"),qt=o.attr(),ie={},_e=function(Br){var Tn=w[Br];if((0,d.isPlainObject)(Tn)&&!lA.includes(Br)){var Hn=L.find(function(Ti){return Ti.get("name")===Br});if(Hn){var Un=Hn.attr();(0,d.each)(Tn,function(Ti,Li){(Un[Li]||Un[Li]===0)&&delete Un[Li]}),ie[Br]=Un}}else{var Ei={x:1,y:1,cx:1,cy:1};qt[Br]&&!Ei[Br]&&delete qt[Br]}};for(var ze in w)_e(ze);xt?ie[xt]=qt:(0,d.mix)(ie,qt);for(var W in et){var rr=et[W];(!(0,d.isPlainObject)(rr)||lA.includes(W))&&(xt?((0,d.mix)(bt[xt],(a={},a[W]=rr,a)),delete bt[W]):(0,d.mix)(bt,(n={},n[W]=rr,n)),delete et[W])}var sr={};(0,d.deepMix)(sr,bt,ie,et);var qe=function(Br){var Tn,Hn,Un=sr[Br];if((0,d.isPlainObject)(Un)&&!lA.includes(Br)){var Ei=L.find(function(Ti){return Ti.get("name")===Br});Ei&&Ei.attr(Un)}else u==="combo"?xt||o.attr((Tn={},Tn[Br]=Un,Tn)):o.attr((Hn={},Hn[Br]=Un,Hn))};for(var wr in sr)qe(wr)}}}},getStateStyle:function(r,t){var e=t.getModel(),n=t.getType(),a=this.getOptions(e),o=a.stateStyles,u=a.style,f=u===void 0?{}:u,m=e.stateStyles?e.stateStyles[r]:o&&o[r];return n==="combo"?(0,d.clone)(m):(0,d.mix)({},f,m)},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.getOptions(r).anchorPoints;return t}},I8={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:mi.nodeLabel.offset,getSize:function(r){var t=r.size||this.getOptions({}).size||mi.defaultNode.size;return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:r.label};var n=t.offset;(0,d.isNil)(n)&&(n=this.offset);var a=this.getSize(r),o=a[0],u=a[1],f;switch(e){case"top":f={x:0,y:0-u/2-n,textBaseline:"bottom"};break;case"bottom":f={x:0,y:u/2+n,textBaseline:"top"};break;case"left":f={x:0-o/2-n,y:0,textAlign:"right"};break;default:f={x:o/2+n,y:0,textAlign:"left"};break}return f.text=r.label,f},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var u=v5(o.padding),f=a.width+u[1]+u[3],m=a.height+u[0]+u[2],x=e.offset;(0,d.isNil)(x)&&(x=this.offset);var w;return w={x:a.minX-u[3],y:a.minY-u[0]},w=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},w),o),{width:f,height:m}),w},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=t.find(function(rr){return rr.get("className")==="link-point-left"}),a=t.find(function(rr){return rr.get("className")==="link-point-right"}),o=t.find(function(rr){return rr.get("className")==="link-point-top"}),u=t.find(function(rr){return rr.get("className")==="link-point-bottom"}),f;n&&(f=n.attr()),a&&!f&&(f=a.attr()),o&&!f&&(f=o.attr()),u&&!f&&(f=u.attr()),f||(f=e);var m=(0,d.mix)({},f,r.linkPoints),x=m.fill,w=m.stroke,L=m.lineWidth,H=m.size/2;H||(H=m.r);var W=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},et=W.left,ht=W.right,bt=W.top,xt=W.bottom,qt=this.getSize(r),ie=qt[0],_e=qt[1],ze={r:H,fill:x,stroke:w,lineWidth:L};n?!et&&et!==void 0?n.remove():n.attr((0,Ft.__assign)((0,Ft.__assign)({},ze),{x:-ie/2,y:0})):et&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ze),{x:-ie/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!ht&&ht!==void 0&&a.remove(),a.attr((0,Ft.__assign)((0,Ft.__assign)({},ze),{x:ie/2,y:0}))):ht&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ze),{x:ie/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!bt&&bt!==void 0&&o.remove(),o.attr((0,Ft.__assign)((0,Ft.__assign)({},ze),{x:0,y:-_e/2}))):bt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ze),{x:0,y:-_e/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u?!xt&&xt!==void 0?u.remove():u.attr((0,Ft.__assign)((0,Ft.__assign)({},ze),{x:0,y:_e/2})):xt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ze),{x:0,y:_e/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(r,t,e,n){var a=t.get("keyShape");a.attr((0,Ft.__assign)({},e)),this.updateLabel(r,t),n&&this.updateIcon(r,t)},updateIcon:function(r,t){var e=this,n=t.getContainer(),a=this.getOptions(r).icon,o=(r.icon?r.icon:{show:void 0}).show,u=n.find(function(L){return L.get("className")===e.type+"-icon"});if(u)if(o||o===void 0){var f=(0,d.mix)({},u.attr(),a),m=f.width,x=f.height;u.attr((0,Ft.__assign)((0,Ft.__assign)({},f),{x:-m/2,y:-x/2}))}else u.remove();else if(o){var m=a.width,x=a.height;n.addShape("image",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},a),{x:-m/2,y:-x/2}),className:this.type+"-icon",name:this.type+"-icon"});var w=n.find(function(W){return W.get("className")==="node-label"});w&&w.toFront()}}},O8=(0,Ft.__assign)((0,Ft.__assign)({},H5),I8);ac.registerNode("single-node",O8);var cA="edge-shape";function L8(i){var r=i;return i==="start"?r="end":i==="end"&&(r="start"),r}var k8={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:mi.defaultEdge.size,style:{x:0,y:0,stroke:mi.defaultEdge.style.stroke,lineAppendWidth:mi.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:mi.edgeLabel.style.fill,fontSize:mi.edgeLabel.style.fontSize}},stateStyles:(0,Ft.__assign)({},mi.edgeStateStyles)},getPath:function(r){var t=[];return(0,d.each)(r,function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,d.mix)({},t,e,r.style),a=r.size||mi.defaultEdge.size;r=this.getPathPoints(r);var o=r.startPoint,u=r.endPoint,f=this.getControlPoints(r),m=[o];f&&(m=m.concat(f)),m.push(u);var x=this.getPath(m),w=(0,d.mix)({},mi.defaultEdge.style,{stroke:mi.defaultEdge.color,lineWidth:a,path:x},n);return w},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(bt){return bt.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var u=r.startPoint,f=r.endPoint,m=this.getControlPoints(r),x=[u];m&&(x=x.concat(m)),x.push(f);var w=(0,d.mix)({},n,a.attr(),r.style),L=r.sourceNode,H=r.targetNode,W={radius:w.radius};m||(W={source:L,target:H,offset:w.offset,radius:w.radius});var et=this.getPath(x,W),ht=(0,d.mix)(n,a.attr(),{lineWidth:o,path:et},r.style);a&&a.attr(ht)},getLabelStyleByPosition:function(r,t,e){var n=t.position||this.labelPosition,a={},o=e&&e.find(function(L){return L.get("className")===cA}),u;n==="start"?u=0:n==="end"?u=1:u=.5;var f=t.refX||this.refX,m=t.refY||this.refY;if(r.startPoint.x===r.endPoint.x&&r.startPoint.y===r.endPoint.y)return a.x=r.startPoint.x+f,a.y=r.startPoint.y+m,a.text=r.label,a;var x=(0,d.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate,w=jC(o,u,f,m,x);return a.x=w.x,a.y=w.y,a.rotate=w.rotate,a.textAlign=this._getTextAlign(n,w.angle),a.text=r.label,a},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var u=o.padding,f=a.width+u[1]+u[3],m=a.height+u[0]+u[2],x=e.position||this.labelPosition,w=(0,Ft.__assign)((0,Ft.__assign)({},o),{width:f,height:m,x:a.minX-u[2],y:a.minY-u[0],rotate:0}),L=(0,d.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,H=n&&n.find(function(qt){return qt.get("className")===cA}),W;x==="start"?W=0:x==="end"?W=1:W=.5;var et=e.refX||this.refX,ht=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return w.x=t.startPoint.x+et,w.y=t.startPoint.y+ht,w;var bt=jC(H,W,et-f/2,ht+m/2,L),xt=bt.angle;return xt>1/2*Math.PI&&xt<3*1/2*Math.PI&&(bt=jC(H,W,et+f/2,ht+m/2,L)),L&&(w.x=bt.x,w.y=bt.y),w.rotate=bt.rotate,w},_getTextAlign:function(r,t){var e="center";return t?(t=t%(Math.PI*2),r!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?e=r:e=L8(r)),e):r},getControlPoints:function(r){return r.controlPoints},getPathPoints:function(r){return r},drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("path",{className:cA,name:cA,attrs:e});return n},drawLabel:function(r,t){var e=this.options.labelCfg,n=(0,d.deepMix)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},e,r.labelCfg),a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var u=t.addShape("text",{attrs:a,name:"text-shape"});if(o&&u.rotateAtStart(o),a.background){var f=this.drawLabelBg(r,t,u),m=this.itemType+Z5;f.set("classname",m),u.toFront()}return u},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,d.deepMix)({},n,r.labelCfg),o=this.getLabelStyle(r,a,t),u=o.rotate,f=this.getLabelBgStyleByPosition(e,r,a,t);delete f.rotate;var m=t.addShape("rect",{name:"text-bg-shape",attrs:f});return u&&m.rotateAtStart(u),m}},R8=(0,Ft.__assign)((0,Ft.__assign)({},H5),k8);ac.registerEdge("single-edge",R8),ac.registerEdge("line",{getControlPoints:function(){}},"single-edge"),ac.registerEdge("spline",{getPath:function(r){var t=kR(r);return t}},"single-edge"),ac.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(r){var t=r.startPoint,e=r.endPoint,n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},a,o;if(r.controlPoints!==void 0){if(o=r.controlPoints[0],a=x5(t,o,e),t.x<=e.x&&t.y>e.y?this.clockwise=a.x>o.x?0:1:t.x<=e.x&&t.y<e.y?this.clockwise=a.x>o.x?1:0:t.x>e.x&&t.y<=e.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(e.x-t.x)/(e.y-t.y))return[]}else{r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),(0,Rs.default)(r.curveOffset)&&(r.curveOffset=r.curveOffset[0]),r.curveOffset<0?this.clockwise=0:this.clockwise=1;var u={x:e.x-t.x,y:e.y-t.y},f=Math.atan2(u.y,u.x);o={x:r.curveOffset*Math.cos(-Math.PI/2+f)+n.x,y:r.curveOffset*Math.sin(-Math.PI/2+f)+n.y},a=x5(t,o,e)}var m=V_(t,a),x=[{x:m,y:m}];return x},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),r.length===2?t.push(["L",r[1].x,r[1].y]):t.push(["A",r[1].x,r[1].y,0,0,this.clockwise,r[2].x,r[2].y]),t}},"single-edge"),ac.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(r){var t=r.controlPoints;if(!t||!t.length){var e=r.startPoint,n=r.endPoint;r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,Rs.default)(this.curveOffset)&&(r.curveOffset=r.curveOffset[0]),(0,Rs.default)(this.curvePosition)&&(r.curvePosition=r.curveOffset[0]);var a=UC(e,n,r.curvePosition,r.curveOffset);t=[a]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["Q",r[1].x,r[1].y,r[2].x,r[2].y]),t}},"single-edge"),ac.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(r){var t=r.controlPoints;if(r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,vv.default)(r.curveOffset)&&(r.curveOffset=[r.curveOffset,-r.curveOffset]),(0,vv.default)(r.curvePosition)&&(r.curvePosition=[r.curvePosition,1-r.curvePosition]),!t||!t.length||t.length<2){var e=r.startPoint,n=r.endPoint,a=UC(e,n,r.curvePosition[0],r.curveOffset[0]),o=UC(e,n,r.curvePosition[1],r.curveOffset[1]);t=[a,o]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["C",r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y]),t}},"single-edge"),ac.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,vv.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:t.x,y:(e.y-t.y)*this.curvePosition[0]+t.y},a={x:e.x,y:(e.y-t.y)*this.curvePosition[1]+t.y},o=[n,a];return o}},"cubic"),ac.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,vv.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:(e.x-t.x)*this.curvePosition[0]+t.x,y:t.y},a={x:(e.x-t.x)*this.curvePosition[1]+t.x,y:e.y},o=[n,a];return o}},"cubic"),ac.registerEdge("loop",{getPathPoints:function(r){return KR(r)},getControlPoints:function(r){return r.controlPoints},afterDraw:function(r){r.controlPoints=void 0},afterUpdate:function(r){r.controlPoints=void 0}},"cubic");var D8={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:mi.comboLabel.refX,refY:mi.comboLabel.refY,options:{style:{stroke:mi.defaultCombo.style.stroke,fill:mi.defaultCombo.style.fill,lineWidth:mi.defaultCombo.style.lineWidth},labelCfg:{style:{fill:mi.comboLabel.style.fill,fontSize:mi.comboLabel.style.fontSize}},stateStyles:(0,Ft.__assign)({},mi.comboStateStyles)},getSize:function(r){var t=(0,d.clone)(r.size||this.options.size||mi.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,d.isArray)(a)&&(a=a[0]);var o=t.refX,u=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(u)&&(u=this.refY);var f=this.getSize(r),m=Math.max(n.r,f[0]/2)||f[0]/2,x=m+a,w;switch(e){case"top":w={x:0,y:-x-u,textBaseline:"bottom",textAlign:"center"};break;case"bottom":w={x:0,y:x+u,textBaseline:"bottom",textAlign:"center"};break;case"left":w={x:-x+o,y:0,textAlign:"left"};break;case"center":w={x:0,y:0,text:r.label,textAlign:"center"};break;default:w={x:x+o,y:0,textAlign:"right"};break}return w.text=r.label,w},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,Ft.__assign)({},e)),this.updateLabel(r,t)}},B8=(0,Ft.__assign)((0,Ft.__assign)({},H5),D8);ac.registerCombo("single-combo",B8),ac.registerCombo("circle",{options:{size:[mi.defaultCombo.size[0],mi.defaultCombo.size[0]],padding:mi.defaultCombo.padding[0],animate:!0,style:{stroke:mi.defaultCombo.style.stroke,fill:mi.defaultCombo.style.fill,lineWidth:mi.defaultCombo.style.lineWidth},labelCfg:{style:{fill:mi.comboLabel.style.fill,fontSize:mi.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,Ft.__assign)({},mi.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r);delete e.height,delete e.width;var n=t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,d.isArray)(e)&&(e=e[0]);var n={stroke:r.color},a=(0,d.mix)({},t,n,r.style),o=this.getSize(r),u;!(0,d.isNumber)(a.r)||isNaN(a.r)?u=o[0]/2||mi.defaultCombo.style.r:u=Math.max(a.r,o[0]/2)||o[0]/2,a.r=u+e;var f=(0,Ft.__assign)({x:0,y:0},a);return r.style?r.style.r=u:r.style={r:u},f},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,d.isArray)(n)&&(n=n[0]);var a=(0,d.clone)(r.style),o=Math.max(a.r,e[0]/2)||e[0]/2;a.r=o+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:r.color},m=t.get("keyShape"),x=(0,d.mix)({},m.attr(),f,a);r.style?r.style.r=o:r.style={r:o},this.updateShape(r,t,x,!0)}},"single-combo"),ac.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:mi.defaultCombo.style.stroke,fill:mi.defaultCombo.style.fill,lineWidth:mi.defaultCombo.style.lineWidth},labelCfg:{style:{fill:mi.comboLabel.style.fill,fontSize:mi.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,Ft.__assign)({},mi.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,u=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(u)&&(u=this.refY);var f=n.width/2+a[3],m=n.height/2+a[0],x;switch(e){case"top":x={x:0-f+o,y:0-m+u,textBaseline:"top",textAlign:"left"};break;case"bottom":x={x:0,y:m+u,textBaseline:"bottom",textAlign:"center"};break;case"left":x={x:0-f+u,y:0,textAlign:"left"};break;case"center":x={x:0,y:0,text:r.label,textAlign:"center"};break;default:x={x:f+o,y:0,textAlign:"right"};break}return x.text=r.label,x},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,d.isNumber)(e)&&(e=[e,e,e,e]);var n={stroke:r.color},a=(0,d.mix)({},t,n,r.style),o=this.getSize(r),u,f;!(0,d.isNumber)(a.width)||isNaN(a.width)?u=o[0]||mi.defaultCombo.style.width:u=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?f=o[1]||mi.defaultCombo.style.height:f=Math.max(a.height,o[1])||o[1];var m=-u/2-e[3],x=-f/2-e[0];a.width=u+e[1]+e[3],a.height=f+e[0]+e[2];var w=(0,Ft.__assign)({x:m,y:x},a);return r.style?(r.style.width=u,r.style.height=f):r.style={width:u,height:f},w},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(r.style),o=Math.max(a.width,e[0])||e[0],u=Math.max(a.height,e[1])||e[1];a.width=o+n[1]+n[3],a.height=u+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-u/2-n[0];var m={stroke:r.color},x=t.get("keyShape"),w=(0,d.mix)({},x.attr(),m,a);r.style?(r.style.width=o,r.style.height=u):r.style={width:o,height:u},this.updateShape(r,t,w,!1)},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,Ft.__assign)({},e)),this.updateLabel(r,t)}},"single-combo"),ac.registerNode("circle",{options:{size:mi.defaultNode.size,style:{x:0,y:0,stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=(0,Vf.default)({},n,r.icon),u=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),f=o.width,m=o.height,x=o.show;return x&&t.addShape("image",{attrs:(0,Ft.__assign)({x:-f/2,y:-m/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(r,t),u},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.bottom,m=n.size,x=n.r,w=(0,Ft.__rest)(n,["top","left","right","bottom","size","r"]),L=this.getSize(r),H=L[0]/2;o&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:-H,y:0,r:m/2||x||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H,y:0,r:m/2||x||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:-H,r:m/2||x||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),f&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:H,r:m/2||x||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,Vf.default)({},t,e),a=this.getSize(r),o=a[0]/2,u=(0,Ft.__assign)({x:0,y:0,r:o},n);return u},update:function(r,t){var e=t.getContainer(),n=this.getSize(r),a={stroke:r.color,r:n[0]/2},o=t.get("keyShape"),u=(0,Vf.default)({},o.attr(),a,r.style);this.updateShape(r,t,u,!0),this.updateLinkPoints(r,e)}},"single-node"),ac.registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(r,t),n},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.bottom,m=n.size,x=n.r,w=(0,Ft.__rest)(n,["top","left","right","bottom","size","r"]),L=this.getSize(r),H=L[0],W=L[1];o&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:-H/2,y:0,r:m/2||x||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H/2,y:0,r:m/2||x||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:-W/2,r:m/2||x||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),f&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:W/2,r:m/2||x||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],u=n.height||a[1],f=(0,Ft.__assign)({x:-o/2,y:-u/2,width:o,height:u},n);return f},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o=t.get("keyShape");r.size||(a[0]=o.attr("width")||n.width,a[1]=o.attr("height")||n.height);var u={stroke:r.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},f=(0,d.mix)({},n,o.attr(),u);f=(0,d.mix)(f,r.style),this.updateShape(r,t,f,!1),this.updateLinkPoints(r,e)}},"single-node"),ac.registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),u=n.width,f=n.height,m=n.show;if(m)var x=t.addShape("image",{attrs:(0,Ft.__assign)({x:-u/2,y:-f/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.bottom,m=n.size,x=n.r,w=(0,Ft.__rest)(n,["top","left","right","bottom","size","r"]),L=this.getSize(r),H=L[0]/2,W=L[1]/2;o&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:-H,y:0,r:m/2||x||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H,y:0,r:m/2||x||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:-W,r:m/2||x||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),f&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:W,r:m/2||x||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getSize(r),o=a[0]/2,u=a[1]/2,f=(0,Ft.__assign)({x:0,y:0,rx:o,ry:u},n);return f},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o={stroke:r.color,rx:a[0]/2,ry:a[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},n,u.attr(),o);f=(0,d.mix)(f,r.style),this.updateShape(r,t,f,!0),this.updateLinkPoints(r,e)}},"single-node"),ac.registerNode("diamond",{options:{size:[80,80],style:{stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=n.width,f=n.height,m=n.show;if(m)var x=t.addShape("image",{attrs:(0,Ft.__assign)({x:-u/2,y:-f/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.bottom,m=n.size,x=n.r,w=(0,Ft.__rest)(n,["top","left","right","bottom","size","r"]),L=this.getSize(r),H=L[0],W=L[1];o&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:-H/2,y:0,r:m/2||x||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H/2,y:0,r:m/2||x||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:-W/2,r:m/2||x||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),f&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:W/2,r:m/2||x||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(r){var t=this.getSize(r),e=t[0],n=t[1],a=[["M",0,-n/2],["L",e/2,0],["L",0,n/2],["L",-e/2,0],["Z"]];return a},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getPath(r),o=(0,Ft.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},u=t.get("keyShape"),f=(0,d.mix)({},n,u.attr(),o);f=(0,d.mix)(f,r.style),this.updateShape(r,t,f,!0),this.updateLinkPoints(r,e)}},"single-node"),ac.registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(r,t){var e=this.getOptions(r),n=e.icon,a=n===void 0?{}:n,o=e.direction,u=this.getShapeStyle(r),f=r.direction||o,m=t.addShape("path",{attrs:u,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),x=a.width,w=a.height,L=a.show,H=a.offset;if(L){var W=-x/2,et=-w/2;(f==="up"||f==="down")&&(et+=H),(f==="left"||f==="right")&&(W+=H),t.addShape("image",{attrs:(0,Ft.__assign)({x:W,y:et},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(r,t),m},drawLinkPoints:function(r,t){var e=this.getOptions(r),n=e.linkPoints,a=n===void 0?{}:n,o=e.direction,u=r.direction||o,f=a.top,m=a.left,x=a.right,w=a.bottom,L=a.size,H=a.r,W=(0,Ft.__rest)(a,["top","left","right","bottom","size","r"]),et=this.getSize(r),ht=et[0];if(m){var bt=null,xt=ht*Math.sin(1/3*Math.PI),qt=ht*Math.sin(1/3*Math.PI);u==="up"?bt=[-qt,xt]:u==="down"?bt=[-qt,-xt]:u==="left"&&(bt=[-qt,qt-xt]),bt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},W),{x:bt[0],y:bt[1],r:L/2||H||5}),className:"link-point-left",name:"link-point-left"})}if(x){var ie=null,xt=ht*Math.sin(1/3*Math.PI),qt=ht*Math.sin(1/3*Math.PI);u==="up"?ie=[qt,xt]:u==="down"?ie=[qt,-xt]:u==="right"&&(ie=[qt,qt-xt]),ie&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},W),{x:ie[0],y:ie[1],r:L/2||H||5}),className:"link-point-right",name:"link-point-right"})}if(f){var _e=null,xt=ht*Math.sin(1/3*Math.PI),qt=ht*Math.sin(1/3*Math.PI);u==="up"?_e=[qt-xt,-xt]:u==="left"?_e=[qt,-xt]:u==="right"&&(_e=[-qt,-xt]),_e&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},W),{x:_e[0],y:_e[1],r:L/2||H||5}),className:"link-point-top",name:"link-point-top"})}if(w){var ze=null,xt=ht*Math.sin(1/3*Math.PI),qt=ht*Math.sin(1/3*Math.PI);u==="down"?ze=[-qt+xt,xt]:u==="left"?ze=[qt,xt]:u==="right"&&(ze=[-qt,xt]),ze&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},W),{x:ze[0],y:ze[1],r:L/2||H||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(r){var t=this.getOptions(r).direction,e=r.direction||t,n=this.getSize(r),a=n[0],o=a*Math.sin(1/3*Math.PI),u=a*Math.sin(1/3*Math.PI),f=[["M",-u,o],["L",0,-o],["L",u,o],["Z"]];return e==="down"?f=[["M",-u,-o],["L",u,-o],["L",0,o],["Z"]]:e==="left"?f=[["M",-u,u-o],["L",u,-u],["L",u,u],["Z"]]:e==="right"&&(f=[["M",u,u-o],["L",-u,u],["L",-u,-u],["Z"]]),f},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getPath(r),o=(0,Ft.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},u=t.get("keyShape"),f=(0,d.mix)({},n,u.attr(),o);f=(0,d.mix)(f,r.style),this.updateShape(r,t,f,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}),n=e.linkPoints,a=e.direction,o=r.direction||a,u=t.find(function(Ei){return Ei.get("className")==="link-point-left"}),f=t.find(function(Ei){return Ei.get("className")==="link-point-right"}),m=t.find(function(Ei){return Ei.get("className")==="link-point-top"}),x=t.find(function(Ei){return Ei.get("className")==="link-point-bottom"}),w=n,L=u||f||m||x;L&&(w=L.attr());var H=(0,d.mix)({},w,r.linkPoints),W=H.fill,et=H.stroke,ht=H.lineWidth,bt=H.size/2;bt||(bt=H.r);var xt=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},qt=xt.left,ie=xt.right,_e=xt.top,ze=xt.bottom,rr=this.getSize(r),sr=rr[0],qe={r:bt,fill:W,stroke:et,lineWidth:ht},wr=null,Vr=sr*Math.sin(1/3*Math.PI),Br=sr*Math.sin(1/3*Math.PI);o==="up"?wr=[-Br,Vr]:o==="down"?wr=[-Br,-Vr]:o==="left"&&(wr=[-Br,Br-Vr]),wr&&(u?!qt&&qt!==void 0?u.remove():u.attr((0,Ft.__assign)((0,Ft.__assign)({},qe),{x:wr[0],y:wr[1]})):qt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},qe),{x:wr[0],y:wr[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Tn=null;o==="up"?Tn=[Br,Vr]:o==="down"?Tn=[Br,-Vr]:o==="right"&&(Tn=[Br,Br-Vr]),Tn&&(f?!ie&&ie!==void 0?f.remove():f.attr((0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Tn[0],y:Tn[1]})):ie&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Tn[0],y:Tn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Hn=null;o==="up"?Hn=[Br-Vr,-Vr]:o==="left"?Hn=[Br,-Vr]:o==="right"&&(Hn=[-Br,-Vr]),Hn&&(m?!_e&&_e!==void 0?m.remove():m.attr((0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Hn[0],y:Hn[1]})):_e&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Hn[0],y:Hn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var Un=null;o==="down"?Un=[-Br+Vr,Vr]:o==="left"?Un=[Br,Vr]:o==="right"&&(Un=[-Br,Vr]),Un&&(x?!ze&&ze!==void 0?x.remove():x.attr((0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Un[0],y:Un[1]})):ze&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},qe),{x:Un[0],y:Un[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),ac.registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:mi.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(r,t){var e=this.getOptions(r).preRect,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=this.getSize(r),u=o[0],f=o[1],m=t.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),x=n.show,w=(0,Ft.__rest)(n,["show"]);return x&&t.addShape("rect",{attrs:(0,Ft.__assign)({x:-u/2,y:-f/2,height:f},w),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(r,t),this.drawStateIcon(r,t),this.drawLinkPoints(r,t),m},drawLogoIcon:function(r,t){var e=this.getOptions(r).logoIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var u=n.width,f=n.height,m=n.x,x=n.y,w=n.offset,L=(0,Ft.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:m||-o/2+u+w,y:x||-f/2,width:u,height:f}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(r,t){var e=this.getOptions(r).stateIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var u=n.width,f=n.height,m=n.x,x=n.y,w=n.offset,L=(0,Ft.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:m||o/2-u+w,y:x||-f/2,width:u,height:f}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.bottom,m=n.size,x=n.r,w=(0,Ft.__rest)(n,["top","left","right","bottom","size","r"]),L=this.getSize(r),H=L[0],W=L[1];o&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:-H/2,y:0,r:m/2||x||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:H/2,y:0,r:m/2||x||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:-W/2,r:m/2||x||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),f&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},w),{x:0,y:W/2,r:m/2||x||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(r,t){var e=this.getOptions(r),n=e.labelCfg,a=n===void 0?{}:n,o=e.logoIcon,u=o===void 0?{}:o,f=e.descriptionCfg,m=f===void 0?{}:f,x=this.getSize(r),w=x[0],L=null,H=u.show,W=u.width,et=-w/2+a.offset;H&&(et=-w/2+W+a.offset);var ht=a.style,bt=m.style,xt=m.paddingTop;return(0,d.isString)(r.description)?(L=t.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ht),{x:et,y:-5,text:r.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},bt),{x:et,y:17+(xt||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0})):L=t.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},ht),{x:et,y:7,text:r.label}),draggable:!0}),L},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],u=n.height||a[1],f=(0,Ft.__assign)({x:-o/2,y:-u/2,width:o,height:u},n);return f},update:function(r,t){var e=this.getOptions(r),n=e.style,a=n===void 0?{}:n,o=e.labelCfg,u=o===void 0?{}:o,f=e.descriptionCfg,m=f===void 0?{}:f,x=this.getSize(r),w=x[0],L=x[1],H=t.get("keyShape");H.attr((0,Ft.__assign)((0,Ft.__assign)({},a),{x:-w/2,y:-L/2,width:w,height:L}));var W=t.getContainer(),et=W.find(function(_o){return _o.get("className")==="rect-logo-icon"}),ht=et?et.attr():{},bt=(0,d.mix)({},ht,r.logoIcon),xt=bt.width;xt===void 0&&(xt=this.options.logoIcon.width);var qt=r.logoIcon?r.logoIcon.show:void 0,ie=u.offset,_e=-w/2+xt+ie;!qt&&qt!==void 0&&(_e=-w/2+ie);var ze=W.find(function(_o){return _o.get("className")==="node-label"}),rr=W.find(function(_o){return _o.get("className")==="rect-description"});if(r.label)if(!ze)W.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},u.style),{x:_e,y:r.description?-5:7,text:r.label}),className:"node-label",name:"node-label",draggable:!0});else{var sr=r.labelCfg?r.labelCfg.style:{},qe=(0,d.mix)({},ze.attr(),sr);r.label&&(qe.text=r.label),qe.x=_e,(0,d.isString)(r.description)&&(qe.y=-5),rr&&(rr.resetMatrix(),rr.attr({x:_e})),ze.resetMatrix(),ze.attr(qe)}if((0,d.isString)(r.description)){var wr=m.paddingTop;if(!rr)W.addShape("text",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},m.style),{x:_e,y:17+(wr||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var sr=r.descriptionCfg?r.descriptionCfg.style:{},Vr=(0,d.mix)({},rr.attr(),sr);(0,d.isString)(r.description)&&(Vr.text=r.description),Vr.x=_e,rr.resetMatrix(),rr.attr((0,Ft.__assign)((0,Ft.__assign)({},Vr),{y:17+(wr||0)}))}}var Br=W.find(function(_o){return _o.get("className")==="pre-rect"});if(Br){var Tn=(0,d.mix)({},Br.attr(),r.preRect);Br.attr((0,Ft.__assign)((0,Ft.__assign)({},Tn),{x:-w/2,y:-L/2,height:L}))}if(et)if(!qt&&qt!==void 0)et.remove();else{var Hn=bt.width,Un=bt.height,Ei=bt.x,Ti=bt.y,Li=bt.offset,_i=(0,Ft.__rest)(bt,["width","height","x","y","offset"]);et.attr((0,Ft.__assign)((0,Ft.__assign)({},_i),{x:Ei||-w/2+Hn+Li,y:Ti||-Un/2,width:Hn,height:Un}))}else qt&&this.drawLogoIcon(r,W);var bi=W.find(function(_o){return _o.get("className")==="rect-state-icon"}),Ba=bi?bi.attr():{},La=(0,d.mix)({},Ba,r.stateIcon);if(bi){!La.show&&La.show!==void 0&&bi.remove();var Ha=La.width,Un=La.height,Ei=La.x,Ti=La.y,Ri=La.offset,Na=(0,Ft.__rest)(La,["width","height","x","y","offset"]);bi.attr((0,Ft.__assign)((0,Ft.__assign)({},Na),{x:Ei||w/2-Ha+Ri,y:Ti||-Un/2,width:Ha,height:Un}))}else La.show&&this.drawStateIcon(r,W);this.updateLinkPoints(r,W)}},"single-node"),ac.registerNode("star",{options:{size:60,style:{stroke:mi.defaultNode.style.stroke,fill:mi.defaultNode.style.fill,lineWidth:mi.defaultNode.style.lineWidth},labelCfg:{style:{fill:mi.nodeLabel.style.fill,fontSize:mi.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:mi.defaultNode.linkPoints.size,lineWidth:mi.defaultNode.linkPoints.lineWidth,fill:mi.defaultNode.linkPoints.fill,stroke:mi.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,Ft.__assign)({},mi.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=n.width,f=n.height,m=n.show;if(m)var x=t.addShape("image",{attrs:(0,Ft.__assign)({x:-u/2,y:-f/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,u=n.right,f=n.leftBottom,m=n.rightBottom,x=n.size,w=n.r,L=(0,Ft.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),H=this.getSize(r),W=H[0];if(u){var et=Math.cos((18+72*0)/180*Math.PI)*W,ht=Math.sin((18+72*0)/180*Math.PI)*W;t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:et,y:-ht,r:x/2||w||5}),className:"link-point-right",name:"link-point-right"})}if(a){var et=Math.cos((18+72*1)/180*Math.PI)*W,ht=Math.sin((18+72*1)/180*Math.PI)*W;t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:et,y:-ht,r:x/2||w||5}),className:"link-point-top",name:"link-point-top"})}if(o){var et=Math.cos((18+72*2)/180*Math.PI)*W,ht=Math.sin((18+72*2)/180*Math.PI)*W;t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:et,y:-ht,r:x/2||w||5}),className:"link-point-left",name:"link-point-left"})}if(f){var et=Math.cos((18+72*3)/180*Math.PI)*W,ht=Math.sin((18+72*3)/180*Math.PI)*W;t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:et,y:-ht,r:x/2||w||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(m){var et=Math.cos((18+72*4)/180*Math.PI)*W,ht=Math.sin((18+72*4)/180*Math.PI)*W;t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},L),{x:et,y:-ht,r:x/2||w||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(r){for(var t=this.getSize(r),e=t[0],n=e*3/8,a=r.innerR||n,o=[],u=0;u<5;u++){var f=Math.cos((18+72*u)/180*Math.PI)*e,m=Math.sin((18+72*u)/180*Math.PI)*e,x=Math.cos((54+72*u)/180*Math.PI)*a,w=Math.sin((54+72*u)/180*Math.PI)*a;u===0?o.push(["M",f,-m]):o.push(["L",f,-m]),o.push(["L",x,-w])}return o.push(["Z"]),o},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,d.mix)({},t,e),a=this.getPath(r),o=(0,Ft.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},u=t.get("keyShape"),f=(0,d.mix)({},n,u.attr(),o);f=(0,d.mix)(f,r.style),this.updateShape(r,t,f,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}).linkPoints,n=t.find(function(Vr){return Vr.get("className")==="link-point-left"}),a=t.find(function(Vr){return Vr.get("className")==="link-point-right"}),o=t.find(function(Vr){return Vr.get("className")==="link-point-top"}),u=t.find(function(Vr){return Vr.get("className")==="link-point-left-bottom"}),f=t.find(function(Vr){return Vr.get("className")==="link-point-right-bottom"}),m=e,x=n||a||o||u||f;x&&(m=x.attr());var w=(0,d.mix)({},m,r.linkPoints),L=w.fill,H=w.stroke,W=w.lineWidth,et=w.size/2;et||(et=w.r);var ht=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},bt=ht.left,xt=ht.right,qt=ht.top,ie=ht.leftBottom,_e=ht.rightBottom,ze=this.getSize(r),rr=ze[0],sr={r:et,fill:L,stroke:H,lineWidth:W},qe=Math.cos((18+72*0)/180*Math.PI)*rr,wr=Math.sin((18+72*0)/180*Math.PI)*rr;a?!xt&&xt!==void 0?a.remove():a.attr((0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr})):xt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),qe=Math.cos((18+72*1)/180*Math.PI)*rr,wr=Math.sin((18+72*1)/180*Math.PI)*rr,o?!qt&&qt!==void 0?o.remove():o.attr((0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr})):qt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),qe=Math.cos((18+72*2)/180*Math.PI)*rr,wr=Math.sin((18+72*2)/180*Math.PI)*rr,n?!bt&&bt!==void 0?n.remove():n.attr((0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr})):bt&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),qe=Math.cos((18+72*3)/180*Math.PI)*rr,wr=Math.sin((18+72*3)/180*Math.PI)*rr,u?!ie&&ie!==void 0?u.remove():u.attr((0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr})):ie&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),qe=Math.cos((18+72*4)/180*Math.PI)*rr,wr=Math.sin((18+72*4)/180*Math.PI)*rr,f?!_e&&_e!==void 0?u.remove():f.attr((0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr})):_e&&t.addShape("circle",{attrs:(0,Ft.__assign)((0,Ft.__assign)({},sr),{x:qe,y:-wr}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node"),ac.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r);delete n.fill;var a=t.addShape(e,{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(r,a),a},drawClip:function(r,t){var e=this.getOptions(r).clipCfg;if(!!e.show){var n=e.type,a=e.x,o=e.y,u=e.style;if(n==="circle"){var f=e.r;t.setClip({type:"circle",attrs:(0,Ft.__assign)({r:f,x:a,y:o},u)})}else if(n==="rect"){var m=e.width,x=e.height,w=a-m/2,L=o-x/2;t.setClip({type:"rect",attrs:(0,Ft.__assign)({x:w,y:L,width:m,height:x},u)})}else if(n==="ellipse"){var H=e.rx,W=e.ry;t.setClip({type:"ellipse",attrs:(0,Ft.__assign)({x:a,y:o,rx:H,ry:W},u)})}else if(n==="polygon"){var et=e.points;t.setClip({type:"polygon",attrs:(0,Ft.__assign)({points:et},u)})}else if(n==="path"){var ht=e.path;t.setClip({type:"path",attrs:(0,Ft.__assign)({path:ht},u)})}}},getShapeStyle:function(r){var t=this.getOptions(r).style,e=this.getSize(r),n=this.getOptions(r).img,a=e[0],o=e[1];t&&(a=t.width||e[0],o=t.height||e[1]);var u=(0,Ft.__assign)({x:-a/2,y:-o/2,width:a,height:o,img:n},t);return u},updateShapeStyle:function(r,t){var e=t.getContainer(),n=this.itemType+"-shape",a=e.find(function(u){return u.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(r);a&&a.attr(o)}},"single-node");function fA(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fA=function(t){return typeof t}:fA=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fA(i)}var hA=function(r){var t=r.x,e=r.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},F8=function(r){r===void 0&&(r=[]);var t=[],e=[];r.forEach(function(f){t.push(f.x),e.push(f.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,e),u=Math.max.apply(Math,e);return{centerX:(n+a)/2,centerY:(o+u)/2,maxX:a,maxY:u,minX:n,minY:o,height:u-o,width:a-n}},jD=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},j5=function(r){var t=[],e={};return r.forEach(function(n){var a=n.x+"-"+n.y;n.id=a,e[a]=n}),(0,d.each)(e,function(n){t.push(n)}),t},pA=function(r){return r=j5(r),r},XD=function(r,t){return[r,{x:r.x,y:t.y},t]},dA=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},N8=function(r,t){var e=Math.abs(r.x-t.centerX),n=Math.abs(r.y-t.centerY);return e/t.width>n/t.height},X5=function(r,t){var e=N8(t,r);return e?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},Y5=function(r,t){var e=Math.min(r.minX,t.minX),n=Math.min(r.minY,t.minY),a=Math.max(r.maxX,t.maxX),o=Math.max(r.maxY,t.maxY);return{centerX:(e+a)/2,centerY:(n+o)/2,minX:e,minY:n,maxX:a,maxY:o,height:o-n,width:a-e}},W5=function(r){var t=r.minX,e=r.minY,n=r.maxX,a=r.maxY;return[{x:t,y:e},{x:n,y:e},{x:n,y:a},{x:t,y:a}]},vA=function(r,t){var e=r.x,n=r.y;return e<t.minX||e>t.maxX||n<t.minY||n>t.maxY},z8=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},G8=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},U8=function(r,t){return z8(r,t.x).concat(G8(r,t.y))},W_=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},V8=function(r,t){var e=-2,n=0;return t.forEach(function(a){a&&(r.x===a.x&&(n+=e),r.y===a.y&&(n+=e))}),n},YD=function(r,t,e,n,a){return W_(r,t)+W_(r,e)+V8(r,[t,e,n,a])},Z8=function i(r,t,e,n,a){a===void 0&&(a=0),r.unshift(t[n]),e[n]&&e[n]!==n&&a<=100&&i(r,t,e,e[n],a+1)},H8=function(r,t){var e=r.indexOf(t);e>-1&&r.splice(e,1)},gA=function(r,t,e,n){var a=t.x-r.x,o=t.y-r.y,u=n.x-e.x,f=n.y-e.y,m=(-o*(r.x-e.x)+a*(r.y-e.y))/(-u*o+a*f),x=(u*(r.y-e.y)-f*(r.x-e.x))/(-u*o+a*f);return m>=0&&m<=1&&x>=0&&x<=1},K5=function(r,t,e){if(e.width===0&&e.height===0)return!1;var n=W5(e),a=n[0],o=n[1],u=n[2],f=n[3];return gA(r,t,a,o)||gA(r,t,a,f)||gA(r,t,o,u)||gA(r,t,u,f)},j8=function(r,t,e,n){var a=[];return r.forEach(function(o){o!==t&&(o.x===t.x||o.y===t.y)&&!K5(o,t,e)&&!K5(o,t,n)&&a.push(o)}),j5(a)},X8=function(r,t,e,n,a,o,u){var f=[],m=[t],x={},w={},L={};w[t.id]=0,L[t.id]=YD(t,e,t);var H={};r.forEach(function(ht){H[ht.id]=ht});for(var W=function(){var bt,xt=Infinity;if(m.forEach(function(ie){L[ie.id]<xt&&(xt=L[ie.id],bt=ie)}),bt===e){var qt=[];return Z8(qt,H,x,e.id),{value:qt}}H8(m,bt),f.push(bt),j8(r,bt,n,a).forEach(function(ie){if(f.indexOf(ie)===-1){m.indexOf(ie)===-1&&m.push(ie);var _e=L[bt.id]+W_(bt,ie);w[ie.id]&&_e>=w[ie.id]||(x[ie.id]=bt.id,w[ie.id]=_e,L[ie.id]=w[ie.id]+YD(ie,e,t,o,u))}})};m.length;){var et=W();if(fA(et)==="object")return et.value}return[t,e]},Y8=function(r,t,e){return!(r.x===t.x&&t.x===e.x||r.y===t.y&&t.y===e.y)},W8=function(r,t,e,n){var a=W_(r,t),o=W_(e,t);a<n&&(n=a),o<n&&(n=o);var u={x:t.x-n/a*(t.x-r.x),y:t.y-n/a*(t.y-r.y)},f={x:t.x-n/o*(t.x-e.x),y:t.y-n/o*(t.y-e.y)};return[u,f]},WD=function(r,t){var e=[],n=r[0];return e.push("M"+n.x+" "+n.y),r.forEach(function(a,o){var u=r[o+1],f=r[o+2];if(u&&f)if(Y8(a,u,f)){var m=W8(a,u,f,t),x=m[0],w=m[1];e.push("L"+x.x+" "+x.y),e.push("Q"+u.x+" "+u.y+" "+w.x+" "+w.y),e.push("L"+w.x+" "+w.y)}else e.push("L"+u.x+" "+u.y);else u&&e.push("L"+u.x+" "+u.y)}),e.join("")},K8=function(r,t,e,n,a){var o,u;if(!e||!e.getType())o=hA(r);else if(e.getType()==="combo"){var f=e.getKeyShape();o=f.getCanvasBBox()||hA(r),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=e.getBBox();if(!n||!n.getType())u=hA(t);else if(n.getType()==="combo"){var m=n.getKeyShape();u=m.getCanvasBBox()||hA(t),u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2}else u=n&&n.getBBox();if(jD(o,u))return pA(XD(r,t));var x=dA(o,a),w=dA(u,a);if(jD(x,w))return pA(XD(r,t));var L=X5(x,r),H=X5(w,t),W=F8([L,H]),et=Y5(x,w),ht=Y5(x,W),bt=Y5(w,W),xt=[];xt=xt.concat(W5(ht)),xt=xt.concat(W5(bt));var qt={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[W,ht,bt].forEach(function(_e){xt=xt.concat(U8(_e,qt).filter(function(ze){return vA(ze,x)&&vA(ze,w)}))}),[{x:L.x,y:H.y},{x:H.x,y:L.y}].forEach(function(_e){vA(_e,x)&&vA(_e,w)&&xt.push(_e)}),xt.unshift(L),xt.push(H),xt=j5(xt);var ie=X8(xt,L,H,o,u,r,t);return ie.unshift(r),ie.push(t),pA(ie)};function mA(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mA=function(t){return typeof t}:mA=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mA(i)}var $8=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},Q8=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},q8=function(r,t){return[r,t]},J8=function(r,t,e,n,a){return pA(K8(r,t,e,n,a.offset))},t7={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:$8,fallbackRoute:J8},Gz={maxAllowedDirectionChange:45,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Q8,fallbackRoute:q8},Qp=function(r,t){var e=Math.floor(r/t);return e<0?0:e},e7=function(r,t,e){var n={};return r.forEach(function(a){if(a)for(var o=dA(a.getBBox(),e),u=Qp(o.minX,t);u<=Qp(o.maxX,t);u+=1)for(var f=Qp(o.minY,t);f<=Qp(o.maxY,t);f+=1){var m=u+"-"+f;n[m]=!0}}),n},$5=function(r,t){var e=t.x-r.x,n=t.y-r.y;if(!e&&!n)return 0;var a=(360+Math.atan2(n,e)*180/Math.PI)%360;return a},KD=function(r,t){var e=Math.abs(r-t);return e>180?360-e:e},$D=function(r,t,e){for(var n=Infinity,a=0,o=t.length;a<o;a++){var u=e(r,t[a]);u<n&&(n=u)}return n},QD=function(r,t,e){var n=[];if(!t)return n;var a=e.directions,o=e.offset,u=t.getBBox(),f=dA(t.getBBox(),o);for(var m in f)f[m]=Qp(f[m],e.gridSize);var x=r.x>Qp(u.minX,e.gridSize)&&r.x<Qp(u.maxX,e.gridSize)&&r.y>Qp(u.minY,e.gridSize)&&r.y<Qp(u.maxY,e.gridSize);if(x)for(var w=0,L=a;w<L.length;w++)for(var H=L[w],W=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],m=0;m<4;m++){var et=W[m],ht=G_(r,{x:r.x+H.stepX*f.width,y:r.y+H.stepY*f.height},et[0],et[1]);ht&&!K5(r,ht,t.getBBox())&&(ht.id=ht.x+"-"+ht.y,n.push(ht))}else{var ht=X5(f,r);ht.id=ht.x+"-"+ht.y,n.push(ht)}return n},qD=function(r,t,e,n,a){var o=(0,Vf.default)(t7,a);o.obstacles=o.obstacles||[];var u=e7(o.obstacles.concat([e,n]),o.gridSize,o.offset),f={x:Qp(r.x,o.gridSize),y:Qp(r.y,o.gridSize)},m={x:Qp(t.x,o.gridSize),y:Qp(t.y,o.gridSize)};r.id=f.x+"-"+f.y,t.id=m.x+"-"+m.y;var x=QD(f,e,o),w=QD(m,n,o);x.forEach(function(sr){delete u[sr.id]}),w.forEach(function(sr){delete u[sr.id]});for(var L={},H={},W={},et={},ht={},bt=0;bt<x.length;bt++){var xt=x[bt];L[xt.id]=xt,et[xt.id]=0,ht[xt.id]=$D(xt,w,o.distFunc)}for(var qt=function(qe,wr){var Vr=$5(qe,wr),Br;if(W[qe.id]){var Hn=$5({x:parseFloat(W[qe.id].split("-")[0]),y:parseFloat(W[qe.id].split("-")[1])},qe);Br=KD(Hn,Vr)}else{var Tn=$5(f,qe);Br=KD(Tn,Vr)}return Br},ie=function(qe){var wr=[t],Vr={x:parseFloat(qe.split("-")[0]),y:parseFloat(qe.split("-")[1]),id:qe};for(qt(Vr,m)&&wr.unshift({x:Vr.x===m.x?t.x:Vr.x*o.gridSize,y:Vr.y===m.y?t.y:Vr.y*o.gridSize});W[qe]&&W[qe]!==qe;){var Br={x:parseFloat(qe.split("-")[0]),y:parseFloat(qe.split("-")[1]),id:qe},Tn=W[qe],Hn={x:parseFloat(Tn.split("-")[0]),y:parseFloat(Tn.split("-")[1]),id:Tn},Un=qt(Hn,Br);Un&&wr.unshift({x:Hn.x===Br.x?wr[0].x:Hn.x*o.gridSize,y:Hn.y===Br.y?wr[0].y:Hn.y*o.gridSize}),qe=Tn}var Ei={x:parseFloat(qe.split("-")[0]),y:parseFloat(qe.split("-")[1]),id:qe};return wr[0].x=Ei.x===f.x?r.x:wr[0].x,wr[0].y=Ei.y===f.y?r.y:wr[0].y,wr.unshift(r),wr},_e=o.maximumLoops,ze=function(){var qe,wr=Infinity;for(var Vr in L)ht[Vr]<=wr&&(wr=ht[Vr],qe=L[Vr]);if(!qe)return"break";if(w.findIndex(function(_i){return _i.x===qe.x&&_i.y===qe.y})>-1){var Br=ie(qe.id);return{value:Br}}delete L[qe.id],H[qe.id]=!0;for(var Tn=0;Tn<o.directions.length;Tn++){var Hn=o.directions[Tn],Un={x:qe.x+Hn.stepX,y:qe.y+Hn.stepY,id:qe.x+Hn.stepX+"-"+(qe.y+Hn.stepY)};if(!H[Un.id]){var Ei=qt(qe,Un);if(!(Ei>o.maxAllowedDirectionChange)&&!u[Un.id]){L[Un.id]||(L[Un.id]=Un);var Ti=o.distFunc(qe,Un)+(isNaN(o.penalties[Ei])?o.gridSize:o.penalties[Ei]),Li=et[qe.id]+Ti;et[Un.id]&&Li>=et[Un.id]||(W[Un.id]=qe.id,et[Un.id]=Li,ht[Un.id]=Li+$D(Un,w,o.distFunc))}}}_e-=1};Object.keys(L).length>0&&_e>0;){var rr=ze();if(mA(rr)==="object")return rr.value;if(rr==="break")break}return o.fallbackRoute(r,t,e,n,o)};ac.registerEdge("polyline",{options:{color:mi.defaultEdge.color,size:mi.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:mi.defaultEdge.style.stroke,lineAppendWidth:mi.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:mi.edgeLabel.style.fill,fontSize:mi.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:1e3,gridSize:10},stateStyles:(0,Ft.__assign)({},mi.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r);e.radius===0&&delete e.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return n},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,d.mix)({},t,e,r.style);r=this.getPathPoints(r),this.radius=n.radius,this.offset=n.offset;var a=r.startPoint,o=r.endPoint,u=this.getControlPoints(r),f=[a];u&&(f=f.concat(u)),f.push(o);var m=r.sourceNode,x=r.targetNode,w=n.radius,L=this.options.routeCfg;L.offset=n.offset;var H=this.getPath(f,m,x,w,L);((0,d.isArray)(H)&&H.length<=1||(0,d.isString)(H)&&H.indexOf("L")===-1)&&(H="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(H="M0 0, L0 0");var W=(0,d.mix)({},mi.defaultEdge.style,n,{lineWidth:r.size,path:H});return W},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(xt){return xt.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var u=r.startPoint,f=r.endPoint,m=this.getControlPoints(r),x=[u];m&&(x=x.concat(m)),x.push(f);var w=(0,d.mix)({},n,a.attr(),r.style),L=r.sourceNode,H=r.targetNode,W=w.radius,et=this.options.routeCfg;et.offset=w.offset;var ht=this.getPath(x,L,H,W,et);((0,d.isArray)(ht)&&ht.length<=1||(0,d.isString)(ht)&&ht.indexOf("L")===-1)&&(ht="M0 0, L0 0"),(isNaN(u.x)||isNaN(u.y)||isNaN(f.x)||isNaN(f.y))&&(ht="M0 0, L0 0");var bt=(0,d.mix)(n,a.attr(),{lineWidth:o,path:ht},r.style);a&&a.attr(bt)},getPath:function(r,t,e,n,a){var o=a.offset;if(!o||r.length>2){if(n)return WD(r,n);var u=[];return(0,d.each)(r,function(w,L){L===0?u.push(["M",w.x,w.y]):u.push(["L",w.x,w.y])}),u}var f;if(n){f=qD(r[0],r[r.length-1],t,e,a);var m=WD(f,n);return m}f=qD(r[0],r[r.length-1],t,e,a);var x=RR(f);return x}},"single-edge");var r7={triangle:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+" L "+(n+t)+","+r/2+" Z";return a},vee:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=20),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+`
        L `+(n+2*t/3)+",0 L "+(n+t)+","+r/2+" Z";return a},circle:function(r,t){r===void 0&&(r=5),t===void 0&&(t=0);var e=t*2,n="M "+e+`, 0
            a `+r+","+r+" 0 1,0 "+r*2+`,0
            a `+r+","+r+" 0 1,0 "+-r*2+",0";return n},rect:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=10),e===void 0&&(e=0);var n=e*2,a="M "+n+","+-r/2+` 
        L `+(n+t)+","+-r/2+` 
        L `+(n+t)+","+r/2+` 
        L `+n+","+r/2+" Z";return a},diamond:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+`,0 
        L `+(n+t/2)+","+-r/2+` 
        L `+(n+t)+`,0 
        L `+(n+t/2)+","+r/2+" Z";return a},triangleRect:function(r,t,e,n,a,o){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var u=o*2,f=u+t+a,m="M "+u+",0 L "+(u+t)+",-"+r/2+" L "+(u+t)+","+r/2+` Z
            M `+f+", -"+e/2+`
            L `+(f+n)+" -"+e/2+`
            L `+(f+n)+" "+e/2+`
            L `+f+" "+e/2+`
            Z`;return m}},n7={collapse:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r+e-4,t]]},expand:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r-e+2*e-4,t],["M",r-e+e,t-e+4],["L",r,t+e-4]]},upTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t+a],["L",r+n,t+a],["L",r,t-e],["Z"]]},downTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t-a],["L",r+n,t-a],["L",r,t+e],["Z"]]}},L1=ac,i7={mat3:gv.wO,mix:X_.default,deepMix:Vf.default,transform:gv.vs},a7=(0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)((0,Ft.__assign)({},i7),it),Y),vt),gt),dt),o7=a7,s7=function(){function i(r){this._cfgs=(0,Vf.default)(this.getDefaultCfgs(),r),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(r){var t=this;t.set("graph",r);var e=t.getEvents(),n={};(0,gs.default)(e,function(a,o){var u=(0,ZC.default)(t,a);n[o]=u,r.on(o,u)}),this._events=n,this.init()},i.prototype.init=function(){},i.prototype.getEvents=function(){return{}},i.prototype.get=function(r){return this._cfgs[r]},i.prototype.set=function(r,t){this._cfgs[r]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var r=this.get("graph"),t=this._events;(0,gs.default)(t,function(e,n){r.off(n,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),hg=s7,JD="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",u7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{img:JD}},r.prototype.init=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("container"),a=t.get("canvas").get("el"),o=t.get("width"),u=t.get("height"),f=this.get("img")||JD,m=(0,Bc.Z)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),x=(0,Bc.Z)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+f+`;
        user-select: none
        '></div>`);m.appendChild(x),(0,nl.Z)(m,{width:o+"px",height:u+"px",left:n.offsetLeft+"px",top:n.offsetTop+"px"}),(0,nl.Z)(x,{width:o/e+"px",height:u/e+"px",left:"0px",top:"0px"}),n.insertBefore(m,a),this.set("container",m),this.set("gridContainer",x)},r.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},r.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a="matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", 0, 0)";(0,nl.Z)(e,{transform:a})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){var t=this.get("graph"),e=t.get("container"),n=this.get("container");e.removeChild(n)},r}(hg),l7=u7,c7=S(38186),Q5=S.n(c7);Q5()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var f7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},r.prototype.init=function(){var t=this.get("className"),e=(0,Bc.Z)("<div class="+(t||"g6-component-contextmenu")+"></div>");(0,nl.Z)(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),n.appendChild(e),this.set("menu",e)},r.prototype.onMenuShow=function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),!!t.item){var n=this.get("shouldBegin");if(!!n(t)){var a=this.get("itemTypes");if(t.item&&t.item.getType&&a.indexOf(t.item.getType())===-1){e.onMenuHide();return}if(!!t.item){var o=this.get("menu"),u=this.get("getContent"),f=this.get("graph"),m=u(t,f);(0,Zo.default)(m)?o.innerHTML=m:o.innerHTML=m.outerHTML,this.removeMenuEventListener();var x=this.get("handleMenuClick");if(x){var w=function(rr){x(rr.target,t.item,f)};this.set("handleMenuClickWrapper",w),o.addEventListener("click",w)}var L=f.get("width"),H=f.get("height"),W=o.getBoundingClientRect(),et=this.get("offsetX")||0,ht=this.get("offsetY")||0,bt=f.getContainer().offsetTop,xt=f.getContainer().offsetLeft,qt=t.canvasX+xt+et,ie=t.canvasY+bt+ht;qt+W.width>L&&(qt=t.canvasX-W.width-et+xt),ie+W.height>H&&(ie=t.canvasY-W.height-ht+bt),(0,nl.Z)(o,{top:ie+"px",left:qt+"px",visibility:"visible"});var _e=function(rr){e.onMenuHide()};document.body.addEventListener("click",_e),this.set("handler",_e)}}}},r.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},r.prototype.onMenuHide=function(){var t=this.get("menu");t&&(0,nl.Z)(t,{visibility:"hidden"}),this.removeMenuEventListener()},r.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(hg),h7=f7,tB=Math.max,p7="default",d7="keyShape",v7="delegate",eB="svg",g7=function(i){(0,Ft.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.handleUpdateCanvas=(0,d.debounce)(function(e){var n=t;n.destroyed||n.updateCanvas()},100,!1),t}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,a=e.graph;if(!this.destroyed){var o=this.get("canvas"),u=o.get("container"),f=(0,Bc.Z)(`
      <div
        class=`+e.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          border: 2px solid #1980ff'
        draggable=true>
      </div>`),m=0,x=0,w=!1,L=0,H=0,W=0,et=0,ht=0,bt=0;f.addEventListener("dragstart",function(xt){if(xt.dataTransfer){var qt=new Image;qt.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",xt.dataTransfer.setDragImage(qt,0,0),xt.dataTransfer.setData("text","view-port-minimap")}if(e.refresh=!1,xt.target===f){var ie=f.style;L=parseInt(ie.left,10),H=parseInt(ie.top,10),W=parseInt(ie.width,10),et=parseInt(ie.height,10),!(W>n[0]||et>n[1])&&(bt=a.getZoom(),ht=t.get("ratio"),w=!0,m=xt.clientX,x=xt.clientY)}},!1),f.addEventListener("drag",function(xt){if(!(!w||(0,qu.default)(xt.clientX)||(0,qu.default)(xt.clientY))){var qt=m-xt.clientX,ie=x-xt.clientY;(L-qt<0||L-qt+W>=n[0])&&(qt=0),(H-ie<0||H-ie+et>=n[1])&&(ie=0),L-=qt,H-=ie,(0,nl.Z)(f,{left:L+"px",top:H+"px"}),a.translate(qt*bt/ht,ie*bt/ht),m=xt.clientX,x=xt.clientY}},!1),f.addEventListener("dragend",function(){w=!1,e.refresh=!0},!1),this.set("viewport",f),u.appendChild(f)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("dx"),n=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),u=this.get("graph"),f=this.get("size"),m=u.get("width"),x=u.get("height"),w=u.getPointByCanvas(0,0),L=u.getPointByCanvas(m,x),H=this.get("viewport");H||this.initViewport();var W=u.getZoom(),et=(L.x-w.x)*t,ht=(L.y-w.y)*t,bt=w.x*t+a,xt=w.y*t+o,qt=bt+et,ie=xt+ht;bt<0&&(et+=bt,bt=0),qt>f[0]&&(et=et-(qt-f[0])),xt<0&&(ht+=xt,xt=0),ie>f[1]&&(ht=ht-(ie-f[1])),this.set("ratio",t);var _e=bt+"px",ze=xt+"px";(0,nl.Z)(H,{left:_e,top:ze,width:et+"px",height:ht+"px"})}},r.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var a=n.clone();a.resetMatrix(),e.clear(),e.add(a);var o=t.get("renderer");o===eB&&this.updateVisible(a)}},r.prototype.updateVisible=function(t){var e=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),e.updateVisible(a)})}},r.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph;(0,gs.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,gs.default)(e.getNodes(),function(n){t.updateOneNodeKeyShape(n)}),this.clearDestroyedShapes()},r.prototype.updateOneNodeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")],u=t.getBBox(),f=t.get("keyShape").clone(),m=f.attr(),x={x:u.centerX,y:u.centerY};o?x=Object.assign(m,x):(o=f,n.add(o));var w=o.get("type");(w==="rect"||w==="image")&&(x.x=u.minX,x.y=u.minY),o.attr(x),t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph;(0,gs.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,gs.default)(e.getNodes(),function(n){t.updateOneNodeDelegateShape(n)}),this.clearDestroyedShapes()},r.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(!(!e||e.length===0))for(var n=e.length-1;n>=0;n--){var a=t[e[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[e[n]])}},r.prototype.updateOneEdgeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")];if(o){var u=t.get("keyShape").attr("path");o.attr("path",u)}else o=t.get("keyShape").clone(),n.add(o),o.toBack();t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateOneNodeDelegateShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("delegateStyle"),o=this.get("itemMap")||{},u=o[t.get("id")],f=t.getBBox();if(u){var m={x:f.minX,y:f.minY,width:f.width,height:f.height};u.attr(m)}else u=n.addShape("rect",{attrs:(0,Ft.__assign)({x:f.minX,y:f.minY,width:f.width,height:f.height},a),name:"minimap-node-shape"});t.isVisible()||u.hide(),u.exist=!0,o[t.get("id")]=u,this.set("itemMap",o)},r.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),u=(0,Bc.Z)("<div class='"+a+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");(0,Zo.default)(o)&&(o=document.getElementById(o)),o?o.appendChild(u):e.get("container").appendChild(u),t.set("container",u);var f=(0,Bc.Z)('<div class="g6-minimap-container" style="position: relative;"></div>');u.appendChild(f);var m,x=e.get("renderer");x===eB?m=new H_.Z({container:f,width:n[0],height:n[1]}):m=new cy.Z({container:f,width:n[0],height:n[1]}),t.set("canvas",m),t.updateCanvas()},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),u=this.get("padding");if(!a.destroyed){switch(o){case p7:this.updateGraphShapes();break;case d7:this.updateKeyShapes();break;case v7:this.updateDelegateShapes();break;default:break}var f=a.get("children")[0];if(!!f){f.resetMatrix();var m=f.getCanvasBBox(),x=e.get("canvas").getBBox(),w=x.width,L=x.height;Number.isFinite(m.width)&&(w=tB(m.width,w),L=tB(m.height,L)),w+=2*u,L+=2*u;var H=Math.min(n[0]/w,n[1]/L),W=[1,0,0,0,1,0,0,0,1],et=0,ht=0;Number.isFinite(m.minX)&&(et=-m.minX),Number.isFinite(m.minY)&&(ht=-m.minY);var bt=(n[0]-(w-2*u)*H)/2,xt=(n[1]-(L-2*u)*H)/2;W=cg(W,[["t",et,ht],["s",H,H],["t",bt,xt]]),f.setMatrix(W),this.set("ratio",H),this.set("totaldx",bt+et*H),this.set("totaldy",xt+ht*H),this.set("dx",bt),this.set("dy",xt),this.updateViewport()}}}}},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},r}(hg),m7=g7;function pg(i,r,t){var e=i.x-r.x,n=i.y-r.y;return!t||Math.abs(e)>t||Math.abs(n)>t?Math.sqrt(e*e+n*n):t}function y7(i,r){return i.x*r.x+i.y*r.y}function rB(i,r){var t=(r.source.y-r.target.y)/(r.source.x-r.target.x),e=(t*t*r.source.x+t*(i.y-r.source.y)+i.x)/(t*t+1),n=t*(e-r.source.x)+r.source.y;return{x:e,y:n}}var x7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},r.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick"),n=function(){e&&e(),t.refreshPositions()};this.set("tick",n)},r.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},u=!1;if(a.forEach(function(ie){(ie.x===null||!ie.y===null||ie.x===void 0||!ie.y===void 0)&&(u=!0),o[ie.id]=ie}),u)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",o);var f=e.get("divisions"),m=e.get("divRate"),x=e.divideEdges(f);e.set("edgePoints",x);var w=e.getEdgeBundles();e.set("edgeBundles",w);for(var L=e.get("cycles"),H=e.get("iterations"),W=e.get("iterRate"),et=e.get("lambda"),ht=0;ht<L;ht++){for(var bt=function(_e){var ze=[];n.forEach(function(rr,sr){if(rr.source!==rr.target){var qe=o[rr.source],wr=o[rr.target];ze[sr]=e.getEdgeForces({source:qe,target:wr},sr,f,et);for(var Vr=0;Vr<f+1;Vr++)x[sr][Vr].x+=ze[sr][Vr].x,x[sr][Vr].y+=ze[sr][Vr].y}})},xt=0;xt<H;xt++)bt(xt);et=et/2,f*=m,H*=W,x=e.divideEdges(f),e.set("edgePoints",x)}n.forEach(function(ie,_e){ie.source!==ie.target&&(ie.shape="polyline",ie.type="polyline",ie.controlPoints=x[_e].slice(1,x[_e].length-1))});var qt=e.get("graph");qt.refresh()}},r.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach(function(o){e.set(o,t[o])}),t.onTick){var a=this.get("graph");e.set("tick",function(){t.onTick(),a.refresh()})}e.bundling(n)},r.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,a=e.get("nodeIdMap"),o=e.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(u,f){(!o[f]||o[f]===void 0)&&(o[f]=[]);var m=a[u.source],x=a[u.target];if(t===1)o[f].push({x:m.x,y:m.y}),o[f].push({x:.5*(m.x+x.x),y:.5*(m.y+x.y)}),o[f].push({x:x.x,y:x.y});else{var w=0;!o[f]||o[f]===[]?w=pg({x:m.x,y:m.y},{x:x.x,y:x.y}):w=e.getEdgeLength(o[f]);var L=w/(t+1),H=L,W=[{x:m.x,y:m.y}];o[f].forEach(function(et,ht){if(ht!==0){for(var bt=pg(et,o[f][ht-1]);bt>H;){var xt=H/bt,qt={x:o[f][ht-1].x,y:o[f][ht-1].y};qt.x+=xt*(et.x-o[f][ht-1].x),qt.y+=xt*(et.y-o[f][ht-1].y),W.push(qt),bt-=H,H=L}H-=bt}}),W.push({x:x.x,y:x.y}),o[f]=W}}),o},r.prototype.getEdgeLength=function(t){var e=0;return t.forEach(function(n,a){a!==0&&(e+=pg(n,t[a-1]))}),e},r.prototype.getEdgeBundles=function(){var t=this,e=t.get("data"),n=e.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),u=t.get("edgeBundles");return u||(u=[]),n.forEach(function(f,m){(!u[m]||u[m]===void 0)&&(u[m]=[])}),n.forEach(function(f,m){var x=o[f.source],w=o[f.target];n.forEach(function(L,H){if(!(H<=m)){var W=o[L.source],et=o[L.target],ht=t.getBundleScore({source:x,target:w},{source:W,target:et});ht>=a&&(u[m].push(H),u[H].push(m))}})}),u},r.prototype.getBundleScore=function(t,e){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=pg({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=pg({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y});var a=n.getAngleScore(t,e),o=n.getScaleScore(t,e),u=n.getPositionScore(t,e),f=n.getVisibilityScore(t,e);return a*o*u*f},r.prototype.getAngleScore=function(t,e){var n=y7({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},r.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2,a=2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n);return a},r.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},u=pg(a,o);return n/(n+u)},r.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),a=this.getEdgeVisibility(e,t);return n<a?n:a},r.prototype.getEdgeVisibility=function(t,e){var n=rB(e.source,t),a=rB(e.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},u={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*pg(o,u)/pg(n,a))},r.prototype.getEdgeForces=function(t,e,n,a){for(var o=this,u=o.get("edgePoints"),f=o.get("K"),m=f/(pg(t.source,t.target)*(n+1)),x=[{x:0,y:0}],w=1;w<n;w++){var L={x:0,y:0},H=o.getSpringForce({pre:u[e][w-1],cur:u[e][w],next:u[e][w+1]},m),W=o.getElectrostaticForce(w,e);L.x=a*(H.x+W.x),L.y=a*(H.y+W.y),x.push(L)}return x.push({x:0,y:0}),x},r.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=e,a*=e,{x:n,y:a}},r.prototype.getElectrostaticForce=function(t,e){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),u=n.get("edgePoints"),f=o[e],m={x:0,y:0};return f.forEach(function(x){var w={x:u[x][t].x-u[e][t].x,y:u[x][t].y-u[e][t].y};if(Math.abs(w.x)>a||Math.abs(w.y)>a){var L=pg(u[x][t],u[e][t]),H=1/L;m.x+=w.x*H,m.y+=w.y*H}}),m},r.prototype.isTicking=function(){return this.get("ticking")},r.prototype.getSimulation=function(){return this.get("forceSimulation")},r.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},r}(hg),_7=x7,yA=.05,nB={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},b7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,Kl.d9)(nB),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},r.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},r.prototype.createDelegate=function(t){var e=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){e.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),u=o?{x:o.attr("x"),y:o.attr("y")}:void 0,f=u||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-yA:a=1/(1-yA);var m=e.get("maxR"),x=e.get("minR"),w=e.get("r");(w>(m||n.get("height"))&&a>1||w<(x||n.get("height")*.05)&&a<1)&&(a=1),w*=a,e.set("r",w),e.set("r2",w*w);var L=e.get("d");e.set("molecularParam",(L+1)*w),e.set("delegateCenterDiff",void 0),e.magnify(t,f)}},r.prototype.scaleRByDrag=function(t){var e=this;if(!!t){var n=e.get("dragPrePos"),a=e.get("graph"),o,u=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-yA:o=1/(1-yA);var f=e.get("maxR"),m=e.get("minR"),x=e.get("r");(x>(f||a.get("height"))&&o>1||x<(m||a.get("height")*.05)&&o<1)&&(o=1),x*=o,e.set("r",x),e.set("r2",x*x);var w=e.get("d");e.set("molecularParam",(w+1)*x),e.magnify(t,u),e.set("dragPrePos",{x:t.x,y:t.y})}},r.prototype.scaleDByWheel=function(t){var e=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=e.get("d"),o=a+n,u=e.get("maxD"),f=e.get("minD");if(o<u&&o>f){e.set("d",o);var m=e.get("r");e.set("molecularParam",(o+1)*m);var x=e.get("delegate"),w=x?{x:x.attr("x"),y:x.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,w)}}},r.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=e.get("d"),u=o+a,f=e.get("maxD"),m=e.get("minD");if(u<f&&u>m){e.set("d",u);var x=e.get("r");e.set("molecularParam",(u+1)*x),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},r.prototype.magnify=function(t,e){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),u=n.get("cachedOriginPositions"),f=n.get("showLabel"),m=n.get("r"),x=n.get("r2"),w=n.get("d"),L=n.get("molecularParam"),H=a.getNodes(),W=H.length,et=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(et=n.get("cacheCenter"));var ht=n.get("delegateCenterDiff");ht&&(et.x+=ht.x,et.y+=ht.y),n.updateDelegate(et,m);for(var bt=0;bt<W;bt++){var xt=H[bt].getModel(),qt=xt.x,ie=xt.y;if(!(isNaN(qt)||isNaN(ie))){var _e=(qt-et.x)*(qt-et.x)+(ie-et.y)*(ie-et.y);if(!isNaN(_e)&&_e<x&&_e!==0){var ze=Math.sqrt(_e),rr=L*ze/(w*ze+m),sr=(qt-et.x)/ze,qe=(ie-et.y)/ze;if(xt.x=sr*rr+et.x,xt.y=qe*rr+et.y,u[xt.id]||(u[xt.id]={x:qt,y:ie,texts:[]}),o.push(xt),f&&2*ze<m)for(var wr=H[bt],Vr=wr.getContainer(),Br=Vr.getChildren(),Tn=Br.length,Hn=0;Hn<Tn;Hn++){var Un=Br[Hn];Un.get("type")==="text"&&(u[xt.id].texts.push({visible:Un.get("visible"),shape:Un}),Un.set("visible",!0))}}}}a.refreshPositions()},r.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=e.length,o=0;o<a;o++){var u=e[o],f=u.id,m=n[f];u.x=m.x,u.y=m.y;for(var x=m.texts.length,w=0;w<x;w++){var L=m.texts[w];L.shape.set("visible",L.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.d,o=t.trigger,u=t.minD,f=t.maxD,m=t.minR,x=t.maxR,w=t.scaleDBy,L=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(a)||e.set("d",a),isNaN(f)||e.set("maxD",f),isNaN(u)||e.set("minD",u),isNaN(x)||e.set("maxR",x),isNaN(m)||e.set("minR",m);var H=e.get("d"),W=e.get("r");if(e.set("molecularParam",(H+1)*W),(o==="mousemove"||o==="click"||o==="drag")&&e.set("trigger",o),w==="drag"||w==="wheel"||w==="unset"){e.set("scaleDBy",w),e.get("delegate").remove(),e.get("delegate").destroy();var et=e.get("dPercentText");et&&(et.remove(),et.destroy())}if(L==="drag"||L==="wheel"||L==="unset"){e.set("scaleRBy",L),e.get("delegate").remove(),e.get("delegate").destroy();var et=e.get("dPercentText");et&&(et.remove(),et.destroy())}},r.prototype.updateDelegate=function(t,e){var n=this,a=this,o=a.get("graph"),u=a.get("delegate");if(!u||u.destroyed){var f=o.get("group"),m=a.get("delegateStyle")||nB;u=f.addShape("circle",{attrs:(0,Ft.__assign)({r:e/1.5,x:t.x,y:t.y},m),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?u.on("mousewheel",function(W){a.scaleRByWheel(W)}):this.get("scaleRBy")==="drag"&&(u.on("dragstart",function(W){a.set("dragging",!0),a.set("cacheCenter",{x:W.x,y:W.y}),a.set("dragPrePos",{x:W.x,y:W.y})}),u.on("drag",function(W){a.scaleRByDrag(W)}),u.on("dragend",function(W){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?u.on("mousewheel",function(W){n.scaleDByWheel(W)}):this.get("scaleDBy")==="drag"&&(u.on("dragstart",function(W){a.set("dragging",!0),a.set("cacheCenter",{x:W.x,y:W.y}),a.set("dragPrePos",{x:W.x,y:W.y})}),u.on("drag",function(W){n.scaleDByDrag(W)}),u.on("dragend",function(W){a.set("dragging",!1)})))}else u.attr({x:t.x,y:t.y,r:e/1.5});if(a.get("showDPercent")){var x=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),w=a.get("dPercentText"),L=t.y+e/1.5+16;if(!w||w.destroyed){var H=o.get("group");w=H.addShape("text",{attrs:{text:x+"%",x:t.x,y:L,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",w)}else w.attr({text:x+"%",x:t.x,y:L})}a.set("delegate",u)},r.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(hg),S7=b7;Q5()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var w7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `}}},r.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent"),a=n(e),o=a;(0,Kl.HD)(a)&&(o=(0,Bc.Z)(a));var u=this.get("className");o.setAttribute("class",u||"g6-component-toolbar");var f=this.get("container");f||(f=this.get("graph").get("container")),f.appendChild(o),this.set("toolBar",o);var m=this.get("handleClick");o.addEventListener("click",function(w){var L=w.path.filter(function(W){return W.nodeName==="LI"});if(L.length!==0){var H=L[0].getAttribute("code");!H||(m?m(H,e):t.handleDefaultOperator(H,e))}});var x=this.get("position");x&&(0,nl.Z)(o,{top:x.y+"px",left:x.x+"px"}),this.bindUndoRedo()},r.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!e||!n||!a||!o||t.on("stackchange",function(u){var f=u.undoStack,m=u.redoStack,x=f.length,w=m.length;x===1?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),w===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},r.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action;t.pushStack(a,(0,Kl.d9)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){var x=t.findById(m.id);m.visible?t.showItem(x,!1):t.hideItem(x,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){t.updateItem(m.id,m,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){var x=m.itemType;delete m.itemType,t.addItem(x,m,!1)})});break}case"add":Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){t.removeItem(m.id,!1)})});break;default:}}}},r.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,Kl.d9)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){var x=t.findById(m.id);m.visible?t.showItem(x,!1):t.hideItem(x,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){t.updateItem(m.id,m,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(u){t.removeItem(u.id,!1)}),o.nodes&&o.nodes.forEach(function(u){t.removeItem(u.id,!1)}),o.combos&&o.combos.forEach(function(u){t.removeItem(u.id,!1)});break;case"add":{Object.keys(o).forEach(function(u){var f=o[u];!f||f.forEach(function(m){var x=m.itemType;delete m.itemType,t.addItem(x,m,!1)})});break}default:}}}},r.prototype.handleDefaultOperator=function(t,e){var n=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1+.05*5;if(a*n>5)return;e.zoomTo(n*1.1);break}case"zoomIn":{var o=1-.05*5;if(o*n<.3)return;e.zoomTo(n*.9);break}case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20]);break;default:}},r.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},r}(hg),E7=w7;Q5()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var C7=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},r.prototype.init=function(){var t=this.get("className")||"g6-component-tooltip",e=(0,Bc.Z)("<div class="+t+"></div>"),n=this.get("container");n||(n=this.get("graph").get("container")),(0,nl.Z)(e,{position:"absolute",visibility:"hidden"}),n.appendChild(e),this.set("tooltip",e)},r.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!(t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},r.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},r.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},r.prototype.showTooltip=function(t){if(!!t.item){var e=this.get("itemTypes");if(!(t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,Zo.default)(o)?n.innerHTML=o:n.innerHTML=o.outerHTML,this.updatePosition(t)}}},r.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&(0,nl.Z)(t,{visibility:"hidden"})},r.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(!e(t)){(0,nl.Z)(n,{visibility:"hidden"});return}var a=this.get("graph"),o=a.get("width"),u=a.get("height"),f=this.get("offsetX")||0,m=this.get("offsetY")||0,x=a.getPointByClient(t.clientX,t.clientY),w=a.getCanvasByPoint(x.x,x.y),L=w.x,H=w.y;L+=f,H+=m;var W=n.getBoundingClientRect();L+W.width>o&&(L=L-W.width-f),H+W.height>u&&(H=H-W.height-m),(0,nl.Z)(n,{left:L+"px",top:H+"px",visibility:"visible"})},r.prototype.hide=function(){this.onMouseLeave()},r.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(hg),A7=C7,iB=S(89539);function M7(i){return(0,d.map)(i,function(r,t){var e=t===0?"M":"L",n=r[0],a=r[1];return[e,n,a]})}function aB(i){return M7(i)}function T7(i){if(i.length<=2)return aB(i);var r=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,r.slice(r.length-2))||r.push(o[0],o[1])});var t=ql.catmullRom2Bezier(r,!1),e=(0,d.head)(i),n=e[0],a=e[1];return t.unshift(["M",n,a]),t}function P7(i,r,t,e){e===void 0&&(e=!0);var n=new jn.Linear({values:i}),a=new jn.Category({values:(0,d.map)(i,function(u,f){return f})}),o=(0,d.map)(i,function(u,f){return[a.scale(f)*r,t-n.scale(u)*t]});return e?T7(o):aB(o)}function I7(i,r,t){for(var e=new jn.Linear({values:i}),n=new jn.Category({values:(0,d.map)(i,function(w,L){return L})}),a=(0,d.map)(i,function(w,L){return[n.scale(L)*r,t-e.scale(w)*t]}),o=[],u=0;u<a.length;u++){var f=a[u],m={x:f[0],y:f[1],y0:t,size:5},x=k7(m);o.push.apply(o,x)}return R7(o)}function O7(i,r){var t=new jn.Linear({values:i}),e=Math.max(0,t.min);return r-t.scale(e)*r}function L7(i,r,t,e){var n=(0,Ft.__spreadArrays)(i),a=O7(e,t);return n.push(["L",r,a]),n.push(["L",0,a]),n.push(["Z"]),n}function k7(i){var r=i.x,t=i.y,e=i.y0,n=i.size,a,o;(0,iB.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var u,f;(0,iB.isArray)(r)?(u=r[0],f=r[1]):(u=r-n/2,f=r+n/2);var m=[{x:u,y:a},{x:u,y:o}];return m.push({x:f,y:o},{x:f,y:a}),m}function R7(i,r){r===void 0&&(r=!0);var t=[],e=i[0];t.push(["M",e.x,e.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}var Uz={opacity:.5},D7={stroke:"#C5C5C5",strokeOpacity:.85},B7={fill:"#CACED4",opacity:.85},F7=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.width,u=o===void 0?200:o,f=r.height,m=f===void 0?26:f,x=r.smooth,w=x===void 0?!0:x,L=r.isArea,H=L===void 0?!1:L,W=r.data,et=W===void 0?[]:W,ht=r.lineStyle,bt=r.areaStyle,xt=r.group,qt=r.interval,ie=qt===void 0?null:qt;this.group=xt,this.x=e,this.y=a,this.width=u,this.height=m,this.data=et,this.smooth=w,this.isArea=H,this.lineStyle=Object.assign({},D7,ht),this.areaStyle=Object.assign({},B7,bt),this.intervalConfig=ie,this.renderLine()}return i.prototype.renderLine=function(){var r=this,t=r.x,e=r.y,n=r.width,a=r.height,o=r.data,u=r.smooth,f=r.isArea,m=r.backgroundStyle,x=r.lineStyle,w=r.areaStyle,L=this.group.addGroup({name:"trend-group"});if(o){var H=P7(o,n,a,u);if(L.addShape("path",{attrs:(0,Ft.__assign)({path:H},x)}),f){var W=L7(H,n,a,o);L.addShape("path",{attrs:(0,Ft.__assign)({path:W},w)})}}this.intervalConfig&&L.addShape("path",{attrs:(0,Ft.__assign)({path:I7(this.intervalConfig.data,n,a)},this.intervalConfig.style)}),L.move(t,e)},i.prototype.destory=function(){this.group.destroy()},i}(),N7=F7,z7={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},G7={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},U7=function(){function i(r){var t=r.group,e=r.name,n=r.type,a=r.x,o=a===void 0?0:a,u=r.y,f=u===void 0?0:u,m=r.width,x=m===void 0?2:m,w=r.height,L=w===void 0?24:w,H=r.style,W=H===void 0?{}:H;this.group=t,this.name=e,this.handleType=n,this.x=o,this.y=f,this.width=x,this.height=L,n==="trend"?this.style=(0,Ft.__assign)((0,Ft.__assign)({},z7),W):n==="simple"&&(this.style=(0,Ft.__assign)((0,Ft.__assign)({},G7),W)),this.renderHandle()}return i.prototype.setX=function(r){this.setXY(r,void 0)},i.prototype.setY=function(r){this.setXY(void 0,r)},i.prototype.setXY=function(r,t){(0,d.isNumber)(r)&&(this.x=r),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var r=this,t=r.width,e=r.height,n=r.style,a=r.name,o=n.fill,u=n.stroke,f=n.radius,m=n.opacity,x=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:u,radius:f,opacity:m,cursor:x},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:u,radius:f,opacity:m,cursor:x},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:u,radius:f,opacity:m,cursor:x},name:a+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:u,radius:f,opacity:m,cursor:x},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:u,radius:f,opacity:m,cursor:x},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var e=r.style.highLightFill;r.background.attr("fill",e)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var e=r.style.fill;r.background.attr("fill",e)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),oB=U7,V7=function(){function i(r){this.config=(0,d.deepMix)({},r),this.init()}return i.prototype.update=function(r){this.config=(0,d.deepMix)({},this.config,r),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var r=this.config,t=r.group,e=r.style;this.circle=t.addShape("circle",{attrs:(0,Ft.__assign)({x:this.config.x,y:this.config.y,r:this.config.r},e)}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=t.addGroup();var n=1/4*this.config.r,a=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n*2.5,height:a,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"})},i.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var r=1/4*this.config.r,t=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-t/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",t),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-t/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",t)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},i.prototype.getStartMarkerPath=function(){var r=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-r/Math.sqrt(3)/2,this.config.y-r/2],["L",this.config.x+r/Math.sqrt(3),this.config.y],["L",this.config.x-r/Math.sqrt(3)/2,this.config.y+r/2]]},i}(),Z7=V7,H7="#ccc",j7="green",X7={fill:"#607889",stroke:"#607889"},Y7={fill:"#fff"},W7={fill:"green"},K7={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},K_=110,dg=50,$7=function(){function i(r){this.controllerCfg=(0,d.deepMix)({},K7,r),this.group=r.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r+e,t],["L",r,t+e]]},i.prototype.getPreMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r-e,t],["L",r,t+e]]},i.prototype.renderPlayButton=function(){var r=this.controllerCfg,t=r.width,e=r.height,n=r.x,a=r.y,o=r.hiddleToggle,u=r.fill,f=u===void 0?H7:u,m=r.stroke,x=m===void 0?j7:m,w=r.playBtnStyle,L=w===void 0?X7:w,H=r.preBtnStyle,W=H===void 0?Y7:H,et=r.nextBtnStyle,ht=et===void 0?W7:et,bt=e/2-5,xt=a+10,qt=this.group.addShape("rect",{attrs:{x:n,y:xt,width:t,height:e,stroke:x,fill:f},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:xt,r:bt}):this.playButton=new Z7({group:this.group,x:t/2,y:xt+bt+5,r:bt,isPlay:this.isPlay,style:L}),this.group.addShape("path",{attrs:(0,Ft.__assign)({path:this.getPreMarkerPath(t/2-5*bt,xt+bt+5,bt*.5)},W),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,Ft.__assign)({path:this.getPreMarkerPath(t/2-4.5*bt,xt+bt+5,bt*.5)},W),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,Ft.__assign)({path:this.getNextMarkerPath(t/2+5*bt,xt+bt+5,bt*.5)},ht),name:"nextStepBtn"}),this.group.addShape("path",{attrs:(0,Ft.__assign)({path:this.getNextMarkerPath(t/2+4.5*bt,xt+bt+5,bt*.5)},ht),name:"nextStepBtn"}),qt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent()},i.prototype.renderSpeedBtn=function(){var r=this.controllerCfg,t=r.y,e=r.width,n=r.hiddleToggle,a=this.group.addGroup({name:"speed-group"});this.speedGroup=a;for(var o=1,u=[],f=9,m=0;m<5;m++){var x=t+15+m*(m+1)+o;a.addShape("rect",{attrs:{x:e-(n?dg:K_),y:x,width:15,height:2,fill:"#ccc"},speed:f,name:"speed-rect"}),this.speedAxisY.push(x),u.push(f),f=f-2,o++}for(var m=0;m<4;m++)a.addShape("rect",{attrs:{x:e-(n?dg:K_),y:this.speedAxisY[m]+2,width:15,height:2*m+1,fill:"#fff",opacity:.3},speed:u[m]-1,name:"speed-rect"});this.speedText=a.addShape("text",{attrs:{x:e-(n?dg:K_)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc"}}),this.speedPoint=a.addShape("path",{attrs:{path:this.getPath(e-(n?dg:K_),this.speedAxisY[4]),fill:"#ccc"}})},i.prototype.getPath=function(r,t){return[["M",r,t],["L",r-12,t-6],["L",r-12,t+6],["Z"]]},i.prototype.renderToggleTime=function(){var r=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:r-dg,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",r-dg+3,this.speedAxisY[1]+6],["L",r-dg+7,this.speedAxisY[1]+10],["L",r-dg+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:"\u5355\u4E00\u65F6\u95F4",x:r-dg+20,y:this.speedAxisY[1]+15,fill:"#ccc"}})},i.prototype.bindEvent=function(){var r=this,t=this.controllerCfg,e=t.width,n=t.hiddleToggle;this.speedGroup.on("speed-rect:click",function(a){r.speedPoint.attr("path",r.getPath(e-(n?dg:K_),a.y)),r.currentSpeed=a.target.get("speed"),r.speedText.attr("text",r.currentSpeed+".0X"),r.group.emit("timebarConfigChanged",{speed:r.currentSpeed,type:r.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(a){var o=a.target.get("isChecked");o?(r.checkedIcon.hide(),r.checkedText.attr("text","\u5355\u4E00\u65F6\u95F4"),r.currentType="range"):(r.checkedIcon.show(),r.checkedText.attr("text","\u65F6\u95F4\u8303\u56F4"),r.currentType="single"),a.target.set("isChecked",!o),r.group.emit("timebarConfigChanged",{type:r.currentType,speed:r.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),sB=$7,uB="timelinestart",lB="timelineend",vg="valueChange",xA="timebarConfigChanged",_A="playPauseBtn",bA="nextStepBtn",SA="preStepBtn",Q7={fill:"#416180",opacity:.05},q7={fill:"#416180",opacity:.15,radius:5},J7={fill:"#5B8FF9",opacity:.3,cursor:"move"},q5=2,t9={width:q5,height:24},e9={textBaseline:"middle",fill:"#000",opacity:.45},r9=function(){function i(r){var t=this;this.prevX=0,this.onMouseDown=function(bi){return function(Ba){t.currentHandler=bi;var La=Ba.originalEvent;La.stopPropagation(),La.preventDefault(),t.prevX=(0,d.get)(La,"touches.0.pageX",La.pageX);var Ha=t.canvas.get("container");Ha.addEventListener("mousemove",t.onMouseMove),Ha.addEventListener("mouseup",t.onMouseUp),Ha.addEventListener("mouseleave",t.onMouseUp),Ha.addEventListener("touchmove",t.onMouseMove),Ha.addEventListener("touchend",t.onMouseUp),Ha.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(bi){bi.stopPropagation(),bi.preventDefault();var Ba=(0,d.get)(bi,"touches.0.pageX",bi.pageX),La=Ba-t.prevX,Ha=t.adjustOffsetRange(La/t.width);t.updateStartEnd(Ha),t.updateUI(),t.prevX=Ba},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var bi=t.canvas.get("container");bi&&(bi.removeEventListener("mousemove",t.onMouseMove),bi.removeEventListener("mouseup",t.onMouseUp),bi.removeEventListener("mouseleave",t.onMouseUp),bi.removeEventListener("touchmove",t.onMouseMove),bi.removeEventListener("touchend",t.onMouseUp),bi.removeEventListener("touchcancel",t.onMouseUp))};var e=r.x,n=e===void 0?0:e,a=r.y,o=a===void 0?0:a,u=r.width,f=u===void 0?100:u,m=r.height,x=r.padding,w=x===void 0?10:x,L=r.trendCfg,H=r.controllerCfg,W=H===void 0?{speed:1}:H,et=r.backgroundStyle,ht=et===void 0?{}:et,bt=r.foregroundStyle,xt=bt===void 0?{}:bt,qt=r.handlerStyle,ie=qt===void 0?{}:qt,_e=r.textStyle,ze=_e===void 0?{}:_e,rr=r.start,sr=rr===void 0?0:rr,qe=r.end,wr=qe===void 0?1:qe,Vr=r.minText,Br=Vr===void 0?"":Vr,Tn=r.maxText,Hn=Tn===void 0?"":Tn,Un=r.group,Ei=r.graph,Ti=r.canvas,Li=r.ticks,_i=r.type;this.graph=Ei,this.canvas=Ti,this.group=Un,this.timeBarType=_i,this.x=n,this.y=o,this.width=f,this.height=m,this.padding=w,this.ticks=Li,this.trendCfg=L,this.controllerCfg=W,this.currentSpeed=W.speed,_i==="trend"?this.backgroundStyle=(0,Ft.__assign)((0,Ft.__assign)({},Q7),ht):_i==="simple"&&(this.backgroundStyle=(0,Ft.__assign)((0,Ft.__assign)({},q7),ht)),this.foregroundStyle=(0,Ft.__assign)((0,Ft.__assign)({},J7),xt),this.handlerStyle=(0,Ft.__assign)((0,Ft.__assign)({},t9),ie),this.textStyle=(0,Ft.__assign)((0,Ft.__assign)({},e9),ze),this.currentMode="range",this.start=sr,this.end=wr,this.minText=Br,this.maxText=Hn,this.renderSlider()}return i.prototype.update=function(r){var t=r.x,e=r.y,n=r.width,a=r.height,o=r.minText,u=r.maxText,f=r.start,m=r.end;this.start=Math.min(1,Math.max(f,0)),this.end=Math.min(1,Math.max(m,0)),(0,d.assign)(this,{x:t,y:e,width:n,height:a,minText:o,maxText:u}),this.updateUI()},i.prototype.setText=function(r,t){this.minTextShape.attr("text",r),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var r=this,t=this,e=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new N7((0,Ft.__assign)((0,Ft.__assign)({x:this.x,y:this.y,width:e,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var u=this.group.addGroup({name:"slider-group"});u.addShape("rect",{attrs:(0,Ft.__assign)({x:0,y:0,width:e,height:n},this.backgroundStyle)});var f=this.group.addGroup();a==="trend"?(this.minTextShape=f.addShape("text",{attrs:(0,Ft.__assign)({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=f.addShape("text",{attrs:(0,Ft.__assign)({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1},this.textStyle),capture:!1})):(this.minTextShape=f.addShape("text",{attrs:(0,Ft.__assign)({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=f.addShape("text",{attrs:(0,Ft.__assign)({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:(0,Ft.__assign)({x:0,y:this.y,height:n},this.foregroundStyle)});var m=(0,d.get)(this.handlerStyle,"width",2),x=(0,d.get)(this.handlerStyle,"height",24),w=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new oB((0,Ft.__assign)({name:"minHandlerShape",group:w,type:a,x:this.x,y:this.y,width:m,height:x,cursor:"ew-resize"},this.handlerStyle));var L=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new oB((0,Ft.__assign)({name:"maxHandlerShape",group:L,type:a,x:this.x,y:this.y,width:m,height:x,cursor:"ew-resize"},this.handlerStyle));var H=this.ticks,W=e/(H.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ht){ht.destroy()});var et=-Infinity;this.textList=H.map(function(ht,bt){r.tickPosList.push(r.x+bt*W);var xt=r.group.addShape("text",{attrs:{x:r.x+bt*W,y:r.y+n+5,text:ht,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),qt=r.group.addShape("line",{attrs:{x1:r.x+bt*W,y1:r.y+n+2,x2:r.x+bt*W,y2:r.y+n+6,lineWidth:1,stroke:"#ccc"}}),ie=xt.getBBox();return ie.minX>et?(xt.show(),qt.show(),et=ie.minX+ie.width+10):(xt.hide(),qt.hide()),xt}),this.controllerBtnGroup=new sB({group:this.group,x:this.x,y:this.y+n+25,width:e,height:40}),this.updateUI(),u.move(this.x,this.y),this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var e=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(_A+":click",function(){r.isPlay=!r.isPlay,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()}),this.group.on(bA+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(.01),r.updateUI()}),this.group.on(SA+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(-.01),r.updateUI()}),this.group.on(xA,function(n){var a=n.type,o=n.speed;r.currentSpeed=o,r.currentMode=a,a==="single"?(r.minHandlerShape.hide(),r.foregroundShape.hide(),r.minTextShape.hide()):a==="range"&&(r.minHandlerShape.show(),r.foregroundShape.show(),r.minTextShape.show())})},i.prototype.adjustTickIndex=function(r){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=r&&r<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-r)<Math.abs(r-this.tickPosList[t+1])?t:t+1},i.prototype.adjustOffsetRange=function(r){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,e=1-this.start;return Math.min(e,Math.max(t,r))}case this.maxHandlerShape:{var t=0-this.end,e=1-this.end;return Math.min(e,Math.max(t,r))}case this.foregroundShape:{var t=0-this.start,e=1-this.end;return Math.min(e,Math.max(t,r))}default:return 0}},i.prototype.updateStartEnd=function(r){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=r,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=r,this.end+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;default:break}},i.prototype.updateUI=function(){var r=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.start*this.width,e=this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",e-t);var n=(0,d.get)(this.handlerStyle,"width",q5);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,e]),o=a[0],u=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(f,m){return r.minTextShape.attr(m,f)}),this.maxHandlerShape.setX(e-n/2),(0,d.each)(u,function(f,m){return r.maxTextShape.attr(m,f)}),this.currentMode==="range"?this.graph.emit(vg,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(vg,{value:[this.end,this.end]})},i.prototype.dodgeText=function(r){var t,e,n=2,a=(0,d.get)(this.handlerStyle,"width",q5),o=this.minTextShape,u=this.maxTextShape,f=r[0],m=r[1],x=!1;f>m&&(t=[m,f],f=t[0],m=t[1],e=[u,o],o=e[0],u=e[1],x=!0);var w=o.getBBox(),L=u.getBBox(),H=null,W=null;return this.timeBarType==="trend"?(H=w.width>f-n?{x:f+a/2+n,textAlign:"left"}:{x:f-a/2-n,textAlign:"right"},W=L.width>this.width-m-n?{x:m-a/2-n,textAlign:"right"}:{x:m+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(H=w.width>f-n?{x:f+a/2+n,textAlign:"center"}:{x:f-a/2-n,textAlign:"center"},W=L.width>this.width-m-n?{x:m-a/2-n,textAlign:"center"}:{x:m+a/2+n,textAlign:"center"}),x?[W,H]:[H,W]},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r,e=t.ticks,n=t.width,a=r.currentSpeed,o=n/e.length,u=o/((10-a)*1e3/60),f=r.adjustOffsetRange(u/r.width);r.updateStartEnd(f),r.updateUI(),r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(uB,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(lB,null))},i.prototype.destory=function(){this.graph.off(vg);var r=this.group,t=r.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var e=r.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),r.off(_A+":click"),r.off(bA+":click"),r.off(SA+":click"),r.off(xA),r.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),n9=r9,Vz={opacity:.5,fill:"#000"},Zz={opacity:.5,fill:"#000",r:5},Hz={fill:"#fff",fontSize:12},i9=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.container,u=r.text,f=r.padding,m=f===void 0?[4,4,4,4]:f,x=r.className,w=x===void 0?"g6-component-timebar-tooltip":x,L=r.backgroundColor,H=L===void 0?"#000":L,W=r.textColor,et=W===void 0?"#fff":W,ht=r.opacity,bt=ht===void 0?.8:ht,xt=r.fontSize,qt=xt===void 0?12:xt;this.container=o,this.className=w,this.backgroundColor=H,this.textColor=et,this.x=e,this.y=a,this.text=u,this.padding=m,this.opacity=bt,this.fontSize=qt,this.render()}return i.prototype.render=function(){var r=this,t=r.className,e=r.x,n=r.y,a=r.backgroundColor,o=r.textColor,u=r.text,f=r.padding,m=r.opacity,x=r.fontSize,w=r.container,L=(0,Bc.Z)("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+m+'"></div>');(0,d.isString)(w)&&(w=document.getElementById(w)),w.appendChild(L),r.parentHeight=w.offsetHeight,r.parentWidth=w.offsetWidth,(0,nl.Z)(L,{visibility:"hidden",top:0,left:0});var H=(0,Bc.Z)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+a+"; font-size: "+x+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+o+"; padding: "+f[0]+"px "+f[1]+"px "+f[2]+"px "+f[3]+"px'></div>");H.innerHTML=u,L.appendChild(H),r.backgroundDOM=H;var W=(0,Bc.Z)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+a+"'></div>");L.appendChild(W),r.arrowDOM=W,r.container=L},i.prototype.show=function(r){var t=this,e=r.text,n=r.x,a=r.y,o=r.clientX,u=r.clientY;t.backgroundDOM.innerHTML=e;var f=t.backgroundDOM.offsetWidth,m=t.backgroundDOM.offsetHeight,x=t.arrowDOM.offsetWidth,w=t.arrowDOM.offsetHeight;(0,nl.Z)(t.container,{top:-m-w+"px",left:n+"px",visibility:"visible"}),(0,nl.Z)(t.backgroundDOM,{marginLeft:-f/2+"px"}),(0,nl.Z)(t.arrowDOM,{marginLeft:-x/2+"px",top:m+"px"});var L=n-f/2,H=n+f/2;L<0?(0,nl.Z)(t.backgroundDOM,{marginLeft:-f/2-L+"px"}):H>t.parentWidth&&(0,nl.Z)(t.backgroundDOM,{marginLeft:-f/2-H+t.parentWidth+12+"px"})},i.prototype.hide=function(){(0,nl.Z)(this.container,{top:0,left:0,visibility:"hidden"})},i}(),a9=i9,o9={fill:"#5B8FF9"},s9={fill:"#e6e8e9"},u9=function(){function i(r){this.frameCount=0;var t=r.graph,e=r.canvas,n=r.group,a=r.width,o=r.height,u=r.padding,f=r.data,m=r.start,x=r.end,w=r.x,L=w===void 0?0:w,H=r.y,W=H===void 0?0:H,et=r.tickLabelFormatter,ht=r.selectedTickStyle,bt=ht===void 0?o9:ht,xt=r.unselectedTickStyle,qt=xt===void 0?s9:xt,ie=r.tooltipBackgroundColor,_e=r.tooltipFomatter;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=e,this.width=a,this.height=o,this.padding=u,this.data=f,this.start=m,this.end=x,this.tickLabelFormatter=et,this.selectedTickStyle=bt,this.unselectedTickStyle=qt,this.x=L,this.y=W,this.tooltipBackgroundColor=ie,this.tooltipFomatter=_e,this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var r=this,t=r.width,e=r.height,n=r.padding,a=r.data,o=r.start,u=r.end,f=r.tickLabelFormatter,m=r.selectedTickStyle,x=r.unselectedTickStyle,w=t-2*n,L=10,H=4,W=3*n+H+L,et=e-W-2*n,ht=2,bt=a.length,xt=(w-ht*(bt-1))/bt;this.tickWidth=xt;var qt=this.sliceGroup,ie=[],_e=[],ze=Math.round(bt*o),rr=Math.round(bt*u);this.startTickRectId=ze,this.endTickRectId=rr,a.forEach(function(qe,wr){var Vr=wr>=ze&&wr<=rr,Br=Vr?m:x,Tn=qt.addShape("rect",{attrs:(0,Ft.__assign)({x:n+wr*(xt+ht),y:n,width:xt,height:et},Br),draggable:!0,name:"tick-rect-"+wr}),Hn=qt.addShape("rect",{attrs:{x:n+wr*xt+ht*(2*wr-1)/2,y:n,width:wr===0||wr===bt-1?xt+ht/2:xt+ht,height:et,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+wr});Hn.toFront();var Un=Tn.getBBox(),Ei=(Un.minX+Un.maxX)/2;ie.push({rect:Tn,pickRect:Hn,value:qe.date,x:Ei,y:Un.minY});var Ti;if(f?(Ti=f(qe),!(0,d.isString)(Ti)&&Ti&&(Ti=qe.date)):wr%Math.round(bt/10)==0&&(Ti=qe.date),Ti){_e.push(Ti);var Li=Un.maxY+n*2;qt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Ei,y1:Li,x2:Ei,y2:Li+H}});var _i=Li+H+n,bi=qt.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Ei,y:_i,textAlign:"center",text:Ti,textBaseline:"top",fontSize:10},capture:!1}),Ba=bi.getBBox();Ba.maxX>t?bi.attr("textAlign","right"):Ba.minX<0&&bi.attr("textAlign","left")}}),this.tickRects=ie;var sr=this.group;this.currentSpeed=1,this.controllerBtnGroup=new sB({group:sr,x:this.x,y:this.y+e+5,width:t,height:40,hiddleToggle:!0,speed:this.currentSpeed})},i.prototype.initEvent=function(){var r=this,t=this.sliceGroup;t.on("click",function(x){var w=x.target;if(!(w.get("type")!=="rect"||!w.get("name"))){var L=parseInt(w.get("name").split("-")[2],10);if(!isNaN(L)){var H=r.tickRects,W=r.unselectedTickStyle;H.forEach(function(xt){xt.rect.attr(W)});var et=r.selectedTickStyle;H[L].rect.attr(et),r.startTickRectId=L,r.endTickRectId=L;var ht=H.length,bt=L/ht;r.graph.emit(vg,{value:[bt,bt]})}}}),t.on("dragstart",function(x){var w=r.tickRects,L=r.unselectedTickStyle;w.forEach(function(xt){xt.rect.attr(L)});var H=x.target,W=parseInt(H.get("name").split("-")[2],10),et=r.selectedTickStyle;w[W].rect.attr(et),r.startTickRectId=W;var ht=w.length,bt=W/ht;r.graph.emit(vg,{value:[bt,bt]}),r.dragging=!0}),t.on("dragover",function(x){if(!!r.dragging&&x.target.get("type")==="rect"){for(var w=parseInt(x.target.get("name").split("-")[2],10),L=r.startTickRectId,H=r.tickRects,W=r.selectedTickStyle,et=r.unselectedTickStyle,ht=0;ht<H.length;ht++){var bt=ht>=L&&ht<=w?W:et;H[ht].rect.attr(bt)}var xt=H.length;r.endTickRectId=w;var qt=L/xt,ie=w/xt;r.graph.emit(vg,{value:[qt,ie]})}}),t.on("drop",function(x){if(!!r.dragging&&(r.dragging=!1,x.target.get("type")==="rect")){var w=r.startTickRectId,L=parseInt(x.target.get("name").split("-")[2],10);if(!(L<w)){var H=r.selectedTickStyle,W=r.tickRects;W[L].rect.attr(H),r.endTickRectId=L;var et=W.length,ht=w/et,bt=L/et;r.graph.emit(vg,{value:[ht,bt]})}}});var e=this,n=e.tooltipBackgroundColor,a=e.tooltipFomatter,o=e.canvas,u=new a9({container:o.get("container"),backgroundColor:n}),f=this.tickRects;f.forEach(function(x){var w=x.pickRect;w.on("mouseenter",function(L){var H=L.target;if(H.get("type")==="rect"){var W=parseInt(H.get("name").split("-")[2],10),et=o.getClientByPoint(f[W].x,f[W].y);u.show({x:f[W].x,y:f[W].y,clientX:et.x,clientY:et.y,text:a?a(f[W].value):f[W].value})}}),w.on("mouseleave",function(L){u.hide()})});var m=this.group;m.on(_A+":click",function(){r.isPlay=!r.isPlay,r.changePlayStatus()}),m.on(bA+":click",function(){r.updateStartEnd(1)}),m.on(SA+":click",function(){r.updateStartEnd(-1)}),m.on(xA,function(x){var w=x.type,L=x.speed;r.currentSpeed=L})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(uB,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(lB,null))},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r.currentSpeed;r.frameCount%(60/t)==0&&(r.frameCount=0,r.updateStartEnd(1)),r.frameCount++,r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.updateStartEnd=function(r){var t=this,e=this.tickRects,n=e.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,u=t.endTickRectId;if(r>0?t.endTickRectId++:(e[t.endTickRectId].rect.attr(a),t.endTickRectId--),u!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var f=t.startTickRectId;f<=t.endTickRectId-1;f++)e[f].rect.attr(a);t.startTickRectId=t.endTickRectId}if(e[t.endTickRectId]){e[t.endTickRectId].rect.attr(o);var m=t.startTickRectId/n,x=t.endTickRectId/n;this.graph.emit(vg,{value:[m,x]})}},i.prototype.destory=function(){this.graph.off(vg);var r=this.sliceGroup;r.off("click"),r.off("dragstart"),r.off("dragover"),r.off("drop"),this.tickRects.forEach(function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,r.off(_A+":click"),r.off(bA+":click"),r.off(SA+":click"),r.off(xA),this.sliceGroup.destroy()},i}(),l9=u9,c9=8,f9=26,h9=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]}}},r.prototype.initContainer=function(){var t=this.get("graph"),e=this._cfgs,n=e.width,a=e.height,o=this.get("className")||"g6-component-timebar",u=this.get("container"),f=this.get("graph").get("container"),m;u?m=u:(m=(0,Bc.Z)("<div class='"+o+"'></div>"),(0,nl.Z)(m,{position:"relative"})),f.appendChild(m),this.set("timeBarContainer",m);var x,w=t.get("renderer");w==="SVG"?x=new H_.Z({container:m,width:n,height:a}):x=new cy.Z({container:m,width:n,height:a}),this.set("canvas",x)},r.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent()},r.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,n=t.x,a=t.y,o=t.padding,u=t.type,f=t.trend,m=t.slider,x=t.controllerCfg,w=f.data,L=(0,Ft.__rest)(f,["data"]),H=e-2*o,W=u==="trend"?f9:c9,et=this.get("graph"),ht=this.get("timeBarGroup"),bt=this.get("canvas"),xt=null;if(u==="trend"||u==="simple")xt=new n9((0,Ft.__assign)((0,Ft.__assign)({graph:et,canvas:bt,group:ht,type:u,x:n+o,y:u==="trend"?a+o:a+o+15,width:H,height:W,padding:o,trendCfg:(0,Ft.__assign)((0,Ft.__assign)({},L),{data:w.map(function(ie){return ie.value})})},m),{ticks:w.map(function(ie){return ie.date}),handlerStyle:(0,Ft.__assign)((0,Ft.__assign)({},m.handlerStyle),{height:m.height||W}),controllerCfg:x}));else if(u==="tick"){var qt=this._cfgs.tick;xt=new l9((0,Ft.__assign)({graph:et,canvas:bt,group:ht,x:n+o,y:a+o},qt))}this.set("timebar",xt)},r.prototype.filterData=function(t){var e=t.value,n=null,a=this._cfgs.type;if(a==="trend"||a==="simple"?n=this._cfgs.trend.data:a==="tick"&&(n=this._cfgs.tick.data),!n||n.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var o=this.get("rangeChange"),u=this.get("graph"),f=Math.round(n.length*e[0]),m=Math.round(n.length*e[1]);m=m>=n.length?n.length-1:m;var x=n[f].date,w=n[m].date;if(a!=="tick"){var L=this.get("timebar");L.setText(x,w)}if(o)o(u,x,w);else{var H=u.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=H);var W=this.cacheGraphData.nodes.filter(function(bt){return bt.date>=x&&bt.date<=w}),et=W.map(function(bt){return bt.id}),ht=this.cacheGraphData.edges.filter(function(bt){return et.includes(bt.source)&&et.includes(bt.target)});u.changeData({nodes:W,edges:ht})}},r.prototype.initEvent=function(){var t=this,e=0,n=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(e=this._cfgs.slider.start,n=this._cfgs.slider.end):a==="tick"&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(){t.filterData({value:[e,n]})}),o.on(vg,function(u){t.filterData(u)})},r.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),i.prototype.destroy.call(this);var e=this.get("timeBarContainer");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),n.removeChild(e)}},r}(hg),p9=h9;function d9(i,r){var t,e;if(i.naturalWidth)t=i.naturalWidth,e=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){r==null||r(n.width,n.height)}}return[t,e]}var v9=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var a=this.get("container"),o=(0,Bc.Z)("<div class="+e.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),u=0,f=0,m=!1,x=0,w=0,L=0,H=0,W=0,et=0;a.addEventListener("mousedown",function(ht){if(e.refresh=!1,ht.target===o){var bt=o.style;L=parseInt(bt.width,10),H=parseInt(bt.height,10);var xt=t.get("width"),qt=t.get("height");L>xt||H>qt||(et=n.getZoom(),W=t.get("ratio"),m=!0,u=ht.clientX,f=ht.clientY)}},!1),a.addEventListener("mousemove",function(ht){if(!(!m||(0,qu.default)(ht.clientX)||(0,qu.default)(ht.clientY))){var bt=t.get("width"),xt=t.get("height"),qt=o.style;x=parseInt(qt.left,10),w=parseInt(qt.top,10),L=parseInt(qt.width,10),H=parseInt(qt.height,10);var ie=u-ht.clientX,_e=f-ht.clientY;x-ie<0?ie=x:x-ie+L>=bt&&(ie=0),w-_e<0?_e=w:w-_e+H>=xt&&(_e=0),x-=ie,w-=_e,(0,nl.Z)(o,{left:x+"px",top:w+"px"}),n.translate(ie*et/W,_e*et/W),u=ht.clientX,f=ht.clientY}},!1),a.addEventListener("mouseleave",function(){m=!1,e.refresh=!0},!1),a.addEventListener("mouseup",function(){m=!1,e.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),u=a.get("height"),f=o/u,m=a.getGroup(),x=m.getCanvasBBox(),w=[(x.minX+x.maxX)/2,(x.minY+x.maxY)/2],L=[x.maxX-x.minX,x.maxY-x.minY],H={centerX:w[0],centerY:w[1],width:0,height:0,minX:0,minY:0};x[0]/x[1]>f?(H.width=L[0],H.height=H.width/f):(H.height=L[1],H.width=H.height*f),H.minX=w[0]-H.width/2,H.minY=w[1]-H.height/2;var W=m.getMatrix();W||(W=[1,0,0,0,1,0,0,0,1]);var et=c0.invert([],W),ht=U_({x:H.minX,y:H.minY},et),bt=a.getCanvasByPoint(ht.x,ht.y),xt=this.get("viewport");xt||this.initViewport();var qt=o/H.width,ie=qt*e,_e=qt*n,ze=e*-bt.x/H.width,rr=n*-bt.y/H.height,sr=ze+ie,qe=rr+_e;ze<0&&(ie+=ze,ze=0),sr>e&&(ie=ie-(sr-e)),rr<0&&(_e+=rr,rr=0),qe>n&&(_e=_e-(qe-n)),this.set("ratio",t);var wr=ze+"px",Vr=rr+"px";(0,nl.Z)(xt,{left:wr,top:Vr,width:ie+"px",height:_e+"px"})}},r.prototype.init=function(){this.initContainer()},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),a=e.get("height"),o=a/n,u=t.get("className"),f=t.get("container"),m=t.get("width"),x=t.get("height");!m&&!x&&(m=200),m?(x=o*m,t.set("height",x)):(m=1/o*x,t.set("width",m));var w=(0,Bc.Z)("<div class='"+u+"' style='width: "+m+"px; height: "+x+"px; overflow: hidden; position: relative;'></div>");(0,Zo.default)(f)&&(f=document.getElementById(f)),f?f.appendChild(w):e.get("container").appendChild(w),t.set("container",w);var L=(0,Bc.Z)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');w.appendChild(L);var H=(0,Bc.Z)('<span style="display: table-cell; vertical-align: middle; "></span>');L.appendChild(H),t.set("containerDOM",L),t.set("containerSpan",H);var W=(0,Bc.Z)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');t.set("imgDOM",W),t.updateImgSize(),H.appendChild(W),t.updateCanvas()},r.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),a=t.get("height");e.onload=function(){var o=d9(e);o[0]>o[1]?e.width=n:e.height=a}},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=e.get("canvas").getCanvasBBox(),o=a.width,u=n/o;this.set("ratio",u),this.updateViewport()}}},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.updateGraphImg=function(t){var e=this,n=e.get("imgDOM");n.remove(),e.set("graphImg",t);var a=(0,Bc.Z)('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",a),a.src=t,e.updateImgSize();var o=e.get("containerSpan");o.appendChild(a),e.updateCanvas()},r.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},r}(hg),g9=v9,cB=.05,fB={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},m9=function(i){(0,Ft.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,Kl.d9)(fB),showLabel:"edge",scaleRBy:"wheel"}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},r.prototype.init=function(){var t=this,e=t.get("showLabel"),n=e==="node"||e==="both",a=e==="edge"||e==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},r.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");(!n||n.destroyed)&&(e.filter(t),n=e.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){e.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){e.scaleRByWheel(a)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),u=o?{x:o.attr("x"),y:o.attr("y")}:void 0,f=u||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-cB:a=1/(1-cB);var m=e.get("maxR"),x=e.get("minR"),w=e.get("r");(w>(m||n.get("height"))&&a>1||w<(x||n.get("height")*.05)&&a<1)&&(a=1),w*=a,e.set("r",w),e.filter(t)}},r.prototype.filter=function(t){var e=this,n=e.get("graph"),a=n.getNodes(),o={},u=e.get("r"),f=e.get("type"),m={x:t.x,y:t.y};e.updateDelegate(m,u);var x=e.get("shouldShow"),w=e.get("vShapes");w&&w.forEach(function(bt){bt.remove(),bt.destroy()}),w=[],a.forEach(function(bt){var xt=bt.getModel(),qt=xt.x,ie=xt.y;V_({x:qt,y:ie},m)<u&&(o[xt.id]=bt)});var L=n.getEdges(),H=[];L.forEach(function(bt){var xt=bt.getModel(),qt=xt.source,ie=xt.target;x(xt)&&(f==="only-source"||f==="one"?o[qt]&&!o[ie]&&H.push(bt):f==="only-target"||f==="one"?o[ie]&&!o[qt]&&H.push(bt):f==="both"&&o[qt]&&o[ie]&&H.push(bt))});var W=e.get("showNodeLabel"),et=e.get("showEdgelabel"),ht=n.get("group");H.forEach(function(bt){var xt=bt.get("group").get("children");xt.forEach(function(qt){var ie=qt.get("type"),_e=ht.addShape(ie,{attrs:qt.attr()});w.push(_e),W&&ie==="text"&&_e.set("visible",!0)})}),Object.keys(o).forEach(function(bt){var xt=o[bt],qt=xt.get("group").clone();if(ht.add(qt),w.push(qt),et)for(var ie=qt.get("children"),_e=0;_e<ie.length;_e++){var ze=ie[_e];ze.get("type")==="text"&&ze.set("visible",!0)}}),e.set("vShapes",w)},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.trigger,o=t.minR,u=t.maxR,f=t.scaleRBy,m=t.showLabel,x=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(u)||e.set("maxR",u),isNaN(o)||e.set("minR",o),(a==="mousemove"||a==="click")&&e.set("trigger",a),f==="wheel"||f==="unset"){e.set("scaleRBy",f),e.get("delegate").remove(),e.get("delegate").destroy();var w=e.get("dPercentText");w&&(w.remove(),w.destroy())}(m==="node"||m==="both")&&e.set("showNodeLabel",!0),(m==="edge"||m==="both")&&e.set("showEdgeLabel",!0),x&&e.set("shouldShow",x)},r.prototype.updateDelegate=function(t,e){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var u=a.get("group"),f=n.get("delegateStyle")||fB;o=u.addShape("circle",{attrs:(0,Ft.__assign)({r:e,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(m){n.scaleRByWheel(m)})}else o.attr({x:t.x,y:t.y,r:e});n.set("delegate",o)},r.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach(function(a){a.remove(),a.destroy()}),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(hg),y9=m9,bh={Menu:h7,Grid:l7,Minimap:m7,Bundling:_7,ToolBar:E7,Tooltip:A7,Fisheye:S7,TimeBar:p9,ImageMinimap:g9,EdgeFilterLens:y9};function x9(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next;return n[o.get("id")]?!1:(n[o.get("id")]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}function hB(i,r,t,e){e.enter({current:r,previous:t}),i.getNeighbors(r,"target").forEach(function(n){e.allowTraversal({previous:t,current:r,next:n})&&hB(i,n,r,e)}),e.leave({current:r,previous:t})}function pB(i,r,t){var e=null,n=i.findById(r);hB(i,n,e,x9(t))}var _9=function(){function i(){this.linkedList=new DD}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(r){this.linkedList.append(r)},i.prototype.dequeue=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toString=function(r){return this.linkedList.toString(r)},i}(),b9=_9;function S9(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next,u=o.get("id");return n[u]?!1:(n[u]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}var w9=function(r,t,e){var n=S9(e),a=new b9,o=r.findById(t);a.enqueue(o);for(var u=null,f=function(){var x=a.dequeue();n.enter({current:x,previous:u}),r.getNeighbors(x,"target").forEach(function(w){n.allowTraversal({previous:u,current:x,next:w})&&a.enqueue(w)}),n.leave({current:x,previous:u}),u=x};!a.isEmpty();)f()},E9=w9;function C9(i){for(var r=[],t={},e=[],n=function f(m){e.push(m),t[m.get("id")]=!0;for(var x=m.getNeighbors(),w=0;w<x.length;++w){var L=x[w];t[L.get("id")]||f(L)}},a=0;a<i.length;a++){var o=i[a];if(!t[o.get("id")]){n(o);for(var u=[];e.length>0;)u.push(e.pop());r.push(u)}}return r}function dB(i){for(var r=[],t={},e={},n={},a=[],o=0,u=function w(L){e[L.get("id")]=o,n[L.get("id")]=o,o+=1,r.push(L),t[L.get("id")]=!0;for(var H=L.getNeighbors("target").filter(function(xt){return i.indexOf(xt)>-1}),W=0;W<H.length;W++){var et=H[W];!e[et.get("id")]&&e[et.get("id")]!==0?(w(et),n[L.get("id")]=Math.min(n[L.get("id")],n[et.get("id")])):t[et.get("id")]&&(n[L.get("id")]=Math.min(n[L.get("id")],e[et.get("id")]))}if(n[L.get("id")]===e[L.get("id")]){for(var ht=[];r.length>0;){var bt=r.pop();if(t[bt.get("id")]=!1,ht.push(bt),bt===L)break}ht.length>0&&a.push(ht)}},f=0,m=i;f<m.length;f++){var x=m[f];!e[x.get("id")]&&e[x.get("id")]!==0&&u(x)}return a}function vB(i,r){var t=r===void 0?i.get("directed"):r,e=i.getNodes();return t?dB(e):C9(e)}var A9=function(r){var t=null,e={},n={},a={},o={};r.getNodes().forEach(function(m){n[m.getID()]=m});for(var u={enter:function(x){var w=x.current,L=x.previous;if(a[w.getID()]){t={};for(var H=w,W=L;W.getID()!==w.getID();)t[H.getID()]=W,H=W,W=e[W.getID()];t[H.getID()]=W}else a[w.getID()]=w,delete n[w.getID()],e[w.getID()]=L},leave:function(x){var w=x.current;o[w.getID()]=w,delete a[w.getID()]},allowTraversal:function(x){var w=x.next;return t?!1:!o[w.getID()]}};Object.keys(n).length;){var f=Object.keys(n)[0];pB(r,f,u)}return t},gB=function(r,t,e){var n,a,o;e===void 0&&(e=!0);for(var u=[],f=vB(r,!1),m=0,x=f;m<x.length;m++){var w=x[m];if(!!w.length)for(var L=w[0],H=L.get("id"),W=[L],et=(n={},n[H]=L,n),ht=(a={},a[H]=new Set,a);W.length>0;)for(var bt=W.pop(),xt=bt.get("id"),qt=bt.getNeighbors(),ie=0;ie<qt.length;ie+=1){var _e=qt[ie],ze=_e.get("id");if(ze===xt)u.push((o={},o[_e.getID()]=bt,o));else if(!(ze in ht))et[ze]=bt,W.push(_e),ht[ze]=new Set([bt]);else if(!ht[xt].has(_e)){for(var rr=!0,sr=[_e,bt],qe=et[xt];ht[ze].size&&!ht[ze].has(qe)&&(sr.push(qe),qe!==et[qe.getID()]);)qe=et[qe.getID()];if(sr.push(qe),t&&e?(rr=!1,sr.findIndex(function(Br){return t.indexOf(Br.get("id"))>-1})>-1&&(rr=!0)):t&&!e&&sr.findIndex(function(Br){return t.indexOf(Br.get("id"))>-1})>-1&&(rr=!1),rr){for(var wr={},Vr=1;Vr<sr.length;Vr+=1)wr[sr[Vr-1].getID()]=sr[Vr];sr.length&&(wr[sr[sr.length-1].getID()]=sr[0]),u.push(wr)}ht[ze].add(bt)}}}return u},mB=function(r,t,e){e===void 0&&(e=!0);for(var n=[],a=new Set,o=[],u=[],f={},m={},x=function(wr){for(var Vr=[wr];Vr.length>0;){var Br=Vr.pop();a.has(Br)&&(a.delete(Br),o[Br.get("id")].forEach(function(Tn){Vr.push(Tn)}),o[Br.get("id")].clear())}},w=function qe(wr,Vr,Br){var Tn=!1;if(t&&e===!1&&t.indexOf(wr.get("id"))>-1)return Tn;n.push(wr),a.add(wr);for(var Hn=Br[wr.getID()],Un=0;Un<Hn.length;Un+=1){var Ei=f[Hn[Un]];if(Ei===Vr){for(var Ti={},Li=1;Li<n.length;Li+=1)Ti[n[Li-1].getID()]=n[Li];n.length&&(Ti[n[n.length-1].getID()]=n[0]),u.push(Ti),Tn=!0}else a.has(Ei)||qe(Ei,Vr,Br)&&(Tn=!0)}if(Tn)x(wr);else for(var Un=0;Un<Hn.length;Un+=1){var Ei=f[Hn[Un]];o[Ei.get("id")].has(wr)||o[Ei.get("id")].add(wr)}return n.pop(),Tn},L=r.getNodes(),H=0;H<L.length;H+=1){var W=L[H],et=W.getID();m[et]=H,f[H]=W}if(t&&e)for(var H=0;H<t.length;H++){var et=t[H];m[L[H].getID()]=m[et],m[et]=0,f[0]=r.findById(et),f[m[L[H].getID()]]=L[H]}for(var ht=function(wr){for(var Vr,Br,Tn=Infinity,Hn=0;Hn<wr.length;Hn+=1)for(var Un=wr[Hn],Ei=0;Ei<Un.length;Ei++){var Ti=m[Un[Ei].getID()];Ti<Tn&&(Tn=Ti,Br=Hn)}for(var Li=wr[Br],_i=[],Hn=0;Hn<Li.length;Hn+=1){var bi=Li[Hn];_i[bi.getID()]=[];for(var Ba=0,La=bi.getNeighbors("target").filter(function(Na){return Li.indexOf(Na)>-1});Ba<La.length;Ba++){var Ha=La[Ba];Ha===bi&&!(e===!1&&t.indexOf(bi.getId())>-1)?u.push((Vr={},Vr[bi.getID()]=bi,Vr)):_i[bi.getID()].push(m[Ha.getID()])}}return{component:Li,adjList:_i,minIdx:Tn}},bt=0;bt<L.length;){var xt=L.filter(function(qe){return m[qe.getID()]>=bt}),qt=dB(xt).filter(function(qe){return qe.length>1});if(qt.length===0)break;var ie=ht(qt),_e=ie.minIdx,ze=ie.adjList,rr=ie.component;if(rr.length>1){rr.forEach(function(qe){o[qe.get("id")]=new Set});var sr=f[_e];if(t&&e&&t.indexOf(sr.get("id"))===-1)return u;w(sr,sr,ze),bt=_e+1}else break}return u},M9=function(r,t,e,n){return n===void 0&&(n=!0),t===void 0&&(t=r.get("directed")),t?mB(r,e,n):gB(r,e,n)},T9=A9,P9=function(r,t,e,n){var a=r.getNodes(),o=[],u={},f={},m={};a.forEach(function(ht,bt){var xt=ht.getID();o.push(xt),f[xt]=Infinity,xt===t&&(f[xt]=0)});for(var x=a.length,w=function(bt){var xt=I9(f,a,u),qt=xt.get("id");if(u[qt]=!0,f[qt]===Infinity)return"continue";var ie=[];e?ie=xt.getOutEdges():ie=xt.getEdges(),ie.forEach(function(_e){var ze=_e.getTarget().getID(),rr=_e.getSource().getID(),sr=ze===qt?rr:ze,qe=n&&_e.getModel()[n]?_e.getModel()[n]:1;f[sr]>f[xt.get("id")]+qe&&(f[sr]=f[xt.get("id")]+qe,m[sr]=xt.get("id"))})},L=0;L<x;L++)w(L);var H={};for(var W in f){H[W]=[W];for(var et=m[W];et!==void 0;)H[W].unshift(et),et=m[et]}return{length:f,path:H}};function I9(i,r,t){for(var e=Infinity,n,a=0;a<r.length;a++){var o=r[a].get("id");!t[o]&&i[o]<=e&&(e=i[o],n=r[a])}return n}var O9=P9,L9=function(r,t,e,n,a){(0,d.isString)(t)&&(t=r.findById(t)),(0,d.isString)(e)&&(e=r.findById(e));var o=O9(r,t.get("id"),n,a),u=o.length,f=o.path;return{length:u[e.get("id")],path:f[e.get("id")]}},k9=function(r,t,e,n){var a;if((0,d.isString)(t)&&(t=r.findById(t)),(0,d.isString)(e)&&(e=r.findById(e)),n===void 0&&(n=r.get("directed")),t===e)return[[t.get("id")]];var o=[t],u=(a={},a[t.get("id")]=!0,a),f=[],m=[],x=n?t.getNeighbors("target"):t.getNeighbors();for(f.push(x);o.length>0&&f.length>0;){var w=f[f.length-1];if(w.length){var L=w.shift();L&&(o.push(L),u[L.get("id")]=!0,x=n?L.getNeighbors("target"):L.getNeighbors(),f.push(x.filter(function(et){return!u[et.get("id")]})))}else{var H=o.pop();u[H.get("id")]=!1,f.pop();continue}if(o[o.length-1]===e){var W=o.map(function(ht){return ht.get("id")});m.push(W);var H=o.pop();u[H.get("id")]=!1,f.pop()}}return m},R9=function(){function i(r){this.count=r.length,this.parent={};for(var t=0,e=r;t<e.length;t++){var n=e[t];this.parent[n]=n}}return i.prototype.find=function(r){for(;this.parent[r]!==r;)r=this.parent[r];return r},i.prototype.union=function(r,t){var e=this.find(r),n=this.find(t);e!==n&&(e<n?(this.parent[t]!==t&&this.union(this.parent[t],r),this.parent[t]=this.parent[r]):(this.parent[r]!==r&&this.union(this.parent[r],t),this.parent[r]=this.parent[t]))},i.prototype.connected=function(r,t){return this.find(r)===this.find(t)},i}(),D9=R9,B9=function(r,t){return r-t},F9=function(){function i(r){r===void 0&&(r=B9),this.compareFn=r,this.list=[]}return i.prototype.getLeft=function(r){return 2*r+1},i.prototype.getRight=function(r){return 2*r+2},i.prototype.getParent=function(r){return r===0?null:Math.floor((r-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var r=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),r},i.prototype.insert=function(r){if(r!==null){this.list.push(r);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(r){for(var t=this.getParent(r);r&&r>0&&this.compareFn(this.list[t],this.list[r])>0;){var e=this.list[t];this.list[t]=this.list[r],this.list[r]=e,r=t,t=this.getParent(r)}},i.prototype.moveDown=function(r){var t,e=r,n=this.getLeft(r),a=this.getRight(r),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[e],this.list[n])>0?e=n:a!==null&&a<o&&this.compareFn(this.list[e],this.list[a])>0&&(e=a),r!==e&&(t=[this.list[e],this.list[r]],this.list[r]=t[0],this.list[e]=t[1],this.moveDown(e))},i}(),N9=F9,z9=function(r,t){var e=[],n=r.getNodes();if(n.length===0)return e;var a=n[0],o=new Set;o.add(a);var u=function(H,W){return t?H.getModel()[t]-W.getModel()[t]:0},f=new N9(u);for(a.getEdges().forEach(function(L){f.insert(L)});!f.isEmpty();){var m=f.delMin(),x=m.getSource(),w=m.getTarget();o.has(x)&&o.has(w)||(e.push(m),o.has(x)||(o.add(x),x.getEdges().forEach(function(L){f.insert(L)})),o.has(w)||(o.add(w),w.getEdges().forEach(function(L){f.insert(L)})))}return e},yB=function(r,t){var e=[];if(r.getNodes().length===0)return e;var n=r.getEdges().map(function(m){return m});t&&n.sort(function(m,x){return m.getModel()[t]-x.getModel()[t]});for(var a=new D9(r.getNodes().map(function(m){return m.get("id")}));n.length>0;){var o=n.shift(),u=o.getSource().get("id"),f=o.getTarget().get("id");a.connected(u,f)||(e.push(o),a.union(u,f))}return e};function G9(i,r,t){var e={prim:z9,kruskal:yB};return t?e[t](i,r):yB(i,r)}var U9=function(r,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var n=1,a=0,o=1e3,u=r.getNodes(),f=u.length,m,x={},w={},L=0;L<f;++L){var H=u[L],W=H.get("id");x[W]=1/f,w[W]=1/f}for(;o>0&&n>t;){a=0;for(var L=0;L<f;++L){var H=u[L],W=H.get("id");if(m=0,r.getNodeDegree(H,"in")===0)x[W]=0;else{for(var et=H.getNeighbors("source"),ht=0;ht<et.length;++ht){var bt=et[ht],xt=r.getNodeDegree(bt,"out");xt>0&&(m+=w[bt.get("id")]/xt)}x[W]=e*m,a+=x[W]}}a=(1-a)/f,n=0;for(var L=0;L<f;++L){var H=u[L],W=H.get("id");m=x[W]+a,n+=Math.abs(m-w[W]),w[W]=m}o-=1}return w},V9=U9,jz=L1.registerNode,Xz=L1.registerEdge,Yz=L1.registerCombo,Wz=HR.registerBehavior,Kz=Y_.registerLayout,$z=bh.Minimap,Qz=bh.Grid,qz=bh.Bundling,Jz=bh.Menu,Z9=bh.Fisheye,tG=bh.ToolBar,eG=bh.Tooltip,H9=bh.TimeBar,j9=bh.ImageMinimap,X9=bh.EdgeFilterLens,Zf={version:E4.i8,Graph:VD,TreeGraph:T8,Util:o7,registerNode:L1.registerNode,registerEdge:L1.registerEdge,registerCombo:L1.registerCombo,registerBehavior:HR.registerBehavior,registerLayout:Y_.registerLayout,Layout:Y_,Global:mi,Minimap:bh.Minimap,Grid:bh.Grid,Bundling:bh.Bundling,Menu:bh.Menu,ToolBar:bh.ToolBar,Tooltip:bh.Tooltip,TimeBar:H9,Fisheye:Z9,ImageMinimap:j9,EdgeFilterLens:X9,Algorithm:ot,Arrow:r7,Marker:n7};function xB(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function gg(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xB(Object(t),!0).forEach(function(e){Y9(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):xB(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function Y9(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}Zf.registerNode("card-node",{draw:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a=Object.assign({radius:2,fill:"#fff"},a),e=a.stroke||"#5B8FF9";var o=a.radius||0,u=t.addShape("rect",{attrs:gg({x:-n[0]/2,y:-n[1]/2,width:n[0],height:n[1],stroke:e},a),name:"main-box",draggable:!0}),f=r.title||r.label,m,x=r&&r.labelCfg&&r.labelCfg.style?r.labelCfg.style:{};if(f){var w=Object.assign({fill:"#fff"},x);m=t.addShape("text",{attrs:gg(gg({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+2,text:f},w),{},{fill:"#fff"}),name:"title"})}var L=m?m.getBBox():{height:n[1]/2},H=t.addShape("rect",{attrs:{x:-n[0]/2,y:-n[1]/2,width:n[0],height:L.height+4,fill:e,radius:[o,o,0,0]},name:"title-rect",draggable:!0});m&&m.toFront();var W;r.children&&(W=t.addShape("marker",{attrs:{x:n[0]/2,y:0,r:6,cursor:"pointer",symbol:r.collapsed?Zf.Marker.expand:Zf.Marker.collapse,stroke:e,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var et=r&&r.description?r.description:void 0,ht=H.getBBox(),bt;if(et&&(bt=t.addShape("text",{attrs:gg({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+ht.height+8,text:et},x),name:"description"})),bt){var xt,qt=bt.getBBox(),ie=ht.height+16+qt.height,_e=n[0]>qt.width+16?n[0]:qt.width+16;u.attr({width:_e,height:ie}),H==null||H.attr("width",_e),(xt=W)===null||xt===void 0||xt.attr({x:_e-n[0]/2,y:ie/2-n[1]/2})}return u},update:void 0},"single-node"),Zf.registerNode("round-rect",{drawShape:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a.stroke&&(e=a.stroke);var o=a&&a.fill?a.fill:"#fff";a=Object.assign({width:n[0],height:n[1],radius:n[1]/2,fill:o,lineWidth:1.2,stroke:e},a);var u=t.addShape("rect",{attrs:gg({x:-n[0]/2,y:-n[1]/2},a),name:"rect-shape"});return t.addShape("circle",{attrs:{x:-n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape"}),t.addShape("circle",{attrs:{x:n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape2"}),u},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(r,t){var e=t.getContainer(),n=e.get("children"),a=n[0],o=n[1],u=n[2],f=r.style&&r.style.stroke?r.style.stroke:"#5B8FF9";f&&(a.attr("stroke",f),o.attr("fill",f),u.attr("fill",f))}},"single-node");var W9=function(r){Zf.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(e,n){var a=this.getShapeStyle(e),o=e.labelCfg,u=o===void 0?{}:o,f=n.addShape("rect",{attrs:gg(gg({},a),{},{x:0,y:0})}),m={fill:"#e6fffb"},x="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return e.leftIcon&&(m=Object.assign({},m,e.leftIcon.style),x=e.leftIcon.img),n.addShape("rect",{attrs:gg({x:1,y:1,width:38,height:a.height-2},m)}),n.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:x},name:"image-shape"}),r.enableEdit&&(n.addShape("marker",{attrs:{x:a.width/3,y:a.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Zf.Marker.expand},name:"add-item"}),n.addShape("marker",{attrs:{x:a.width*2/3,y:a.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:Zf.Marker.collapse},name:"remove-item"})),e.label&&n.addShape("text",{attrs:gg(gg({},u.style),{},{text:e.label,x:a.width/2,y:a.height/1.5})}),f}},"rect")};Zf.registerEdge("fund-polyline",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=n.y-e.y,o=a!==0?500/Math.abs(a):0,u=16,f=a<0?u:-u,m={x:e.x+o,y:n.y+f},x={x:m.x+u,y:n.y},w={x:(m.x-e.x)*(n.y-e.y)/(m.y-e.y)+e.x,y:n.y},L=[["M",e.x,e.y],["L",m.x,m.y],["Q",w.x,w.y,x.x,x.y],["L",n.x,n.y]];a===0&&(L=[["M",e.x,e.y],["L",n.x,n.y]]);var H=r||{},W=H.style,et=t.addShape("path",{attrs:{path:L,stroke:W.stroke||r.colorMap&&r.colorMap[r.dataType]?r.colorMap[r.dataType]:"#5B8FF9",lineWidth:W.lineWidth||1.2,endArrow:!1},name:"path-shape"}),ht=0,bt=8,xt;if(r.label&&(xt=t.addShape("text",{attrs:{text:r.label,x:x.x+ht,y:n.y-bt-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),r.dataType){var qt=xt?xt.getBBox():{height:0};t.addShape("text",{attrs:{text:r.dataType,x:x.x+ht,y:n.y-bt-qt.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return r.subLabel&&t.addShape("text",{attrs:{text:r.subLabel,x:x.x+ht,y:n.y+bt+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),et},update:void 0},"single-edge"),Zf.registerEdge("flow-line",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=r.style,o=a===void 0?{}:a,u=t.addShape("path",{attrs:{stroke:o.stroke,endArrow:o.endArrow,path:[["M",e.x,e.y],["L",e.x,(e.y+n.y)/2],["L",n.x,(e.y+n.y)/2],["L",n.x,n.y]]}});return u}});function _B(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function K9(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_B(Object(t),!0).forEach(function(e){$9(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):_B(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function $9(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}var Q9={show:!1,size:[150,100],type:"keyShape"},$_=function(r,t,e){var n,a;return e&&e.current&&(n=e.current.offsetWidth,a=e.current.offsetHeight||500),console.log("graph size",n,a,t,r,e,e.current),!r&&!n||!t&&!a?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[r||n||500,t||a||500]},Q_=function(r,t){if(!(!t||t.destroyed)&&r&&r.show){var e=Object.assign(Q9,r),n=new Zf.Minimap(K9({},e));return t.addPlugin(n),n}};function wA(i,r,t){var e=(0,nt.useRef)(),n=r.data,a=r.nodeStyle,o=r.nodeAnchorPoints,u=r.nodeType,f=r.edgeType,m=r.edgeStyle,x=r.width,w=r.height,L=r.layout,H=r.minimapCfg,W=r.behaviors,et=r.nodeLabelCfg,ht=r.edgeLabelCfg,bt;return(0,nt.useEffect)(function(){i&&!i.destroyed&&(i.changeData(n),i.layout())},[n]),(0,nt.useEffect)(function(){i&&!i.destroyed&&i.getNodes().forEach(function(xt){i.updateItem(xt,{type:u,style:a,anchorPoints:o,labelCfg:et})})},[a,o,u]),(0,nt.useEffect)(function(){i&&!i.destroyed&&i.getEdges().forEach(function(xt){i.updateItem(xt,{type:f,style:m,labelCfg:ht})})},[m,f]),(0,nt.useEffect)(function(){if(i&&!i.destroyed){var xt=$_(x,w,t);i.changeSize(xt[0],xt[1])}},[t,x,w]),(0,nt.useEffect)(function(){i&&!i.destroyed&&i.updateLayout(L)},[L]),(0,nt.useEffect)(function(){if(!(!H||!i||i.destroyed))if(H.show)bt=Q_(H,i),bt&&bt.updateCanvas();else{var xt=i.get("plugins")[0];xt&&i.removePlugin(xt)}},[H]),(0,nt.useEffect)(function(){if(i&&!i.destroyed){var xt=i.get("modes"),qt=xt.default,ie=[];qt.forEach(function(_e){(0,d.isObject)(_e)?ie.push(_e.type):(0,d.isString)(_e)&&ie.push(_e)}),i.removeBehaviors(ie,"default"),i.addBehaviors(W,"default")}},[W]),(0,nt.useEffect)(function(){if(e.current=i,i&&!i.destroyed)return function(){i.destroy(),i=void 0}},[]),{graphHook:e}}var bB={hover:{stroke:"#1890ff",lineWidth:2}},q9={fill:"#91d5ff",stroke:"#40a9ff",radius:5},J9={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},tz={type:"compactBox",direction:"TB",getId:function(r){return r.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},SB={style:{fill:"#000",fontSize:12}},Yu,ez=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,u=r.nodeType,f=u===void 0?"rect":u,m=r.edgeType,x=m===void 0?"flow-line":m,w=r.collapseExpand,L=w===void 0?!1:w,H=r.nodeSize,W=H===void 0?[120,40]:H,et=r.nodeLabelCfg,ht=et===void 0?SB:et,bt=r.edgeLabelCfg,xt=bt===void 0?SB:bt,qt=r.layout,ie=qt===void 0?tz:qt,_e=r.enableEdit,ze=_e===void 0?!1:_e,rr=r.minimapCfg,sr=r.nodeStyle,qe=sr===void 0?q9:sr,wr=r.edgeStyle,Vr=wr===void 0?J9:wr,Br=r.nodeStateStyles,Tn=Br===void 0?bB:Br,Hn=r.edgeStateStyles,Un=Hn===void 0?bB:Hn,Ei=r.handleNodeClick,Ti=r.handleEdgeClick,Li=r.handleNodeHover,_i=r.handleNodeUnHover,bi=r.handleEdgeHover,Ba=r.handleEdgeUnHover,La=r.handleCanvasClick,Ha=r.graphRef,Ri={data:t,className:e,style:n,width:a,height:o,nodeType:f,edgeType:x,collapseExpand:L,nodeSize:W,nodeLabelCfg:ht,edgeLabelCfg:xt,layout:ie,enableEdit:ze,minimapCfg:rr,nodeStyle:qe,edgeStyle:Vr,nodeStateStyles:Tn,edgeStateStyles:Un,handleNodeClick:Ei,handleEdgeClick:Ti,handleNodeHover:Li,handleNodeUnHover:_i,handleEdgeHover:bi,handleEdgeUnHover:Ba,handleCanvasClick:La,graphRef:Ha},Na=nt.useRef(null);return wA(Yu,Ri,Na),(0,nt.useEffect)(function(){var _o=$_(a,o,Na);return(!Yu||Yu.destroyed)&&(f==="icon-node"&&W9({enableEdit:ze}),Yu=new Zf.TreeGraph({container:Na.current,width:_o[0],height:_o[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:f,size:W,style:qe,labelCfg:ht},defaultEdge:{type:x,style:Vr,labelCfg:xt},nodeStateStyles:Tn,edgeStateStyles:Un,layout:ie}),Ha&&(Ha.current=Yu)),Q_(rr,Yu),Yu.data(t),Yu.render(),Yu.fitView(),L&&Yu.addBehaviors({type:"collapse-expand",onChange:function(Ua,Mo){if(!Ua)return!1;var hs=Ua.get("model").data;return hs.collapsed=Mo,!0}},"default"),Yu.on("node:mouseenter",function(Va){var Ua=Va.item;Yu.setItemState(Ua,"hover",!0),Li&&Li(Ua,Yu)}),Yu.on("node:mouseleave",function(Va){var Ua=Va.item;Yu.setItemState(Ua,"hover",!1),_i&&_i(Ua,Yu)}),Yu.on("node:click",function(Va){var Ua=Va.item,Mo=Va.target,hs=Mo.get("type"),Ja=Mo.get("name");if(hs==="marker"){var ii=Ua.getModel();if(Ja==="add-item"){ii.children||(ii.children=[]);var Gi=Math.random().toString(36).slice(-8);ii.children.push({id:Gi,label:Gi}),Yu.updateChild(ii,ii.id)}else Ja==="remove-item"&&Yu.removeChild(ii.id)}else Ei&&Ei(Ua,Yu)}),Yu.on("edge:mouseenter",function(Va){var Ua=Va.item;Yu.setItemState(Ua,"hover",!0),bi&&bi(Ua,Yu)}),Yu.on("edge:mouseleave",function(Va){var Ua=Va.item;Yu.setItemState(Ua,"hover",!1),Ba&&Ba(Ua,Yu)}),Yu.on("edge:click",function(Va){var Ua=Va.item;Ti&&Ti(Ua,Yu)}),Yu.on("canvas:click",function(Va){La&&La(Yu)}),function(){return Yu.destroy()}},[]),nt.createElement(xs,null,nt.createElement("div",{className:e,style:n,ref:Na}))},rz=ez,wB={hover:{stroke:"#1890ff",lineWidth:2}},nz=[120,40],iz={stroke:"#40a9ff"},az=[[.5,0],[.5,1]],oz={stroke:"#91d5ff",endArrow:{path:Zf.Arrow.vee(10,10),fill:"#91d5ff"}},sz={type:"dagre",rankdir:"TB",nodesepFunc:function(r){return 0},ranksepFunc:function(r){return 0},controlPoints:!0},EB={style:{fill:"#000",fontSize:12}},wl,uz=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,u=r.nodeType,f=u===void 0?"modelRect":u,m=r.edgeType,x=m===void 0?"polyline":m,w=r.behaviors,L=w===void 0?["zoom-canvas","drag-canvas"]:w,H=r.nodeSize,W=H===void 0?nz:H,et=r.nodeLabelCfg,ht=et===void 0?EB:et,bt=r.edgeLabelCfg,xt=bt===void 0?EB:bt,qt=r.nodeAnchorPoints,ie=qt===void 0?az:qt,_e=r.layout,ze=_e===void 0?sz:_e,rr=r.minimapCfg,sr=r.nodeStyle,qe=sr===void 0?iz:sr,wr=r.edgeStyle,Vr=wr===void 0?oz:wr,Br=r.nodeStateStyles,Tn=Br===void 0?wB:Br,Hn=r.edgeStateStyles,Un=Hn===void 0?wB:Hn,Ei=r.handleEdgeClick,Ti=r.handleEdgeHover,Li=r.handleEdgeUnHover,_i=r.handleNodeClick,bi=r.handleNodeHover,Ba=r.handleNodeUnHover,La=r.handleCanvasClick,Ha=r.graphRef,Ri={data:t,className:e,style:n,width:a,height:o,nodeType:f,edgeType:x,behaviors:L,nodeSize:W,nodeLabelCfg:ht,edgeLabelCfg:xt,nodeAnchorPoints:ie,layout:ze,minimapCfg:rr,nodeStyle:qe,edgeStyle:Vr,nodeStateStyles:Tn,edgeStateStyles:Un,handleEdgeClick:Ei,handleEdgeHover:Ti,handleEdgeUnHover:Li,handleNodeClick:_i,handleNodeHover:bi,handleNodeUnHover:Ba,handleCanvasClick:La,graphRef:Ha},Na=nt.useRef(null);return wA(wl,Ri,Na),(0,nt.useEffect)(function(){var _o=$_(a,o,Na);return(!wl||wl.destroyed)&&(wl=new Zf.Graph({container:Na.current,width:_o[0],height:_o[1],modes:{default:L},defaultNode:{type:f,size:W,style:qe,anchorPoints:ie,labelCfg:ht},defaultEdge:{type:x,style:Vr,labelCfg:xt},nodeStateStyles:Tn,edgeStateStyles:Un,layout:ze}),Ha&&(Ha.current=wl)),Q_(rr,wl),wl.data(t),wl.render(),wl.fitView(),wl.on("edge:mouseenter",function(Va){var Ua=Va.item;wl.setItemState(Ua,"hover",!0),Ti&&Ti(Ua,wl)}),wl.on("node:mouseenter",function(Va){var Ua=Va.item;wl.setItemState(Ua,"hover",!1),bi&&bi(Ua,wl)}),wl.on("edge:mouseleave",function(Va){var Ua=Va.item;wl.setItemState(Ua,"hover",!1),Li&&Li(Ua,wl)}),wl.on("node:mouseleave",function(Va){var Ua=Va.item;wl.setItemState(Ua,"hover",!1),Ba&&Ba(Ua,wl)}),wl.on("edge:click",function(Va){var Ua=Va.item;Ei&&Ei(Ua,wl)}),wl.on("node:click",function(Va){var Ua=Va.item;_i&&_i(Ua,wl)}),wl.on("canvas:click",function(Va){La&&La(wl)}),function(){return wl.destroy()}},[]),nt.createElement(xs,null,nt.createElement("div",{className:e,style:n,ref:Na}))},lz=uz,CB={hover:{stroke:"#1890ff",lineWidth:2}},cz=[150,30],fz={stroke:"#72CC4A",fill:"#f00"},hz=[[.5,0],[.5,1]],pz={stroke:"#91d5ff",endArrow:{path:Zf.Arrow.vee(10,10),fill:"#91d5ff"}},dz={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},AB={style:{fill:"#000000A6",fontSize:10}},hl,vz=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,u=r.nodeType,f=u===void 0?"round-rect":u,m=r.edgeType,x=m===void 0?"fund-polyline":m,w=r.behaviors,L=w===void 0?["zoom-canvas","drag-canvas"]:w,H=r.nodeSize,W=H===void 0?cz:H,et=r.nodeLabelCfg,ht=et===void 0?AB:et,bt=r.edgeLabelCfg,xt=bt===void 0?AB:bt,qt=r.nodeAnchorPoints,ie=qt===void 0?hz:qt,_e=r.layout,ze=_e===void 0?dz:_e,rr=r.minimapCfg,sr=r.nodeStyle,qe=sr===void 0?fz:sr,wr=r.edgeStyle,Vr=wr===void 0?pz:wr,Br=r.nodeStateStyles,Tn=Br===void 0?CB:Br,Hn=r.edgeStateStyles,Un=Hn===void 0?CB:Hn,Ei=r.colorMap,Ti=Ei===void 0?{}:Ei,Li=r.handleEdgeClick,_i=r.handleEdgeHover,bi=r.handleEdgeUnHover,Ba=r.handleNodeClick,La=r.handleNodeHover,Ha=r.handleNodeUnHover,Ri=r.handleCanvasClick,Na=r.graphRef,_o=nt.useRef(null),Va={data:t,className:e,style:n,width:a,height:o,nodeType:f,edgeType:x,behaviors:L,nodeSize:W,nodeLabelCfg:ht,edgeLabelCfg:xt,nodeAnchorPoints:ie,layout:ze,minimapCfg:rr,nodeStyle:qe,edgeStyle:Vr,nodeStateStyles:Tn,edgeStateStyles:Un,colorMap:Ti,handleEdgeClick:Li,handleEdgeHover:_i,handleEdgeUnHover:bi,handleNodeClick:Ba,handleNodeHover:La,handleNodeUnHover:Ha,handleCanvasClick:Ri,graphRef:Na};return wA(hl,Va,_o),(0,nt.useEffect)(function(){var Ua=$_(a,o,_o);(!hl||hl.destroyed)&&(hl=new Zf.Graph({container:_o.current,width:Ua[0],height:Ua[1],modes:{default:L},defaultNode:{type:f,size:W,style:qe,anchorPoints:ie,labelCfg:ht},defaultEdge:{type:x,style:Vr,colorMap:Ti,labelCfg:xt},nodeStateStyles:Tn,edgeStateStyles:Un,layout:ze}),Na&&(Na.current=hl)),Q_(rr,hl),hl.data(t),hl.render();var Mo=hl.getEdges();return Mo.forEach(function(hs){var Ja=hs.getKeyShape(),ii=Ja.attr("stroke"),Gi=hs.getTarget();Gi.update({style:{stroke:ii}})}),hl.fitView(),hl.on("edge:mouseenter",function(hs){var Ja=hs.item;hl.setItemState(Ja,"hover",!0),_i&&_i(Ja,hl)}),hl.on("edge:mouseleave",function(hs){var Ja=hs.item;hl.setItemState(Ja,"hover",!1),bi&&bi(Ja,hl)}),hl.on("edge:click",function(hs){var Ja=hs.item;Li&&Li(Ja,hl)}),hl.on("node:mouseenter",function(hs){var Ja=hs.item;hl.setItemState(Ja,"hover",!1),La&&La(Ja,hl)}),hl.on("node:mouseleave",function(hs){var Ja=hs.item;hl.setItemState(Ja,"hover",!1),Ha&&Ha(Ja,hl)}),hl.on("node:click",function(hs){var Ja=hs.item;Ba&&Ba(Ja,hl)}),hl.on("canvas:click",function(hs){Ri&&Ri(hl)}),function(){return hl.destroy()}},[]),nt.createElement(xs,null,nt.createElement("div",{className:e,style:n,ref:_o}))},gz=vz,MB={hover:{stroke:"#1890ff",lineWidth:2}},mz=[120,40],yz={stroke:"#40a9ff"},xz=[[0,.5],[1,.5]],_z={stroke:"#ccc",endArrow:{path:Zf.Arrow.vee(10,10),fill:"#ccc"}},bz={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(r){return 100}},Sz={style:{fill:"#000",fontSize:12}},il,wz=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,u=r.nodeType,f=u===void 0?"card-node":u,m=r.edgeType,x=m===void 0?"cubic-horizontal":m,w=r.behaviors,L=w===void 0?["zoom-canvas","drag-canvas"]:w,H=r.nodeSize,W=H===void 0?mz:H,et=r.nodeLabelCfg,ht=et===void 0?Sz:et,bt=r.nodeAnchorPoints,xt=bt===void 0?xz:bt,qt=r.layout,ie=qt===void 0?bz:qt,_e=r.minimapCfg,ze=r.nodeStyle,rr=ze===void 0?yz:ze,sr=r.edgeStyle,qe=sr===void 0?_z:sr,wr=r.nodeStateStyles,Vr=wr===void 0?MB:wr,Br=r.edgeStateStyles,Tn=Br===void 0?MB:Br,Hn=r.collapseExpand,Un=Hn===void 0?!0:Hn,Ei=r.handleEdgeClick,Ti=r.handleEdgeHover,Li=r.handleEdgeUnHover,_i=r.handleNodeClick,bi=r.handleNodeHover,Ba=r.handleNodeUnHover,La=r.handleCanvasClick,Ha=r.graphRef,Ri=nt.useRef(null),Na={data:t,className:e,style:n,width:a,height:o,nodeType:f,edgeType:x,behaviors:L,nodeSize:W,nodeLabelCfg:ht,nodeAnchorPoints:xt,layout:ie,minimapCfg:_e,nodeStyle:rr,edgeStyle:qe,nodeStateStyles:Vr,edgeStateStyles:Tn,collapseExpand:Un,handleEdgeClick:Ei,handleEdgeHover:Ti,handleEdgeUnHover:Li,handleNodeClick:_i,handleNodeHover:bi,handleNodeUnHover:Ba,handleCanvasClick:La,graphRef:Ha};return wA(il,Na,Ri),(0,nt.useEffect)(function(){var _o=$_(a,o,Ri);return(!il||il.destroyed)&&(il=new Zf.TreeGraph({container:Ri.current,width:_o[0],height:_o[1],modes:{default:L},defaultNode:{type:f,size:W,style:rr,anchorPoints:xt,labelCfg:ht},defaultEdge:{type:x,style:qe},nodeStateStyles:Vr,edgeStateStyles:Tn,layout:ie}),Ha&&(Ha.current=il)),Q_(_e,il),il.data(t),il.render(),il.fitView(),Un&&il.on("node:click",function(Va){var Ua=Va.item;Va.target.get("name")==="collapse-icon"?(il.updateItem(Ua,{collapsed:!Ua.getModel().collapsed}),il.layout()):_i&&_i(Ua,il)}),il.on("edge:mouseenter",function(Va){var Ua=Va.item;il.setItemState(Ua,"hover",!0),Ti&&Ti(Ua,il)}),il.on("edge:mouseleave",function(Va){var Ua=Va.item;il.setItemState(Ua,"hover",!1),Li&&Li(Ua,il)}),il.on("edge:click",function(Va){var Ua=Va.item;Ei&&Ei(Ua,il)}),il.on("node:mouseenter",function(Va){var Ua=Va.item;il.setItemState(Ua,"hover",!1),bi&&bi(Ua,il)}),il.on("node:mouseleave",function(Va){var Ua=Va.item;il.setItemState(Ua,"hover",!1),Ba&&Ba(Ua,il)}),il.on("canvas:click",function(Va){La&&La(il)}),function(){return il.destroy()}},[]),nt.createElement(xs,null,nt.createElement("div",{className:e,style:n,ref:Ri}))},Ez=wz,rG={Area:OL,Bar:kL,Bubble:BL,Bullet:NL,Calendar:UL,Column:C3,ColumnLine:M3,DensityHeatmap:I3,Donut:E1,DualLine:WL,FanGauge:$L,Funnel:L3,Gauge:t5,GroupedBar:r5,GroupedColumn:k3,GroupedColumnLine:B3,GroupedRose:c,Heatmap:G,Histogram:Et,Line:De,Liquid:Wr,MeterGauge:Bn,PercentStackedArea:Ca,PercentStackedBar:Bo,PercentStackedColumn:Tp,Pie:s5,Progress:c5,Radar:uu,RangeBar:bl,RangeColumn:kC,RingProgress:DB,Rose:NB,Scatter:UB,StackedArea:HB,StackedBar:YB,StackedColumn:$B,StackedColumnLine:JB,StackedRose:r4,StepLine:a4,TinyArea:W3,TinyColumn:c4,TinyLine:p4,Treemap:g4,Waterfall:x4,WordCloud:w4,OrganizationTreeGraph:rz,DagreGraph:lz,IndentedTree:Ez,DagreFundFlowGraph:gz,G2:F}},64335:function(Vt,P,S){"use strict";var T=S(67294),j=(0,T.createContext)({});P.Z=j},21349:function(Vt,P,S){"use strict";var T=S(84305),j=S(73893),y=S(53645),U=S.n(y),F=S(67294),B=S(94184),R=S.n(B),N=S(64335),A=function(M){var O=(0,F.useContext)(N.Z),k=M.children,V=M.contentWidth,X=M.className,K=M.style,q=(0,F.useContext)(j.ZP.ConfigContext),ct=q.getPrefixCls,_t=M.prefixCls||ct("pro"),yt=V||O.contentWidth,lt="".concat(_t,"-grid-content");return F.createElement("div",{className:R()(lt,X,{wide:yt==="Fixed"}),style:K},F.createElement("div",{className:"".concat(_t,"-grid-content-children")},k))};P.Z=A},89939:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(15623),y=function(){function U(F){var B=F.xField,R=F.yField,N=F.adjustNames,A=N===void 0?["x","y"]:N,D=F.dimValuesMap;this.adjustNames=A,this.xField=B,this.yField=R,this.dimValuesMap=D}return U.prototype.isAdjust=function(F){return this.adjustNames.indexOf(F)>=0},U.prototype.getAdjustRange=function(F,B,R){var N=this.yField,A=R.indexOf(B),D=R.length,M,O;return!N&&this.isAdjust("y")?(M=0,O=1):D>1?(M=R[A===0?0:A-1],O=R[A===D-1?D-1:A+1],A!==0?M+=(B-M)/2:M-=(O-B)/2,A!==D-1?O-=(O-B)/2:O+=(B-R[D-2])/2):(M=B===0?0:B-.5,O=B===0?1:B+.5),{pre:M,next:O}},U.prototype.adjustData=function(F,B){var R=this,N=this.getDimValues(B);T.each(F,function(A,D){T.each(N,function(M,O){R.adjustDim(O,M,A,D)})})},U.prototype.groupData=function(F,B){return T.each(F,function(R){R[B]===void 0&&(R[B]=j.DEFAULT_Y)}),T.groupBy(F,B)},U.prototype.adjustDim=function(F,B,R,N){},U.prototype.getDimValues=function(F){var B=this,R=B.xField,N=B.yField,A=T.assign({},this.dimValuesMap),D=[];if(R&&this.isAdjust("x")&&D.push(R),N&&this.isAdjust("y")&&D.push(N),D.forEach(function(O){A&&A[O]||(A[O]=T.valuesOfKey(F,O).sort(function(k,V){return k-V}))}),!N&&this.isAdjust("y")){var M="y";A[M]=[j.DEFAULT_Y,1]}return A},U}();P.default=y},15623:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.GAP=P.DODGE_RATIO=P.MARGIN_RATIO=P.DEFAULT_Y=void 0,P.DEFAULT_Y=0,P.MARGIN_RATIO=1/2,P.DODGE_RATIO=1/2,P.GAP=.05},28014:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Adjust=P.registerAdjust=P.getAdjust=void 0;var T=S(60153),j=S(89939);P.Adjust=j.default;var y={},U=function(B){return y[B.toLowerCase()]};P.getAdjust=U;var F=function(B,R){if(U(B))throw new Error("Adjust type '"+B+"' existed.");y[B.toLowerCase()]=R};P.registerAdjust=F,T.__exportStar(S(48551),P)},48551:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0})},21392:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Attribute:function(){return U},Color:function(){return N},Opacity:function(){return D},Position:function(){return O},Scale:function(){return q.Scale},Shape:function(){return V},Size:function(){return K},getAttribute:function(){return _t},registerAttribute:function(){return yt}});var T=S(49242),j=function(lt,Lt){return(0,T.isString)(Lt)?Lt:lt.invert(lt.scale(Lt))},y=function(){function lt(Lt){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(Lt)}return lt.prototype.mapping=function(){for(var Lt=this,wt=[],Gt=0;Gt<arguments.length;Gt++)wt[Gt]=arguments[Gt];var re=wt.map(function(Qt,it){return Lt._toOriginParam(Qt,Lt.scales[it])});return this.callback.apply(this,re)},lt.prototype.getLinearValue=function(Lt){var wt=this.values.length-1,Gt=Math.floor(wt*Lt),re=wt*Lt-Gt,Qt=this.values[Gt],it=Gt===wt?Qt:this.values[Gt+1];return Qt+(it-Qt)*re},lt.prototype.getNames=function(){for(var Lt=this.scales,wt=this.names,Gt=Math.min(Lt.length,wt.length),re=[],Qt=0;Qt<Gt;Qt+=1)re.push(wt[Qt]);return re},lt.prototype.getFields=function(){return this.scales.map(function(Lt){return Lt.field})},lt.prototype.getScale=function(Lt){return this.scales[this.names.indexOf(Lt)]},lt.prototype.defaultCallback=function(){for(var Lt=this,wt=[],Gt=0;Gt<arguments.length;Gt++)wt[Gt]=arguments[Gt];return wt.length===0?this.values:wt.map(function(re,Qt){var it=Lt.scales[Qt];return it.type==="identity"?it.values[0]:Lt._getAttributeValue(it,re)})},lt.prototype._parseCfg=function(Lt){var wt=this,Gt=Lt.type,re=Gt===void 0?"base":Gt,Qt=Lt.names,it=Qt===void 0?[]:Qt,dt=Lt.scales,gt=dt===void 0?[]:dt,vt=Lt.values,Y=vt===void 0?[]:vt,ot=Lt.callback;this.type=re,this.scales=gt,this.values=Y,this.names=it,this.callback=function(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt[rt]=arguments[rt];if(ot){var st=ot.apply(void 0,nt);if(!(0,T.isNil)(st))return[st]}return wt.defaultCallback.apply(wt,nt)}},lt.prototype._getAttributeValue=function(Lt,wt){if(Lt.isCategory&&!this.linear){var Gt=Lt.translate(wt);return this.values[Gt%this.values.length]}var re=Lt.scale(wt);return this.getLinearValue(re)},lt.prototype._toOriginParam=function(Lt,wt){return wt.isLinear?Lt:(0,T.isArray)(Lt)?Lt.map(function(Gt){return j(wt,Gt)}):j(wt,Lt)},lt}(),U=y,F=S(60153),B=S(55223),R=function(lt){(0,F.__extends)(Lt,lt);function Lt(wt){var Gt=lt.call(this,wt)||this;return Gt.type="color",Gt.names=["color"],(0,T.isString)(Gt.values)&&(Gt.linear=!0),Gt.gradient=B.default.gradient(Gt.values),Gt}return Lt.prototype.getLinearValue=function(wt){return this.gradient(wt)},Lt}(U),N=R,A=function(lt){(0,F.__extends)(Lt,lt);function Lt(wt){var Gt=lt.call(this,wt)||this;return Gt.type="opacity",Gt.names=["opacity"],Gt}return Lt}(U),D=A,M=function(lt){(0,F.__extends)(Lt,lt);function Lt(wt){var Gt=lt.call(this,wt)||this;return Gt.names=["x","y"],Gt.type="position",Gt}return Lt.prototype.mapping=function(wt,Gt){var re=this.scales,Qt=re[0],it=re[1];return(0,T.isNil)(wt)||(0,T.isNil)(Gt)?[]:[(0,T.isArray)(wt)?wt.map(function(dt){return Qt.scale(dt)}):Qt.scale(wt),(0,T.isArray)(Gt)?Gt.map(function(dt){return it.scale(dt)}):it.scale(Gt)]},Lt}(U),O=M,k=function(lt){(0,F.__extends)(Lt,lt);function Lt(wt){var Gt=lt.call(this,wt)||this;return Gt.type="shape",Gt.names=["shape"],Gt}return Lt.prototype.getLinearValue=function(wt){var Gt=Math.round((this.values.length-1)*wt);return this.values[Gt]},Lt}(U),V=k,X=function(lt){(0,F.__extends)(Lt,lt);function Lt(wt){var Gt=lt.call(this,wt)||this;return Gt.type="size",Gt.names=["size"],Gt}return Lt}(U),K=X,q=S(2443),ct={},_t=function(lt){return ct[lt.toLowerCase()]},yt=function(lt,Lt){if(_t(lt))throw new Error("Attribute type '"+lt+"' existed.");ct[lt.toLowerCase()]=Lt};yt("Color",N),yt("Opacity",D),yt("Position",O),yt("Shape",V),yt("Size",K)},74839:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=function(U,F){return T.isString(F)?F:U.invert(U.scale(F))},y=function(){function U(F){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(F)}return U.prototype.mapping=function(){for(var F=this,B=[],R=0;R<arguments.length;R++)B[R]=arguments[R];var N=B.map(function(A,D){return F._toOriginParam(A,F.scales[D])});return this.callback.apply(this,N)},U.prototype.getLinearValue=function(F){var B=this.values.length-1,R=Math.floor(B*F),N=B*F-R,A=this.values[R],D=R===B?A:this.values[R+1];return A+(D-A)*N},U.prototype.getNames=function(){for(var F=this.scales,B=this.names,R=Math.min(F.length,B.length),N=[],A=0;A<R;A+=1)N.push(B[A]);return N},U.prototype.getFields=function(){return this.scales.map(function(F){return F.field})},U.prototype.getScale=function(F){return this.scales[this.names.indexOf(F)]},U.prototype.defaultCallback=function(){for(var F=this,B=[],R=0;R<arguments.length;R++)B[R]=arguments[R];return B.length===0?this.values:B.map(function(N,A){var D=F.scales[A];return D.type==="identity"?D.values[0]:F._getAttributeValue(D,N)})},U.prototype._parseCfg=function(F){var B=this,R=F.type,N=R===void 0?"base":R,A=F.names,D=A===void 0?[]:A,M=F.scales,O=M===void 0?[]:M,k=F.values,V=k===void 0?[]:k,X=F.callback;this.type=N,this.scales=O,this.values=V,this.names=D,this.callback=function(){for(var K=[],q=0;q<arguments.length;q++)K[q]=arguments[q];if(X){var ct=X.apply(void 0,K);if(!T.isNil(ct))return[ct]}return B.defaultCallback.apply(B,K)}},U.prototype._getAttributeValue=function(F,B){if(F.isCategory&&!this.linear){var R=F.translate(B);return this.values[R%this.values.length]}var N=F.scale(B);return this.getLinearValue(N)},U.prototype._toOriginParam=function(F,B){return B.isLinear?F:T.isArray(F)?F.map(function(R){return j(B,R)}):j(B,F)},U}();P.default=y},24796:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(60153),j=S(74839);P.Attribute=j.default;var y={},U=function(B){return y[B.toLowerCase()]};P.getAttribute=U;var F=function(B,R){if(U(B))throw new Error("Attribute type '"+B+"' existed.");y[B.toLowerCase()]=R};P.registerAttribute=F,T.__exportStar(S(77290),P)},77290:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(2443);P.Scale=T.Scale},55223:function(Vt,P,S){"use strict";S.r(P);var T=S(49242),j=/rgba?\(([\s.,0-9]+)\)/,y=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,U=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,F=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,B=function(q){return/^[r,R,L,l]{1}[\s]*\(/.test(q)},R=function(){var q=document.createElement("i");return q.title="Web Colour Picker",q.style.display="none",document.body.appendChild(q),q},N=function(q,ct,_t,yt){return q[yt]+(ct[yt]-q[yt])*_t};function A(q){return"#"+M(q[0])+M(q[1])+M(q[2])}var D=function(q){return[parseInt(q.substr(1,2),16),parseInt(q.substr(3,2),16),parseInt(q.substr(5,2),16)]},M=function(q){var ct=Math.round(q).toString(16);return ct.length===1?"0"+ct:ct},O=function(q,ct){var _t=isNaN(Number(ct))||ct<0?0:ct>1?1:Number(ct),yt=q.length-1,lt=Math.floor(yt*_t),Lt=yt*_t-lt,wt=q[lt],Gt=lt===yt?wt:q[lt+1];return A([N(wt,Gt,Lt,0),N(wt,Gt,Lt,1),N(wt,Gt,Lt,2)])},k,V=function(q){if(q[0]==="#"&&q.length===7)return q;k||(k=R()),k.style.color=q;var ct=document.defaultView.getComputedStyle(k,"").getPropertyValue("color"),_t=j.exec(ct),yt=_t[1].split(/\s*,\s*/).map(function(lt){return Number(lt)});return ct=A(yt),ct},X=function(q){var ct=(0,T.isString)(q)?q.split("-"):q,_t=(0,T.map)(ct,function(yt){return D(yt.indexOf("#")===-1?V(yt):yt)});return function(yt){return O(_t,yt)}},K=function(q){if(B(q)){var ct,_t=void 0;if(q[0]==="l"){var yt=y.exec(q),lt=+yt[1]+90;_t=yt[2],ct="linear-gradient("+lt+"deg, "}else if(q[0]==="r"){ct="radial-gradient(";var yt=U.exec(q);_t=yt[4]}var Lt=_t.match(F);return(0,T.each)(Lt,function(wt,Gt){var re=wt.split(":");ct+=re[1]+" "+re[0]*100+"%",Gt!==Lt.length-1&&(ct+=", ")}),ct+=")",ct}return q};P.default={rgb2arr:D,gradient:X,toRGB:(0,T.memoize)(V),toCSSGradient:K}},51441:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Annotation:function(){return T},Axis:function(){return B},Component:function(){return Ut},Crosshair:function(){return R},Grid:function(){return N},GroupComponent:function(){return Nt},HtmlComponent:function(){return An},Legend:function(){return A},Scrollbar:function(){return Cs},Slider:function(){return Fa},Tooltip:function(){return M}});var T={};S.r(T),S.d(T,{Arc:function(){return to},DataMarker:function(){return Ar},DataRegion:function(){return nn},Image:function(){return We},Line:function(){return Kn},Region:function(){return Ui},RegionFilter:function(){return le},Text:function(){return wi}});var j={};S.r(j),S.d(j,{ellipsisHead:function(){return lr},ellipsisMiddle:function(){return tr},ellipsisTail:function(){return Be},getDefault:function(){return or}});var y={};S.r(y),S.d(y,{equidistance:function(){return Jr},getDefault:function(){return tn},reserveBoth:function(){return si},reserveFirst:function(){return _n},reserveLast:function(){return $n}});var U={};S.r(U),S.d(U,{fixedAngle:function(){return Ka},getDefault:function(){return yi},unfixedAngle:function(){return ki}});var F={};S.r(F),S.d(F,{autoEllipsis:function(){return j},autoHide:function(){return y},autoRotate:function(){return U}});var B={};S.r(B),S.d(B,{Base:function(){return Te},Circle:function(){return po},Line:function(){return ko}});var R={};S.r(R),S.d(R,{Base:function(){return cn},Circle:function(){return fo},Html:function(){return de},Line:function(){return Wo}});var N={};S.r(N),S.d(N,{Base:function(){return Ae},Circle:function(){return Lr},Line:function(){return Kr}});var A={};S.r(A),S.d(A,{Base:function(){return pi},Category:function(){return ca},Continuous:function(){return Fe}});var D={};S.r(D),S.d(D,{CONTAINER_CLASS:function(){return Ir},CROSSHAIR_X:function(){return ps},CROSSHAIR_Y:function(){return Ks},LIST_CLASS:function(){return ci},LIST_ITEM_CLASS:function(){return wa},MARKER_CLASS:function(){return no},NAME_CLASS:function(){return Jo},TITLE_CLASS:function(){return hn},VALUE_CLASS:function(){return ls}});var M={};S.r(M),S.d(M,{Html:function(){return ou}});var O=S(60153),k=S(49242),V=S(66192);function X(Ve,pe,pt){var Ot=new V.default(pe,pt);Ot.target=Ve,Ot.propagationPath.push(Ve),Ve.emitDelegation(pe,Ot);for(var ee=Ve.getParent();ee;)ee.emitDelegation(pe,Ot),Ot.propagationPath.push(ee),ee=ee.getParent()}var K=S(31506),q=S(31437),ct=[1,0,0,0,1,0,0,0,1];function _t(Ve,pe,pt){if(pt===void 0&&(pt=ct),!pe)return null;var Ot=K.transform(pt,[["t",-Ve.x,-Ve.y],["r",pe],["t",Ve.x,Ve.y]]);return Ot}function yt(Ve,pe){return!Ve.x&&!Ve.y?null:K.transform(pe||ct,[["t",Ve.x,Ve.y]])}function lt(Ve){var pe=[1,0,0],pt=[0,0,0];return vec3.transformMat3(pt,pe,Ve),Math.atan2(pt[1],pt[0])}function Lt(Ve,pe){var pt=[0,0];return q.transformMat3(pt,pe,Ve),pt}function wt(Ve,pe){var pt=Lt(Ve,[pe.minX,pe.minY]),Ot=Lt(Ve,[pe.maxX,pe.minY]),ee=Lt(Ve,[pe.minX,pe.maxY]),ye=Lt(Ve,[pe.maxX,pe.maxY]),Ne=Math.min(pt[0],Ot[0],ee[0],ye[0]),Ye=Math.max(pt[0],Ot[0],ee[0],ye[0]),hr=Math.min(pt[1],Ot[1],ee[1],ye[1]),Er=Math.max(pt[1],Ot[1],ee[1],ye[1]);return{x:Ne,y:hr,minX:Ne,minY:hr,maxX:Ye,maxY:Er,width:Ye-Ne,height:Er-hr}}function Gt(Ve,pe,pt,Ot){if(pe){var ee=_t({x:pt,y:Ot},pe,Ve.getMatrix());Ve.setMatrix(ee)}}function re(Ve,pe,pt){var Ot=yt({x:pe,y:pt});Ve.attr("matrix",Ot)}function Qt(Ve){var pe=0,pt=0,Ot=0,ee=0;return(0,k.isNumber)(Ve)?pe=pt=Ot=ee=Ve:(0,k.isArray)(Ve)&&(pe=Ve[0],Ot=(0,k.isNil)(Ve[1])?Ve[0]:Ve[1],ee=(0,k.isNil)(Ve[2])?Ve[0]:Ve[2],pt=(0,k.isNil)(Ve[3])?Ot:Ve[3]),[pe,Ot,ee,pt]}function it(Ve){for(var pe=Ve.childNodes,pt=pe.length,Ot=pt-1;Ot>=0;Ot--)Ve.removeChild(pe[Ot])}function dt(Ve,pe){return!!Ve.className.match(new RegExp("(\\s|^)"+pe+"(\\s|$)"))}function gt(Ve){var pe=Ve.start,pt=Ve.end,Ot=Math.min(pe.x,pt.x),ee=Math.min(pe.y,pt.y),ye=Math.max(pe.x,pt.x),Ne=Math.max(pe.y,pt.y);return{x:Ot,y:ee,minX:Ot,minY:ee,maxX:ye,maxY:Ne,width:ye-Ot,height:Ne-ee}}function vt(Ve){var pe=Ve.map(function(Ye){return Ye.x}),pt=Ve.map(function(Ye){return Ye.y}),Ot=Math.min.apply(Math,pe),ee=Math.min.apply(Math,pt),ye=Math.max.apply(Math,pe),Ne=Math.max.apply(Math,pt);return{x:Ot,y:ee,minX:Ot,minY:ee,maxX:ye,maxY:Ne,width:ye-Ot,height:Ne-ee}}function Y(Ve,pe,pt,Ot){return{x:Ve,y:pe,width:pt,height:Ot,minX:Ve,minY:pe,maxX:Ve+pt,maxY:pe+Ot}}function ot(Ve,pe,pt){return(1-pt)*Ve+pe*pt}function nt(Ve,pe,pt){return{x:Ve.x+Math.cos(pt)*pe,y:Ve.y+Math.sin(pt)*pe}}function rt(Ve,pe){var pt=pe.x-Ve.x,Ot=pe.y-Ve.y;return Math.sqrt(pt*pt+Ot*Ot)}var st=function(Ve){return new Promise(function(pe){setTimeout(pe,Ve)})},d=function(Ve,pe){return[Ve,pe].includes(Infinity)?Math.abs(Ve)===Math.abs(pe):Math.abs(Ve-pe)<Math.pow(Number.EPSILON,.5)};function It(Ve,pe){var pt=Math.max(Ve.minX,pe.minX),Ot=Math.max(Ve.minY,pe.minY),ee=Math.min(Ve.maxX,pe.maxX),ye=Math.min(Ve.maxY,pe.maxY);return Y(pt,Ot,ee-pt,ye-Ot)}function Ht(Ve,pe){var pt=Math.min(Ve.minX,pe.minX),Ot=Math.min(Ve.minY,pe.minY),ee=Math.max(Ve.maxX,pe.maxX),ye=Math.max(Ve.maxY,pe.maxY);return Y(pt,Ot,ee-pt,ye-Ot)}function kt(Ve){var pe=Ve.getClip(),pt=pe&&pe.getBBox(),Ot;if(!Ve.isGroup())Ot=Ve.getBBox();else{var ee=Infinity,ye=-Infinity,Ne=Infinity,Ye=-Infinity,hr=Ve.getChildren();hr.length>0?(0,k.each)(hr,function(Er){if(Er.get("visible")){if(Er.isGroup()&&Er.get("children").length===0)return!0;var Hr=kt(Er),bn=Er.applyToMatrix([Hr.minX,Hr.minY,1]),ri=Er.applyToMatrix([Hr.minX,Hr.maxY,1]),qn=Er.applyToMatrix([Hr.maxX,Hr.minY,1]),da=Er.applyToMatrix([Hr.maxX,Hr.maxY,1]),Ya=Math.min(bn[0],ri[0],qn[0],da[0]),Ra=Math.max(bn[0],ri[0],qn[0],da[0]),ts=Math.min(bn[1],ri[1],qn[1],da[1]),$o=Math.max(bn[1],ri[1],qn[1],da[1]);Ya<ee&&(ee=Ya),Ra>ye&&(ye=Ra),ts<Ne&&(Ne=ts),$o>Ye&&(Ye=$o)}}):(ee=0,ye=0,Ne=0,Ye=0),Ot=Y(ee,Ne,ye-ee,Ye-Ne)}return pt?It(Ot,pt):Ot}function Xt(Ve,pe){if(!(!Ve.getClip()&&!pe.getClip())){var pt=pe.getClip();if(!pt){Ve.setClip(null);return}var Ot={type:pt.get("type"),attrs:pt.attr()};Ve.setClip(Ot)}}function Kt(Ve){return Ve+"px"}function Jt(Ve,pe,pt,Ot){var ee=rt(Ve,pe),ye=Ot/ee,Ne=0;return pt==="start"?Ne=0-ye:pt==="end"&&(Ne=1+ye),{x:ot(Ve.x,pe.x,Ne),y:ot(Ve.y,pe.y,Ne)}}var ue=S(39014),ce={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},$t=function(Ve){(0,O.__extends)(pe,Ve);function pe(pt){var Ot=Ve.call(this,pt)||this;return Ot.initCfg(),Ot}return pe.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},pe.prototype.clear=function(){},pe.prototype.update=function(pt){var Ot=this,ee=this.get("defaultCfg");(0,k.each)(pt,function(ye,Ne){var Ye=Ot.get(Ne),hr=ye;Ye!==ye&&((0,k.isObject)(ye)&&ee[Ne]&&(hr=(0,k.deepMix)({},ee[Ne],ye)),Ot.set(Ne,hr))}),this.updateInner(pt),this.afterUpdate(pt)},pe.prototype.updateInner=function(pt){},pe.prototype.afterUpdate=function(pt){(0,k.hasKey)(pt,"visible")&&(pt.visible?this.show():this.hide()),(0,k.hasKey)(pt,"capture")&&this.setCapture(pt.capture)},pe.prototype.getLayoutBBox=function(){return this.getBBox()},pe.prototype.getLocationType=function(){return this.get("locationType")},pe.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},pe.prototype.setOffset=function(pt,Ot){this.update({offsetX:pt,offsetY:Ot})},pe.prototype.setLocation=function(pt){var Ot=(0,O.__assign)({},pt);this.update(Ot)},pe.prototype.getLocation=function(){var pt=this,Ot={},ee=this.get("locationType"),ye=ce[ee];return(0,k.each)(ye,function(Ne){Ot[Ne]=pt.get(Ne)}),Ot},pe.prototype.isList=function(){return!1},pe.prototype.isSlider=function(){return!1},pe.prototype.init=function(){},pe.prototype.initCfg=function(){var pt=this,Ot=this.get("defaultCfg");(0,k.each)(Ot,function(ee,ye){var Ne=pt.get(ye);if((0,k.isObject)(Ne)){var Ye=(0,k.deepMix)({},ee,Ne);pt.set(ye,Ye)}})},pe}(ue.Base),Ut=$t,Rt="update_status",Pt=["visible","tip","delegateObject"],Yt=["container","group","shapesMap","isRegister","isUpdating","destroyed"],Dt=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},pe.prototype.remove=function(){this.clear();var pt=this.get("group");pt.remove()},pe.prototype.clear=function(){var pt=this.get("group");pt.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},pe.prototype.getChildComponentById=function(pt){var Ot=this.getElementById(pt),ee=Ot&&Ot.get("component");return ee},pe.prototype.getElementById=function(pt){return this.get("shapesMap")[pt]},pe.prototype.getElementByLocalId=function(pt){var Ot=this.getElementId(pt);return this.getElementById(Ot)},pe.prototype.getElementsByName=function(pt){var Ot=[];return(0,k.each)(this.get("shapesMap"),function(ee){ee.get("name")===pt&&Ot.push(ee)}),Ot},pe.prototype.getContainer=function(){return this.get("container")},pe.prototype.updateInner=function(pt){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},pe.prototype.render=function(){var pt=this.get("offScreenGroup");pt||(pt=this.offScreenRender());var Ot=this.get("group");this.updateElements(pt,Ot),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},pe.prototype.show=function(){var pt=this.get("group");pt.show(),this.set("visible",!0)},pe.prototype.hide=function(){var pt=this.get("group");pt.hide(),this.set("visible",!1)},pe.prototype.setCapture=function(pt){var Ot=this.get("group");Ot.set("capture",pt),this.set("capture",pt)},pe.prototype.destroy=function(){this.removeEvent(),this.remove(),Ve.prototype.destroy.call(this)},pe.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},pe.prototype.getLayoutBBox=function(){var pt=this.get("group"),Ot=this.getInnerLayoutBBox(),ee=pt.getTotalMatrix();return ee&&(Ot=wt(ee,Ot)),Ot},pe.prototype.on=function(pt,Ot,ee){var ye=this.get("group");return ye.on(pt,Ot,ee),this},pe.prototype.off=function(pt,Ot){var ee=this.get("group");return ee&&ee.off(pt,Ot),this},pe.prototype.emit=function(pt,Ot){var ee=this.get("group");ee.emit(pt,Ot)},pe.prototype.init=function(){Ve.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},pe.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},pe.prototype.delegateEmit=function(pt,Ot){var ee=this.get("group");Ot.target=ee,ee.emit(pt,Ot),X(ee,pt,Ot)},pe.prototype.createOffScreenGroup=function(){var pt=this.get("group"),Ot=pt.getGroupBase(),ee=new Ot({delegateObject:this.getDelegateObject()});return ee},pe.prototype.applyOffset=function(){var pt=this.get("offsetX"),Ot=this.get("offsetY");this.moveElementTo(this.get("group"),{x:pt,y:Ot})},pe.prototype.initGroup=function(){var pt=this.get("container");this.set("group",pt.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},pe.prototype.offScreenRender=function(){this.clearOffScreenCache();var pt=this.createOffScreenGroup();return this.renderInner(pt),this.set("offScreenGroup",pt),this.set("offScreenBBox",kt(pt)),pt},pe.prototype.addGroup=function(pt,Ot){this.appendDelegateObject(pt,Ot);var ee=pt.addGroup(Ot);return this.get("isRegister")&&this.registerElement(ee),ee},pe.prototype.addShape=function(pt,Ot){this.appendDelegateObject(pt,Ot);var ee=pt.addShape(Ot);return this.get("isRegister")&&this.registerElement(ee),ee},pe.prototype.addComponent=function(pt,Ot){var ee=Ot.id,ye=Ot.component,Ne=(0,O.__rest)(Ot,["id","component"]),Ye=new ye((0,O.__assign)((0,O.__assign)({},Ne),{id:ee,container:pt,updateAutoRender:this.get("updateAutoRender")}));return Ye.init(),Ye.render(),this.get("isRegister")&&this.registerElement(Ye.get("group")),Ye},pe.prototype.initEvent=function(){},pe.prototype.removeEvent=function(){var pt=this.get("group");pt.off()},pe.prototype.getElementId=function(pt){var Ot=this.get("id"),ee=this.get("name");return Ot+"-"+ee+"-"+pt},pe.prototype.registerElement=function(pt){var Ot=pt.get("id");this.get("shapesMap")[Ot]=pt},pe.prototype.unregisterElement=function(pt){var Ot=pt.get("id");delete this.get("shapesMap")[Ot]},pe.prototype.moveElementTo=function(pt,Ot){var ee=yt(Ot);pt.attr("matrix",ee)},pe.prototype.addAnimation=function(pt,Ot,ee){var ye=Ot.attr("opacity");(0,k.isNil)(ye)&&(ye=1),Ot.attr("opacity",0),Ot.animate({opacity:ye},ee)},pe.prototype.removeAnimation=function(pt,Ot,ee){Ot.animate({opacity:0},ee)},pe.prototype.updateAnimation=function(pt,Ot,ee,ye){Ot.animate(ee,ye)},pe.prototype.updateElements=function(pt,Ot){var ee=this,ye=this.get("animate"),Ne=this.get("animateOption"),Ye=pt.getChildren().slice(0),hr;(0,k.each)(Ye,function(Er){var Hr=Er.get("id"),bn=ee.getElementById(Hr),ri=Er.get("name");if(bn)if(Er.get("isComponent")){var qn=Er.get("component"),da=bn.get("component"),Ya=(0,k.pick)(qn.cfg,(0,k.difference)((0,k.keys)(qn.cfg),Yt));da.update(Ya),bn.set(Rt,"update")}else{var Ra=ee.getReplaceAttrs(bn,Er);ye&&Ne.update?ee.updateAnimation(ri,bn,Ra,Ne.update):bn.attr(Ra),Er.isGroup()&&ee.updateElements(Er,bn),(0,k.each)(Pt,function(Le){bn.set(Le,Er.get(Le))}),Xt(bn,Er),hr=bn,bn.set(Rt,"update")}else{Ot.add(Er);var ts=Ot.getChildren();if(ts.splice(ts.length-1,1),hr){var $o=ts.indexOf(hr);ts.splice($o+1,0,Er)}else ts.unshift(Er);if(ee.registerElement(Er),Er.set(Rt,"add"),Er.get("isComponent")){var qn=Er.get("component");qn.set("container",Ot)}else Er.isGroup()&&ee.registerNewGroup(Er);if(hr=Er,ye){var Aa=ee.get("isInit")?Ne.appear:Ne.enter;Aa&&ee.addAnimation(ri,Er,Aa)}}})},pe.prototype.clearUpdateStatus=function(pt){var Ot=pt.getChildren();(0,k.each)(Ot,function(ee){ee.set(Rt,null)})},pe.prototype.clearOffScreenCache=function(){var pt=this.get("offScreenGroup");pt&&pt.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},pe.prototype.getDelegateObject=function(){var pt,Ot=this.get("name"),ee=(pt={},pt[Ot]=this,pt.component=this,pt);return ee},pe.prototype.appendDelegateObject=function(pt,Ot){var ee=pt.get("delegateObject");Ot.delegateObject||(Ot.delegateObject={}),(0,k.mix)(Ot.delegateObject,ee)},pe.prototype.getReplaceAttrs=function(pt,Ot){var ee=pt.attr(),ye=Ot.attr();return(0,k.each)(ee,function(Ne,Ye){ye[Ye]===void 0&&(ye[Ye]=void 0)}),ye},pe.prototype.registerNewGroup=function(pt){var Ot=this,ee=pt.getChildren();(0,k.each)(ee,function(ye){Ot.registerElement(ye),ye.set(Rt,"add"),ye.isGroup()&&Ot.registerNewGroup(ye)})},pe.prototype.deleteElements=function(){var pt=this,Ot=this.get("shapesMap"),ee=[];(0,k.each)(Ot,function(Ye,hr){!Ye.get(Rt)||Ye.destroyed?ee.push([hr,Ye]):Ye.set(Rt,null)});var ye=this.get("animate"),Ne=this.get("animateOption");(0,k.each)(ee,function(Ye){var hr=Ye[0],Er=Ye[1];if(!Er.destroyed){var Hr=Er.get("name");if(ye&&Ne.leave){var bn=(0,k.mix)({callback:function(){pt.removeElement(Er)}},Ne.leave);pt.removeAnimation(Hr,Er,bn)}else pt.removeElement(Er)}delete Ot[hr]})},pe.prototype.removeElement=function(pt){if(pt.get("isGroup")){var Ot=pt.get("component");Ot&&Ot.destroy()}pt.remove()},pe}(Ut),Nt=Dt,ne="\u2026";function ve(Ve){for(var pe=0,pt=0;pt<Ve.length;pt++)pe+=Re(Ve,pt);return pe}function Re(Ve,pe){return Ve.charCodeAt(pe)>0&&Ve.charCodeAt(pe)<128?1:2}function je(Ve,pe,pt){pt===void 0&&(pt="tail");var Ot=Ve.length,ee="";if(pt==="tail"){for(var ye=0,Ne=0;ye<pe;){var Ye=Re(Ve,Ne);if(ye+Ye<=pe)ee+=Ve[Ne],ye+=Re(Ve,Ne),Ne++;else break}ee+=ne}else if(pt==="head"){for(var ye=0,Ne=Ot-1;ye<pe;){var Ye=Re(Ve,Ne);if(ye+Ye<=pe)ee+=Ve[Ne],ye+=Re(Ve,Ne),Ne--;else break}ee=ne+ee}else{for(var hr="",Er="",ye=0,Hr=0,bn=Ot-1;ye<pe;){var ri=Re(Ve,Hr),qn=!1;ri+ye<=pe&&(hr+=Ve[Hr],Hr++,ye+=ri,qn=!0);var da=Re(Ve,bn);if(da+ye<=pe&&(Er=Ve[bn]+Er,ye+=da,bn--,qn=!0),!qn)break}ee=hr+ne+Er}return ee}var Cr="\u2026",$r=2;function Qr(Ve){var pe=0;return(0,k.each)(Ve,function(pt){var Ot=pt.getBBox(),ee=Ot.width;pe<ee&&(pe=ee)}),pe}function Ee(Ve,pe){var pt=pe.getCanvasBBox();return Ve?pt.width:pt.height}function yn(Ve,pe){return Ve.getBBox().width<pe}function ui(Ve,pe,pt,Ot){Ot===void 0&&(Ot="tail");var ee=pe.attr("text"),ye=Ee(Ve,pe),Ne=ve(ee),Ye=!1;if(pt<ye){var hr=Math.floor(pt/ye*Ne)-$r,Er=void 0;hr>=0?Er=je(ee,hr,Ot):Er=Cr,Er&&(pe.attr("text",Er),Ye=!0)}return Ye?pe.set("tip",ee):pe.set("tip",null),Ye}function la(Ve,pe){var pt=pe.x,Ot=pe.y,ee=pe.content,ye=pe.style,Ne=pe.id,Ye=pe.name,hr=pe.rotate,Er=pe.maxLength,Hr=pe.autoEllipsis,bn=pe.isVertical,ri=pe.ellipsisPosition,qn=pe.background,da=Ve.addGroup({id:Ne+"-group",name:Ye+"-group",attrs:{x:pt,y:Ot}}),Ya=da.addShape({type:"text",id:Ne,name:Ye,attrs:(0,O.__assign)({x:0,y:0,text:ee},ye)}),Ra=Qt((0,k.get)(qn,"padding",0));if(Er&&Hr){var ts=Er-(Ra[1]+Ra[3]);ui(!bn,Ya,ts,ri)}if(qn){var $o=(0,k.get)(qn,"style",{}),Aa=Ya.getCanvasBBox(),Le=Aa.minX,gr=Aa.minY,Dr=Aa.width,on=Aa.height,Yn=da.addShape("rect",{id:Ne+"-bg",name:Ne+"-bg",attrs:(0,O.__assign)({x:Le-Ra[3],y:gr-Ra[0],width:Dr+Ra[1]+Ra[3],height:on+Ra[0]+Ra[2]},$o)});Yn.toBack()}re(da,pt,Ot),Gt(da,hr,pt,Ot)}var Or={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},ln=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Or.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Or.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Or.lineColor,lineWidth:1}}}})},pe.prototype.renderInner=function(pt){this.renderLine(pt),this.get("text")&&this.renderLabel(pt)},pe.prototype.renderLine=function(pt){var Ot=this.get("start"),ee=this.get("end"),ye=this.get("style");this.addShape(pt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,O.__assign)({x1:Ot.x,y1:Ot.y,x2:ee.x,y2:ee.y},ye)})},pe.prototype.getLabelPoint=function(pt,Ot,ee){var ye;return ee==="start"?ye=0:ee==="center"?ye=.5:(0,k.isString)(ee)&&ee.indexOf("%")!==-1?ye=parseInt(ee,10)/100:(0,k.isNumber)(ee)?ye=ee:ye=1,(ye>1||ye<0)&&(ye=1),{x:ot(pt.x,Ot.x,ye),y:ot(pt.y,Ot.y,ye)}},pe.prototype.renderLabel=function(pt){var Ot=this.get("text"),ee=this.get("start"),ye=this.get("end"),Ne=Ot.position,Ye=Ot.content,hr=Ot.style,Er=Ot.offsetX,Hr=Ot.offsetY,bn=Ot.autoRotate,ri=Ot.maxLength,qn=Ot.autoEllipsis,da=Ot.ellipsisPosition,Ya=Ot.background,Ra=Ot.isVertical,ts=Ra===void 0?!1:Ra,$o=this.getLabelPoint(ee,ye,Ne),Aa=$o.x+Er,Le=$o.y+Hr,gr={id:this.getElementId("line-text"),name:"annotation-line-text",x:Aa,y:Le,content:Ye,style:hr,maxLength:ri,autoEllipsis:qn,ellipsisPosition:da,background:Ya,isVertical:ts};if(bn){var Dr=[ye.x-ee.x,ye.y-ee.y];gr.rotate=Math.atan2(Dr[1],Dr[0])}la(pt,gr)},pe}(Nt),Kn=ln,jn=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Or.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Or.fontFamily}}})},pe.prototype.setLocation=function(pt){this.set("x",pt.x),this.set("y",pt.y),this.resetLocation()},pe.prototype.renderInner=function(pt){var Ot=this.getLocation(),ee=Ot.x,ye=Ot.y,Ne=this.get("content"),Ye=this.get("style"),hr=this.getElementId("text"),Er=this.get("name")+"-text",Hr=this.get("maxLength"),bn=this.get("autoEllipsis"),ri=this.get("isVertical"),qn=this.get("ellipsisPosition"),da=this.get("background"),Ya=this.get("rotate"),Ra={id:hr,name:Er,x:ee,y:ye,content:Ne,style:Ye,maxLength:Hr,autoEllipsis:bn,isVertical:ri,ellipsisPosition:qn,background:da,rotate:Ya};la(pt,Ra)},pe.prototype.resetLocation=function(){var pt=this.getElementByLocalId("text-group");if(pt){var Ot=this.getLocation(),ee=Ot.x,ye=Ot.y,Ne=this.get("rotate");re(pt,ee,ye),Gt(pt,Ne,ee,ye)}},pe}(Nt),wi=jn,Sa=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},pe.prototype.renderInner=function(pt){this.renderArc(pt)},pe.prototype.getArcPath=function(){var pt=this.getLocation(),Ot=pt.center,ee=pt.radius,ye=pt.startAngle,Ne=pt.endAngle,Ye=nt(Ot,ee,ye),hr=nt(Ot,ee,Ne),Er=Ne-ye>Math.PI?1:0,Hr=[["M",Ye.x,Ye.y]];if(Ne-ye==Math.PI*2){var bn=nt(Ot,ee,ye+Math.PI);Hr.push(["A",ee,ee,0,Er,1,bn.x,bn.y]),Hr.push(["A",ee,ee,0,Er,1,hr.x,hr.y])}else Hr.push(["A",ee,ee,0,Er,1,hr.x,hr.y]);return Hr},pe.prototype.renderArc=function(pt){var Ot=this.getArcPath(),ee=this.get("style");this.addShape(pt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,O.__assign)({path:Ot},ee)})},pe}(Nt),to=Sa,qa=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Or.regionColor,opacity:.4}}})},pe.prototype.renderInner=function(pt){this.renderRegion(pt)},pe.prototype.renderRegion=function(pt){var Ot=this.get("start"),ee=this.get("end"),ye=this.get("style"),Ne=gt({start:Ot,end:ee});this.addShape(pt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,O.__assign)({x:Ne.x,y:Ne.y,width:Ne.width,height:Ne.height},ye)})},pe}(Nt),Ui=qa,Ue=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},pe.prototype.renderInner=function(pt){this.renderImage(pt)},pe.prototype.getImageAttrs=function(){var pt=this.get("start"),Ot=this.get("end"),ee=this.get("style"),ye=gt({start:pt,end:Ot}),Ne=this.get("src");return(0,O.__assign)({x:ye.x,y:ye.y,img:Ne,width:ye.width,height:ye.height},ee)},pe.prototype.renderImage=function(pt){this.addShape(pt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},pe}(Nt),We=Ue,fr=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Or.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Or.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Or.fontFamily}}}})},pe.prototype.renderInner=function(pt){(0,k.get)(this.get("line"),"display")&&this.renderLine(pt),(0,k.get)(this.get("text"),"display")&&this.renderText(pt),(0,k.get)(this.get("point"),"display")&&this.renderPoint(pt),this.get("autoAdjust")&&this.autoAdjust(pt)},pe.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},pe.prototype.renderPoint=function(pt){var Ot=this.getShapeAttrs().point;this.addShape(pt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:Ot})},pe.prototype.renderLine=function(pt){var Ot=this.getShapeAttrs().line;this.addShape(pt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:Ot})},pe.prototype.renderText=function(pt){var Ot=this.getShapeAttrs().text,ee=Ot.x,ye=Ot.y,Ne=Ot.text,Ye=(0,O.__rest)(Ot,["x","y","text"]),hr=this.get("text"),Er=hr.background,Hr=hr.maxLength,bn=hr.autoEllipsis,ri=hr.isVertival,qn=hr.ellipsisPosition,da={x:ee,y:ye,id:this.getElementId("text"),name:"annotation-text",content:Ne,style:Ye,background:Er,maxLength:Hr,autoEllipsis:bn,isVertival:ri,ellipsisPosition:qn};la(pt,da)},pe.prototype.autoAdjust=function(pt){var Ot=this.get("direction"),ee=this.get("x"),ye=this.get("y"),Ne=(0,k.get)(this.get("line"),"length",0),Ye=this.get("coordinateBBox"),hr=pt.getBBox(),Er=hr.minX,Hr=hr.maxX,bn=hr.minY,ri=hr.maxY,qn=pt.findById(this.getElementId("text-group")),da=pt.findById(this.getElementId("text")),Ya=pt.findById(this.getElementId("line"));if(!!Ye){if(qn){if(ee+Er<=Ye.minX){var Ra=Ye.minX-(ee+Er);re(qn,qn.attr("x")+Ra,qn.attr("y"))}if(ee+Hr>=Ye.maxX){var Ra=ee+Hr-Ye.maxX;re(qn,qn.attr("x")-Ra,qn.attr("y"))}}if(Ot==="upward"&&ye+bn<=Ye.minY||Ot!=="upward"&&ye+ri>=Ye.maxY){var ts=void 0,$o=void 0;Ot==="upward"&&ye+bn<=Ye.minY?(ts="top",$o=1):(ts="bottom",$o=-1),da.attr("textBaseline",ts),Ya&&Ya.attr("path",[["M",0,0],["L",0,Ne*$o]]),re(qn,qn.attr("x"),(Ne+2)*$o)}}},pe.prototype.getShapeAttrs=function(){var pt=(0,k.get)(this.get("line"),"display"),Ot=(0,k.get)(this.get("point"),"style",{}),ee=(0,k.get)(this.get("line"),"style",{}),ye=(0,k.get)(this.get("text"),"style",{}),Ne=this.get("direction"),Ye=pt?(0,k.get)(this.get("line"),"length",0):0,hr=Ne==="upward"?-1:1;return{point:(0,O.__assign)({x:0,y:0},Ot),line:(0,O.__assign)({path:[["M",0,0],["L",0,Ye*hr]]},ee),text:(0,O.__assign)({x:0,y:(Ye+2)*hr,text:(0,k.get)(this.get("text"),"content",""),textBaseline:Ne==="upward"?"bottom":"top"},ye)}},pe}(Nt),Ar=fr,qr=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Or.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Or.textColor,fontFamily:Or.fontFamily}}}})},pe.prototype.renderInner=function(pt){var Ot=(0,k.get)(this.get("region"),"style",{}),ee=(0,k.get)(this.get("text"),"style",{}),ye=this.get("lineLength")||0,Ne=this.get("points");if(!!Ne.length){var Ye=vt(Ne),hr=[];hr.push(["M",Ne[0].x,Ye.minY-ye]),Ne.forEach(function(Hr){hr.push(["L",Hr.x,Hr.y])}),hr.push(["L",Ne[Ne.length-1].x,Ne[Ne.length-1].y-ye]),this.addShape(pt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,O.__assign)({path:hr},Ot)});var Er=(0,O.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(Ye.minX+Ye.maxX)/2,y:Ye.minY-ye},this.get("text"));la(pt,Er)}},pe}(Nt),nn=qr,an=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},pe.prototype.renderInner=function(pt){var Ot=this,ee=this.get("start"),ye=this.get("end"),Ne=this.addGroup(pt,{id:this.getElementId("region-filter"),capture:!1});(0,k.each)(this.get("shapes"),function(hr,Er){var Hr=hr.get("type"),bn=(0,k.clone)(hr.attr());Ot.adjustShapeAttrs(bn),Ot.addShape(Ne,{id:Ot.getElementId("shape-"+Hr+"-"+Er),capture:!1,type:Hr,attrs:bn})});var Ye=gt({start:ee,end:ye});Ne.setClip({type:"rect",attrs:{x:Ye.minX,y:Ye.minY,width:Ye.width,height:Ye.height}})},pe.prototype.adjustShapeAttrs=function(pt){var Ot=this.get("color");pt.fill&&(pt.fill=pt.fillStyle=Ot),pt.stroke=pt.strokeStyle=Ot},pe}(Nt),le=an;function fe(Ve,pe,pt){var Ot=pe+"Style",ee=null;return(0,k.each)(pt,function(ye,Ne){Ve[Ne]&&ye[Ot]&&(ee||(ee={}),(0,k.mix)(ee,ye[Ot]))}),ee}var Me=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Or.lineColor}},tickLine:{style:{lineWidth:1,stroke:Or.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Or.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Or.textColor,textBaseline:"middle",fontFamily:Or.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Or.textColor,textBaseline:"middle",fontFamily:Or.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Or.uncheckedColor}}}}})},pe.prototype.renderInner=function(pt){this.get("line")&&this.drawLine(pt),this.drawTicks(pt),this.get("title")&&this.drawTitle(pt)},pe.prototype.isList=function(){return!0},pe.prototype.getItems=function(){return this.get("ticks")},pe.prototype.setItems=function(pt){this.update({ticks:pt})},pe.prototype.updateItem=function(pt,Ot){(0,k.mix)(pt,Ot),this.clear(),this.render()},pe.prototype.clearItems=function(){var pt=this.getElementByLocalId("label-group");pt&&pt.clear()},pe.prototype.setItemState=function(pt,Ot,ee){pt[Ot]=ee,this.updateTickStates(pt)},pe.prototype.hasState=function(pt,Ot){return!!pt[Ot]},pe.prototype.getItemStates=function(pt){var Ot=this.get("tickStates"),ee=[];return(0,k.each)(Ot,function(ye,Ne){pt[Ne]&&ee.push(Ne)}),ee},pe.prototype.clearItemsState=function(pt){var Ot=this,ee=this.getItemsByState(pt);(0,k.each)(ee,function(ye){Ot.setItemState(ye,pt,!1)})},pe.prototype.getItemsByState=function(pt){var Ot=this,ee=this.getItems();return(0,k.filter)(ee,function(ye){return Ot.hasState(ye,pt)})},pe.prototype.getSidePoint=function(pt,Ot){var ee=this,ye=ee.getSideVector(Ot,pt);return{x:pt.x+ye[0],y:pt.y+ye[1]}},pe.prototype.getTextAnchor=function(pt){var Ot;return(0,k.isNumberEqual)(pt[0],0)?Ot="center":pt[0]>0?Ot="start":pt[0]<0&&(Ot="end"),Ot},pe.prototype.processOverlap=function(pt){},pe.prototype.drawLine=function(pt){var Ot=this.getLinePath(),ee=this.get("line");this.addShape(pt,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,k.mix)({path:Ot},ee.style)})},pe.prototype.getTickLineItems=function(pt){var Ot=this,ee=[],ye=this.get("tickLine"),Ne=ye.alignTick,Ye=ye.length,hr=1,Er=pt.length;return Er>=2&&(hr=pt[1].value-pt[0].value),(0,k.each)(pt,function(Hr){var bn=Hr.point;Ne||(bn=Ot.getTickPoint(Hr.value-hr/2));var ri=Ot.getSidePoint(bn,Ye);ee.push({startPoint:bn,tickValue:Hr.value,endPoint:ri,tickId:Hr.id,id:"tickline-"+Hr.id})}),ee},pe.prototype.getSubTickLineItems=function(pt){var Ot=[],ee=this.get("subTickLine"),ye=ee.count,Ne=pt.length;if(Ne>=2)for(var Ye=0;Ye<Ne-1;Ye++)for(var hr=pt[Ye],Er=pt[Ye+1],Hr=0;Hr<ye;Hr++){var bn=(Hr+1)/(ye+1),ri=(1-bn)*hr.tickValue+bn*Er.tickValue,qn=this.getTickPoint(ri),da=this.getSidePoint(qn,ee.length);Ot.push({startPoint:qn,endPoint:da,tickValue:ri,id:"sub-"+hr.id+"-"+Hr})}return Ot},pe.prototype.getTickLineAttrs=function(pt,Ot){var ee=this.get(Ot).style,ye=pt.startPoint,Ne=pt.endPoint,Ye=(0,k.mix)({x1:ye.x,y1:ye.y,x2:Ne.x,y2:Ne.y},ee);return Ye},pe.prototype.drawTick=function(pt,Ot,ee){this.addShape(Ot,{type:"line",id:this.getElementId(pt.id),name:"axis-"+ee,attrs:this.getTickLineAttrs(pt,ee)})},pe.prototype.drawTickLines=function(pt){var Ot=this,ee=this.get("ticks"),ye=this.get("subTickLine"),Ne=this.getTickLineItems(ee),Ye=this.addGroup(pt,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),hr=this.get("tickLine");if((0,k.each)(Ne,function(Hr){if(hr.displayWithLabel){var bn=Ot.getElementId("label-"+Hr.tickId);pt.findById(bn)&&Ot.drawTick(Hr,Ye,"tickLine")}else Ot.drawTick(Hr,Ye,"tickLine")}),ye){var Er=this.getSubTickLineItems(Ne);(0,k.each)(Er,function(Hr){Ot.drawTick(Hr,Ye,"subTickLine")})}},pe.prototype.processTicks=function(){var pt=this,Ot=this.get("ticks");(0,k.each)(Ot,function(ee){ee.point=pt.getTickPoint(ee.value),(0,k.isNil)(ee.id)&&(ee.id=ee.name)})},pe.prototype.drawTicks=function(pt){var Ot=this;this.processTicks(),this.get("label")&&this.drawLabels(pt),this.get("tickLine")&&this.drawTickLines(pt);var ee=this.get("ticks");(0,k.each)(ee,function(ye){Ot.applyTickStates(ye,pt)})},pe.prototype.getLabelAttrs=function(pt,Ot){var ee=this.get("label"),ye=ee.offset,Ne=ee.style,Ye=ee.rotate,hr=ee.formatter,Er=this.getSidePoint(pt.point,ye),Hr=this.getSideVector(ye,Er),bn=hr?hr(pt.name,pt,Ot):pt.name,ri=(0,k.mix)({x:Er.x,y:Er.y,text:bn,textAlign:this.getTextAnchor(Hr)},Ne);return Ye&&(ri.matrix=_t(Er,Ye)),ri},pe.prototype.drawLabels=function(pt){var Ot=this,ee=this.get("ticks"),ye=this.addGroup(pt,{name:"axis-label-group",id:this.getElementId("label-group")});(0,k.each)(ee,function(Ne,Ye){Ot.addShape(ye,{type:"text",name:"axis-label",id:Ot.getElementId("label-"+Ne.id),attrs:Ot.getLabelAttrs(Ne,Ye),delegateObject:{tick:Ne,item:Ne,index:Ye}})}),this.processOverlap(ye)},pe.prototype.getTitleAttrs=function(){var pt=this.get("title"),Ot=pt.style,ee=pt.position,ye=pt.offset,Ne=pt.spacing,Ye=Ne===void 0?0:Ne,hr=pt.autoRotate,Er=Ot.fontSize,Hr=.5;ee==="start"?Hr=0:ee==="end"&&(Hr=1);var bn=this.getTickPoint(Hr),ri=this.getSidePoint(bn,ye||Ye+Er/2),qn=(0,k.mix)({x:ri.x,y:ri.y,text:pt.text},Ot),da=pt.rotate,Ya=da;if((0,k.isNil)(da)&&hr){var Ra=this.getAxisVector(bn),ts=[1,0];Ya=K.angleTo(Ra,ts,!0)}if(Ya){var $o=_t(ri,Ya);qn.matrix=$o}return qn},pe.prototype.drawTitle=function(pt){this.addShape(pt,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},pe.prototype.applyTickStates=function(pt,Ot){var ee=this.getItemStates(pt);if(ee.length){var ye=this.get("tickStates"),Ne=this.getElementId("label-"+pt.id),Ye=Ot.findById(Ne);if(Ye){var hr=fe(pt,"label",ye);hr&&Ye.attr(hr)}var Er=this.getElementId("tickline-"+pt.id),Hr=Ot.findById(Er);if(Hr){var bn=fe(pt,"tickLine",ye);bn&&Hr.attr(bn)}}},pe.prototype.updateTickStates=function(pt){var Ot=this.getItemStates(pt),ee=this.get("tickStates"),ye=this.get("label"),Ne=this.getElementByLocalId("label-"+pt.id),Ye=this.get("tickLine"),hr=this.getElementByLocalId("tickline-"+pt.id);if(Ot.length){if(Ne){var Er=fe(pt,"label",ee);Er&&Ne.attr(Er)}if(hr){var Hr=fe(pt,"tickLine",ee);Hr&&hr.attr(Hr)}}else Ne&&Ne.attr(ye.style),hr&&hr.attr(Ye.style)},pe}(Nt),Te=Me;function Ze(Ve,pe,pt,Ot){var ee=pe.getChildren(),ye=!1;return(0,k.each)(ee,function(Ne){var Ye=ui(Ve,Ne,pt,Ot);ye=ye||Ye}),ye}function or(){return Be}function lr(Ve,pe,pt){return Ze(Ve,pe,pt,"head")}function Be(Ve,pe,pt){return Ze(Ve,pe,pt,"tail")}function tr(Ve,pe,pt){return Ze(Ve,pe,pt,"middle")}function Mr(Ve){var pe=Ve.attr("matrix");return pe&&pe[0]!==1}function Xr(Ve,pe,pt,Ot,ee){ee===void 0&&(ee=!1);var ye=!1;if(Ve)ye=Math.abs(pt.y-Ot.y)<pt.height;else if(pe){var Ne=ee?Ot.height:pt.height;ye=Math.abs(pt.x-Ot.x)<Ne}else{var Ye=ee?Ot.width:pt.width;ye=Math.abs(pt.x-Ot.x)<Ye}return ye}function Zr(Ve,pe,pt){var Ot=pe.getChildren().slice();if(!Ot.length)return!1;var ee=!1;pt&&Ot.reverse();for(var ye=Ot.length,Ne=Ot[0],Ye=Mr(Ne),hr=Ne.getBBox(),Er=1;Er<ye;Er++){var Hr=Ot[Er],bn=Hr.getBBox(),ri=Xr(Ve,Ye,hr,bn,pt);ri?(Hr.hide(),ee=!0):hr=bn}return ee}function tn(){return Jr}function _n(Ve,pe){return Zr(Ve,pe,!1)}function $n(Ve,pe){return Zr(Ve,pe,!0)}function si(Ve,pe){var pt=pe.getChildren().slice();if(pt.length<=2)return!1;for(var Ot=!1,ee=pt.length,ye=pt[0],Ne=pt[ee-1],Ye=Mr(ye),hr=ye.getBBox(),Er=ye,Hr=1;Hr<ee-1;Hr++){var bn=pt[Hr],ri=bn.getBBox(),qn=Xr(Ve,Ye,hr,ri);qn?(bn.hide(),Ot=!0):(hr=ri,Er=bn)}var da=Ne.getBBox(),Ya=Xr(Ve,Ye,hr,da);return Ya&&(Er.hide(),Ot=!0),Ot}function Jr(Ve,pe){var pt=pe.getChildren().slice();if(pt.length<2)return!1;var Ot=!1,ee=pt[0],ye=ee.getBBox(),Ne=pt[1],Ye=Mr(ee),hr=pt.length,Er=0;if(Ve){var Hr=Math.abs(Ne.attr("y")-ee.attr("y"));Er=ye.height/Hr}else if(Ye){var Hr=Math.abs(Ne.attr("x")-ee.attr("x"));Er=ye.width/Hr}else{var bn=Qr(pt),Hr=Math.abs(Ne.attr("x")-ee.attr("x"));Er=bn/Hr}if(Er>1){Er=Math.ceil(Er);for(var ri=0;ri<hr;ri++)ri%Er!=0&&(pt[ri].hide(),Ot=!0)}return Ot}function Si(Ve,pe){(0,k.each)(Ve,function(pt){var Ot=pt.attr("x"),ee=pt.attr("y"),ye=_t({x:Ot,y:ee},pe);pt.attr("matrix",ye)})}function Jn(Ve,pe,pt,Ot){var ee=pe.getChildren();if(!ee.length||!Ve&&ee.length<2)return!1;var ye=Qr(ee),Ne=!1;if(Ve)Ne=!!pt&&ye>pt;else{var Ye=Math.abs(ee[1].attr("x")-ee[0].attr("x"));Ne=ye>Ye}if(Ne){var hr=Ot(pt,ye);Si(ee,hr)}return Ne}function yi(){return Ka}function Ka(Ve,pe,pt){return Jn(Ve,pe,pt,function(){return Ve?Or.verticalAxisRotate:Or.horizontalAxisRotate})}function ki(Ve,pe,pt){return Jn(Ve,pe,pt,function(Ot,ee){if(!Ot)return Ve?Or.verticalAxisRotate:Or.horizontalAxisRotate;if(Ve)return-Math.acos(Ot/ee);var ye=0;return Ot>ee?ye=Math.PI/4:(ye=Math.asin(Ot/ee),ye>Math.PI/4&&(ye=Math.PI/4)),ye})}var ga=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"line",locationType:"region",start:null,end:null})},pe.prototype.getLinePath=function(){var pt=this.get("start"),Ot=this.get("end"),ee=[];return ee.push(["M",pt.x,pt.y]),ee.push(["L",Ot.x,Ot.y]),ee},pe.prototype.getInnerLayoutBBox=function(){var pt=this.get("start"),Ot=this.get("end"),ee=Ve.prototype.getInnerLayoutBBox.call(this),ye=Math.min(pt.x,Ot.x,ee.x),Ne=Math.min(pt.y,Ot.y,ee.y),Ye=Math.max(pt.x,Ot.x,ee.maxX),hr=Math.max(pt.y,Ot.y,ee.maxY);return{x:ye,y:Ne,minX:ye,minY:Ne,maxX:Ye,maxY:hr,width:Ye-ye,height:hr-Ne}},pe.prototype.isVertical=function(){var pt=this.get("start"),Ot=this.get("end");return(0,k.isNumberEqual)(pt.x,Ot.x)},pe.prototype.isHorizontal=function(){var pt=this.get("start"),Ot=this.get("end");return(0,k.isNumberEqual)(pt.y,Ot.y)},pe.prototype.getTickPoint=function(pt){var Ot=this,ee=Ot.get("start"),ye=Ot.get("end"),Ne=ye.x-ee.x,Ye=ye.y-ee.y;return{x:ee.x+Ne*pt,y:ee.y+Ye*pt}},pe.prototype.getSideVector=function(pt){var Ot=this.getAxisVector(),ee=q.normalize([0,0],Ot),ye=this.get("verticalFactor"),Ne=[ee[1],ee[0]*-1];return q.scale([0,0],Ne,pt*ye)},pe.prototype.getAxisVector=function(){var pt=this.get("start"),Ot=this.get("end");return[Ot.x-pt.x,Ot.y-pt.y]},pe.prototype.processOverlap=function(pt){var Ot=this,ee=this.isVertical(),ye=this.isHorizontal();if(!(!ee&&!ye)){var Ne=this.get("label"),Ye=this.get("title"),hr=this.get("verticalLimitLength"),Er=Ne.offset,Hr=hr,bn=0,ri=0;Ye&&(bn=Ye.style.fontSize,ri=Ye.spacing),Hr&&(Hr=Hr-Er-ri-bn);var qn=this.get("overlapOrder");if((0,k.each)(qn,function(Ra){Ne[Ra]&&Ot.autoProcessOverlap(Ra,Ne[Ra],pt,Hr)}),Ye){var da=pt.getBBox(),Ya=ee?da.width:da.height;(0,k.isNil)(Ye.offset)&&(Ye.offset=Er+Ya+ri+bn/2)}}},pe.prototype.autoProcessOverlap=function(pt,Ot,ee,ye){var Ne=this,Ye=this.isVertical(),hr=!1,Er=F[pt];if(Ot===!0?hr=Er.getDefault()(Ye,ee,ye):(0,k.isFunction)(Ot)?hr=Ot(Ye,ee,ye):Er[Ot]&&(hr=Er[Ot](Ye,ee,ye)),pt==="autoRotate"){if(hr){var Hr=ee.getChildren(),bn=this.get("verticalFactor");(0,k.each)(Hr,function(qn){var da=qn.attr("textAlign");if(da==="center"){var Ya=bn>0?"end":"start";qn.attr("textAlign",Ya)}})}}else if(pt==="autoHide"){var ri=ee.getChildren().slice(0);(0,k.each)(ri,function(qn){qn.get("visible")||(Ne.get("isRegister")&&Ne.unregisterElement(qn),qn.remove())})}},pe}(Te),ko=ga,Ci=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},pe.prototype.getLinePath=function(){var pt=this.get("center"),Ot=pt.x,ee=pt.y,ye=this.get("radius"),Ne=ye,Ye=this.get("startAngle"),hr=this.get("endAngle"),Er=[];if(Math.abs(hr-Ye)===Math.PI*2)Er=[["M",Ot,ee-Ne],["A",ye,Ne,0,1,1,Ot,ee+Ne],["A",ye,Ne,0,1,1,Ot,ee-Ne],["Z"]];else{var Hr=this.getCirclePoint(Ye),bn=this.getCirclePoint(hr),ri=Math.abs(hr-Ye)>Math.PI?1:0,qn=Ye>hr?0:1;Er=[["M",Ot,ee],["L",Hr.x,Hr.y],["A",ye,Ne,0,ri,qn,bn.x,bn.y],["L",Ot,ee]]}return Er},pe.prototype.getTickPoint=function(pt){var Ot=this.get("startAngle"),ee=this.get("endAngle"),ye=Ot+(ee-Ot)*pt;return this.getCirclePoint(ye)},pe.prototype.getSideVector=function(pt,Ot){var ee=this.get("center"),ye=[Ot.x-ee.x,Ot.y-ee.y],Ne=this.get("verticalFactor"),Ye=q.length(ye);return q.scale(ye,ye,Ne*pt/Ye),ye},pe.prototype.getAxisVector=function(pt){var Ot=this.get("center"),ee=[pt.x-Ot.x,pt.y-Ot.y];return[ee[1],-1*ee[0]]},pe.prototype.getCirclePoint=function(pt,Ot){var ee=this.get("center");return Ot=Ot||this.get("radius"),{x:ee.x+Math.cos(pt)*Ot,y:ee.y+Math.sin(pt)*Ot}},pe}(Te),po=Ci,oo=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Or.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Or.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Or.fontFamily}},textBackground:{padding:5,style:{stroke:Or.lineColor}}}})},pe.prototype.renderInner=function(pt){this.get("line")&&this.renderLine(pt),this.get("text")&&(this.renderText(pt),this.renderBackground(pt))},pe.prototype.renderText=function(pt){var Ot=this.get("text"),ee=Ot.style,ye=Ot.autoRotate,Ne=Ot.content;if(!(0,k.isNil)(Ne)){var Ye=this.getTextPoint(),hr=null;if(ye){var Er=this.getRotateAngle();hr=_t(Ye,Er)}this.addShape(pt,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,O.__assign)((0,O.__assign)((0,O.__assign)({},Ye),{text:Ne,matrix:hr}),ee)})}},pe.prototype.renderLine=function(pt){var Ot=this.getLinePath(),ee=this.get("line"),ye=ee.style;this.addShape(pt,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,O.__assign)({path:Ot},ye)})},pe.prototype.renderBackground=function(pt){var Ot=this.getElementId("text"),ee=pt.findById(Ot),ye=this.get("textBackground");if(ye&&ee){var Ne=ee.getBBox(),Ye=Qt(ye.padding),hr=ye.style,Er=this.addShape(pt,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,O.__assign)({x:Ne.x-Ye[3],y:Ne.y-Ye[0],width:Ne.width+Ye[1]+Ye[3],height:Ne.height+Ye[0]+Ye[2],matrix:ee.attr("matrix")},hr)});Er.toBack()}},pe}(Nt),cn=oo,vn=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"line",locationType:"region",start:null,end:null})},pe.prototype.getRotateAngle=function(){var pt=this.getLocation(),Ot=pt.start,ee=pt.end,ye=this.get("text").position,Ne=Math.atan2(ee.y-Ot.y,ee.x-Ot.x),Ye=ye==="start"?Ne-Math.PI/2:Ne+Math.PI/2;return Ye},pe.prototype.getTextPoint=function(){var pt=this.getLocation(),Ot=pt.start,ee=pt.end,ye=this.get("text"),Ne=ye.position,Ye=ye.offset;return Jt(Ot,ee,Ne,Ye)},pe.prototype.getLinePath=function(){var pt=this.getLocation(),Ot=pt.start,ee=pt.end;return[["M",Ot.x,Ot.y],["L",ee.x,ee.y]]},pe}(cn),Wo=vn,mo=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},pe.prototype.getRotateAngle=function(){var pt=this.getLocation(),Ot=pt.startAngle,ee=pt.endAngle,ye=this.get("text").position,Ne=ye==="start"?Ot+Math.PI/2:ee-Math.PI/2;return Ne},pe.prototype.getTextPoint=function(){var pt=this.get("text"),Ot=pt.position,ee=pt.offset,ye=this.getLocation(),Ne=ye.center,Ye=ye.radius,hr=ye.startAngle,Er=ye.endAngle,Hr=Ot==="start"?hr:Er,bn=this.getRotateAngle()-Math.PI,ri=nt(Ne,Ye,Hr),qn=Math.cos(bn)*ee,da=Math.sin(bn)*ee;return{x:ri.x+qn,y:ri.y+da}},pe.prototype.getLinePath=function(){var pt=this.getLocation(),Ot=pt.center,ee=pt.radius,ye=pt.startAngle,Ne=pt.endAngle,Ye=null;if(Ne-ye==Math.PI*2){var hr=Ot.x,Er=Ot.y;Ye=[["M",hr,Er-ee],["A",ee,ee,0,1,1,hr,Er+ee],["A",ee,ee,0,1,1,hr,Er-ee],["Z"]]}else{var Hr=nt(Ot,ee,ye),bn=nt(Ot,ee,Ne),ri=Math.abs(Ne-ye)>Math.PI?1:0,qn=ye>Ne?0:1;Ye=[["M",Hr.x,Hr.y],["A",ee,ee,0,ri,qn,bn.x,bn.y]]}return Ye},pe}(cn),fo=mo,Po=S(6056),vi=S(45442),pa=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},pe.prototype.getContainer=function(){return this.get("container")},pe.prototype.show=function(){var pt=this.get("container");pt.style.display="",this.set("visible",!0)},pe.prototype.hide=function(){var pt=this.get("container");pt.style.display="none",this.set("visible",!1)},pe.prototype.setCapture=function(pt){var Ot=this.getContainer(),ee=pt?"auto":"none";Ot.style.pointerEvents=ee,this.set("capture",pt)},pe.prototype.getBBox=function(){var pt=this.getContainer(),Ot=parseFloat(pt.style.left)||0,ee=parseFloat(pt.style.top)||0;return Y(Ot,ee,pt.clientWidth,pt.clientHeight)},pe.prototype.clear=function(){var pt=this.get("container");it(pt)},pe.prototype.destroy=function(){this.removeEvent(),this.removeDom(),Ve.prototype.destroy.call(this)},pe.prototype.init=function(){Ve.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},pe.prototype.initCapture=function(){this.setCapture(this.get("capture"))},pe.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},pe.prototype.initDom=function(){},pe.prototype.initContainer=function(){var pt=this.get("container");if((0,k.isNil)(pt)){pt=this.createDom();var Ot=this.get("parent");(0,k.isString)(Ot)&&(Ot=document.getElementById(Ot),this.set("parent",Ot)),Ot.appendChild(pt),this.set("container",pt)}else(0,k.isString)(pt)&&(pt=document.getElementById(pt),this.set("container",pt));this.get("parent")||this.set("parent",pt.parentNode)},pe.prototype.resetStyles=function(){var pt=this.get("domStyles"),Ot=this.get("defaultStyles");pt?pt=(0,k.deepMix)({},Ot,pt):pt=Ot,this.set("domStyles",pt)},pe.prototype.applyStyles=function(){var pt=this.get("domStyles");if(!!pt){var Ot=this.getContainer();this.applyChildrenStyles(Ot,pt);var ee=this.get("containerClassName");if(ee&&dt(Ot,ee)){var ye=pt[ee];(0,vi.Z)(Ot,ye)}}},pe.prototype.applyChildrenStyles=function(pt,Ot){(0,k.each)(Ot,function(ee,ye){var Ne=pt.getElementsByClassName(ye);(0,k.each)(Ne,function(Ye){(0,vi.Z)(Ye,ee)})})},pe.prototype.applyStyle=function(pt,Ot){var ee=this.get("domStyles");(0,vi.Z)(Ot,ee[pt])},pe.prototype.createDom=function(){var pt=this.get("containerTpl");return(0,Po.Z)(pt)},pe.prototype.initEvent=function(){},pe.prototype.removeDom=function(){var pt=this.get("container");pt&&pt.parentNode.removeChild(pt)},pe.prototype.removeEvent=function(){},pe.prototype.updateInner=function(pt){(0,k.hasKey)(pt,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},pe.prototype.resetPosition=function(){},pe}(Ut),An=pa,Pe="g2-crosshair",Tt=Pe+"-line",ae=Pe+"-text",he,zt=(he={},he[""+Pe]={position:"relative"},he[""+Tt]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},he[""+ae]={position:"absolute",color:Or.textColor,fontFamily:Or.fontFamily},he),Wt=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Pe+'"></div>',crosshairTpl:'<div class="'+Tt+'"></div>',textTpl:'<span class="'+ae+'">{content}</span>',domStyles:null,containerClassName:Pe,defaultStyles:zt,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},pe.prototype.render=function(){this.resetText(),this.resetPosition()},pe.prototype.initCrossHair=function(){var pt=this.getContainer(),Ot=this.get("crosshairTpl"),ee=(0,Po.Z)(Ot);pt.appendChild(ee),this.applyStyle(Tt,ee),this.set("crosshairEl",ee)},pe.prototype.getTextPoint=function(){var pt=this.getLocation(),Ot=pt.start,ee=pt.end,ye=this.get("text"),Ne=ye.position,Ye=ye.offset;return Jt(Ot,ee,Ne,Ye)},pe.prototype.resetText=function(){var pt=this.get("text"),Ot=this.get("textEl");if(pt){var ee=pt.content;if(!Ot){var ye=this.getContainer(),Ne=(0,k.substitute)(this.get("textTpl"),pt);Ot=(0,Po.Z)(Ne),ye.appendChild(Ot),this.applyStyle(ae,Ot),this.set("textEl",Ot)}Ot.innerHTML=ee}else Ot&&Ot.remove()},pe.prototype.isVertical=function(pt,Ot){return pt.x===Ot.x},pe.prototype.resetPosition=function(){var pt=this.get("crosshairEl");pt||(this.initCrossHair(),pt=this.get("crosshairEl"));var Ot=this.get("start"),ee=this.get("end"),ye=Math.min(Ot.x,ee.x),Ne=Math.min(Ot.y,ee.y);this.isVertical(Ot,ee)?(0,vi.Z)(pt,{width:"1px",height:Kt(Math.abs(ee.y-Ot.y))}):(0,vi.Z)(pt,{height:"1px",width:Kt(Math.abs(ee.x-Ot.x))}),(0,vi.Z)(pt,{top:Kt(Ne),left:Kt(ye)}),this.alignText()},pe.prototype.alignText=function(){var pt=this.get("textEl");if(pt){var Ot=this.get("text").align,ee=pt.clientWidth,ye=this.getTextPoint();switch(Ot){case"center":ye.x=ye.x-ee/2;break;case"right":ye.x=ye.x-ee;case"left":break}(0,vi.Z)(pt,{top:Kt(ye.y),left:Kt(ye.x)})}},pe.prototype.updateInner=function(pt){(0,k.hasKey)(pt,"text")&&this.resetText(),Ve.prototype.updateInner.call(this,pt)},pe}(An),de=Wt,Se=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Or.lineColor}}}})},pe.prototype.getLineType=function(){var pt=this.get("line")||this.get("defaultCfg").line;return pt.type},pe.prototype.renderInner=function(pt){this.drawGrid(pt)},pe.prototype.getAlternatePath=function(pt,Ot){var ee=this.getGridPath(pt),ye=Ot.slice(0).reverse(),Ne=this.getGridPath(ye,!0),Ye=this.get("closed");return Ye?ee=ee.concat(Ne):(Ne[0][0]="L",ee=ee.concat(Ne),ee.push(["Z"])),ee},pe.prototype.getPathStyle=function(){return this.get("line").style},pe.prototype.drawGrid=function(pt){var Ot=this,ee=this.get("line"),ye=this.get("items"),Ne=this.get("alternateColor"),Ye=null;(0,k.each)(ye,function(hr,Er){var Hr=hr.id||Er;if(ee){var bn=Ot.getPathStyle(),ri=Ot.getElementId("line-"+Hr),qn=Ot.getGridPath(hr.points);Ot.addShape(pt,{type:"path",name:"grid-line",id:ri,attrs:(0,k.mix)({path:qn},bn)})}if(Ne&&Er>0){var da=Ot.getElementId("region-"+Hr),Ya=Er%2==0;if((0,k.isString)(Ne))Ya&&Ot.drawAlternateRegion(da,pt,Ye.points,hr.points,Ne);else{var Ra=Ya?Ne[1]:Ne[0];Ot.drawAlternateRegion(da,pt,Ye.points,hr.points,Ra)}}Ye=hr})},pe.prototype.drawAlternateRegion=function(pt,Ot,ee,ye,Ne){var Ye=this.getAlternatePath(ee,ye);this.addShape(Ot,{type:"path",id:pt,name:"grid-region",attrs:{path:Ye,fill:Ne}})},pe}(Nt),Ae=Se;function He(Ve,pe,pt,Ot){var ee=pt-Ve,ye=Ot-pe;return Math.sqrt(ee*ee+ye*ye)}var _r=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"circle",center:null,closed:!0})},pe.prototype.getGridPath=function(pt,Ot){var ee=this.getLineType(),ye=this.get("closed"),Ne=[];if(pt.length)if(ee==="circle"){var Ye=this.get("center"),hr=pt[0],Er=He(Ye.x,Ye.y,hr.x,hr.y),Hr=Ot?0:1;ye?(Ne.push(["M",Ye.x,Ye.y-Er]),Ne.push(["A",Er,Er,0,0,Hr,Ye.x,Ye.y+Er]),Ne.push(["A",Er,Er,0,0,Hr,Ye.x,Ye.y-Er]),Ne.push(["Z"])):(0,k.each)(pt,function(bn,ri){ri===0?Ne.push(["M",bn.x,bn.y]):Ne.push(["A",Er,Er,0,0,Hr,bn.x,bn.y])})}else(0,k.each)(pt,function(bn,ri){ri===0?Ne.push(["M",bn.x,bn.y]):Ne.push(["L",bn.x,bn.y])}),ye&&Ne.push(["Z"]);return Ne},pe}(Ae),Lr=_r,wn=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"line"})},pe.prototype.getGridPath=function(pt){var Ot=[];return(0,k.each)(pt,function(ee,ye){ye===0?Ot.push(["M",ee.x,ee.y]):Ot.push(["L",ee.x,ee.y])}),Ot},pe}(Ae),Kr=wn,Fr=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},pe.prototype.getLayoutBBox=function(){var pt=Ve.prototype.getLayoutBBox.call(this),Ot=this.get("x"),ee=this.get("y"),ye=this.get("offsetX"),Ne=this.get("offsetY"),Ye=this.get("maxWidth"),hr=this.get("maxHeight"),Er=Ot+ye,Hr=ee+Ne,bn=pt.maxX-Er,ri=pt.maxY-Hr;return Ye&&(bn=Math.min(bn,Ye)),hr&&(ri=Math.min(ri,hr)),Y(Er,Hr,bn,ri)},pe.prototype.setLocation=function(pt){this.set("x",pt.x),this.set("y",pt.y),this.resetLocation()},pe.prototype.resetLocation=function(){var pt=this.get("x"),Ot=this.get("y"),ee=this.get("offsetX"),ye=this.get("offsetY");this.moveElementTo(this.get("group"),{x:pt+ee,y:Ot+ye})},pe.prototype.applyOffset=function(){this.resetLocation()},pe.prototype.getDrawPoint=function(){return this.get("currentPoint")},pe.prototype.setDrawPoint=function(pt){return this.set("currentPoint",pt)},pe.prototype.renderInner=function(pt){this.resetDraw(),this.get("title")&&this.drawTitle(pt),this.drawLegendContent(pt),this.get("background")&&this.drawBackground(pt)},pe.prototype.drawBackground=function(pt){var Ot=this.get("background"),ee=pt.getBBox(),ye=Qt(Ot.padding),Ne=(0,O.__assign)({x:0,y:0,width:ee.width+ye[1]+ye[3],height:ee.height+ye[0]+ye[2]},Ot.style),Ye=this.addShape(pt,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:Ne});Ye.toBack()},pe.prototype.drawTitle=function(pt){var Ot=this.get("currentPoint"),ee=this.get("title"),ye=ee.spacing,Ne=ee.style,Ye=ee.text,hr=this.addShape(pt,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,O.__assign)({text:Ye,x:Ot.x,y:Ot.y},Ne)}),Er=hr.getBBox();this.set("currentPoint",{x:Ot.x,y:Er.maxY+ye})},pe.prototype.resetDraw=function(){var pt=this.get("background"),Ot={x:0,y:0};if(pt){var ee=Qt(pt.padding);Ot.x=ee[3],Ot.y=ee[0]}this.set("currentPoint",Ot)},pe}(Nt),pi=Fr,Pi=function(Ve){(0,O.__extends)(pe,Ve);function pe(){var pt=Ve!==null&&Ve.apply(this,arguments)||this;return pt.currentPageIndex=1,pt.totalPagesCnt=1,pt.pageWidth=0,pt.pageHeight=0,pt.startX=0,pt.startY=0,pt.onNavigationBack=function(){var Ot=pt.getElementByLocalId("item-group");if(pt.currentPageIndex>1){pt.currentPageIndex-=1,pt.updateNavigation();var ee=pt.getCurrentNavigationMatrix();pt.get("animate")?Ot.animate({matrix:ee},100):Ot.attr({matrix:ee})}},pt.onNavigationAfter=function(){var Ot=pt.getElementByLocalId("item-group");if(pt.currentPageIndex<pt.totalPagesCnt){pt.currentPageIndex+=1,pt.updateNavigation();var ee=pt.getCurrentNavigationMatrix();pt.get("animate")?Ot.animate({matrix:ee},100):Ot.attr({matrix:ee})}},pt}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"legend",type:"category",itemSpacing:24,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:Or.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Or.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:Or.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:Or.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Or.uncheckedColor},markerStyle:{fill:Or.uncheckedColor,stroke:Or.uncheckedColor}},inactive:{nameStyle:{fill:Or.uncheckedColor},markerStyle:{opacity:.2}}}}})},pe.prototype.isList=function(){return!0},pe.prototype.getItems=function(){return this.get("items")},pe.prototype.setItems=function(pt){this.update({items:pt})},pe.prototype.updateItem=function(pt,Ot){(0,k.mix)(pt,Ot),this.clear(),this.render()},pe.prototype.clearItems=function(){var pt=this.getElementByLocalId("item-group");pt&&pt.clear()},pe.prototype.setItemState=function(pt,Ot,ee){pt[Ot]=ee;var ye=this.getElementByLocalId("item-"+pt.id);if(ye){var Ne=this.getItems(),Ye=Ne.indexOf(pt),hr=this.createOffScreenGroup(),Er=this.drawItem(pt,Ye,this.getItemHeight(),hr);this.updateElements(Er,ye),this.clearUpdateStatus(ye)}},pe.prototype.hasState=function(pt,Ot){return!!pt[Ot]},pe.prototype.getItemStates=function(pt){var Ot=this.get("itemStates"),ee=[];return(0,k.each)(Ot,function(ye,Ne){pt[Ne]&&ee.push(Ne)}),ee},pe.prototype.clearItemsState=function(pt){var Ot=this,ee=this.getItemsByState(pt);(0,k.each)(ee,function(ye){Ot.setItemState(ye,pt,!1)})},pe.prototype.getItemsByState=function(pt){var Ot=this,ee=this.getItems();return(0,k.filter)(ee,function(ye){return Ot.hasState(ye,pt)})},pe.prototype.drawLegendContent=function(pt){this.processItems(),this.drawItems(pt)},pe.prototype.processItems=function(){var pt=this.get("items");(0,k.each)(pt,function(Ot){Ot.id||(Ot.id=Ot.name)})},pe.prototype.drawItems=function(pt){var Ot=this,ee=this.addGroup(pt,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),ye=this.addGroup(ee,{id:this.getElementId("item-group"),name:"legend-item-group"}),Ne=this.getItemHeight(),Ye=this.get("itemWidth"),hr=this.get("itemSpacing"),Er=this.get("currentPoint"),Hr=Er.x,bn=Er.y,ri=this.get("layout"),qn=this.get("items"),da=!1,Ya=0,Ra=this.get("maxWidth"),ts=this.get("maxHeight");(0,k.each)(qn,function($o,Aa){var Le=Ot.drawItem($o,Aa,Ne,ye),gr=Le.getBBox(),Dr=Ye||gr.width;Dr>Ya&&(Ya=Dr),ri==="horizontal"?(Ra&&Ra<Er.x+Dr-Hr&&(da=!0,Er.x=Hr,Er.y+=Ne),Ot.moveElementTo(Le,Er),Er.x+=Dr+hr):(ts&&ts<Er.y+Ne-bn&&(da=!0,Er.x+=Ya+hr,Er.y=bn,Ya=0),Ot.moveElementTo(Le,Er),Er.y+=Ne)}),da&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=Hr,this.startY=bn,this.adjustNavigation(pt,ye))},pe.prototype.getItemHeight=function(){var pt=this.get("itemHeight");if(!pt){var Ot=this.get("itemName");Ot&&(pt=Ot.style.fontSize+8)}return pt},pe.prototype.drawMarker=function(pt,Ot,ee,ye){var Ne=(0,O.__assign)((0,O.__assign)((0,O.__assign)({x:0,y:ye/2},Ot.style),{symbol:(0,k.get)(ee.marker,"symbol","circle")}),(0,k.get)(ee.marker,"style",{})),Ye=this.addShape(pt,{type:"marker",id:this.getElementId("item-"+ee.id+"-marker"),name:"legend-item-marker",attrs:Ne}),hr=Ye.getBBox();Ye.attr("x",hr.width/2);var Er=Ye.attr(),Hr=Er.stroke,bn=Er.fill;return Hr&&Ye.set("isStroke",!0),bn&&Ye.set("isFill",!0),Ye},pe.prototype.drawItemText=function(pt,Ot,ee,ye,Ne,Ye,hr){var Er=ee.formatter,Hr=(0,O.__assign)({x:Ye,y:Ne/2,text:Er?Er(ye[Ot],ye,hr):ye[Ot]},ee.style);return this.addShape(pt,{type:"text",id:this.getElementId("item-"+ye.id+"-"+Ot),name:"legend-item-"+Ot,attrs:Hr})},pe.prototype.drawItem=function(pt,Ot,ee,ye){var Ne="item-"+pt.id,Ye=this.addGroup(ye,{name:"legend-item-container",id:this.getElementId("item-container-"+Ne),delegateObject:{item:pt,index:Ot}}),hr=this.addGroup(Ye,{name:"legend-item",id:this.getElementId(Ne),delegateObject:{item:pt,index:Ot}}),Er=this.get("marker"),Hr=this.get("itemName"),bn=this.get("itemValue"),ri=this.get("itemBackground"),qn=this.getLimitItemWidth(),da=0;if(Er){var Ya=this.drawMarker(hr,Er,pt,ee);da=Ya.getBBox().maxX+Er.spacing}if(Hr){var Ra=this.drawItemText(hr,"name",Hr,pt,ee,da,Ot);qn&&ui(!0,Ra,(0,k.clamp)(qn-da,0,qn)),da=Ra.getBBox().maxX+Hr.spacing}if(bn){var ts=this.drawItemText(hr,"value",bn,pt,ee,da,Ot);qn&&(bn.alignRight?(ts.attr({textAlign:"right",x:qn}),ui(!0,ts,(0,k.clamp)(qn-da,0,qn),"head")):ui(!0,ts,(0,k.clamp)(qn-da,0,qn)))}if(ri){var $o=hr.getBBox(),Aa=this.addShape(hr,{type:"rect",name:"legend-item-background",id:this.getElementId(Ne+"-background"),attrs:(0,O.__assign)({x:0,y:0,width:$o.width,height:ee},ri.style)});Aa.toBack()}return this.applyItemStates(pt,hr),hr},pe.prototype.adjustNavigation=function(pt,Ot){var ee=this,ye=this.startX,Ne=this.startY,Ye=this.get("layout"),hr=Ot.findAll(function(Dr){return Dr.get("name")==="legend-item"}),Er=this.get("maxWidth"),Hr=this.get("maxHeight"),bn=this.get("itemWidth"),ri=this.get("itemSpacing"),qn=this.getItemHeight(),da=this.drawNavigation(pt,Ye,"00/00",12),Ya=da.getBBox(),Ra={x:ye,y:Ne},ts=1,$o=0,Aa=0,Le=0;if(Ye==="horizontal")this.pageHeight=qn,(0,k.each)(hr,function(Dr){var on=Dr.getBBox(),Yn=bn||on.width;($o&&$o<Ra.x+Yn+ri||Er<Ra.x+Yn+ri+Ya.width)&&(ts===1&&($o=Ra.x+ri,ee.pageWidth=$o,ee.moveElementTo(da,{x:Er-ri-Ya.width-Ya.minX,y:Ra.y+qn/2-Ya.height/2-Ya.minY})),ts+=1,Ra.x=ye,Ra.y+=qn),ee.moveElementTo(Dr,Ra),Dr.getParent().setClip({type:"rect",attrs:{x:Ra.x,y:Ra.y,width:Yn+ri,height:qn}}),Ra.x+=Yn+ri});else{(0,k.each)(hr,function(Dr){var on=Dr.getBBox();on.width>Aa&&(Aa=on.width)}),Le=Aa,Aa+=ri,Er&&(Aa=Math.min(Er,Aa),Le=Math.min(Er,Le)),this.pageWidth=Aa,this.pageHeight=Hr-Math.max(Ya.height,qn);var gr=Math.floor(this.pageHeight/qn);(0,k.each)(hr,function(Dr,on){on!==0&&on%gr==0&&(ts+=1,Ra.x+=Aa,Ra.y=Ne),ee.moveElementTo(Dr,Ra),Dr.getParent().setClip({type:"rect",attrs:{x:Ra.x,y:Ra.y,width:Aa,height:qn}}),Ra.y+=qn}),this.totalPagesCnt=ts,this.moveElementTo(da,{x:ye+Le/2-Ya.width/2-Ya.minX,y:Hr-Ya.height-Ya.minY})}this.pageHeight&&this.pageWidth&&Ot.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=ts,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(da),Ot.attr("matrix",this.getCurrentNavigationMatrix())},pe.prototype.drawNavigation=function(pt,Ot,ee,ye){var Ne={x:0,y:0},Ye=this.addGroup(pt,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),hr=this.drawArrow(Ye,Ne,"navigation-arrow-left",Ot==="horizontal"?"up":"left",ye);hr.on("click",this.onNavigationBack);var Er=hr.getBBox();Ne.x+=Er.width+2;var Hr=this.addShape(Ye,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:Ne.x,y:Ne.y+ye/2,text:ee,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),bn=Hr.getBBox();Ne.x+=bn.width+2;var ri=this.drawArrow(Ye,Ne,"navigation-arrow-right",Ot==="horizontal"?"down":"right",ye);return ri.on("click",this.onNavigationAfter),Ye},pe.prototype.updateNavigation=function(pt){var Ot=this.currentPageIndex+"/"+this.totalPagesCnt,ee=pt?pt.getChildren()[1]:this.getElementByLocalId("navigation-text"),ye=pt?pt.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),Ne=pt?pt.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),Ye=ee.getBBox();ee.attr("text",Ot);var hr=ee.getBBox();ee.attr("x",ee.attr("x")-(hr.width-Ye.width)/2),ye.attr("opacity",this.currentPageIndex===1?.45:1),ye.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),Ne.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),Ne.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},pe.prototype.drawArrow=function(pt,Ot,ee,ye,Ne){var Ye=Ot.x,hr=Ot.y,Er={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Hr=this.addShape(pt,{type:"path",id:this.getElementId(ee),name:ee,attrs:{path:[["M",Ye+Ne/2,hr],["L",Ye,hr+Ne],["L",Ye+Ne,hr+Ne],["Z"]],fill:"#000",cursor:"pointer"}});return Hr.attr("matrix",_t({x:Ye+Ne/2,y:hr+Ne/2},Er[ye])),Hr},pe.prototype.getCurrentNavigationMatrix=function(){var pt=this,Ot=pt.currentPageIndex,ee=pt.pageWidth,ye=pt.pageHeight,Ne=this.get("layout"),Ye=Ne==="horizontal"?{x:0,y:ye*(1-Ot)}:{x:ee*(1-Ot),y:0};return yt(Ye)},pe.prototype.applyItemStates=function(pt,Ot){var ee=this.getItemStates(pt),ye=ee.length>0;if(ye){var Ne=Ot.getChildren(),Ye=this.get("itemStates");(0,k.each)(Ne,function(hr){var Er=hr.get("name"),Hr=Er.split("-")[2],bn=fe(pt,Hr,Ye);bn&&(hr.attr(bn),Hr==="marker"&&!(hr.get("isStroke")&&hr.get("isFill"))&&(hr.get("isStroke")&&hr.attr("fill",null),hr.get("isFill")&&hr.attr("stroke",null)))})}},pe.prototype.getLimitItemWidth=function(){var pt=this.get("itemWidth"),Ot=this.get("maxItemWidth");return Ot?pt&&(Ot=pt<=Ot?pt:Ot):pt&&(Ot=pt),Ot},pe}(pi),ca=Pi,va=1.4,ji=.4,ai=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Or.textColor,textBaseline:"middle",fontFamily:Or.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Or.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},pe.prototype.isSlider=function(){return!0},pe.prototype.getValue=function(){return this.getCurrentValue()},pe.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},pe.prototype.setRange=function(pt,Ot){this.update({min:pt,max:Ot})},pe.prototype.setValue=function(pt){var Ot=this.getValue();this.set("value",pt);var ee=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(ee),this.delegateEmit("valuechanged",{originValue:Ot,value:pt})},pe.prototype.initEvent=function(){var pt=this.get("group");this.bindSliderEvent(pt),this.bindRailEvent(pt),this.bindTrackEvent(pt)},pe.prototype.drawLegendContent=function(pt){this.drawRail(pt),this.drawLabels(pt),this.fixedElements(pt),this.resetTrack(pt),this.resetTrackClip(pt),this.get("slidable")&&this.resetHandlers(pt)},pe.prototype.bindSliderEvent=function(pt){this.bindHandlersEvent(pt)},pe.prototype.bindHandlersEvent=function(pt){var Ot=this;pt.on("legend-handler-min:drag",function(ee){var ye=Ot.getValueByCanvasPoint(ee.x,ee.y),Ne=Ot.getCurrentValue(),Ye=Ne[1];Ye<ye&&(Ye=ye),Ot.setValue([ye,Ye])}),pt.on("legend-handler-max:drag",function(ee){var ye=Ot.getValueByCanvasPoint(ee.x,ee.y),Ne=Ot.getCurrentValue(),Ye=Ne[0];Ye>ye&&(Ye=ye),Ot.setValue([Ye,ye])})},pe.prototype.bindRailEvent=function(pt){},pe.prototype.bindTrackEvent=function(pt){var Ot=this,ee=null;pt.on("legend-track:dragstart",function(ye){ee={x:ye.x,y:ye.y}}),pt.on("legend-track:drag",function(ye){if(!!ee){var Ne=Ot.getValueByCanvasPoint(ee.x,ee.y),Ye=Ot.getValueByCanvasPoint(ye.x,ye.y),hr=Ot.getCurrentValue(),Er=hr[1]-hr[0],Hr=Ot.getRange(),bn=Ye-Ne;bn<0?hr[0]+bn>Hr.min?Ot.setValue([hr[0]+bn,hr[1]+bn]):Ot.setValue([Hr.min,Hr.min+Er]):bn>0&&(bn>0&&hr[1]+bn<Hr.max?Ot.setValue([hr[0]+bn,hr[1]+bn]):Ot.setValue([Hr.max-Er,Hr.max])),ee={x:ye.x,y:ye.y}}}),pt.on("legend-track:dragend",function(ye){ee=null})},pe.prototype.drawLabels=function(pt){this.drawLabel("min",pt),this.drawLabel("max",pt)},pe.prototype.drawLabel=function(pt,Ot){var ee=this.get("label"),ye=ee.style,Ne=ee.align,Ye=this.get(pt),hr=this.getLabelAlignAttrs(pt,Ne),Er="label-"+pt;this.addShape(Ot,{type:"text",id:this.getElementId(Er),name:"legend-label-"+pt,attrs:(0,O.__assign)((0,O.__assign)({x:0,y:0,text:Ye},ye),hr)})},pe.prototype.getLabelAlignAttrs=function(pt,Ot){var ee=this.isVertical(),ye="center",Ne="middle";return ee?(ye="start",Ot!=="rail"?pt==="min"?Ne="top":Ne="bottom":Ne="top"):Ot!=="rail"?(Ne="top",pt==="min"?ye="start":ye="end"):(ye="start",Ne="middle"),{textAlign:ye,textBaseline:Ne}},pe.prototype.getRailPath=function(pt,Ot,ee,ye){var Ne=this.get("rail"),Ye=Ne.size,hr=Ne.defaultLength,Er=Ne.type,Hr=this.isVertical(),bn=hr,ri=ee,qn=ye;ri||(ri=Hr?Ye:bn),qn||(qn=Hr?bn:Ye);var da=[];return Er==="color"?(da.push(["M",pt,Ot]),da.push(["L",pt+ri,Ot]),da.push(["L",pt+ri,Ot+qn]),da.push(["L",pt,Ot+qn]),da.push(["Z"])):(da.push(["M",pt+ri,Ot]),da.push(["L",pt+ri,Ot+qn]),da.push(["L",pt,Ot+qn]),da.push(["Z"])),da},pe.prototype.drawRail=function(pt){var Ot=this.get("rail"),ee=Ot.style;this.addShape(pt,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,O.__assign)({path:this.getRailPath(0,0)},ee)})},pe.prototype.getTrackColor=function(pt){var Ot=pt.length;if(!Ot)return null;if(Ot===1)return pt[0];var ee;this.isVertical()?ee="l(90)":ee="l(0)";for(var ye=0;ye<Ot;ye++){var Ne=ye/(Ot-1);ee+=" "+Ne+":"+pt[ye]}return ee},pe.prototype.getTrackPath=function(pt){var Ot=this.getRailShape(pt),ee=Ot.attr("path");return(0,k.clone)(ee)},pe.prototype.getClipTrackAttrs=function(pt){var Ot=this.getCurrentValue(),ee=Ot[0],ye=Ot[1],Ne=this.getRailBBox(pt),Ye=this.getPointByValue(ee,pt),hr=this.getPointByValue(ye,pt),Er=this.isVertical(),Hr,bn,ri,qn;return Er?(Hr=Ne.minX,bn=Ye.y,ri=Ne.width,qn=hr.y-Ye.y):(Hr=Ye.x,bn=Ne.minY,ri=hr.x-Ye.x,qn=Ne.height),{x:Hr,y:bn,width:ri,height:qn}},pe.prototype.getTrackAttrs=function(pt){var Ot=this.get("track"),ee=this.get("colors"),ye=this.getTrackPath(pt);return(0,k.mix)({path:ye,fill:this.getTrackColor(ee)},Ot.style)},pe.prototype.resetTrackClip=function(pt){var Ot=pt||this.get("group"),ee=this.getElementId("track"),ye=Ot.findById(ee),Ne=ye.getClip(),Ye=this.getClipTrackAttrs(pt);Ne?Ne.attr(Ye):ye.setClip({type:"rect",attrs:Ye})},pe.prototype.resetTrack=function(pt){var Ot=this.getElementId("track"),ee=pt.findById(Ot),ye=this.getTrackAttrs(pt);ee?ee.attr(ye):this.addShape(pt,{type:"path",id:Ot,draggable:this.get("slidable"),name:"legend-track",attrs:ye})},pe.prototype.getPointByValue=function(pt,Ot){var ee=this.getRange(),ye=ee.min,Ne=ee.max,Ye=(pt-ye)/(Ne-ye),hr=this.getRailBBox(Ot),Er=this.isVertical(),Hr={x:0,y:0};return Er?(Hr.x=hr.minX+hr.width/2,Hr.y=ot(hr.minY,hr.maxY,Ye)):(Hr.x=ot(hr.minX,hr.maxX,Ye),Hr.y=hr.minY+hr.height/2),Hr},pe.prototype.getRailShape=function(pt){var Ot=pt||this.get("group");return Ot.findById(this.getElementId("rail"))},pe.prototype.getRailBBox=function(pt){var Ot=this.getRailShape(pt),ee=Ot.getBBox();return ee},pe.prototype.getRailCanvasBBox=function(){var pt=this.get("group"),Ot=pt.findById(this.getElementId("rail")),ee=Ot.getCanvasBBox();return ee},pe.prototype.isVertical=function(){return this.get("layout")==="vertical"},pe.prototype.getValueByCanvasPoint=function(pt,Ot){var ee=this.getRange(),ye=ee.min,Ne=ee.max,Ye=this.getRailCanvasBBox(),hr=this.isVertical(),Er=this.get("step"),Hr;hr?Hr=(Ot-Ye.minY)/Ye.height:Hr=(pt-Ye.minX)/Ye.width;var bn=ot(ye,Ne,Hr);if(Er){var ri=Math.round((bn-ye)/Er);bn=ye+ri*Er}return bn>Ne&&(bn=Ne),bn<ye&&(bn=ye),bn},pe.prototype.getCurrentValue=function(){var pt=this.get("value");return pt||(pt=[this.get("min"),this.get("max")]),pt},pe.prototype.resetHandlers=function(pt){var Ot=this.getCurrentValue(),ee=Ot[0],ye=Ot[1];this.resetHandler(pt,"min",ee),this.resetHandler(pt,"max",ye)},pe.prototype.getHandlerPath=function(pt,Ot){var ee=this.isVertical(),ye=[],Ne=pt.size,Ye=Ot.x,hr=Ot.y,Er=Ne*va,Hr=Ne/2,bn=Ne/6;if(ee){var ri=Ye+Er*ji;ye.push(["M",Ye,hr]),ye.push(["L",ri,hr+Hr]),ye.push(["L",Ye+Er,hr+Hr]),ye.push(["L",Ye+Er,hr-Hr]),ye.push(["L",ri,hr-Hr]),ye.push(["Z"]),ye.push(["M",ri,hr+bn]),ye.push(["L",Ye+Er-2,hr+bn]),ye.push(["M",ri,hr-bn]),ye.push(["L",Ye+Er-2,hr-bn])}else{var qn=hr+Er*ji;ye.push(["M",Ye,hr]),ye.push(["L",Ye-Hr,qn]),ye.push(["L",Ye-Hr,hr+Er]),ye.push(["L",Ye+Hr,hr+Er]),ye.push(["L",Ye+Hr,qn]),ye.push(["Z"]),ye.push(["M",Ye-bn,qn]),ye.push(["L",Ye-bn,hr+Er-2]),ye.push(["M",Ye+bn,qn]),ye.push(["L",Ye+bn,hr+Er-2])}return ye},pe.prototype.resetHandler=function(pt,Ot,ee){var ye=this.getPointByValue(ee,pt),Ne=this.get("handler"),Ye=this.getHandlerPath(Ne,ye),hr=this.getElementId("handler-"+Ot),Er=pt.findById(hr),Hr=this.isVertical();Er?Er.attr("path",Ye):this.addShape(pt,{type:"path",name:"legend-handler-"+Ot,draggable:!0,id:hr,attrs:(0,O.__assign)((0,O.__assign)({path:Ye},Ne.style),{cursor:Hr?"ns-resize":"ew-resize"})})},pe.prototype.fixedElements=function(pt){var Ot=pt.findById(this.getElementId("rail")),ee=pt.findById(this.getElementId("label-min")),ye=pt.findById(this.getElementId("label-max")),Ne=this.getDrawPoint();this.isVertical()?this.fixedVertail(ee,ye,Ot,Ne):this.fixedHorizontal(ee,ye,Ot,Ne)},pe.prototype.fitRailLength=function(pt,Ot,ee,ye){var Ne=this.isVertical(),Ye=Ne?"height":"width",hr=this.get("label"),Er=hr.align,Hr=hr.spacing,bn=this.get("max"+(0,k.upperFirst)(Ye));if(bn){var ri=Er==="rail"?ee[Ye]+pt[Ye]+Ot[Ye]+Hr*2:ee[Ye],qn=ri-bn;qn>0&&this.changeRailLength(ye,Ye,ee[Ye]-qn)}},pe.prototype.changeRailLength=function(pt,Ot,ee){var ye=pt.getBBox(),Ne;Ot==="height"?Ne=this.getRailPath(ye.x,ye.y,ye.width,ee):Ne=this.getRailPath(ye.x,ye.y,ee,ye.height),pt.attr("path",Ne)},pe.prototype.changeRailPosition=function(pt,Ot,ee){var ye=pt.getBBox(),Ne=this.getRailPath(Ot,ee,ye.width,ye.height);pt.attr("path",Ne)},pe.prototype.fixedHorizontal=function(pt,Ot,ee,ye){var Ne=this.get("label"),Ye=Ne.align,hr=Ne.spacing,Er=ee.getBBox(),Hr=pt.getBBox(),bn=Ot.getBBox(),ri=Er.height;this.fitRailLength(Hr,bn,Er,ee),Er=ee.getBBox(),Ye==="rail"?(pt.attr({x:ye.x,y:ye.y+ri/2}),this.changeRailPosition(ee,ye.x+Hr.width+hr,ye.y),Ot.attr({x:ye.x+Hr.width+Er.width+hr*2,y:ye.y+ri/2})):Ye==="top"?(pt.attr({x:ye.x,y:ye.y}),Ot.attr({x:ye.x+Er.width,y:ye.y}),this.changeRailPosition(ee,ye.x,ye.y+Hr.height+hr)):(this.changeRailPosition(ee,ye.x,ye.y),pt.attr({x:ye.x,y:ye.y+Er.height+hr}),Ot.attr({x:ye.x+Er.width,y:ye.y+Er.height+hr}))},pe.prototype.fixedVertail=function(pt,Ot,ee,ye){var Ne=this.get("label"),Ye=Ne.align,hr=Ne.spacing,Er=ee.getBBox(),Hr=pt.getBBox(),bn=Ot.getBBox();if(this.fitRailLength(Hr,bn,Er,ee),Er=ee.getBBox(),Ye==="rail")pt.attr({x:ye.x,y:ye.y}),this.changeRailPosition(ee,ye.x,ye.y+Hr.height+hr),Ot.attr({x:ye.x,y:ye.y+Hr.height+Er.height+hr*2});else if(Ye==="right")pt.attr({x:ye.x+Er.width+hr,y:ye.y}),this.changeRailPosition(ee,ye.x,ye.y),Ot.attr({x:ye.x+Er.width+hr,y:ye.y+Er.height});else{var ri=Math.max(Hr.width,bn.width);pt.attr({x:ye.x,y:ye.y}),this.changeRailPosition(ee,ye.x+ri+hr,ye.y),Ot.attr({x:ye.x,y:ye.y+Er.height})}},pe}(pi),Fe=ai,er=S(55223),Ir="g2-tooltip",hn="g2-tooltip-title",ci="g2-tooltip-list",wa="g2-tooltip-list-item",no="g2-tooltip-marker",ls="g2-tooltip-value",Jo="g2-tooltip-name",ps="g2-tooltip-crosshair-x",Ks="g2-tooltip-crosshair-y",Fo,Vs=(Fo={},Fo[""+Ir]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Or.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Fo[""+hn]={marginBottom:"4px"},Fo[""+ci]={margin:"0px",listStyleType:"none",padding:"0px"},Fo[""+wa]={listStyleType:"none",marginBottom:"4px"},Fo[""+no]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Fo[""+ls]={display:"inline-block",float:"right",marginLeft:"30px"},Fo[""+ps]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Fo[""+Ks]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Fo);function $s(Ve,pe,pt,Ot,ee){var ye={left:Ve<ee.x,right:Ve+pt>ee.x+ee.width,top:pe<ee.y,bottom:pe+Ot>ee.y+ee.height};return ye}function zs(Ve,pe,pt,Ot,ee,ye){var Ne=Ve,Ye=pe;switch(ye){case"left":Ne=Ve-Ot-pt,Ye=pe-ee/2;break;case"right":Ne=Ve+pt,Ye=pe-ee/2;break;case"top":Ne=Ve-Ot/2,Ye=pe-ee-pt;break;case"bottom":Ne=Ve-Ot/2,Ye=pe+pt;break;default:Ne=Ve+pt,Ye=pe-ee-pt;break}return{x:Ne,y:Ye}}function Ou(Ve,pe,pt,Ot,ee,ye,Ne){var Ye=zs(Ve,pe,pt,Ot,ee,ye);if(Ne){var hr=$s(Ye.x,Ye.y,Ot,ee,Ne);ye==="auto"?(hr.right&&(Ye.x=Math.max(0,Ve-Ot-pt)),hr.top&&(Ye.y=Math.max(0,pe-ee-pt))):ye==="top"||ye==="bottom"?(hr.left&&(Ye.x=Ne.x),hr.right&&(Ye.x=Ne.x+Ne.width-Ot),ye==="top"&&hr.top&&(Ye.y=pe+pt),ye==="bottom"&&hr.bottom&&(Ye.y=pe-ee-pt)):(hr.top&&(Ye.y=Ne.y),hr.bottom&&(Ye.y=Ne.y+Ne.height-ee),ye==="left"&&hr.left&&(Ye.x=Ve+pt),ye==="right"&&hr.right&&(Ye.x=Ve-Ot-pt))}return Ye}function au(Ve,pe){var pt=!1;return(0,k.each)(pe,function(Ot){if((0,k.hasKey)(Ve,Ot))return pt=!0,!1}),pt}var Vu=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Ir+'"><div class="'+hn+'"></div><ul class="'+ci+'"></ul></div>',itemTpl:'<li class="'+wa+`" data-index={index}>
          <span class="`+no+`" style="background:{color}"></span>
          <span class="`+Jo+`">{name}</span>:
          <span class="`+ls+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+ps+'"></div>',yCrosshairTpl:'<div class="'+Ks+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Ir,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:Vs})},pe.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},pe.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},pe.prototype.show=function(){var pt=this.getContainer();!pt||this.destroyed||(this.set("visible",!0),(0,vi.Z)(pt,{visibility:"visible"}),this.setCrossHairsVisible(!0))},pe.prototype.hide=function(){var pt=this.getContainer();!pt||this.destroyed||(this.set("visible",!1),(0,vi.Z)(pt,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},pe.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},pe.prototype.setLocation=function(pt){this.set("x",pt.x),this.set("y",pt.y),this.resetPosition()},pe.prototype.setCrossHairsVisible=function(pt){var Ot=pt?"":"none",ee=this.get("xCrosshairDom"),ye=this.get("yCrosshairDom");ee&&(0,vi.Z)(ee,{display:Ot}),ye&&(0,vi.Z)(ye,{display:Ot})},pe.prototype.initContainer=function(){if(Ve.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var pt=this.getHtmlContentNode();this.get("parent").appendChild(pt),this.set("container",pt),this.resetStyles(),this.applyStyles()}},pe.prototype.updateInner=function(pt){this.get("customContent")?this.renderCustomContent():(au(pt,["title","showTitle"])&&this.resetTitle(),(0,k.hasKey)(pt,"items")&&this.renderItems()),Ve.prototype.updateInner.call(this,pt)},pe.prototype.initDom=function(){this.cacheDoms()},pe.prototype.removeDom=function(){Ve.prototype.removeDom.call(this),this.clearCrosshairs()},pe.prototype.resetPosition=function(){var pt=this.get("x"),Ot=this.get("y"),ee=this.get("offset"),ye=this.getOffset(),Ne=ye.offsetX,Ye=ye.offsetY,hr=this.get("position"),Er=this.get("region"),Hr=this.getContainer(),bn=this.getBBox(),ri=bn.width,qn=bn.height,da;Er&&(da=gt(Er));var Ya=Ou(pt,Ot,ee,ri,qn,hr,da);(0,vi.Z)(Hr,{left:Kt(Ya.x+Ne),top:Kt(Ya.y+Ye)}),this.resetCrosshairs()},pe.prototype.renderCustomContent=function(){var pt=this.getHtmlContentNode(),Ot=this.get("parent"),ee=this.get("container");ee&&ee.parentNode===Ot?Ot.replaceChild(pt,ee):Ot.appendChild(pt),this.set("container",pt),this.resetStyles(),this.applyStyles()},pe.prototype.getHtmlContentNode=function(){var pt,Ot=this.get("customContent");if(Ot){var ee=Ot(this.get("title"),this.get("items"));(0,k.isElement)(ee)?pt=ee:pt=(0,Po.Z)(ee)}return pt},pe.prototype.cacheDoms=function(){var pt=this.getContainer(),Ot=pt.getElementsByClassName(hn)[0],ee=pt.getElementsByClassName(ci)[0];this.set("titleDom",Ot),this.set("listDom",ee)},pe.prototype.resetTitle=function(){var pt=this.get("title"),Ot=this.get("showTitle");Ot&&pt?this.setTitle(pt):this.setTitle("")},pe.prototype.setTitle=function(pt){var Ot=this.get("titleDom");Ot&&(Ot.innerText=pt)},pe.prototype.resetCrosshairs=function(){var pt=this.get("crosshairsRegion"),Ot=this.get("crosshairs");if(!pt||!Ot)this.clearCrosshairs();else{var ee=gt(pt),ye=this.get("xCrosshairDom"),Ne=this.get("yCrosshairDom");Ot==="x"?(this.resetCrosshair("x",ee),Ne&&(Ne.remove(),this.set("yCrosshairDom",null))):Ot==="y"?(this.resetCrosshair("y",ee),ye&&(ye.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",ee),this.resetCrosshair("y",ee)),this.setCrossHairsVisible(this.get("visible"))}},pe.prototype.resetCrosshair=function(pt,Ot){var ee=this.checkCrosshair(pt),ye=this.get(pt);pt==="x"?(0,vi.Z)(ee,{left:Kt(ye),top:Kt(Ot.y),height:Kt(Ot.height)}):(0,vi.Z)(ee,{top:Kt(ye),left:Kt(Ot.x),width:Kt(Ot.width)})},pe.prototype.checkCrosshair=function(pt){var Ot=pt+"CrosshairDom",ee=pt+"CrosshairTpl",ye="CROSSHAIR_"+pt.toUpperCase(),Ne=D[ye],Ye=this.get(Ot),hr=this.get("parent");return Ye||(Ye=(0,Po.Z)(this.get(ee)),this.applyStyle(Ne,Ye),hr.appendChild(Ye),this.set(Ot,Ye)),Ye},pe.prototype.renderItems=function(){this.clearItemDoms();var pt=this.get("items"),Ot=this.get("itemTpl"),ee=this.get("listDom");ee&&((0,k.each)(pt,function(ye){var Ne=er.default.toCSSGradient(ye.color),Ye=(0,O.__assign)((0,O.__assign)({},ye),{color:Ne}),hr=(0,k.substitute)(Ot,Ye),Er=(0,Po.Z)(hr);ee.appendChild(Er)}),this.applyChildrenStyles(ee,this.get("domStyles")))},pe.prototype.clearItemDoms=function(){this.get("listDom")&&it(this.get("listDom"))},pe.prototype.clearCrosshairs=function(){var pt=this.get("xCrosshairDom"),Ot=this.get("yCrosshairDom");pt&&pt.remove(),Ot&&Ot.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},pe}(An),ou=Vu,ds={opacity:0},Ko={stroke:"#C5C5C5",strokeOpacity:.85},Lu={fill:"#CACED4",opacity:.85},Gl=S(57350),Du=S(2443);function Wu(Ve){return(0,k.map)(Ve,function(pe,pt){var Ot=pt===0?"M":"L",ee=pe[0],ye=pe[1];return[Ot,ee,ye]})}function Ul(Ve){return Wu(Ve)}function Ql(Ve){if(Ve.length<=2)return Ul(Ve);var pe=[];(0,k.each)(Ve,function(Ne){(0,k.isEqual)(Ne,pe.slice(pe.length-2))||pe.push(Ne[0],Ne[1])});var pt=(0,Gl.catmullRom2Bezier)(pe,!1),Ot=(0,k.head)(Ve),ee=Ot[0],ye=Ot[1];return pt.unshift(["M",ee,ye]),pt}function Ku(Ve,pe,pt,Ot){Ot===void 0&&(Ot=!0);var ee=new Du.Linear({values:Ve}),ye=new Du.Category({values:(0,k.map)(Ve,function(Ye,hr){return hr})}),Ne=(0,k.map)(Ve,function(Ye,hr){return[ye.scale(hr)*pe,pt-ee.scale(Ye)*pt]});return Ot?Ql(Ne):Ul(Ne)}function Nc(Ve,pe,pt){var Ot=(0,O.__spreadArrays)(Ve);return Ot.push(["L",pe,0]),Ot.push(["L",0,pt]),Ot.push(["Z"]),Ot}var J=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:ds,lineStyle:Ko,areaStyle:Lu})},pe.prototype.renderInner=function(pt){var Ot=this.cfg,ee=Ot.width,ye=Ot.height,Ne=Ot.data,Ye=Ot.smooth,hr=Ot.isArea,Er=Ot.backgroundStyle,Hr=Ot.lineStyle,bn=Ot.areaStyle;this.addShape(pt,{id:this.getElementId("background"),type:"rect",attrs:(0,O.__assign)({x:0,y:0,width:ee,height:ye},Er)});var ri=Ku(Ne,ee,ye,Ye);if(this.addShape(pt,{id:this.getElementId("line"),type:"path",attrs:(0,O.__assign)({path:ri},Hr)}),hr){var qn=Nc(ri,ee,ye);this.addShape(pt,{id:this.getElementId("area"),type:"path",attrs:(0,O.__assign)({path:qn},bn)})}},pe.prototype.applyOffset=function(){var pt=this.cfg,Ot=pt.x,ee=pt.y;this.moveElementTo(this.get("group"),{x:Ot,y:ee})},pe}(Nt),Ct=null,me={fill:"#416180",opacity:.05},jt={fill:"#5B8FF9",opacity:.15,cursor:"move"},ke=10,ir={width:ke,height:24},Gr={textBaseline:"middle",fill:"#000",opacity:.45},pn="sliderchange",dn={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},ti=function(Ve){(0,O.__extends)(pe,Ve);function pe(){return Ve!==null&&Ve.apply(this,arguments)||this}return pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"handler",x:0,y:0,width:10,height:24,style:dn})},pe.prototype.renderInner=function(pt){var Ot=this.cfg,ee=Ot.width,ye=Ot.height,Ne=Ot.style,Ye=Ne.fill,hr=Ne.stroke,Er=Ne.radius,Hr=Ne.opacity,bn=Ne.cursor;this.addShape(pt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:ee,height:ye,fill:Ye,stroke:hr,radius:Er,opacity:Hr,cursor:bn}});var ri=1/3*ee,qn=2/3*ee,da=1/4*ye,Ya=3/4*ye;this.addShape(pt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:ri,y1:da,x2:ri,y2:Ya,stroke:hr,cursor:bn}}),this.addShape(pt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:qn,y1:da,x2:qn,y2:Ya,stroke:hr,cursor:bn}})},pe.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},pe.prototype.initEvent=function(){this.bindEvents()},pe.prototype.bindEvents=function(){var pt=this;this.get("group").on("mouseenter",function(){var Ot=pt.get("style").highLightFill;pt.getElementByLocalId("background").attr("fill",Ot),pt.draw()}),this.get("group").on("mouseleave",function(){var Ot=pt.get("style").fill;pt.getElementByLocalId("background").attr("fill",Ot),pt.draw()})},pe.prototype.draw=function(){var pt=this.get("container").get("canvas");pt&&pt.draw()},pe}(Nt),Nn=null,Fa=function(Ve){(0,O.__extends)(pe,Ve);function pe(){var pt=Ve!==null&&Ve.apply(this,arguments)||this;return pt.onMouseDown=function(Ot){return function(ee){pt.currentTarget=Ot;var ye=ee.originalEvent;ye.stopPropagation(),ye.preventDefault(),pt.prevX=(0,k.get)(ye,"touches.0.pageX",ye.pageX),pt.prevY=(0,k.get)(ye,"touches.0.pageY",ye.pageY);var Ne=pt.getContainerDOM();Ne.addEventListener("mousemove",pt.onMouseMove),Ne.addEventListener("mouseup",pt.onMouseUp),Ne.addEventListener("mouseleave",pt.onMouseUp),Ne.addEventListener("touchmove",pt.onMouseMove),Ne.addEventListener("touchend",pt.onMouseUp),Ne.addEventListener("touchcancel",pt.onMouseUp)}},pt.onMouseMove=function(Ot){var ee=pt.cfg.width,ye=[pt.get("start"),pt.get("end")];Ot.stopPropagation(),Ot.preventDefault();var Ne=(0,k.get)(Ot,"touches.0.pageX",Ot.pageX),Ye=(0,k.get)(Ot,"touches.0.pageY",Ot.pageY),hr=Ne-pt.prevX,Er=pt.adjustOffsetRange(hr/ee);pt.updateStartEnd(Er),pt.updateUI(pt.getElementByLocalId("foreground"),pt.getElementByLocalId("minText"),pt.getElementByLocalId("maxText")),pt.prevX=Ne,pt.prevY=Ye,pt.draw(),pt.emit(pn,[pt.get("start"),pt.get("end")].sort()),pt.delegateEmit("valuechanged",{originValue:ye,value:[pt.get("start"),pt.get("end")]})},pt.onMouseUp=function(){pt.currentTarget&&(pt.currentTarget=void 0);var Ot=pt.getContainerDOM();Ot&&(Ot.removeEventListener("mousemove",pt.onMouseMove),Ot.removeEventListener("mouseup",pt.onMouseUp),Ot.removeEventListener("mouseleave",pt.onMouseUp),Ot.removeEventListener("touchmove",pt.onMouseMove),Ot.removeEventListener("touchend",pt.onMouseUp),Ot.removeEventListener("touchcancel",pt.onMouseUp))},pt}return pe.prototype.setRange=function(pt,Ot){this.set("minLimit",pt),this.set("maxLimit",Ot);var ee=this.get("start"),ye=this.get("end"),Ne=(0,k.clamp)(ee,pt,Ot),Ye=(0,k.clamp)(ye,pt,Ot);!this.get("isInit")&&(ee!==Ne||ye!==Ye)&&this.setValue([Ne,Ye])},pe.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},pe.prototype.setValue=function(pt){var Ot=this.getRange();if((0,k.isArray)(pt)&&pt.length===2){var ee=[this.get("start"),this.get("end")];this.update({start:(0,k.clamp)(pt[0],Ot.min,Ot.max),end:(0,k.clamp)(pt[1],Ot.min,Ot.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:ee,value:pt})}},pe.prototype.getValue=function(){return[this.get("start"),this.get("end")]},pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:me,foregroundStyle:jt,handlerStyle:ir,textStyle:Gr}})},pe.prototype.update=function(pt){var Ot=pt.start,ee=pt.end,ye=(0,O.__assign)({},pt);(0,k.isNil)(Ot)||(ye.start=(0,k.clamp)(Ot,0,1)),(0,k.isNil)(ee)||(ye.end=(0,k.clamp)(ee,0,1)),Ve.prototype.update.call(this,ye),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},pe.prototype.init=function(){this.set("start",(0,k.clamp)(this.get("start"),0,1)),this.set("end",(0,k.clamp)(this.get("end"),0,1)),Ve.prototype.init.call(this)},pe.prototype.renderInner=function(pt){var Ot=this.cfg,ee=Ot.start,ye=Ot.end,Ne=Ot.width,Ye=Ot.height,hr=Ot.trendCfg,Er=hr===void 0?{}:hr,Hr=Ot.minText,bn=Ot.maxText,ri=Ot.backgroundStyle,qn=ri===void 0?{}:ri,da=Ot.foregroundStyle,Ya=da===void 0?{}:da,Ra=Ot.textStyle,ts=Ra===void 0?{}:Ra,$o=Ot.handlerStyle,Aa=$o===void 0?{}:$o,Le=ee*Ne,gr=ye*Ne;(0,k.size)((0,k.get)(Er,"data"))&&this.addComponent(pt,(0,O.__assign)({component:J,id:this.getElementId("trend"),x:0,y:0,width:Ne,height:Ye},Er)),this.addShape(pt,{id:this.getElementId("background"),type:"rect",attrs:(0,O.__assign)({x:0,y:0,width:Ne,height:Ye},qn)});var Dr=this.addShape(pt,{id:this.getElementId("minText"),type:"text",attrs:(0,O.__assign)({y:Ye/2,textAlign:"right",text:Hr,silent:!1},ts)}),on=this.addShape(pt,{id:this.getElementId("maxText"),type:"text",attrs:(0,O.__assign)({y:Ye/2,textAlign:"left",text:bn,silent:!1},ts)}),Yn=this.addShape(pt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,O.__assign)({y:0,height:Ye},Ya)}),ia=(0,k.get)(Aa,"height",24);this.minHandler=this.addComponent(pt,(0,O.__assign)({component:ti,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(Ye-ia)/2,width:Ne,height:ia,cursor:"ew-resize"},Aa)),this.maxHandler=this.addComponent(pt,(0,O.__assign)({component:ti,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(Ye-ia)/2,width:Ne,height:ia,cursor:"ew-resize"},Aa)),this.updateUI(Yn,Dr,on)},pe.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},pe.prototype.initEvent=function(){this.bindEvents()},pe.prototype.updateUI=function(pt,Ot,ee){var ye=this.cfg,Ne=ye.start,Ye=ye.end,hr=ye.width,Er=ye.minText,Hr=ye.maxText,bn=ye.handlerStyle,ri=Ne*hr,qn=Ye*hr;pt.attr("x",ri),pt.attr("width",qn-ri);var da=(0,k.get)(bn,"width",ke);Ot.attr("text",Er),ee.attr("text",Hr);var Ya=this._dodgeText([ri,qn],Ot,ee),Ra=Ya[0],ts=Ya[1];this.minHandler&&(this.minHandler.update({x:ri-da/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,k.each)(Ra,function($o,Aa){return Ot.attr(Aa,$o)}),this.maxHandler&&(this.maxHandler.update({x:qn-da/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,k.each)(ts,function($o,Aa){return ee.attr(Aa,$o)})},pe.prototype.bindEvents=function(){var pt=this.get("group");pt.on("handler-min:mousedown",this.onMouseDown("minHandler")),pt.on("handler-min:touchstart",this.onMouseDown("minHandler")),pt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),pt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var Ot=pt.findById(this.getElementId("foreground"));Ot.on("mousedown",this.onMouseDown("foreground")),Ot.on("touchstart",this.onMouseDown("foreground"))},pe.prototype.adjustOffsetRange=function(pt){var Ot=this.cfg,ee=Ot.start,ye=Ot.end;switch(this.currentTarget){case"minHandler":{var Ne=0-ee,Ye=1-ee;return Math.min(Ye,Math.max(Ne,pt))}case"maxHandler":{var Ne=0-ye,Ye=1-ye;return Math.min(Ye,Math.max(Ne,pt))}case"foreground":{var Ne=0-ee,Ye=1-ye;return Math.min(Ye,Math.max(Ne,pt))}}},pe.prototype.updateStartEnd=function(pt){var Ot=this.cfg,ee=Ot.start,ye=Ot.end;switch(this.currentTarget){case"minHandler":ee+=pt;break;case"maxHandler":ye+=pt;break;case"foreground":ee+=pt,ye+=pt;break}this.set("start",ee),this.set("end",ye)},pe.prototype._dodgeText=function(pt,Ot,ee){var ye,Ne,Ye=this.cfg,hr=Ye.handlerStyle,Er=Ye.width,Hr=2,bn=(0,k.get)(hr,"width",ke),ri=pt[0],qn=pt[1],da=!1;ri>qn&&(ye=[qn,ri],ri=ye[0],qn=ye[1],Ne=[ee,Ot],Ot=Ne[0],ee=Ne[1],da=!0);var Ya=Ot.getBBox(),Ra=ee.getBBox(),ts=Ya.width>ri-Hr?{x:ri+bn/2+Hr,textAlign:"left"}:{x:ri-bn/2-Hr,textAlign:"right"},$o=Ra.width>Er-qn-Hr?{x:qn-bn/2-Hr,textAlign:"right"}:{x:qn+bn/2+Hr,textAlign:"left"};return da?[$o,ts]:[ts,$o]},pe.prototype.draw=function(){var pt=this.get("container"),Ot=pt&&pt.get("canvas");Ot&&Ot.draw()},pe.prototype.getContainerDOM=function(){var pt=this.get("container"),Ot=pt&&pt.get("canvas");return Ot&&Ot.get("container")},pe}(Nt),Xa=null,Wi=S(57817),rs={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},io={default:rs,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Cs=function(Ve){(0,O.__extends)(pe,Ve);function pe(){var pt=Ve!==null&&Ve.apply(this,arguments)||this;return pt.clearEvents=k.noop,pt.onStartEvent=function(Ot){return function(ee){pt.isMobile=Ot,ee.originalEvent.preventDefault();var ye=Ot?(0,k.get)(ee.originalEvent,"touches.0.clientX"):ee.clientX,Ne=Ot?(0,k.get)(ee.originalEvent,"touches.0.clientY"):ee.clientY;pt.startPos=pt.cfg.isHorizontal?ye:Ne,pt.bindLaterEvent()}},pt.bindLaterEvent=function(){var Ot=pt.getContainerDOM(),ee=[];pt.isMobile?ee=[(0,Wi.Z)(Ot,"touchmove",pt.onMouseMove),(0,Wi.Z)(Ot,"touchend",pt.onMouseUp),(0,Wi.Z)(Ot,"touchcancel",pt.onMouseUp)]:ee=[(0,Wi.Z)(Ot,"mousemove",pt.onMouseMove),(0,Wi.Z)(Ot,"mouseup",pt.onMouseUp),(0,Wi.Z)(Ot,"mouseleave",pt.onMouseUp)],pt.clearEvents=function(){ee.forEach(function(ye){ye.remove()})}},pt.onMouseMove=function(Ot){var ee=pt.cfg,ye=ee.isHorizontal,Ne=ee.thumbOffset;Ot.preventDefault();var Ye=pt.isMobile?(0,k.get)(Ot,"touches.0.clientX"):Ot.clientX,hr=pt.isMobile?(0,k.get)(Ot,"touches.0.clientY"):Ot.clientY,Er=ye?Ye:hr,Hr=Er-pt.startPos;pt.startPos=Er,pt.updateThumbOffset(Ne+Hr)},pt.onMouseUp=function(Ot){Ot.preventDefault(),pt.clearEvents()},pt.onTrackClick=function(Ot){var ee=pt.cfg,ye=ee.isHorizontal,Ne=ee.x,Ye=ee.y,hr=ee.thumbLen,Er=pt.getContainerDOM(),Hr=Er.getBoundingClientRect(),bn=Ot.clientX,ri=Ot.clientY,qn=ye?bn-Hr.left-Ne-hr/2:ri-Hr.top-Ye-hr/2,da=pt.validateRange(qn);pt.updateThumbOffset(da)},pt.onThumbMouseOver=function(){var Ot=pt.cfg.theme.hover.thumbColor;pt.getElementByLocalId("thumb").attr("stroke",Ot),pt.draw()},pt.onThumbMouseOut=function(){var Ot=pt.cfg.theme.default.thumbColor;pt.getElementByLocalId("thumb").attr("stroke",Ot),pt.draw()},pt}return pe.prototype.setRange=function(pt,Ot){this.set("minLimit",pt),this.set("maxLimit",Ot);var ee=this.getValue(),ye=(0,k.clamp)(ee,pt,Ot);ee!==ye&&!this.get("isInit")&&this.setValue(ye)},pe.prototype.getRange=function(){var pt=this.get("minLimit")||0,Ot=this.get("maxLimit")||1;return{min:pt,max:Ot}},pe.prototype.setValue=function(pt){var Ot=this.getRange(),ee=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,k.clamp)(pt,Ot.min,Ot.max)}),this.delegateEmit("valuechange",{originalValue:ee,value:this.getValue()})},pe.prototype.getValue=function(){return(0,k.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},pe.prototype.getDefaultCfg=function(){var pt=Ve.prototype.getDefaultCfg.call(this);return(0,O.__assign)((0,O.__assign)({},pt),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:io})},pe.prototype.renderInner=function(pt){this.renderTrackShape(pt),this.renderThumbShape(pt)},pe.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},pe.prototype.initEvent=function(){this.bindEvents()},pe.prototype.renderTrackShape=function(pt){var Ot=this.cfg,ee=Ot.trackLen,ye=Ot.theme,Ne=ye===void 0?{default:{}}:ye,Ye=Ne.default,hr=Ye.lineCap,Er=Ye.trackColor,Hr=Ye.size,bn=this.get("isHorizontal")?{x1:0+Hr/2,y1:Hr/2,x2:ee-Hr/2,y2:Hr/2,lineWidth:Hr,stroke:Er,lineCap:hr}:{x1:Hr/2,y1:0+Hr/2,x2:Hr/2,y2:ee-Hr/2,lineWidth:Hr,stroke:Er,lineCap:hr};return this.addShape(pt,{id:this.getElementId("track"),name:"track",type:"line",attrs:bn})},pe.prototype.renderThumbShape=function(pt){var Ot=this.cfg,ee=Ot.thumbOffset,ye=Ot.thumbLen,Ne=Ot.theme,Ye=Ne===void 0?{default:{}}:Ne,hr=Ye.default,Er=hr.size,Hr=hr.lineCap,bn=hr.thumbColor,ri=this.get("isHorizontal")?{x1:ee+Er/2,y1:Er/2,x2:ee+ye-Er/2,y2:Er/2,lineWidth:Er,stroke:bn,lineCap:Hr,cursor:"default"}:{x1:Er/2,y1:ee+Er/2,x2:Er/2,y2:ee+ye-Er/2,lineWidth:Er,stroke:bn,lineCap:Hr,cursor:"default"};return this.addShape(pt,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:ri})},pe.prototype.bindEvents=function(){var pt=this.get("group");pt.on("mousedown",this.onStartEvent(!1)),pt.on("mouseup",this.onMouseUp),pt.on("touchstart",this.onStartEvent(!0)),pt.on("touchend",this.onMouseUp);var Ot=pt.findById(this.getElementId("track"));Ot.on("click",this.onTrackClick);var ee=pt.findById(this.getElementId("thumb"));ee.on("mouseover",this.onThumbMouseOver),ee.on("mouseout",this.onThumbMouseOut)},pe.prototype.getContainerDOM=function(){var pt=this.get("container"),Ot=pt&&pt.get("canvas");return Ot&&Ot.get("container")},pe.prototype.validateRange=function(pt){var Ot=this.cfg,ee=Ot.thumbLen,ye=Ot.trackLen,Ne=pt;return pt+ee>ye?Ne=ye-ee:pt+ee<ee&&(Ne=0),Ne},pe.prototype.draw=function(){var pt=this.get("container"),Ot=pt&&pt.get("canvas");Ot&&Ot.draw()},pe.prototype.updateThumbOffset=function(pt){var Ot=this.cfg,ee=Ot.thumbOffset,ye=Ot.isHorizontal,Ne=Ot.thumbLen,Ye=Ot.size,hr=this.validateRange(pt);if(hr!==ee){var Er=this.getElementByLocalId("thumb");ye?Er.attr({x1:hr+Ye/2,x2:hr+Ne-Ye/2}):Er.attr({y1:hr+Ye/2,y2:hr+Ne-Ye/2}),this.emitOffsetChange(hr)}},pe.prototype.emitOffsetChange=function(pt){var Ot=this.cfg,ee=Ot.thumbOffset,ye=Ot.trackLen,Ne=Ot.thumbLen;this.cfg.thumbOffset=pt,this.emit("scrollchange",{thumbOffset:pt,ratio:(0,k.clamp)(pt/(ye-Ne),0,1)}),this.delegateEmit("valuechange",{originalValue:ee,value:pt})},pe}(Nt)},15110:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(60153),j=S(39014),y=S(49242),U={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},F=function(B){T.__extends(R,B);function R(N){var A=B.call(this,N)||this;return A.initCfg(),A}return R.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},R.prototype.clear=function(){},R.prototype.update=function(N){var A=this,D=this.get("defaultCfg");y.each(N,function(M,O){var k=A.get(O),V=M;k!==M&&(y.isObject(M)&&D[O]&&(V=y.deepMix({},D[O],M)),A.set(O,V))}),this.updateInner(N),this.afterUpdate(N)},R.prototype.updateInner=function(N){},R.prototype.afterUpdate=function(N){y.hasKey(N,"visible")&&(N.visible?this.show():this.hide()),y.hasKey(N,"capture")&&this.setCapture(N.capture)},R.prototype.getLayoutBBox=function(){return this.getBBox()},R.prototype.getLocationType=function(){return this.get("locationType")},R.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},R.prototype.setOffset=function(N,A){this.update({offsetX:N,offsetY:A})},R.prototype.setLocation=function(N){var A=T.__assign({},N);this.update(A)},R.prototype.getLocation=function(){var N=this,A={},D=this.get("locationType"),M=U[D];return y.each(M,function(O){A[O]=N.get(O)}),A},R.prototype.isList=function(){return!1},R.prototype.isSlider=function(){return!1},R.prototype.init=function(){},R.prototype.initCfg=function(){var N=this,A=this.get("defaultCfg");y.each(A,function(D,M){var O=N.get(M);if(y.isObject(O)){var k=y.deepMix({},D,O);N.set(M,k)}})},R}(j.Base);P.default=F},51964:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(60153),j=S(80478),y=S(49242),U=S(11594),F=S(15110),B=function(R){T.__extends(N,R);function N(){return R!==null&&R.apply(this,arguments)||this}return N.prototype.getDefaultCfg=function(){var A=R.prototype.getDefaultCfg.call(this);return T.__assign(T.__assign({},A),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},N.prototype.getContainer=function(){return this.get("container")},N.prototype.show=function(){var A=this.get("container");A.style.display="",this.set("visible",!0)},N.prototype.hide=function(){var A=this.get("container");A.style.display="none",this.set("visible",!1)},N.prototype.setCapture=function(A){var D=this.getContainer(),M=A?"auto":"none";D.style.pointerEvents=M,this.set("capture",A)},N.prototype.getBBox=function(){var A=this.getContainer(),D=parseFloat(A.style.left)||0,M=parseFloat(A.style.top)||0;return U.createBBox(D,M,A.clientWidth,A.clientHeight)},N.prototype.clear=function(){var A=this.get("container");U.clearDom(A)},N.prototype.destroy=function(){this.removeEvent(),this.removeDom(),R.prototype.destroy.call(this)},N.prototype.init=function(){R.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},N.prototype.initCapture=function(){this.setCapture(this.get("capture"))},N.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},N.prototype.initDom=function(){},N.prototype.initContainer=function(){var A=this.get("container");if(y.isNil(A)){A=this.createDom();var D=this.get("parent");y.isString(D)&&(D=document.getElementById(D),this.set("parent",D)),D.appendChild(A),this.set("container",A)}else y.isString(A)&&(A=document.getElementById(A),this.set("container",A));this.get("parent")||this.set("parent",A.parentNode)},N.prototype.resetStyles=function(){var A=this.get("domStyles"),D=this.get("defaultStyles");A?A=y.deepMix({},D,A):A=D,this.set("domStyles",A)},N.prototype.applyStyles=function(){var A=this.get("domStyles");if(!!A){var D=this.getContainer();this.applyChildrenStyles(D,A);var M=this.get("containerClassName");if(M&&U.hasClass(D,M)){var O=A[M];j.modifyCSS(D,O)}}},N.prototype.applyChildrenStyles=function(A,D){y.each(D,function(M,O){var k=A.getElementsByClassName(O);y.each(k,function(V){j.modifyCSS(V,M)})})},N.prototype.applyStyle=function(A,D){var M=this.get("domStyles");j.modifyCSS(D,M[A])},N.prototype.createDom=function(){var A=this.get("containerTpl");return j.createDom(A)},N.prototype.initEvent=function(){},N.prototype.removeDom=function(){var A=this.get("container");A&&A.parentNode.removeChild(A)},N.prototype.removeEvent=function(){},N.prototype.updateInner=function(A){y.hasKey(A,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},N.prototype.resetPosition=function(){},N}(F.default);P.default=B},7755:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CROSSHAIR_Y=P.CROSSHAIR_X=P.NAME_CLASS=P.VALUE_CLASS=P.MARKER_CLASS=P.LIST_ITEM_CLASS=P.LIST_CLASS=P.TITLE_CLASS=P.CONTAINER_CLASS=void 0,P.CONTAINER_CLASS="g2-tooltip",P.TITLE_CLASS="g2-tooltip-title",P.LIST_CLASS="g2-tooltip-list",P.LIST_ITEM_CLASS="g2-tooltip-list-item",P.MARKER_CLASS="g2-tooltip-marker",P.VALUE_CLASS="g2-tooltip-value",P.NAME_CLASS="g2-tooltip-name",P.CROSSHAIR_X="g2-tooltip-crosshair-x",P.CROSSHAIR_Y="g2-tooltip-crosshair-y"},55225:function(Vt,P,S){"use strict";var T;Object.defineProperty(P,"__esModule",{value:!0});var j=S(52782),y=S(7755);P.default=(T={},T[""+y.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:j.default.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},T[""+y.TITLE_CLASS]={marginBottom:"4px"},T[""+y.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},T[""+y.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},T[""+y.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},T[""+y.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},T[""+y.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},T[""+y.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},T)},88373:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(60153),y=S(55223),U=S(80478),F=S(49242),B=S(51964),R=S(11594),N=S(7755),A=S(55225),D=S(51227);function M(k,V){var X=!1;return F.each(V,function(K){if(F.hasKey(k,K))return X=!0,!1}),X}var O=function(k){j.__extends(V,k);function V(){return k!==null&&k.apply(this,arguments)||this}return V.prototype.getDefaultCfg=function(){var X=k.prototype.getDefaultCfg.call(this);return j.__assign(j.__assign({},X),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+N.CONTAINER_CLASS+'"><div class="'+N.TITLE_CLASS+'"></div><ul class="'+N.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+N.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+N.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+N.NAME_CLASS+`">{name}</span>:
          <span class="`+N.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+N.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+N.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:N.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:A.default})},V.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},V.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},V.prototype.show=function(){var X=this.getContainer();!X||this.destroyed||(this.set("visible",!0),U.modifyCSS(X,{visibility:"visible"}),this.setCrossHairsVisible(!0))},V.prototype.hide=function(){var X=this.getContainer();!X||this.destroyed||(this.set("visible",!1),U.modifyCSS(X,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},V.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},V.prototype.setLocation=function(X){this.set("x",X.x),this.set("y",X.y),this.resetPosition()},V.prototype.setCrossHairsVisible=function(X){var K=X?"":"none",q=this.get("xCrosshairDom"),ct=this.get("yCrosshairDom");q&&U.modifyCSS(q,{display:K}),ct&&U.modifyCSS(ct,{display:K})},V.prototype.initContainer=function(){if(k.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var X=this.getHtmlContentNode();this.get("parent").appendChild(X),this.set("container",X),this.resetStyles(),this.applyStyles()}},V.prototype.updateInner=function(X){this.get("customContent")?this.renderCustomContent():(M(X,["title","showTitle"])&&this.resetTitle(),F.hasKey(X,"items")&&this.renderItems()),k.prototype.updateInner.call(this,X)},V.prototype.initDom=function(){this.cacheDoms()},V.prototype.removeDom=function(){k.prototype.removeDom.call(this),this.clearCrosshairs()},V.prototype.resetPosition=function(){var X=this.get("x"),K=this.get("y"),q=this.get("offset"),ct=this.getOffset(),_t=ct.offsetX,yt=ct.offsetY,lt=this.get("position"),Lt=this.get("region"),wt=this.getContainer(),Gt=this.getBBox(),re=Gt.width,Qt=Gt.height,it;Lt&&(it=R.regionToBBox(Lt));var dt=D.getAlignPoint(X,K,q,re,Qt,lt,it);U.modifyCSS(wt,{left:R.toPx(dt.x+_t),top:R.toPx(dt.y+yt)}),this.resetCrosshairs()},V.prototype.renderCustomContent=function(){var X=this.getHtmlContentNode(),K=this.get("parent"),q=this.get("container");q&&q.parentNode===K?K.replaceChild(X,q):K.appendChild(X),this.set("container",X),this.resetStyles(),this.applyStyles()},V.prototype.getHtmlContentNode=function(){var X,K=this.get("customContent");if(K){var q=K(this.get("title"),this.get("items"));F.isElement(q)?X=q:X=U.createDom(q)}return X},V.prototype.cacheDoms=function(){var X=this.getContainer(),K=X.getElementsByClassName(N.TITLE_CLASS)[0],q=X.getElementsByClassName(N.LIST_CLASS)[0];this.set("titleDom",K),this.set("listDom",q)},V.prototype.resetTitle=function(){var X=this.get("title"),K=this.get("showTitle");K&&X?this.setTitle(X):this.setTitle("")},V.prototype.setTitle=function(X){var K=this.get("titleDom");K&&(K.innerText=X)},V.prototype.resetCrosshairs=function(){var X=this.get("crosshairsRegion"),K=this.get("crosshairs");if(!X||!K)this.clearCrosshairs();else{var q=R.regionToBBox(X),ct=this.get("xCrosshairDom"),_t=this.get("yCrosshairDom");K==="x"?(this.resetCrosshair("x",q),_t&&(_t.remove(),this.set("yCrosshairDom",null))):K==="y"?(this.resetCrosshair("y",q),ct&&(ct.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",q),this.resetCrosshair("y",q)),this.setCrossHairsVisible(this.get("visible"))}},V.prototype.resetCrosshair=function(X,K){var q=this.checkCrosshair(X),ct=this.get(X);X==="x"?U.modifyCSS(q,{left:R.toPx(ct),top:R.toPx(K.y),height:R.toPx(K.height)}):U.modifyCSS(q,{top:R.toPx(ct),left:R.toPx(K.x),width:R.toPx(K.width)})},V.prototype.checkCrosshair=function(X){var K=X+"CrosshairDom",q=X+"CrosshairTpl",ct="CROSSHAIR_"+X.toUpperCase(),_t=N[ct],yt=this.get(K),lt=this.get("parent");return yt||(yt=U.createDom(this.get(q)),this.applyStyle(_t,yt),lt.appendChild(yt),this.set(K,yt)),yt},V.prototype.renderItems=function(){this.clearItemDoms();var X=this.get("items"),K=this.get("itemTpl"),q=this.get("listDom");q&&(F.each(X,function(ct){var _t=y.default.toCSSGradient(ct.color),yt=j.__assign(j.__assign({},ct),{color:_t}),lt=F.substitute(K,yt),Lt=U.createDom(lt);q.appendChild(Lt)}),this.applyChildrenStyles(q,this.get("domStyles")))},V.prototype.clearItemDoms=function(){this.get("listDom")&&R.clearDom(this.get("listDom"))},V.prototype.clearCrosshairs=function(){var X=this.get("xCrosshairDom"),K=this.get("yCrosshairDom");X&&X.remove(),K&&K.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},V}(B.default);P.Z=O},51227:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getAlignPoint=P.getPointByPosition=P.getOutSides=void 0;function S(y,U,F,B,R){var N={left:y<R.x,right:y+F>R.x+R.width,top:U<R.y,bottom:U+B>R.y+R.height};return N}P.getOutSides=S;function T(y,U,F,B,R,N){var A=y,D=U;switch(N){case"left":A=y-B-F,D=U-R/2;break;case"right":A=y+F,D=U-R/2;break;case"top":A=y-B/2,D=U-R-F;break;case"bottom":A=y-B/2,D=U+F;break;default:A=y+F,D=U-R-F;break}return{x:A,y:D}}P.getPointByPosition=T;function j(y,U,F,B,R,N,A){var D=T(y,U,F,B,R,N);if(A){var M=S(D.x,D.y,B,R,A);N==="auto"?(M.right&&(D.x=Math.max(0,y-B-F)),M.top&&(D.y=Math.max(0,U-R-F))):N==="top"||N==="bottom"?(M.left&&(D.x=A.x),M.right&&(D.x=A.x+A.width-B),N==="top"&&M.top&&(D.y=U+F),N==="bottom"&&M.bottom&&(D.y=U-R-F)):(M.top&&(D.y=A.y),M.bottom&&(D.y=A.y+A.height-R),N==="left"&&M.left&&(D.x=y+F),N==="right"&&M.right&&(D.x=y-B-F))}return D}P.getAlignPoint=j},31207:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.propagationDelegate=void 0;var T=S(66192);function j(y,U,F){var B=new T.default(U,F);B.target=y,B.propagationPath.push(y),y.emitDelegation(U,B);for(var R=y.getParent();R;)R.emitDelegation(U,B),B.propagationPath.push(R),R=R.getParent()}P.propagationDelegate=j},52782:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},11594:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getTextPoint=P.toPx=P.updateClip=P.getBBoxWithClip=P.mergeBBox=P.intersectBBox=P.near=P.wait=P.distance=P.getCirclePoint=P.getValueByPercent=P.createBBox=P.pointsToBBox=P.regionToBBox=P.hasClass=P.clearDom=P.formatPadding=void 0;var T=S(49242);function j(q){var ct=0,_t=0,yt=0,lt=0;return T.isNumber(q)?ct=_t=yt=lt=q:T.isArray(q)&&(ct=q[0],yt=T.isNil(q[1])?q[0]:q[1],lt=T.isNil(q[2])?q[0]:q[2],_t=T.isNil(q[3])?yt:q[3]),[ct,yt,lt,_t]}P.formatPadding=j;function y(q){for(var ct=q.childNodes,_t=ct.length,yt=_t-1;yt>=0;yt--)q.removeChild(ct[yt])}P.clearDom=y;function U(q,ct){return!!q.className.match(new RegExp("(\\s|^)"+ct+"(\\s|$)"))}P.hasClass=U;function F(q){var ct=q.start,_t=q.end,yt=Math.min(ct.x,_t.x),lt=Math.min(ct.y,_t.y),Lt=Math.max(ct.x,_t.x),wt=Math.max(ct.y,_t.y);return{x:yt,y:lt,minX:yt,minY:lt,maxX:Lt,maxY:wt,width:Lt-yt,height:wt-lt}}P.regionToBBox=F;function B(q){var ct=q.map(function(Gt){return Gt.x}),_t=q.map(function(Gt){return Gt.y}),yt=Math.min.apply(Math,ct),lt=Math.min.apply(Math,_t),Lt=Math.max.apply(Math,ct),wt=Math.max.apply(Math,_t);return{x:yt,y:lt,minX:yt,minY:lt,maxX:Lt,maxY:wt,width:Lt-yt,height:wt-lt}}P.pointsToBBox=B;function R(q,ct,_t,yt){return{x:q,y:ct,width:_t,height:yt,minX:q,minY:ct,maxX:q+_t,maxY:ct+yt}}P.createBBox=R;function N(q,ct,_t){return(1-_t)*q+ct*_t}P.getValueByPercent=N;function A(q,ct,_t){return{x:q.x+Math.cos(_t)*ct,y:q.y+Math.sin(_t)*ct}}P.getCirclePoint=A;function D(q,ct){var _t=ct.x-q.x,yt=ct.y-q.y;return Math.sqrt(_t*_t+yt*yt)}P.distance=D,P.wait=function(q){return new Promise(function(ct){setTimeout(ct,q)})},P.near=function(q,ct){return[q,ct].includes(Infinity)?Math.abs(q)===Math.abs(ct):Math.abs(q-ct)<Math.pow(Number.EPSILON,.5)};function M(q,ct){var _t=Math.max(q.minX,ct.minX),yt=Math.max(q.minY,ct.minY),lt=Math.min(q.maxX,ct.maxX),Lt=Math.min(q.maxY,ct.maxY);return R(_t,yt,lt-_t,Lt-yt)}P.intersectBBox=M;function O(q,ct){var _t=Math.min(q.minX,ct.minX),yt=Math.min(q.minY,ct.minY),lt=Math.max(q.maxX,ct.maxX),Lt=Math.max(q.maxY,ct.maxY);return R(_t,yt,lt-_t,Lt-yt)}P.mergeBBox=O;function k(q){var ct=q.getClip(),_t=ct&&ct.getBBox(),yt;if(!q.isGroup())yt=q.getBBox();else{var lt=Infinity,Lt=-Infinity,wt=Infinity,Gt=-Infinity,re=q.getChildren();re.length>0?T.each(re,function(Qt){if(Qt.get("visible")){if(Qt.isGroup()&&Qt.get("children").length===0)return!0;var it=k(Qt),dt=Qt.applyToMatrix([it.minX,it.minY,1]),gt=Qt.applyToMatrix([it.minX,it.maxY,1]),vt=Qt.applyToMatrix([it.maxX,it.minY,1]),Y=Qt.applyToMatrix([it.maxX,it.maxY,1]),ot=Math.min(dt[0],gt[0],vt[0],Y[0]),nt=Math.max(dt[0],gt[0],vt[0],Y[0]),rt=Math.min(dt[1],gt[1],vt[1],Y[1]),st=Math.max(dt[1],gt[1],vt[1],Y[1]);ot<lt&&(lt=ot),nt>Lt&&(Lt=nt),rt<wt&&(wt=rt),st>Gt&&(Gt=st)}}):(lt=0,Lt=0,wt=0,Gt=0),yt=R(lt,wt,Lt-lt,Gt-wt)}return _t?M(yt,_t):yt}P.getBBoxWithClip=k;function V(q,ct){if(!(!q.getClip()&&!ct.getClip())){var _t=ct.getClip();if(!_t){q.setClip(null);return}var yt={type:_t.get("type"),attrs:_t.attr()};q.setClip(yt)}}P.updateClip=V;function X(q){return q+"px"}P.toPx=X;function K(q,ct,_t,yt){var lt=D(q,ct),Lt=yt/lt,wt=0;return _t==="start"?wt=0-Lt:_t==="end"&&(wt=1+Lt),{x:N(q.x,ct.x,wt),y:N(q.y,ct.y,wt)}}P.getTextPoint=K},50782:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Coordinate:function(){return ot},getCoordinate:function(){return Kt},registerCoordinate:function(){return Jt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(ue,ce){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,Ut){$t.__proto__=Ut}||function($t,Ut){for(var Rt in Ut)Object.prototype.hasOwnProperty.call(Ut,Rt)&&($t[Rt]=Ut[Rt])},T(ue,ce)};function j(ue,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Class extends value "+String(ce)+" is not a constructor or null");T(ue,ce);function $t(){this.constructor=ue}ue.prototype=ce===null?Object.create(ce):($t.prototype=ce.prototype,new $t)}var y=function(){return y=Object.assign||function(ce){for(var $t,Ut=1,Rt=arguments.length;Ut<Rt;Ut++){$t=arguments[Ut];for(var Pt in $t)Object.prototype.hasOwnProperty.call($t,Pt)&&(ce[Pt]=$t[Pt])}return ce},y.apply(this,arguments)};function U(ue,ce){var $t={};for(var Ut in ue)Object.prototype.hasOwnProperty.call(ue,Ut)&&ce.indexOf(Ut)<0&&($t[Ut]=ue[Ut]);if(ue!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Rt=0,Ut=Object.getOwnPropertySymbols(ue);Rt<Ut.length;Rt++)ce.indexOf(Ut[Rt])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ut[Rt])&&($t[Ut[Rt]]=ue[Ut[Rt]]);return $t}function F(ue,ce,$t,Ut){var Rt=arguments.length,Pt=Rt<3?ce:Ut===null?Ut=Object.getOwnPropertyDescriptor(ce,$t):Ut,Yt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pt=Reflect.decorate(ue,ce,$t,Ut);else for(var Dt=ue.length-1;Dt>=0;Dt--)(Yt=ue[Dt])&&(Pt=(Rt<3?Yt(Pt):Rt>3?Yt(ce,$t,Pt):Yt(ce,$t))||Pt);return Rt>3&&Pt&&Object.defineProperty(ce,$t,Pt),Pt}function B(ue,ce){return function($t,Ut){ce($t,Ut,ue)}}function R(ue,ce){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ue,ce)}function N(ue,ce,$t,Ut){function Rt(Pt){return Pt instanceof $t?Pt:new $t(function(Yt){Yt(Pt)})}return new($t||($t=Promise))(function(Pt,Yt){function Dt(ve){try{ne(Ut.next(ve))}catch(Re){Yt(Re)}}function Nt(ve){try{ne(Ut.throw(ve))}catch(Re){Yt(Re)}}function ne(ve){ve.done?Pt(ve.value):Rt(ve.value).then(Dt,Nt)}ne((Ut=Ut.apply(ue,ce||[])).next())})}function A(ue,ce){var $t={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Ut,Rt,Pt,Yt;return Yt={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(Yt[Symbol.iterator]=function(){return this}),Yt;function Dt(ne){return function(ve){return Nt([ne,ve])}}function Nt(ne){if(Ut)throw new TypeError("Generator is already executing.");for(;$t;)try{if(Ut=1,Rt&&(Pt=ne[0]&2?Rt.return:ne[0]?Rt.throw||((Pt=Rt.return)&&Pt.call(Rt),0):Rt.next)&&!(Pt=Pt.call(Rt,ne[1])).done)return Pt;switch(Rt=0,Pt&&(ne=[ne[0]&2,Pt.value]),ne[0]){case 0:case 1:Pt=ne;break;case 4:return $t.label++,{value:ne[1],done:!1};case 5:$t.label++,Rt=ne[1],ne=[0];continue;case 7:ne=$t.ops.pop(),$t.trys.pop();continue;default:if(Pt=$t.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(ne[0]===6||ne[0]===2)){$t=0;continue}if(ne[0]===3&&(!Pt||ne[1]>Pt[0]&&ne[1]<Pt[3])){$t.label=ne[1];break}if(ne[0]===6&&$t.label<Pt[1]){$t.label=Pt[1],Pt=ne;break}if(Pt&&$t.label<Pt[2]){$t.label=Pt[2],$t.ops.push(ne);break}Pt[2]&&$t.ops.pop(),$t.trys.pop();continue}ne=ce.call(ue,$t)}catch(ve){ne=[6,ve],Rt=0}finally{Ut=Pt=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}var D=Object.create?function(ue,ce,$t,Ut){Ut===void 0&&(Ut=$t),Object.defineProperty(ue,Ut,{enumerable:!0,get:function(){return ce[$t]}})}:function(ue,ce,$t,Ut){Ut===void 0&&(Ut=$t),ue[Ut]=ce[$t]};function M(ue,ce){for(var $t in ue)$t!=="default"&&!Object.prototype.hasOwnProperty.call(ce,$t)&&D(ce,ue,$t)}function O(ue){var ce=typeof Symbol=="function"&&Symbol.iterator,$t=ce&&ue[ce],Ut=0;if($t)return $t.call(ue);if(ue&&typeof ue.length=="number")return{next:function(){return ue&&Ut>=ue.length&&(ue=void 0),{value:ue&&ue[Ut++],done:!ue}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(ue,ce){var $t=typeof Symbol=="function"&&ue[Symbol.iterator];if(!$t)return ue;var Ut=$t.call(ue),Rt,Pt=[],Yt;try{for(;(ce===void 0||ce-- >0)&&!(Rt=Ut.next()).done;)Pt.push(Rt.value)}catch(Dt){Yt={error:Dt}}finally{try{Rt&&!Rt.done&&($t=Ut.return)&&$t.call(Ut)}finally{if(Yt)throw Yt.error}}return Pt}function V(){for(var ue=[],ce=0;ce<arguments.length;ce++)ue=ue.concat(k(arguments[ce]));return ue}function X(){for(var ue=0,ce=0,$t=arguments.length;ce<$t;ce++)ue+=arguments[ce].length;for(var Ut=Array(ue),Rt=0,ce=0;ce<$t;ce++)for(var Pt=arguments[ce],Yt=0,Dt=Pt.length;Yt<Dt;Yt++,Rt++)Ut[Rt]=Pt[Yt];return Ut}function K(ue,ce,$t){if($t||arguments.length===2)for(var Ut=0,Rt=ce.length,Pt;Ut<Rt;Ut++)(Pt||!(Ut in ce))&&(Pt||(Pt=Array.prototype.slice.call(ce,0,Ut)),Pt[Ut]=ce[Ut]);return ue.concat(Pt||Array.prototype.slice.call(ce))}function q(ue){return this instanceof q?(this.v=ue,this):new q(ue)}function ct(ue,ce,$t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut=$t.apply(ue,ce||[]),Rt,Pt=[];return Rt={},Yt("next"),Yt("throw"),Yt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function Yt(je){Ut[je]&&(Rt[je]=function(Cr){return new Promise(function($r,Qr){Pt.push([je,Cr,$r,Qr])>1||Dt(je,Cr)})})}function Dt(je,Cr){try{Nt(Ut[je](Cr))}catch($r){Re(Pt[0][3],$r)}}function Nt(je){je.value instanceof q?Promise.resolve(je.value.v).then(ne,ve):Re(Pt[0][2],je)}function ne(je){Dt("next",je)}function ve(je){Dt("throw",je)}function Re(je,Cr){je(Cr),Pt.shift(),Pt.length&&Dt(Pt[0][0],Pt[0][1])}}function _t(ue){var ce,$t;return ce={},Ut("next"),Ut("throw",function(Rt){throw Rt}),Ut("return"),ce[Symbol.iterator]=function(){return this},ce;function Ut(Rt,Pt){ce[Rt]=ue[Rt]?function(Yt){return($t=!$t)?{value:q(ue[Rt](Yt)),done:Rt==="return"}:Pt?Pt(Yt):Yt}:Pt}}function yt(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce=ue[Symbol.asyncIterator],$t;return ce?ce.call(ue):(ue=typeof O=="function"?O(ue):ue[Symbol.iterator](),$t={},Ut("next"),Ut("throw"),Ut("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function Ut(Pt){$t[Pt]=ue[Pt]&&function(Yt){return new Promise(function(Dt,Nt){Yt=ue[Pt](Yt),Rt(Dt,Nt,Yt.done,Yt.value)})}}function Rt(Pt,Yt,Dt,Nt){Promise.resolve(Nt).then(function(ne){Pt({value:ne,done:Dt})},Yt)}}function lt(ue,ce){return Object.defineProperty?Object.defineProperty(ue,"raw",{value:ce}):ue.raw=ce,ue}var Lt=Object.create?function(ue,ce){Object.defineProperty(ue,"default",{enumerable:!0,value:ce})}:function(ue,ce){ue.default=ce};function wt(ue){if(ue&&ue.__esModule)return ue;var ce={};if(ue!=null)for(var $t in ue)$t!=="default"&&Object.prototype.hasOwnProperty.call(ue,$t)&&D(ce,ue,$t);return Lt(ce,ue),ce}function Gt(ue){return ue&&ue.__esModule?ue:{default:ue}}function re(ue,ce,$t,Ut){if($t==="a"&&!Ut)throw new TypeError("Private accessor was defined without a getter");if(typeof ce=="function"?ue!==ce||!Ut:!ce.has(ue))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $t==="m"?Ut:$t==="a"?Ut.call(ue):Ut?Ut.value:ce.get(ue)}function Qt(ue,ce,$t,Ut,Rt){if(Ut==="m")throw new TypeError("Private method is not writable");if(Ut==="a"&&!Rt)throw new TypeError("Private accessor was defined without a setter");if(typeof ce=="function"?ue!==ce||!Rt:!ce.has(ue))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ut==="a"?Rt.call(ue,$t):Rt?Rt.value=$t:ce.set(ue,$t),$t}var it=S(77160),dt=S(35600),gt=S(31506),vt=S(49242),Y=function(){function ue(ce){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var $t=ce.start,Ut=ce.end,Rt=ce.matrix,Pt=Rt===void 0?[1,0,0,0,1,0,0,0,1]:Rt,Yt=ce.isTransposed,Dt=Yt===void 0?!1:Yt;this.start=$t,this.end=Ut,this.matrix=Pt,this.originalMatrix=K([],Pt),this.isTransposed=Dt}return ue.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},ue.prototype.update=function(ce){(0,vt.assign)(this,ce),this.initial()},ue.prototype.convertDim=function(ce,$t){var Ut,Rt=this[$t],Pt=Rt.start,Yt=Rt.end;return this.isReflect($t)&&(Ut=[Yt,Pt],Pt=Ut[0],Yt=Ut[1]),Pt+ce*(Yt-Pt)},ue.prototype.invertDim=function(ce,$t){var Ut,Rt=this[$t],Pt=Rt.start,Yt=Rt.end;return this.isReflect($t)&&(Ut=[Yt,Pt],Pt=Ut[0],Yt=Ut[1]),(ce-Pt)/(Yt-Pt)},ue.prototype.applyMatrix=function(ce,$t,Ut){Ut===void 0&&(Ut=0);var Rt=this.matrix,Pt=[ce,$t,Ut];return it.transformMat3(Pt,Pt,Rt),Pt},ue.prototype.invertMatrix=function(ce,$t,Ut){Ut===void 0&&(Ut=0);var Rt=this.matrix,Pt=dt.invert([0,0,0,0,0,0,0,0,0],Rt),Yt=[ce,$t,Ut];return Pt&&it.transformMat3(Yt,Yt,Pt),Yt},ue.prototype.convert=function(ce){var $t=this.convertPoint(ce),Ut=$t.x,Rt=$t.y,Pt=this.applyMatrix(Ut,Rt,1);return{x:Pt[0],y:Pt[1]}},ue.prototype.invert=function(ce){var $t=this.invertMatrix(ce.x,ce.y,1);return this.invertPoint({x:$t[0],y:$t[1]})},ue.prototype.rotate=function(ce){var $t=this.matrix,Ut=this.center;return gt.leftTranslate($t,$t,[-Ut.x,-Ut.y]),gt.leftRotate($t,$t,ce),gt.leftTranslate($t,$t,[Ut.x,Ut.y]),this},ue.prototype.reflect=function(ce){return ce==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},ue.prototype.scale=function(ce,$t){var Ut=this.matrix,Rt=this.center;return gt.leftTranslate(Ut,Ut,[-Rt.x,-Rt.y]),gt.leftScale(Ut,Ut,[ce,$t]),gt.leftTranslate(Ut,Ut,[Rt.x,Rt.y]),this},ue.prototype.translate=function(ce,$t){var Ut=this.matrix;return gt.leftTranslate(Ut,Ut,[ce,$t]),this},ue.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},ue.prototype.getCenter=function(){return this.center},ue.prototype.getWidth=function(){return this.width},ue.prototype.getHeight=function(){return this.height},ue.prototype.getRadius=function(){return this.radius},ue.prototype.isReflect=function(ce){return ce==="x"?this.isReflectX:this.isReflectY},ue.prototype.resetMatrix=function(ce){this.matrix=ce||K([],this.originalMatrix)},ue}(),ot=Y,nt=function(ue){j(ce,ue);function ce($t){var Ut=ue.call(this,$t)||this;return Ut.isRect=!0,Ut.type="cartesian",Ut.initial(),Ut}return ce.prototype.initial=function(){ue.prototype.initial.call(this);var $t=this.start,Ut=this.end;this.x={start:$t.x,end:Ut.x},this.y={start:$t.y,end:Ut.y}},ce.prototype.convertPoint=function($t){var Ut,Rt=$t.x,Pt=$t.y;return this.isTransposed&&(Ut=[Pt,Rt],Rt=Ut[0],Pt=Ut[1]),{x:this.convertDim(Rt,"x"),y:this.convertDim(Pt,"y")}},ce.prototype.invertPoint=function($t){var Ut,Rt=this.invertDim($t.x,"x"),Pt=this.invertDim($t.y,"y");return this.isTransposed&&(Ut=[Pt,Rt],Rt=Ut[0],Pt=Ut[1]),{x:Rt,y:Pt}},ce}(ot),rt=nt,st=S(31437),d=function(ue){j(ce,ue);function ce($t){var Ut=ue.call(this,$t)||this;Ut.isHelix=!0,Ut.type="helix";var Rt=$t.startAngle,Pt=Rt===void 0?1.25*Math.PI:Rt,Yt=$t.endAngle,Dt=Yt===void 0?7.25*Math.PI:Yt,Nt=$t.innerRadius,ne=Nt===void 0?0:Nt,ve=$t.radius;return Ut.startAngle=Pt,Ut.endAngle=Dt,Ut.innerRadius=ne,Ut.radius=ve,Ut.initial(),Ut}return ce.prototype.initial=function(){ue.prototype.initial.call(this);var $t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,Ut=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(Ut=Ut*this.radius),this.d=Math.floor(Ut*(1-this.innerRadius)/$t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*Ut,end:this.innerRadius*Ut+this.d*.99}},ce.prototype.convertPoint=function($t){var Ut,Rt=$t.x,Pt=$t.y;this.isTransposed&&(Ut=[Pt,Rt],Rt=Ut[0],Pt=Ut[1]);var Yt=this.convertDim(Rt,"x"),Dt=this.a*Yt,Nt=this.convertDim(Pt,"y");return{x:this.center.x+Math.cos(Yt)*(Dt+Nt),y:this.center.y+Math.sin(Yt)*(Dt+Nt)}},ce.prototype.invertPoint=function($t){var Ut,Rt=this.d+this.y.start,Pt=st.subtract([0,0],[$t.x,$t.y],[this.center.x,this.center.y]),Yt=gt.angleTo(Pt,[1,0],!0),Dt=Yt*this.a;st.length(Pt)<Dt&&(Dt=st.length(Pt));var Nt=Math.floor((st.length(Pt)-Dt)/Rt);Yt=2*Nt*Math.PI+Yt;var ne=this.a*Yt,ve=st.length(Pt)-ne;ve=(0,vt.isNumberEqual)(ve,0)?0:ve;var Re=this.invertDim(Yt,"x"),je=this.invertDim(ve,"y");return Re=(0,vt.isNumberEqual)(Re,0)?0:Re,je=(0,vt.isNumberEqual)(je,0)?0:je,this.isTransposed&&(Ut=[je,Re],Re=Ut[0],je=Ut[1]),{x:Re,y:je}},ce}(ot),It=d,Ht=function(ue){j(ce,ue);function ce($t){var Ut=ue.call(this,$t)||this;Ut.isPolar=!0,Ut.type="polar";var Rt=$t.startAngle,Pt=Rt===void 0?-Math.PI/2:Rt,Yt=$t.endAngle,Dt=Yt===void 0?Math.PI*3/2:Yt,Nt=$t.innerRadius,ne=Nt===void 0?0:Nt,ve=$t.radius;return Ut.startAngle=Pt,Ut.endAngle=Dt,Ut.innerRadius=ne,Ut.radius=ve,Ut.initial(),Ut}return ce.prototype.initial=function(){for(ue.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var $t=this.getOneBox(),Ut=$t.maxX-$t.minX,Rt=$t.maxY-$t.minY,Pt=Math.abs($t.minX)/Ut,Yt=Math.abs($t.minY)/Rt,Dt;this.height/Rt>this.width/Ut?(Dt=this.width/Ut,this.circleCenter={x:this.center.x-(.5-Pt)*this.width,y:this.center.y-(.5-Yt)*Dt*Rt}):(Dt=this.height/Rt,this.circleCenter={x:this.center.x-(.5-Pt)*Dt*Ut,y:this.center.y-(.5-Yt)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Dt*this.radius:(this.radius<=0||this.radius>Dt)&&(this.polarRadius=Dt):this.polarRadius=Dt,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},ce.prototype.getRadius=function(){return this.polarRadius},ce.prototype.convertPoint=function($t){var Ut,Rt=this.getCenter(),Pt=$t.x,Yt=$t.y;return this.isTransposed&&(Ut=[Yt,Pt],Pt=Ut[0],Yt=Ut[1]),Pt=this.convertDim(Pt,"x"),Yt=this.convertDim(Yt,"y"),{x:Rt.x+Math.cos(Pt)*Yt,y:Rt.y+Math.sin(Pt)*Yt}},ce.prototype.invertPoint=function($t){var Ut,Rt=this.getCenter(),Pt=[$t.x-Rt.x,$t.y-Rt.y],Yt=this,Dt=Yt.startAngle,Nt=Yt.endAngle;this.isReflect("x")&&(Ut=[Nt,Dt],Dt=Ut[0],Nt=Ut[1]);var ne=[1,0,0,0,1,0,0,0,1];gt.leftRotate(ne,ne,Dt);var ve=[1,0,0];it.transformMat3(ve,ve,ne);var Re=[ve[0],ve[1]],je=gt.angleTo(Re,Pt,Nt<Dt);(0,vt.isNumberEqual)(je,Math.PI*2)&&(je=0);var Cr=st.length(Pt),$r=je/(Nt-Dt);$r=Nt-Dt>0?$r:-$r;var Qr=this.invertDim(Cr,"y"),Ee={x:0,y:0};return Ee.x=this.isTransposed?Qr:$r,Ee.y=this.isTransposed?$r:Qr,Ee},ce.prototype.getCenter=function(){return this.circleCenter},ce.prototype.getOneBox=function(){var $t=this.startAngle,Ut=this.endAngle;if(Math.abs(Ut-$t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var Rt=[0,Math.cos($t),Math.cos(Ut)],Pt=[0,Math.sin($t),Math.sin(Ut)],Yt=Math.min($t,Ut);Yt<Math.max($t,Ut);Yt+=Math.PI/18)Rt.push(Math.cos(Yt)),Pt.push(Math.sin(Yt));return{minX:Math.min.apply(Math,Rt),maxX:Math.max.apply(Math,Rt),minY:Math.min.apply(Math,Pt),maxY:Math.max.apply(Math,Pt)}},ce}(ot),kt=Ht,Xt={},Kt=function(ue){return Xt[ue.toLowerCase()]},Jt=function(ue,ce){Xt[ue.toLowerCase()]=ce};Jt("rect",rt),Jt("cartesian",rt),Jt("polar",kt),Jt("helix",It)},57817:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return T}});function T(j,y,U){if(j){if(typeof j.addEventListener=="function")return j.addEventListener(y,U,!1),{remove:function(){j.removeEventListener(y,U,!1)}};if(typeof j.attachEvent=="function")return j.attachEvent("on"+y,U),{remove:function(){j.detachEvent("on"+y,U)}}}}},6056:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return B}});var T,j,y,U;function F(){T=document.createElement("table"),j=document.createElement("tr"),y=/^\s*<(\w+|!)[^>]*>/,U={tr:document.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:j,th:j,"*":document.createElement("div")}}function B(R){T||F();var N=y.test(R)&&RegExp.$1;(!N||!(N in U))&&(N="*");var A=U[N];R=typeof R=="string"?R.replace(/(^\s*)|(\s*$)/g,""):R,A.innerHTML=""+R;var D=A.childNodes[0];return D&&A.contains(D)&&A.removeChild(D),D}},10430:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return j}});var T=S(99911);function j(y,U){var F=(0,T.Z)(y,"height",U);return F==="auto"&&(F=y.offsetHeight),parseFloat(F)}},79189:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return y}});var T=S(99911),j=S(10430);function y(U,F){var B=(0,j.Z)(U,F),R=parseFloat((0,T.Z)(U,"borderTopWidth"))||0,N=parseFloat((0,T.Z)(U,"paddingTop"))||0,A=parseFloat((0,T.Z)(U,"paddingBottom"))||0,D=parseFloat((0,T.Z)(U,"borderBottomWidth"))||0,M=parseFloat((0,T.Z)(U,"marginTop"))||0,O=parseFloat((0,T.Z)(U,"marginBottom"))||0;return B+R+D+N+A+M+O}},89810:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return y}});var T=S(99911),j=S(23408);function y(U,F){var B=(0,j.Z)(U,F),R=parseFloat((0,T.Z)(U,"borderLeftWidth"))||0,N=parseFloat((0,T.Z)(U,"paddingLeft"))||0,A=parseFloat((0,T.Z)(U,"paddingRight"))||0,D=parseFloat((0,T.Z)(U,"borderRightWidth"))||0,M=parseFloat((0,T.Z)(U,"marginRight"))||0,O=parseFloat((0,T.Z)(U,"marginLeft"))||0;return B+R+D+N+A+O+M}},99911:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return T}});function T(j,y,U){var F;try{F=window.getComputedStyle?window.getComputedStyle(j,null)[y]:j.style[y]}catch(B){}finally{F=F===void 0?U:F}return F}},23408:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return j}});var T=S(99911);function j(y,U){var F=(0,T.Z)(y,"width",U);return F==="auto"&&(F=y.offsetWidth),parseFloat(F)}},80478:function(Vt,P,S){"use strict";S.r(P),S.d(P,{addEventListener:function(){return T.Z},createDom:function(){return j.Z},getHeight:function(){return y.Z},getOuterHeight:function(){return U.Z},getOuterWidth:function(){return F.Z},getRatio:function(){return B},getStyle:function(){return R.Z},getWidth:function(){return N.Z},modifyCSS:function(){return A.Z}});var T=S(57817),j=S(6056),y=S(10430),U=S(79189),F=S(89810);function B(){return window.devicePixelRatio?window.devicePixelRatio:2}var R=S(99911),N=S(23408),A=S(45442)},45442:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return T}});function T(j,y){if(j)for(var U in y)y.hasOwnProperty(U)&&(j.style[U]=y[U]);return j}},73136:function(Vt,P){"use strict";var S;S={value:!0};function T(j,y,U){if(j){if(typeof j.addEventListener=="function")return j.addEventListener(y,U,!1),{remove:function(){j.removeEventListener(y,U,!1)}};if(typeof j.attachEvent=="function")return j.attachEvent("on"+y,U),{remove:function(){j.detachEvent("on"+y,U)}}}}P.Z=T},57821:function(Vt,P){"use strict";var S;S={value:!0};var T,j,y,U;function F(){T=document.createElement("table"),j=document.createElement("tr"),y=/^\s*<(\w+|!)[^>]*>/,U={tr:document.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:j,th:j,"*":document.createElement("div")}}function B(R){T||F();var N=y.test(R)&&RegExp.$1;(!N||!(N in U))&&(N="*");var A=U[N];R=typeof R=="string"?R.replace(/(^\s*)|(\s*$)/g,""):R,A.innerHTML=""+R;var D=A.childNodes[0];return D&&A.contains(D)&&A.removeChild(D),D}P.Z=B},1513:function(Vt,P){"use strict";var S;S={value:!0};function T(j,y){if(j)for(var U in y)y.hasOwnProperty(U)&&(j.style[U]=y[U]);return j}P.Z=T},90494:function(Vt,P,S){"use strict";S.r(P);var T="*",j=function(){function y(){this._events={}}return y.prototype.on=function(U,F,B){return this._events[U]||(this._events[U]=[]),this._events[U].push({callback:F,once:!!B}),this},y.prototype.once=function(U,F){return this.on(U,F,!0),this},y.prototype.emit=function(U){for(var F=this,B=[],R=1;R<arguments.length;R++)B[R-1]=arguments[R];var N=this._events[U]||[],A=this._events[T]||[],D=function(M){for(var O=M.length,k=0;k<O;k++)if(!!M[k]){var V=M[k],X=V.callback,K=V.once;K&&(M.splice(k,1),M.length===0&&delete F._events[U],O--,k--),X.apply(F,B)}};D(N),D(A)},y.prototype.off=function(U,F){if(!U)this._events={};else if(!F)delete this._events[U];else{for(var B=this._events[U]||[],R=B.length,N=0;N<R;N++)B[N].callback===F&&(B.splice(N,1),R--,N--);B.length===0&&delete this._events[U]}return this},y.prototype.getEvents=function(){return this._events},y}();P.default=j},39014:function(Vt,P,S){"use strict";S.r(P),S.d(P,{AbstractCanvas:function(){return Wo},AbstractGroup:function(){return fo},AbstractShape:function(){return vi},Base:function(){return $r},Event:function(){return Kt},PathUtil:function(){return T},version:function(){return An}});var T={};S.r(T),S.d(T,{catmullRomToBezier:function(){return R},fillPath:function(){return ot},fillPathByDiff:function(){return d},formatPath:function(){return kt},intersection:function(){return dt},parsePathArray:function(){return X},parsePathString:function(){return B},pathToAbsolute:function(){return A},pathToCurve:function(){return k},rectPath:function(){return lt}});var j=S(49242),y=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,U=new RegExp("([a-z])["+y+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+y+"]*,?["+y+"]*)+)","ig"),F=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+y+"]*,?["+y+"]*","ig"),B=function(Pe){if(!Pe)return null;if((0,j.isArray)(Pe))return Pe;var Tt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ae=[];return String(Pe).replace(U,function(he,zt,Wt){var de=[],Se=zt.toLowerCase();if(Wt.replace(F,function(Ae,He){He&&de.push(+He)}),Se==="m"&&de.length>2&&(ae.push([zt].concat(de.splice(0,2))),Se="l",zt=zt==="m"?"l":"L"),Se==="o"&&de.length===1&&ae.push([zt,de[0]]),Se==="r")ae.push([zt].concat(de));else for(;de.length>=Tt[Se]&&(ae.push([zt].concat(de.splice(0,Tt[Se]))),!!Tt[Se]););return Pe}),ae},R=function(Pe,Tt){for(var ae=[],he=0,zt=Pe.length;zt-2*!Tt>he;he+=2){var Wt=[{x:+Pe[he-2],y:+Pe[he-1]},{x:+Pe[he],y:+Pe[he+1]},{x:+Pe[he+2],y:+Pe[he+3]},{x:+Pe[he+4],y:+Pe[he+5]}];Tt?he?zt-4===he?Wt[3]={x:+Pe[0],y:+Pe[1]}:zt-2===he&&(Wt[2]={x:+Pe[0],y:+Pe[1]},Wt[3]={x:+Pe[2],y:+Pe[3]}):Wt[0]={x:+Pe[zt-2],y:+Pe[zt-1]}:zt-4===he?Wt[3]=Wt[2]:he||(Wt[0]={x:+Pe[he],y:+Pe[he+1]}),ae.push(["C",(-Wt[0].x+6*Wt[1].x+Wt[2].x)/6,(-Wt[0].y+6*Wt[1].y+Wt[2].y)/6,(Wt[1].x+6*Wt[2].x-Wt[3].x)/6,(Wt[1].y+6*Wt[2].y-Wt[3].y)/6,Wt[2].x,Wt[2].y])}return ae},N=function(Pe,Tt,ae,he,zt){var Wt=[];if(zt===null&&he===null&&(he=ae),Pe=+Pe,Tt=+Tt,ae=+ae,he=+he,zt!==null){var de=Math.PI/180,Se=Pe+ae*Math.cos(-he*de),Ae=Pe+ae*Math.cos(-zt*de),He=Tt+ae*Math.sin(-he*de),_r=Tt+ae*Math.sin(-zt*de);Wt=[["M",Se,He],["A",ae,ae,0,+(zt-he>180),0,Ae,_r]]}else Wt=[["M",Pe,Tt],["m",0,-he],["a",ae,he,0,1,1,0,2*he],["a",ae,he,0,1,1,0,-2*he],["z"]];return Wt},A=function(Pe){if(Pe=B(Pe),!Pe||!Pe.length)return[["M",0,0]];var Tt=[],ae=0,he=0,zt=0,Wt=0,de=0,Se,Ae;Pe[0][0]==="M"&&(ae=+Pe[0][1],he=+Pe[0][2],zt=ae,Wt=he,de++,Tt[0]=["M",ae,he]);for(var He=Pe.length===3&&Pe[0][0]==="M"&&Pe[1][0].toUpperCase()==="R"&&Pe[2][0].toUpperCase()==="Z",_r=void 0,Lr=void 0,wn=de,Kr=Pe.length;wn<Kr;wn++){if(Tt.push(_r=[]),Lr=Pe[wn],Se=Lr[0],Se!==Se.toUpperCase())switch(_r[0]=Se.toUpperCase(),_r[0]){case"A":_r[1]=Lr[1],_r[2]=Lr[2],_r[3]=Lr[3],_r[4]=Lr[4],_r[5]=Lr[5],_r[6]=+Lr[6]+ae,_r[7]=+Lr[7]+he;break;case"V":_r[1]=+Lr[1]+he;break;case"H":_r[1]=+Lr[1]+ae;break;case"R":Ae=[ae,he].concat(Lr.slice(1));for(var Fr=2,pi=Ae.length;Fr<pi;Fr++)Ae[Fr]=+Ae[Fr]+ae,Ae[++Fr]=+Ae[Fr]+he;Tt.pop(),Tt=Tt.concat(R(Ae,He));break;case"O":Tt.pop(),Ae=N(ae,he,Lr[1],Lr[2]),Ae.push(Ae[0]),Tt=Tt.concat(Ae);break;case"U":Tt.pop(),Tt=Tt.concat(N(ae,he,Lr[1],Lr[2],Lr[3])),_r=["U"].concat(Tt[Tt.length-1].slice(-2));break;case"M":zt=+Lr[1]+ae,Wt=+Lr[2]+he;break;default:for(var Fr=1,pi=Lr.length;Fr<pi;Fr++)_r[Fr]=+Lr[Fr]+(Fr%2?ae:he)}else if(Se==="R")Ae=[ae,he].concat(Lr.slice(1)),Tt.pop(),Tt=Tt.concat(R(Ae,He)),_r=["R"].concat(Lr.slice(-2));else if(Se==="O")Tt.pop(),Ae=N(ae,he,Lr[1],Lr[2]),Ae.push(Ae[0]),Tt=Tt.concat(Ae);else if(Se==="U")Tt.pop(),Tt=Tt.concat(N(ae,he,Lr[1],Lr[2],Lr[3])),_r=["U"].concat(Tt[Tt.length-1].slice(-2));else for(var Pi=0,ca=Lr.length;Pi<ca;Pi++)_r[Pi]=Lr[Pi];if(Se=Se.toUpperCase(),Se!=="O")switch(_r[0]){case"Z":ae=+zt,he=+Wt;break;case"H":ae=_r[1];break;case"V":he=_r[1];break;case"M":zt=_r[_r.length-2],Wt=_r[_r.length-1];break;default:ae=_r[_r.length-2],he=_r[_r.length-1]}}return Tt},D=function(Pe,Tt,ae,he){return[Pe,Tt,ae,he,ae,he]},M=function(Pe,Tt,ae,he,zt,Wt){var de=1/3,Se=2/3;return[de*Pe+Se*ae,de*Tt+Se*he,de*zt+Se*ae,de*Wt+Se*he,zt,Wt]},O=function(Pe,Tt,ae,he,zt,Wt,de,Se,Ae,He){ae===he&&(ae+=1);var _r=Math.PI*120/180,Lr=Math.PI/180*(+zt||0),wn=[],Kr,Fr,pi,Pi,ca,va=function(Gl,Du,Wu){var Ul=Gl*Math.cos(Wu)-Du*Math.sin(Wu),Ql=Gl*Math.sin(Wu)+Du*Math.cos(Wu);return{x:Ul,y:Ql}};if(He)Fr=He[0],pi=He[1],Pi=He[2],ca=He[3];else{Kr=va(Pe,Tt,-Lr),Pe=Kr.x,Tt=Kr.y,Kr=va(Se,Ae,-Lr),Se=Kr.x,Ae=Kr.y,Pe===Se&&Tt===Ae&&(Se+=1,Ae+=1);var ji=(Pe-Se)/2,ai=(Tt-Ae)/2,Fe=ji*ji/(ae*ae)+ai*ai/(he*he);Fe>1&&(Fe=Math.sqrt(Fe),ae=Fe*ae,he=Fe*he);var er=ae*ae,Ir=he*he,hn=(Wt===de?-1:1)*Math.sqrt(Math.abs((er*Ir-er*ai*ai-Ir*ji*ji)/(er*ai*ai+Ir*ji*ji)));Pi=hn*ae*ai/he+(Pe+Se)/2,ca=hn*-he*ji/ae+(Tt+Ae)/2,Fr=Math.asin(((Tt-ca)/he).toFixed(9)),pi=Math.asin(((Ae-ca)/he).toFixed(9)),Fr=Pe<Pi?Math.PI-Fr:Fr,pi=Se<Pi?Math.PI-pi:pi,Fr<0&&(Fr=Math.PI*2+Fr),pi<0&&(pi=Math.PI*2+pi),de&&Fr>pi&&(Fr=Fr-Math.PI*2),!de&&pi>Fr&&(pi=pi-Math.PI*2)}var ci=pi-Fr;if(Math.abs(ci)>_r){var wa=pi,no=Se,ls=Ae;pi=Fr+_r*(de&&pi>Fr?1:-1),Se=Pi+ae*Math.cos(pi),Ae=ca+he*Math.sin(pi),wn=O(Se,Ae,ae,he,zt,0,de,no,ls,[pi,wa,Pi,ca])}ci=pi-Fr;var Jo=Math.cos(Fr),ps=Math.sin(Fr),Ks=Math.cos(pi),Fo=Math.sin(pi),Vs=Math.tan(ci/4),$s=4/3*ae*Vs,zs=4/3*he*Vs,Ou=[Pe,Tt],au=[Pe+$s*ps,Tt-zs*Jo],Vu=[Se+$s*Fo,Ae-zs*Ks],ou=[Se,Ae];if(au[0]=2*Ou[0]-au[0],au[1]=2*Ou[1]-au[1],He)return[au,Vu,ou].concat(wn);wn=[au,Vu,ou].concat(wn).join().split(",");for(var ds=[],Ko=0,Lu=wn.length;Ko<Lu;Ko++)ds[Ko]=Ko%2?va(wn[Ko-1],wn[Ko],Lr).y:va(wn[Ko],wn[Ko+1],Lr).x;return ds},k=function(Pe,Tt){var ae=A(Pe),he=Tt&&A(Tt),zt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Wt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},de=[],Se=[],Ae="",He="",_r,Lr=function(ji,ai,Fe){var er,Ir;if(!ji)return["C",ai.x,ai.y,ai.x,ai.y,ai.x,ai.y];switch(!(ji[0]in{T:1,Q:1})&&(ai.qx=ai.qy=null),ji[0]){case"M":ai.X=ji[1],ai.Y=ji[2];break;case"A":ji=["C"].concat(O.apply(0,[ai.x,ai.y].concat(ji.slice(1))));break;case"S":Fe==="C"||Fe==="S"?(er=ai.x*2-ai.bx,Ir=ai.y*2-ai.by):(er=ai.x,Ir=ai.y),ji=["C",er,Ir].concat(ji.slice(1));break;case"T":Fe==="Q"||Fe==="T"?(ai.qx=ai.x*2-ai.qx,ai.qy=ai.y*2-ai.qy):(ai.qx=ai.x,ai.qy=ai.y),ji=["C"].concat(M(ai.x,ai.y,ai.qx,ai.qy,ji[1],ji[2]));break;case"Q":ai.qx=ji[1],ai.qy=ji[2],ji=["C"].concat(M(ai.x,ai.y,ji[1],ji[2],ji[3],ji[4]));break;case"L":ji=["C"].concat(D(ai.x,ai.y,ji[1],ji[2]));break;case"H":ji=["C"].concat(D(ai.x,ai.y,ji[1],ai.y));break;case"V":ji=["C"].concat(D(ai.x,ai.y,ai.x,ji[1]));break;case"Z":ji=["C"].concat(D(ai.x,ai.y,ai.X,ai.Y));break;default:break}return ji},wn=function(ji,ai){if(ji[ai].length>7){ji[ai].shift();for(var Fe=ji[ai];Fe.length;)de[ai]="A",he&&(Se[ai]="A"),ji.splice(ai++,0,["C"].concat(Fe.splice(0,6)));ji.splice(ai,1),_r=Math.max(ae.length,he&&he.length||0)}},Kr=function(ji,ai,Fe,er,Ir){ji&&ai&&ji[Ir][0]==="M"&&ai[Ir][0]!=="M"&&(ai.splice(Ir,0,["M",er.x,er.y]),Fe.bx=0,Fe.by=0,Fe.x=ji[Ir][1],Fe.y=ji[Ir][2],_r=Math.max(ae.length,he&&he.length||0))};_r=Math.max(ae.length,he&&he.length||0);for(var Fr=0;Fr<_r;Fr++){ae[Fr]&&(Ae=ae[Fr][0]),Ae!=="C"&&(de[Fr]=Ae,Fr&&(He=de[Fr-1])),ae[Fr]=Lr(ae[Fr],zt,He),de[Fr]!=="A"&&Ae==="C"&&(de[Fr]="C"),wn(ae,Fr),he&&(he[Fr]&&(Ae=he[Fr][0]),Ae!=="C"&&(Se[Fr]=Ae,Fr&&(He=Se[Fr-1])),he[Fr]=Lr(he[Fr],Wt,He),Se[Fr]!=="A"&&Ae==="C"&&(Se[Fr]="C"),wn(he,Fr)),Kr(ae,he,zt,Wt,Fr),Kr(he,ae,Wt,zt,Fr);var pi=ae[Fr],Pi=he&&he[Fr],ca=pi.length,va=he&&Pi.length;zt.x=pi[ca-2],zt.y=pi[ca-1],zt.bx=parseFloat(pi[ca-4])||zt.x,zt.by=parseFloat(pi[ca-3])||zt.y,Wt.bx=he&&(parseFloat(Pi[va-4])||Wt.x),Wt.by=he&&(parseFloat(Pi[va-3])||Wt.y),Wt.x=he&&Pi[va-2],Wt.y=he&&Pi[va-1]}return he?[ae,he]:ae},V=/,?([a-z]),?/gi,X=function(Pe){return Pe.join(",").replace(V,"$1")},K=function(Pe,Tt,ae,he,zt){var Wt=-3*Tt+9*ae-9*he+3*zt,de=Pe*Wt+6*Tt-12*ae+6*he;return Pe*de-3*Tt+3*ae},q=function(Pe,Tt,ae,he,zt,Wt,de,Se,Ae){Ae===null&&(Ae=1),Ae=Ae>1?1:Ae<0?0:Ae;for(var He=Ae/2,_r=12,Lr=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],wn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Kr=0,Fr=0;Fr<_r;Fr++){var pi=He*Lr[Fr]+He,Pi=K(pi,Pe,ae,zt,de),ca=K(pi,Tt,he,Wt,Se),va=Pi*Pi+ca*ca;Kr+=wn[Fr]*Math.sqrt(va)}return He*Kr},ct=function(Pe,Tt,ae,he,zt,Wt,de,Se){for(var Ae=[],He=[[],[]],_r,Lr,wn,Kr,Fr=0;Fr<2;++Fr){if(Fr===0?(Lr=6*Pe-12*ae+6*zt,_r=-3*Pe+9*ae-9*zt+3*de,wn=3*ae-3*Pe):(Lr=6*Tt-12*he+6*Wt,_r=-3*Tt+9*he-9*Wt+3*Se,wn=3*he-3*Tt),Math.abs(_r)<1e-12){if(Math.abs(Lr)<1e-12)continue;Kr=-wn/Lr,Kr>0&&Kr<1&&Ae.push(Kr);continue}var pi=Lr*Lr-4*wn*_r,Pi=Math.sqrt(pi);if(!(pi<0)){var ca=(-Lr+Pi)/(2*_r);ca>0&&ca<1&&Ae.push(ca);var va=(-Lr-Pi)/(2*_r);va>0&&va<1&&Ae.push(va)}}for(var ji=Ae.length,ai=ji,Fe;ji--;)Kr=Ae[ji],Fe=1-Kr,He[0][ji]=Fe*Fe*Fe*Pe+3*Fe*Fe*Kr*ae+3*Fe*Kr*Kr*zt+Kr*Kr*Kr*de,He[1][ji]=Fe*Fe*Fe*Tt+3*Fe*Fe*Kr*he+3*Fe*Kr*Kr*Wt+Kr*Kr*Kr*Se;return He[0][ai]=Pe,He[1][ai]=Tt,He[0][ai+1]=de,He[1][ai+1]=Se,He[0].length=He[1].length=ai+2,{min:{x:Math.min.apply(0,He[0]),y:Math.min.apply(0,He[1])},max:{x:Math.max.apply(0,He[0]),y:Math.max.apply(0,He[1])}}},_t=function(Pe,Tt,ae,he,zt,Wt,de,Se){if(!(Math.max(Pe,ae)<Math.min(zt,de)||Math.min(Pe,ae)>Math.max(zt,de)||Math.max(Tt,he)<Math.min(Wt,Se)||Math.min(Tt,he)>Math.max(Wt,Se))){var Ae=(Pe*he-Tt*ae)*(zt-de)-(Pe-ae)*(zt*Se-Wt*de),He=(Pe*he-Tt*ae)*(Wt-Se)-(Tt-he)*(zt*Se-Wt*de),_r=(Pe-ae)*(Wt-Se)-(Tt-he)*(zt-de);if(!!_r){var Lr=Ae/_r,wn=He/_r,Kr=+Lr.toFixed(2),Fr=+wn.toFixed(2);if(!(Kr<+Math.min(Pe,ae).toFixed(2)||Kr>+Math.max(Pe,ae).toFixed(2)||Kr<+Math.min(zt,de).toFixed(2)||Kr>+Math.max(zt,de).toFixed(2)||Fr<+Math.min(Tt,he).toFixed(2)||Fr>+Math.max(Tt,he).toFixed(2)||Fr<+Math.min(Wt,Se).toFixed(2)||Fr>+Math.max(Wt,Se).toFixed(2)))return{x:Lr,y:wn}}}},yt=function(Pe,Tt,ae){return Tt>=Pe.x&&Tt<=Pe.x+Pe.width&&ae>=Pe.y&&ae<=Pe.y+Pe.height},lt=function(Pe,Tt,ae,he,zt){if(zt)return[["M",+Pe+ +zt,Tt],["l",ae-zt*2,0],["a",zt,zt,0,0,1,zt,zt],["l",0,he-zt*2],["a",zt,zt,0,0,1,-zt,zt],["l",zt*2-ae,0],["a",zt,zt,0,0,1,-zt,-zt],["l",0,zt*2-he],["a",zt,zt,0,0,1,zt,-zt],["z"]];var Wt=[["M",Pe,Tt],["l",ae,0],["l",0,he],["l",-ae,0],["z"]];return Wt.parsePathArray=X,Wt},Lt=function(Pe,Tt,ae,he){return Pe===null&&(Pe=Tt=ae=he=0),Tt===null&&(Tt=Pe.y,ae=Pe.width,he=Pe.height,Pe=Pe.x),{x:Pe,y:Tt,width:ae,w:ae,height:he,h:he,x2:Pe+ae,y2:Tt+he,cx:Pe+ae/2,cy:Tt+he/2,r1:Math.min(ae,he)/2,r2:Math.max(ae,he)/2,r0:Math.sqrt(ae*ae+he*he)/2,path:lt(Pe,Tt,ae,he),vb:[Pe,Tt,ae,he].join(" ")}},wt=function(Pe,Tt){return Pe=Lt(Pe),Tt=Lt(Tt),yt(Tt,Pe.x,Pe.y)||yt(Tt,Pe.x2,Pe.y)||yt(Tt,Pe.x,Pe.y2)||yt(Tt,Pe.x2,Pe.y2)||yt(Pe,Tt.x,Tt.y)||yt(Pe,Tt.x2,Tt.y)||yt(Pe,Tt.x,Tt.y2)||yt(Pe,Tt.x2,Tt.y2)||(Pe.x<Tt.x2&&Pe.x>Tt.x||Tt.x<Pe.x2&&Tt.x>Pe.x)&&(Pe.y<Tt.y2&&Pe.y>Tt.y||Tt.y<Pe.y2&&Tt.y>Pe.y)},Gt=function(Pe,Tt,ae,he,zt,Wt,de,Se){(0,j.isArray)(Pe)||(Pe=[Pe,Tt,ae,he,zt,Wt,de,Se]);var Ae=ct.apply(null,Pe);return Lt(Ae.min.x,Ae.min.y,Ae.max.x-Ae.min.x,Ae.max.y-Ae.min.y)},re=function(Pe,Tt,ae,he,zt,Wt,de,Se,Ae){var He=1-Ae,_r=Math.pow(He,3),Lr=Math.pow(He,2),wn=Ae*Ae,Kr=wn*Ae,Fr=_r*Pe+Lr*3*Ae*ae+He*3*Ae*Ae*zt+Kr*de,pi=_r*Tt+Lr*3*Ae*he+He*3*Ae*Ae*Wt+Kr*Se,Pi=Pe+2*Ae*(ae-Pe)+wn*(zt-2*ae+Pe),ca=Tt+2*Ae*(he-Tt)+wn*(Wt-2*he+Tt),va=ae+2*Ae*(zt-ae)+wn*(de-2*zt+ae),ji=he+2*Ae*(Wt-he)+wn*(Se-2*Wt+he),ai=He*Pe+Ae*ae,Fe=He*Tt+Ae*he,er=He*zt+Ae*de,Ir=He*Wt+Ae*Se,hn=90-Math.atan2(Pi-va,ca-ji)*180/Math.PI;return{x:Fr,y:pi,m:{x:Pi,y:ca},n:{x:va,y:ji},start:{x:ai,y:Fe},end:{x:er,y:Ir},alpha:hn}},Qt=function(Pe,Tt,ae){var he=Gt(Pe),zt=Gt(Tt);if(!wt(he,zt))return ae?0:[];for(var Wt=q.apply(0,Pe),de=q.apply(0,Tt),Se=~~(Wt/8),Ae=~~(de/8),He=[],_r=[],Lr={},wn=ae?0:[],Kr=0;Kr<Se+1;Kr++){var Fr=re.apply(0,Pe.concat(Kr/Se));He.push({x:Fr.x,y:Fr.y,t:Kr/Se})}for(var Kr=0;Kr<Ae+1;Kr++){var Fr=re.apply(0,Tt.concat(Kr/Ae));_r.push({x:Fr.x,y:Fr.y,t:Kr/Ae})}for(var Kr=0;Kr<Se;Kr++)for(var pi=0;pi<Ae;pi++){var Pi=He[Kr],ca=He[Kr+1],va=_r[pi],ji=_r[pi+1],ai=Math.abs(ca.x-Pi.x)<.001?"y":"x",Fe=Math.abs(ji.x-va.x)<.001?"y":"x",er=_t(Pi.x,Pi.y,ca.x,ca.y,va.x,va.y,ji.x,ji.y);if(er){if(Lr[er.x.toFixed(4)]===er.y.toFixed(4))continue;Lr[er.x.toFixed(4)]=er.y.toFixed(4);var Ir=Pi.t+Math.abs((er[ai]-Pi[ai])/(ca[ai]-Pi[ai]))*(ca.t-Pi.t),hn=va.t+Math.abs((er[Fe]-va[Fe])/(ji[Fe]-va[Fe]))*(ji.t-va.t);Ir>=0&&Ir<=1&&hn>=0&&hn<=1&&(ae?wn+=1:wn.push({x:er.x,y:er.y,t1:Ir,t2:hn}))}}return wn},it=function(Pe,Tt,ae){Pe=k(Pe),Tt=k(Tt);for(var he,zt,Wt,de,Se,Ae,He,_r,Lr,wn,Kr=ae?0:[],Fr=0,pi=Pe.length;Fr<pi;Fr++){var Pi=Pe[Fr];if(Pi[0]==="M")he=Se=Pi[1],zt=Ae=Pi[2];else{Pi[0]==="C"?(Lr=[he,zt].concat(Pi.slice(1)),he=Lr[6],zt=Lr[7]):(Lr=[he,zt,he,zt,Se,Ae,Se,Ae],he=Se,zt=Ae);for(var ca=0,va=Tt.length;ca<va;ca++){var ji=Tt[ca];if(ji[0]==="M")Wt=He=ji[1],de=_r=ji[2];else{ji[0]==="C"?(wn=[Wt,de].concat(ji.slice(1)),Wt=wn[6],de=wn[7]):(wn=[Wt,de,Wt,de,He,_r,He,_r],Wt=He,de=_r);var ai=Qt(Lr,wn,ae);if(ae)Kr+=ai;else{for(var Fe=0,er=ai.length;Fe<er;Fe++)ai[Fe].segment1=Fr,ai[Fe].segment2=ca,ai[Fe].bez1=Lr,ai[Fe].bez2=wn;Kr=Kr.concat(ai)}}}}}return Kr},dt=function(Pe,Tt){return it(Pe,Tt)};function gt(Pe,Tt){var ae=[],he=[];function zt(Wt,de){if(Wt.length===1)ae.push(Wt[0]),he.push(Wt[0]);else{for(var Se=[],Ae=0;Ae<Wt.length-1;Ae++)Ae===0&&ae.push(Wt[0]),Ae===Wt.length-2&&he.push(Wt[Ae+1]),Se[Ae]=[(1-de)*Wt[Ae][0]+de*Wt[Ae+1][0],(1-de)*Wt[Ae][1]+de*Wt[Ae+1][1]];zt(Se,de)}}return Pe.length&&zt(Pe,Tt),{left:ae,right:he.reverse()}}function vt(Pe,Tt,ae){var he=[[Pe[1],Pe[2]]];ae=ae||2;var zt=[];Tt[0]==="A"?(he.push(Tt[6]),he.push(Tt[7])):Tt[0]==="C"?(he.push([Tt[1],Tt[2]]),he.push([Tt[3],Tt[4]]),he.push([Tt[5],Tt[6]])):Tt[0]==="S"||Tt[0]==="Q"?(he.push([Tt[1],Tt[2]]),he.push([Tt[3],Tt[4]])):he.push([Tt[1],Tt[2]]);for(var Wt=he,de=1/ae,Se=0;Se<ae-1;Se++){var Ae=de/(1-de*Se),He=gt(Wt,Ae);zt.push(He.left),Wt=He.right}zt.push(Wt);var _r=zt.map(function(Lr){var wn=[];return Lr.length===4&&(wn.push("C"),wn=wn.concat(Lr[2])),Lr.length>=3&&(Lr.length===3&&wn.push("Q"),wn=wn.concat(Lr[1])),Lr.length===2&&wn.push("L"),wn=wn.concat(Lr[Lr.length-1]),wn});return _r}var Y=function(Pe,Tt,ae){if(ae===1)return[[].concat(Pe)];var he=[];if(Tt[0]==="L"||Tt[0]==="C"||Tt[0]==="Q")he=he.concat(vt(Pe,Tt,ae));else{var zt=[].concat(Pe);zt[0]==="M"&&(zt[0]="L");for(var Wt=0;Wt<=ae-1;Wt++)he.push(zt)}return he},ot=function(Pe,Tt){if(Pe.length===1)return Pe;var ae=Pe.length-1,he=Tt.length-1,zt=ae/he,Wt=[];if(Pe.length===1&&Pe[0][0]==="M"){for(var de=0;de<he-ae;de++)Pe.push(Pe[0]);return Pe}for(var de=0;de<he;de++){var Se=Math.floor(zt*de);Wt[Se]=(Wt[Se]||0)+1}var Ae=Wt.reduce(function(He,_r,Lr){return Lr===ae?He.concat(Pe[ae]):He.concat(Y(Pe[Lr],Pe[Lr+1],_r))},[]);return Ae.unshift(Pe[0]),(Tt[he]==="Z"||Tt[he]==="z")&&Ae.push("Z"),Ae},nt=function(Pe,Tt){if(Pe.length!==Tt.length)return!1;var ae=!0;return(0,j.each)(Pe,function(he,zt){if(he!==Tt[zt])return ae=!1,!1}),ae};function rt(Pe,Tt,ae){var he=null,zt=ae;return Tt<zt&&(zt=Tt,he="add"),Pe<zt&&(zt=Pe,he="del"),{type:he,min:zt}}var st=function(Pe,Tt){var ae=Pe.length,he=Tt.length,zt,Wt,de=0;if(ae===0||he===0)return null;for(var Se=[],Ae=0;Ae<=ae;Ae++)Se[Ae]=[],Se[Ae][0]={min:Ae};for(var He=0;He<=he;He++)Se[0][He]={min:He};for(var Ae=1;Ae<=ae;Ae++){zt=Pe[Ae-1];for(var He=1;He<=he;He++){Wt=Tt[He-1],nt(zt,Wt)?de=0:de=1;var _r=Se[Ae-1][He].min+1,Lr=Se[Ae][He-1].min+1,wn=Se[Ae-1][He-1].min+de;Se[Ae][He]=rt(_r,Lr,wn)}}return Se},d=function(Pe,Tt){var ae=st(Pe,Tt),he=Pe.length,zt=Tt.length,Wt=[],de=1,Se=1;if(ae[he][zt].min!==he){for(var Ae=1;Ae<=he;Ae++){var He=ae[Ae][Ae].min;Se=Ae;for(var _r=de;_r<=zt;_r++)ae[Ae][_r].min<He&&(He=ae[Ae][_r].min,Se=_r);de=Se,ae[Ae][de].type&&Wt.push({index:Ae-1,type:ae[Ae][de].type})}for(var Ae=Wt.length-1;Ae>=0;Ae--)de=Wt[Ae].index,Wt[Ae].type==="add"?Pe.splice(de,0,[].concat(Pe[de])):Pe.splice(de,1)}he=Pe.length;var Lr=zt-he;if(he<zt)for(var Ae=0;Ae<Lr;Ae++)Pe[he-1][0]==="z"||Pe[he-1][0]==="Z"?Pe.splice(he-2,0,Pe[he-2]):Pe.push(Pe[he-1]),he+=1;return Pe};function It(Pe,Tt,ae){for(var he=[].concat(Pe),zt,Wt=1/(ae+1),de=Ht(Tt)[0],Se=1;Se<=ae;Se++)Wt*=Se,zt=Math.floor(Pe.length*Wt),zt===0?he.unshift([de[0]*Wt+Pe[zt][0]*(1-Wt),de[1]*Wt+Pe[zt][1]*(1-Wt)]):he.splice(zt,0,[de[0]*Wt+Pe[zt][0]*(1-Wt),de[1]*Wt+Pe[zt][1]*(1-Wt)]);return he}function Ht(Pe){var Tt=[];switch(Pe[0]){case"M":Tt.push([Pe[1],Pe[2]]);break;case"L":Tt.push([Pe[1],Pe[2]]);break;case"A":Tt.push([Pe[6],Pe[7]]);break;case"Q":Tt.push([Pe[3],Pe[4]]),Tt.push([Pe[1],Pe[2]]);break;case"T":Tt.push([Pe[1],Pe[2]]);break;case"C":Tt.push([Pe[5],Pe[6]]),Tt.push([Pe[1],Pe[2]]),Tt.push([Pe[3],Pe[4]]);break;case"S":Tt.push([Pe[3],Pe[4]]),Tt.push([Pe[1],Pe[2]]);break;case"H":Tt.push([Pe[1],Pe[1]]);break;case"V":Tt.push([Pe[1],Pe[1]]);break;default:}return Tt}var kt=function(Pe,Tt){if(Pe.length<=1)return Pe;for(var ae,he=0;he<Tt.length;he++)if(Pe[he][0]!==Tt[he][0])switch(ae=Ht(Pe[he]),Tt[he][0]){case"M":Pe[he]=["M"].concat(ae[0]);break;case"L":Pe[he]=["L"].concat(ae[0]);break;case"A":Pe[he]=[].concat(Tt[he]),Pe[he][6]=ae[0][0],Pe[he][7]=ae[0][1];break;case"Q":if(ae.length<2)if(he>0)ae=It(ae,Pe[he-1],1);else{Pe[he]=Tt[he];break}Pe[he]=["Q"].concat(ae.reduce(function(zt,Wt){return zt.concat(Wt)},[]));break;case"T":Pe[he]=["T"].concat(ae[0]);break;case"C":if(ae.length<3)if(he>0)ae=It(ae,Pe[he-1],2);else{Pe[he]=Tt[he];break}Pe[he]=["C"].concat(ae.reduce(function(zt,Wt){return zt.concat(Wt)},[]));break;case"S":if(ae.length<2)if(he>0)ae=It(ae,Pe[he-1],1);else{Pe[he]=Tt[he];break}Pe[he]=["S"].concat(ae.reduce(function(zt,Wt){return zt.concat(Wt)},[]));break;default:Pe[he]=Tt[he]}return Pe},Xt=function(){function Pe(Tt,ae){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=Tt,this.name=Tt,this.originalEvent=ae,this.timeStamp=ae.timeStamp}return Pe.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},Pe.prototype.stopPropagation=function(){this.propagationStopped=!0},Pe.prototype.toString=function(){var Tt=this.type;return"[Event (type="+Tt+")]"},Pe.prototype.save=function(){},Pe.prototype.restore=function(){},Pe}(),Kt=Xt,Jt=S(60153),ue=S(90494),ce=S(73890),$t=S(46812),Ut=S(21830),Rt=S(33643),Pt=S(66631),Yt=S(66974),Dt=S(27154),Nt=S(85260);function ne(Pe,Tt){var ae=Pe.indexOf(Tt);ae!==-1&&Pe.splice(ae,1)}var ve=typeof window!="undefined"&&typeof window.document!="undefined";function Re(Pe,Tt){if(Pe.isCanvas())return!0;for(var ae=Tt.getParent(),he=!1;ae;){if(ae===Pe){he=!0;break}ae=ae.getParent()}return he}function je(Pe){return Pe.cfg.visible&&Pe.cfg.capture}var Cr=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(ae){var he=Pe.call(this)||this;he.destroyed=!1;var zt=he.getDefaultCfg();return he.cfg=(0,Yt.default)(zt,ae),he}return Tt.prototype.getDefaultCfg=function(){return{}},Tt.prototype.get=function(ae){return this.cfg[ae]},Tt.prototype.set=function(ae,he){this.cfg[ae]=he},Tt.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},Tt}(ue.default),$r=Cr,Qr=S(43631),Ee=S(31506);function yn(Pe,Tt){var ae=[],he=Pe[0],zt=Pe[1],Wt=Pe[2],de=Pe[3],Se=Pe[4],Ae=Pe[5],He=Pe[6],_r=Pe[7],Lr=Pe[8],wn=Tt[0],Kr=Tt[1],Fr=Tt[2],pi=Tt[3],Pi=Tt[4],ca=Tt[5],va=Tt[6],ji=Tt[7],ai=Tt[8];return ae[0]=wn*he+Kr*de+Fr*He,ae[1]=wn*zt+Kr*Se+Fr*_r,ae[2]=wn*Wt+Kr*Ae+Fr*Lr,ae[3]=pi*he+Pi*de+ca*He,ae[4]=pi*zt+Pi*Se+ca*_r,ae[5]=pi*Wt+Pi*Ae+ca*Lr,ae[6]=va*he+ji*de+ai*He,ae[7]=va*zt+ji*Se+ai*_r,ae[8]=va*Wt+ji*Ae+ai*Lr,ae}function ui(Pe,Tt){var ae=[],he=Tt[0],zt=Tt[1];return ae[0]=Pe[0]*he+Pe[3]*zt+Pe[6],ae[1]=Pe[1]*he+Pe[4]*zt+Pe[7],ae}function la(Pe){var Tt=[],ae=Pe[0],he=Pe[1],zt=Pe[2],Wt=Pe[3],de=Pe[4],Se=Pe[5],Ae=Pe[6],He=Pe[7],_r=Pe[8],Lr=_r*de-Se*He,wn=-_r*Wt+Se*Ae,Kr=He*Wt-de*Ae,Fr=ae*Lr+he*wn+zt*Kr;return Fr?(Fr=1/Fr,Tt[0]=Lr*Fr,Tt[1]=(-_r*he+zt*He)*Fr,Tt[2]=(Se*he-zt*de)*Fr,Tt[3]=wn*Fr,Tt[4]=(_r*ae-zt*Ae)*Fr,Tt[5]=(-Se*ae+zt*Wt)*Fr,Tt[6]=Kr*Fr,Tt[7]=(-He*ae+he*Ae)*Fr,Tt[8]=(de*ae-he*Wt)*Fr,Tt):null}var Or="matrix",ln=["zIndex","capture","visible","type"],Kn=["repeat"],jn=":",wi="*";function Sa(Pe){for(var Tt=[],ae=0;ae<Pe.length;ae++)(0,j.isArray)(Pe[ae])?Tt.push([].concat(Pe[ae])):Tt.push(Pe[ae]);return Tt}function to(Pe,Tt){var ae={},he=Tt.attrs;for(var zt in Pe)ae[zt]=he[zt];return ae}function qa(Pe,Tt){var ae={},he=Tt.attr();return(0,j.each)(Pe,function(zt,Wt){Kn.indexOf(Wt)===-1&&!(0,j.isEqual)(he[Wt],zt)&&(ae[Wt]=zt)}),ae}function Ui(Pe,Tt){if(Tt.onFrame)return Pe;var ae=Tt.startTime,he=Tt.delay,zt=Tt.duration,Wt=Object.prototype.hasOwnProperty;return(0,j.each)(Pe,function(de){ae+he<de.startTime+de.delay+de.duration&&zt>de.delay&&(0,j.each)(Tt.toAttrs,function(Se,Ae){Wt.call(de.toAttrs,Ae)&&(delete de.toAttrs[Ae],delete de.fromAttrs[Ae])})}),Pe}var Ue=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(ae){var he=Pe.call(this,ae)||this;he.attrs={};var zt=he.getDefaultAttrs();return(0,j.mix)(zt,ae.attrs),he.attrs=zt,he.initAttrs(zt),he.initAnimate(),he}return Tt.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},Tt.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},Tt.prototype.onCanvasChange=function(ae){},Tt.prototype.initAttrs=function(ae){},Tt.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},Tt.prototype.isGroup=function(){return!1},Tt.prototype.getParent=function(){return this.get("parent")},Tt.prototype.getCanvas=function(){return this.get("canvas")},Tt.prototype.attr=function(){for(var ae,he=[],zt=0;zt<arguments.length;zt++)he[zt]=arguments[zt];var Wt=he[0],de=he[1];if(!Wt)return this.attrs;if((0,j.isObject)(Wt)){for(var Se in Wt)this.setAttr(Se,Wt[Se]);return this.afterAttrsChange(Wt),this}return he.length===2?(this.setAttr(Wt,de),this.afterAttrsChange((ae={},ae[Wt]=de,ae)),this):this.attrs[Wt]},Tt.prototype.isClipped=function(ae,he){var zt=this.getClip();return zt&&!zt.isHit(ae,he)},Tt.prototype.setAttr=function(ae,he){var zt=this.attrs[ae];zt!==he&&(this.attrs[ae]=he,this.onAttrChange(ae,he,zt))},Tt.prototype.onAttrChange=function(ae,he,zt){ae==="matrix"&&this.set("totalMatrix",null)},Tt.prototype.afterAttrsChange=function(ae){this.onCanvasChange("attr")},Tt.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},Tt.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},Tt.prototype.setZIndex=function(ae){this.set("zIndex",ae);var he=this.getParent();return he&&he.sort(),this},Tt.prototype.toFront=function(){var ae=this.getParent();if(!!ae){var he=ae.getChildren(),zt=this.get("el"),Wt=he.indexOf(this);he.splice(Wt,1),he.push(this),this.onCanvasChange("zIndex")}},Tt.prototype.toBack=function(){var ae=this.getParent();if(!!ae){var he=ae.getChildren(),zt=this.get("el"),Wt=he.indexOf(this);he.splice(Wt,1),he.unshift(this),this.onCanvasChange("zIndex")}},Tt.prototype.remove=function(ae){ae===void 0&&(ae=!0);var he=this.getParent();he?(ne(he.getChildren(),this),he.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),ae&&this.destroy()},Tt.prototype.resetMatrix=function(){this.attr(Or,this.getDefaultMatrix()),this.onCanvasChange("matrix")},Tt.prototype.getMatrix=function(){return this.attr(Or)},Tt.prototype.setMatrix=function(ae){this.attr(Or,ae),this.onCanvasChange("matrix")},Tt.prototype.getTotalMatrix=function(){var ae=this.get("totalMatrix");if(!ae){var he=this.attr("matrix"),zt=this.get("parentMatrix");zt&&he?ae=yn(zt,he):ae=he||zt,this.set("totalMatrix",ae)}return ae},Tt.prototype.applyMatrix=function(ae){var he=this.attr("matrix"),zt=null;ae&&he?zt=yn(ae,he):zt=he||ae,this.set("totalMatrix",zt),this.set("parentMatrix",ae)},Tt.prototype.getDefaultMatrix=function(){return null},Tt.prototype.applyToMatrix=function(ae){var he=this.attr("matrix");return he?ui(he,ae):ae},Tt.prototype.invertFromMatrix=function(ae){var he=this.attr("matrix");if(he){var zt=la(he);if(zt)return ui(zt,ae)}return ae},Tt.prototype.setClip=function(ae){var he=this.getCanvas(),zt=null;if(ae){var Wt=this.getShapeBase(),de=(0,j.upperFirst)(ae.type),Se=Wt[de];Se&&(zt=new Se({type:ae.type,isClipShape:!0,attrs:ae.attrs,canvas:he}))}return this.set("clipShape",zt),this.onCanvasChange("clip"),zt},Tt.prototype.getClip=function(){var ae=this.cfg.clipShape;return ae||null},Tt.prototype.clone=function(){var ae=this,he=this.attrs,zt={};(0,j.each)(he,function(Se,Ae){(0,j.isArray)(he[Ae])?zt[Ae]=Sa(he[Ae]):zt[Ae]=he[Ae]});var Wt=this.constructor,de=new Wt({attrs:zt});return(0,j.each)(ln,function(Se){de.set(Se,ae.get(Se))}),de},Tt.prototype.destroy=function(){var ae=this.destroyed;ae||(this.attrs={},Pe.prototype.destroy.call(this))},Tt.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},Tt.prototype.animate=function(){for(var ae=[],he=0;he<arguments.length;he++)ae[he]=arguments[he];this.set("animating",!0);var zt=this.get("timeline");zt||(zt=this.get("canvas").get("timeline"),this.set("timeline",zt));var Wt=this.get("animations")||[];zt.timer||zt.initTimer();var de=ae[0],Se=ae[1],Ae=ae[2],He=Ae===void 0?"easeLinear":Ae,_r=ae[3],Lr=_r===void 0?j.noop:_r,wn=ae[4],Kr=wn===void 0?0:wn,Fr,pi,Pi,ca,va;(0,j.isFunction)(de)?(Fr=de,de={}):(0,j.isObject)(de)&&de.onFrame&&(Fr=de.onFrame,pi=de.repeat),(0,j.isObject)(Se)?(va=Se,Se=va.duration,He=va.easing||"easeLinear",Kr=va.delay||0,pi=va.repeat||pi||!1,Lr=va.callback||j.noop,Pi=va.pauseCallback||j.noop,ca=va.resumeCallback||j.noop):((0,j.isNumber)(Lr)&&(Kr=Lr,Lr=null),(0,j.isFunction)(He)?(Lr=He,He="easeLinear"):He=He||"easeLinear");var ji=qa(de,this),ai={fromAttrs:to(ji,this),toAttrs:ji,duration:Se,easing:He,repeat:pi,callback:Lr,pauseCallback:Pi,resumeCallback:ca,delay:Kr,startTime:zt.getTime(),id:(0,j.uniqueId)(),onFrame:Fr,pathFormatted:!1};Wt.length>0?Wt=Ui(Wt,ai):zt.addAnimator(this),Wt.push(ai),this.set("animations",Wt),this.set("_pause",{isPaused:!1})},Tt.prototype.stopAnimate=function(ae){var he=this;ae===void 0&&(ae=!0);var zt=this.get("animations");(0,j.each)(zt,function(Wt){ae&&(Wt.onFrame?he.attr(Wt.onFrame(1)):he.attr(Wt.toAttrs)),Wt.callback&&Wt.callback()}),this.set("animating",!1),this.set("animations",[])},Tt.prototype.pauseAnimate=function(){var ae=this.get("timeline"),he=this.get("animations"),zt=ae.getTime();return(0,j.each)(he,function(Wt){Wt._paused=!0,Wt._pauseTime=zt,Wt.pauseCallback&&Wt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:zt}),this},Tt.prototype.resumeAnimate=function(){var ae=this.get("timeline"),he=ae.getTime(),zt=this.get("animations"),Wt=this.get("_pause").pauseTime;return(0,j.each)(zt,function(de){de.startTime=de.startTime+(he-Wt),de._paused=!1,de._pauseTime=null,de.resumeCallback&&de.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",zt),this},Tt.prototype.emitDelegation=function(ae,he){var zt=this,Wt=he.propagationPath,de=this.getEvents(),Se;ae==="mouseenter"?Se=he.fromShape:ae==="mouseleave"&&(Se=he.toShape);for(var Ae=function(wn){var Kr=Wt[wn],Fr=Kr.get("name");if(Fr){if((Kr.isGroup()||Kr.isCanvas&&Kr.isCanvas())&&Se&&Re(Kr,Se))return"break";(0,j.isArray)(Fr)?(0,j.each)(Fr,function(pi){zt.emitDelegateEvent(Kr,pi,he)}):He.emitDelegateEvent(Kr,Fr,he)}},He=this,_r=0;_r<Wt.length;_r++){var Lr=Ae(_r);if(Lr==="break")break}},Tt.prototype.emitDelegateEvent=function(ae,he,zt){var Wt=this.getEvents(),de=he+jn+zt.type;(Wt[de]||Wt[wi])&&(zt.name=de,zt.currentTarget=ae,zt.delegateTarget=this,zt.delegateObject=ae.get("delegateObject"),this.emit(de,zt))},Tt.prototype.translate=function(ae,he){ae===void 0&&(ae=0),he===void 0&&(he=0);var zt=this.getMatrix(),Wt=Ee.transform(zt,[["t",ae,he]]);return this.setMatrix(Wt),this},Tt.prototype.move=function(ae,he){var zt=this.attr("x")||0,Wt=this.attr("y")||0;return this.translate(ae-zt,he-Wt),this},Tt.prototype.moveTo=function(ae,he){return this.move(ae,he)},Tt.prototype.scale=function(ae,he){var zt=this.getMatrix(),Wt=Ee.transform(zt,[["s",ae,he||ae]]);return this.setMatrix(Wt),this},Tt.prototype.rotate=function(ae){var he=this.getMatrix(),zt=Ee.transform(he,[["r",ae]]);return this.setMatrix(zt),this},Tt.prototype.rotateAtStart=function(ae){var he=this.attr(),zt=he.x,Wt=he.y,de=this.getMatrix(),Se=Ee.transform(de,[["t",-zt,-Wt],["r",ae],["t",zt,Wt]]);return this.setMatrix(Se),this},Tt.prototype.rotateAtPoint=function(ae,he,zt){var Wt=this.getMatrix(),de=Ee.transform(Wt,[["t",-ae,-he],["r",zt],["t",ae,he]]);return this.setMatrix(de),this},Tt}($r),We=Ue,fr={},Ar="_INDEX";function qr(Pe){Pe.isGroup()?(Pe.isEntityGroup()||Pe.get("children").length)&&Pe.onCanvasChange("add"):Pe.onCanvasChange("add")}function nn(Pe,Tt){if(Pe.set("canvas",Tt),Pe.isGroup()){var ae=Pe.get("children");ae.length&&ae.forEach(function(he){nn(he,Tt)})}}function an(Pe,Tt){if(Pe.set("timeline",Tt),Pe.isGroup()){var ae=Pe.get("children");ae.length&&ae.forEach(function(he){an(he,Tt)})}}function le(Pe,Tt){var ae=Pe.getChildren();return ae.indexOf(Tt)>=0}function fe(Pe,Tt,ae){ae===void 0&&(ae=!0),ae?Tt.destroy():(Tt.set("parent",null),Tt.set("canvas",null)),ne(Pe.getChildren(),Tt)}function Me(Pe){return function(Tt,ae){var he=Pe(Tt,ae);return he===0?Tt[Ar]-ae[Ar]:he}}var Te=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(){return Pe!==null&&Pe.apply(this,arguments)||this}return Tt.prototype.isCanvas=function(){return!1},Tt.prototype.getBBox=function(){var ae=Infinity,he=-Infinity,zt=Infinity,Wt=-Infinity,de=[],Se=[],Ae=this.getChildren().filter(function(_r){return _r.get("visible")&&(!_r.isGroup()||_r.isGroup()&&_r.getChildren().length>0)});Ae.length>0?((0,Dt.default)(Ae,function(_r){var Lr=_r.getBBox();de.push(Lr.minX,Lr.maxX),Se.push(Lr.minY,Lr.maxY)}),ae=Math.min.apply(null,de),he=Math.max.apply(null,de),zt=Math.min.apply(null,Se),Wt=Math.max.apply(null,Se)):(ae=0,he=0,zt=0,Wt=0);var He={x:ae,y:zt,minX:ae,minY:zt,maxX:he,maxY:Wt,width:he-ae,height:Wt-zt};return He},Tt.prototype.getCanvasBBox=function(){var ae=Infinity,he=-Infinity,zt=Infinity,Wt=-Infinity,de=[],Se=[],Ae=this.getChildren().filter(function(_r){return _r.get("visible")&&(!_r.isGroup()||_r.isGroup()&&_r.getChildren().length>0)});Ae.length>0?((0,Dt.default)(Ae,function(_r){var Lr=_r.getCanvasBBox();de.push(Lr.minX,Lr.maxX),Se.push(Lr.minY,Lr.maxY)}),ae=Math.min.apply(null,de),he=Math.max.apply(null,de),zt=Math.min.apply(null,Se),Wt=Math.max.apply(null,Se)):(ae=0,he=0,zt=0,Wt=0);var He={x:ae,y:zt,minX:ae,minY:zt,maxX:he,maxY:Wt,width:he-ae,height:Wt-zt};return He},Tt.prototype.getDefaultCfg=function(){var ae=Pe.prototype.getDefaultCfg.call(this);return ae.children=[],ae},Tt.prototype.onAttrChange=function(ae,he,zt){if(Pe.prototype.onAttrChange.call(this,ae,he,zt),ae==="matrix"){var Wt=this.getTotalMatrix();this._applyChildrenMarix(Wt)}},Tt.prototype.applyMatrix=function(ae){var he=this.getTotalMatrix();Pe.prototype.applyMatrix.call(this,ae);var zt=this.getTotalMatrix();zt!==he&&this._applyChildrenMarix(zt)},Tt.prototype._applyChildrenMarix=function(ae){var he=this.getChildren();(0,Dt.default)(he,function(zt){zt.applyMatrix(ae)})},Tt.prototype.addShape=function(){for(var ae=[],he=0;he<arguments.length;he++)ae[he]=arguments[he];var zt=ae[0],Wt=ae[1];(0,Rt.default)(zt)?Wt=zt:Wt.type=zt;var de=fr[Wt.type];de||(de=(0,Nt.default)(Wt.type),fr[Wt.type]=de);var Se=this.getShapeBase(),Ae=new Se[de](Wt);return this.add(Ae),Ae},Tt.prototype.addGroup=function(){for(var ae=[],he=0;he<arguments.length;he++)ae[he]=arguments[he];var zt=ae[0],Wt=ae[1],de;if((0,$t.default)(zt))Wt?de=new zt(Wt):de=new zt({parent:this});else{var Se=zt||{},Ae=this.getGroupBase();de=new Ae(Se)}return this.add(de),de},Tt.prototype.getCanvas=function(){var ae;return this.isCanvas()?ae=this:ae=this.get("canvas"),ae},Tt.prototype.getShape=function(ae,he,zt){if(!je(this))return null;var Wt=this.getChildren(),de;if(this.isCanvas())de=this._findShape(Wt,ae,he,zt);else{var Se=[ae,he,1];Se=this.invertFromMatrix(Se),this.isClipped(Se[0],Se[1])||(de=this._findShape(Wt,Se[0],Se[1],zt))}return de},Tt.prototype._findShape=function(ae,he,zt,Wt){for(var de=null,Se=ae.length-1;Se>=0;Se--){var Ae=ae[Se];if(je(Ae)&&(Ae.isGroup()?de=Ae.getShape(he,zt,Wt):Ae.isHit(he,zt)&&(de=Ae)),de)break}return de},Tt.prototype.add=function(ae){var he=this.getCanvas(),zt=this.getChildren(),Wt=this.get("timeline"),de=ae.getParent();de&&fe(de,ae,!1),ae.set("parent",this),he&&nn(ae,he),Wt&&an(ae,Wt),zt.push(ae),qr(ae),this._applyElementMatrix(ae)},Tt.prototype._applyElementMatrix=function(ae){var he=this.getTotalMatrix();he&&ae.applyMatrix(he)},Tt.prototype.getChildren=function(){return this.get("children")},Tt.prototype.sort=function(){var ae=this.getChildren();(0,Dt.default)(ae,function(he,zt){return he[Ar]=zt,he}),ae.sort(Me(function(he,zt){return he.get("zIndex")-zt.get("zIndex")})),this.onCanvasChange("sort")},Tt.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var ae=this.getChildren(),he=ae.length-1;he>=0;he--)ae[he].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},Tt.prototype.destroy=function(){this.get("destroyed")||(this.clear(),Pe.prototype.destroy.call(this))},Tt.prototype.getFirst=function(){return this.getChildByIndex(0)},Tt.prototype.getLast=function(){var ae=this.getChildren();return this.getChildByIndex(ae.length-1)},Tt.prototype.getChildByIndex=function(ae){var he=this.getChildren();return he[ae]},Tt.prototype.getCount=function(){var ae=this.getChildren();return ae.length},Tt.prototype.contain=function(ae){var he=this.getChildren();return he.indexOf(ae)>-1},Tt.prototype.removeChild=function(ae,he){he===void 0&&(he=!0),this.contain(ae)&&ae.remove(he)},Tt.prototype.findAll=function(ae){var he=[],zt=this.getChildren();return(0,Dt.default)(zt,function(Wt){ae(Wt)&&he.push(Wt),Wt.isGroup()&&(he=he.concat(Wt.findAll(ae)))}),he},Tt.prototype.find=function(ae){var he=null,zt=this.getChildren();return(0,Dt.default)(zt,function(Wt){if(ae(Wt)?he=Wt:Wt.isGroup()&&(he=Wt.find(ae)),he)return!1}),he},Tt.prototype.findById=function(ae){return this.find(function(he){return he.get("id")===ae})},Tt.prototype.findByClassName=function(ae){return this.find(function(he){return he.get("className")===ae})},Tt.prototype.findAllByName=function(ae){return this.findAll(function(he){return he.get("name")===ae})},Tt}(We),Ze=Te,or=S(35374),lr=S(13681),Be=S(26257),tr=S(88122),Mr=function(Pe){return["fill","stroke","fillStyle","strokeStyle"].includes(Pe)},Xr=function(Pe){return/^[r,R,L,l]{1}[\s]*\(/.test(Pe)},Zr=[1,0,0,0,1,0,0,0,1];function tn(Pe,Tt,ae){var he={},zt=Tt.fromAttrs,Wt=Tt.toAttrs;if(!Pe.destroyed){var de;for(var Se in Wt)if(!(0,j.isEqual)(zt[Se],Wt[Se]))if(Se==="path"){var Ae=Wt[Se],He=zt[Se];Ae.length>He.length?(Ae=B(Wt[Se]),He=B(zt[Se]),He=d(He,Ae),He=kt(He,Ae),Tt.fromAttrs.path=He,Tt.toAttrs.path=Ae):Tt.pathFormatted||(Ae=B(Wt[Se]),He=B(zt[Se]),He=kt(He,Ae),Tt.fromAttrs.path=He,Tt.toAttrs.path=Ae,Tt.pathFormatted=!0),he[Se]=[];for(var _r=0;_r<Ae.length;_r++){for(var Lr=Ae[_r],wn=He[_r],Kr=[],Fr=0;Fr<Lr.length;Fr++)(0,j.isNumber)(Lr[Fr])&&wn&&(0,j.isNumber)(wn[Fr])?(de=(0,Be.Z)(wn[Fr],Lr[Fr]),Kr.push(de(ae))):Kr.push(Lr[Fr]);he[Se].push(Kr)}}else if(Se==="matrix"){var pi=(0,tr.Z)(zt[Se]||Zr,Wt[Se]||Zr),Pi=pi(ae);he[Se]=Pi}else Mr(Se)&&Xr(Wt[Se])?he[Se]=Wt[Se]:(0,j.isFunction)(Wt[Se])||(de=(0,Be.Z)(zt[Se],Wt[Se]),he[Se]=de(ae));Pe.attr(he)}}function _n(Pe,Tt,ae){var he=Tt.startTime,zt=Tt.delay;if(ae<he+zt||Tt._paused)return!1;var Wt,de=Tt.duration,Se=Tt.easing;if(ae=ae-he-Tt.delay,Tt.repeat)Wt=ae%de/de,Wt=lr[Se](Wt);else if(Wt=ae/de,Wt<1)Wt=lr[Se](Wt);else return Tt.onFrame?Pe.attr(Tt.onFrame(1)):Pe.attr(Tt.toAttrs),!0;if(Tt.onFrame){var Ae=Tt.onFrame(Wt);Pe.attr(Ae)}else tn(Pe,Tt,Wt);return!1}var $n=function(){function Pe(Tt){this.animators=[],this.current=0,this.timer=null,this.canvas=Tt}return Pe.prototype.initTimer=function(){var Tt=this,ae=!1,he,zt,Wt;this.timer=or.HT(function(de){if(Tt.current=de,Tt.animators.length>0){for(var Se=Tt.animators.length-1;Se>=0;Se--){if(he=Tt.animators[Se],he.destroyed){Tt.removeAnimator(Se);continue}if(!he.isAnimatePaused()){zt=he.get("animations");for(var Ae=zt.length-1;Ae>=0;Ae--)Wt=zt[Ae],ae=_n(he,Wt,de),ae&&(zt.splice(Ae,1),ae=!1,Wt.callback&&Wt.callback())}zt.length===0&&Tt.removeAnimator(Se)}var He=Tt.canvas.get("autoDraw");He||Tt.canvas.draw()}})},Pe.prototype.addAnimator=function(Tt){this.animators.push(Tt)},Pe.prototype.removeAnimator=function(Tt){this.animators.splice(Tt,1)},Pe.prototype.isAnimating=function(){return!!this.animators.length},Pe.prototype.stop=function(){this.timer&&this.timer.stop()},Pe.prototype.stopAllAnimations=function(Tt){Tt===void 0&&(Tt=!0),this.animators.forEach(function(ae){ae.stopAnimate(Tt)}),this.animators=[],this.canvas.draw()},Pe.prototype.getTime=function(){return this.current},Pe}(),si=$n,Jr=40,Si=0,Jn=":",yi=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ka(Pe,Tt){for(var ae in Pe)if(Pe.hasOwnProperty(ae)&&ae.indexOf(Jn+Tt)>=0)return!0;return!1}function ki(Pe,Tt,ae){ae.name=Tt,ae.target=Pe,ae.currentTarget=Pe,ae.delegateTarget=Pe,Pe.emit(Tt,ae)}function ga(Pe,Tt,ae){if(ae.bubbles){var he=void 0,zt=!1;if(Tt==="mouseenter"?(he=ae.fromShape,zt=!0):Tt==="mouseleave"&&(zt=!0,he=ae.toShape),Pe.isCanvas()&&zt)return;if(he&&Re(Pe,he)){ae.bubbles=!1;return}ae.name=Tt,ae.currentTarget=Pe,ae.delegateTarget=Pe,Pe.emit(Tt,ae)}}var ko=function(){function Pe(Tt){var ae=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(he){var zt=he.type;ae._triggerEvent(zt,he)},this._onDocumentMove=function(he){var zt=ae.canvas,Wt=zt.get("el");if(Wt!==he.target&&(ae.dragging||ae.currentShape)){var de=ae._getPointInfo(he);ae.dragging&&ae._emitEvent("drag",he,de,ae.draggingShape)}},this._onDocumentMouseUp=function(he){var zt=ae.canvas,Wt=zt.get("el");if(Wt!==he.target&&ae.dragging){var de=ae._getPointInfo(he);ae.draggingShape&&ae._emitEvent("drop",he,de,null),ae._emitEvent("dragend",he,de,ae.draggingShape),ae._afterDrag(ae.draggingShape,de,he)}},this.canvas=Tt.canvas}return Pe.prototype.init=function(){this._bindEvents()},Pe.prototype._bindEvents=function(){var Tt=this,ae=this.canvas.get("el");(0,Dt.default)(yi,function(he){ae.addEventListener(he,Tt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Pe.prototype._clearEvents=function(){var Tt=this,ae=this.canvas.get("el");(0,Dt.default)(yi,function(he){ae.removeEventListener(he,Tt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Pe.prototype._getEventObj=function(Tt,ae,he,zt,Wt,de){var Se=new Kt(Tt,ae);return Se.fromShape=Wt,Se.toShape=de,Se.x=he.x,Se.y=he.y,Se.clientX=he.clientX,Se.clientY=he.clientY,Se.propagationPath.push(zt),Se},Pe.prototype._getShape=function(Tt,ae){return this.canvas.getShape(Tt.x,Tt.y,ae)},Pe.prototype._getPointInfo=function(Tt){var ae=this.canvas,he=ae.getClientByEvent(Tt),zt=ae.getPointByEvent(Tt);return{x:zt.x,y:zt.y,clientX:he.x,clientY:he.y}},Pe.prototype._triggerEvent=function(Tt,ae){var he=this._getPointInfo(ae),zt=this._getShape(he,ae),Wt=this["_on"+Tt],de=!1;if(Wt)Wt.call(this,he,zt,ae);else{var Se=this.currentShape;Tt==="mouseenter"||Tt==="dragenter"||Tt==="mouseover"?(this._emitEvent(Tt,ae,he,null,null,zt),zt&&this._emitEvent(Tt,ae,he,zt,null,zt),Tt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",ae,he,null)):Tt==="mouseleave"||Tt==="dragleave"||Tt==="mouseout"?(de=!0,Se&&this._emitEvent(Tt,ae,he,Se,Se,null),this._emitEvent(Tt,ae,he,null,Se,null),Tt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",ae,he,null)):this._emitEvent(Tt,ae,he,zt,null,null)}if(de||(this.currentShape=zt),zt&&!zt.get("destroyed")){var Ae=this.canvas,He=Ae.get("el");He.style.cursor=zt.attr("cursor")||Ae.get("cursor")}},Pe.prototype._onmousedown=function(Tt,ae,he){he.button===Si&&(this.mousedownShape=ae,this.mousedownPoint=Tt,this.mousedownTimeStamp=he.timeStamp),this._emitEvent("mousedown",he,Tt,ae,null,null)},Pe.prototype._emitMouseoverEvents=function(Tt,ae,he,zt){var Wt=this.canvas.get("el");he!==zt&&(he&&(this._emitEvent("mouseout",Tt,ae,he,he,zt),this._emitEvent("mouseleave",Tt,ae,he,he,zt),(!zt||zt.get("destroyed"))&&(Wt.style.cursor=this.canvas.get("cursor"))),zt&&(this._emitEvent("mouseover",Tt,ae,zt,he,zt),this._emitEvent("mouseenter",Tt,ae,zt,he,zt)))},Pe.prototype._emitDragoverEvents=function(Tt,ae,he,zt,Wt){zt?(zt!==he&&(he&&this._emitEvent("dragleave",Tt,ae,he,he,zt),this._emitEvent("dragenter",Tt,ae,zt,he,zt)),Wt||this._emitEvent("dragover",Tt,ae,zt)):he&&this._emitEvent("dragleave",Tt,ae,he,he,zt),Wt&&this._emitEvent("dragover",Tt,ae,zt)},Pe.prototype._afterDrag=function(Tt,ae,he){Tt&&(Tt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var zt=this._getShape(ae,he);zt!==Tt&&this._emitMouseoverEvents(he,ae,Tt,zt),this.currentShape=zt},Pe.prototype._onmouseup=function(Tt,ae,he){if(he.button===Si){var zt=this.draggingShape;this.dragging?(zt&&this._emitEvent("drop",he,Tt,ae),this._emitEvent("dragend",he,Tt,zt),this._afterDrag(zt,Tt,he)):(this._emitEvent("mouseup",he,Tt,ae),ae===this.mousedownShape&&this._emitEvent("click",he,Tt,ae),this.mousedownShape=null,this.mousedownPoint=null)}},Pe.prototype._ondragover=function(Tt,ae,he){he.preventDefault();var zt=this.currentShape;this._emitDragoverEvents(he,Tt,zt,ae,!0)},Pe.prototype._onmousemove=function(Tt,ae,he){var zt=this.canvas,Wt=this.currentShape,de=this.draggingShape;if(this.dragging)de&&this._emitDragoverEvents(he,Tt,Wt,ae,!1),this._emitEvent("drag",he,Tt,de);else{var Se=this.mousedownPoint;if(Se){var Ae=this.mousedownShape,He=he.timeStamp,_r=He-this.mousedownTimeStamp,Lr=Se.clientX-Tt.clientX,wn=Se.clientY-Tt.clientY,Kr=Lr*Lr+wn*wn;_r>120||Kr>Jr?Ae&&Ae.get("draggable")?(de=this.mousedownShape,de.set("capture",!1),this.draggingShape=de,this.dragging=!0,this._emitEvent("dragstart",he,Tt,de),this.mousedownShape=null,this.mousedownPoint=null):!Ae&&zt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",he,Tt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(he,Tt,Wt,ae),this._emitEvent("mousemove",he,Tt,ae)):(this._emitMouseoverEvents(he,Tt,Wt,ae),this._emitEvent("mousemove",he,Tt,ae))}else this._emitMouseoverEvents(he,Tt,Wt,ae),this._emitEvent("mousemove",he,Tt,ae)}},Pe.prototype._emitEvent=function(Tt,ae,he,zt,Wt,de){var Se=this._getEventObj(Tt,ae,he,zt,Wt,de);if(zt){Se.shape=zt,ki(zt,Tt,Se);for(var Ae=zt.getParent();Ae;)Ae.emitDelegation(Tt,Se),Se.propagationStopped||ga(Ae,Tt,Se),Se.propagationPath.push(Ae),Ae=Ae.getParent()}else{var He=this.canvas;ki(He,Tt,Se)}},Pe.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Pe}(),Ci=ko,po="px",oo=(0,Qr.detect)(),cn=oo&&oo.name==="firefox",vn=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(ae){var he=Pe.call(this,ae)||this;return he.initContainer(),he.initDom(),he.initEvents(),he.initTimeline(),he}return Tt.prototype.getDefaultCfg=function(){var ae=Pe.prototype.getDefaultCfg.call(this);return ae.cursor="default",ae.supportCSSTransform=!1,ae},Tt.prototype.initContainer=function(){var ae=this.get("container");(0,Ut.default)(ae)&&(ae=document.getElementById(ae),this.set("container",ae))},Tt.prototype.initDom=function(){var ae=this.createDom();this.set("el",ae);var he=this.get("container");he.appendChild(ae),this.setDOMSize(this.get("width"),this.get("height"))},Tt.prototype.initEvents=function(){var ae=new Ci({canvas:this});ae.init(),this.set("eventController",ae)},Tt.prototype.initTimeline=function(){var ae=new si(this);this.set("timeline",ae)},Tt.prototype.setDOMSize=function(ae,he){var zt=this.get("el");ve&&(zt.style.width=ae+po,zt.style.height=he+po)},Tt.prototype.changeSize=function(ae,he){this.setDOMSize(ae,he),this.set("width",ae),this.set("height",he),this.onCanvasChange("changeSize")},Tt.prototype.getRenderer=function(){return this.get("renderer")},Tt.prototype.getCursor=function(){return this.get("cursor")},Tt.prototype.setCursor=function(ae){this.set("cursor",ae);var he=this.get("el");ve&&he&&(he.style.cursor=ae)},Tt.prototype.getPointByEvent=function(ae){var he=this.get("supportCSSTransform");if(he){if(cn&&!(0,ce.default)(ae.layerX)&&ae.layerX!==ae.offsetX)return{x:ae.layerX,y:ae.layerY};if(!(0,ce.default)(ae.offsetX))return{x:ae.offsetX,y:ae.offsetY}}var zt=this.getClientByEvent(ae),Wt=zt.x,de=zt.y;return this.getPointByClient(Wt,de)},Tt.prototype.getClientByEvent=function(ae){var he=ae;return ae.touches&&(ae.type==="touchend"?he=ae.changedTouches[0]:he=ae.touches[0]),{x:he.clientX,y:he.clientY}},Tt.prototype.getPointByClient=function(ae,he){var zt=this.get("el"),Wt=zt.getBoundingClientRect();return{x:ae-Wt.left,y:he-Wt.top}},Tt.prototype.getClientByPoint=function(ae,he){var zt=this.get("el"),Wt=zt.getBoundingClientRect();return{x:ae+Wt.left,y:he+Wt.top}},Tt.prototype.draw=function(){},Tt.prototype.removeDom=function(){var ae=this.get("el");ae.parentNode.removeChild(ae)},Tt.prototype.clearEvents=function(){var ae=this.get("eventController");ae.destroy()},Tt.prototype.isCanvas=function(){return!0},Tt.prototype.getParent=function(){return null},Tt.prototype.destroy=function(){var ae=this.get("timeline");this.get("destroyed")||(this.clear(),ae&&ae.stop(),this.clearEvents(),this.removeDom(),Pe.prototype.destroy.call(this))},Tt}(Ze),Wo=vn,mo=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(){return Pe!==null&&Pe.apply(this,arguments)||this}return Tt.prototype.isGroup=function(){return!0},Tt.prototype.isEntityGroup=function(){return!1},Tt.prototype.clone=function(){for(var ae=Pe.prototype.clone.call(this),he=this.getChildren(),zt=0;zt<he.length;zt++){var Wt=he[zt];ae.add(Wt.clone())}return ae},Tt}(Ze),fo=mo,Po=function(Pe){(0,Jt.__extends)(Tt,Pe);function Tt(ae){return Pe.call(this,ae)||this}return Tt.prototype._isInBBox=function(ae,he){var zt=this.getBBox();return zt.minX<=ae&&zt.maxX>=ae&&zt.minY<=he&&zt.maxY>=he},Tt.prototype.afterAttrsChange=function(ae){Pe.prototype.afterAttrsChange.call(this,ae),this.clearCacheBBox()},Tt.prototype.getBBox=function(){var ae=this.get("bbox");return ae||(ae=this.calculateBBox(),this.set("bbox",ae)),ae},Tt.prototype.getCanvasBBox=function(){var ae=this.get("canvasBox");return ae||(ae=this.calculateCanvasBBox(),this.set("canvasBox",ae)),ae},Tt.prototype.applyMatrix=function(ae){Pe.prototype.applyMatrix.call(this,ae),this.set("canvasBox",null)},Tt.prototype.calculateCanvasBBox=function(){var ae=this.getBBox(),he=this.getTotalMatrix(),zt=ae.minX,Wt=ae.minY,de=ae.maxX,Se=ae.maxY;if(he){var Ae=ui(he,[ae.minX,ae.minY]),He=ui(he,[ae.maxX,ae.minY]),_r=ui(he,[ae.minX,ae.maxY]),Lr=ui(he,[ae.maxX,ae.maxY]);zt=Math.min(Ae[0],He[0],_r[0],Lr[0]),de=Math.max(Ae[0],He[0],_r[0],Lr[0]),Wt=Math.min(Ae[1],He[1],_r[1],Lr[1]),Se=Math.max(Ae[1],He[1],_r[1],Lr[1])}var wn=this.attrs;if(wn.shadowColor){var Kr=wn.shadowBlur,Fr=Kr===void 0?0:Kr,pi=wn.shadowOffsetX,Pi=pi===void 0?0:pi,ca=wn.shadowOffsetY,va=ca===void 0?0:ca,ji=zt-Fr+Pi,ai=de+Fr+Pi,Fe=Wt-Fr+va,er=Se+Fr+va;zt=Math.min(zt,ji),de=Math.max(de,ai),Wt=Math.min(Wt,Fe),Se=Math.max(Se,er)}return{x:zt,y:Wt,minX:zt,minY:Wt,maxX:de,maxY:Se,width:de-zt,height:Se-Wt}},Tt.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},Tt.prototype.isClipShape=function(){return this.get("isClipShape")},Tt.prototype.isInShape=function(ae,he){return!1},Tt.prototype.isOnlyHitBox=function(){return!1},Tt.prototype.isHit=function(ae,he){var zt=this.get("startArrowShape"),Wt=this.get("endArrowShape"),de=[ae,he,1];de=this.invertFromMatrix(de);var Se=de[0],Ae=de[1],He=this._isInBBox(Se,Ae);return this.isOnlyHitBox()?He:!!(He&&!this.isClipped(Se,Ae)&&(this.isInShape(Se,Ae)||zt&&zt.isHit(Se,Ae)||Wt&&Wt.isHit(Se,Ae)))},Tt}(We),vi=Po,pa=S(76062),An=pa.version},40455:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T){var j=T.attr(),y=j.x,U=j.y,F=j.r;return{x:y-F,y:U-F,width:F*2,height:F*2}}P.default=S},27633:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T){var j=T.attr(),y=j.x,U=j.y,F=j.rx,B=j.ry;return{x:y-F,y:U-B,width:F*2,height:B*2}}P.default=S},41056:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(28648);P.b=j.getMethod;var y=S(3541),U=S(40455),F=S(10687),B=S(19914),R=S(92933),N=S(89372),A=S(74461),D=S(27633);j.register("rect",y.default),j.register("image",y.default),j.register("circle",U.default),j.register("marker",U.default),j.register("polyline",F.default),j.register("polygon",B.default),j.register("text",R.default),j.register("path",N.default),j.register("line",A.default),j.register("ellipse",D.default)},74461:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(3406);function j(y){var U=y.attr(),F=U.x1,B=U.y1,R=U.x2,N=U.y2,A=Math.min(F,R),D=Math.max(F,R),M=Math.min(B,N),O=Math.max(B,N),k={minX:A,maxX:D,minY:M,maxY:O};return k=T.mergeArrowBBox(y,k),{x:k.minX,y:k.minY,width:k.maxX-k.minX,height:k.maxY-k.minY}}P.default=j},89372:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(2879),j=S(15730),y=S(33418),U=S(49274),F=S(39984),B=S(3406);function R(D,M){for(var O=[],k=[],V=[],X=0;X<D.length;X++){var K=D[X],q=K.currentPoint,ct=K.params,_t=K.prePoint,yt=void 0;switch(K.command){case"Q":yt=T.default.box(_t[0],_t[1],ct[1],ct[2],ct[3],ct[4]);break;case"C":yt=j.default.box(_t[0],_t[1],ct[1],ct[2],ct[3],ct[4],ct[5],ct[6]);break;case"A":var lt=K.arcParams;yt=y.default.box(lt.cx,lt.cy,lt.rx,lt.ry,lt.xRotation,lt.startAngle,lt.endAngle);break;default:O.push(q[0]),k.push(q[1]);break}yt&&(K.box=yt,O.push(yt.x,yt.x+yt.width),k.push(yt.y,yt.y+yt.height)),M&&(K.command==="L"||K.command==="M")&&K.prePoint&&K.nextPoint&&V.push(K)}O=O.filter(function(it){return!Number.isNaN(it)}),k=k.filter(function(it){return!Number.isNaN(it)});var Lt=Math.min.apply(null,O),wt=Math.min.apply(null,k),Gt=Math.max.apply(null,O),re=Math.max.apply(null,k);if(V.length===0)return{x:Lt,y:wt,width:Gt-Lt,height:re-wt};for(var X=0;X<V.length;X++){var K=V[X],q=K.currentPoint,Qt=void 0;q[0]===Lt?(Qt=N(K,M),Lt=Lt-Qt.xExtra):q[0]===Gt&&(Qt=N(K,M),Gt=Gt+Qt.xExtra),q[1]===wt?(Qt=N(K,M),wt=wt-Qt.yExtra):q[1]===re&&(Qt=N(K,M),re=re+Qt.yExtra)}return{x:Lt,y:wt,width:Gt-Lt,height:re-wt}}function N(D,M){var O=D.prePoint,k=D.currentPoint,V=D.nextPoint,X=Math.pow(k[0]-O[0],2)+Math.pow(k[1]-O[1],2),K=Math.pow(k[0]-V[0],2)+Math.pow(k[1]-V[1],2),q=Math.pow(O[0]-V[0],2)+Math.pow(O[1]-V[1],2),ct=Math.acos((X+K-q)/(2*Math.sqrt(X)*Math.sqrt(K)));if(!ct||Math.sin(ct)===0||F.default(ct,0))return{xExtra:0,yExtra:0};var _t=Math.abs(Math.atan2(V[1]-k[1],V[0]-k[0])),yt=Math.abs(Math.atan2(V[0]-k[0],V[1]-k[1]));_t=_t>Math.PI/2?Math.PI-_t:_t,yt=yt>Math.PI/2?Math.PI-yt:yt;var lt={xExtra:Math.cos(ct/2-_t)*(M/2*(1/Math.sin(ct/2)))-M/2||0,yExtra:Math.cos(yt-ct/2)*(M/2*(1/Math.sin(ct/2)))-M/2||0};return lt}function A(D){var M=D.attr(),O=M.path,k=M.stroke,V=k?M.lineWidth:0,X=D.get("segments")||U.default(O),K=R(X,V),q=K.x,ct=K.y,_t=K.width,yt=K.height,lt={minX:q,minY:ct,maxX:q+_t,maxY:ct+yt};return lt=B.mergeArrowBBox(D,lt),{x:lt.minX,y:lt.minY,width:lt.maxX-lt.minX,height:lt.maxY-lt.minY}}P.default=A},19914:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256);function j(y){for(var U=y.attr(),F=U.points,B=[],R=[],N=0;N<F.length;N++){var A=F[N];B.push(A[0]),R.push(A[1])}return T.getBBoxByArray(B,R)}P.default=j},10687:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256),j=S(3406);function y(U){for(var F=U.attr(),B=F.points,R=[],N=[],A=0;A<B.length;A++){var D=B[A];R.push(D[0]),N.push(D[1])}var M=T.getBBoxByArray(R,N),O=M.x,k=M.y,V=M.width,X=M.height,K={minX:O,minY:k,maxX:O+V,maxY:k+X};return K=j.mergeArrowBBox(U,K),{x:K.minX,y:K.minY,width:K.maxX-K.minX,height:K.maxY-K.minY}}P.default=y},3541:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T){var j=T.attr(),y=j.x,U=j.y,F=j.width,B=j.height;return{x:y,y:U,width:F,height:B}}P.default=S},28648:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=new Map;function T(y,U){S.set(y,U)}P.register=T;function j(y){return S.get(y)}P.getMethod=j},92933:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(8914);function j(y){var U=y.attr(),F=U.x,B=U.y,R=U.text,N=U.fontSize,A=U.lineHeight,D=U.font;D||(D=T.assembleFont(U));var M=T.getTextWidth(R,D),O;if(!M)O={x:F,y:B,width:0,height:0};else{var k=U.textAlign,V=U.textBaseline,X=T.getTextHeight(R,N,A),K={x:F,y:B-X};k&&(k==="end"||k==="right"?K.x-=M:k==="center"&&(K.x-=M/2)),V&&(V==="top"?K.y+=X:V==="middle"&&(K.y+=X/2)),O={x:K.x,y:K.y,width:M,height:X}}return O}P.default=j},3406:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(j,y){return!j||!y?j||y:{minX:Math.min(j.minX,y.minX),minY:Math.min(j.minY,y.minY),maxX:Math.max(j.maxX,y.maxX),maxY:Math.max(j.maxY,y.maxY)}}P.mergeBBox=S;function T(j,y){var U=j.get("startArrowShape"),F=j.get("endArrowShape"),B=null,R=null;return U&&(B=U.getCanvasBBox(),y=S(y,B)),F&&(R=F.getCanvasBBox(),y=S(y,R)),y}P.mergeArrowBBox=T},66192:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(){function T(j,y){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=j,this.name=j,this.originalEvent=y,this.timeStamp=y.timeStamp}return T.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},T.prototype.stopPropagation=function(){this.propagationStopped=!0},T.prototype.toString=function(){var j=this.type;return"[Event (type="+j+")]"},T.prototype.save=function(){},T.prototype.restore=function(){},T}();P.default=S},85424:function(Vt,P){"use strict";var S;S={value:!0}},4555:function(Vt,P){"use strict";Object.defineProperty(P,"X",{value:!0})},6052:function(Vt,P){"use strict";var S;S={value:!0};function T(U,F){var B=[],R=U[0],N=U[1],A=U[2],D=U[3],M=U[4],O=U[5],k=U[6],V=U[7],X=U[8],K=F[0],q=F[1],ct=F[2],_t=F[3],yt=F[4],lt=F[5],Lt=F[6],wt=F[7],Gt=F[8];return B[0]=K*R+q*D+ct*k,B[1]=K*N+q*M+ct*V,B[2]=K*A+q*O+ct*X,B[3]=_t*R+yt*D+lt*k,B[4]=_t*N+yt*M+lt*V,B[5]=_t*A+yt*O+lt*X,B[6]=Lt*R+wt*D+Gt*k,B[7]=Lt*N+wt*M+Gt*V,B[8]=Lt*A+wt*O+Gt*X,B}S=T;function j(U,F){var B=[],R=F[0],N=F[1];return B[0]=U[0]*R+U[3]*N+U[6],B[1]=U[1]*R+U[4]*N+U[7],B}P.rG=j;function y(U){var F=[],B=U[0],R=U[1],N=U[2],A=U[3],D=U[4],M=U[5],O=U[6],k=U[7],V=U[8],X=V*D-M*k,K=-V*A+M*O,q=k*A-D*O,ct=B*X+R*K+N*q;return ct?(ct=1/ct,F[0]=X*ct,F[1]=(-V*R+N*k)*ct,F[2]=(M*R-N*D)*ct,F[3]=K*ct,F[4]=(V*B-N*O)*ct,F[5]=(-M*B+N*A)*ct,F[6]=q*ct,F[7]=(-k*B+R*O)*ct,F[8]=(D*B-R*A)*ct,F):null}P.U_=y},26632:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=null;function T(){if(!S){var j=document.createElement("canvas");j.width=1,j.height=1,S=j.getContext("2d")}return S}P.getOffScreenContext=T},8914:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(22487),j=S(26632);function y(R,N,A){var D=1;if(T.isString(R)&&(D=R.split(`
`).length),D>1){var M=U(N,A);return N*D+M*(D-1)}return N}P.getTextHeight=y;function U(R,N){return N?N-R:R*.14}P.getLineSpaceing=U;function F(R,N){var A=j.getOffScreenContext(),D=0;if(T.isNil(R)||R==="")return D;if(A.save(),A.font=N,T.isString(R)&&R.includes(`
`)){var M=R.split(`
`);T.each(M,function(O){var k=A.measureText(O).width;D<k&&(D=k)})}else D=A.measureText(R).width;return A.restore(),D}P.getTextWidth=F;function B(R){var N=R.fontSize,A=R.fontFamily,D=R.fontWeight,M=R.fontStyle,O=R.fontVariant;return[M,O,D,N+"px",A].join(" ").trim()}P.assembleFont=B},22487:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function T(O,k){var V=O.indexOf(k);V!==-1&&O.splice(V,1)}P.removeFromArray=T,P.isBrowser=typeof window!="undefined"&&typeof window.document!="undefined";var j=S(73890);P.isNil=j.default;var y=S(46812);P.isFunction=y.default;var U=S(21830);P.isString=U.default;var F=S(33643);P.isObject=F.default;var B=S(66631);P.isArray=B.default;var R=S(66974);P.mix=R.default;var N=S(27154);P.each=N.default;var A=S(85260);P.upperFirst=A.default;function D(O,k){if(O.isCanvas())return!0;for(var V=k.getParent(),X=!1;V;){if(V===O){X=!0;break}V=V.getParent()}return X}P.isParent=D;function M(O){return O.cfg.visible&&O.cfg.capture}P.isAllowCapture=M},76062:function(Vt){"use strict";Vt.exports=JSON.parse('{"name":"@antv/g-base","version":"0.4.7","description":"A common util collection for antv projects","main":"lib/index.js","module":"esm/index.js","types":"lib/index.d.ts","files":["package.json","esm","lib","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","clean":"rm -rf esm lib","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/util.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/util/issues"},"devDependencies":{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},"homepage":"https://github.com/antvis/util#readme","dependencies":{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},"__npminstall_done":false,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a"}')},84909:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(48465);function y(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])}function U(R,N){return y(R)*y(N)?(R[0]*N[0]+R[1]*N[1])/(y(R)*y(N)):1}function F(R,N){return(R[0]*N[1]<R[1]*N[0]?-1:1)*Math.acos(U(R,N))}function B(R,N){var A=N[1],D=N[2],M=j.mod(j.toRadian(N[3]),Math.PI*2),O=N[4],k=N[5],V=R[0],X=R[1],K=N[6],q=N[7],ct=Math.cos(M)*(V-K)/2+Math.sin(M)*(X-q)/2,_t=-1*Math.sin(M)*(V-K)/2+Math.cos(M)*(X-q)/2,yt=ct*ct/(A*A)+_t*_t/(D*D);yt>1&&(A*=Math.sqrt(yt),D*=Math.sqrt(yt));var lt=A*A*(_t*_t)+D*D*(ct*ct),Lt=lt?Math.sqrt((A*A*(D*D)-lt)/lt):1;O===k&&(Lt*=-1),isNaN(Lt)&&(Lt=0);var wt=D?Lt*A*_t/D:0,Gt=A?Lt*-D*ct/A:0,re=(V+K)/2+Math.cos(M)*wt-Math.sin(M)*Gt,Qt=(X+q)/2+Math.sin(M)*wt+Math.cos(M)*Gt,it=[(ct-wt)/A,(_t-Gt)/D],dt=[(-1*ct-wt)/A,(-1*_t-Gt)/D],gt=F([1,0],it),vt=F(it,dt);return U(it,dt)<=-1&&(vt=Math.PI),U(it,dt)>=1&&(vt=0),k===0&&vt>0&&(vt=vt-2*Math.PI),k===1&&vt<0&&(vt=vt+2*Math.PI),{cx:re,cy:Qt,rx:j.isSamePoint(R,[K,q])?0:A,ry:j.isSamePoint(R,[K,q])?0:D,startAngle:gt,endAngle:gt+vt,xRotation:M,arcFlag:O,sweepFlag:k}}P.Z=B},48465:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.isSamePoint=P.mergeRegion=P.intersectRect=P.inBox=P.distance=P.getPixelRatio=void 0;function T(){return window?window.devicePixelRatio:1}P.getPixelRatio=T;function j(q,ct,_t,yt){var lt=q-_t,Lt=ct-yt;return Math.sqrt(lt*lt+Lt*Lt)}P.distance=j;function y(q,ct,_t,yt,lt,Lt){return lt>=q&&lt<=q+_t&&Lt>=ct&&Lt<=ct+yt}P.inBox=y;function U(q,ct){return!(ct.minX>q.maxX||ct.maxX<q.minX||ct.minY>q.maxY||ct.maxY<q.minY)}P.intersectRect=U;function F(q,ct){return!q||!ct?q||ct:{minX:Math.min(q.minX,ct.minX),minY:Math.min(q.minY,ct.minY),maxX:Math.max(q.maxX,ct.maxX),maxY:Math.max(q.maxY,ct.maxY)}}P.mergeRegion=F;function B(q,ct){return q[0]===ct[0]&&q[1]===ct[1]}P.isSamePoint=B;var R=S(73890);Object.defineProperty(P,"isNil",{enumerable:!0,get:function(){return R.default}});var N=S(21830);Object.defineProperty(P,"isString",{enumerable:!0,get:function(){return N.default}});var A=S(46812);Object.defineProperty(P,"isFunction",{enumerable:!0,get:function(){return A.default}});var D=S(66631);Object.defineProperty(P,"isArray",{enumerable:!0,get:function(){return D.default}});var M=S(27154);Object.defineProperty(P,"each",{enumerable:!0,get:function(){return M.default}});var O=S(9217);Object.defineProperty(P,"toRadian",{enumerable:!0,get:function(){return O.default}});var k=S(5253);Object.defineProperty(P,"mod",{enumerable:!0,get:function(){return k.default}});var V=S(39984);Object.defineProperty(P,"isNumberEqual",{enumerable:!0,get:function(){return V.default}});var X=S(98229);Object.defineProperty(P,"requestAnimationFrame",{enumerable:!0,get:function(){return X.default}});var K=S(35755);Object.defineProperty(P,"clearAnimationFrame",{enumerable:!0,get:function(){return K.default}})},71270:function(Vt){"use strict";Vt.exports=JSON.parse('{"name":"@antv/g-canvas","version":"0.4.15","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit","dist":"webpack --config webpack.config.js --mode production"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.26.1","webpack-cli":"^3.1.2"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},"__npminstall_done":false,"gitHead":"9092384bf6b7efd6ec71bbcdec1b801a0079c403"}')},89838:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Arc:function(){return It},Cubic:function(){return re},Line:function(){return D},Polygon:function(){return $t},Polyline:function(){return ue},Quad:function(){return _t},Util:function(){return T}});var T={};S.r(T),S.d(T,{distance:function(){return U},getBBoxByArray:function(){return B},getBBoxRange:function(){return R},isNumberEqual:function(){return F},piMod:function(){return N}});function j(Ut){return Math.min.apply(null,Ut)}function y(Ut){return Math.max.apply(null,Ut)}function U(Ut,Rt,Pt,Yt){var Dt=Ut-Pt,Nt=Rt-Yt;return Math.sqrt(Dt*Dt+Nt*Nt)}function F(Ut,Rt){return Math.abs(Ut-Rt)<.001}function B(Ut,Rt){var Pt=j(Ut),Yt=j(Rt),Dt=y(Ut),Nt=y(Rt);return{x:Pt,y:Yt,width:Dt-Pt,height:Nt-Yt}}function R(Ut,Rt,Pt,Yt){return{minX:j([Ut,Pt]),maxX:y([Ut,Pt]),minY:j([Rt,Yt]),maxY:y([Rt,Yt])}}function N(Ut){return(Ut+Math.PI*2)%(Math.PI*2)}var A=S(31437),D={box:function(Ut,Rt,Pt,Yt){return B([Ut,Pt],[Rt,Yt])},length:function(Ut,Rt,Pt,Yt){return U(Ut,Rt,Pt,Yt)},pointAt:function(Ut,Rt,Pt,Yt,Dt){return{x:(1-Dt)*Ut+Dt*Pt,y:(1-Dt)*Rt+Dt*Yt}},pointDistance:function(Ut,Rt,Pt,Yt,Dt,Nt){var ne=(Pt-Ut)*(Dt-Ut)+(Yt-Rt)*(Nt-Rt);if(ne<0)return U(Ut,Rt,Dt,Nt);var ve=(Pt-Ut)*(Pt-Ut)+(Yt-Rt)*(Yt-Rt);return ne>ve?U(Pt,Yt,Dt,Nt):this.pointToLine(Ut,Rt,Pt,Yt,Dt,Nt)},pointToLine:function(Ut,Rt,Pt,Yt,Dt,Nt){var ne=[Pt-Ut,Yt-Rt];if(A.exactEquals(ne,[0,0]))return Math.sqrt((Dt-Ut)*(Dt-Ut)+(Nt-Rt)*(Nt-Rt));var ve=[-ne[1],ne[0]];A.normalize(ve,ve);var Re=[Dt-Ut,Nt-Rt];return Math.abs(A.dot(Re,ve))},tangentAngle:function(Ut,Rt,Pt,Yt){return Math.atan2(Yt-Rt,Pt-Ut)}},M=1e-4;function O(Ut,Rt,Pt,Yt,Dt,Nt){var ne,ve=Infinity,Re=[Pt,Yt],je=20;Nt&&Nt>200&&(je=Nt/10);for(var Cr=1/je,$r=Cr/10,Qr=0;Qr<=je;Qr++){var Ee=Qr*Cr,yn=[Dt.apply(null,Ut.concat([Ee])),Dt.apply(null,Rt.concat([Ee]))],ui=U(Re[0],Re[1],yn[0],yn[1]);ui<ve&&(ne=Ee,ve=ui)}if(ne===0)return{x:Ut[0],y:Rt[0]};if(ne===1){var la=Ut.length;return{x:Ut[la-1],y:Rt[la-1]}}ve=Infinity;for(var Qr=0;Qr<32&&!($r<M);Qr++){var Or=ne-$r,ln=ne+$r,yn=[Dt.apply(null,Ut.concat([Or])),Dt.apply(null,Rt.concat([Or]))],ui=U(Re[0],Re[1],yn[0],yn[1]);if(Or>=0&&ui<ve)ne=Or,ve=ui;else{var Kn=[Dt.apply(null,Ut.concat([ln])),Dt.apply(null,Rt.concat([ln]))],jn=U(Re[0],Re[1],Kn[0],Kn[1]);ln<=1&&jn<ve?(ne=ln,ve=jn):$r*=.5}}return{x:Dt.apply(null,Ut.concat([ne])),y:Dt.apply(null,Rt.concat([ne]))}}function k(Ut,Rt){for(var Pt=0,Yt=Ut.length,Dt=0;Dt<Yt;Dt++){var Nt=Ut[Dt],ne=Rt[Dt],ve=Ut[(Dt+1)%Yt],Re=Rt[(Dt+1)%Yt];Pt+=U(Nt,ne,ve,Re)}return Pt/2}function V(Ut,Rt,Pt,Yt){var Dt=1-Yt;return Dt*Dt*Ut+2*Yt*Dt*Rt+Yt*Yt*Pt}function X(Ut,Rt,Pt){var Yt=Ut+Pt-2*Rt;if(F(Yt,0))return[.5];var Dt=(Ut-Rt)/Yt;return Dt<=1&&Dt>=0?[Dt]:[]}function K(Ut,Rt,Pt,Yt){return 2*(1-Yt)*(Rt-Ut)+2*Yt*(Pt-Rt)}function q(Ut,Rt,Pt,Yt,Dt,Nt,ne){var ve=V(Ut,Pt,Dt,ne),Re=V(Rt,Yt,Nt,ne),je=D.pointAt(Ut,Rt,Pt,Yt,ne),Cr=D.pointAt(Pt,Yt,Dt,Nt,ne);return[[Ut,Rt,je.x,je.y,ve,Re],[ve,Re,Cr.x,Cr.y,Dt,Nt]]}function ct(Ut,Rt,Pt,Yt,Dt,Nt,ne){if(ne===0)return(U(Ut,Rt,Pt,Yt)+U(Pt,Yt,Dt,Nt)+U(Ut,Rt,Dt,Nt))/2;var ve=q(Ut,Rt,Pt,Yt,Dt,Nt,.5),Re=ve[0],je=ve[1];return Re.push(ne-1),je.push(ne-1),ct.apply(null,Re)+ct.apply(null,je)}var _t={box:function(Ut,Rt,Pt,Yt,Dt,Nt){var ne=X(Ut,Pt,Dt)[0],ve=X(Rt,Yt,Nt)[0],Re=[Ut,Dt],je=[Rt,Nt];return ne!==void 0&&Re.push(V(Ut,Pt,Dt,ne)),ve!==void 0&&je.push(V(Rt,Yt,Nt,ve)),B(Re,je)},length:function(Ut,Rt,Pt,Yt,Dt,Nt){return ct(Ut,Rt,Pt,Yt,Dt,Nt,3)},nearestPoint:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){return O([Ut,Pt,Dt],[Rt,Yt,Nt],ne,ve,V)},pointDistance:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){var Re=this.nearestPoint(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve);return U(Re.x,Re.y,ne,ve)},interpolationAt:V,pointAt:function(Ut,Rt,Pt,Yt,Dt,Nt,ne){return{x:V(Ut,Pt,Dt,ne),y:V(Rt,Yt,Nt,ne)}},divide:function(Ut,Rt,Pt,Yt,Dt,Nt,ne){return q(Ut,Rt,Pt,Yt,Dt,Nt,ne)},tangentAngle:function(Ut,Rt,Pt,Yt,Dt,Nt,ne){var ve=K(Ut,Pt,Dt,ne),Re=K(Rt,Yt,Nt,ne),je=Math.atan2(Re,ve);return N(je)}};function yt(Ut,Rt,Pt,Yt,Dt){var Nt=1-Dt;return Nt*Nt*Nt*Ut+3*Rt*Dt*Nt*Nt+3*Pt*Dt*Dt*Nt+Yt*Dt*Dt*Dt}function lt(Ut,Rt,Pt,Yt,Dt){var Nt=1-Dt;return 3*(Nt*Nt*(Rt-Ut)+2*Nt*Dt*(Pt-Rt)+Dt*Dt*(Yt-Pt))}function Lt(Ut,Rt,Pt,Yt){var Dt=-3*Ut+9*Rt-9*Pt+3*Yt,Nt=6*Ut-12*Rt+6*Pt,ne=3*Rt-3*Ut,ve=[],Re,je,Cr;if(F(Dt,0))F(Nt,0)||(Re=-ne/Nt,Re>=0&&Re<=1&&ve.push(Re));else{var $r=Nt*Nt-4*Dt*ne;F($r,0)?ve.push(-Nt/(2*Dt)):$r>0&&(Cr=Math.sqrt($r),Re=(-Nt+Cr)/(2*Dt),je=(-Nt-Cr)/(2*Dt),Re>=0&&Re<=1&&ve.push(Re),je>=0&&je<=1&&ve.push(je))}return ve}function wt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){var je=yt(Ut,Pt,Dt,ne,Re),Cr=yt(Rt,Yt,Nt,ve,Re),$r=D.pointAt(Ut,Rt,Pt,Yt,Re),Qr=D.pointAt(Pt,Yt,Dt,Nt,Re),Ee=D.pointAt(Dt,Nt,ne,ve,Re),yn=D.pointAt($r.x,$r.y,Qr.x,Qr.y,Re),ui=D.pointAt(Qr.x,Qr.y,Ee.x,Ee.y,Re);return[[Ut,Rt,$r.x,$r.y,yn.x,yn.y,je,Cr],[je,Cr,ui.x,ui.y,Ee.x,Ee.y,ne,ve]]}function Gt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){if(Re===0)return k([Ut,Pt,Dt,ne],[Rt,Yt,Nt,ve]);var je=wt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,.5),Cr=je[0],$r=je[1];return Cr.push(Re-1),$r.push(Re-1),Gt.apply(null,Cr)+Gt.apply(null,$r)}var re={extrema:Lt,box:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){for(var Re=[Ut,ne],je=[Rt,ve],Cr=Lt(Ut,Pt,Dt,ne),$r=Lt(Rt,Yt,Nt,ve),Qr=0;Qr<Cr.length;Qr++)Re.push(yt(Ut,Pt,Dt,ne,Cr[Qr]));for(var Qr=0;Qr<$r.length;Qr++)je.push(yt(Rt,Yt,Nt,ve,$r[Qr]));return B(Re,je)},length:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){return Gt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,3)},nearestPoint:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re,je,Cr){return O([Ut,Pt,Dt,ne],[Rt,Yt,Nt,ve],Re,je,yt,Cr)},pointDistance:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re,je,Cr){var $r=this.nearestPoint(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re,je,Cr);return U($r.x,$r.y,Re,je)},interpolationAt:yt,pointAt:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){return{x:yt(Ut,Pt,Dt,ne,Re),y:yt(Rt,Yt,Nt,ve,Re)}},divide:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){return wt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re)},tangentAngle:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){var je=lt(Ut,Pt,Dt,ne,Re),Cr=lt(Rt,Yt,Nt,ve,Re);return N(Math.atan2(Cr,je))}};function Qt(Ut,Rt){var Pt=Math.abs(Ut);return Rt>0?Pt:Pt*-1}var it={box:function(Ut,Rt,Pt,Yt){return{x:Ut-Pt,y:Rt-Yt,width:Pt*2,height:Yt*2}},length:function(Ut,Rt,Pt,Yt){return Math.PI*(3*(Pt+Yt)-Math.sqrt((3*Pt+Yt)*(Pt+3*Yt)))},nearestPoint:function(Ut,Rt,Pt,Yt,Dt,Nt){var ne=Pt,ve=Yt;if(ne===0||ve===0)return{x:Ut,y:Rt};for(var Re=Dt-Ut,je=Nt-Rt,Cr=Math.abs(Re),$r=Math.abs(je),Qr=ne*ne,Ee=ve*ve,yn=Math.PI/4,ui,la,Or=0;Or<4;Or++){ui=ne*Math.cos(yn),la=ve*Math.sin(yn);var ln=(Qr-Ee)*Math.pow(Math.cos(yn),3)/ne,Kn=(Ee-Qr)*Math.pow(Math.sin(yn),3)/ve,jn=ui-ln,wi=la-Kn,Sa=Cr-ln,to=$r-Kn,qa=Math.hypot(wi,jn),Ui=Math.hypot(to,Sa),Ue=qa*Math.asin((jn*to-wi*Sa)/(qa*Ui)),We=Ue/Math.sqrt(Qr+Ee-ui*ui-la*la);yn+=We,yn=Math.min(Math.PI/2,Math.max(0,yn))}return{x:Ut+Qt(ui,Re),y:Rt+Qt(la,je)}},pointDistance:function(Ut,Rt,Pt,Yt,Dt,Nt){var ne=this.nearestPoint(Ut,Rt,Pt,Yt,Dt,Nt);return U(ne.x,ne.y,Dt,Nt)},pointAt:function(Ut,Rt,Pt,Yt,Dt){var Nt=2*Math.PI*Dt;return{x:Ut+Pt*Math.cos(Nt),y:Rt+Yt*Math.sin(Nt)}},tangentAngle:function(Ut,Rt,Pt,Yt,Dt){var Nt=2*Math.PI*Dt,ne=Math.atan2(Yt*Math.cos(Nt),-Pt*Math.sin(Nt));return N(ne)}};function dt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){return-1*Pt*Math.cos(Dt)*Math.sin(ve)-Yt*Math.sin(Dt)*Math.cos(ve)}function gt(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){return-1*Pt*Math.sin(Dt)*Math.sin(ve)+Yt*Math.cos(Dt)*Math.cos(ve)}function vt(Ut,Rt,Pt){return Math.atan(-Rt/Ut*Math.tan(Pt))}function Y(Ut,Rt,Pt){return Math.atan(Rt/(Ut*Math.tan(Pt)))}function ot(Ut,Rt,Pt,Yt,Dt,Nt){return Pt*Math.cos(Dt)*Math.cos(Nt)-Yt*Math.sin(Dt)*Math.sin(Nt)+Ut}function nt(Ut,Rt,Pt,Yt,Dt,Nt){return Pt*Math.sin(Dt)*Math.cos(Nt)+Yt*Math.cos(Dt)*Math.sin(Nt)+Rt}function rt(Ut,Rt,Pt,Yt){var Dt=Math.atan2(Yt*Ut,Pt*Rt);return(Dt+Math.PI*2)%(Math.PI*2)}function st(Ut,Rt,Pt){return{x:Ut*Math.cos(Pt),y:Rt*Math.sin(Pt)}}function d(Ut,Rt,Pt){var Yt=Math.cos(Pt),Dt=Math.sin(Pt);return[Ut*Yt-Rt*Dt,Ut*Dt+Rt*Yt]}var It={box:function(Ut,Rt,Pt,Yt,Dt,Nt,ne){for(var ve=vt(Pt,Yt,Dt),Re=Infinity,je=-Infinity,Cr=[Nt,ne],$r=-Math.PI*2;$r<=Math.PI*2;$r+=Math.PI){var Qr=ve+$r;Nt<ne?Nt<Qr&&Qr<ne&&Cr.push(Qr):ne<Qr&&Qr<Nt&&Cr.push(Qr)}for(var $r=0;$r<Cr.length;$r++){var Ee=ot(Ut,Rt,Pt,Yt,Dt,Cr[$r]);Ee<Re&&(Re=Ee),Ee>je&&(je=Ee)}for(var yn=Y(Pt,Yt,Dt),ui=Infinity,la=-Infinity,Or=[Nt,ne],$r=-Math.PI*2;$r<=Math.PI*2;$r+=Math.PI){var ln=yn+$r;Nt<ne?Nt<ln&&ln<ne&&Or.push(ln):ne<ln&&ln<Nt&&Or.push(ln)}for(var $r=0;$r<Or.length;$r++){var Kn=nt(Ut,Rt,Pt,Yt,Dt,Or[$r]);Kn<ui&&(ui=Kn),Kn>la&&(la=Kn)}return{x:Re,y:ui,width:je-Re,height:la-ui}},length:function(Ut,Rt,Pt,Yt,Dt,Nt,ne){},nearestPoint:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){var je=d(ve-Ut,Re-Rt,-Dt),Cr=je[0],$r=je[1],Qr=it.nearestPoint(0,0,Pt,Yt,Cr,$r),Ee=rt(Pt,Yt,Qr.x,Qr.y);Ee<Nt?Qr=st(Pt,Yt,Nt):Ee>ne&&(Qr=st(Pt,Yt,ne));var yn=d(Qr.x,Qr.y,Dt);return{x:yn[0]+Ut,y:yn[1]+Rt}},pointDistance:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve,Re){var je=this.nearestPoint(Ut,Rt,Pt,Yt,ve,Re);return U(je.x,je.y,ve,Re)},pointAt:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){var Re=(ne-Nt)*ve+Nt;return{x:ot(Ut,Rt,Pt,Yt,Dt,Re),y:nt(Ut,Rt,Pt,Yt,Dt,Re)}},tangentAngle:function(Ut,Rt,Pt,Yt,Dt,Nt,ne,ve){var Re=(ne-Nt)*ve+Nt,je=dt(Ut,Rt,Pt,Yt,Dt,Nt,ne,Re),Cr=gt(Ut,Rt,Pt,Yt,Dt,Nt,ne,Re);return N(Math.atan2(Cr,je))}};function Ht(Ut){for(var Rt=0,Pt=[],Yt=0;Yt<Ut.length-1;Yt++){var Dt=Ut[Yt],Nt=Ut[Yt+1],ne=U(Dt[0],Dt[1],Nt[0],Nt[1]),ve={from:Dt,to:Nt,length:ne};Pt.push(ve),Rt+=ne}return{segments:Pt,totalLength:Rt}}function kt(Ut){if(Ut.length<2)return 0;for(var Rt=0,Pt=0;Pt<Ut.length-1;Pt++){var Yt=Ut[Pt],Dt=Ut[Pt+1];Rt+=U(Yt[0],Yt[1],Dt[0],Dt[1])}return Rt}function Xt(Ut,Rt){if(Rt>1||Rt<0||Ut.length<2)return null;var Pt=Ht(Ut),Yt=Pt.segments,Dt=Pt.totalLength;if(Dt===0)return{x:Ut[0][0],y:Ut[0][1]};for(var Nt=0,ne=null,ve=0;ve<Yt.length;ve++){var Re=Yt[ve],je=Re.from,Cr=Re.to,$r=Re.length/Dt;if(Rt>=Nt&&Rt<=Nt+$r){var Qr=(Rt-Nt)/$r;ne=D.pointAt(je[0],je[1],Cr[0],Cr[1],Qr);break}Nt+=$r}return ne}function Kt(Ut,Rt){if(Rt>1||Rt<0||Ut.length<2)return 0;for(var Pt=Ht(Ut),Yt=Pt.segments,Dt=Pt.totalLength,Nt=0,ne=0,ve=0;ve<Yt.length;ve++){var Re=Yt[ve],je=Re.from,Cr=Re.to,$r=Re.length/Dt;if(Rt>=Nt&&Rt<=Nt+$r){ne=Math.atan2(Cr[1]-je[1],Cr[0]-je[0]);break}Nt+=$r}return ne}function Jt(Ut,Rt,Pt){for(var Yt=Infinity,Dt=0;Dt<Ut.length-1;Dt++){var Nt=Ut[Dt],ne=Ut[Dt+1],ve=D.pointDistance(Nt[0],Nt[1],ne[0],ne[1],Rt,Pt);ve<Yt&&(Yt=ve)}return Yt}var ue={box:function(Ut){for(var Rt=[],Pt=[],Yt=0;Yt<Ut.length;Yt++){var Dt=Ut[Yt];Rt.push(Dt[0]),Pt.push(Dt[1])}return B(Rt,Pt)},length:function(Ut){return kt(Ut)},pointAt:function(Ut,Rt){return Xt(Ut,Rt)},pointDistance:function(Ut,Rt,Pt){return Jt(Ut,Rt,Pt)},tangentAngle:function(Ut,Rt){return Kt(Ut,Rt)}};function ce(Ut){var Rt=Ut.slice(0);return Ut.length&&Rt.push(Ut[0]),Rt}var $t={box:function(Ut){return ue.box(Ut)},length:function(Ut){return kt(ce(Ut))},pointAt:function(Ut,Rt){return Xt(ce(Ut),Rt)},pointDistance:function(Ut,Rt,Pt){return Jt(ce(Ut),Rt,Pt)},tangentAngle:function(Ut,Rt){return Kt(ce(Ut),Rt)}}},33418:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256),j=S(55397);function y(O,k,V,X,K,q,ct,_t){return-1*V*Math.cos(K)*Math.sin(_t)-X*Math.sin(K)*Math.cos(_t)}function U(O,k,V,X,K,q,ct,_t){return-1*V*Math.sin(K)*Math.sin(_t)+X*Math.cos(K)*Math.cos(_t)}function F(O,k,V){return Math.atan(-k/O*Math.tan(V))}function B(O,k,V){return Math.atan(k/(O*Math.tan(V)))}function R(O,k,V,X,K,q){return V*Math.cos(K)*Math.cos(q)-X*Math.sin(K)*Math.sin(q)+O}function N(O,k,V,X,K,q){return V*Math.sin(K)*Math.cos(q)+X*Math.cos(K)*Math.sin(q)+k}function A(O,k,V,X){var K=Math.atan2(X*O,V*k);return(K+Math.PI*2)%(Math.PI*2)}function D(O,k,V){return{x:O*Math.cos(V),y:k*Math.sin(V)}}function M(O,k,V){var X=Math.cos(V),K=Math.sin(V);return[O*X-k*K,O*K+k*X]}P.default={box:function(O,k,V,X,K,q,ct){for(var _t=F(V,X,K),yt=Infinity,lt=-Infinity,Lt=[q,ct],wt=-Math.PI*2;wt<=Math.PI*2;wt+=Math.PI){var Gt=_t+wt;q<ct?q<Gt&&Gt<ct&&Lt.push(Gt):ct<Gt&&Gt<q&&Lt.push(Gt)}for(var wt=0;wt<Lt.length;wt++){var re=R(O,k,V,X,K,Lt[wt]);re<yt&&(yt=re),re>lt&&(lt=re)}for(var Qt=B(V,X,K),it=Infinity,dt=-Infinity,gt=[q,ct],wt=-Math.PI*2;wt<=Math.PI*2;wt+=Math.PI){var vt=Qt+wt;q<ct?q<vt&&vt<ct&&gt.push(vt):ct<vt&&vt<q&&gt.push(vt)}for(var wt=0;wt<gt.length;wt++){var Y=N(O,k,V,X,K,gt[wt]);Y<it&&(it=Y),Y>dt&&(dt=Y)}return{x:yt,y:it,width:lt-yt,height:dt-it}},length:function(O,k,V,X,K,q,ct){},nearestPoint:function(O,k,V,X,K,q,ct,_t,yt){var lt=M(_t-O,yt-k,-K),Lt=lt[0],wt=lt[1],Gt=j.default.nearestPoint(0,0,V,X,Lt,wt),re=A(V,X,Gt.x,Gt.y);re<q?Gt=D(V,X,q):re>ct&&(Gt=D(V,X,ct));var Qt=M(Gt.x,Gt.y,K);return{x:Qt[0]+O,y:Qt[1]+k}},pointDistance:function(O,k,V,X,K,q,ct,_t,yt){var lt=this.nearestPoint(O,k,V,X,_t,yt);return T.distance(lt.x,lt.y,_t,yt)},pointAt:function(O,k,V,X,K,q,ct,_t){var yt=(ct-q)*_t+q;return{x:R(O,k,V,X,K,yt),y:N(O,k,V,X,K,yt)}},tangentAngle:function(O,k,V,X,K,q,ct,_t){var yt=(ct-q)*_t+q,lt=y(O,k,V,X,K,q,ct,yt),Lt=U(O,k,V,X,K,q,ct,yt);return T.piMod(Math.atan2(Lt,lt))}}},87335:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.snapLength=P.nearestPoint=void 0;var T=S(76256),j=1e-4;function y(F,B,R,N,A,D){var M,O=Infinity,k=[R,N],V=20;D&&D>200&&(V=D/10);for(var X=1/V,K=X/10,q=0;q<=V;q++){var ct=q*X,_t=[A.apply(null,F.concat([ct])),A.apply(null,B.concat([ct]))],yt=T.distance(k[0],k[1],_t[0],_t[1]);yt<O&&(M=ct,O=yt)}if(M===0)return{x:F[0],y:B[0]};if(M===1){var lt=F.length;return{x:F[lt-1],y:B[lt-1]}}O=Infinity;for(var q=0;q<32&&!(K<j);q++){var Lt=M-K,wt=M+K,_t=[A.apply(null,F.concat([Lt])),A.apply(null,B.concat([Lt]))],yt=T.distance(k[0],k[1],_t[0],_t[1]);if(Lt>=0&&yt<O)M=Lt,O=yt;else{var Gt=[A.apply(null,F.concat([wt])),A.apply(null,B.concat([wt]))],re=T.distance(k[0],k[1],Gt[0],Gt[1]);wt<=1&&re<O?(M=wt,O=re):K*=.5}}return{x:A.apply(null,F.concat([M])),y:A.apply(null,B.concat([M]))}}P.nearestPoint=y;function U(F,B){for(var R=0,N=F.length,A=0;A<N;A++){var D=F[A],M=B[A],O=F[(A+1)%N],k=B[(A+1)%N];R+=T.distance(D,M,O,k)}return R/2}P.snapLength=U},15730:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256),j=S(23646),y=S(87335);function U(A,D,M,O,k){var V=1-k;return V*V*V*A+3*D*k*V*V+3*M*k*k*V+O*k*k*k}function F(A,D,M,O,k){var V=1-k;return 3*(V*V*(D-A)+2*V*k*(M-D)+k*k*(O-M))}function B(A,D,M,O){var k=-3*A+9*D-9*M+3*O,V=6*A-12*D+6*M,X=3*D-3*A,K=[],q,ct,_t;if(T.isNumberEqual(k,0))T.isNumberEqual(V,0)||(q=-X/V,q>=0&&q<=1&&K.push(q));else{var yt=V*V-4*k*X;T.isNumberEqual(yt,0)?K.push(-V/(2*k)):yt>0&&(_t=Math.sqrt(yt),q=(-V+_t)/(2*k),ct=(-V-_t)/(2*k),q>=0&&q<=1&&K.push(q),ct>=0&&ct<=1&&K.push(ct))}return K}function R(A,D,M,O,k,V,X,K,q){var ct=U(A,M,k,X,q),_t=U(D,O,V,K,q),yt=j.default.pointAt(A,D,M,O,q),lt=j.default.pointAt(M,O,k,V,q),Lt=j.default.pointAt(k,V,X,K,q),wt=j.default.pointAt(yt.x,yt.y,lt.x,lt.y,q),Gt=j.default.pointAt(lt.x,lt.y,Lt.x,Lt.y,q);return[[A,D,yt.x,yt.y,wt.x,wt.y,ct,_t],[ct,_t,Gt.x,Gt.y,Lt.x,Lt.y,X,K]]}function N(A,D,M,O,k,V,X,K,q){if(q===0)return y.snapLength([A,M,k,X],[D,O,V,K]);var ct=R(A,D,M,O,k,V,X,K,.5),_t=ct[0],yt=ct[1];return _t.push(q-1),yt.push(q-1),N.apply(null,_t)+N.apply(null,yt)}P.default={extrema:B,box:function(A,D,M,O,k,V,X,K){for(var q=[A,X],ct=[D,K],_t=B(A,M,k,X),yt=B(D,O,V,K),lt=0;lt<_t.length;lt++)q.push(U(A,M,k,X,_t[lt]));for(var lt=0;lt<yt.length;lt++)ct.push(U(D,O,V,K,yt[lt]));return T.getBBoxByArray(q,ct)},length:function(A,D,M,O,k,V,X,K){return N(A,D,M,O,k,V,X,K,3)},nearestPoint:function(A,D,M,O,k,V,X,K,q,ct,_t){return y.nearestPoint([A,M,k,X],[D,O,V,K],q,ct,U,_t)},pointDistance:function(A,D,M,O,k,V,X,K,q,ct,_t){var yt=this.nearestPoint(A,D,M,O,k,V,X,K,q,ct,_t);return T.distance(yt.x,yt.y,q,ct)},interpolationAt:U,pointAt:function(A,D,M,O,k,V,X,K,q){return{x:U(A,M,k,X,q),y:U(D,O,V,K,q)}},divide:function(A,D,M,O,k,V,X,K,q){return R(A,D,M,O,k,V,X,K,q)},tangentAngle:function(A,D,M,O,k,V,X,K,q){var ct=F(A,M,k,X,q),_t=F(D,O,V,K,q);return T.piMod(Math.atan2(_t,ct))}}},55397:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256);function j(y,U){var F=Math.abs(y);return U>0?F:F*-1}P.default={box:function(y,U,F,B){return{x:y-F,y:U-B,width:F*2,height:B*2}},length:function(y,U,F,B){return Math.PI*(3*(F+B)-Math.sqrt((3*F+B)*(F+3*B)))},nearestPoint:function(y,U,F,B,R,N){var A=F,D=B;if(A===0||D===0)return{x:y,y:U};for(var M=R-y,O=N-U,k=Math.abs(M),V=Math.abs(O),X=A*A,K=D*D,q=Math.PI/4,ct,_t,yt=0;yt<4;yt++){ct=A*Math.cos(q),_t=D*Math.sin(q);var lt=(X-K)*Math.pow(Math.cos(q),3)/A,Lt=(K-X)*Math.pow(Math.sin(q),3)/D,wt=ct-lt,Gt=_t-Lt,re=k-lt,Qt=V-Lt,it=Math.hypot(Gt,wt),dt=Math.hypot(Qt,re),gt=it*Math.asin((wt*Qt-Gt*re)/(it*dt)),vt=gt/Math.sqrt(X+K-ct*ct-_t*_t);q+=vt,q=Math.min(Math.PI/2,Math.max(0,q))}return{x:y+j(ct,M),y:U+j(_t,O)}},pointDistance:function(y,U,F,B,R,N){var A=this.nearestPoint(y,U,F,B,R,N);return T.distance(A.x,A.y,R,N)},pointAt:function(y,U,F,B,R){var N=2*Math.PI*R;return{x:y+F*Math.cos(N),y:U+B*Math.sin(N)}},tangentAngle:function(y,U,F,B,R){var N=2*Math.PI*R,A=Math.atan2(B*Math.cos(N),-F*Math.sin(N));return T.piMod(A)}}},23646:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76256),j=S(31437);P.default={box:function(y,U,F,B){return T.getBBoxByArray([y,F],[U,B])},length:function(y,U,F,B){return T.distance(y,U,F,B)},pointAt:function(y,U,F,B,R){return{x:(1-R)*y+R*F,y:(1-R)*U+R*B}},pointDistance:function(y,U,F,B,R,N){var A=(F-y)*(R-y)+(B-U)*(N-U);if(A<0)return T.distance(y,U,R,N);var D=(F-y)*(F-y)+(B-U)*(B-U);return A>D?T.distance(F,B,R,N):this.pointToLine(y,U,F,B,R,N)},pointToLine:function(y,U,F,B,R,N){var A=[F-y,B-U];if(j.exactEquals(A,[0,0]))return Math.sqrt((R-y)*(R-y)+(N-U)*(N-U));var D=[-A[1],A[0]];j.normalize(D,D);var M=[R-y,N-U];return Math.abs(j.dot(M,D))},tangentAngle:function(y,U,F,B){return Math.atan2(B-U,F-y)}}},65386:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(28171),y=S(76256);P.Z={box:function(U){for(var F=[],B=[],R=0;R<U.length;R++){var N=U[R];F.push(N[0]),B.push(N[1])}return y.getBBoxByArray(F,B)},length:function(U){return j.lengthOfSegment(U)},pointAt:function(U,F){return j.pointAtSegments(U,F)},pointDistance:function(U,F,B){return j.distanceAtSegment(U,F,B)},tangentAngle:function(U,F){return j.angleAtSegments(U,F)}}},2879:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(23646),j=S(76256),y=S(87335);function U(A,D,M,O){var k=1-O;return k*k*A+2*O*k*D+O*O*M}function F(A,D,M){var O=A+M-2*D;if(j.isNumberEqual(O,0))return[.5];var k=(A-D)/O;return k<=1&&k>=0?[k]:[]}function B(A,D,M,O){return 2*(1-O)*(D-A)+2*O*(M-D)}function R(A,D,M,O,k,V,X){var K=U(A,M,k,X),q=U(D,O,V,X),ct=T.default.pointAt(A,D,M,O,X),_t=T.default.pointAt(M,O,k,V,X);return[[A,D,ct.x,ct.y,K,q],[K,q,_t.x,_t.y,k,V]]}function N(A,D,M,O,k,V,X){if(X===0)return(j.distance(A,D,M,O)+j.distance(M,O,k,V)+j.distance(A,D,k,V))/2;var K=R(A,D,M,O,k,V,.5),q=K[0],ct=K[1];return q.push(X-1),ct.push(X-1),N.apply(null,q)+N.apply(null,ct)}P.default={box:function(A,D,M,O,k,V){var X=F(A,M,k)[0],K=F(D,O,V)[0],q=[A,k],ct=[D,V];return X!==void 0&&q.push(U(A,M,k,X)),K!==void 0&&ct.push(U(D,O,V,K)),j.getBBoxByArray(q,ct)},length:function(A,D,M,O,k,V){return N(A,D,M,O,k,V,3)},nearestPoint:function(A,D,M,O,k,V,X,K){return y.nearestPoint([A,M,k],[D,O,V],X,K,U)},pointDistance:function(A,D,M,O,k,V,X,K){var q=this.nearestPoint(A,D,M,O,k,V,X,K);return j.distance(q.x,q.y,X,K)},interpolationAt:U,pointAt:function(A,D,M,O,k,V,X){return{x:U(A,M,k,X),y:U(D,O,V,X)}},divide:function(A,D,M,O,k,V,X){return R(A,D,M,O,k,V,X)},tangentAngle:function(A,D,M,O,k,V,X){var K=B(A,M,k,X),q=B(D,O,V,X),ct=Math.atan2(q,K);return j.piMod(ct)}}},28171:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.distanceAtSegment=P.angleAtSegments=P.pointAtSegments=P.lengthOfSegment=void 0;var T=S(23646),j=S(76256);function y(N){for(var A=0,D=[],M=0;M<N.length-1;M++){var O=N[M],k=N[M+1],V=j.distance(O[0],O[1],k[0],k[1]),X={from:O,to:k,length:V};D.push(X),A+=V}return{segments:D,totalLength:A}}function U(N){if(N.length<2)return 0;for(var A=0,D=0;D<N.length-1;D++){var M=N[D],O=N[D+1];A+=j.distance(M[0],M[1],O[0],O[1])}return A}P.lengthOfSegment=U;function F(N,A){if(A>1||A<0||N.length<2)return null;var D=y(N),M=D.segments,O=D.totalLength;if(O===0)return{x:N[0][0],y:N[0][1]};for(var k=0,V=null,X=0;X<M.length;X++){var K=M[X],q=K.from,ct=K.to,_t=K.length/O;if(A>=k&&A<=k+_t){var yt=(A-k)/_t;V=T.default.pointAt(q[0],q[1],ct[0],ct[1],yt);break}k+=_t}return V}P.pointAtSegments=F;function B(N,A){if(A>1||A<0||N.length<2)return 0;for(var D=y(N),M=D.segments,O=D.totalLength,k=0,V=0,X=0;X<M.length;X++){var K=M[X],q=K.from,ct=K.to,_t=K.length/O;if(A>=k&&A<=k+_t){V=Math.atan2(ct[1]-q[1],ct[0]-q[0]);break}k+=_t}return V}P.angleAtSegments=B;function R(N,A,D){for(var M=Infinity,O=0;O<N.length-1;O++){var k=N[O],V=N[O+1],X=T.default.pointDistance(k[0],k[1],V[0],V[1],A,D);X<M&&(M=X)}return M}P.distanceAtSegment=R},76256:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.piMod=P.getBBoxRange=P.getBBoxByArray=P.isNumberEqual=P.distance=void 0;function S(R){return Math.min.apply(null,R)}function T(R){return Math.max.apply(null,R)}function j(R,N,A,D){var M=R-A,O=N-D;return Math.sqrt(M*M+O*O)}P.distance=j;function y(R,N){return Math.abs(R-N)<.001}P.isNumberEqual=y;function U(R,N){var A=S(R),D=S(N),M=T(R),O=T(N);return{x:A,y:D,width:M-A,height:O-D}}P.getBBoxByArray=U;function F(R,N,A,D){return{minX:S([R,A]),maxX:T([R,A]),minY:S([N,D]),maxY:T([N,D])}}P.getBBoxRange=F;function B(R){return(R+Math.PI*2)%(Math.PI*2)}P.piMod=B},56463:function(Vt,P,S){"use strict";var T=S(34155),j=this&&this.__spreadArrays||function(){for(var K=0,q=0,ct=arguments.length;q<ct;q++)K+=arguments[q].length;for(var _t=Array(K),yt=0,q=0;q<ct;q++)for(var lt=arguments[q],Lt=0,wt=lt.length;Lt<wt;Lt++,yt++)_t[yt]=lt[Lt];return _t};Object.defineProperty(P,"__esModule",{value:!0});var y=function(){function K(q,ct,_t){this.name=q,this.version=ct,this.os=_t}return K}();P.BrowserInfo=y;var U=function(){function K(q){this.version=q,this.name="node",this.os=T.platform}return K}();P.NodeInfo=U;var F=function(){function K(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return K}();P.BotInfo=F;var B=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,R=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,N=3,A=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",B]],D=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",R]];function M(K){return K?O(K):typeof navigator!="undefined"?O(navigator.userAgent):V()}P.detect=M;function O(K){var q=K!==""&&A.reduce(function(lt,Lt){var wt=Lt[0],Gt=Lt[1];if(lt)return lt;var re=Gt.exec(K);return!!re&&[wt,re]},!1);if(!q)return null;var ct=q[0],_t=q[1];if(ct==="searchbot")return new F;var yt=_t[1]&&_t[1].split(/[._]/).slice(0,3);return yt?yt.length<N&&(yt=j(yt,X(N-yt.length))):yt=[],new y(ct,yt.join("."),k(K))}P.parseUserAgent=O;function k(K){for(var q=0,ct=D.length;q<ct;q++){var _t=D[q],yt=_t[0],lt=_t[1],Lt=lt.test(K);if(Lt)return yt}return null}P.detectOS=k;function V(){var K=typeof T!="undefined"&&T.version;return K?new U(T.version.slice(1)):null}P.getNodeVersion=V;function X(K){for(var q=[],ct=0;ct<K;ct++)q.push("0");return q}},23231:function(Vt){"use strict";Vt.exports=JSON.parse('{"name":"@antv/g-svg","version":"0.4.7","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.39.3","webpack-cli":"^3.3.7"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},"__npminstall_done":false,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a"}')},66002:function(){},92762:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.registerAnimation=P.getAnimation=void 0;var S={};function T(y){return S[y.toLowerCase()]}P.getAnimation=T;function j(y,U){S[y.toLowerCase()]=U}P.registerAnimation=j},27978:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.doGroupAppearAnimate=P.doAnimate=P.getDefaultAnimateCfg=P.DEFAULT_ANIMATE_CFG=void 0;var T=S(60517),j=S(49242),y=S(29583),U=S(92762);P.DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}};var F={interval:function(M){return{enter:{animation:M.isRect?M.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:M.isPolar&&M.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},B={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(M){var O;return M.isRect?O=M.isTransposed?"grow-in-x":"grow-in-y":(O="grow-in-xy",M.isPolar&&M.isTransposed&&(O="wave-in")),{animation:O}},schema:function(M){var O;return M.isRect?O=M.isTransposed?"grow-in-x":"grow-in-y":O="grow-in-xy",{animation:O}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function R(M,O){return{delay:j.isFunction(M.delay)?M.delay(O):M.delay,easing:j.isFunction(M.easing)?M.easing(O):M.easing,duration:j.isFunction(M.duration)?M.duration(O):M.duration,callback:M.callback}}function N(M,O,k){var V=F[M];return V&&(j.isFunction(V)&&(V=V(O)),V=j.deepMix({},P.DEFAULT_ANIMATE_CFG,V),k)?V[k]:V}P.getDefaultAnimateCfg=N;function A(M,O,k){var V=j.get(M.get("origin"),"data",y.FIELD_ORIGIN),X=O.animation,K=R(O,V);if(X){var q=U.getAnimation(X);q&&q(M,K,k)}else M.animate(k.toAttrs,K)}P.doAnimate=A;function D(M,O,k,V,X){if(B[k]){var K=B[k](V),q=U.getAnimation(j.get(K,"animation",""));if(q){var ct=T.__assign(T.__assign(T.__assign({},P.DEFAULT_ANIMATE_CFG.appear),K),O);M.stopAnimate(),q(M,ct,{coordinate:V,minYPoint:X,toAttrs:null})}}}P.doGroupAppearAnimate=D},29515:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(60517),j=T.__importDefault(S(90494)),y=function(U){T.__extends(F,U);function F(B){var R=U.call(this)||this;R.destroyed=!1;var N=B.visible,A=N===void 0?!0:N;return R.visible=A,R}return F.prototype.show=function(){var B=this.visible;B||this.changeVisible(!0)},F.prototype.hide=function(){var B=this.visible;B&&this.changeVisible(!1)},F.prototype.destroy=function(){this.off(),this.destroyed=!0},F.prototype.changeVisible=function(B){this.visible!==B&&(this.visible=B)},F}(j.default);P.default=y},17916:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Controller=void 0;var T=S(49242),j=function(){function y(U){this.visible=!0,this.components=[],this.view=U}return y.prototype.clear=function(){T.each(this.components,function(U){U.component.destroy()}),this.components=[]},y.prototype.destroy=function(){this.clear()},y.prototype.getComponents=function(){return this.components},y.prototype.changeVisible=function(U){this.visible!==U&&(this.components.forEach(function(F){U?F.component.show():F.component.hide()}),this.visible=U)},y}();P.Controller=j},45687:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(60517),y=S(17916),U=250,F=function(D,M){var O=M.x-D.x,k=M.y-D.y;return Math.abs(O)>Math.abs(k)?O>0?"right":"left":k>0?"down":"up"},B=function(D,M){var O=Math.abs(M.x-D.x),k=Math.abs(M.y-D.y);return Math.sqrt(O*O+k*k)},R=function(D,M){var O=(D.x+M.x)/2,k=(D.y+M.y)/2;return{x:O,y:k}},N=function(D,M){if(!!D){for(var O=[],k=D.length,V=0;V<k;V++){var X=D[V],K=X.clientX,q=X.clientY,ct=M.getPointByClient(K,q);O.push(ct)}return O}},A=function(D){j.__extends(M,D);function M(O){var k=D.call(this,O)||this;return k.processEvent={},k.touchStart=function(V){var X=N(V.originalEvent.touches,k.canvas);!X||(V.points=X,k.reset(),k.startTime=Date.now(),k.startPoints=X,X.length>1?(k.startDistance=B(X[0],X[1]),k.center=R(X[0],X[1])):k.pressTimeout=setTimeout(function(){var K="press";V.direction="none",k.emitStart(K,V),k.emitEvent(K,V),k.eventType=K},U))},k.touchMove=function(V){var X=N(V.originalEvent.touches,k.canvas);if(!!X){k.clearPressTimeout(),V.points=X;var K=k.startPoints;if(!!K)if(X.length>1){var q=k.startDistance,ct=B(X[0],X[1]);V.zoom=ct/q,V.center=k.center,k.emitStart("pinch",V),k.emitEvent("pinch",V)}else{var _t=X[0].x-K[0].x,yt=X[0].y-K[0].y,lt=k.direction||F(K[0],X[0]);k.direction=lt;var Lt=k.getEventType(X);V.direction=lt,V.deltaX=_t,V.deltaY=yt,k.emitStart(Lt,V),k.emitEvent(Lt,V);var wt=k.lastMoveTime,Gt=Date.now();Gt-wt>0&&(k.prevMoveTime=wt,k.prevMovePoints=k.lastMovePoints,k.lastMoveTime=Gt,k.lastMovePoints=X)}}},k.touchEnd=function(V){k.emitEnd(V);var X=k.lastMoveTime,K=Date.now();if(K-X<100){var q=k.prevMoveTime||k.startTime,ct=X-q;if(ct>0){var _t=k.prevMovePoints||k.startPoints,yt=k.lastMovePoints,lt=B(_t[0],yt[0])/ct;lt>.3&&(V.velocity=lt,V.direction=F(_t[0],yt[0]),k.emitEvent("swipe",V))}}k.reset();var Lt=V.touches;Lt&&Lt.length>0&&k.touchStart(V)},k.canvas=O.getCanvas(),k.delegateEvent(),k.processEvent={},k}return Object.defineProperty(M.prototype,"name",{get:function(){return"gesture"},enumerable:!1,configurable:!0}),M.prototype.init=function(){},M.prototype.render=function(){},M.prototype.layout=function(){},M.prototype.update=function(){},M.prototype.destroy=function(){this.reset(),this.offEvent(),this.processEvent=null},M.prototype.delegateEvent=function(){this.canvas.on("touchstart",this.touchStart),this.canvas.on("touchmove",this.touchMove),this.canvas.on("touchend",this.touchEnd)},M.prototype.offEvent=function(){this.canvas.off("touchstart",this.touchStart),this.canvas.off("touchmove",this.touchMove),this.canvas.off("touchend",this.touchEnd)},M.prototype.emitEvent=function(O,k){var V=this.view;V.emit(O,k)},M.prototype.emitStart=function(O,k){this.isProcess(O)||(this.enable(O),this.emitEvent(O+"start",k))},M.prototype.emitEnd=function(O){var k=this,V=this.processEvent;Object.keys(V).forEach(function(X){k.emitEvent(X+"end",O),delete V[X]})},M.prototype.enable=function(O){this.processEvent[O]=!0},M.prototype.isProcess=function(O){return this.processEvent[O]},M.prototype.reset=function(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null},M.prototype.clearPressTimeout=function(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)},M.prototype.getEventType=function(O){var k=this,V=k.eventType,X=k.view,K=k.startTime,q=k.startPoints;if(V)return V;var ct,_t=X.getEvents().pan;if(!_t||!_t.length)ct="press";else{var yt=Date.now();yt-K>U&&B(q[0],O[0])<10?ct="press":ct="pan"}return this.eventType=ct,ct},M}(y.Controller);P.Z=A},64815:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(60517),y=S(49242),U=S(57029),F=S(22514),B=S(42770),R=S(99677),N=S(17916);function A(M){for(var O=[],k=function(X){var K=M[X],q=y.find(O,function(ct){return ct.color===K.color&&ct.name===K.name&&ct.value===K.value&&ct.title===K.title});q||O.push(K)},V=0;V<M.length;V++)k(V);return O}var D=function(M){j.__extends(O,M);function O(){var k=M!==null&&M.apply(this,arguments)||this;return k.isLocked=!1,k}return Object.defineProperty(O.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),O.prototype.init=function(){},O.prototype.isVisible=function(){var k=this.view.getOptions().tooltip;return k!==!1},O.prototype.render=function(){},O.prototype.showTooltip=function(k){if(this.point=k,!!this.isVisible()){var V=this.view,X=this.getTooltipItems(k);if(!X.length){this.hideTooltip();return}var K=this.getTitle(X),q={x:X[0].x,y:X[0].y};V.emit("tooltip:show",j.__assign({items:X,title:K},k));var ct=this.getTooltipCfg(),_t=ct.follow,yt=ct.showMarkers,lt=ct.showCrosshairs,Lt=ct.showContent,wt=ct.marker,Gt=this.items,re=this.title;if(!y.isEqual(re,K)||!y.isEqual(Gt,X)?(V.emit("tooltip:change",j.__assign({items:X,title:K},k)),Lt&&(this.tooltip||this.renderTooltip(),this.tooltip.update(y.mix({},ct,{items:X,title:K},_t?k:{})),this.tooltip.show()),yt&&this.renderTooltipMarkers(X,wt)):(this.tooltip&&_t&&(this.tooltip.update(k),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=X,this.title=K,lt){var Qt=y.get(ct,["crosshairs","follow"],!1);this.renderCrosshairs(Qt?k:q,ct)}}},O.prototype.hideTooltip=function(){var k=this.getTooltipCfg().follow;if(!k){this.point=null;return}var V=this.tooltipMarkersGroup;V&&V.hide();var X=this.xCrosshair,K=this.yCrosshair;X&&X.hide(),K&&K.hide();var q=this.tooltip;q&&q.hide(),this.view.emit("tooltip:hide",{}),this.point=null},O.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},O.prototype.unlockTooltip=function(){this.isLocked=!1;var k=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(k.capture)},O.prototype.isTooltipLocked=function(){return this.isLocked},O.prototype.clear=function(){var k=this,V=k.tooltip,X=k.xCrosshair,K=k.yCrosshair,q=k.tooltipMarkersGroup;V&&(V.hide(),V.clear()),X&&X.clear(),K&&K.clear(),q&&q.clear()},O.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},O.prototype.changeVisible=function(k){if(this.visible!==k){var V=this,X=V.tooltip,K=V.tooltipMarkersGroup,q=V.xCrosshair,ct=V.yCrosshair;k?(X&&X.show(),K&&K.show(),q&&q.show(),ct&&ct.show()):(X&&X.hide(),K&&K.hide(),q&&q.hide(),ct&&ct.hide()),this.visible=k}},O.prototype.getTooltipItems=function(k){var V=this.findItemsFromView(this.view,k);if(V.length){V=y.flatten(V);for(var X=0,K=V;X<K.length;X++)for(var q=K[X],ct=0,_t=q;ct<_t.length;ct++){var yt=_t[ct],lt=yt.mappingData,Lt=lt.x,wt=lt.y;yt.x=y.isArray(Lt)?Lt[Lt.length-1]:Lt,yt.y=y.isArray(wt)?wt[wt.length-1]:wt}var Gt=this.getTooltipCfg().shared;if(Gt===!1&&V.length>1){for(var re=V[0],Qt=Math.abs(k.y-re[0].y),it=0,dt=V;it<dt.length;it++){var gt=dt[it],vt=Math.abs(k.y-gt[0].y);vt<=Qt&&(re=gt,Qt=vt)}V=[re]}return A(y.flatten(V))}return[]},O.prototype.layout=function(){},O.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var k=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:k.get("width"),y:k.get("height")}})}},O.prototype.getTooltipCfg=function(){var k=this.view,V=k.getOptions().tooltip,X=k.getTheme(),K=y.get(X,["components","tooltip"],{}),q=y.isUndefined(y.get(V,"enterable"))?K.enterable:y.get(V,"enterable");return y.deepMix({},K,V,{capture:!!(q||this.isLocked)})},O.prototype.getTitle=function(k){var V=k[0].title||k[0].name;return this.title=V,V},O.prototype.renderTooltip=function(){var k=this.view.getCanvas(),V={start:{x:0,y:0},end:{x:k.get("width"),y:k.get("height")}},X=this.getTooltipCfg(),K=new U.HtmlTooltip(j.__assign(j.__assign({parent:k.get("el").parentNode,region:V},X),{visible:!1,crosshairs:null}));K.init(),this.tooltip=K},O.prototype.renderTooltipMarkers=function(k,V){for(var X=this.getTooltipMarkersGroup(),K=0,q=k;K<q.length;K++){var ct=q[K],_t=ct.x,yt=ct.y,lt=j.__assign(j.__assign({fill:ct.color,symbol:"circle",shadowColor:ct.color},V),{x:_t,y:yt});X.addShape("marker",{attrs:lt})}},O.prototype.renderCrosshairs=function(k,V){var X=y.get(V,["crosshairs","type"],"x");X==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(k,V)):X==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(k,V)):X==="xy"&&(this.renderXCrosshairs(k,V),this.renderYCrosshairs(k,V))},O.prototype.renderXCrosshairs=function(k,V){var X=this.getViewWithGeometry(this.view).getCoordinate();if(!!F.isPointInCoordinate(X,k)){var K,q;if(X.isRect)X.isTransposed?(K={x:X.start.x,y:k.y},q={x:X.end.x,y:k.y}):(K={x:k.x,y:X.end.y},q={x:k.x,y:X.start.y});else{var ct=F.getAngleByPoint(X,k),_t=X.getCenter(),yt=X.getRadius();q=B.polarToCartesian(_t.x,_t.y,yt,ct),K=_t}var lt=y.deepMix({start:K,end:q,container:this.getTooltipCrosshairsGroup()},y.get(V,"crosshairs",{}),this.getCrosshairsText("x",k,V));delete lt.type;var Lt=this.xCrosshair;Lt?Lt.update(lt):(Lt=new U.Crosshair.Line(lt),Lt.init()),Lt.render(),Lt.show(),this.xCrosshair=Lt}},O.prototype.renderYCrosshairs=function(k,V){var X=this.getViewWithGeometry(this.view).getCoordinate();if(!!F.isPointInCoordinate(X,k)){var K,q;if(X.isRect){var ct=void 0,_t=void 0;X.isTransposed?(ct={x:k.x,y:X.end.y},_t={x:k.x,y:X.start.y}):(ct={x:X.start.x,y:k.y},_t={x:X.end.x,y:k.y}),K={start:ct,end:_t},q="Line"}else K={center:X.getCenter(),radius:F.getDistanceToCenter(X,k),startAngle:X.startAngle,endAngle:X.endAngle},q="Circle";K=y.deepMix({container:this.getTooltipCrosshairsGroup()},K,y.get(V,"crosshairs",{}),this.getCrosshairsText("y",k,V)),delete K.type;var yt=this.yCrosshair;yt?X.isRect&&yt.get("type")==="circle"||!X.isRect&&yt.get("type")==="line"?(yt=new U.Crosshair[q](K),yt.init()):yt.update(K):(yt=new U.Crosshair[q](K),yt.init()),yt.render(),yt.show(),this.yCrosshair=yt}},O.prototype.getCrosshairsText=function(k,V,X){var K=y.get(X,["crosshairs","text"]),q=y.get(X,["crosshairs","follow"]),ct=this.items;if(K){var _t=this.getViewWithGeometry(this.view),yt=ct[0],lt=_t.getXScale(),Lt=_t.getYScales()[0],wt=void 0,Gt=void 0;if(q){var re=this.view.getCoordinate().invert(V);wt=lt.invert(re.x),Gt=Lt.invert(re.y)}else wt=yt.data[lt.field],Gt=yt.data[Lt.field];var Qt=k==="x"?wt:Gt;return y.isFunction(K)?K=K(k,Qt,ct,V):K.content=Qt,{text:K}}},O.prototype.getGuideGroup=function(){if(!this.guideGroup){var k=this.view.foregroundGroup;this.guideGroup=k.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},O.prototype.getTooltipMarkersGroup=function(){var k=this.tooltipMarkersGroup;return k&&!k.destroyed?(k.clear(),k.show()):(k=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),k.toFront(),this.tooltipMarkersGroup=k),k},O.prototype.getTooltipCrosshairsGroup=function(){var k=this.tooltipCrosshairsGroup;return k||(k=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),k.toBack(),this.tooltipCrosshairsGroup=k),k},O.prototype.getTooltipItemsByHitShape=function(k,V,X){var K=[],q=k.container,ct=q.getShape(V.x,V.y);if(ct&&ct.get("visible")&&ct.get("origin")){var _t=ct.get("origin").mappingData,yt=R.getTooltipItems(_t,k,X);yt.length&&K.push(yt)}return K},O.prototype.getTooltipItemsByFindData=function(k,V,X){var K=[],q=k.dataArray;k.sort(q);for(var ct=0,_t=q;ct<_t.length;ct++){var yt=_t[ct],lt=R.findDataByPoint(V,yt,k);if(lt){var Lt=k.getElementId(lt),wt=k.elementsMap[Lt];if(k.type==="heatmap"||wt.visible){var Gt=R.getTooltipItems(lt,k,X);Gt.length&&K.push(Gt)}}}return K},O.prototype.findItemsFromView=function(k,V){if(k.getOptions().tooltip===!1)return[];for(var X=[],K=k.geometries,q=this.getTooltipCfg(),ct=q.shared,_t=q.title,yt=0,lt=K;yt<lt.length;yt++){var Lt=lt[yt];if(Lt.visible&&Lt.tooltipOption!==!1){var wt=Lt.type,Gt=void 0;["point","edge","polygon"].includes(wt)?Gt=this.getTooltipItemsByHitShape(Lt,V,_t):["area","line","path","heatmap"].includes(wt)?Gt=this.getTooltipItemsByFindData(Lt,V,_t):ct!==!1?Gt=this.getTooltipItemsByFindData(Lt,V,_t):Gt=this.getTooltipItemsByHitShape(Lt,V,_t),Gt.length&&X.push(Gt)}}for(var re=0,Qt=k.views;re<Qt.length;re++){var it=Qt[re];X=X.concat(this.findItemsFromView(it,V))}return X},O.prototype.getViewWithGeometry=function(k){var V=this;return k.geometries.length?k:y.find(k.views,function(X){return V.getViewWithGeometry(X)})},O}(N.Controller);P.Z=D},29583:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.COMPONENT_MAX_VIEW_PERCENTAGE=P.MIN_CHART_HEIGHT=P.MIN_CHART_WIDTH=P.FIELD_ORIGIN=P.GROUP_ATTRS=P.ELEMENT_STATE=P.PLOT_EVENTS=P.VIEW_LIFE_CIRCLE=P.GROUP_Z_INDEX=P.COMPONENT_TYPE=P.DIRECTION=P.LAYER=void 0;var S;(function(B){B.FORE="fore",B.MID="mid",B.BG="bg"})(S=P.LAYER||(P.LAYER={}));var T;(function(B){B.TOP="top",B.TOP_LEFT="top-left",B.TOP_RIGHT="top-right",B.RIGHT="right",B.RIGHT_TOP="right-top",B.RIGHT_BOTTOM="right-bottom",B.LEFT="left",B.LEFT_TOP="left-top",B.LEFT_BOTTOM="left-bottom",B.BOTTOM="bottom",B.BOTTOM_LEFT="bottom-left",B.BOTTOM_RIGHT="bottom-right",B.RADIUS="radius",B.CIRCLE="circle",B.NONE="none"})(T=P.DIRECTION||(P.DIRECTION={}));var j;(function(B){B.AXIS="axis",B.GRID="grid",B.LEGEND="legend",B.TOOLTIP="tooltip",B.ANNOTATION="annotation",B.OTHER="other"})(j=P.COMPONENT_TYPE||(P.COMPONENT_TYPE={})),P.GROUP_Z_INDEX={FORE:3,MID:2,BG:1};var y;(function(B){B.BEFORE_RENDER="beforerender",B.AFTER_RENDER="afterrender",B.BEFORE_PAINT="beforepaint",B.AFTER_PAINT="afterpaint",B.BEFORE_CHANGE_DATA="beforechangedata",B.AFTER_CHANGE_DATA="afterchangedata",B.BEFORE_CLEAR="beforeclear",B.AFTER_CLEAR="afterclear",B.BEFORE_DESTROY="beforedestroy"})(y=P.VIEW_LIFE_CIRCLE||(P.VIEW_LIFE_CIRCLE={}));var U;(function(B){B.MOUSE_ENTER="plot:mouseenter",B.MOUSE_DOWN="plot:mousedown",B.MOUSE_MOVE="plot:mousemove",B.MOUSE_UP="plot:mouseup",B.MOUSE_LEAVE="plot:mouseleave",B.TOUCH_START="plot:touchstart",B.TOUCH_MOVE="plot:touchmove",B.TOUCH_END="plot:touchend",B.TOUCH_CANCEL="plot:touchcancel",B.CLICK="plot:click",B.DBLCLICK="plot:dblclick",B.CONTEXTMENU="plot:contextmenu",B.LEAVE="plot:leave",B.ENTER="plot:enter"})(U=P.PLOT_EVENTS||(P.PLOT_EVENTS={}));var F;(function(B){B.ACTIVE="active",B.INACTIVE="inactive",B.SELECTED="selected",B.DEFAULT="default"})(F=P.ELEMENT_STATE||(P.ELEMENT_STATE={})),P.GROUP_ATTRS=["color","shape","size"],P.FIELD_ORIGIN="_origin",P.MIN_CHART_WIDTH=1,P.MIN_CHART_HEIGHT=1,P.COMPONENT_MAX_VIEW_PERCENTAGE=.25},57029:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Slider=P.HtmlTooltip=P.ContinuousLegend=P.CategoryLegend=P.CircleGrid=P.LineGrid=P.CircleAxis=P.LineAxis=P.Annotation=P.Crosshair=P.Component=P.GroupComponent=P.HtmlComponent=void 0;var T=S(39014);Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return T.Event}}),Object.defineProperty(P,"AbstractGroup",{enumerable:!0,get:function(){return T.AbstractGroup}}),Object.defineProperty(P,"AbstractShape",{enumerable:!0,get:function(){return T.AbstractShape}});var j=S(28014);Object.defineProperty(P,"registerAdjust",{enumerable:!0,get:function(){return j.registerAdjust}}),Object.defineProperty(P,"getAdjust",{enumerable:!0,get:function(){return j.getAdjust}}),Object.defineProperty(P,"Adjust",{enumerable:!0,get:function(){return j.Adjust}});var y=S(24796);Object.defineProperty(P,"getAttribute",{enumerable:!0,get:function(){return y.getAttribute}}),Object.defineProperty(P,"Attribute",{enumerable:!0,get:function(){return y.Attribute}});var U=S(21392);Object.defineProperty(P,"Color",{enumerable:!0,get:function(){return U.Color}});var F=S(50782);Object.defineProperty(P,"getCoordinate",{enumerable:!0,get:function(){return F.getCoordinate}}),Object.defineProperty(P,"registerCoordinate",{enumerable:!0,get:function(){return F.registerCoordinate}}),Object.defineProperty(P,"Coordinate",{enumerable:!0,get:function(){return F.Coordinate}});var B=S(2443);Object.defineProperty(P,"getScale",{enumerable:!0,get:function(){return B.getScale}}),Object.defineProperty(P,"registerScale",{enumerable:!0,get:function(){return B.registerScale}}),Object.defineProperty(P,"Scale",{enumerable:!0,get:function(){return B.Scale}});var R=S(51441);Object.defineProperty(P,"Annotation",{enumerable:!0,get:function(){return R.Annotation}}),Object.defineProperty(P,"Component",{enumerable:!0,get:function(){return R.Component}}),Object.defineProperty(P,"Crosshair",{enumerable:!0,get:function(){return R.Crosshair}}),Object.defineProperty(P,"GroupComponent",{enumerable:!0,get:function(){return R.GroupComponent}}),Object.defineProperty(P,"HtmlComponent",{enumerable:!0,get:function(){return R.HtmlComponent}}),Object.defineProperty(P,"Slider",{enumerable:!0,get:function(){return R.Slider}});var N=R.Axis.Line,A=R.Axis.Circle;P.LineAxis=N,P.CircleAxis=A;var D=R.Grid.Line,M=R.Grid.Circle;P.LineGrid=D,P.CircleGrid=M;var O=R.Legend.Category,k=R.Legend.Continuous;P.CategoryLegend=O,P.ContinuousLegend=k;var V=R.Tooltip.Html;P.HtmlTooltip=V},38700:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(60517),y=S(49242),U=S(27978),F=j.__importDefault(S(29515)),B=S(42770),R=S(31207),N=function(A){j.__extends(D,A);function D(M){var O=A.call(this,M)||this;O.states=[];var k=M.shapeFactory,V=M.container,X=M.offscreenGroup,K=M.visible,q=K===void 0?!0:K;return O.shapeFactory=k,O.container=V,O.offscreenGroup=X,O.visible=q,O}return D.prototype.draw=function(M,O){O===void 0&&(O=!1),this.model=M,this.data=M.data,this.shapeType=this.getShapeType(M),this.drawShape(M,O),this.visible===!1&&this.changeVisible(!1)},D.prototype.update=function(M){var O=this,k=O.shapeFactory,V=O.shape;if(!!V){this.model=M,this.data=M.data,this.shapeType=this.getShapeType(M),this.setShapeInfo(V,M);var X=this.getOffscreenGroup(),K=k.drawShape(this.shapeType,M,X);K.cfg.data=this.data,K.cfg.origin=M,this.syncShapeStyle(V,K,"",this.getAnimateCfg("update"))}},D.prototype.destroy=function(){var M=this,O=M.shapeFactory,k=M.shape;if(k){var V=this.getAnimateCfg("leave");V?U.doAnimate(k,V,{coordinate:O.coordinate,toAttrs:j.__assign({},k.attr())}):k.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,A.prototype.destroy.call(this)},D.prototype.changeVisible=function(M){A.prototype.changeVisible.call(this,M),M?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(O){O.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(O){O.hide()}))},D.prototype.setState=function(M,O){var k=this,V=this,X=V.states,K=V.shapeFactory,q=V.model,ct=V.shape,_t=V.shapeType,yt=X.indexOf(M);if(O){if(yt>-1)return;X.push(M),(M==="active"||M==="selected")&&ct.toFront()}else{if(yt===-1)return;X.splice(yt,1),(M==="active"||M==="selected")&&ct.toBack()}var lt=K.drawShape(_t,q,this.getOffscreenGroup());X.length?X.forEach(function(wt){k.syncShapeStyle(ct,lt,wt,null)}):this.syncShapeStyle(ct,lt,"reset",null),lt.remove(!0);var Lt={state:M,stateStatus:O,element:this,target:this.container};this.container.emit("statechange",Lt),R.propagationDelegate(this.shape,"statechange",Lt)},D.prototype.clearStates=function(){var M=this,O=this.states;y.each(O,function(k){M.setState(k,!1)}),this.states=[]},D.prototype.hasState=function(M){return this.states.includes(M)},D.prototype.getStates=function(){return this.states},D.prototype.getData=function(){return this.data},D.prototype.getModel=function(){return this.model},D.prototype.getBBox=function(){var M=this,O=M.shape,k=M.labelShape,V={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return O&&(V=O.getCanvasBBox()),k&&k.forEach(function(X){var K=X.getCanvasBBox();V.x=Math.min(K.x,V.x),V.y=Math.min(K.y,V.y),V.minX=Math.min(K.minX,V.minX),V.minY=Math.min(K.minY,V.minY),V.maxX=Math.max(K.maxX,V.maxX),V.maxY=Math.max(K.maxY,V.maxY)}),V.width=V.maxX-V.minX,V.height=V.maxY-V.minY,V},D.prototype.getStatesStyle=function(){if(!this.statesStyle){var M=this,O=M.shapeType,k=M.geometry,V=M.shapeFactory,X=k.stateOption,K=V.defaultShapeType,q=V.theme[O]||V.theme[K];this.statesStyle=y.deepMix({},q,X)}return this.statesStyle},D.prototype.getStateStyle=function(M,O){var k=this.getStatesStyle(),V=y.get(k,[M,"style"],{}),X=V[O]||V;return y.isFunction(X)?X(this):X},D.prototype.getAnimateCfg=function(M){var O=this.animate;return O?O[M]:null},D.prototype.drawShape=function(M,O){O===void 0&&(O=!1);var k=this,V=k.shapeFactory,X=k.container,K=k.shapeType;if(this.shape=V.drawShape(K,M,X),this.shape){this.setShapeInfo(this.shape,M);var q=this.shape.cfg.name;q?y.isString(q)&&(this.shape.cfg.name=["element",q]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ct=O?"enter":"appear",_t=this.getAnimateCfg(ct);_t&&U.doAnimate(this.shape,_t,{coordinate:V.coordinate,toAttrs:j.__assign({},this.shape.attr())})}},D.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var M=this.container.getGroupBase();this.offscreenGroup=new M({})}return this.offscreenGroup},D.prototype.setShapeInfo=function(M,O){var k=this;if(M.cfg.origin=O,M.cfg.element=this,M.isGroup()){var V=M.get("children");V.forEach(function(X){k.setShapeInfo(X,O)})}},D.prototype.syncShapeStyle=function(M,O,k,V,X){if(k===void 0&&(k=""),X===void 0&&(X=0),M.isGroup())for(var K=M.get("children"),q=O.get("children"),ct=0;ct<K.length;ct++)this.syncShapeStyle(K[ct],q[ct],k,V,X+ct);else{if(k&&k!=="reset"){var _t=M.get("name");y.isArray(_t)&&(_t=_t[1]);var yt=this.getStateStyle(k,_t||X);O.attr(yt)}var lt=B.getReplaceAttrs(M,O);this.animate?V?U.doAnimate(M,V,{coordinate:this.shapeFactory.coordinate,toAttrs:lt,shapeModel:this.model}):k?(M.stopAnimate(),M.animate(lt,{duration:300})):M.attr(lt):M.attr(lt)}},D.prototype.getShapeType=function(M){var O=y.get(M,"shape");return y.isArray(O)?O[0]:O},D}(F.default);T=N},75564:function(Vt,P,S){"use strict";var T;T={value:!0},P.iV=T=T=void 0;var j=S(60517),y=S(6750),U=S(26485);T=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],T=["cross","tick","plus","hyphen","line"];function F(B,R,N,A,D){var M=U.getStyle(R,D,!D,"r"),O=B.parsePoints(R.points),k=O[0];if(R.isStack)k=O[1];else if(O.length>1){for(var V=N.addGroup(),X=0,K=O;X<K.length;X++){var q=K[X];V.addShape({type:"marker",attrs:j.__assign(j.__assign(j.__assign({},M),{symbol:y.MarkerSymbols[A]||A}),q)})}return V}return N.addShape({type:"marker",attrs:j.__assign(j.__assign(j.__assign({},M),{symbol:y.MarkerSymbols[A]||A}),k)})}P.iV=F},26485:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getStyle=void 0;var T=S(60517),j=S(49242);function y(U,F,B,R){R===void 0&&(R="");var N=U.style,A=N===void 0?{}:N,D=U.defaultStyle,M=U.color,O=U.size,k=T.__assign(T.__assign({},D),A);return M&&(F&&(A.stroke||(k.stroke=M)),B&&(A.fill||(k.fill=M))),R&&j.isNil(A[R])&&!j.isNil(O)&&(k[R]=O),k}P.getStyle=y},36758:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.convertPolarPath=P.convertNormalPath=P.getSplinePath=P.getLinePath=P.catmullRom2bezier=P.smoothBezier=void 0;var T=S(43567),j=S(49242),y=S(22514);function U(k,V){var X=[];if(k.length){X.push(["M",k[0].x,k[0].y]);for(var K=1,q=k.length;K<q;K+=1){var ct=k[K];X.push(["L",ct.x,ct.y])}V&&X.push(["Z"])}return X}function F(k,V){for(var X=[k[0]],K=1,q=k.length;K<q;K=K+2){var ct=V.convert({x:k[K],y:k[K+1]});X.push(ct.x,ct.y)}return X}function B(k,V,X){var K=X.isTransposed,q=X.startAngle,ct=X.endAngle,_t={x:k[1],y:k[2]},yt={x:V[1],y:V[2]},lt=[],Lt=K?"y":"x",wt=Math.abs(yt[Lt]-_t[Lt])*(ct-q),Gt=yt[Lt]>=_t[Lt]?1:0,re=wt>Math.PI?1:0,Qt=X.convert(yt),it=y.getDistanceToCenter(X,Qt);if(it>=.5)if(wt===Math.PI*2){var dt={x:(yt.x+_t.x)/2,y:(yt.y+_t.y)/2},gt=X.convert(dt);lt.push(["A",it,it,0,re,Gt,gt.x,gt.y]),lt.push(["A",it,it,0,re,Gt,Qt.x,Qt.y])}else lt.push(["A",it,it,0,re,Gt,Qt.x,Qt.y]);return lt}function R(k){j.each(k,function(V,X){var K=V;if(K[0].toLowerCase()==="a"){var q=k[X-1],ct=k[X+1];ct&&ct[0].toLowerCase()==="a"?q&&q[0].toLowerCase()==="l"&&(q[0]="M"):q&&q[0].toLowerCase()==="a"&&ct&&ct[0].toLowerCase()==="l"&&(ct[0]="M")}})}P.smoothBezier=function(k,V,X,K){var q=[],ct,_t,yt=!!K,lt,Lt;if(yt){lt=[Infinity,Infinity],Lt=[-Infinity,-Infinity];for(var wt=0,Gt=k.length;wt<Gt;wt++){var re=k[wt];lt=T.vec2.min([0,0],lt,re),Lt=T.vec2.max([0,0],Lt,re)}lt=T.vec2.min([0,0],lt,K[0]),Lt=T.vec2.max([0,0],Lt,K[1])}for(var wt=0,Qt=k.length;wt<Qt;wt++){var re=k[wt];if(X)ct=k[wt?wt-1:Qt-1],_t=k[(wt+1)%Qt];else if(wt===0||wt===Qt-1){q.push(re);continue}else ct=k[wt-1],_t=k[wt+1];var it=[0,0];it=T.vec2.sub(it,_t,ct),it=T.vec2.scale(it,it,V);var dt=T.vec2.distance(re,ct),gt=T.vec2.distance(re,_t),vt=dt+gt;vt!==0&&(dt/=vt,gt/=vt);var Y=T.vec2.scale([0,0],it,-dt),ot=T.vec2.scale([0,0],it,gt),nt=T.vec2.add([0,0],re,Y),rt=T.vec2.add([0,0],re,ot);yt&&(nt=T.vec2.max([0,0],nt,lt),nt=T.vec2.min([0,0],nt,Lt),rt=T.vec2.max([0,0],rt,lt),rt=T.vec2.min([0,0],rt,Lt)),q.push(nt),q.push(rt)}return X&&q.push(q.shift()),q};function N(k,V,X){for(var K=!!V,q=[],ct=0,_t=k.length;ct<_t;ct+=2)q.push([k[ct],k[ct+1]]);for(var yt=P.smoothBezier(q,.4,K,X),lt=q.length,Lt=[],wt,Gt,re,ct=0;ct<lt-1;ct++)wt=yt[ct*2],Gt=yt[ct*2+1],re=q[ct+1],Lt.push(["C",wt[0],wt[1],Gt[0],Gt[1],re[0],re[1]]);return K&&(wt=yt[lt],Gt=yt[lt+1],re=q[0],Lt.push(["C",wt[0],wt[1],Gt[0],Gt[1],re[0],re[1]])),Lt}P.catmullRom2bezier=N;function A(k,V){return U(k,V)}P.getLinePath=A;function D(k,V,X){var K=[],q=k[0],ct=null;if(k.length<=2)return A(k,V);for(var _t=0,yt=k.length;_t<yt;_t++){var lt=k[_t];(!ct||!(ct.x===lt.x&&ct.y===lt.y))&&(K.push(lt.x),K.push(lt.y),ct=lt)}var Lt=X||[[0,0],[1,1]],wt=N(K,V,Lt);return wt.unshift(["M",q.x,q.y]),wt}P.getSplinePath=D;function M(k,V){var X=[];return j.each(V,function(K){var q=K[0];switch(q.toLowerCase()){case"m":case"l":case"c":X.push(F(K,k));break;case"z":default:X.push(K);break}}),X}P.convertNormalPath=M;function O(k,V){var X=[],K,q,ct,_t;return j.each(V,function(yt,lt){var Lt=yt[0];switch(Lt.toLowerCase()){case"m":case"c":case"q":X.push(F(yt,k));break;case"l":K=V[lt-1],q=yt,ct=k.isTransposed,_t=ct?K[K.length-2]===q[1]:K[K.length-1]===q[2],_t?X=X.concat(B(K,q,k)):X.push(F(yt,k));break;case"z":default:X.push(yt);break}}),R(X),X}P.convertPolarPath=O},33242:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=function(){function y(U,F){this.context=U,this.cfg=F,U.addAction(this)}return y.prototype.applyCfg=function(U){T.assign(this,U)},y.prototype.init=function(){this.applyCfg(this.cfg)},y.prototype.destroy=function(){this.context.removeAction(this),this.context=null},y}();P.default=j},68842:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(60517),j=T.__importDefault(S(33242)),y=function(U){T.__extends(F,U);function F(){return U!==null&&U.apply(this,arguments)||this}return F.prototype.execute=function(){this.callback&&this.callback(this.context)},F.prototype.destroy=function(){U.prototype.destroy.call(this),this.callback=null},F}(j.default);P.default=y},93359:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.createCallbackAction=P.unregisterAction=P.registerAction=P.getActionClass=P.createAction=void 0;var T=S(60517),j=T.__importDefault(S(68842)),y=S(49242),U={};function F(D,M){var O=U[D],k=null;if(O){var V=O.ActionClass,X=O.cfg;k=new V(M,X),k.name=D,k.init()}return k}P.createAction=F;function B(D){var M=U[D];return y.get(M,"ActionClass")}P.getActionClass=B;function R(D,M,O){U[D]={ActionClass:M,cfg:O}}P.registerAction=R;function N(D){delete U[D]}P.unregisterAction=N;function A(D,M){var O=new j.default(M);return O.callback=D,O.name="callback",O}P.createCallbackAction=A},31882:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getScaleByField=P.isInRecords=P.getSiblingPoint=P.getSilbings=P.isInBox=P.getSpline=P.distance=P.getComponents=P.getElementsByPath=P.getIntersectElements=P.intersectRect=P.getElementValue=P.getElementsByState=P.getElementsByField=P.getElements=P.getSiblingMaskElements=P.getMaskedElements=P.isMask=P.isSlider=P.isList=P.isElementChange=P.getDelegationObject=P.getCurrentElement=void 0;var T=S(60517),j=S(49242),y=S(36758),U=S(85800),F=T.__importDefault(S(70146));function B(nt,rt){var st=nt.event,d=st.target,It=d.getCanvasBBox();return It.width>=rt||It.height>=rt?It:null}function R(nt,rt){var st=nt.event,d=st.target,It=d.getCanvasBBox();return It.width>=rt||It.height>=rt?d.attr("path"):null}function N(nt){var rt=nt.event,st,d=rt.target;return d&&(st=d.get("element")),st}P.getCurrentElement=N;function A(nt){var rt=nt.event,st=rt.target,d;return st&&(d=st.get("delegateObject")),d}P.getDelegationObject=A;function D(nt){var rt=nt.event.gEvent;return!(rt&&rt.fromShape&&rt.toShape&&rt.fromShape.get("element")===rt.toShape.get("element"))}P.isElementChange=D;function M(nt){return nt&&nt.component&&nt.component.isList()}P.isList=M;function O(nt){return nt&&nt.component&&nt.component.isSlider()}P.isSlider=O;function k(nt){var rt=nt.event,st=rt.target;return st&&st.get("name")==="mask"}P.isMask=k;function V(nt,rt){var st=nt.event.target;if(st.get("type")==="path"){var d=R(nt,rt);return d?wt(nt.view,d):void 0}var It=B(nt,rt);return It?lt(nt.view,It):null}P.getMaskedElements=V;function X(nt,rt,st){var d=B(nt,st);if(!d)return null;var It=nt.view,Ht=vt(It,rt,{x:d.x,y:d.y}),kt=vt(It,rt,{x:d.maxX,y:d.maxY}),Xt={minX:Ht.x,minY:Ht.y,maxX:kt.x,maxY:kt.y};return lt(rt,Xt)}P.getSiblingMaskElements=X;function K(nt){var rt=nt.geometries,st=[];return j.each(rt,function(d){var It=d.elements;st=st.concat(It)}),nt.views&&nt.views.length&&j.each(nt.views,function(d){st=st.concat(K(d))}),st}P.getElements=K;function q(nt,rt,st){var d=K(nt);return d.filter(function(It){return _t(It,rt)===st})}P.getElementsByField=q;function ct(nt,rt){var st=nt.geometries,d=[];return j.each(st,function(It){var Ht=It.getElementsBy(function(kt){return kt.hasState(rt)});d=d.concat(Ht)}),d}P.getElementsByState=ct;function _t(nt,rt){var st=nt.getModel(),d=st.data,It;return j.isArray(d)?It=d[0][rt]:It=d[rt],It}P.getElementValue=_t;function yt(nt,rt){return!(rt.minX>nt.maxX||rt.maxX<nt.minX||rt.minY>nt.maxY||rt.maxY<nt.minY)}P.intersectRect=yt;function lt(nt,rt){var st=K(nt),d=[];return j.each(st,function(It){var Ht=It.shape,kt=Ht.getCanvasBBox();yt(rt,kt)&&d.push(It)}),d}P.getIntersectElements=lt;function Lt(nt){var rt=[];return j.each(nt,function(st){var d=st[0];if(d!=="A")for(var It=1;It<st.length;It=It+2)rt.push([st[It],st[It+1]]);else{var Ht=st.length;rt.push([st[Ht-2],st[Ht-1]])}}),rt}function wt(nt,rt){var st=K(nt),d=Lt(rt),It=st.filter(function(Ht){var kt=Ht.shape,Xt;if(kt.get("type")==="path")Xt=Lt(kt.attr("path"));else{var Kt=kt.getCanvasBBox();Xt=U.toPoints(Kt)}return F.default(d,Xt)});return It}P.getElementsByPath=wt;function Gt(nt){return nt.getComponents().map(function(rt){return rt.component})}P.getComponents=Gt;function re(nt,rt){var st=rt.x-nt.x,d=rt.y-nt.y;return Math.sqrt(st*st+d*d)}P.distance=re;function Qt(nt,rt){if(nt.length<=2)return y.getLinePath(nt,!1);var st=nt[0],d=[];j.each(nt,function(Ht){d.push(Ht.x),d.push(Ht.y)});var It=y.catmullRom2bezier(d,rt,null);return It.unshift(["M",st.x,st.y]),It}P.getSpline=Qt;function it(nt,rt){return nt.x<=rt.x&&nt.maxX>=rt.x&&nt.y<=rt.y&&nt.maxY>rt.y}P.isInBox=it;function dt(nt){var rt=nt.parent,st=null;return rt&&(st=rt.views.filter(function(d){return d!==nt})),st}P.getSilbings=dt;function gt(nt,rt){var st=nt.getCoordinate();return st.invert(rt)}function vt(nt,rt,st){var d=gt(nt,st);return rt.getCoordinate().convert(d)}P.getSiblingPoint=vt;function Y(nt,rt,st,d){var It=!1;return j.each(nt,function(Ht){if(Ht[st]===rt[st]&&Ht[d]===rt[d])return It=!0,!1}),It}P.isInRecords=Y;function ot(nt,rt){var st=nt.getScaleByField(rt);return!st&&nt.views&&j.each(nt.views,function(d){if(st=ot(d,rt),st)return!1}),st}P.getScaleByField=ot},43273:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(31882),y=function(){function U(F){this.actions=[],this.event=null,this.cacheMap={},this.view=F}return U.prototype.cache=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(F.length===1)return this.cacheMap[F[0]];F.length===2&&(this.cacheMap[F[0]]=F[1])},U.prototype.getAction=function(F){return this.actions.find(function(B){return B.name===F})},U.prototype.addAction=function(F){this.actions.push(F)},U.prototype.removeAction=function(F){var B=this.actions,R=this.actions.indexOf(F);R>=0&&B.splice(R,1)},U.prototype.getCurrentPoint=function(){var F=this.event;if(F)if(F.target instanceof HTMLElement){var B=this.view.getCanvas(),R=B.getPointByClient(F.clientX,F.clientY);return R}else return{x:F.x,y:F.y};return null},U.prototype.getCurrentShape=function(){return T.get(this.event,["gEvent","shape"])},U.prototype.isInPlot=function(){var F=this.getCurrentPoint();return F?this.view.isPointInPlot(F):!1},U.prototype.isInShape=function(F){var B=this.getCurrentShape();return B?B.get("name")===F:!1},U.prototype.isInComponent=function(F){var B=j.getComponents(this.view),R=this.getCurrentPoint();return R?!!B.find(function(N){var A=N.getBBox();return F?N.get("name")===F&&j.isInBox(A,R):j.isInBox(A,R)}):!1},U.prototype.destroy=function(){this.view=null,this.event=null,T.each(this.actions.slice(),function(F){F.destroy()}),this.actions=null,this.cacheMap=null},U}();P.default=y},61058:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(60517),y=S(49242),U=S(93359),F=j.__importDefault(S(43273)),B=j.__importDefault(S(91513));function R(M,O){var k=M.split(":"),V=k[0],X=O.getAction(V)||U.createAction(V,O);if(!X)throw new Error("There is no action named "+V);var K=k[1];return{action:X,methodName:K}}function N(M){var O=M.action,k=M.methodName;if(O[k])O[k]();else throw new Error("Action("+O.name+") doesn't have a method called "+k)}var A={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},D=function(M){j.__extends(O,M);function O(k,V){var X=M.call(this,k,V)||this;return X.callbackCaches={},X.emitCaches={},X.steps=V,X}return O.prototype.init=function(){this.initContext(),M.prototype.init.call(this)},O.prototype.destroy=function(){M.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},O.prototype.initEvents=function(){var k=this;y.each(this.steps,function(V,X){y.each(V,function(K){var q=k.getActionCallback(X,K);q&&k.bindEvent(K.trigger,q)})})},O.prototype.clearEvents=function(){var k=this;y.each(this.steps,function(V,X){y.each(V,function(K){var q=k.getActionCallback(X,K);q&&k.offEvent(K.trigger,q)})})},O.prototype.initContext=function(){var k=this.view,V=new F.default(k);this.context=V;var X=this.steps;y.each(X,function(K){y.each(K,function(q){if(y.isFunction(q.action))q.actionObject={action:U.createCallbackAction(q.action,V),methodName:"execute"};else if(y.isString(q.action))q.actionObject=R(q.action,V);else if(y.isArray(q.action)){var ct=q.action;q.actionObject=[],y.each(ct,function(_t){q.actionObject.push(R(_t,V))})}})})},O.prototype.isAllowStep=function(k){var V=this.currentStepName,X=this.steps;if(V===k||k===A.SHOW_ENABLE)return!0;if(k===A.PROCESSING)return V===A.START;if(k===A.START)return V!==A.PROCESSING;if(k===A.END)return V===A.PROCESSING||V===A.START;if(k===A.ROLLBACK){if(X[A.END])return V===A.END;if(V===A.START)return!0}return!1},O.prototype.isAllowExcute=function(k,V){if(this.isAllowStep(k)){var X=this.getKey(k,V);return V.once&&this.emitCaches[X]?!1:V.isEnable?V.isEnable(this.context):!0}return!1},O.prototype.enterStep=function(k){this.currentStepName=k,this.emitCaches={}},O.prototype.afterExecute=function(k,V){k!==A.SHOW_ENABLE&&this.currentStepName!==k&&this.enterStep(k);var X=this.getKey(k,V);this.emitCaches[X]=!0},O.prototype.getKey=function(k,V){return k+V.trigger+V.action},O.prototype.getActionCallback=function(k,V){var X=this,K=this.context,q=this.callbackCaches,ct=V.actionObject;if(V.action&&ct){var _t=this.getKey(k,V);if(!q[_t]){var yt=function(lt){K.event=lt,X.isAllowExcute(k,V)?(y.isArray(ct)?y.each(ct,function(Lt){K.event=lt,N(Lt)}):(K.event=lt,N(ct)),X.afterExecute(k,V),V.callback&&(K.event=lt,V.callback(K))):K.event=null};V.debounce?q[_t]=y.debounce(yt,V.debounce.wait,V.debounce.immediate):V.throttle?q[_t]=y.throttle(yt,V.throttle.wait,{leading:V.throttle.leading,trailing:V.throttle.trailing}):q[_t]=yt}return q[_t]}return null},O.prototype.bindEvent=function(k,V){var X=k.split(":");X[0]==="window"?window.addEventListener(X[1],V):X[0]==="document"?document.addEventListener(X[1],V):this.view.on(k,V)},O.prototype.offEvent=function(k,V){var X=k.split(":");X[0]==="window"?window.removeEventListener(X[1],V):X[0]==="document"?document.removeEventListener(X[1],V):this.view.off(k,V)},O}(B.default);T=D},91513:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(){function T(j,y){this.view=j,this.cfg=y}return T.prototype.init=function(){this.initEvents()},T.prototype.initEvents=function(){},T.prototype.clearEvents=function(){},T.prototype.destroy=function(){this.clearEvents()},T}();P.default=S},85800:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.toPoints=P.getRegionBBox=P.BBox=void 0;var T=S(49242),j=S(29583),y=function(){function F(B,R,N,A){B===void 0&&(B=0),R===void 0&&(R=0),N===void 0&&(N=0),A===void 0&&(A=0),this.x=B,this.y=R,this.height=A,this.width=N}return F.fromRange=function(B,R,N,A){return new F(B,R,N-B,A-R)},Object.defineProperty(F.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),F.prototype.isEqual=function(B){return this.x===B.x&&this.y===B.y&&this.width===B.width&&this.height===B.height},F.prototype.clone=function(){return new F(this.x,this.y,this.width,this.height)},F.prototype.add=function(){for(var B=[],R=0;R<arguments.length;R++)B[R]=arguments[R];var N=this.clone();return T.each(B,function(A){N.x=Math.min(A.x,N.x),N.y=Math.min(A.y,N.y),N.width=Math.max(A.maxX,N.maxX)-N.x,N.height=Math.max(A.maxY,N.maxY)-N.y}),N},F.prototype.merge=function(){for(var B=[],R=0;R<arguments.length;R++)B[R]=arguments[R];var N=this.clone();return T.each(B,function(A){N.x=Math.max(A.x,N.x),N.y=Math.max(A.y,N.y),N.width=Math.min(A.maxX,N.maxX)-N.x,N.height=Math.min(A.maxY,N.maxY)-N.y}),N},F.prototype.cut=function(B,R){var N=B.width,A=B.height;switch(R){case j.DIRECTION.TOP:case j.DIRECTION.TOP_LEFT:case j.DIRECTION.TOP_RIGHT:return F.fromRange(this.minX,this.minY+A,this.maxX,this.maxY);case j.DIRECTION.RIGHT:case j.DIRECTION.RIGHT_TOP:case j.DIRECTION.RIGHT_BOTTOM:return F.fromRange(this.minX,this.minY,this.maxX-N,this.maxY);case j.DIRECTION.BOTTOM:case j.DIRECTION.BOTTOM_LEFT:case j.DIRECTION.BOTTOM_RIGHT:return F.fromRange(this.minX,this.minY,this.maxX,this.maxY-A);case j.DIRECTION.LEFT:case j.DIRECTION.LEFT_TOP:case j.DIRECTION.LEFT_BOTTOM:return F.fromRange(this.minX+N,this.minY,this.maxX,this.maxY);default:return this}},F.prototype.shrink=function(B){var R=B[0],N=B[1],A=B[2],D=B[3];return new F(this.x+D,this.y+R,this.width-D-N,this.height-R-A)},F.prototype.exceed=function(B){return[Math.max(-this.minY+B.minY,0),Math.max(this.maxX-B.maxX,0),Math.max(this.maxY-B.maxY,0),Math.max(-this.minX+B.minX,0)]},F.prototype.size=function(){return this.width*this.height},F}();P.BBox=y,P.getRegionBBox=function(F,B){var R=B.start,N=B.end;return new y(F.x+F.width*R.x,F.y+F.height*R.y,F.width*Math.abs(N.x-R.x),F.height*Math.abs(N.y-R.y))};function U(F){return[[F.minX,F.minY],[F.maxX,F.minY],[F.maxX,F.maxY],[F.minX,F.maxY]]}P.toPoints=U},22514:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getCoordinateClipCfg=P.getAngleByPoint=P.isPointInCoordinate=P.getDistanceToCenter=P.isFullCircle=P.getXDimensionLength=void 0;var T=S(42770),j=S(86630);function y(A){if(A.isPolar&&!A.isTransposed)return(A.endAngle-A.startAngle)*A.getRadius();var D=A.convert({x:0,y:0}),M=A.convert({x:1,y:0});return Math.sqrt(Math.pow(M.x-D.x,2)+Math.pow(M.y-D.y,2))}P.getXDimensionLength=y;function U(A){if(A.isPolar){var D=A.startAngle,M=A.endAngle;return M-D==Math.PI*2}return!1}P.isFullCircle=U;function F(A,D){var M=A.getCenter();return Math.sqrt(Math.pow(D.x-M.x,2)+Math.pow(D.y-M.y,2))}P.getDistanceToCenter=F;function B(A,D){var M=!1;if(A)if(A.type==="theta"){var O=A.start,k=A.end;M=j.isBetween(D.x,O.x,k.x)&&j.isBetween(D.y,O.y,k.y)}else{var V=A.invert(D);M=j.isBetween(V.x,0,1)&&j.isBetween(V.y,0,1)}return M}P.isPointInCoordinate=B;function R(A,D){var M=A.getCenter();return Math.atan2(D.y-M.y,D.x-M.x)}P.getAngleByPoint=R;function N(A,D){D===void 0&&(D=0);var M=A.start,O=A.end,k=A.getWidth(),V=A.getHeight();if(A.isPolar){var X=A.startAngle,K=A.endAngle,q=A.getCenter(),ct=A.getRadius();return{type:"path",startState:{path:T.getSectorPath(q.x,q.y,ct+D,X,X)},endState:function(yt){var lt=(K-X)*yt+X,Lt=T.getSectorPath(q.x,q.y,ct+D,X,lt);return{path:Lt}},attrs:{path:T.getSectorPath(q.x,q.y,ct+D,X,K)}}}var _t;return A.isTransposed?_t={height:V+D*2}:_t={width:k+D*2},{type:"rect",startState:{x:M.x-D,y:O.y-D,width:A.isTransposed?k+D*2:0,height:A.isTransposed?0:V+D*2},endState:_t,attrs:{x:M.x-D,y:O.y-D,width:k+D*2,height:V+D*2}}}P.getCoordinateClipCfg=N},42770:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getReplaceAttrs=P.getPolygonCentroid=P.getAngle=P.getArcPath=P.getSectorPath=P.polarToCartesian=void 0;var T=S(49242);function j(A){if(T.isEmpty(A))return null;var D=A[0].x,M=A[0].x,O=A[0].y,k=A[0].y;return T.each(A,function(V){D=D>V.x?V.x:D,M=M<V.x?V.x:M,O=O>V.y?V.y:O,k=k<V.y?V.y:k}),{minX:D,maxX:M,minY:O,maxY:k,centerX:(D+M)/2,centerY:(O+k)/2}}function y(A,D,M,O){return{x:A+M*Math.cos(O),y:D+M*Math.sin(O)}}P.polarToCartesian=y;function U(A,D,M,O,k,V){V===void 0&&(V=0);var X=y(A,D,M,O),K=y(A,D,M,k),q=y(A,D,V,O),ct=y(A,D,V,k);if(k-O==Math.PI*2){var _t=y(A,D,M,O+Math.PI),yt=y(A,D,V,O+Math.PI),lt=[["M",X.x,X.y],["A",M,M,0,1,1,_t.x,_t.y],["A",M,M,0,1,1,K.x,K.y],["M",q.x,q.y]];return V&&(lt.push(["A",V,V,0,1,0,yt.x,yt.y]),lt.push(["A",V,V,0,1,0,ct.x,ct.y])),lt.push(["M",X.x,X.y]),lt.push(["Z"]),lt}var Lt=k-O<=Math.PI?0:1,wt=[["M",X.x,X.y],["A",M,M,0,Lt,1,K.x,K.y],["L",ct.x,ct.y]];return V&&wt.push(["A",V,V,0,Lt,0,q.x,q.y]),wt.push(["L",X.x,X.y]),wt.push(["Z"]),wt}P.getSectorPath=U;function F(A,D,M,O,k){var V=y(A,D,M,O),X=y(A,D,M,k);if(T.isNumberEqual(k-O,Math.PI*2)){var K=y(A,D,M,O+Math.PI);return[["M",V.x,V.y],["A",M,M,0,1,1,K.x,K.y],["A",M,M,0,1,1,V.x,V.y],["A",M,M,0,1,0,K.x,K.y],["A",M,M,0,1,0,V.x,V.y],["Z"]]}var q=k-O<=Math.PI?0:1;return[["M",V.x,V.y],["A",M,M,0,q,1,X.x,X.y]]}P.getArcPath=F;function B(A,D){var M=A.points,O=j(M),k,V,X=D.startAngle,K=D.endAngle,q=K-X;return D.isTransposed?(k=O.maxY*q,V=O.minY*q):(k=O.maxX*q,V=O.minX*q),k+=X,V+=X,{startAngle:V,endAngle:k}}P.getAngle=B;function R(A,D){if(T.isNumber(A)&&T.isNumber(D))return[A,D];for(var M=-1,O=0,k=0,V,X=A.length-1,K,q=0;++M<A.length;)V=X,X=M,q+=K=A[V]*D[X]-A[X]*D[V],O+=(A[V]+A[X])*K,k+=(D[V]+D[X])*K;return q*=3,[O/q,k/q]}P.getPolygonCentroid=R;function N(A,D){var M=A.attr(),O=D.attr();return T.each(M,function(k,V){O[V]===void 0&&(O[V]=void 0)}),O}P.getReplaceAttrs=N},86630:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.uniq=P.omit=P.padEnd=P.isBetween=void 0;var T=S(49242);function j(B,R,N){var A=Math.min(R,N),D=Math.max(R,N);return B>=A&&B<=D}P.isBetween=j;function y(B,R,N){if(T.isString(B))return B.padEnd(R,N);if(T.isArray(B)){var A=B.length;if(A<R)for(var D=R-A,M=0;M<D;M++)B.push(N)}return B}P.padEnd=y;function U(B,R){return R.forEach(function(N){delete B[N]}),B}P.omit=U;function F(B,R,N){R===void 0&&(R=[]),N===void 0&&(N={});for(var A=0,D=B;A<D.length;A++){var M=D[A];N[M]||(R.push(M),N[M]=!0)}return R}P.uniq=F},6750:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.MarkerSymbols=void 0,P.MarkerSymbols={hexagon:function(S,T,j){var y=j/2*Math.sqrt(3);return[["M",S,T-j],["L",S+y,T-j/2],["L",S+y,T+j/2],["L",S,T+j],["L",S-y,T+j/2],["L",S-y,T-j/2],["Z"]]},bowtie:function(S,T,j){var y=j-1.5;return[["M",S-j,T-y],["L",S+j,T+y],["L",S+j,T-y],["L",S-j,T+y],["Z"]]},cross:function(S,T,j){return[["M",S-j,T-j],["L",S+j,T+j],["M",S+j,T-j],["L",S-j,T+j]]},tick:function(S,T,j){return[["M",S-j/2,T-j],["L",S+j/2,T-j],["M",S,T-j],["L",S,T+j],["M",S-j/2,T+j],["L",S+j/2,T+j]]},plus:function(S,T,j){return[["M",S-j,T],["L",S+j,T],["M",S,T-j],["L",S,T+j]]},hyphen:function(S,T,j){return[["M",S-j,T],["L",S+j,T]]},line:function(S,T,j){return[["M",S,T-j],["L",S,T+j]]}}},16854:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getName=P.syncScale=P.createScaleByField=void 0;var T=S(60517),j=S(49242),y=S(57029),U=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function F(A){var D="linear";return U.test(A)?D="time":j.isString(A)&&(D="cat"),D}function B(A,D,M){var O=D||[];if(j.isNumber(A)||j.isNil(j.firstValue(O,A))&&j.isEmpty(M)){var k=y.getScale("identity");return new k({field:A.toString(),values:[A]})}var V=j.valuesOfKey(O,A),X=j.get(M,"type",F(V[0])),K=y.getScale(X);return new K(T.__assign({field:A,values:V},M))}P.createScaleByField=B;function R(A,D){if(A.type!=="identity"&&D.type!=="identity"){var M={};for(var O in D)Object.prototype.hasOwnProperty.call(D,O)&&(M[O]=D[O]);A.change(M)}}P.syncScale=R;function N(A){return A.alias||A.field}P.getName=N},99677:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getTooltipItems=P.findDataByPoint=void 0;var T=S(60517),j=S(49242),y=S(29583),U=S(16854);function F(K,q,ct){var _t=ct.translate(K),yt=ct.translate(q);return j.isNumberEqual(_t,yt)}function B(K,q){var ct=q.coordinate,_t=q.getXScale(),yt=_t.range,lt=yt[yt.length-1],Lt=yt[0],wt=ct.invert(K),Gt=wt.x;return ct.isPolar&&Gt>(1+lt)/2&&(Gt=Lt),_t.translate(_t.invert(Gt))}function R(K,q,ct){var _t=ct.coordinate,yt=ct.getYScale(),lt=yt.field,Lt=_t.invert(q),wt=yt.invert(Lt.y),Gt=j.find(K,function(re){var Qt=re[y.FIELD_ORIGIN];return Qt[lt][0]<=wt&&Qt[lt][1]>=wt});return Gt||K[K.length-1]}var N=j.memoize(function(K){if(K.isCategory)return 1;for(var q=K.values,ct=q.length,_t=K.translate(q[0]),yt=_t,lt=0;lt<ct;lt++){var Lt=q[lt],wt=K.translate(Lt);wt<_t&&(_t=wt),wt>yt&&(yt=wt)}return(yt-_t)/(ct-1)});function A(K,q,ct){var _t=ct;if(!ct){var yt=q.getAttribute("position"),lt=yt.getFields();_t=lt[0]}var Lt=q.scales;return Lt[_t]?Lt[_t].getText(K[_t]):j.hasKey(K,_t)?K[_t]:_t}function D(K){var q=j.values(K.attributes);return j.filter(q,function(ct){return j.contains(y.GROUP_ATTRS,ct.type)})}function M(K){for(var q=D(K),ct,_t=0,yt=q;_t<yt.length;_t++){var lt=yt[_t],Lt=lt.getScale(lt.type);if(Lt&&Lt.isLinear){ct=Lt;break}}var wt=K.getXScale(),Gt=K.getYScale();return ct||Gt||wt}function O(K,q){var ct=q.field,_t=K[ct];if(j.isArray(_t)){var yt=_t.map(function(lt){return q.getText(lt)});return yt.join("-")}return q.getText(_t)}function k(K,q){var ct,_t=q.getGroupScales();if(_t.length&&(ct=_t[0]),ct){var yt=ct.field;return ct.getText(K[yt])}var lt=M(q);return U.getName(lt)}function V(K,q,ct){if(q.length===0)return null;var _t=ct.type,yt=ct.getXScale(),lt=ct.getYScale(),Lt=yt.field,wt=lt.field,Gt=null;if(_t==="heatmap"||_t==="point"){for(var re=ct.coordinate,Qt=re.invert(K),it=yt.invert(Qt.x),dt=lt.invert(Qt.y),gt=Infinity,vt=0;vt<q.length;vt++){var Y=q[vt],ot=Y[y.FIELD_ORIGIN],nt=Math.pow(ot[Lt]-it,2)+Math.pow(ot[wt]-dt,2);nt<gt&&(gt=nt,Gt=Y)}return Gt}var rt=q[0],st=q[q.length-1],d=B(K,ct),It=rt[y.FIELD_ORIGIN][Lt],Ht=rt[y.FIELD_ORIGIN][wt],kt=st[y.FIELD_ORIGIN][Lt],Xt=lt.isLinear&&j.isArray(Ht);if(j.isArray(It)){for(var vt=0;vt<q.length;vt++){var Kt=q[vt],ot=Kt[y.FIELD_ORIGIN];if(yt.translate(ot[Lt][0])<=d&&yt.translate(ot[Lt][1])>=d)if(Xt)j.isArray(Gt)||(Gt=[]),Gt.push(Kt);else{Gt=Kt;break}}j.isArray(Gt)&&(Gt=R(Gt,K,ct))}else{var Jt=void 0;if(!yt.isLinear&&yt.type!=="timeCat"){for(var vt=0;vt<q.length;vt++){var Kt=q[vt],ot=Kt[y.FIELD_ORIGIN];if(F(ot[Lt],d,yt))if(Xt)j.isArray(Gt)||(Gt=[]),Gt.push(Kt);else{Gt=Kt;break}else yt.translate(ot[Lt])<=d&&(st=Kt,Jt=q[vt+1])}j.isArray(Gt)&&(Gt=R(Gt,K,ct))}else{if((d>yt.translate(kt)||d<yt.translate(It))&&(d>yt.max||d<yt.min))return null;for(var ue=0,ce=q.length-1,$t=void 0;ue<=ce;){$t=Math.floor((ue+ce)/2);var Ut=q[$t][y.FIELD_ORIGIN][Lt];if(F(Ut,d,yt))return q[$t];yt.translate(Ut)<=yt.translate(d)?(ue=$t+1,st=q[$t],Jt=q[$t+1]):(ce===0&&(st=q[0]),ce=$t-1)}}st&&Jt&&Math.abs(yt.translate(st[y.FIELD_ORIGIN][Lt])-d)>Math.abs(yt.translate(Jt[y.FIELD_ORIGIN][Lt])-d)&&(st=Jt)}var Rt=N(ct.getXScale());return!Gt&&Math.abs(yt.translate(st[y.FIELD_ORIGIN][Lt])-d)<=Rt/2&&(Gt=st),Gt}P.findDataByPoint=V;function X(K,q,ct){ct===void 0&&(ct="");var _t=K[y.FIELD_ORIGIN],yt=A(_t,q,ct),lt=q.tooltipOption,Lt=q.theme.defaultColor,wt=[],Gt,re;function Qt(Ht,kt){if(!j.isNil(kt)&&kt!==""){var Xt={title:yt,data:_t,mappingData:K,name:Ht,value:kt,color:K.color||Lt,marker:!0};wt.push(Xt)}}if(j.isObject(lt)){var it=lt.fields,dt=lt.callback;if(dt){var gt=it.map(function(Ht){return K[y.FIELD_ORIGIN][Ht]}),vt=dt.apply(void 0,gt),Y=T.__assign({data:K[y.FIELD_ORIGIN],mappingData:K,title:yt,color:K.color||Lt,marker:!0},vt);wt.push(Y)}else for(var ot=q.scales,nt=0,rt=it;nt<rt.length;nt++){var st=rt[nt];if(!j.isNil(_t[st])){var d=ot[st];Gt=U.getName(d),re=d.getText(_t[st]),Qt(Gt,re)}}}else{var It=M(q);j.isNil(_t[It.field])||(re=O(_t,It),Gt=k(_t,q),Qt(Gt,re))}return wt}P.getTooltipItems=X},60517:function(Vt,P,S){"use strict";S.r(P),S.d(P,{__extends:function(){return j},__assign:function(){return y},__rest:function(){return U},__decorate:function(){return F},__param:function(){return B},__metadata:function(){return R},__awaiter:function(){return N},__generator:function(){return A},__createBinding:function(){return D},__exportStar:function(){return M},__values:function(){return O},__read:function(){return k},__spread:function(){return V},__spreadArrays:function(){return X},__spreadArray:function(){return K},__await:function(){return q},__asyncGenerator:function(){return ct},__asyncDelegator:function(){return _t},__asyncValues:function(){return yt},__makeTemplateObject:function(){return lt},__importStar:function(){return wt},__importDefault:function(){return Gt},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return Qt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(it,dt){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var Y in vt)Object.prototype.hasOwnProperty.call(vt,Y)&&(gt[Y]=vt[Y])},T(it,dt)};function j(it,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");T(it,dt);function gt(){this.constructor=it}it.prototype=dt===null?Object.create(dt):(gt.prototype=dt.prototype,new gt)}var y=function(){return y=Object.assign||function(dt){for(var gt,vt=1,Y=arguments.length;vt<Y;vt++){gt=arguments[vt];for(var ot in gt)Object.prototype.hasOwnProperty.call(gt,ot)&&(dt[ot]=gt[ot])}return dt},y.apply(this,arguments)};function U(it,dt){var gt={};for(var vt in it)Object.prototype.hasOwnProperty.call(it,vt)&&dt.indexOf(vt)<0&&(gt[vt]=it[vt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,vt=Object.getOwnPropertySymbols(it);Y<vt.length;Y++)dt.indexOf(vt[Y])<0&&Object.prototype.propertyIsEnumerable.call(it,vt[Y])&&(gt[vt[Y]]=it[vt[Y]]);return gt}function F(it,dt,gt,vt){var Y=arguments.length,ot=Y<3?dt:vt===null?vt=Object.getOwnPropertyDescriptor(dt,gt):vt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,dt,gt,vt);else for(var rt=it.length-1;rt>=0;rt--)(nt=it[rt])&&(ot=(Y<3?nt(ot):Y>3?nt(dt,gt,ot):nt(dt,gt))||ot);return Y>3&&ot&&Object.defineProperty(dt,gt,ot),ot}function B(it,dt){return function(gt,vt){dt(gt,vt,it)}}function R(it,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,dt)}function N(it,dt,gt,vt){function Y(ot){return ot instanceof gt?ot:new gt(function(nt){nt(ot)})}return new(gt||(gt=Promise))(function(ot,nt){function rt(It){try{d(vt.next(It))}catch(Ht){nt(Ht)}}function st(It){try{d(vt.throw(It))}catch(Ht){nt(Ht)}}function d(It){It.done?ot(It.value):Y(It.value).then(rt,st)}d((vt=vt.apply(it,dt||[])).next())})}function A(it,dt){var gt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},vt,Y,ot,nt;return nt={next:rt(0),throw:rt(1),return:rt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function rt(d){return function(It){return st([d,It])}}function st(d){if(vt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(vt=1,Y&&(ot=d[0]&2?Y.return:d[0]?Y.throw||((ot=Y.return)&&ot.call(Y),0):Y.next)&&!(ot=ot.call(Y,d[1])).done)return ot;switch(Y=0,ot&&(d=[d[0]&2,ot.value]),d[0]){case 0:case 1:ot=d;break;case 4:return gt.label++,{value:d[1],done:!1};case 5:gt.label++,Y=d[1],d=[0];continue;case 7:d=gt.ops.pop(),gt.trys.pop();continue;default:if(ot=gt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(d[0]===6||d[0]===2)){gt=0;continue}if(d[0]===3&&(!ot||d[1]>ot[0]&&d[1]<ot[3])){gt.label=d[1];break}if(d[0]===6&&gt.label<ot[1]){gt.label=ot[1],ot=d;break}if(ot&&gt.label<ot[2]){gt.label=ot[2],gt.ops.push(d);break}ot[2]&&gt.ops.pop(),gt.trys.pop();continue}d=dt.call(it,gt)}catch(It){d=[6,It],Y=0}finally{vt=ot=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var D=Object.create?function(it,dt,gt,vt){vt===void 0&&(vt=gt),Object.defineProperty(it,vt,{enumerable:!0,get:function(){return dt[gt]}})}:function(it,dt,gt,vt){vt===void 0&&(vt=gt),it[vt]=dt[gt]};function M(it,dt){for(var gt in it)gt!=="default"&&!Object.prototype.hasOwnProperty.call(dt,gt)&&D(dt,it,gt)}function O(it){var dt=typeof Symbol=="function"&&Symbol.iterator,gt=dt&&it[dt],vt=0;if(gt)return gt.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&vt>=it.length&&(it=void 0),{value:it&&it[vt++],done:!it}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(it,dt){var gt=typeof Symbol=="function"&&it[Symbol.iterator];if(!gt)return it;var vt=gt.call(it),Y,ot=[],nt;try{for(;(dt===void 0||dt-- >0)&&!(Y=vt.next()).done;)ot.push(Y.value)}catch(rt){nt={error:rt}}finally{try{Y&&!Y.done&&(gt=vt.return)&&gt.call(vt)}finally{if(nt)throw nt.error}}return ot}function V(){for(var it=[],dt=0;dt<arguments.length;dt++)it=it.concat(k(arguments[dt]));return it}function X(){for(var it=0,dt=0,gt=arguments.length;dt<gt;dt++)it+=arguments[dt].length;for(var vt=Array(it),Y=0,dt=0;dt<gt;dt++)for(var ot=arguments[dt],nt=0,rt=ot.length;nt<rt;nt++,Y++)vt[Y]=ot[nt];return vt}function K(it,dt,gt){if(gt||arguments.length===2)for(var vt=0,Y=dt.length,ot;vt<Y;vt++)(ot||!(vt in dt))&&(ot||(ot=Array.prototype.slice.call(dt,0,vt)),ot[vt]=dt[vt]);return it.concat(ot||Array.prototype.slice.call(dt))}function q(it){return this instanceof q?(this.v=it,this):new q(it)}function ct(it,dt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=gt.apply(it,dt||[]),Y,ot=[];return Y={},nt("next"),nt("throw"),nt("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function nt(kt){vt[kt]&&(Y[kt]=function(Xt){return new Promise(function(Kt,Jt){ot.push([kt,Xt,Kt,Jt])>1||rt(kt,Xt)})})}function rt(kt,Xt){try{st(vt[kt](Xt))}catch(Kt){Ht(ot[0][3],Kt)}}function st(kt){kt.value instanceof q?Promise.resolve(kt.value.v).then(d,It):Ht(ot[0][2],kt)}function d(kt){rt("next",kt)}function It(kt){rt("throw",kt)}function Ht(kt,Xt){kt(Xt),ot.shift(),ot.length&&rt(ot[0][0],ot[0][1])}}function _t(it){var dt,gt;return dt={},vt("next"),vt("throw",function(Y){throw Y}),vt("return"),dt[Symbol.iterator]=function(){return this},dt;function vt(Y,ot){dt[Y]=it[Y]?function(nt){return(gt=!gt)?{value:q(it[Y](nt)),done:Y==="return"}:ot?ot(nt):nt}:ot}}function yt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it[Symbol.asyncIterator],gt;return dt?dt.call(it):(it=typeof O=="function"?O(it):it[Symbol.iterator](),gt={},vt("next"),vt("throw"),vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function vt(ot){gt[ot]=it[ot]&&function(nt){return new Promise(function(rt,st){nt=it[ot](nt),Y(rt,st,nt.done,nt.value)})}}function Y(ot,nt,rt,st){Promise.resolve(st).then(function(d){ot({value:d,done:rt})},nt)}}function lt(it,dt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:dt}):it.raw=dt,it}var Lt=Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt};function wt(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var gt in it)gt!=="default"&&Object.prototype.hasOwnProperty.call(it,gt)&&D(dt,it,gt);return Lt(dt,it),dt}function Gt(it){return it&&it.__esModule?it:{default:it}}function re(it,dt,gt,vt){if(gt==="a"&&!vt)throw new TypeError("Private accessor was defined without a getter");if(typeof dt=="function"?it!==dt||!vt:!dt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?vt:gt==="a"?vt.call(it):vt?vt.value:dt.get(it)}function Qt(it,dt,gt,vt,Y){if(vt==="m")throw new TypeError("Private method is not writable");if(vt==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof dt=="function"?it!==dt||!Y:!dt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return vt==="a"?Y.call(it,gt):Y?Y.value=gt:dt.set(it,gt),gt}},95365:function(Vt,P,S){"use strict";var T=S(37050),j=S(90494),y=S(30219),U=function(F){(0,T.ZT)(B,F);function B(R){var N=F.call(this)||this;N.destroyed=!1;var A=N.getDefaultCfg();return N.cfg=(0,y.CD)(A,R),N}return B.prototype.getDefaultCfg=function(){return{}},B.prototype.get=function(R){return this.cfg[R]},B.prototype.set=function(R,N){this.cfg[R]=N},B.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},B}(j.default);P.Z=U},13658:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return ot}});var T=S(37050),j=S(43631),y=S(29598),U=S(30219),F=S(49242),B=S(35374),R=S(13681),N=S(26257),A=S(88122),D=S(24699),M=function(nt){return["fill","stroke","fillStyle","strokeStyle"].includes(nt)},O=function(nt){return/^[r,R,L,l]{1}[\s]*\(/.test(nt)},k=[1,0,0,0,1,0,0,0,1];function V(nt,rt,st){var d={},It=rt.fromAttrs,Ht=rt.toAttrs;if(!nt.destroyed){var kt;for(var Xt in Ht)if(!(0,F.isEqual)(It[Xt],Ht[Xt]))if(Xt==="path"){var Kt=Ht[Xt],Jt=It[Xt];Kt.length>Jt.length?(Kt=D.parsePathString(Ht[Xt]),Jt=D.parsePathString(It[Xt]),Jt=D.fillPathByDiff(Jt,Kt),Jt=D.formatPath(Jt,Kt),rt.fromAttrs.path=Jt,rt.toAttrs.path=Kt):rt.pathFormatted||(Kt=D.parsePathString(Ht[Xt]),Jt=D.parsePathString(It[Xt]),Jt=D.formatPath(Jt,Kt),rt.fromAttrs.path=Jt,rt.toAttrs.path=Kt,rt.pathFormatted=!0),d[Xt]=[];for(var ue=0;ue<Kt.length;ue++){for(var ce=Kt[ue],$t=Jt[ue],Ut=[],Rt=0;Rt<ce.length;Rt++)(0,F.isNumber)(ce[Rt])&&$t&&(0,F.isNumber)($t[Rt])?(kt=(0,N.Z)($t[Rt],ce[Rt]),Ut.push(kt(st))):Ut.push(ce[Rt]);d[Xt].push(Ut)}}else if(Xt==="matrix"){var Pt=(0,A.Z)(It[Xt]||k,Ht[Xt]||k),Yt=Pt(st);d[Xt]=Yt}else M(Xt)&&O(Ht[Xt])?d[Xt]=Ht[Xt]:(0,F.isFunction)(Ht[Xt])||(kt=(0,N.Z)(It[Xt],Ht[Xt]),d[Xt]=kt(st));nt.attr(d)}}function X(nt,rt,st){var d=rt.startTime,It=rt.delay;if(st<d+It||rt._paused)return!1;var Ht,kt=rt.duration,Xt=rt.easing;if(st=st-d-rt.delay,rt.repeat)Ht=st%kt/kt,Ht=R[Xt](Ht);else if(Ht=st/kt,Ht<1)Ht=R[Xt](Ht);else return rt.onFrame?nt.attr(rt.onFrame(1)):nt.attr(rt.toAttrs),!0;if(rt.onFrame){var Kt=rt.onFrame(Ht);nt.attr(Kt)}else V(nt,rt,Ht);return!1}var K=function(){function nt(rt){this.animators=[],this.current=0,this.timer=null,this.canvas=rt}return nt.prototype.initTimer=function(){var rt=this,st=!1,d,It,Ht;this.timer=B.HT(function(kt){if(rt.current=kt,rt.animators.length>0){for(var Xt=rt.animators.length-1;Xt>=0;Xt--){if(d=rt.animators[Xt],d.destroyed){rt.removeAnimator(Xt);continue}if(!d.isAnimatePaused()){It=d.get("animations");for(var Kt=It.length-1;Kt>=0;Kt--)Ht=It[Kt],st=X(d,Ht,kt),st&&(It.splice(Kt,1),st=!1,Ht.callback&&Ht.callback())}It.length===0&&rt.removeAnimator(Xt)}var Jt=rt.canvas.get("autoDraw");Jt||rt.canvas.draw()}})},nt.prototype.addAnimator=function(rt){this.animators.push(rt)},nt.prototype.removeAnimator=function(rt){this.animators.splice(rt,1)},nt.prototype.isAnimating=function(){return!!this.animators.length},nt.prototype.stop=function(){this.timer&&this.timer.stop()},nt.prototype.stopAllAnimations=function(rt){rt===void 0&&(rt=!0),this.animators.forEach(function(st){st.stopAnimate(rt)}),this.animators=[],this.canvas.draw()},nt.prototype.getTime=function(){return this.current},nt}(),q=K,ct=S(76615),_t=40,yt=0,lt=":",Lt=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function wt(nt,rt){for(var st in nt)if(nt.hasOwnProperty(st)&&st.indexOf(lt+rt)>=0)return!0;return!1}function Gt(nt,rt,st){st.name=rt,st.target=nt,st.currentTarget=nt,st.delegateTarget=nt,nt.emit(rt,st)}function re(nt,rt,st){if(st.bubbles){var d=void 0,It=!1;if(rt==="mouseenter"?(d=st.fromShape,It=!0):rt==="mouseleave"&&(It=!0,d=st.toShape),nt.isCanvas()&&It)return;if(d&&(0,U.UY)(nt,d)){st.bubbles=!1;return}st.name=rt,st.currentTarget=nt,st.delegateTarget=nt,nt.emit(rt,st)}}var Qt=function(){function nt(rt){var st=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(d){var It=d.type;st._triggerEvent(It,d)},this._onDocumentMove=function(d){var It=st.canvas,Ht=It.get("el");if(Ht!==d.target&&(st.dragging||st.currentShape)){var kt=st._getPointInfo(d);st.dragging&&st._emitEvent("drag",d,kt,st.draggingShape)}},this._onDocumentMouseUp=function(d){var It=st.canvas,Ht=It.get("el");if(Ht!==d.target&&st.dragging){var kt=st._getPointInfo(d);st.draggingShape&&st._emitEvent("drop",d,kt,null),st._emitEvent("dragend",d,kt,st.draggingShape),st._afterDrag(st.draggingShape,kt,d)}},this.canvas=rt.canvas}return nt.prototype.init=function(){this._bindEvents()},nt.prototype._bindEvents=function(){var rt=this,st=this.canvas.get("el");(0,U.S6)(Lt,function(d){st.addEventListener(d,rt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},nt.prototype._clearEvents=function(){var rt=this,st=this.canvas.get("el");(0,U.S6)(Lt,function(d){st.removeEventListener(d,rt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},nt.prototype._getEventObj=function(rt,st,d,It,Ht,kt){var Xt=new ct.Z(rt,st);return Xt.fromShape=Ht,Xt.toShape=kt,Xt.x=d.x,Xt.y=d.y,Xt.clientX=d.clientX,Xt.clientY=d.clientY,Xt.propagationPath.push(It),Xt},nt.prototype._getShape=function(rt,st){return this.canvas.getShape(rt.x,rt.y,st)},nt.prototype._getPointInfo=function(rt){var st=this.canvas,d=st.getClientByEvent(rt),It=st.getPointByEvent(rt);return{x:It.x,y:It.y,clientX:d.x,clientY:d.y}},nt.prototype._triggerEvent=function(rt,st){var d=this._getPointInfo(st),It=this._getShape(d,st),Ht=this["_on"+rt],kt=!1;if(Ht)Ht.call(this,d,It,st);else{var Xt=this.currentShape;rt==="mouseenter"||rt==="dragenter"||rt==="mouseover"?(this._emitEvent(rt,st,d,null,null,It),It&&this._emitEvent(rt,st,d,It,null,It),rt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",st,d,null)):rt==="mouseleave"||rt==="dragleave"||rt==="mouseout"?(kt=!0,Xt&&this._emitEvent(rt,st,d,Xt,Xt,null),this._emitEvent(rt,st,d,null,Xt,null),rt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",st,d,null)):this._emitEvent(rt,st,d,It,null,null)}if(kt||(this.currentShape=It),It&&!It.get("destroyed")){var Kt=this.canvas,Jt=Kt.get("el");Jt.style.cursor=It.attr("cursor")||Kt.get("cursor")}},nt.prototype._onmousedown=function(rt,st,d){d.button===yt&&(this.mousedownShape=st,this.mousedownPoint=rt,this.mousedownTimeStamp=d.timeStamp),this._emitEvent("mousedown",d,rt,st,null,null)},nt.prototype._emitMouseoverEvents=function(rt,st,d,It){var Ht=this.canvas.get("el");d!==It&&(d&&(this._emitEvent("mouseout",rt,st,d,d,It),this._emitEvent("mouseleave",rt,st,d,d,It),(!It||It.get("destroyed"))&&(Ht.style.cursor=this.canvas.get("cursor"))),It&&(this._emitEvent("mouseover",rt,st,It,d,It),this._emitEvent("mouseenter",rt,st,It,d,It)))},nt.prototype._emitDragoverEvents=function(rt,st,d,It,Ht){It?(It!==d&&(d&&this._emitEvent("dragleave",rt,st,d,d,It),this._emitEvent("dragenter",rt,st,It,d,It)),Ht||this._emitEvent("dragover",rt,st,It)):d&&this._emitEvent("dragleave",rt,st,d,d,It),Ht&&this._emitEvent("dragover",rt,st,It)},nt.prototype._afterDrag=function(rt,st,d){rt&&(rt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var It=this._getShape(st,d);It!==rt&&this._emitMouseoverEvents(d,st,rt,It),this.currentShape=It},nt.prototype._onmouseup=function(rt,st,d){if(d.button===yt){var It=this.draggingShape;this.dragging?(It&&this._emitEvent("drop",d,rt,st),this._emitEvent("dragend",d,rt,It),this._afterDrag(It,rt,d)):(this._emitEvent("mouseup",d,rt,st),st===this.mousedownShape&&this._emitEvent("click",d,rt,st),this.mousedownShape=null,this.mousedownPoint=null)}},nt.prototype._ondragover=function(rt,st,d){d.preventDefault();var It=this.currentShape;this._emitDragoverEvents(d,rt,It,st,!0)},nt.prototype._onmousemove=function(rt,st,d){var It=this.canvas,Ht=this.currentShape,kt=this.draggingShape;if(this.dragging)kt&&this._emitDragoverEvents(d,rt,Ht,st,!1),this._emitEvent("drag",d,rt,kt);else{var Xt=this.mousedownPoint;if(Xt){var Kt=this.mousedownShape,Jt=d.timeStamp,ue=Jt-this.mousedownTimeStamp,ce=Xt.clientX-rt.clientX,$t=Xt.clientY-rt.clientY,Ut=ce*ce+$t*$t;ue>120||Ut>_t?Kt&&Kt.get("draggable")?(kt=this.mousedownShape,kt.set("capture",!1),this.draggingShape=kt,this.dragging=!0,this._emitEvent("dragstart",d,rt,kt),this.mousedownShape=null,this.mousedownPoint=null):!Kt&&It.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",d,rt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(d,rt,Ht,st),this._emitEvent("mousemove",d,rt,st)):(this._emitMouseoverEvents(d,rt,Ht,st),this._emitEvent("mousemove",d,rt,st))}else this._emitMouseoverEvents(d,rt,Ht,st),this._emitEvent("mousemove",d,rt,st)}},nt.prototype._emitEvent=function(rt,st,d,It,Ht,kt){var Xt=this._getEventObj(rt,st,d,It,Ht,kt);if(It){Xt.shape=It,Gt(It,rt,Xt);for(var Kt=It.getParent();Kt;)Kt.emitDelegation(rt,Xt),Xt.propagationStopped||re(Kt,rt,Xt),Xt.propagationPath.push(Kt),Kt=Kt.getParent()}else{var Jt=this.canvas;Gt(Jt,rt,Xt)}},nt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},nt}(),it=Qt,dt="px",gt=(0,j.detect)(),vt=gt&&gt.name==="firefox",Y=function(nt){(0,T.ZT)(rt,nt);function rt(st){var d=nt.call(this,st)||this;return d.initContainer(),d.initDom(),d.initEvents(),d.initTimeline(),d}return rt.prototype.getDefaultCfg=function(){var st=nt.prototype.getDefaultCfg.call(this);return st.cursor="default",st.supportCSSTransform=!1,st},rt.prototype.initContainer=function(){var st=this.get("container");(0,U.HD)(st)&&(st=document.getElementById(st),this.set("container",st))},rt.prototype.initDom=function(){var st=this.createDom();this.set("el",st);var d=this.get("container");d.appendChild(st),this.setDOMSize(this.get("width"),this.get("height"))},rt.prototype.initEvents=function(){var st=new it({canvas:this});st.init(),this.set("eventController",st)},rt.prototype.initTimeline=function(){var st=new q(this);this.set("timeline",st)},rt.prototype.setDOMSize=function(st,d){var It=this.get("el");U.jU&&(It.style.width=st+dt,It.style.height=d+dt)},rt.prototype.changeSize=function(st,d){this.setDOMSize(st,d),this.set("width",st),this.set("height",d),this.onCanvasChange("changeSize")},rt.prototype.getRenderer=function(){return this.get("renderer")},rt.prototype.getCursor=function(){return this.get("cursor")},rt.prototype.setCursor=function(st){this.set("cursor",st);var d=this.get("el");U.jU&&d&&(d.style.cursor=st)},rt.prototype.getPointByEvent=function(st){var d=this.get("supportCSSTransform");if(d){if(vt&&!(0,U.kK)(st.layerX)&&st.layerX!==st.offsetX)return{x:st.layerX,y:st.layerY};if(!(0,U.kK)(st.offsetX))return{x:st.offsetX,y:st.offsetY}}var It=this.getClientByEvent(st),Ht=It.x,kt=It.y;return this.getPointByClient(Ht,kt)},rt.prototype.getClientByEvent=function(st){var d=st;return st.touches&&(st.type==="touchend"?d=st.changedTouches[0]:d=st.touches[0]),{x:d.clientX,y:d.clientY}},rt.prototype.getPointByClient=function(st,d){var It=this.get("el"),Ht=It.getBoundingClientRect();return{x:st-Ht.left,y:d-Ht.top}},rt.prototype.getClientByPoint=function(st,d){var It=this.get("el"),Ht=It.getBoundingClientRect();return{x:st+Ht.left,y:d+Ht.top}},rt.prototype.draw=function(){},rt.prototype.removeDom=function(){var st=this.get("el");st.parentNode.removeChild(st)},rt.prototype.clearEvents=function(){var st=this.get("eventController");st.destroy()},rt.prototype.isCanvas=function(){return!0},rt.prototype.getParent=function(){return null},rt.prototype.destroy=function(){var st=this.get("timeline");this.get("destroyed")||(this.clear(),st&&st.stop(),this.clearEvents(),this.removeDom(),nt.prototype.destroy.call(this))},rt}(y.Z),ot=Y},29598:function(Vt,P,S){"use strict";var T=S(37050),j=S(49242),y=S(67229),U=S(30219),F={},B="_INDEX";function R(k,V){if(k.set("canvas",V),k.isGroup()){var X=k.get("children");X.length&&X.forEach(function(K){R(K,V)})}}function N(k,V){if(k.set("timeline",V),k.isGroup()){var X=k.get("children");X.length&&X.forEach(function(K){N(K,V)})}}function A(k,V){var X=k.getChildren();return X.indexOf(V)>=0}function D(k,V,X){X===void 0&&(X=!0),X?V.destroy():(V.set("parent",null),V.set("canvas",null)),(0,U.As)(k.getChildren(),V)}function M(k){return function(V,X){var K=k(V,X);return K===0?V[B]-X[B]:K}}var O=function(k){(0,T.ZT)(V,k);function V(){return k!==null&&k.apply(this,arguments)||this}return V.prototype.isCanvas=function(){return!1},V.prototype.getBBox=function(){var X=Infinity,K=-Infinity,q=Infinity,ct=-Infinity,_t=[],yt=[],lt=this.getChildren().filter(function(wt){return wt.get("visible")&&(!wt.isGroup()||wt.isGroup()&&wt.getChildren().length>0)});lt.length>0?((0,U.S6)(lt,function(wt){var Gt=wt.getBBox();_t.push(Gt.minX,Gt.maxX),yt.push(Gt.minY,Gt.maxY)}),X=(0,j.min)(_t),K=(0,j.max)(_t),q=(0,j.min)(yt),ct=(0,j.max)(yt)):(X=0,K=0,q=0,ct=0);var Lt={x:X,y:q,minX:X,minY:q,maxX:K,maxY:ct,width:K-X,height:ct-q};return Lt},V.prototype.getCanvasBBox=function(){var X=Infinity,K=-Infinity,q=Infinity,ct=-Infinity,_t=[],yt=[],lt=this.getChildren().filter(function(wt){return wt.get("visible")&&(!wt.isGroup()||wt.isGroup()&&wt.getChildren().length>0)});lt.length>0?((0,U.S6)(lt,function(wt){var Gt=wt.getCanvasBBox();_t.push(Gt.minX,Gt.maxX),yt.push(Gt.minY,Gt.maxY)}),X=(0,j.min)(_t),K=(0,j.max)(_t),q=(0,j.min)(yt),ct=(0,j.max)(yt)):(X=0,K=0,q=0,ct=0);var Lt={x:X,y:q,minX:X,minY:q,maxX:K,maxY:ct,width:K-X,height:ct-q};return Lt},V.prototype.getDefaultCfg=function(){var X=k.prototype.getDefaultCfg.call(this);return X.children=[],X},V.prototype.onAttrChange=function(X,K,q){if(k.prototype.onAttrChange.call(this,X,K,q),X==="matrix"){var ct=this.getTotalMatrix();this._applyChildrenMarix(ct)}},V.prototype.applyMatrix=function(X){var K=this.getTotalMatrix();k.prototype.applyMatrix.call(this,X);var q=this.getTotalMatrix();q!==K&&this._applyChildrenMarix(q)},V.prototype._applyChildrenMarix=function(X){var K=this.getChildren();(0,U.S6)(K,function(q){q.applyMatrix(X)})},V.prototype.addShape=function(){for(var X=[],K=0;K<arguments.length;K++)X[K]=arguments[K];var q=X[0],ct=X[1];(0,U.Kn)(q)?ct=q:ct.type=q;var _t=F[ct.type];_t||(_t=(0,U.jC)(ct.type),F[ct.type]=_t);var yt=this.getShapeBase(),lt=new yt[_t](ct);return this.add(lt),lt},V.prototype.addGroup=function(){for(var X=[],K=0;K<arguments.length;K++)X[K]=arguments[K];var q=X[0],ct=X[1],_t;if((0,U.mf)(q))ct?_t=new q(ct):_t=new q({parent:this});else{var yt=q||{},lt=this.getGroupBase();_t=new lt(yt)}return this.add(_t),_t},V.prototype.getCanvas=function(){var X;return this.isCanvas()?X=this:X=this.get("canvas"),X},V.prototype.getShape=function(X,K,q){if(!(0,U.pP)(this))return null;var ct=this.getChildren(),_t;if(this.isCanvas())_t=this._findShape(ct,X,K,q);else{var yt=[X,K,1];yt=this.invertFromMatrix(yt),this.isClipped(yt[0],yt[1])||(_t=this._findShape(ct,yt[0],yt[1],q))}return _t},V.prototype._findShape=function(X,K,q,ct){for(var _t=null,yt=X.length-1;yt>=0;yt--){var lt=X[yt];if((0,U.pP)(lt)&&(lt.isGroup()?_t=lt.getShape(K,q,ct):lt.isHit(K,q)&&(_t=lt)),_t)break}return _t},V.prototype.add=function(X){var K=this.getCanvas(),q=this.getChildren(),ct=this.get("timeline"),_t=X.getParent();_t&&D(_t,X,!1),X.set("parent",this),K&&R(X,K),ct&&N(X,ct),q.push(X),X.onCanvasChange("add"),this._applyElementMatrix(X)},V.prototype._applyElementMatrix=function(X){var K=this.getTotalMatrix();K&&X.applyMatrix(K)},V.prototype.getChildren=function(){return this.get("children")},V.prototype.sort=function(){var X=this.getChildren();(0,U.S6)(X,function(K,q){return K[B]=q,K}),X.sort(M(function(K,q){return K.get("zIndex")-q.get("zIndex")})),this.onCanvasChange("sort")},V.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var X=this.getChildren(),K=X.length-1;K>=0;K--)X[K].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},V.prototype.destroy=function(){this.get("destroyed")||(this.clear(),k.prototype.destroy.call(this))},V.prototype.getFirst=function(){return this.getChildByIndex(0)},V.prototype.getLast=function(){var X=this.getChildren();return this.getChildByIndex(X.length-1)},V.prototype.getChildByIndex=function(X){var K=this.getChildren();return K[X]},V.prototype.getCount=function(){var X=this.getChildren();return X.length},V.prototype.contain=function(X){var K=this.getChildren();return K.indexOf(X)>-1},V.prototype.removeChild=function(X,K){K===void 0&&(K=!0),this.contain(X)&&X.remove(K)},V.prototype.findAll=function(X){var K=[],q=this.getChildren();return(0,U.S6)(q,function(ct){X(ct)&&K.push(ct),ct.isGroup()&&(K=K.concat(ct.findAll(X)))}),K},V.prototype.find=function(X){var K=null,q=this.getChildren();return(0,U.S6)(q,function(ct){if(X(ct)?K=ct:ct.isGroup()&&(K=ct.find(X)),K)return!1}),K},V.prototype.findById=function(X){return this.find(function(K){return K.get("id")===X})},V.prototype.findByClassName=function(X){return this.find(function(K){return K.get("className")===X})},V.prototype.findAllByName=function(X){return this.findAll(function(K){return K.get("name")===X})},V}(y.Z);P.Z=O},67229:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return Qt}});var T=S(37050),j=S(49242),y=S(35600);function U(it,dt,gt){var vt=[0,0,0,0,0,0,0,0,0];return y.fromTranslation(vt,gt),y.multiply(it,vt,dt)}function F(it,dt,gt){var vt=[0,0,0,0,0,0,0,0,0];return y.fromRotation(vt,gt),y.multiply(it,vt,dt)}function B(it,dt,gt){var vt=[0,0,0,0,0,0,0,0,0];return y.fromScaling(vt,gt),y.multiply(it,vt,dt)}function R(it,dt,gt){return y.multiply(it,gt,dt)}function N(it,dt){for(var gt=it?[].concat(it):[1,0,0,0,1,0,0,0,1],vt=0,Y=dt.length;vt<Y;vt++){var ot=dt[vt];switch(ot[0]){case"t":U(gt,gt,[ot[1],ot[2]]);break;case"s":B(gt,gt,[ot[1],ot[2]]);break;case"r":F(gt,gt,ot[1]);break;case"m":R(gt,gt,ot[1]);break;default:break}}return gt}function A(it,dt){return it[0]*dt[1]-dt[0]*it[1]}function D(it,dt,gt){var vt=vec2.angle(it,dt),Y=A(it,dt)>=0;return gt?Y?Math.PI*2-vt:vt:Y?vt:Math.PI*2-vt}function M(it,dt,gt){return gt?(it[0]=dt[1],it[1]=-1*dt[0]):(it[0]=-1*dt[1],it[1]=dt[0]),it}var O=S(30219),k=S(87109),V=S(95365),X=N,K="matrix",q=["zIndex","capture","visible","type"],ct=["repeat"],_t=":",yt="*";function lt(it){for(var dt=[],gt=0;gt<it.length;gt++)(0,j.isArray)(it[gt])?dt.push([].concat(it[gt])):dt.push(it[gt]);return dt}function Lt(it,dt){var gt={},vt=dt.attrs;for(var Y in it)gt[Y]=vt[Y];return gt}function wt(it,dt){var gt={},vt=dt.attr();return(0,j.each)(it,function(Y,ot){ct.indexOf(ot)===-1&&!(0,j.isEqual)(vt[ot],Y)&&(gt[ot]=Y)}),gt}function Gt(it,dt){if(dt.onFrame)return it;var gt=dt.startTime,vt=dt.delay,Y=dt.duration,ot=Object.prototype.hasOwnProperty;return(0,j.each)(it,function(nt){gt+vt<nt.startTime+nt.delay+nt.duration&&Y>nt.delay&&(0,j.each)(dt.toAttrs,function(rt,st){ot.call(nt.toAttrs,st)&&(delete nt.toAttrs[st],delete nt.fromAttrs[st])})}),it}var re=function(it){(0,T.ZT)(dt,it);function dt(gt){var vt=it.call(this,gt)||this;vt.attrs={};var Y=vt.getDefaultAttrs();return(0,j.mix)(Y,gt.attrs),vt.attrs=Y,vt.initAttrs(Y),vt.initAnimate(),vt}return dt.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},dt.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},dt.prototype.onCanvasChange=function(gt){},dt.prototype.initAttrs=function(gt){},dt.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},dt.prototype.isGroup=function(){return!1},dt.prototype.getParent=function(){return this.get("parent")},dt.prototype.getCanvas=function(){return this.get("canvas")},dt.prototype.attr=function(){for(var gt,vt=[],Y=0;Y<arguments.length;Y++)vt[Y]=arguments[Y];var ot=vt[0],nt=vt[1];if(!ot)return this.attrs;if((0,j.isObject)(ot)){for(var rt in ot)this.setAttr(rt,ot[rt]);return this.afterAttrsChange(ot),this}return vt.length===2?(this.setAttr(ot,nt),this.afterAttrsChange((gt={},gt[ot]=nt,gt)),this):this.attrs[ot]},dt.prototype.isClipped=function(gt,vt){var Y=this.getClip();return Y&&!Y.isHit(gt,vt)},dt.prototype.setAttr=function(gt,vt){var Y=this.attrs[gt];Y!==vt&&(this.attrs[gt]=vt,this.onAttrChange(gt,vt,Y))},dt.prototype.onAttrChange=function(gt,vt,Y){gt==="matrix"&&this.set("totalMatrix",null)},dt.prototype.afterAttrsChange=function(gt){if(this.cfg.isClipShape){var vt=this.cfg.applyTo;vt&&vt.onCanvasChange("clip")}else this.onCanvasChange("attr")},dt.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},dt.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},dt.prototype.setZIndex=function(gt){this.set("zIndex",gt);var vt=this.getParent();return vt&&vt.sort(),this},dt.prototype.toFront=function(){var gt=this.getParent();if(!!gt){var vt=gt.getChildren(),Y=this.get("el"),ot=vt.indexOf(this);vt.splice(ot,1),vt.push(this),this.onCanvasChange("zIndex")}},dt.prototype.toBack=function(){var gt=this.getParent();if(!!gt){var vt=gt.getChildren(),Y=this.get("el"),ot=vt.indexOf(this);vt.splice(ot,1),vt.unshift(this),this.onCanvasChange("zIndex")}},dt.prototype.remove=function(gt){gt===void 0&&(gt=!0);var vt=this.getParent();vt?((0,O.As)(vt.getChildren(),this),vt.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),gt&&this.destroy()},dt.prototype.resetMatrix=function(){this.attr(K,this.getDefaultMatrix()),this.onCanvasChange("matrix")},dt.prototype.getMatrix=function(){return this.attr(K)},dt.prototype.setMatrix=function(gt){this.attr(K,gt),this.onCanvasChange("matrix")},dt.prototype.getTotalMatrix=function(){var gt=this.cfg.totalMatrix;if(!gt){var vt=this.attr("matrix"),Y=this.cfg.parentMatrix;Y&&vt?gt=(0,k.xq)(Y,vt):gt=vt||Y,this.set("totalMatrix",gt)}return gt},dt.prototype.applyMatrix=function(gt){var vt=this.attr("matrix"),Y=null;gt&&vt?Y=(0,k.xq)(gt,vt):Y=vt||gt,this.set("totalMatrix",Y),this.set("parentMatrix",gt)},dt.prototype.getDefaultMatrix=function(){return null},dt.prototype.applyToMatrix=function(gt){var vt=this.attr("matrix");return vt?(0,k.rG)(vt,gt):gt},dt.prototype.invertFromMatrix=function(gt){var vt=this.attr("matrix");if(vt){var Y=(0,k.U_)(vt);if(Y)return(0,k.rG)(Y,gt)}return gt},dt.prototype.setClip=function(gt){var vt=this.getCanvas(),Y=null;if(gt){var ot=this.getShapeBase(),nt=(0,j.upperFirst)(gt.type),rt=ot[nt];rt&&(Y=new rt({type:gt.type,isClipShape:!0,applyTo:this,attrs:gt.attrs,canvas:vt}))}return this.set("clipShape",Y),this.onCanvasChange("clip"),Y},dt.prototype.getClip=function(){var gt=this.cfg.clipShape;return gt||null},dt.prototype.clone=function(){var gt=this,vt=this.attrs,Y={};(0,j.each)(vt,function(rt,st){(0,j.isArray)(vt[st])?Y[st]=lt(vt[st]):Y[st]=vt[st]});var ot=this.constructor,nt=new ot({attrs:Y});return(0,j.each)(q,function(rt){nt.set(rt,gt.get(rt))}),nt},dt.prototype.destroy=function(){var gt=this.destroyed;gt||(this.attrs={},it.prototype.destroy.call(this))},dt.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},dt.prototype.animate=function(){for(var gt=[],vt=0;vt<arguments.length;vt++)gt[vt]=arguments[vt];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var Y=this.get("timeline");Y||(Y=this.get("canvas").get("timeline"),this.set("timeline",Y));var ot=this.get("animations")||[];Y.timer||Y.initTimer();var nt=gt[0],rt=gt[1],st=gt[2],d=st===void 0?"easeLinear":st,It=gt[3],Ht=It===void 0?j.noop:It,kt=gt[4],Xt=kt===void 0?0:kt,Kt,Jt,ue,ce,$t;(0,j.isFunction)(nt)?(Kt=nt,nt={}):(0,j.isObject)(nt)&&nt.onFrame&&(Kt=nt.onFrame,Jt=nt.repeat),(0,j.isObject)(rt)?($t=rt,rt=$t.duration,d=$t.easing||"easeLinear",Xt=$t.delay||0,Jt=$t.repeat||Jt||!1,Ht=$t.callback||j.noop,ue=$t.pauseCallback||j.noop,ce=$t.resumeCallback||j.noop):((0,j.isNumber)(Ht)&&(Xt=Ht,Ht=null),(0,j.isFunction)(d)?(Ht=d,d="easeLinear"):d=d||"easeLinear");var Ut=wt(nt,this),Rt={fromAttrs:Lt(Ut,this),toAttrs:Ut,duration:rt,easing:d,repeat:Jt,callback:Ht,pauseCallback:ue,resumeCallback:ce,delay:Xt,startTime:Y.getTime(),id:(0,j.uniqueId)(),onFrame:Kt,pathFormatted:!1};ot.length>0?ot=Gt(ot,Rt):Y.addAnimator(this),ot.push(Rt),this.set("animations",ot),this.set("_pause",{isPaused:!1})}},dt.prototype.stopAnimate=function(gt){var vt=this;gt===void 0&&(gt=!0);var Y=this.get("animations");(0,j.each)(Y,function(ot){gt&&(ot.onFrame?vt.attr(ot.onFrame(1)):vt.attr(ot.toAttrs)),ot.callback&&ot.callback()}),this.set("animating",!1),this.set("animations",[])},dt.prototype.pauseAnimate=function(){var gt=this.get("timeline"),vt=this.get("animations"),Y=gt.getTime();return(0,j.each)(vt,function(ot){ot._paused=!0,ot._pauseTime=Y,ot.pauseCallback&&ot.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Y}),this},dt.prototype.resumeAnimate=function(){var gt=this.get("timeline"),vt=gt.getTime(),Y=this.get("animations"),ot=this.get("_pause").pauseTime;return(0,j.each)(Y,function(nt){nt.startTime=nt.startTime+(vt-ot),nt._paused=!1,nt._pauseTime=null,nt.resumeCallback&&nt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Y),this},dt.prototype.emitDelegation=function(gt,vt){var Y=this,ot=vt.propagationPath,nt=this.getEvents(),rt;gt==="mouseenter"?rt=vt.fromShape:gt==="mouseleave"&&(rt=vt.toShape);for(var st=function(kt){var Xt=ot[kt],Kt=Xt.get("name");if(Kt){if((Xt.isGroup()||Xt.isCanvas&&Xt.isCanvas())&&rt&&(0,O.UY)(Xt,rt))return"break";(0,j.isArray)(Kt)?(0,j.each)(Kt,function(Jt){Y.emitDelegateEvent(Xt,Jt,vt)}):d.emitDelegateEvent(Xt,Kt,vt)}},d=this,It=0;It<ot.length;It++){var Ht=st(It);if(Ht==="break")break}},dt.prototype.emitDelegateEvent=function(gt,vt,Y){var ot=this.getEvents(),nt=vt+_t+Y.type;(ot[nt]||ot[yt])&&(Y.name=nt,Y.currentTarget=gt,Y.delegateTarget=this,Y.delegateObject=gt.get("delegateObject"),this.emit(nt,Y))},dt.prototype.translate=function(gt,vt){gt===void 0&&(gt=0),vt===void 0&&(vt=0);var Y=this.getMatrix(),ot=X(Y,[["t",gt,vt]]);return this.setMatrix(ot),this},dt.prototype.move=function(gt,vt){var Y=this.attr("x")||0,ot=this.attr("y")||0;return this.translate(gt-Y,vt-ot),this},dt.prototype.moveTo=function(gt,vt){return this.move(gt,vt)},dt.prototype.scale=function(gt,vt){var Y=this.getMatrix(),ot=X(Y,[["s",gt,vt||gt]]);return this.setMatrix(ot),this},dt.prototype.rotate=function(gt){var vt=this.getMatrix(),Y=X(vt,[["r",gt]]);return this.setMatrix(Y),this},dt.prototype.rotateAtStart=function(gt){var vt=this.attr(),Y=vt.x,ot=vt.y,nt=this.getMatrix(),rt=X(nt,[["t",-Y,-ot],["r",gt],["t",Y,ot]]);return this.setMatrix(rt),this},dt.prototype.rotateAtPoint=function(gt,vt,Y){var ot=this.getMatrix(),nt=X(ot,[["t",-gt,-vt],["r",Y],["t",gt,vt]]);return this.setMatrix(nt),this},dt}(V.Z),Qt=re},12352:function(Vt,P,S){"use strict";var T=S(37050),j=S(29598),y=function(U){(0,T.ZT)(F,U);function F(){return U!==null&&U.apply(this,arguments)||this}return F.prototype.isGroup=function(){return!0},F.prototype.isEntityGroup=function(){return!1},F.prototype.clone=function(){for(var B=U.prototype.clone.call(this),R=this.getChildren(),N=0;N<R.length;N++){var A=R[N];B.add(A.clone())}return B},F}(j.Z);P.Z=y},86544:function(Vt,P,S){"use strict";var T=S(37050),j=S(67229),y=S(87109),U=function(F){(0,T.ZT)(B,F);function B(R){return F.call(this,R)||this}return B.prototype._isInBBox=function(R,N){var A=this.getBBox();return A.minX<=R&&A.maxX>=R&&A.minY<=N&&A.maxY>=N},B.prototype.afterAttrsChange=function(R){F.prototype.afterAttrsChange.call(this,R),this.clearCacheBBox()},B.prototype.getBBox=function(){var R=this.cfg.bbox;return R||(R=this.calculateBBox(),this.set("bbox",R)),R},B.prototype.getCanvasBBox=function(){var R=this.cfg.canvasBBox;return R||(R=this.calculateCanvasBBox(),this.set("canvasBBox",R)),R},B.prototype.applyMatrix=function(R){F.prototype.applyMatrix.call(this,R),this.set("canvasBBox",null)},B.prototype.calculateCanvasBBox=function(){var R=this.getBBox(),N=this.getTotalMatrix(),A=R.minX,D=R.minY,M=R.maxX,O=R.maxY;if(N){var k=(0,y.rG)(N,[R.minX,R.minY]),V=(0,y.rG)(N,[R.maxX,R.minY]),X=(0,y.rG)(N,[R.minX,R.maxY]),K=(0,y.rG)(N,[R.maxX,R.maxY]);A=Math.min(k[0],V[0],X[0],K[0]),M=Math.max(k[0],V[0],X[0],K[0]),D=Math.min(k[1],V[1],X[1],K[1]),O=Math.max(k[1],V[1],X[1],K[1])}var q=this.attrs;if(q.shadowColor){var ct=q.shadowBlur,_t=ct===void 0?0:ct,yt=q.shadowOffsetX,lt=yt===void 0?0:yt,Lt=q.shadowOffsetY,wt=Lt===void 0?0:Lt,Gt=A-_t+lt,re=M+_t+lt,Qt=D-_t+wt,it=O+_t+wt;A=Math.min(A,Gt),M=Math.max(M,re),D=Math.min(D,Qt),O=Math.max(O,it)}return{x:A,y:D,minX:A,minY:D,maxX:M,maxY:O,width:M-A,height:O-D}},B.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},B.prototype.isClipShape=function(){return this.get("isClipShape")},B.prototype.isInShape=function(R,N){return!1},B.prototype.isOnlyHitBox=function(){return!1},B.prototype.isHit=function(R,N){var A=this.get("startArrowShape"),D=this.get("endArrowShape"),M=[R,N,1];M=this.invertFromMatrix(M);var O=M[0],k=M[1],V=this._isInBBox(O,k);return this.isOnlyHitBox()?V:!!(V&&!this.isClipped(O,k)&&(this.isInShape(O,k)||A&&A.isHit(O,k)||D&&D.isHit(O,k)))},B}(j.Z);P.Z=U},92146:function(Vt,P,S){"use strict";S.d(P,{b:function(){return y}});var T=new Map;function j(yt,lt){T.set(yt,lt)}function y(yt){return T.get(yt)}function U(yt){var lt=yt.attr(),Lt=lt.x,wt=lt.y,Gt=lt.width,re=lt.height;return{x:Lt,y:wt,width:Gt,height:re}}function F(yt){var lt=yt.attr(),Lt=lt.x,wt=lt.y,Gt=lt.r;return{x:Lt-Gt,y:wt-Gt,width:Gt*2,height:Gt*2}}var B=S(89838);function R(yt,lt){return!yt||!lt?yt||lt:{minX:Math.min(yt.minX,lt.minX),minY:Math.min(yt.minY,lt.minY),maxX:Math.max(yt.maxX,lt.maxX),maxY:Math.max(yt.maxY,lt.maxY)}}function N(yt,lt){var Lt=yt.get("startArrowShape"),wt=yt.get("endArrowShape"),Gt=null,re=null;return Lt&&(Gt=Lt.getCanvasBBox(),lt=R(lt,Gt)),wt&&(re=wt.getCanvasBBox(),lt=R(lt,re)),lt}function A(yt){for(var lt=yt.attr(),Lt=lt.points,wt=[],Gt=[],re=0;re<Lt.length;re++){var Qt=Lt[re];wt.push(Qt[0]),Gt.push(Qt[1])}var it=B.Util.getBBoxByArray(wt,Gt),dt=it.x,gt=it.y,vt=it.width,Y=it.height,ot={minX:dt,minY:gt,maxX:dt+vt,maxY:gt+Y};return ot=N(yt,ot),{x:ot.minX,y:ot.minY,width:ot.maxX-ot.minX,height:ot.maxY-ot.minY}}function D(yt){for(var lt=yt.attr(),Lt=lt.points,wt=[],Gt=[],re=0;re<Lt.length;re++){var Qt=Lt[re];wt.push(Qt[0]),Gt.push(Qt[1])}return B.Util.getBBoxByArray(wt,Gt)}var M=S(84723);function O(yt){var lt=yt.attr(),Lt=lt.x,wt=lt.y,Gt=lt.text,re=lt.fontSize,Qt=lt.lineHeight,it=lt.font;it||(it=(0,M.$O)(lt));var dt=(0,M.mY)(Gt,it),gt;if(!dt)gt={x:Lt,y:wt,width:0,height:0};else{var vt=lt.textAlign,Y=lt.textBaseline,ot=(0,M.FE)(Gt,re,Qt),nt={x:Lt,y:wt-ot};vt&&(vt==="end"||vt==="right"?nt.x-=dt:vt==="center"&&(nt.x-=dt/2)),Y&&(Y==="top"?nt.y+=ot:Y==="middle"&&(nt.y+=ot/2)),gt={x:nt.x,y:nt.y,width:dt,height:ot}}return gt}var k=S(57350),V=S(49242);function X(yt,lt){for(var Lt=[],wt=[],Gt=[],re=0;re<yt.length;re++){var Qt=yt[re],it=Qt.currentPoint,dt=Qt.params,gt=Qt.prePoint,vt=void 0;switch(Qt.command){case"Q":vt=B.Quad.box(gt[0],gt[1],dt[1],dt[2],dt[3],dt[4]);break;case"C":vt=B.Cubic.box(gt[0],gt[1],dt[1],dt[2],dt[3],dt[4],dt[5],dt[6]);break;case"A":var Y=Qt.arcParams;vt=B.Arc.box(Y.cx,Y.cy,Y.rx,Y.ry,Y.xRotation,Y.startAngle,Y.endAngle);break;default:Lt.push(it[0]),wt.push(it[1]);break}vt&&(Qt.box=vt,Lt.push(vt.x,vt.x+vt.width),wt.push(vt.y,vt.y+vt.height)),lt&&(Qt.command==="L"||Qt.command==="M")&&Qt.prePoint&&Qt.nextPoint&&Gt.push(Qt)}Lt=Lt.filter(function(It){return!Number.isNaN(It)}),wt=wt.filter(function(It){return!Number.isNaN(It)});var ot=(0,V.min)(Lt),nt=(0,V.min)(wt),rt=(0,V.max)(Lt),st=(0,V.max)(wt);if(Gt.length===0)return{x:ot,y:nt,width:rt-ot,height:st-nt};for(var re=0;re<Gt.length;re++){var Qt=Gt[re],it=Qt.currentPoint,d=void 0;it[0]===ot?(d=K(Qt,lt),ot=ot-d.xExtra):it[0]===rt&&(d=K(Qt,lt),rt=rt+d.xExtra),it[1]===nt?(d=K(Qt,lt),nt=nt-d.yExtra):it[1]===st&&(d=K(Qt,lt),st=st+d.yExtra)}return{x:ot,y:nt,width:rt-ot,height:st-nt}}function K(yt,lt){var Lt=yt.prePoint,wt=yt.currentPoint,Gt=yt.nextPoint,re=Math.pow(wt[0]-Lt[0],2)+Math.pow(wt[1]-Lt[1],2),Qt=Math.pow(wt[0]-Gt[0],2)+Math.pow(wt[1]-Gt[1],2),it=Math.pow(Lt[0]-Gt[0],2)+Math.pow(Lt[1]-Gt[1],2),dt=Math.acos((re+Qt-it)/(2*Math.sqrt(re)*Math.sqrt(Qt)));if(!dt||Math.sin(dt)===0||(0,V.isNumberEqual)(dt,0))return{xExtra:0,yExtra:0};var gt=Math.abs(Math.atan2(Gt[1]-wt[1],Gt[0]-wt[0])),vt=Math.abs(Math.atan2(Gt[0]-wt[0],Gt[1]-wt[1]));gt=gt>Math.PI/2?Math.PI-gt:gt,vt=vt>Math.PI/2?Math.PI-vt:vt;var Y={xExtra:Math.cos(dt/2-gt)*(lt/2*(1/Math.sin(dt/2)))-lt/2||0,yExtra:Math.cos(vt-dt/2)*(lt/2*(1/Math.sin(dt/2)))-lt/2||0};return Y}function q(yt){var lt=yt.attr(),Lt=lt.path,wt=lt.stroke,Gt=wt?lt.lineWidth:0,re=yt.get("segments")||(0,k.path2Segments)(Lt),Qt=X(re,Gt),it=Qt.x,dt=Qt.y,gt=Qt.width,vt=Qt.height,Y={minX:it,minY:dt,maxX:it+gt,maxY:dt+vt};return Y=N(yt,Y),{x:Y.minX,y:Y.minY,width:Y.maxX-Y.minX,height:Y.maxY-Y.minY}}function ct(yt){var lt=yt.attr(),Lt=lt.x1,wt=lt.y1,Gt=lt.x2,re=lt.y2,Qt=Math.min(Lt,Gt),it=Math.max(Lt,Gt),dt=Math.min(wt,re),gt=Math.max(wt,re),vt={minX:Qt,maxX:it,minY:dt,maxY:gt};return vt=N(yt,vt),{x:vt.minX,y:vt.minY,width:vt.maxX-vt.minX,height:vt.maxY-vt.minY}}function _t(yt){var lt=yt.attr(),Lt=lt.x,wt=lt.y,Gt=lt.rx,re=lt.ry;return{x:Lt-Gt,y:wt-re,width:Gt*2,height:re*2}}j("rect",U),j("image",U),j("circle",F),j("marker",F),j("polyline",A),j("polygon",D),j("text",O),j("path",q),j("line",ct),j("ellipse",_t)},76615:function(Vt,P){"use strict";var S=function(){function T(j,y){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=j,this.name=j,this.originalEvent=y,this.timeStamp=y.timeStamp}return T.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},T.prototype.stopPropagation=function(){this.propagationStopped=!0},T.prototype.toString=function(){var j=this.type;return"[Event (type="+j+")]"},T.prototype.save=function(){},T.prototype.restore=function(){},T}();P.Z=S},96533:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Event:function(){return N.Z},Base:function(){return A.Z},AbstractCanvas:function(){return D.Z},AbstractGroup:function(){return M.Z},AbstractShape:function(){return O.Z},PathUtil:function(){return T},getBBoxMethod:function(){return k.b},getTextHeight:function(){return V.FE},assembleFont:function(){return V.$O},isAllowCapture:function(){return X.pP},multiplyVec2:function(){return K.rG},invert:function(){return K.U_},getOffScreenContext:function(){return q.L},version:function(){return ct}});var T=S(24699),j=S(36438),y=S.n(j),U={};for(var F in j)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(F)<0&&(U[F]=function(_t){return j[_t]}.bind(0,F));S.d(P,U);var B=S(25946),R=S.n(B),U={};for(var F in B)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(F)<0&&(U[F]=function(yt){return B[yt]}.bind(0,F));S.d(P,U);var N=S(76615),A=S(95365),D=S(13658),M=S(12352),O=S(86544),k=S(92146),V=S(84723),X=S(30219),K=S(87109),q=S(71319),ct="0.5.6"},25946:function(){},36438:function(){},87109:function(Vt,P,S){"use strict";S.d(P,{xq:function(){return T},rG:function(){return j},U_:function(){return y}});function T(U,F){var B=[],R=U[0],N=U[1],A=U[2],D=U[3],M=U[4],O=U[5],k=U[6],V=U[7],X=U[8],K=F[0],q=F[1],ct=F[2],_t=F[3],yt=F[4],lt=F[5],Lt=F[6],wt=F[7],Gt=F[8];return B[0]=K*R+q*D+ct*k,B[1]=K*N+q*M+ct*V,B[2]=K*A+q*O+ct*X,B[3]=_t*R+yt*D+lt*k,B[4]=_t*N+yt*M+lt*V,B[5]=_t*A+yt*O+lt*X,B[6]=Lt*R+wt*D+Gt*k,B[7]=Lt*N+wt*M+Gt*V,B[8]=Lt*A+wt*O+Gt*X,B}function j(U,F){var B=[],R=F[0],N=F[1];return B[0]=U[0]*R+U[3]*N+U[6],B[1]=U[1]*R+U[4]*N+U[7],B}function y(U){var F=[],B=U[0],R=U[1],N=U[2],A=U[3],D=U[4],M=U[5],O=U[6],k=U[7],V=U[8],X=V*D-M*k,K=-V*A+M*O,q=k*A-D*O,ct=B*X+R*K+N*q;return ct?(ct=1/ct,F[0]=X*ct,F[1]=(-V*R+N*k)*ct,F[2]=(M*R-N*D)*ct,F[3]=K*ct,F[4]=(V*B-N*O)*ct,F[5]=(-M*B+N*A)*ct,F[6]=q*ct,F[7]=(-k*B+R*O)*ct,F[8]=(D*B-R*A)*ct,F):null}},71319:function(Vt,P,S){"use strict";S.d(P,{L:function(){return j}});var T=null;function j(){if(!T){var y=document.createElement("canvas");y.width=1,y.height=1,T=y.getContext("2d")}return T}},24699:function(Vt,P,S){"use strict";S.r(P),S.d(P,{catmullRomToBezier:function(){return B},fillPath:function(){return Y},fillPathByDiff:function(){return st},formatPath:function(){return Ht},intersection:function(){return it},parsePathArray:function(){return V},parsePathString:function(){return F},pathToAbsolute:function(){return N},pathToCurve:function(){return O},rectPath:function(){return yt}});var T=S(49242),j=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,y=new RegExp("([a-z])["+j+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+j+"]*,?["+j+"]*)+)","ig"),U=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+j+"]*,?["+j+"]*","ig"),F=function(kt){if(!kt)return null;if((0,T.isArray)(kt))return kt;var Xt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Kt=[];return String(kt).replace(y,function(Jt,ue,ce){var $t=[],Ut=ue.toLowerCase();if(ce.replace(U,function(Rt,Pt){Pt&&$t.push(+Pt)}),Ut==="m"&&$t.length>2&&(Kt.push([ue].concat($t.splice(0,2))),Ut="l",ue=ue==="m"?"l":"L"),Ut==="o"&&$t.length===1&&Kt.push([ue,$t[0]]),Ut==="r")Kt.push([ue].concat($t));else for(;$t.length>=Xt[Ut]&&(Kt.push([ue].concat($t.splice(0,Xt[Ut]))),!!Xt[Ut]););return kt}),Kt},B=function(kt,Xt){for(var Kt=[],Jt=0,ue=kt.length;ue-2*!Xt>Jt;Jt+=2){var ce=[{x:+kt[Jt-2],y:+kt[Jt-1]},{x:+kt[Jt],y:+kt[Jt+1]},{x:+kt[Jt+2],y:+kt[Jt+3]},{x:+kt[Jt+4],y:+kt[Jt+5]}];Xt?Jt?ue-4===Jt?ce[3]={x:+kt[0],y:+kt[1]}:ue-2===Jt&&(ce[2]={x:+kt[0],y:+kt[1]},ce[3]={x:+kt[2],y:+kt[3]}):ce[0]={x:+kt[ue-2],y:+kt[ue-1]}:ue-4===Jt?ce[3]=ce[2]:Jt||(ce[0]={x:+kt[Jt],y:+kt[Jt+1]}),Kt.push(["C",(-ce[0].x+6*ce[1].x+ce[2].x)/6,(-ce[0].y+6*ce[1].y+ce[2].y)/6,(ce[1].x+6*ce[2].x-ce[3].x)/6,(ce[1].y+6*ce[2].y-ce[3].y)/6,ce[2].x,ce[2].y])}return Kt},R=function(kt,Xt,Kt,Jt,ue){var ce=[];if(ue===null&&Jt===null&&(Jt=Kt),kt=+kt,Xt=+Xt,Kt=+Kt,Jt=+Jt,ue!==null){var $t=Math.PI/180,Ut=kt+Kt*Math.cos(-Jt*$t),Rt=kt+Kt*Math.cos(-ue*$t),Pt=Xt+Kt*Math.sin(-Jt*$t),Yt=Xt+Kt*Math.sin(-ue*$t);ce=[["M",Ut,Pt],["A",Kt,Kt,0,+(ue-Jt>180),0,Rt,Yt]]}else ce=[["M",kt,Xt],["m",0,-Jt],["a",Kt,Jt,0,1,1,0,2*Jt],["a",Kt,Jt,0,1,1,0,-2*Jt],["z"]];return ce},N=function(kt){if(kt=F(kt),!kt||!kt.length)return[["M",0,0]];var Xt=[],Kt=0,Jt=0,ue=0,ce=0,$t=0,Ut,Rt;kt[0][0]==="M"&&(Kt=+kt[0][1],Jt=+kt[0][2],ue=Kt,ce=Jt,$t++,Xt[0]=["M",Kt,Jt]);for(var Pt=kt.length===3&&kt[0][0]==="M"&&kt[1][0].toUpperCase()==="R"&&kt[2][0].toUpperCase()==="Z",Yt=void 0,Dt=void 0,Nt=$t,ne=kt.length;Nt<ne;Nt++){if(Xt.push(Yt=[]),Dt=kt[Nt],Ut=Dt[0],Ut!==Ut.toUpperCase())switch(Yt[0]=Ut.toUpperCase(),Yt[0]){case"A":Yt[1]=Dt[1],Yt[2]=Dt[2],Yt[3]=Dt[3],Yt[4]=Dt[4],Yt[5]=Dt[5],Yt[6]=+Dt[6]+Kt,Yt[7]=+Dt[7]+Jt;break;case"V":Yt[1]=+Dt[1]+Jt;break;case"H":Yt[1]=+Dt[1]+Kt;break;case"R":Rt=[Kt,Jt].concat(Dt.slice(1));for(var ve=2,Re=Rt.length;ve<Re;ve++)Rt[ve]=+Rt[ve]+Kt,Rt[++ve]=+Rt[ve]+Jt;Xt.pop(),Xt=Xt.concat(B(Rt,Pt));break;case"O":Xt.pop(),Rt=R(Kt,Jt,Dt[1],Dt[2]),Rt.push(Rt[0]),Xt=Xt.concat(Rt);break;case"U":Xt.pop(),Xt=Xt.concat(R(Kt,Jt,Dt[1],Dt[2],Dt[3])),Yt=["U"].concat(Xt[Xt.length-1].slice(-2));break;case"M":ue=+Dt[1]+Kt,ce=+Dt[2]+Jt;break;default:for(var ve=1,Re=Dt.length;ve<Re;ve++)Yt[ve]=+Dt[ve]+(ve%2?Kt:Jt)}else if(Ut==="R")Rt=[Kt,Jt].concat(Dt.slice(1)),Xt.pop(),Xt=Xt.concat(B(Rt,Pt)),Yt=["R"].concat(Dt.slice(-2));else if(Ut==="O")Xt.pop(),Rt=R(Kt,Jt,Dt[1],Dt[2]),Rt.push(Rt[0]),Xt=Xt.concat(Rt);else if(Ut==="U")Xt.pop(),Xt=Xt.concat(R(Kt,Jt,Dt[1],Dt[2],Dt[3])),Yt=["U"].concat(Xt[Xt.length-1].slice(-2));else for(var je=0,Cr=Dt.length;je<Cr;je++)Yt[je]=Dt[je];if(Ut=Ut.toUpperCase(),Ut!=="O")switch(Yt[0]){case"Z":Kt=+ue,Jt=+ce;break;case"H":Kt=Yt[1];break;case"V":Jt=Yt[1];break;case"M":ue=Yt[Yt.length-2],ce=Yt[Yt.length-1];break;default:Kt=Yt[Yt.length-2],Jt=Yt[Yt.length-1]}}return Xt},A=function(kt,Xt,Kt,Jt){return[kt,Xt,Kt,Jt,Kt,Jt]},D=function(kt,Xt,Kt,Jt,ue,ce){var $t=1/3,Ut=2/3;return[$t*kt+Ut*Kt,$t*Xt+Ut*Jt,$t*ue+Ut*Kt,$t*ce+Ut*Jt,ue,ce]},M=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut,Rt,Pt){Kt===Jt&&(Kt+=1);var Yt=Math.PI*120/180,Dt=Math.PI/180*(+ue||0),Nt=[],ne,ve,Re,je,Cr,$r=function(Te,Ze,or){var lr=Te*Math.cos(or)-Ze*Math.sin(or),Be=Te*Math.sin(or)+Ze*Math.cos(or);return{x:lr,y:Be}};if(Pt)ve=Pt[0],Re=Pt[1],je=Pt[2],Cr=Pt[3];else{ne=$r(kt,Xt,-Dt),kt=ne.x,Xt=ne.y,ne=$r(Ut,Rt,-Dt),Ut=ne.x,Rt=ne.y,kt===Ut&&Xt===Rt&&(Ut+=1,Rt+=1);var Qr=(kt-Ut)/2,Ee=(Xt-Rt)/2,yn=Qr*Qr/(Kt*Kt)+Ee*Ee/(Jt*Jt);yn>1&&(yn=Math.sqrt(yn),Kt=yn*Kt,Jt=yn*Jt);var ui=Kt*Kt,la=Jt*Jt,Or=(ce===$t?-1:1)*Math.sqrt(Math.abs((ui*la-ui*Ee*Ee-la*Qr*Qr)/(ui*Ee*Ee+la*Qr*Qr)));je=Or*Kt*Ee/Jt+(kt+Ut)/2,Cr=Or*-Jt*Qr/Kt+(Xt+Rt)/2,ve=Math.asin(((Xt-Cr)/Jt).toFixed(9)),Re=Math.asin(((Rt-Cr)/Jt).toFixed(9)),ve=kt<je?Math.PI-ve:ve,Re=Ut<je?Math.PI-Re:Re,ve<0&&(ve=Math.PI*2+ve),Re<0&&(Re=Math.PI*2+Re),$t&&ve>Re&&(ve=ve-Math.PI*2),!$t&&Re>ve&&(Re=Re-Math.PI*2)}var ln=Re-ve;if(Math.abs(ln)>Yt){var Kn=Re,jn=Ut,wi=Rt;Re=ve+Yt*($t&&Re>ve?1:-1),Ut=je+Kt*Math.cos(Re),Rt=Cr+Jt*Math.sin(Re),Nt=M(Ut,Rt,Kt,Jt,ue,0,$t,jn,wi,[Re,Kn,je,Cr])}ln=Re-ve;var Sa=Math.cos(ve),to=Math.sin(ve),qa=Math.cos(Re),Ui=Math.sin(Re),Ue=Math.tan(ln/4),We=4/3*Kt*Ue,fr=4/3*Jt*Ue,Ar=[kt,Xt],qr=[kt+We*to,Xt-fr*Sa],nn=[Ut+We*Ui,Rt-fr*qa],an=[Ut,Rt];if(qr[0]=2*Ar[0]-qr[0],qr[1]=2*Ar[1]-qr[1],Pt)return[qr,nn,an].concat(Nt);Nt=[qr,nn,an].concat(Nt).join().split(",");for(var le=[],fe=0,Me=Nt.length;fe<Me;fe++)le[fe]=fe%2?$r(Nt[fe-1],Nt[fe],Dt).y:$r(Nt[fe],Nt[fe+1],Dt).x;return le},O=function(kt,Xt){var Kt=N(kt),Jt=Xt&&N(Xt),ue={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ce={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},$t=[],Ut=[],Rt="",Pt="",Yt,Dt=function(Qr,Ee,yn){var ui,la;if(!Qr)return["C",Ee.x,Ee.y,Ee.x,Ee.y,Ee.x,Ee.y];switch(!(Qr[0]in{T:1,Q:1})&&(Ee.qx=Ee.qy=null),Qr[0]){case"M":Ee.X=Qr[1],Ee.Y=Qr[2];break;case"A":Qr=["C"].concat(M.apply(0,[Ee.x,Ee.y].concat(Qr.slice(1))));break;case"S":yn==="C"||yn==="S"?(ui=Ee.x*2-Ee.bx,la=Ee.y*2-Ee.by):(ui=Ee.x,la=Ee.y),Qr=["C",ui,la].concat(Qr.slice(1));break;case"T":yn==="Q"||yn==="T"?(Ee.qx=Ee.x*2-Ee.qx,Ee.qy=Ee.y*2-Ee.qy):(Ee.qx=Ee.x,Ee.qy=Ee.y),Qr=["C"].concat(D(Ee.x,Ee.y,Ee.qx,Ee.qy,Qr[1],Qr[2]));break;case"Q":Ee.qx=Qr[1],Ee.qy=Qr[2],Qr=["C"].concat(D(Ee.x,Ee.y,Qr[1],Qr[2],Qr[3],Qr[4]));break;case"L":Qr=["C"].concat(A(Ee.x,Ee.y,Qr[1],Qr[2]));break;case"H":Qr=["C"].concat(A(Ee.x,Ee.y,Qr[1],Ee.y));break;case"V":Qr=["C"].concat(A(Ee.x,Ee.y,Ee.x,Qr[1]));break;case"Z":Qr=["C"].concat(A(Ee.x,Ee.y,Ee.X,Ee.Y));break;default:break}return Qr},Nt=function(Qr,Ee){if(Qr[Ee].length>7){Qr[Ee].shift();for(var yn=Qr[Ee];yn.length;)$t[Ee]="A",Jt&&(Ut[Ee]="A"),Qr.splice(Ee++,0,["C"].concat(yn.splice(0,6)));Qr.splice(Ee,1),Yt=Math.max(Kt.length,Jt&&Jt.length||0)}},ne=function(Qr,Ee,yn,ui,la){Qr&&Ee&&Qr[la][0]==="M"&&Ee[la][0]!=="M"&&(Ee.splice(la,0,["M",ui.x,ui.y]),yn.bx=0,yn.by=0,yn.x=Qr[la][1],yn.y=Qr[la][2],Yt=Math.max(Kt.length,Jt&&Jt.length||0))};Yt=Math.max(Kt.length,Jt&&Jt.length||0);for(var ve=0;ve<Yt;ve++){Kt[ve]&&(Rt=Kt[ve][0]),Rt!=="C"&&($t[ve]=Rt,ve&&(Pt=$t[ve-1])),Kt[ve]=Dt(Kt[ve],ue,Pt),$t[ve]!=="A"&&Rt==="C"&&($t[ve]="C"),Nt(Kt,ve),Jt&&(Jt[ve]&&(Rt=Jt[ve][0]),Rt!=="C"&&(Ut[ve]=Rt,ve&&(Pt=Ut[ve-1])),Jt[ve]=Dt(Jt[ve],ce,Pt),Ut[ve]!=="A"&&Rt==="C"&&(Ut[ve]="C"),Nt(Jt,ve)),ne(Kt,Jt,ue,ce,ve),ne(Jt,Kt,ce,ue,ve);var Re=Kt[ve],je=Jt&&Jt[ve],Cr=Re.length,$r=Jt&&je.length;ue.x=Re[Cr-2],ue.y=Re[Cr-1],ue.bx=parseFloat(Re[Cr-4])||ue.x,ue.by=parseFloat(Re[Cr-3])||ue.y,ce.bx=Jt&&(parseFloat(je[$r-4])||ce.x),ce.by=Jt&&(parseFloat(je[$r-3])||ce.y),ce.x=Jt&&je[$r-2],ce.y=Jt&&je[$r-1]}return Jt?[Kt,Jt]:Kt},k=/,?([a-z]),?/gi,V=function(kt){return kt.join(",").replace(k,"$1")},X=function(kt,Xt,Kt,Jt,ue){var ce=-3*Xt+9*Kt-9*Jt+3*ue,$t=kt*ce+6*Xt-12*Kt+6*Jt;return kt*$t-3*Xt+3*Kt},K=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut,Rt){Rt===null&&(Rt=1),Rt=Rt>1?1:Rt<0?0:Rt;for(var Pt=Rt/2,Yt=12,Dt=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Nt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ne=0,ve=0;ve<Yt;ve++){var Re=Pt*Dt[ve]+Pt,je=X(Re,kt,Kt,ue,$t),Cr=X(Re,Xt,Jt,ce,Ut),$r=je*je+Cr*Cr;ne+=Nt[ve]*Math.sqrt($r)}return Pt*ne},q=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut){for(var Rt=[],Pt=[[],[]],Yt,Dt,Nt,ne,ve=0;ve<2;++ve){if(ve===0?(Dt=6*kt-12*Kt+6*ue,Yt=-3*kt+9*Kt-9*ue+3*$t,Nt=3*Kt-3*kt):(Dt=6*Xt-12*Jt+6*ce,Yt=-3*Xt+9*Jt-9*ce+3*Ut,Nt=3*Jt-3*Xt),Math.abs(Yt)<1e-12){if(Math.abs(Dt)<1e-12)continue;ne=-Nt/Dt,ne>0&&ne<1&&Rt.push(ne);continue}var Re=Dt*Dt-4*Nt*Yt,je=Math.sqrt(Re);if(!(Re<0)){var Cr=(-Dt+je)/(2*Yt);Cr>0&&Cr<1&&Rt.push(Cr);var $r=(-Dt-je)/(2*Yt);$r>0&&$r<1&&Rt.push($r)}}for(var Qr=Rt.length,Ee=Qr,yn;Qr--;)ne=Rt[Qr],yn=1-ne,Pt[0][Qr]=yn*yn*yn*kt+3*yn*yn*ne*Kt+3*yn*ne*ne*ue+ne*ne*ne*$t,Pt[1][Qr]=yn*yn*yn*Xt+3*yn*yn*ne*Jt+3*yn*ne*ne*ce+ne*ne*ne*Ut;return Pt[0][Ee]=kt,Pt[1][Ee]=Xt,Pt[0][Ee+1]=$t,Pt[1][Ee+1]=Ut,Pt[0].length=Pt[1].length=Ee+2,{min:{x:Math.min.apply(0,Pt[0]),y:Math.min.apply(0,Pt[1])},max:{x:Math.max.apply(0,Pt[0]),y:Math.max.apply(0,Pt[1])}}},ct=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut){if(!(Math.max(kt,Kt)<Math.min(ue,$t)||Math.min(kt,Kt)>Math.max(ue,$t)||Math.max(Xt,Jt)<Math.min(ce,Ut)||Math.min(Xt,Jt)>Math.max(ce,Ut))){var Rt=(kt*Jt-Xt*Kt)*(ue-$t)-(kt-Kt)*(ue*Ut-ce*$t),Pt=(kt*Jt-Xt*Kt)*(ce-Ut)-(Xt-Jt)*(ue*Ut-ce*$t),Yt=(kt-Kt)*(ce-Ut)-(Xt-Jt)*(ue-$t);if(!!Yt){var Dt=Rt/Yt,Nt=Pt/Yt,ne=+Dt.toFixed(2),ve=+Nt.toFixed(2);if(!(ne<+Math.min(kt,Kt).toFixed(2)||ne>+Math.max(kt,Kt).toFixed(2)||ne<+Math.min(ue,$t).toFixed(2)||ne>+Math.max(ue,$t).toFixed(2)||ve<+Math.min(Xt,Jt).toFixed(2)||ve>+Math.max(Xt,Jt).toFixed(2)||ve<+Math.min(ce,Ut).toFixed(2)||ve>+Math.max(ce,Ut).toFixed(2)))return{x:Dt,y:Nt}}}},_t=function(kt,Xt,Kt){return Xt>=kt.x&&Xt<=kt.x+kt.width&&Kt>=kt.y&&Kt<=kt.y+kt.height},yt=function(kt,Xt,Kt,Jt,ue){if(ue)return[["M",+kt+ +ue,Xt],["l",Kt-ue*2,0],["a",ue,ue,0,0,1,ue,ue],["l",0,Jt-ue*2],["a",ue,ue,0,0,1,-ue,ue],["l",ue*2-Kt,0],["a",ue,ue,0,0,1,-ue,-ue],["l",0,ue*2-Jt],["a",ue,ue,0,0,1,ue,-ue],["z"]];var ce=[["M",kt,Xt],["l",Kt,0],["l",0,Jt],["l",-Kt,0],["z"]];return ce.parsePathArray=V,ce},lt=function(kt,Xt,Kt,Jt){return kt===null&&(kt=Xt=Kt=Jt=0),Xt===null&&(Xt=kt.y,Kt=kt.width,Jt=kt.height,kt=kt.x),{x:kt,y:Xt,width:Kt,w:Kt,height:Jt,h:Jt,x2:kt+Kt,y2:Xt+Jt,cx:kt+Kt/2,cy:Xt+Jt/2,r1:Math.min(Kt,Jt)/2,r2:Math.max(Kt,Jt)/2,r0:Math.sqrt(Kt*Kt+Jt*Jt)/2,path:yt(kt,Xt,Kt,Jt),vb:[kt,Xt,Kt,Jt].join(" ")}},Lt=function(kt,Xt){return kt=lt(kt),Xt=lt(Xt),_t(Xt,kt.x,kt.y)||_t(Xt,kt.x2,kt.y)||_t(Xt,kt.x,kt.y2)||_t(Xt,kt.x2,kt.y2)||_t(kt,Xt.x,Xt.y)||_t(kt,Xt.x2,Xt.y)||_t(kt,Xt.x,Xt.y2)||_t(kt,Xt.x2,Xt.y2)||(kt.x<Xt.x2&&kt.x>Xt.x||Xt.x<kt.x2&&Xt.x>kt.x)&&(kt.y<Xt.y2&&kt.y>Xt.y||Xt.y<kt.y2&&Xt.y>kt.y)},wt=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut){(0,T.isArray)(kt)||(kt=[kt,Xt,Kt,Jt,ue,ce,$t,Ut]);var Rt=q.apply(null,kt);return lt(Rt.min.x,Rt.min.y,Rt.max.x-Rt.min.x,Rt.max.y-Rt.min.y)},Gt=function(kt,Xt,Kt,Jt,ue,ce,$t,Ut,Rt){var Pt=1-Rt,Yt=Math.pow(Pt,3),Dt=Math.pow(Pt,2),Nt=Rt*Rt,ne=Nt*Rt,ve=Yt*kt+Dt*3*Rt*Kt+Pt*3*Rt*Rt*ue+ne*$t,Re=Yt*Xt+Dt*3*Rt*Jt+Pt*3*Rt*Rt*ce+ne*Ut,je=kt+2*Rt*(Kt-kt)+Nt*(ue-2*Kt+kt),Cr=Xt+2*Rt*(Jt-Xt)+Nt*(ce-2*Jt+Xt),$r=Kt+2*Rt*(ue-Kt)+Nt*($t-2*ue+Kt),Qr=Jt+2*Rt*(ce-Jt)+Nt*(Ut-2*ce+Jt),Ee=Pt*kt+Rt*Kt,yn=Pt*Xt+Rt*Jt,ui=Pt*ue+Rt*$t,la=Pt*ce+Rt*Ut,Or=90-Math.atan2(je-$r,Cr-Qr)*180/Math.PI;return{x:ve,y:Re,m:{x:je,y:Cr},n:{x:$r,y:Qr},start:{x:Ee,y:yn},end:{x:ui,y:la},alpha:Or}},re=function(kt,Xt,Kt){var Jt=wt(kt),ue=wt(Xt);if(!Lt(Jt,ue))return Kt?0:[];for(var ce=K.apply(0,kt),$t=K.apply(0,Xt),Ut=~~(ce/8),Rt=~~($t/8),Pt=[],Yt=[],Dt={},Nt=Kt?0:[],ne=0;ne<Ut+1;ne++){var ve=Gt.apply(0,kt.concat(ne/Ut));Pt.push({x:ve.x,y:ve.y,t:ne/Ut})}for(var ne=0;ne<Rt+1;ne++){var ve=Gt.apply(0,Xt.concat(ne/Rt));Yt.push({x:ve.x,y:ve.y,t:ne/Rt})}for(var ne=0;ne<Ut;ne++)for(var Re=0;Re<Rt;Re++){var je=Pt[ne],Cr=Pt[ne+1],$r=Yt[Re],Qr=Yt[Re+1],Ee=Math.abs(Cr.x-je.x)<.001?"y":"x",yn=Math.abs(Qr.x-$r.x)<.001?"y":"x",ui=ct(je.x,je.y,Cr.x,Cr.y,$r.x,$r.y,Qr.x,Qr.y);if(ui){if(Dt[ui.x.toFixed(4)]===ui.y.toFixed(4))continue;Dt[ui.x.toFixed(4)]=ui.y.toFixed(4);var la=je.t+Math.abs((ui[Ee]-je[Ee])/(Cr[Ee]-je[Ee]))*(Cr.t-je.t),Or=$r.t+Math.abs((ui[yn]-$r[yn])/(Qr[yn]-$r[yn]))*(Qr.t-$r.t);la>=0&&la<=1&&Or>=0&&Or<=1&&(Kt?Nt+=1:Nt.push({x:ui.x,y:ui.y,t1:la,t2:Or}))}}return Nt},Qt=function(kt,Xt,Kt){kt=O(kt),Xt=O(Xt);for(var Jt,ue,ce,$t,Ut,Rt,Pt,Yt,Dt,Nt,ne=Kt?0:[],ve=0,Re=kt.length;ve<Re;ve++){var je=kt[ve];if(je[0]==="M")Jt=Ut=je[1],ue=Rt=je[2];else{je[0]==="C"?(Dt=[Jt,ue].concat(je.slice(1)),Jt=Dt[6],ue=Dt[7]):(Dt=[Jt,ue,Jt,ue,Ut,Rt,Ut,Rt],Jt=Ut,ue=Rt);for(var Cr=0,$r=Xt.length;Cr<$r;Cr++){var Qr=Xt[Cr];if(Qr[0]==="M")ce=Pt=Qr[1],$t=Yt=Qr[2];else{Qr[0]==="C"?(Nt=[ce,$t].concat(Qr.slice(1)),ce=Nt[6],$t=Nt[7]):(Nt=[ce,$t,ce,$t,Pt,Yt,Pt,Yt],ce=Pt,$t=Yt);var Ee=re(Dt,Nt,Kt);if(Kt)ne+=Ee;else{for(var yn=0,ui=Ee.length;yn<ui;yn++)Ee[yn].segment1=ve,Ee[yn].segment2=Cr,Ee[yn].bez1=Dt,Ee[yn].bez2=Nt;ne=ne.concat(Ee)}}}}}return ne},it=function(kt,Xt){return Qt(kt,Xt)};function dt(kt,Xt){var Kt=[],Jt=[];function ue(ce,$t){if(ce.length===1)Kt.push(ce[0]),Jt.push(ce[0]);else{for(var Ut=[],Rt=0;Rt<ce.length-1;Rt++)Rt===0&&Kt.push(ce[0]),Rt===ce.length-2&&Jt.push(ce[Rt+1]),Ut[Rt]=[(1-$t)*ce[Rt][0]+$t*ce[Rt+1][0],(1-$t)*ce[Rt][1]+$t*ce[Rt+1][1]];ue(Ut,$t)}}return kt.length&&ue(kt,Xt),{left:Kt,right:Jt.reverse()}}function gt(kt,Xt,Kt){var Jt=[[kt[1],kt[2]]];Kt=Kt||2;var ue=[];Xt[0]==="A"?(Jt.push(Xt[6]),Jt.push(Xt[7])):Xt[0]==="C"?(Jt.push([Xt[1],Xt[2]]),Jt.push([Xt[3],Xt[4]]),Jt.push([Xt[5],Xt[6]])):Xt[0]==="S"||Xt[0]==="Q"?(Jt.push([Xt[1],Xt[2]]),Jt.push([Xt[3],Xt[4]])):Jt.push([Xt[1],Xt[2]]);for(var ce=Jt,$t=1/Kt,Ut=0;Ut<Kt-1;Ut++){var Rt=$t/(1-$t*Ut),Pt=dt(ce,Rt);ue.push(Pt.left),ce=Pt.right}ue.push(ce);var Yt=ue.map(function(Dt){var Nt=[];return Dt.length===4&&(Nt.push("C"),Nt=Nt.concat(Dt[2])),Dt.length>=3&&(Dt.length===3&&Nt.push("Q"),Nt=Nt.concat(Dt[1])),Dt.length===2&&Nt.push("L"),Nt=Nt.concat(Dt[Dt.length-1]),Nt});return Yt}var vt=function(kt,Xt,Kt){if(Kt===1)return[[].concat(kt)];var Jt=[];if(Xt[0]==="L"||Xt[0]==="C"||Xt[0]==="Q")Jt=Jt.concat(gt(kt,Xt,Kt));else{var ue=[].concat(kt);ue[0]==="M"&&(ue[0]="L");for(var ce=0;ce<=Kt-1;ce++)Jt.push(ue)}return Jt},Y=function(kt,Xt){if(kt.length===1)return kt;var Kt=kt.length-1,Jt=Xt.length-1,ue=Kt/Jt,ce=[];if(kt.length===1&&kt[0][0]==="M"){for(var $t=0;$t<Jt-Kt;$t++)kt.push(kt[0]);return kt}for(var $t=0;$t<Jt;$t++){var Ut=Math.floor(ue*$t);ce[Ut]=(ce[Ut]||0)+1}var Rt=ce.reduce(function(Pt,Yt,Dt){return Dt===Kt?Pt.concat(kt[Kt]):Pt.concat(vt(kt[Dt],kt[Dt+1],Yt))},[]);return Rt.unshift(kt[0]),(Xt[Jt]==="Z"||Xt[Jt]==="z")&&Rt.push("Z"),Rt},ot=function(kt,Xt){if(kt.length!==Xt.length)return!1;var Kt=!0;return(0,T.each)(kt,function(Jt,ue){if(Jt!==Xt[ue])return Kt=!1,!1}),Kt};function nt(kt,Xt,Kt){var Jt=null,ue=Kt;return Xt<ue&&(ue=Xt,Jt="add"),kt<ue&&(ue=kt,Jt="del"),{type:Jt,min:ue}}var rt=function(kt,Xt){var Kt=kt.length,Jt=Xt.length,ue,ce,$t=0;if(Kt===0||Jt===0)return null;for(var Ut=[],Rt=0;Rt<=Kt;Rt++)Ut[Rt]=[],Ut[Rt][0]={min:Rt};for(var Pt=0;Pt<=Jt;Pt++)Ut[0][Pt]={min:Pt};for(var Rt=1;Rt<=Kt;Rt++){ue=kt[Rt-1];for(var Pt=1;Pt<=Jt;Pt++){ce=Xt[Pt-1],ot(ue,ce)?$t=0:$t=1;var Yt=Ut[Rt-1][Pt].min+1,Dt=Ut[Rt][Pt-1].min+1,Nt=Ut[Rt-1][Pt-1].min+$t;Ut[Rt][Pt]=nt(Yt,Dt,Nt)}}return Ut},st=function(kt,Xt){var Kt=rt(kt,Xt),Jt=kt.length,ue=Xt.length,ce=[],$t=1,Ut=1;if(Kt[Jt][ue].min!==Jt){for(var Rt=1;Rt<=Jt;Rt++){var Pt=Kt[Rt][Rt].min;Ut=Rt;for(var Yt=$t;Yt<=ue;Yt++)Kt[Rt][Yt].min<Pt&&(Pt=Kt[Rt][Yt].min,Ut=Yt);$t=Ut,Kt[Rt][$t].type&&ce.push({index:Rt-1,type:Kt[Rt][$t].type})}for(var Rt=ce.length-1;Rt>=0;Rt--)$t=ce[Rt].index,ce[Rt].type==="add"?kt.splice($t,0,[].concat(kt[$t])):kt.splice($t,1)}Jt=kt.length;var Dt=ue-Jt;if(Jt<ue)for(var Rt=0;Rt<Dt;Rt++)kt[Jt-1][0]==="z"||kt[Jt-1][0]==="Z"?kt.splice(Jt-2,0,kt[Jt-2]):kt.push(kt[Jt-1]),Jt+=1;return kt};function d(kt,Xt,Kt){for(var Jt=[].concat(kt),ue,ce=1/(Kt+1),$t=It(Xt)[0],Ut=1;Ut<=Kt;Ut++)ce*=Ut,ue=Math.floor(kt.length*ce),ue===0?Jt.unshift([$t[0]*ce+kt[ue][0]*(1-ce),$t[1]*ce+kt[ue][1]*(1-ce)]):Jt.splice(ue,0,[$t[0]*ce+kt[ue][0]*(1-ce),$t[1]*ce+kt[ue][1]*(1-ce)]);return Jt}function It(kt){var Xt=[];switch(kt[0]){case"M":Xt.push([kt[1],kt[2]]);break;case"L":Xt.push([kt[1],kt[2]]);break;case"A":Xt.push([kt[6],kt[7]]);break;case"Q":Xt.push([kt[3],kt[4]]),Xt.push([kt[1],kt[2]]);break;case"T":Xt.push([kt[1],kt[2]]);break;case"C":Xt.push([kt[5],kt[6]]),Xt.push([kt[1],kt[2]]),Xt.push([kt[3],kt[4]]);break;case"S":Xt.push([kt[3],kt[4]]),Xt.push([kt[1],kt[2]]);break;case"H":Xt.push([kt[1],kt[1]]);break;case"V":Xt.push([kt[1],kt[1]]);break;default:}return Xt}var Ht=function(kt,Xt){if(kt.length<=1)return kt;for(var Kt,Jt=0;Jt<Xt.length;Jt++)if(kt[Jt][0]!==Xt[Jt][0])switch(Kt=It(kt[Jt]),Xt[Jt][0]){case"M":kt[Jt]=["M"].concat(Kt[0]);break;case"L":kt[Jt]=["L"].concat(Kt[0]);break;case"A":kt[Jt]=[].concat(Xt[Jt]),kt[Jt][6]=Kt[0][0],kt[Jt][7]=Kt[0][1];break;case"Q":if(Kt.length<2)if(Jt>0)Kt=d(Kt,kt[Jt-1],1);else{kt[Jt]=Xt[Jt];break}kt[Jt]=["Q"].concat(Kt.reduce(function(ue,ce){return ue.concat(ce)},[]));break;case"T":kt[Jt]=["T"].concat(Kt[0]);break;case"C":if(Kt.length<3)if(Jt>0)Kt=d(Kt,kt[Jt-1],2);else{kt[Jt]=Xt[Jt];break}kt[Jt]=["C"].concat(Kt.reduce(function(ue,ce){return ue.concat(ce)},[]));break;case"S":if(Kt.length<2)if(Jt>0)Kt=d(Kt,kt[Jt-1],1);else{kt[Jt]=Xt[Jt];break}kt[Jt]=["S"].concat(Kt.reduce(function(ue,ce){return ue.concat(ce)},[]));break;default:kt[Jt]=Xt[Jt]}return kt}},84723:function(Vt,P,S){"use strict";S.d(P,{FE:function(){return y},mY:function(){return F},$O:function(){return B}});var T=S(30219),j=S(71319);function y(R,N,A){var D=1;if((0,T.HD)(R)&&(D=R.split(`
`).length),D>1){var M=U(N,A);return N*D+M*(D-1)}return N}function U(R,N){return N?N-R:R*.14}function F(R,N){var A=(0,j.L)(),D=0;if((0,T.kK)(R)||R==="")return D;if(A.save(),A.font=N,(0,T.HD)(R)&&R.includes(`
`)){var M=R.split(`
`);(0,T.S6)(M,function(O){var k=A.measureText(O).width;D<k&&(D=k)})}else D=A.measureText(R).width;return A.restore(),D}function B(R){var N=R.fontSize,A=R.fontFamily,D=R.fontWeight,M=R.fontStyle,O=R.fontVariant;return[M,O,D,N+"px",A].join(" ").trim()}},30219:function(Vt,P,S){"use strict";S.d(P,{As:function(){return j},jU:function(){return y},kK:function(){return T.isNil},mf:function(){return T.isFunction},HD:function(){return T.isString},Kn:function(){return T.isObject},CD:function(){return T.mix},S6:function(){return T.each},jC:function(){return T.upperFirst},UY:function(){return U},pP:function(){return F}});var T=S(49242);function j(B,R){var N=B.indexOf(R);N!==-1&&B.splice(N,1)}var y=typeof window!="undefined"&&typeof window.document!="undefined";function U(B,R){if(B.isCanvas())return!0;for(var N=R.getParent(),A=!1;N;){if(N===B){A=!0;break}N=N.getParent()}return A}function F(B){return B.cfg.visible&&B.cfg.capture}},21885:function(Vt,P){"use strict";var S;S={value:!0};var T=function(){function j(y,U){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=y,this.name=y,this.originalEvent=U,this.timeStamp=U.timeStamp}return j.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},j.prototype.stopPropagation=function(){this.propagationStopped=!0},j.prototype.toString=function(){var y=this.type;return"[Event (type="+y+")]"},j.prototype.save=function(){},j.prototype.restore=function(){},j}();P.Z=T},37050:function(Vt,P,S){"use strict";S.d(P,{ZT:function(){return j}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(it,dt){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var Y in vt)Object.prototype.hasOwnProperty.call(vt,Y)&&(gt[Y]=vt[Y])},T(it,dt)};function j(it,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");T(it,dt);function gt(){this.constructor=it}it.prototype=dt===null?Object.create(dt):(gt.prototype=dt.prototype,new gt)}var y=function(){return y=Object.assign||function(dt){for(var gt,vt=1,Y=arguments.length;vt<Y;vt++){gt=arguments[vt];for(var ot in gt)Object.prototype.hasOwnProperty.call(gt,ot)&&(dt[ot]=gt[ot])}return dt},y.apply(this,arguments)};function U(it,dt){var gt={};for(var vt in it)Object.prototype.hasOwnProperty.call(it,vt)&&dt.indexOf(vt)<0&&(gt[vt]=it[vt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,vt=Object.getOwnPropertySymbols(it);Y<vt.length;Y++)dt.indexOf(vt[Y])<0&&Object.prototype.propertyIsEnumerable.call(it,vt[Y])&&(gt[vt[Y]]=it[vt[Y]]);return gt}function F(it,dt,gt,vt){var Y=arguments.length,ot=Y<3?dt:vt===null?vt=Object.getOwnPropertyDescriptor(dt,gt):vt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,dt,gt,vt);else for(var rt=it.length-1;rt>=0;rt--)(nt=it[rt])&&(ot=(Y<3?nt(ot):Y>3?nt(dt,gt,ot):nt(dt,gt))||ot);return Y>3&&ot&&Object.defineProperty(dt,gt,ot),ot}function B(it,dt){return function(gt,vt){dt(gt,vt,it)}}function R(it,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,dt)}function N(it,dt,gt,vt){function Y(ot){return ot instanceof gt?ot:new gt(function(nt){nt(ot)})}return new(gt||(gt=Promise))(function(ot,nt){function rt(It){try{d(vt.next(It))}catch(Ht){nt(Ht)}}function st(It){try{d(vt.throw(It))}catch(Ht){nt(Ht)}}function d(It){It.done?ot(It.value):Y(It.value).then(rt,st)}d((vt=vt.apply(it,dt||[])).next())})}function A(it,dt){var gt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},vt,Y,ot,nt;return nt={next:rt(0),throw:rt(1),return:rt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function rt(d){return function(It){return st([d,It])}}function st(d){if(vt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(vt=1,Y&&(ot=d[0]&2?Y.return:d[0]?Y.throw||((ot=Y.return)&&ot.call(Y),0):Y.next)&&!(ot=ot.call(Y,d[1])).done)return ot;switch(Y=0,ot&&(d=[d[0]&2,ot.value]),d[0]){case 0:case 1:ot=d;break;case 4:return gt.label++,{value:d[1],done:!1};case 5:gt.label++,Y=d[1],d=[0];continue;case 7:d=gt.ops.pop(),gt.trys.pop();continue;default:if(ot=gt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(d[0]===6||d[0]===2)){gt=0;continue}if(d[0]===3&&(!ot||d[1]>ot[0]&&d[1]<ot[3])){gt.label=d[1];break}if(d[0]===6&&gt.label<ot[1]){gt.label=ot[1],ot=d;break}if(ot&&gt.label<ot[2]){gt.label=ot[2],gt.ops.push(d);break}ot[2]&&gt.ops.pop(),gt.trys.pop();continue}d=dt.call(it,gt)}catch(It){d=[6,It],Y=0}finally{vt=ot=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var D=Object.create?function(it,dt,gt,vt){vt===void 0&&(vt=gt),Object.defineProperty(it,vt,{enumerable:!0,get:function(){return dt[gt]}})}:function(it,dt,gt,vt){vt===void 0&&(vt=gt),it[vt]=dt[gt]};function M(it,dt){for(var gt in it)gt!=="default"&&!Object.prototype.hasOwnProperty.call(dt,gt)&&D(dt,it,gt)}function O(it){var dt=typeof Symbol=="function"&&Symbol.iterator,gt=dt&&it[dt],vt=0;if(gt)return gt.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&vt>=it.length&&(it=void 0),{value:it&&it[vt++],done:!it}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(it,dt){var gt=typeof Symbol=="function"&&it[Symbol.iterator];if(!gt)return it;var vt=gt.call(it),Y,ot=[],nt;try{for(;(dt===void 0||dt-- >0)&&!(Y=vt.next()).done;)ot.push(Y.value)}catch(rt){nt={error:rt}}finally{try{Y&&!Y.done&&(gt=vt.return)&&gt.call(vt)}finally{if(nt)throw nt.error}}return ot}function V(){for(var it=[],dt=0;dt<arguments.length;dt++)it=it.concat(k(arguments[dt]));return it}function X(){for(var it=0,dt=0,gt=arguments.length;dt<gt;dt++)it+=arguments[dt].length;for(var vt=Array(it),Y=0,dt=0;dt<gt;dt++)for(var ot=arguments[dt],nt=0,rt=ot.length;nt<rt;nt++,Y++)vt[Y]=ot[nt];return vt}function K(it,dt,gt){if(gt||arguments.length===2)for(var vt=0,Y=dt.length,ot;vt<Y;vt++)(ot||!(vt in dt))&&(ot||(ot=Array.prototype.slice.call(dt,0,vt)),ot[vt]=dt[vt]);return it.concat(ot||Array.prototype.slice.call(dt))}function q(it){return this instanceof q?(this.v=it,this):new q(it)}function ct(it,dt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=gt.apply(it,dt||[]),Y,ot=[];return Y={},nt("next"),nt("throw"),nt("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function nt(kt){vt[kt]&&(Y[kt]=function(Xt){return new Promise(function(Kt,Jt){ot.push([kt,Xt,Kt,Jt])>1||rt(kt,Xt)})})}function rt(kt,Xt){try{st(vt[kt](Xt))}catch(Kt){Ht(ot[0][3],Kt)}}function st(kt){kt.value instanceof q?Promise.resolve(kt.value.v).then(d,It):Ht(ot[0][2],kt)}function d(kt){rt("next",kt)}function It(kt){rt("throw",kt)}function Ht(kt,Xt){kt(Xt),ot.shift(),ot.length&&rt(ot[0][0],ot[0][1])}}function _t(it){var dt,gt;return dt={},vt("next"),vt("throw",function(Y){throw Y}),vt("return"),dt[Symbol.iterator]=function(){return this},dt;function vt(Y,ot){dt[Y]=it[Y]?function(nt){return(gt=!gt)?{value:q(it[Y](nt)),done:Y==="return"}:ot?ot(nt):nt}:ot}}function yt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it[Symbol.asyncIterator],gt;return dt?dt.call(it):(it=typeof O=="function"?O(it):it[Symbol.iterator](),gt={},vt("next"),vt("throw"),vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function vt(ot){gt[ot]=it[ot]&&function(nt){return new Promise(function(rt,st){nt=it[ot](nt),Y(rt,st,nt.done,nt.value)})}}function Y(ot,nt,rt,st){Promise.resolve(st).then(function(d){ot({value:d,done:rt})},nt)}}function lt(it,dt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:dt}):it.raw=dt,it}var Lt=Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt};function wt(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var gt in it)gt!=="default"&&Object.prototype.hasOwnProperty.call(it,gt)&&D(dt,it,gt);return Lt(dt,it),dt}function Gt(it){return it&&it.__esModule?it:{default:it}}function re(it,dt,gt,vt){if(gt==="a"&&!vt)throw new TypeError("Private accessor was defined without a getter");if(typeof dt=="function"?it!==dt||!vt:!dt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?vt:gt==="a"?vt.call(it):vt?vt.value:dt.get(it)}function Qt(it,dt,gt,vt,Y){if(vt==="m")throw new TypeError("Private method is not writable");if(vt==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof dt=="function"?it!==dt||!Y:!dt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return vt==="a"?Y.call(it,gt):Y?Y.value=gt:dt.set(it,gt),gt}},19083:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(99519),y=S(96533),U=S(24818),F=S(15483),B=S(73074),R=S(94478),N=S(73906),A=function(D){j.__extends(M,D);function M(){return D!==null&&D.apply(this,arguments)||this}return M.prototype.getDefaultCfg=function(){var O=D.prototype.getDefaultCfg.call(this);return O.renderer="canvas",O.autoDraw=!0,O.localRefresh=!0,O.refreshElements=[],O.clipView=!0,O.quickHit=!1,O},M.prototype.onCanvasChange=function(O){(O==="attr"||O==="sort"||O==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},M.prototype.getShapeBase=function(){return F},M.prototype.getGroupBase=function(){return B.default},M.prototype.getPixelRatio=function(){var O=this.get("pixelRatio")||R.getPixelRatio();return O>=1?Math.ceil(O):1},M.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},M.prototype.createDom=function(){var O=document.createElement("canvas"),k=O.getContext("2d");return this.set("context",k),O},M.prototype.setDOMSize=function(O,k){D.prototype.setDOMSize.call(this,O,k);var V=this.get("context"),X=this.get("el"),K=this.getPixelRatio();X.width=K*O,X.height=K*k,K>1&&V.scale(K,K)},M.prototype.clear=function(){D.prototype.clear.call(this),this._clearFrame();var O=this.get("context"),k=this.get("el");O.clearRect(0,0,k.width,k.height)},M.prototype.getShape=function(O,k){var V;return this.get("quickHit")?V=U.getShape(this,O,k):V=D.prototype.getShape.call(this,O,k,null),V},M.prototype._getRefreshRegion=function(){var O=this.get("refreshElements"),k=this.getViewRange(),V;if(O.length&&O[0]===this)V=k;else if(V=N.getMergedRegion(O),V){V.minX=Math.floor(V.minX),V.minY=Math.floor(V.minY),V.maxX=Math.ceil(V.maxX),V.maxY=Math.ceil(V.maxY),V.maxY+=1;var X=this.get("clipView");X&&(V=N.mergeView(V,k))}return V},M.prototype.refreshElement=function(O){var k=this.get("refreshElements");k.push(O)},M.prototype._clearFrame=function(){var O=this.get("drawFrame");O&&(R.clearAnimationFrame(O),this.set("drawFrame",null),this.set("refreshElements",[]))},M.prototype.draw=function(){var O=this.get("drawFrame");this.get("autoDraw")&&O||this._startDraw()},M.prototype._drawAll=function(){var O=this.get("context"),k=this.get("el"),V=this.getChildren();O.clearRect(0,0,k.width,k.height),N.applyAttrsToContext(O,this),N.drawChildren(O,V),this.set("refreshElements",[])},M.prototype._drawRegion=function(){var O=this.get("context"),k=this.get("refreshElements"),V=this.getChildren(),X=this._getRefreshRegion();X?(O.clearRect(X.minX,X.minY,X.maxX-X.minX,X.maxY-X.minY),O.save(),O.beginPath(),O.rect(X.minX,X.minY,X.maxX-X.minX,X.maxY-X.minY),O.clip(),N.applyAttrsToContext(O,this),N.checkRefresh(this,V,X),N.drawChildren(O,V,X),O.restore()):k.length&&N.clearChanged(k),R.each(k,function(K){K.get("hasChanged")&&K.set("hasChanged",!1)}),this.set("refreshElements",[])},M.prototype._startDraw=function(){var O=this,k=this.get("drawFrame");k||(k=R.requestAnimationFrame(function(){O.get("localRefresh")?O._drawRegion():O._drawAll(),O.set("drawFrame",null)}),this.set("drawFrame",k))},M.prototype.skipDraw=function(){},M.prototype.removeDom=function(){var O=this.get("el");O.width=0,O.height=0,O.parentNode.removeChild(O)},M}(y.AbstractCanvas);P.Z=A},73074:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(96533),y=S(15483),U=S(73906),F=S(49242),B=S(94478),R=function(N){T.__extends(A,N);function A(){return N!==null&&N.apply(this,arguments)||this}return A.prototype.onCanvasChange=function(D){U.refreshElement(this,D)},A.prototype.getShapeBase=function(){return y},A.prototype.getGroupBase=function(){return A},A.prototype._applyClip=function(D,M){M&&(D.save(),U.applyAttrsToContext(D,M),M.createPath(D),D.restore(),D.clip(),M._afterDraw())},A.prototype.cacheCanvasBBox=function(){var D=this.cfg.children,M=[],O=[];F.each(D,function(yt){var lt=yt.cfg.cacheCanvasBBox;lt&&yt.cfg.isInView&&(M.push(lt.minX,lt.maxX),O.push(lt.minY,lt.maxY))});var k=null;if(M.length){var V=F.min(M),X=F.max(M),K=F.min(O),q=F.max(O);k={minX:V,minY:K,x:V,y:K,maxX:X,maxY:q,width:X-V,height:q-K};var ct=this.cfg.canvas;if(ct){var _t=ct.getViewRange();this.set("isInView",B.intersectRect(k,_t))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",k)},A.prototype.draw=function(D,M){var O=this.cfg.children,k=M?this.cfg.refresh:!0;O.length&&k&&(D.save(),U.applyAttrsToContext(D,this),this._applyClip(D,this.getClip()),U.drawChildren(D,O,M),D.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},A.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},A}(j.AbstractGroup);P.default=R},74460:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(96533),y=S(94478),U=S(73906),F=S(96533),B=S(15483),R=S(73074),N=function(A){T.__extends(D,A);function D(){return A!==null&&A.apply(this,arguments)||this}return D.prototype.getDefaultAttrs=function(){var M=A.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},M),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},D.prototype.getShapeBase=function(){return B},D.prototype.getGroupBase=function(){return R.default},D.prototype.onCanvasChange=function(M){U.refreshElement(this,M)},D.prototype.calculateBBox=function(){var M=this.get("type"),O=this.getHitLineWidth(),k=F.getBBoxMethod(M),V=k(this),X=O/2,K=V.x-X,q=V.y-X,ct=V.x+V.width+X,_t=V.y+V.height+X;return{x:K,minX:K,y:q,minY:q,width:V.width+O,height:V.height+O,maxX:ct,maxY:_t}},D.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},D.prototype.isStroke=function(){return!!this.attrs.stroke},D.prototype._applyClip=function(M,O){O&&(M.save(),U.applyAttrsToContext(M,O),O.createPath(M),M.restore(),M.clip(),O._afterDraw())},D.prototype.draw=function(M,O){var k=this.cfg.clipShape;if(O){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var V=this.getCanvasBBox();if(!y.intersectRect(O,V)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}M.save(),U.applyAttrsToContext(M,this),this._applyClip(M,k),this.drawPath(M),M.restore(),this._afterDraw()},D.prototype.getCanvasViewBox=function(){var M=this.cfg.canvas;return M?M.getViewRange():null},D.prototype.cacheCanvasBBox=function(){var M=this.getCanvasViewBox();if(M){var O=this.getCanvasBBox(),k=y.intersectRect(O,M);this.set("isInView",k),k?this.set("cacheCanvasBBox",O):this.set("cacheCanvasBBox",null)}},D.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},D.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},D.prototype.drawPath=function(M){this.createPath(M),this.strokeAndFill(M),this.afterDrawPath(M)},D.prototype.fill=function(M){M.fill()},D.prototype.stroke=function(M){M.stroke()},D.prototype.strokeAndFill=function(M){var O=this.attrs,k=O.lineWidth,V=O.opacity,X=O.strokeOpacity,K=O.fillOpacity;this.isFill()&&(!y.isNil(K)&&K!==1?(M.globalAlpha=K,this.fill(M),M.globalAlpha=V):this.fill(M)),this.isStroke()&&k>0&&(!y.isNil(X)&&X!==1&&(M.globalAlpha=X),this.stroke(M)),this.afterDrawPath(M)},D.prototype.createPath=function(M){},D.prototype.afterDrawPath=function(M){},D.prototype.isInShape=function(M,O){var k=this.isStroke(),V=this.isFill(),X=this.getHitLineWidth();return this.isInStrokeOrPath(M,O,k,V,X)},D.prototype.isInStrokeOrPath=function(M,O,k,V,X){return!1},D.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var M=this.attrs;return M.lineWidth+M.lineAppendWidth},D}(j.AbstractShape);P.default=N},66778:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460),y=S(94478),U=function(F){T.__extends(B,F);function B(){return F!==null&&F.apply(this,arguments)||this}return B.prototype.getDefaultAttrs=function(){var R=F.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},R),{x:0,y:0,r:0})},B.prototype.isInStrokeOrPath=function(R,N,A,D,M){var O=this.attr(),k=O.x,V=O.y,X=O.r,K=M/2,q=y.distance(k,V,R,N);return D&&A?q<=X+K:D?q<=X:A?q>=X-K&&q<=X+K:!1},B.prototype.createPath=function(R){var N=this.attr(),A=N.x,D=N.y,M=N.r;R.beginPath(),R.arc(A,D,M,0,Math.PI*2,!1),R.closePath()},B}(j.default);P.default=U},21421:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460);function y(F,B,R,N){return F/(R*R)+B/(N*N)}var U=function(F){T.__extends(B,F);function B(){return F!==null&&F.apply(this,arguments)||this}return B.prototype.getDefaultAttrs=function(){var R=F.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},R),{x:0,y:0,rx:0,ry:0})},B.prototype.isInStrokeOrPath=function(R,N,A,D,M){var O=this.attr(),k=M/2,V=O.x,X=O.y,K=O.rx,q=O.ry,ct=(R-V)*(R-V),_t=(N-X)*(N-X);return D&&A?y(ct,_t,K+k,q+k)<=1:D?y(ct,_t,K,q)<=1:A?y(ct,_t,K-k,q-k)>=1&&y(ct,_t,K+k,q+k)<=1:!1},B.prototype.createPath=function(R){var N=this.attr(),A=N.x,D=N.y,M=N.rx,O=N.ry;if(R.beginPath(),R.ellipse)R.ellipse(A,D,M,O,0,0,Math.PI*2,!1);else{var k=M>O?M:O,V=M>O?1:M/O,X=M>O?O/M:1;R.save(),R.translate(A,D),R.scale(V,X),R.arc(0,0,k,0,Math.PI*2),R.restore(),R.closePath()}},B}(j.default);P.default=U},89473:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460),y=S(94478);function U(B){return B instanceof HTMLElement&&y.isString(B.nodeName)&&B.nodeName.toUpperCase()==="CANVAS"}var F=function(B){T.__extends(R,B);function R(){return B!==null&&B.apply(this,arguments)||this}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{x:0,y:0,width:0,height:0})},R.prototype.initAttrs=function(N){this._setImage(N.img)},R.prototype.isStroke=function(){return!1},R.prototype.isOnlyHitBox=function(){return!0},R.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var N=this.get("canvas");N?N.draw():this.createPath(this.get("context"))}},R.prototype._setImage=function(N){var A=this,D=this.attrs;if(y.isString(N)){var M=new Image;M.onload=function(){if(A.destroyed)return!1;A.attr("img",M),A.set("loading",!1),A._afterLoading();var O=A.get("callback");O&&O.call(A)},M.crossOrigin="Anonymous",M.src=N,this.set("loading",!0)}else N instanceof Image?(D.width||(D.width=N.width),D.height||(D.height=N.height)):U(N)&&(D.width||(D.width=Number(N.getAttribute("width"))),D.height||(D.height,Number(N.getAttribute("height"))))},R.prototype.onAttrChange=function(N,A,D){B.prototype.onAttrChange.call(this,N,A,D),N==="img"&&this._setImage(A)},R.prototype.createPath=function(N){if(this.get("loading")){this.set("toDraw",!0),this.set("context",N);return}var A=this.attr(),D=A.x,M=A.y,O=A.width,k=A.height,V=A.sx,X=A.sy,K=A.swidth,q=A.sheight,ct=A.img;(ct instanceof Image||U(ct))&&(!y.isNil(V)&&!y.isNil(X)&&!y.isNil(K)&&!y.isNil(q)?N.drawImage(ct,V,X,K,q,D,M,O,k):N.drawImage(ct,D,M,O,k))},R}(j.default);P.default=F},15483:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Text=P.Rect=P.Polyline=P.Polygon=P.Path=P.Marker=P.Line=P.Image=P.Ellipse=P.Circle=P.Base=void 0;var T=S(74460);Object.defineProperty(P,"Base",{enumerable:!0,get:function(){return T.default}});var j=S(66778);Object.defineProperty(P,"Circle",{enumerable:!0,get:function(){return j.default}});var y=S(21421);Object.defineProperty(P,"Ellipse",{enumerable:!0,get:function(){return y.default}});var U=S(89473);Object.defineProperty(P,"Image",{enumerable:!0,get:function(){return U.default}});var F=S(32766);Object.defineProperty(P,"Line",{enumerable:!0,get:function(){return F.default}});var B=S(50796);Object.defineProperty(P,"Marker",{enumerable:!0,get:function(){return B.default}});var R=S(42489);Object.defineProperty(P,"Path",{enumerable:!0,get:function(){return R.default}});var N=S(51567);Object.defineProperty(P,"Polygon",{enumerable:!0,get:function(){return N.default}});var A=S(54423);Object.defineProperty(P,"Polyline",{enumerable:!0,get:function(){return A.default}});var D=S(83095);Object.defineProperty(P,"Rect",{enumerable:!0,get:function(){return D.default}});var M=S(17860);Object.defineProperty(P,"Text",{enumerable:!0,get:function(){return M.default}})},32766:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(89838),y=S(74460),U=S(63131),F=S(87200),B=function(R){T.__extends(N,R);function N(){return R!==null&&R.apply(this,arguments)||this}return N.prototype.getDefaultAttrs=function(){var A=R.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},A),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},N.prototype.initAttrs=function(A){this.setArrow()},N.prototype.onAttrChange=function(A,D,M){R.prototype.onAttrChange.call(this,A,D,M),this.setArrow()},N.prototype.setArrow=function(){var A=this.attr(),D=A.x1,M=A.y1,O=A.x2,k=A.y2,V=A.startArrow,X=A.endArrow;V&&F.addStartArrow(this,A,O,k,D,M),X&&F.addEndArrow(this,A,D,M,O,k)},N.prototype.isInStrokeOrPath=function(A,D,M,O,k){if(!M||!k)return!1;var V=this.attr(),X=V.x1,K=V.y1,q=V.x2,ct=V.y2;return U.default(X,K,q,ct,k,A,D)},N.prototype.createPath=function(A){var D=this.attr(),M=D.x1,O=D.y1,k=D.x2,V=D.y2,X=D.startArrow,K=D.endArrow,q={dx:0,dy:0},ct={dx:0,dy:0};X&&X.d&&(q=F.getShortenOffset(M,O,k,V,D.startArrow.d)),K&&K.d&&(ct=F.getShortenOffset(M,O,k,V,D.endArrow.d)),A.beginPath(),A.moveTo(M+q.dx,O+q.dy),A.lineTo(k-ct.dx,V-ct.dy)},N.prototype.afterDrawPath=function(A){var D=this.get("startArrowShape"),M=this.get("endArrowShape");D&&D.draw(A),M&&M.draw(A)},N.prototype.getTotalLength=function(){var A=this.attr(),D=A.x1,M=A.y1,O=A.x2,k=A.y2;return j.Line.length(D,M,O,k)},N.prototype.getPoint=function(A){var D=this.attr(),M=D.x1,O=D.y1,k=D.x2,V=D.y2;return j.Line.pointAt(M,O,k,V,A)},N}(y.default);P.default=B},50796:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(49242),y=S(57350),U=S(74460),F=S(94478),B=S(73906),R={circle:function(A,D,M){return[["M",A-M,D],["A",M,M,0,1,0,A+M,D],["A",M,M,0,1,0,A-M,D]]},square:function(A,D,M){return[["M",A-M,D-M],["L",A+M,D-M],["L",A+M,D+M],["L",A-M,D+M],["Z"]]},diamond:function(A,D,M){return[["M",A-M,D],["L",A,D-M],["L",A+M,D],["L",A,D+M],["Z"]]},triangle:function(A,D,M){var O=M*Math.sin(1/3*Math.PI);return[["M",A-M,D+O],["L",A,D-O],["L",A+M,D+O],["Z"]]},"triangle-down":function(A,D,M){var O=M*Math.sin(1/3*Math.PI);return[["M",A-M,D-O],["L",A+M,D-O],["L",A,D+O],["Z"]]}},N=function(A){T.__extends(D,A);function D(){return A!==null&&A.apply(this,arguments)||this}return D.prototype.initAttrs=function(M){this._resetParamsCache()},D.prototype._resetParamsCache=function(){this.set("paramsCache",{})},D.prototype.onAttrChange=function(M,O,k){A.prototype.onAttrChange.call(this,M,O,k),["symbol","x","y","r","radius"].indexOf(M)!==-1&&this._resetParamsCache()},D.prototype.isOnlyHitBox=function(){return!0},D.prototype._getR=function(M){return j.isNil(M.r)?M.radius:M.r},D.prototype._getPath=function(){var M=this.attr(),O=M.x,k=M.y,V=M.symbol||"circle",X=this._getR(M),K,q;if(F.isFunction(V))K=V,q=K(O,k,X),q=y.path2Absolute(q);else{if(K=D.Symbols[V],!K)return console.warn(V+" marker is not supported."),null;q=K(O,k,X)}return q},D.prototype.createPath=function(M){var O=this._getPath(),k=this.get("paramsCache");B.drawPath(this,M,{path:O},k)},D.Symbols=R,D}(U.default);P.default=N},42489:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(89838),y=S(49242),U=S(74460),F=S(57350),B=S(73906),R=S(55978),N=S(4043),A=S(32460),D=S(87200);function M(k,V,X){for(var K=!1,q=0;q<k.length;q++){var ct=k[q];if(K=N.default(ct,V,X),K)break}return K}var O=function(k){T.__extends(V,k);function V(){return k!==null&&k.apply(this,arguments)||this}return V.prototype.getDefaultAttrs=function(){var X=k.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},X),{startArrow:!1,endArrow:!1})},V.prototype.initAttrs=function(X){this._setPathArr(X.path),this.setArrow()},V.prototype.onAttrChange=function(X,K,q){k.prototype.onAttrChange.call(this,X,K,q),X==="path"&&this._setPathArr(K),this.setArrow()},V.prototype._setPathArr=function(X){this.attrs.path=F.path2Absolute(X);var K=A.default.hasArc(X);this.set("hasArc",K),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},V.prototype.getSegments=function(){var X=this.get("segements");return X||(X=F.path2Segments(this.attr("path")),this.set("segments",X)),X},V.prototype.setArrow=function(){var X=this.attr(),K=X.startArrow,q=X.endArrow;if(K){var ct=this.getStartTangent();D.addStartArrow(this,X,ct[0][0],ct[0][1],ct[1][0],ct[1][1])}if(q){var ct=this.getEndTangent();D.addEndArrow(this,X,ct[0][0],ct[0][1],ct[1][0],ct[1][1])}},V.prototype.isInStrokeOrPath=function(X,K,q,ct,_t){var yt=this.getSegments(),lt=this.get("hasArc"),Lt=!1;if(q){var wt=this.getTotalLength();Lt=A.default.isPointInStroke(yt,_t,X,K,wt)}if(!Lt&&ct)if(lt)Lt=R.default(this,X,K);else{var Gt=this.attr("path"),re=A.default.extractPolygons(Gt);Lt=M(re.polygons,X,K)||M(re.polylines,X,K)}return Lt},V.prototype.createPath=function(X){var K=this.attr(),q=this.get("paramsCache");B.drawPath(this,X,K,q)},V.prototype.afterDrawPath=function(X){var K=this.get("startArrowShape"),q=this.get("endArrowShape");K&&K.draw(X),q&&q.draw(X)},V.prototype.getTotalLength=function(){var X=this.get("totalLength");return y.isNil(X)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):X},V.prototype.getPoint=function(X){var K=this.get("tCache");K||(this._calculateCurve(),this._setTcache(),K=this.get("tCache"));var q,ct,_t=this.get("curve");if(!K||K.length===0)return _t?{x:_t[0][1],y:_t[0][2]}:null;y.each(K,function(wt,Gt){X>=wt[0]&&X<=wt[1]&&(q=(X-wt[0])/(wt[1]-wt[0]),ct=Gt)});var yt=_t[ct];if(y.isNil(yt)||y.isNil(ct))return null;var lt=yt.length,Lt=_t[ct+1];return j.Cubic.pointAt(yt[lt-2],yt[lt-1],Lt[1],Lt[2],Lt[3],Lt[4],Lt[5],Lt[6],q)},V.prototype._calculateCurve=function(){var X=this.attr().path;this.set("curve",A.default.pathToCurve(X))},V.prototype._setTcache=function(){var X=0,K=0,q=[],ct,_t,yt,lt,Lt=this.get("curve");if(!!Lt){if(y.each(Lt,function(wt,Gt){yt=Lt[Gt+1],lt=wt.length,yt&&(X+=j.Cubic.length(wt[lt-2],wt[lt-1],yt[1],yt[2],yt[3],yt[4],yt[5],yt[6])||0)}),this.set("totalLength",X),X===0){this.set("tCache",[]);return}y.each(Lt,function(wt,Gt){yt=Lt[Gt+1],lt=wt.length,yt&&(ct=[],ct[0]=K/X,_t=j.Cubic.length(wt[lt-2],wt[lt-1],yt[1],yt[2],yt[3],yt[4],yt[5],yt[6]),K+=_t||0,ct[1]=K/X,q.push(ct))}),this.set("tCache",q)}},V.prototype.getStartTangent=function(){var X=this.getSegments(),K;if(X.length>1){var q=X[0].currentPoint,ct=X[1].currentPoint,_t=X[1].startTangent;K=[],_t?(K.push([q[0]-_t[0],q[1]-_t[1]]),K.push([q[0],q[1]])):(K.push([ct[0],ct[1]]),K.push([q[0],q[1]]))}return K},V.prototype.getEndTangent=function(){var X=this.getSegments(),K=X.length,q;if(K>1){var ct=X[K-2].currentPoint,_t=X[K-1].currentPoint,yt=X[K-1].endTangent;q=[],yt?(q.push([_t[0]-yt[0],_t[1]-yt[1]]),q.push([_t[0],_t[1]])):(q.push([ct[0],ct[1]]),q.push([_t[0],_t[1]]))}return q},V}(U.default);P.default=O},51567:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460),y=S(70625),U=S(4043),F=function(B){T.__extends(R,B);function R(){return B!==null&&B.apply(this,arguments)||this}return R.prototype.isInStrokeOrPath=function(N,A,D,M,O){var k=this.attr().points,V=!1;return D&&(V=y.default(k,O,N,A,!0)),!V&&M&&(V=U.default(k,N,A)),V},R.prototype.createPath=function(N){var A=this.attr(),D=A.points;if(!(D.length<2)){N.beginPath();for(var M=0;M<D.length;M++){var O=D[M];M===0?N.moveTo(O[0],O[1]):N.lineTo(O[0],O[1])}N.closePath()}},R}(j.default);P.default=F},54423:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(89838),y=S(89838),U=S(49242),F=S(74460),B=S(70625),R=S(87200),N=function(A){T.__extends(D,A);function D(){return A!==null&&A.apply(this,arguments)||this}return D.prototype.getDefaultAttrs=function(){var M=A.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},M),{startArrow:!1,endArrow:!1})},D.prototype.initAttrs=function(M){this.setArrow()},D.prototype.onAttrChange=function(M,O,k){A.prototype.onAttrChange.call(this,M,O,k),this.setArrow(),["points"].indexOf(M)!==-1&&this._resetCache()},D.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},D.prototype.setArrow=function(){var M=this.attr(),O=this.attrs,k=O.points,V=O.startArrow,X=O.endArrow,K=k.length,q=k[0][0],ct=k[0][1],_t=k[K-1][0],yt=k[K-1][1];V&&R.addStartArrow(this,M,k[1][0],k[1][1],q,ct),X&&R.addEndArrow(this,M,k[K-2][0],k[K-2][1],_t,yt)},D.prototype.isFill=function(){return!1},D.prototype.isInStrokeOrPath=function(M,O,k,V,X){if(!k||!X)return!1;var K=this.attr().points;return B.default(K,X,M,O,!1)},D.prototype.isStroke=function(){return!0},D.prototype.createPath=function(M){var O=this.attr(),k=O.points,V=O.startArrow,X=O.endArrow,K=k.length;if(!(k.length<2)){var q=k[0][0],ct=k[0][1],_t=k[K-1][0],yt=k[K-1][1];if(V&&V.d){var lt=R.getShortenOffset(q,ct,k[1][0],k[1][1],V.d);q+=lt.dx,ct+=lt.dy}if(X&&X.d){var lt=R.getShortenOffset(k[K-2][0],k[K-2][1],_t,yt,X.d);_t-=lt.dx,yt-=lt.dy}M.beginPath(),M.moveTo(q,ct);for(var Lt=0;Lt<K-1;Lt++){var wt=k[Lt];M.lineTo(wt[0],wt[1])}M.lineTo(_t,yt)}},D.prototype.afterDrawPath=function(M){var O=this.get("startArrowShape"),k=this.get("endArrowShape");O&&O.draw(M),k&&k.draw(M)},D.prototype.getTotalLength=function(){var M=this.attr().points,O=this.get("totalLength");return U.isNil(O)?(this.set("totalLength",y.Polyline.length(M)),this.get("totalLength")):O},D.prototype.getPoint=function(M){var O=this.attr().points,k=this.get("tCache");k||(this._setTcache(),k=this.get("tCache"));var V,X;return U.each(k,function(K,q){M>=K[0]&&M<=K[1]&&(V=(M-K[0])/(K[1]-K[0]),X=q)}),j.Line.pointAt(O[X][0],O[X][1],O[X+1][0],O[X+1][1],V)},D.prototype._setTcache=function(){var M=this.attr().points;if(!(!M||M.length===0)){var O=this.getTotalLength();if(!(O<=0)){var k=0,V=[],X,K;U.each(M,function(q,ct){M[ct+1]&&(X=[],X[0]=k/O,K=j.Line.length(q[0],q[1],M[ct+1][0],M[ct+1][1]),k+=K,X[1]=k/O,V.push(X))}),this.set("tCache",V)}}},D.prototype.getStartTangent=function(){var M=this.attr().points,O=[];return O.push([M[1][0],M[1][1]]),O.push([M[0][0],M[0][1]]),O},D.prototype.getEndTangent=function(){var M=this.attr().points,O=M.length-1,k=[];return k.push([M[O-1][0],M[O-1][1]]),k.push([M[O][0],M[O][1]]),k},D}(F.default);P.default=N},83095:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460),y=S(62948),U=S(94478),F=S(47946),B=S(19626),R=S(55978),N=function(A){T.__extends(D,A);function D(){return A!==null&&A.apply(this,arguments)||this}return D.prototype.getDefaultAttrs=function(){var M=A.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},M),{x:0,y:0,width:0,height:0,radius:0})},D.prototype.isInStrokeOrPath=function(M,O,k,V,X){var K=this.attr(),q=K.x,ct=K.y,_t=K.width,yt=K.height,lt=K.radius;if(lt){var wt=!1;return k&&(wt=B.default(q,ct,_t,yt,lt,X,M,O)),!wt&&V&&(wt=R.default(this,M,O)),wt}else{var Lt=X/2;if(V&&k)return U.inBox(q-Lt,ct-Lt,_t+Lt,yt+Lt,M,O);if(V)return U.inBox(q,ct,_t,yt,M,O);if(k)return F.default(q,ct,_t,yt,X,M,O)}},D.prototype.createPath=function(M){var O=this.attr(),k=O.x,V=O.y,X=O.width,K=O.height,q=O.radius;if(M.beginPath(),q===0)M.rect(k,V,X,K);else{var ct=y.parseRadius(q),_t=ct[0],yt=ct[1],lt=ct[2],Lt=ct[3];M.moveTo(k+_t,V),M.lineTo(k+X-yt,V),yt!==0&&M.arc(k+X-yt,V+yt,yt,-Math.PI/2,0),M.lineTo(k+X,V+K-lt),lt!==0&&M.arc(k+X-lt,V+K-lt,lt,0,Math.PI/2),M.lineTo(k+Lt,V+K),Lt!==0&&M.arc(k+Lt,V+K-Lt,Lt,Math.PI/2,Math.PI),M.lineTo(k,V+_t),_t!==0&&M.arc(k+_t,V+_t,_t,Math.PI,Math.PI*1.5),M.closePath()}},D}(j.default);P.default=N},17860:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(74460),y=S(94478),U=S(96533),F=function(B){T.__extends(R,B);function R(){return B!==null&&B.apply(this,arguments)||this}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},R.prototype.isOnlyHitBox=function(){return!0},R.prototype.initAttrs=function(N){this._assembleFont(),N.text&&this._setText(N.text)},R.prototype._assembleFont=function(){var N=this.attrs;N.font=U.assembleFont(N)},R.prototype._setText=function(N){var A=null;y.isString(N)&&N.indexOf(`
`)!==-1&&(A=N.split(`
`)),this.set("textArr",A)},R.prototype.onAttrChange=function(N,A,D){B.prototype.onAttrChange.call(this,N,A,D),N.startsWith("font")&&this._assembleFont(),N==="text"&&this._setText(A)},R.prototype._getSpaceingY=function(){var N=this.attrs,A=N.lineHeight,D=N.fontSize*1;return A?A-D:D*.14},R.prototype._drawTextArr=function(N,A,D){var M=this.attrs,O=M.textBaseline,k=M.x,V=M.y,X=M.fontSize*1,K=this._getSpaceingY(),q=U.getTextHeight(M.text,M.fontSize,M.lineHeight),ct;y.each(A,function(_t,yt){ct=V+yt*(K+X)-q+X,O==="middle"&&(ct+=q-X-(q-X)/2),O==="top"&&(ct+=q-X),y.isNil(_t)||(D?N.fillText(_t,k,ct):N.strokeText(_t,k,ct))})},R.prototype._drawText=function(N,A){var D=this.attr(),M=D.x,O=D.y,k=this.get("textArr");if(k)this._drawTextArr(N,k,A);else{var V=D.text;y.isNil(V)||(A?N.fillText(V,M,O):N.strokeText(V,M,O))}},R.prototype.strokeAndFill=function(N){var A=this.attrs,D=A.lineWidth,M=A.opacity,O=A.strokeOpacity,k=A.fillOpacity;this.isStroke()&&D>0&&(!y.isNil(O)&&O!==1&&(N.globalAlpha=M),this.stroke(N)),this.isFill()&&(!y.isNil(k)&&k!==1?(N.globalAlpha=k,this.fill(N),N.globalAlpha=M):this.fill(N)),this.afterDrawPath(N)},R.prototype.fill=function(N){this._drawText(N,!0)},R.prototype.stroke=function(N){this._drawText(N,!1)},R}(j.default);P.default=F},56921:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(94478);function j(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1])}function y(B,R){return j(B)*j(R)?(B[0]*R[0]+B[1]*R[1])/(j(B)*j(R)):1}function U(B,R){return(B[0]*R[1]<B[1]*R[0]?-1:1)*Math.acos(y(B,R))}function F(B,R){var N=R[1],A=R[2],D=T.mod(T.toRadian(R[3]),Math.PI*2),M=R[4],O=R[5],k=B[0],V=B[1],X=R[6],K=R[7],q=Math.cos(D)*(k-X)/2+Math.sin(D)*(V-K)/2,ct=-1*Math.sin(D)*(k-X)/2+Math.cos(D)*(V-K)/2,_t=q*q/(N*N)+ct*ct/(A*A);_t>1&&(N*=Math.sqrt(_t),A*=Math.sqrt(_t));var yt=N*N*(ct*ct)+A*A*(q*q),lt=yt?Math.sqrt((N*N*(A*A)-yt)/yt):1;M===O&&(lt*=-1),isNaN(lt)&&(lt=0);var Lt=A?lt*N*ct/A:0,wt=N?lt*-A*q/N:0,Gt=(k+X)/2+Math.cos(D)*Lt-Math.sin(D)*wt,re=(V+K)/2+Math.sin(D)*Lt+Math.cos(D)*wt,Qt=[(q-Lt)/N,(ct-wt)/A],it=[(-1*q-Lt)/N,(-1*ct-wt)/A],dt=U([1,0],Qt),gt=U(Qt,it);return y(Qt,it)<=-1&&(gt=Math.PI),y(Qt,it)>=1&&(gt=0),O===0&&gt>0&&(gt=gt-2*Math.PI),O===1&&gt<0&&(gt=gt+2*Math.PI),{cx:Gt,cy:re,rx:T.isSamePoint(B,[X,K])?0:N,ry:T.isSamePoint(B,[X,K])?0:A,startAngle:dt,endAngle:dt+gt,xRotation:D,arcFlag:M,sweepFlag:O}}P.default=F},87200:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.addEndArrow=P.addStartArrow=P.getShortenOffset=void 0;var T=S(99519),j=S(15483),y=Math.sin,U=Math.cos,F=Math.atan2,B=Math.PI;function R(O,k,V,X,K,q,ct){var _t=k.stroke,yt=k.lineWidth,lt=V-K,Lt=X-q,wt=F(Lt,lt),Gt=new j.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*U(B/6)+","+10*y(B/6)+" L0,0 L"+10*U(B/6)+",-"+10*y(B/6),stroke:_t,lineWidth:yt}});Gt.translate(K,q),Gt.rotateAtPoint(K,q,wt),O.set(ct?"startArrowShape":"endArrowShape",Gt)}function N(O,k,V,X,K,q,ct){var _t=k.startArrow,yt=k.endArrow,lt=k.stroke,Lt=k.lineWidth,wt=ct?_t:yt,Gt=wt.d,re=wt.fill,Qt=wt.stroke,it=wt.lineWidth,dt=T.__rest(wt,["d","fill","stroke","lineWidth"]),gt=V-K,vt=X-q,Y=F(vt,gt);Gt&&(K=K-U(Y)*Gt,q=q-y(Y)*Gt);var ot=new j.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:T.__assign(T.__assign({},dt),{stroke:Qt||lt,lineWidth:it||Lt,fill:re})});ot.translate(K,q),ot.rotateAtPoint(K,q,Y),O.set(ct?"startArrowShape":"endArrowShape",ot)}function A(O,k,V,X,K){var q=F(X-k,V-O);return{dx:U(q)*K,dy:y(q)*K}}P.getShortenOffset=A;function D(O,k,V,X,K,q){typeof k.startArrow=="object"?N(O,k,V,X,K,q,!0):k.startArrow?R(O,k,V,X,K,q,!0):O.set("startArrowShape",null)}P.addStartArrow=D;function M(O,k,V,X,K,q){typeof k.endArrow=="object"?N(O,k,V,X,K,q,!1):k.endArrow?R(O,k,V,X,K,q,!1):O.set("startArrowShape",null)}P.addEndArrow=M},73906:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.mergeView=P.getMergedRegion=P.getRefreshRegion=P.refreshElement=P.drawPath=P.clearChanged=P.checkChildrenRefresh=P.checkRefresh=P.drawChildren=P.applyAttrsToContext=void 0;var T=S(49242),j=S(62948),y=S(56921),U=S(94478),F=S(87200),B={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function R(_t,yt){var lt=yt.attr();for(var Lt in lt){var wt=lt[Lt],Gt=B[Lt]?B[Lt]:Lt;Gt==="matrix"&&wt?_t.transform(wt[0],wt[1],wt[3],wt[4],wt[6],wt[7]):Gt==="lineDash"&&_t.setLineDash?T.isArray(wt)&&_t.setLineDash(wt):(Gt==="strokeStyle"||Gt==="fillStyle"?wt=j.parseStyle(_t,yt,wt):Gt==="globalAlpha"&&(wt=wt*_t.globalAlpha),_t[Gt]=wt)}}P.applyAttrsToContext=R;function N(_t,yt,lt){for(var Lt=0;Lt<yt.length;Lt++){var wt=yt[Lt];wt.cfg.visible?wt.draw(_t,lt):wt.skipDraw()}}P.drawChildren=N;function A(_t,yt,lt){var Lt=_t.get("refreshElements");T.each(Lt,function(wt){if(wt!==_t)for(var Gt=wt.cfg.parent;Gt&&Gt!==_t&&!Gt.cfg.refresh;)Gt.cfg.refresh=!0,Gt=Gt.cfg.parent}),Lt[0]===_t?O(yt,lt):D(yt,lt)}P.checkRefresh=A;function D(_t,yt){for(var lt=0;lt<_t.length;lt++){var Lt=_t[lt];if(Lt.cfg.visible)if(Lt.cfg.hasChanged)Lt.cfg.refresh=!0,Lt.isGroup()&&O(Lt.cfg.children,yt);else if(Lt.cfg.refresh)Lt.isGroup()&&D(Lt.cfg.children,yt);else{var wt=k(Lt,yt);Lt.cfg.refresh=wt,wt&&Lt.isGroup()&&D(Lt.cfg.children,yt)}}}P.checkChildrenRefresh=D;function M(_t){for(var yt=0;yt<_t.length;yt++){var lt=_t[yt];lt.cfg.hasChanged=!1,lt.isGroup()&&!lt.destroyed&&M(lt.cfg.children)}}P.clearChanged=M;function O(_t,yt){for(var lt=0;lt<_t.length;lt++){var Lt=_t[lt];Lt.cfg.refresh=!0,Lt.isGroup()&&O(Lt.get("children"),yt)}}function k(_t,yt){var lt=_t.cfg.cacheCanvasBBox,Lt=_t.cfg.isInView&&lt&&U.intersectRect(lt,yt);return Lt}function V(_t,yt,lt,Lt){var wt=lt.path,Gt=lt.startArrow,re=lt.endArrow;if(!!wt){var Qt=[0,0],it=[0,0],dt={dx:0,dy:0};yt.beginPath();for(var gt=0;gt<wt.length;gt++){var vt=wt[gt],Y=vt[0];if(gt===0&&Gt&&Gt.d){var ot=_t.getStartTangent();dt=F.getShortenOffset(ot[0][0],ot[0][1],ot[1][0],ot[1][1],Gt.d)}else if(gt===wt.length-2&&wt[gt+1][0]==="Z"&&re&&re.d){var nt=wt[gt+1];if(nt[0]==="Z"){var ot=_t.getEndTangent();dt=F.getShortenOffset(ot[0][0],ot[0][1],ot[1][0],ot[1][1],re.d)}}else if(gt===wt.length-1&&re&&re.d&&wt[0]!=="Z"){var ot=_t.getEndTangent();dt=F.getShortenOffset(ot[0][0],ot[0][1],ot[1][0],ot[1][1],re.d)}var rt=dt.dx,st=dt.dy;switch(Y){case"M":yt.moveTo(vt[1]-rt,vt[2]-st),it=[vt[1],vt[2]];break;case"L":yt.lineTo(vt[1]-rt,vt[2]-st);break;case"Q":yt.quadraticCurveTo(vt[1],vt[2],vt[3]-rt,vt[4]-st);break;case"C":yt.bezierCurveTo(vt[1],vt[2],vt[3],vt[4],vt[5]-rt,vt[6]-st);break;case"A":{var d=void 0;Lt?(d=Lt[gt],d||(d=y.default(Qt,vt),Lt[gt]=d)):d=y.default(Qt,vt);var It=d.cx,Ht=d.cy,kt=d.rx,Xt=d.ry,Kt=d.startAngle,Jt=d.endAngle,ue=d.xRotation,ce=d.sweepFlag;if(yt.ellipse)yt.ellipse(It,Ht,kt,Xt,ue,Kt,Jt,1-ce);else{var $t=kt>Xt?kt:Xt,Ut=kt>Xt?1:kt/Xt,Rt=kt>Xt?Xt/kt:1;yt.translate(It,Ht),yt.rotate(ue),yt.scale(Ut,Rt),yt.arc(0,0,$t,Kt,Jt,1-ce),yt.scale(1/Ut,1/Rt),yt.rotate(-ue),yt.translate(-It,-Ht)}break}case"Z":yt.closePath();break;default:break}if(Y==="Z")Qt=it;else{var Pt=vt.length;Qt=[vt[Pt-2],vt[Pt-1]]}}}}P.drawPath=V;function X(_t,yt){var lt=_t.get("canvas");lt&&(yt==="remove"&&(_t._cacheCanvasBBox=_t.get("cacheCanvasBBox")),_t.get("hasChanged")||(_t.set("hasChanged",!0),_t.cfg.parent&&_t.cfg.parent.get("hasChanged")||(lt.refreshElement(_t,yt,lt),lt.get("autoDraw")&&lt.draw())))}P.refreshElement=X;function K(_t){var yt;if(_t.destroyed)yt=_t._cacheCanvasBBox;else{var lt=_t.get("cacheCanvasBBox"),Lt=lt&&!!(lt.width&&lt.height),wt=_t.getCanvasBBox(),Gt=wt&&!!(wt.width&&wt.height);Lt&&Gt?yt=U.mergeRegion(lt,wt):Lt?yt=lt:Gt&&(yt=wt)}return yt}P.getRefreshRegion=K;function q(_t){if(!_t.length)return null;var yt=[],lt=[],Lt=[],wt=[];return T.each(_t,function(Gt){var re=K(Gt);re&&(yt.push(re.minX),lt.push(re.minY),Lt.push(re.maxX),wt.push(re.maxY))}),{minX:T.min(yt),minY:T.min(lt),maxX:T.max(Lt),maxY:T.max(wt)}}P.getMergedRegion=q;function ct(_t,yt){return!_t||!yt||!U.intersectRect(_t,yt)?null:{minX:Math.max(_t.minX,yt.minX),minY:Math.max(_t.minY,yt.minY),maxX:Math.min(_t.maxX,yt.maxX),maxY:Math.min(_t.maxY,yt.maxY)}}P.mergeView=ct},24818:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getShape=void 0;var T=S(96533);function j(B,R){if(R){var N=T.invert(R);return T.multiplyVec2(N,B)}return B}function y(B,R,N){var A=B.getTotalMatrix();if(A){var D=j([R,N,1],A),M=D[0],O=D[1];return[M,O]}return[R,N]}function U(B,R,N){if(B.isCanvas&&B.isCanvas())return!0;if(!T.isAllowCapture(B)||B.cfg.isInView===!1)return!1;if(B.cfg.clipShape){var A=y(B,R,N),D=A[0],M=A[1];if(B.isClipped(D,M))return!1}var O=B.cfg.cacheCanvasBBox||B.getCanvasBBox();return R>=O.minX&&R<=O.maxX&&N>=O.minY&&N<=O.maxY}function F(B,R,N){if(!U(B,R,N))return null;for(var A=null,D=B.getChildren(),M=D.length,O=M-1;O>=0;O--){var k=D[O];if(k.isGroup())A=F(k,R,N);else if(U(k,R,N)){var V=k,X=y(k,R,N),K=X[0],q=X[1];V.isInShape(K,q)&&(A=k)}if(A)break}return A}P.getShape=F},55978:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(96533);function j(y,U,F){var B=T.getOffScreenContext();return y.createPath(B),B.isPointInPath(U,F)}P.default=j},4043:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=1e-6;function T(U){return Math.abs(U)<S?0:U<0?-1:1}function j(U,F,B){return(B[0]-U[0])*(F[1]-U[1])==(F[0]-U[0])*(B[1]-U[1])&&Math.min(U[0],F[0])<=B[0]&&B[0]<=Math.max(U[0],F[0])&&Math.min(U[1],F[1])<=B[1]&&B[1]<=Math.max(U[1],F[1])}function y(U,F,B){var R=!1,N=U.length;if(N<=2)return!1;for(var A=0;A<N;A++){var D=U[A],M=U[(A+1)%N];if(j(D,M,[F,B]))return!0;T(D[1]-B)>0!=T(M[1]-B)>0&&T(F-(B-D[1])*(D[0]-M[0])/(D[1]-M[1])-D[0])<0&&(R=!R)}return R}P.default=y},37311:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(94478);function j(y,U,F,B,R,N,A,D){var M=(Math.atan2(D-U,A-y)+Math.PI*2)%(Math.PI*2);if(M<B||M>R)return!1;var O={x:y+F*Math.cos(M),y:U+F*Math.sin(M)};return T.distance(O.x,O.y,A,D)<=N/2}P.default=j},63131:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(89838);function j(y,U,F,B,R,N,A){var D=Math.min(y,F),M=Math.max(y,F),O=Math.min(U,B),k=Math.max(U,B),V=R/2;return N>=D-V&&N<=M+V&&A>=O-V&&A<=k+V?T.Line.pointToLine(y,U,F,B,N,A)<=R/2:!1}P.default=j},70625:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(63131);function j(y,U,F,B,R){var N=y.length;if(N<2)return!1;for(var A=0;A<N-1;A++){var D=y[A][0],M=y[A][1],O=y[A+1][0],k=y[A+1][1];if(T.default(D,M,O,k,U,F,B))return!0}if(R){var V=y[0],X=y[N-1];if(T.default(V[0],V[1],X[0],X[1],U,F,B))return!0}return!1}P.default=j},19626:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(63131),j=S(37311);function y(U,F,B,R,N,A,D,M){var O=A/2;return T.default(U+N,F,U+B-N,F,A,D,M)||T.default(U+B,F+N,U+B,F+R-N,A,D,M)||T.default(U+B-N,F+R,U+N,F+R,A,D,M)||T.default(U,F+R-N,U,F+N,A,D,M)||j.default(U+B-N,F+N,N,1.5*Math.PI,2*Math.PI,A,D,M)||j.default(U+B-N,F+R-N,N,0,.5*Math.PI,A,D,M)||j.default(U+N,F+R-N,N,.5*Math.PI,Math.PI,A,D,M)||j.default(U+N,F+N,N,Math.PI,1.5*Math.PI,A,D,M)}P.default=y},47946:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(94478);function j(y,U,F,B,R,N,A){var D=R/2;return T.inBox(y-D,U-D,F,R,N,A)||T.inBox(y+F-D,U-D,R,B,N,A)||T.inBox(y+D,U+B-D,F,R,N,A)||T.inBox(y-D,U+D,R,B,N,A)}P.default=j},62948:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.parseRadius=P.parseStyle=P.parsePattern=P.parseRadialGradient=P.parseLineGradient=void 0;var T=S(94478),j=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,y=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,U=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,F=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function B(O,k){var V=O.match(F);T.each(V,function(X){var K=X.split(":");k.addColorStop(K[0],K[1])})}function R(O,k,V){var X=j.exec(V),K=parseFloat(X[1])%360*(Math.PI/180),q=X[2],ct=k.getBBox(),_t,yt;K>=0&&K<1/2*Math.PI?(_t={x:ct.minX,y:ct.minY},yt={x:ct.maxX,y:ct.maxY}):1/2*Math.PI<=K&&K<Math.PI?(_t={x:ct.maxX,y:ct.minY},yt={x:ct.minX,y:ct.maxY}):Math.PI<=K&&K<3/2*Math.PI?(_t={x:ct.maxX,y:ct.maxY},yt={x:ct.minX,y:ct.minY}):(_t={x:ct.minX,y:ct.maxY},yt={x:ct.maxX,y:ct.minY});var lt=Math.tan(K),Lt=lt*lt,wt=(yt.x-_t.x+lt*(yt.y-_t.y))/(Lt+1)+_t.x,Gt=lt*(yt.x-_t.x+lt*(yt.y-_t.y))/(Lt+1)+_t.y,re=O.createLinearGradient(_t.x,_t.y,wt,Gt);return B(q,re),re}P.parseLineGradient=R;function N(O,k,V){var X=y.exec(V),K=parseFloat(X[1]),q=parseFloat(X[2]),ct=parseFloat(X[3]),_t=X[4];if(ct===0){var yt=_t.match(F);return yt[yt.length-1].split(":")[1]}var lt=k.getBBox(),Lt=lt.maxX-lt.minX,wt=lt.maxY-lt.minY,Gt=Math.sqrt(Lt*Lt+wt*wt)/2,re=O.createRadialGradient(lt.minX+Lt*K,lt.minY+wt*q,0,lt.minX+Lt/2,lt.minY+wt/2,ct*Gt);return B(_t,re),re}P.parseRadialGradient=N;function A(O,k,V){if(k.get("patternSource")&&k.get("patternSource")===V)return k.get("pattern");var X,K,q=U.exec(V),ct=q[1],_t=q[2];function yt(){X=O.createPattern(K,ct),k.set("pattern",X),k.set("patternSource",V)}switch(ct){case"a":ct="repeat";break;case"x":ct="repeat-x";break;case"y":ct="repeat-y";break;case"n":ct="no-repeat";break;default:ct="no-repeat"}return K=new Image,_t.match(/^data:/i)||(K.crossOrigin="Anonymous"),K.src=_t,K.complete?yt():(K.onload=yt,K.src=K.src),X}P.parsePattern=A;function D(O,k,V){var X=k.getBBox();if(isNaN(X.x)||isNaN(X.y)||isNaN(X.width)||isNaN(X.height))return V;if(T.isString(V)){if(V[1]==="("||V[2]==="("){if(V[0]==="l")return R(O,k,V);if(V[0]==="r")return N(O,k,V);if(V[0]==="p")return A(O,k,V)}return V}if(V instanceof CanvasPattern)return V}P.parseStyle=D;function M(O){var k=0,V=0,X=0,K=0;return T.isArray(O)?O.length===1?k=V=X=K=O[0]:O.length===2?(k=X=O[0],V=K=O[1]):O.length===3?(k=O[0],V=K=O[1],X=O[2]):(k=O[0],V=O[1],X=O[2],K=O[3]):k=V=X=K=O,[k,V,X,K]}P.parseRadius=M},32460:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(99519),j=S(96533),y=S(89838),U=S(89838),F=S(56379),B=S(77160),R=S(94478),N=S(63131),A=S(37311),D=F.ext.transform;function M(V){for(var X=!1,K=V.length,q=0;q<K;q++){var ct=V[q],_t=ct[0];if(_t==="C"||_t==="A"||_t==="Q"){X=!0;break}}return X}function O(V,X,K,q,ct){for(var _t=!1,yt=X/2,lt=0;lt<V.length;lt++){var Lt=V[lt],wt=Lt.currentPoint,Gt=Lt.params,re=Lt.prePoint,Qt=Lt.box;if(!(Qt&&!R.inBox(Qt.x-yt,Qt.y-yt,Qt.width+X,Qt.height+X,K,q))){switch(Lt.command){case"L":case"Z":_t=N.default(re[0],re[1],wt[0],wt[1],X,K,q);break;case"Q":var it=y.Quad.pointDistance(re[0],re[1],Gt[1],Gt[2],Gt[3],Gt[4],K,q);_t=it<=X/2;break;case"C":var dt=U.Cubic.pointDistance(re[0],re[1],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5],Gt[6],K,q,ct);_t=dt<=X/2;break;case"A":var gt=Lt.arcParams,vt=gt.cx,Y=gt.cy,ot=gt.rx,nt=gt.ry,rt=gt.startAngle,st=gt.endAngle,d=gt.xRotation,It=[K,q,1],Ht=ot>nt?ot:nt,kt=ot>nt?1:ot/nt,Xt=ot>nt?nt/ot:1,Kt=D(null,[["t",-vt,-Y],["r",-d],["s",1/kt,1/Xt]]);B.transformMat3(It,It,Kt),_t=A.default(0,0,Ht,rt,st,X,It[0],It[1]);break;default:break}if(_t)break}}return _t}function k(V){for(var X=V.length,K=[],q=[],ct=[],_t=0;_t<X;_t++){var yt=V[_t],lt=yt[0];lt==="M"?(ct.length&&(q.push(ct),ct=[]),ct.push([yt[1],yt[2]])):lt==="Z"?ct.length&&(K.push(ct),ct=[]):ct.push([yt[1],yt[2]])}return ct.length>0&&q.push(ct),{polygons:K,polylines:q}}P.default=T.__assign({hasArc:M,extractPolygons:k,isPointInStroke:O},j.PathUtil)},94478:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.clearAnimationFrame=P.requestAnimationFrame=P.isNumberEqual=P.mod=P.toRadian=P.each=P.isArray=P.isFunction=P.isString=P.isNil=P.isSamePoint=P.mergeRegion=P.intersectRect=P.inBox=P.distance=P.getPixelRatio=void 0;function T(){return window?window.devicePixelRatio:1}P.getPixelRatio=T;function j(N,A,D,M){var O=N-D,k=A-M;return Math.sqrt(O*O+k*k)}P.distance=j;function y(N,A,D,M,O,k){return O>=N&&O<=N+D&&k>=A&&k<=A+M}P.inBox=y;function U(N,A){return!(A.minX>N.maxX||A.maxX<N.minX||A.minY>N.maxY||A.maxY<N.minY)}P.intersectRect=U;function F(N,A){return!N||!A?N||A:{minX:Math.min(N.minX,A.minX),minY:Math.min(N.minY,A.minY),maxX:Math.max(N.maxX,A.maxX),maxY:Math.max(N.maxY,A.maxY)}}P.mergeRegion=F;function B(N,A){return N[0]===A[0]&&N[1]===A[1]}P.isSamePoint=B;var R=S(49242);Object.defineProperty(P,"isNil",{enumerable:!0,get:function(){return R.isNil}}),Object.defineProperty(P,"isString",{enumerable:!0,get:function(){return R.isString}}),Object.defineProperty(P,"isFunction",{enumerable:!0,get:function(){return R.isFunction}}),Object.defineProperty(P,"isArray",{enumerable:!0,get:function(){return R.isArray}}),Object.defineProperty(P,"each",{enumerable:!0,get:function(){return R.each}}),Object.defineProperty(P,"toRadian",{enumerable:!0,get:function(){return R.toRadian}}),Object.defineProperty(P,"mod",{enumerable:!0,get:function(){return R.mod}}),Object.defineProperty(P,"isNumberEqual",{enumerable:!0,get:function(){return R.isNumberEqual}}),Object.defineProperty(P,"requestAnimationFrame",{enumerable:!0,get:function(){return R.requestAnimationFrame}}),Object.defineProperty(P,"clearAnimationFrame",{enumerable:!0,get:function(){return R.clearAnimationFrame}})},56379:function(Vt,P,S){"use strict";S.r(P),S.d(P,{ext:function(){return T},mat3:function(){return j},vec2:function(){return y},vec3:function(){return U}});var T={};S.r(T),S.d(T,{angleTo:function(){return M},direction:function(){return D},leftRotate:function(){return B},leftScale:function(){return R},leftTranslate:function(){return F},transform:function(){return A},vertical:function(){return O}});var j=S(35600),y=S(31437),U=S(77160);function F(k,V,X){var K=[0,0,0,0,0,0,0,0,0];return j.fromTranslation(K,X),j.multiply(k,K,V)}function B(k,V,X){var K=[0,0,0,0,0,0,0,0,0];return j.fromRotation(K,X),j.multiply(k,K,V)}function R(k,V,X){var K=[0,0,0,0,0,0,0,0,0];return j.fromScaling(K,X),j.multiply(k,K,V)}function N(k,V,X){return j.multiply(k,X,V)}function A(k,V){for(var X=k?[].concat(k):[1,0,0,0,1,0,0,0,1],K=0,q=V.length;K<q;K++){var ct=V[K];switch(ct[0]){case"t":F(X,X,[ct[1],ct[2]]);break;case"s":R(X,X,[ct[1],ct[2]]);break;case"r":B(X,X,ct[1]);break;case"m":N(X,X,ct[1]);break;default:break}}return X}function D(k,V){return k[0]*V[1]-V[0]*k[1]}function M(k,V,X){var K=y.angle(k,V),q=D(k,V)>=0;return X?q?Math.PI*2-K:K:q?K:Math.PI*2-K}function O(k,V,X){return X?(k[0]=V[1],k[1]=-1*V[0]):(k[0]=-1*V[1],k[1]=V[0]),k}},99519:function(Vt,P,S){"use strict";S.r(P),S.d(P,{__extends:function(){return j},__assign:function(){return y},__rest:function(){return U},__decorate:function(){return F},__param:function(){return B},__metadata:function(){return R},__awaiter:function(){return N},__generator:function(){return A},__createBinding:function(){return D},__exportStar:function(){return M},__values:function(){return O},__read:function(){return k},__spread:function(){return V},__spreadArrays:function(){return X},__spreadArray:function(){return K},__await:function(){return q},__asyncGenerator:function(){return ct},__asyncDelegator:function(){return _t},__asyncValues:function(){return yt},__makeTemplateObject:function(){return lt},__importStar:function(){return wt},__importDefault:function(){return Gt},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return Qt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(it,dt){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var Y in vt)Object.prototype.hasOwnProperty.call(vt,Y)&&(gt[Y]=vt[Y])},T(it,dt)};function j(it,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");T(it,dt);function gt(){this.constructor=it}it.prototype=dt===null?Object.create(dt):(gt.prototype=dt.prototype,new gt)}var y=function(){return y=Object.assign||function(dt){for(var gt,vt=1,Y=arguments.length;vt<Y;vt++){gt=arguments[vt];for(var ot in gt)Object.prototype.hasOwnProperty.call(gt,ot)&&(dt[ot]=gt[ot])}return dt},y.apply(this,arguments)};function U(it,dt){var gt={};for(var vt in it)Object.prototype.hasOwnProperty.call(it,vt)&&dt.indexOf(vt)<0&&(gt[vt]=it[vt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,vt=Object.getOwnPropertySymbols(it);Y<vt.length;Y++)dt.indexOf(vt[Y])<0&&Object.prototype.propertyIsEnumerable.call(it,vt[Y])&&(gt[vt[Y]]=it[vt[Y]]);return gt}function F(it,dt,gt,vt){var Y=arguments.length,ot=Y<3?dt:vt===null?vt=Object.getOwnPropertyDescriptor(dt,gt):vt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,dt,gt,vt);else for(var rt=it.length-1;rt>=0;rt--)(nt=it[rt])&&(ot=(Y<3?nt(ot):Y>3?nt(dt,gt,ot):nt(dt,gt))||ot);return Y>3&&ot&&Object.defineProperty(dt,gt,ot),ot}function B(it,dt){return function(gt,vt){dt(gt,vt,it)}}function R(it,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,dt)}function N(it,dt,gt,vt){function Y(ot){return ot instanceof gt?ot:new gt(function(nt){nt(ot)})}return new(gt||(gt=Promise))(function(ot,nt){function rt(It){try{d(vt.next(It))}catch(Ht){nt(Ht)}}function st(It){try{d(vt.throw(It))}catch(Ht){nt(Ht)}}function d(It){It.done?ot(It.value):Y(It.value).then(rt,st)}d((vt=vt.apply(it,dt||[])).next())})}function A(it,dt){var gt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},vt,Y,ot,nt;return nt={next:rt(0),throw:rt(1),return:rt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function rt(d){return function(It){return st([d,It])}}function st(d){if(vt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(vt=1,Y&&(ot=d[0]&2?Y.return:d[0]?Y.throw||((ot=Y.return)&&ot.call(Y),0):Y.next)&&!(ot=ot.call(Y,d[1])).done)return ot;switch(Y=0,ot&&(d=[d[0]&2,ot.value]),d[0]){case 0:case 1:ot=d;break;case 4:return gt.label++,{value:d[1],done:!1};case 5:gt.label++,Y=d[1],d=[0];continue;case 7:d=gt.ops.pop(),gt.trys.pop();continue;default:if(ot=gt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(d[0]===6||d[0]===2)){gt=0;continue}if(d[0]===3&&(!ot||d[1]>ot[0]&&d[1]<ot[3])){gt.label=d[1];break}if(d[0]===6&&gt.label<ot[1]){gt.label=ot[1],ot=d;break}if(ot&&gt.label<ot[2]){gt.label=ot[2],gt.ops.push(d);break}ot[2]&&gt.ops.pop(),gt.trys.pop();continue}d=dt.call(it,gt)}catch(It){d=[6,It],Y=0}finally{vt=ot=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var D=Object.create?function(it,dt,gt,vt){vt===void 0&&(vt=gt),Object.defineProperty(it,vt,{enumerable:!0,get:function(){return dt[gt]}})}:function(it,dt,gt,vt){vt===void 0&&(vt=gt),it[vt]=dt[gt]};function M(it,dt){for(var gt in it)gt!=="default"&&!Object.prototype.hasOwnProperty.call(dt,gt)&&D(dt,it,gt)}function O(it){var dt=typeof Symbol=="function"&&Symbol.iterator,gt=dt&&it[dt],vt=0;if(gt)return gt.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&vt>=it.length&&(it=void 0),{value:it&&it[vt++],done:!it}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(it,dt){var gt=typeof Symbol=="function"&&it[Symbol.iterator];if(!gt)return it;var vt=gt.call(it),Y,ot=[],nt;try{for(;(dt===void 0||dt-- >0)&&!(Y=vt.next()).done;)ot.push(Y.value)}catch(rt){nt={error:rt}}finally{try{Y&&!Y.done&&(gt=vt.return)&&gt.call(vt)}finally{if(nt)throw nt.error}}return ot}function V(){for(var it=[],dt=0;dt<arguments.length;dt++)it=it.concat(k(arguments[dt]));return it}function X(){for(var it=0,dt=0,gt=arguments.length;dt<gt;dt++)it+=arguments[dt].length;for(var vt=Array(it),Y=0,dt=0;dt<gt;dt++)for(var ot=arguments[dt],nt=0,rt=ot.length;nt<rt;nt++,Y++)vt[Y]=ot[nt];return vt}function K(it,dt,gt){if(gt||arguments.length===2)for(var vt=0,Y=dt.length,ot;vt<Y;vt++)(ot||!(vt in dt))&&(ot||(ot=Array.prototype.slice.call(dt,0,vt)),ot[vt]=dt[vt]);return it.concat(ot||Array.prototype.slice.call(dt))}function q(it){return this instanceof q?(this.v=it,this):new q(it)}function ct(it,dt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=gt.apply(it,dt||[]),Y,ot=[];return Y={},nt("next"),nt("throw"),nt("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function nt(kt){vt[kt]&&(Y[kt]=function(Xt){return new Promise(function(Kt,Jt){ot.push([kt,Xt,Kt,Jt])>1||rt(kt,Xt)})})}function rt(kt,Xt){try{st(vt[kt](Xt))}catch(Kt){Ht(ot[0][3],Kt)}}function st(kt){kt.value instanceof q?Promise.resolve(kt.value.v).then(d,It):Ht(ot[0][2],kt)}function d(kt){rt("next",kt)}function It(kt){rt("throw",kt)}function Ht(kt,Xt){kt(Xt),ot.shift(),ot.length&&rt(ot[0][0],ot[0][1])}}function _t(it){var dt,gt;return dt={},vt("next"),vt("throw",function(Y){throw Y}),vt("return"),dt[Symbol.iterator]=function(){return this},dt;function vt(Y,ot){dt[Y]=it[Y]?function(nt){return(gt=!gt)?{value:q(it[Y](nt)),done:Y==="return"}:ot?ot(nt):nt}:ot}}function yt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it[Symbol.asyncIterator],gt;return dt?dt.call(it):(it=typeof O=="function"?O(it):it[Symbol.iterator](),gt={},vt("next"),vt("throw"),vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function vt(ot){gt[ot]=it[ot]&&function(nt){return new Promise(function(rt,st){nt=it[ot](nt),Y(rt,st,nt.done,nt.value)})}}function Y(ot,nt,rt,st){Promise.resolve(st).then(function(d){ot({value:d,done:rt})},nt)}}function lt(it,dt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:dt}):it.raw=dt,it}var Lt=Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt};function wt(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var gt in it)gt!=="default"&&Object.prototype.hasOwnProperty.call(it,gt)&&D(dt,it,gt);return Lt(dt,it),dt}function Gt(it){return it&&it.__esModule?it:{default:it}}function re(it,dt,gt,vt){if(gt==="a"&&!vt)throw new TypeError("Private accessor was defined without a getter");if(typeof dt=="function"?it!==dt||!vt:!dt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?vt:gt==="a"?vt.call(it):vt?vt.value:dt.get(it)}function Qt(it,dt,gt,vt,Y){if(vt==="m")throw new TypeError("Private method is not writable");if(vt==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof dt=="function"?it!==dt||!Y:!dt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return vt==="a"?Y.call(it,gt):Y?Y.value=gt:dt.set(it,gt),gt}},19270:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(76789),y=S(96533),U=S(91995),F=S(49171),B=S(84092),R=S(84745),N=S(8198),A=S(36629),D=S(88330),M=function(O){j.__extends(k,O);function k(V){return O.call(this,j.__assign(j.__assign({},V),{autoDraw:!0,renderer:"svg"}))||this}return k.prototype.getShapeBase=function(){return N},k.prototype.getGroupBase=function(){return A.default},k.prototype.getShape=function(V,X,K){var q=K.target||K.srcElement;if(!U.SHAPE_TO_TAGS[q.tagName]){for(var ct=q.parentNode;ct&&!U.SHAPE_TO_TAGS[ct.tagName];)ct=ct.parentNode;q=ct}return this.find(function(_t){return _t.get("el")===q})},k.prototype.createDom=function(){var V=R.createSVGElement("svg"),X=new D.default(V);return V.setAttribute("width",""+this.get("width")),V.setAttribute("height",""+this.get("height")),this.set("context",X),V},k.prototype.onCanvasChange=function(V){var X=this.get("context"),K=this.get("el");if(V==="sort"){var q=this.get("children");q&&q.length&&R.sortDom(this,function(_t,yt){return q.indexOf(_t)-q.indexOf(yt)?1:0})}else if(V==="clear"){if(K){K.innerHTML="";var ct=X.el;ct.innerHTML="",K.appendChild(ct)}}else V==="matrix"?B.setTransform(this):V==="clip"?B.setClip(this,X):V==="changeSize"&&(K.setAttribute("width",""+this.get("width")),K.setAttribute("height",""+this.get("height")))},k.prototype.draw=function(){var V=this.get("context"),X=this.getChildren();B.setClip(this,V),X.length&&F.drawChildren(V,X)},k}(y.AbstractCanvas);P.Z=M},91995:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.EVENTS=P.SVG_ATTR_MAP=P.SHAPE_TO_TAGS=void 0,P.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},P.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},P.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},14232:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(84745),y=function(){function U(F,B){this.cfg={};var R=j.createSVGElement("marker"),N=T.uniqueId("marker_");R.setAttribute("id",N);var A=j.createSVGElement("path");A.setAttribute("stroke",F.stroke||"none"),A.setAttribute("fill",F.fill||"none"),R.appendChild(A),R.setAttribute("overflow","visible"),R.setAttribute("orient","auto-start-reverse"),this.el=R,this.child=A,this.id=N;var D=F[B==="marker-start"?"startArrow":"endArrow"];return this.stroke=F.stroke||"#000",D===!0?this._setDefaultPath(B,A):(this.cfg=D,this._setMarker(F.lineWidth,A)),this}return U.prototype.match=function(){return!1},U.prototype._setDefaultPath=function(F,B){var R=this.el;B.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),R.setAttribute("refX",""+10*Math.cos(Math.PI/6)),R.setAttribute("refY",""+5)},U.prototype._setMarker=function(F,B){var R=this.el,N=this.cfg.path,A=this.cfg.d;T.isArray(N)&&(N=N.map(function(D){return D.join(" ")}).join("")),B.setAttribute("d",N),R.appendChild(B),A&&R.setAttribute("refX",""+A/F)},U.prototype.update=function(F){var B=this.child;B.attr?B.attr("fill",F):B.setAttribute("fill",F)},U}();P.default=y},32439:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(84745),y=function(){function U(F){this.type="clip",this.cfg={};var B=j.createSVGElement("clipPath");this.el=B,this.id=T.uniqueId("clip_"),B.id=this.id;var R=F.cfg.el;return B.appendChild(R),this.cfg=F,this}return U.prototype.match=function(){return!1},U.prototype.remove=function(){var F=this.el;F.parentNode.removeChild(F)},U}();P.default=y},90362:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(84745),y=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,U=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,F=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function B(D){var M=D.match(F);if(!M)return"";var O="";return M.sort(function(k,V){return k=k.split(":"),V=V.split(":"),Number(k[0])-Number(V[0])}),T.each(M,function(k){k=k.split(":"),O+='<stop offset="'+k[0]+'" stop-color="'+k[1]+'"></stop>'}),O}function R(D,M){var O=y.exec(D),k=T.mod(T.toRadian(parseFloat(O[1])),Math.PI*2),V=O[2],X,K;k>=0&&k<.5*Math.PI?(X={x:0,y:0},K={x:1,y:1}):.5*Math.PI<=k&&k<Math.PI?(X={x:1,y:0},K={x:0,y:1}):Math.PI<=k&&k<1.5*Math.PI?(X={x:1,y:1},K={x:0,y:0}):(X={x:0,y:1},K={x:1,y:0});var q=Math.tan(k),ct=q*q,_t=(K.x-X.x+q*(K.y-X.y))/(ct+1)+X.x,yt=q*(K.x-X.x+q*(K.y-X.y))/(ct+1)+X.y;M.setAttribute("x1",X.x),M.setAttribute("y1",X.y),M.setAttribute("x2",_t),M.setAttribute("y2",yt),M.innerHTML=B(V)}function N(D,M){var O=U.exec(D),k=parseFloat(O[1]),V=parseFloat(O[2]),X=parseFloat(O[3]),K=O[4];M.setAttribute("cx",k),M.setAttribute("cy",V),M.setAttribute("r",X),M.innerHTML=B(K)}var A=function(){function D(M){this.cfg={};var O=null,k=T.uniqueId("gradient_");return M.toLowerCase()[0]==="l"?(O=j.createSVGElement("linearGradient"),R(M,O)):(O=j.createSVGElement("radialGradient"),N(M,O)),O.setAttribute("id",k),this.el=O,this.id=k,this.cfg=M,this}return D.prototype.match=function(M,O){return this.cfg===O},D}();P.default=A},88330:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(90362),y=S(50375),U=S(14232),F=S(32439),B=S(99365),R=S(84745),N=function(){function A(D){var M=R.createSVGElement("defs"),O=T.uniqueId("defs_");M.id=O,D.appendChild(M),this.children=[],this.defaultArrow={},this.el=M,this.canvas=D}return A.prototype.find=function(D,M){for(var O=this.children,k=null,V=0;V<O.length;V++)if(O[V].match(D,M)){k=O[V].id;break}return k},A.prototype.findById=function(D){for(var M=this.children,O=null,k=0;k<M.length;k++)if(M[k].id===D){O=M[k];break}return O},A.prototype.add=function(D){this.children.push(D),D.canvas=this.canvas,D.parent=this},A.prototype.getDefaultArrow=function(D,M){var O=D.stroke||D.strokeStyle;if(this.defaultArrow[O])return this.defaultArrow[O].id;var k=new U.default(D,M);return this.defaultArrow[O]=k,this.el.appendChild(k.el),this.add(k),k.id},A.prototype.addGradient=function(D){var M=new j.default(D);return this.el.appendChild(M.el),this.add(M),M.id},A.prototype.addArrow=function(D,M){var O=new U.default(D,M);return this.el.appendChild(O.el),this.add(O),O.id},A.prototype.addShadow=function(D){var M=new y.default(D);return this.el.appendChild(M.el),this.add(M),M.id},A.prototype.addPattern=function(D){var M=new B.default(D);return this.el.appendChild(M.el),this.add(M),M.id},A.prototype.addClip=function(D){var M=new F.default(D);return this.el.appendChild(M.el),this.add(M),M.id},A}();P.default=N},99365:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(84745),y=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,U=function(){function F(B){this.cfg={};var R=j.createSVGElement("pattern");R.setAttribute("patternUnits","userSpaceOnUse");var N=j.createSVGElement("image");R.appendChild(N);var A=T.uniqueId("pattern_");R.id=A,this.el=R,this.id=A,this.cfg=B;var D=y.exec(B),M=D[2];N.setAttribute("href",M);var O=new Image;M.match(/^data:/i)||(O.crossOrigin="Anonymous"),O.src=M;function k(){R.setAttribute("width",""+O.width),R.setAttribute("height",""+O.height)}return O.complete?k():(O.onload=k,O.src=O.src),this}return F.prototype.match=function(B,R){return this.cfg===R},F}();P.default=U},50375:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(84745),y={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},U={x:"-40%",y:"-40%",width:"200%",height:"200%"},F=function(){function B(R){this.type="filter",this.cfg={},this.type="filter";var N=j.createSVGElement("filter");return T.each(U,function(A,D){N.setAttribute(D,A)}),this.el=N,this.id=T.uniqueId("filter_"),this.el.id=this.id,this.cfg=R,this._parseShadow(R,N),this}return B.prototype.match=function(R,N){if(this.type!==R)return!1;var A=!0,D=this.cfg;return T.each(Object.keys(D),function(M){if(D[M]!==N[M])return A=!1,!1}),A},B.prototype.update=function(R,N){var A=this.cfg;return A[y[R]]=N,this._parseShadow(A,this.el),this},B.prototype._parseShadow=function(R,N){var A=`<feDropShadow
      dx="`+(R.dx||0)+`"
      dy="`+(R.dy||0)+`"
      stdDeviation="`+(R.blur?R.blur/10:0)+`"
      flood-color="`+(R.color?R.color:"#000")+`"
      flood-opacity="`+(R.opacity?R.opacity:1)+`"
      />`;N.innerHTML=A},B}();P.default=F},36629:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(96533),y=S(49242),U=S(8198),F=S(49171),B=S(84092),R=S(91995),N=S(84745),A=function(D){T.__extends(M,D);function M(){return D!==null&&D.apply(this,arguments)||this}return M.prototype.isEntityGroup=function(){return!0},M.prototype.createDom=function(){var O=N.createSVGElement("g");this.set("el",O);var k=this.getParent();if(k){var V=k.get("el");V||(V=k.createDom(),k.set("el",V)),V.appendChild(O)}return O},M.prototype.afterAttrsChange=function(O){D.prototype.afterAttrsChange.call(this,O);var k=this.get("canvas");if(k&&k.get("autoDraw")){var V=k.get("context");this.createPath(V,O)}},M.prototype.onCanvasChange=function(O){F.refreshElement(this,O)},M.prototype.getShapeBase=function(){return U},M.prototype.getGroupBase=function(){return M},M.prototype.draw=function(O){var k=this.getChildren(),V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||this.createDom(),B.setClip(this,O),this.createPath(O),k.length&&F.drawChildren(O,k))},M.prototype.createPath=function(O,k){var V=this.attr(),X=this.get("el");y.each(k||V,function(K,q){R.SVG_ATTR_MAP[q]&&X.setAttribute(R.SVG_ATTR_MAP[q],K)}),B.setTransform(this)},M}(j.AbstractGroup);P.default=A},5666:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(96533),y=S(84092),U=S(84745),F=S(49171),B=S(91995),R=S(8198),N=S(36629),A=S(96533),D=function(M){T.__extends(O,M);function O(){var k=M!==null&&M.apply(this,arguments)||this;return k.type="svg",k.canFill=!1,k.canStroke=!1,k}return O.prototype.getDefaultAttrs=function(){var k=M.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},k),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},O.prototype.afterAttrsChange=function(k){M.prototype.afterAttrsChange.call(this,k);var V=this.get("canvas");if(V&&V.get("autoDraw")){var X=V.get("context");this.draw(X,k)}},O.prototype.getShapeBase=function(){return R},O.prototype.getGroupBase=function(){return N.default},O.prototype.onCanvasChange=function(k){F.refreshElement(this,k)},O.prototype.calculateBBox=function(){var k=this.get("el"),V=null;if(k)V=k.getBBox();else{var X=A.getBBoxMethod(this.get("type"));X&&(V=X(this))}if(V){var K=V.x,q=V.y,ct=V.width,_t=V.height,yt=this.getHitLineWidth(),lt=yt/2,Lt=K-lt,wt=q-lt,Gt=K+ct+lt,re=q+_t+lt;return{x:Lt,y:wt,minX:Lt,minY:wt,maxX:Gt,maxY:re,width:ct+yt,height:_t+yt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},O.prototype.isFill=function(){var k=this.attr(),V=k.fill,X=k.fillStyle;return(V||X||this.isClipShape())&&this.canFill},O.prototype.isStroke=function(){var k=this.attr(),V=k.stroke,X=k.strokeStyle;return(V||X)&&this.canStroke},O.prototype.draw=function(k,V){var X=this.get("el");this.get("destroyed")?X&&X.parentNode.removeChild(X):(X||U.createDom(this),y.setClip(this,k),this.createPath(k,V),this.shadow(k,V),this.strokeAndFill(k,V),this.transform(V))},O.prototype.createPath=function(k,V){},O.prototype.strokeAndFill=function(k,V){var X=V||this.attr(),K=X.fill,q=X.fillStyle,ct=X.stroke,_t=X.strokeStyle,yt=X.fillOpacity,lt=X.strokeOpacity,Lt=X.lineWidth,wt=this.get("el");this.canFill&&(V?"fill"in X?this._setColor(k,"fill",K):"fillStyle"in X&&this._setColor(k,"fill",q):this._setColor(k,"fill",K||q),yt&&wt.setAttribute(B.SVG_ATTR_MAP.fillOpacity,yt)),this.canStroke&&Lt>0&&(V?"stroke"in X?this._setColor(k,"stroke",ct):"strokeStyle"in X&&this._setColor(k,"stroke",_t):this._setColor(k,"stroke",ct||_t),lt&&wt.setAttribute(B.SVG_ATTR_MAP.strokeOpacity,lt),Lt&&wt.setAttribute(B.SVG_ATTR_MAP.lineWidth,Lt))},O.prototype._setColor=function(k,V,X){var K=this.get("el");if(!X){K.setAttribute(B.SVG_ATTR_MAP[V],"none");return}if(X=X.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(X)){var q=k.find("gradient",X);q||(q=k.addGradient(X)),K.setAttribute(B.SVG_ATTR_MAP[V],"url(#"+q+")")}else if(/^[p,P]{1}[\s]*\(/.test(X)){var q=k.find("pattern",X);q||(q=k.addPattern(X)),K.setAttribute(B.SVG_ATTR_MAP[V],"url(#"+q+")")}else K.setAttribute(B.SVG_ATTR_MAP[V],X)},O.prototype.shadow=function(k,V){var X=this.attr(),K=V||X,q=K.shadowOffsetX,ct=K.shadowOffsetY,_t=K.shadowBlur,yt=K.shadowColor;(q||ct||_t||yt)&&y.setShadow(this,k)},O.prototype.transform=function(k){var V=this.attr(),X=(k||V).matrix;X&&y.setTransform(this)},O.prototype.isInShape=function(k,V){return this.isPointInPath(k,V)},O.prototype.isPointInPath=function(k,V){var X=this.get("el"),K=this.get("canvas"),q=K.get("el").getBoundingClientRect(),ct=k+q.left,_t=V+q.top,yt=document.elementFromPoint(ct,_t);return!!(yt&&yt.isEqualNode(X))},O.prototype.getHitLineWidth=function(){var k=this.attrs,V=k.lineWidth,X=k.lineAppendWidth;return this.isStroke()?V+X:0},O}(j.AbstractShape);P.default=D},41310:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="circle",N.canFill=!0,N.canStroke=!0,N}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{x:0,y:0,r:0})},R.prototype.createPath=function(N,A){var D=this.attr(),M=this.get("el");j.each(A||D,function(O,k){k==="x"||k==="y"?M.setAttribute("c"+k,O):y.SVG_ATTR_MAP[k]&&M.setAttribute(y.SVG_ATTR_MAP[k],O)})},R}(U.default);P.default=F},88800:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="dom",N.canFill=!1,N.canStroke=!1,N}return R.prototype.createPath=function(N,A){var D=this.attr(),M=this.get("el");if(j.each(A||D,function(X,K){y.SVG_ATTR_MAP[K]&&M.setAttribute(y.SVG_ATTR_MAP[K],X)}),typeof D.html=="function"){var O=D.html.call(this,D);if(O instanceof Element||O instanceof HTMLDocument){for(var k=M.childNodes,V=k.length-1;V>=0;V--)M.removeChild(k[V]);M.appendChild(O)}else M.innerHTML=O}else M.innerHTML=D.html},R}(U.default);P.default=F},62927:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="ellipse",N.canFill=!0,N.canStroke=!0,N}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{x:0,y:0,rx:0,ry:0})},R.prototype.createPath=function(N,A){var D=this.attr(),M=this.get("el");j.each(A||D,function(O,k){k==="x"||k==="y"?M.setAttribute("c"+k,O):y.SVG_ATTR_MAP[k]&&M.setAttribute(y.SVG_ATTR_MAP[k],O)})},R}(U.default);P.default=F},78076:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="image",N.canFill=!1,N.canStroke=!1,N}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{x:0,y:0,width:0,height:0})},R.prototype.createPath=function(N,A){var D=this,M=this.attr(),O=this.get("el");j.each(A||M,function(k,V){V==="img"?D._setImage(M.img):y.SVG_ATTR_MAP[V]&&O.setAttribute(y.SVG_ATTR_MAP[V],k)})},R.prototype.setAttr=function(N,A){this.attrs[N]=A,N==="img"&&this._setImage(A)},R.prototype._setImage=function(N){var A=this.attr(),D=this.get("el");if(j.isString(N))D.setAttribute("href",N);else if(N instanceof window.Image)A.width||(D.setAttribute("width",N.width),this.attr("width",N.width)),A.height||(D.setAttribute("height",N.height),this.attr("height",N.height)),D.setAttribute("href",N.src);else if(N instanceof HTMLElement&&j.isString(N.nodeName)&&N.nodeName.toUpperCase()==="CANVAS")D.setAttribute("href",N.toDataURL());else if(N instanceof ImageData){var M=document.createElement("canvas");M.setAttribute("width",""+N.width),M.setAttribute("height",""+N.height),M.getContext("2d").putImageData(N,0,0),A.width||(D.setAttribute("width",""+N.width),this.attr("width",N.width)),A.height||(D.setAttribute("height",""+N.height),this.attr("height",N.height)),D.setAttribute("href",M.toDataURL())}},R}(U.default);P.default=F},8198:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(5666);Object.defineProperty(P,"Base",{enumerable:!0,get:function(){return T.default}});var j=S(41310);Object.defineProperty(P,"Circle",{enumerable:!0,get:function(){return j.default}});var y=S(88800);Object.defineProperty(P,"Dom",{enumerable:!0,get:function(){return y.default}});var U=S(62927);Object.defineProperty(P,"Ellipse",{enumerable:!0,get:function(){return U.default}});var F=S(78076);Object.defineProperty(P,"Image",{enumerable:!0,get:function(){return F.default}});var B=S(22059);Object.defineProperty(P,"Line",{enumerable:!0,get:function(){return B.default}});var R=S(62116);Object.defineProperty(P,"Marker",{enumerable:!0,get:function(){return R.default}});var N=S(49582);Object.defineProperty(P,"Path",{enumerable:!0,get:function(){return N.default}});var A=S(17498);Object.defineProperty(P,"Polygon",{enumerable:!0,get:function(){return A.default}});var D=S(67478);Object.defineProperty(P,"Polyline",{enumerable:!0,get:function(){return D.default}});var M=S(79705);Object.defineProperty(P,"Rect",{enumerable:!0,get:function(){return M.default}});var O=S(61622);Object.defineProperty(P,"Text",{enumerable:!0,get:function(){return O.default}})},22059:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(89838),y=S(49242),U=S(91995),F=S(5666),B=function(R){T.__extends(N,R);function N(){var A=R!==null&&R.apply(this,arguments)||this;return A.type="line",A.canFill=!1,A.canStroke=!0,A}return N.prototype.getDefaultAttrs=function(){var A=R.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},A),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},N.prototype.createPath=function(A,D){var M=this.attr(),O=this.get("el");y.each(D||M,function(k,V){if(V==="startArrow"||V==="endArrow")if(k){var X=y.isObject(k)?A.addArrow(M,U.SVG_ATTR_MAP[V]):A.getDefaultArrow(M,U.SVG_ATTR_MAP[V]);O.setAttribute(U.SVG_ATTR_MAP[V],"url(#"+X+")")}else O.removeAttribute(U.SVG_ATTR_MAP[V]);else U.SVG_ATTR_MAP[V]&&O.setAttribute(U.SVG_ATTR_MAP[V],k)})},N.prototype.getTotalLength=function(){var A=this.attr(),D=A.x1,M=A.y1,O=A.x2,k=A.y2;return j.Line.length(D,M,O,k)},N.prototype.getPoint=function(A){var D=this.attr(),M=D.x1,O=D.y1,k=D.x2,V=D.y2;return j.Line.pointAt(M,O,k,V,A)},N}(F.default);P.default=B},62116:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(5666),U=S(56205),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="marker",N.canFill=!0,N.canStroke=!0,N}return R.prototype.createPath=function(N){var A=this.get("el");A.setAttribute("d",this._assembleMarker())},R.prototype._assembleMarker=function(){var N=this._getPath();return j.isArray(N)?N.map(function(A){return A.join(" ")}).join(""):N},R.prototype._getPath=function(){var N=this.attr(),A=N.x,D=N.y,M=N.r||N.radius,O=N.symbol||"circle",k;return j.isFunction(O)?k=O:k=U.default.get(O),k?k(A,D,M):(console.warn(k+" symbol is not exist."),null)},R.symbolsFactory=U.default,R}(y.default);P.default=F},56205:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S={circle:function(T,j,y){return[["M",T,j],["m",-y,0],["a",y,y,0,1,0,y*2,0],["a",y,y,0,1,0,-y*2,0]]},square:function(T,j,y){return[["M",T-y,j-y],["L",T+y,j-y],["L",T+y,j+y],["L",T-y,j+y],["Z"]]},diamond:function(T,j,y){return[["M",T-y,j],["L",T,j-y],["L",T+y,j],["L",T,j+y],["Z"]]},triangle:function(T,j,y){var U=y*Math.sin(1/3*Math.PI);return[["M",T-y,j+U],["L",T,j-U],["L",T+y,j+U],["z"]]},triangleDown:function(T,j,y){var U=y*Math.sin(1/3*Math.PI);return[["M",T-y,j-U],["L",T+y,j-U],["L",T,j+U],["Z"]]}};P.default={get:function(T){return S[T]},register:function(T,j){S[T]=j},remove:function(T){delete S[T]},getAll:function(){return S}}},49582:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="path",N.canFill=!0,N.canStroke=!0,N}return R.prototype.getDefaultAttrs=function(){var N=B.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},N),{startArrow:!1,endArrow:!1})},R.prototype.createPath=function(N,A){var D=this,M=this.attr(),O=this.get("el");j.each(A||M,function(k,V){if(V==="path"&&j.isArray(k))O.setAttribute("d",D._formatPath(k));else if(V==="startArrow"||V==="endArrow")if(k){var X=j.isObject(k)?N.addArrow(M,y.SVG_ATTR_MAP[V]):N.getDefaultArrow(M,y.SVG_ATTR_MAP[V]);O.setAttribute(y.SVG_ATTR_MAP[V],"url(#"+X+")")}else O.removeAttribute(y.SVG_ATTR_MAP[V]);else y.SVG_ATTR_MAP[V]&&O.setAttribute(y.SVG_ATTR_MAP[V],k)})},R.prototype._formatPath=function(N){var A=N.map(function(D){return D.join(" ")}).join("");return~A.indexOf("NaN")?"":A},R.prototype.getTotalLength=function(){var N=this.get("el");return N?N.getTotalLength():null},R.prototype.getPoint=function(N){var A=this.get("el"),D=this.getTotalLength();if(D===0)return null;var M=A?A.getPointAtLength(N*D):null;return M?{x:M.x,y:M.y}:null},R}(U.default);P.default=F},17498:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(91995),U=S(5666),F=function(B){T.__extends(R,B);function R(){var N=B!==null&&B.apply(this,arguments)||this;return N.type="polygon",N.canFill=!0,N.canStroke=!0,N}return R.prototype.createPath=function(N,A){var D=this.attr(),M=this.get("el");j.each(A||D,function(O,k){k==="points"&&j.isArray(O)&&O.length>=2?M.setAttribute("points",O.map(function(V){return V[0]+","+V[1]}).join(" ")):y.SVG_ATTR_MAP[k]&&M.setAttribute(y.SVG_ATTR_MAP[k],O)})},R}(U.default);P.default=F},67478:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(89838),y=S(89838),U=S(49242),F=S(91995),B=S(5666),R=function(N){T.__extends(A,N);function A(){var D=N!==null&&N.apply(this,arguments)||this;return D.type="polyline",D.canFill=!0,D.canStroke=!0,D}return A.prototype.getDefaultAttrs=function(){var D=N.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},D),{startArrow:!1,endArrow:!1})},A.prototype.onAttrChange=function(D,M,O){N.prototype.onAttrChange.call(this,D,M,O),["points"].indexOf(D)!==-1&&this._resetCache()},A.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},A.prototype.createPath=function(D,M){var O=this.attr(),k=this.get("el");U.each(M||O,function(V,X){X==="points"&&U.isArray(V)&&V.length>=2?k.setAttribute("points",V.map(function(K){return K[0]+","+K[1]}).join(" ")):F.SVG_ATTR_MAP[X]&&k.setAttribute(F.SVG_ATTR_MAP[X],V)})},A.prototype.getTotalLength=function(){var D=this.attr().points,M=this.get("totalLength");return U.isNil(M)?(this.set("totalLength",j.Polyline.length(D)),this.get("totalLength")):M},A.prototype.getPoint=function(D){var M=this.attr().points,O=this.get("tCache");O||(this._setTcache(),O=this.get("tCache"));var k,V;return U.each(O,function(X,K){D>=X[0]&&D<=X[1]&&(k=(D-X[0])/(X[1]-X[0]),V=K)}),y.Line.pointAt(M[V][0],M[V][1],M[V+1][0],M[V+1][1],k)},A.prototype._setTcache=function(){var D=this.attr().points;if(!(!D||D.length===0)){var M=this.getTotalLength();if(!(M<=0)){var O=0,k=[],V,X;U.each(D,function(K,q){D[q+1]&&(V=[],V[0]=O/M,X=y.Line.length(K[0],K[1],D[q+1][0],D[q+1][1]),O+=X,V[1]=O/M,k.push(V))}),this.set("tCache",k)}}},A.prototype.getStartTangent=function(){var D=this.attr().points,M=[];return M.push([D[1][0],D[1][1]]),M.push([D[0][0],D[0][1]]),M},A.prototype.getEndTangent=function(){var D=this.attr().points,M=D.length-1,O=[];return O.push([D[M-1][0],D[M-1][1]]),O.push([D[M][0],D[M][1]]),O},A}(B.default);P.default=R},79705:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(5666),U=S(91995),F=S(19544),B=function(R){T.__extends(N,R);function N(){var A=R!==null&&R.apply(this,arguments)||this;return A.type="rect",A.canFill=!0,A.canStroke=!0,A}return N.prototype.getDefaultAttrs=function(){var A=R.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},A),{x:0,y:0,width:0,height:0,radius:0})},N.prototype.createPath=function(A,D){var M=this,O=this.attr(),k=this.get("el"),V=!1,X=["x","y","width","height","radius"];j.each(D||O,function(K,q){X.indexOf(q)!==-1&&!V?(k.setAttribute("d",M._assembleRect(O)),V=!0):X.indexOf(q)===-1&&U.SVG_ATTR_MAP[q]&&k.setAttribute(U.SVG_ATTR_MAP[q],K)})},N.prototype._assembleRect=function(A){var D=A.x,M=A.y,O=A.width,k=A.height,V=A.radius;if(!V)return"M "+D+","+M+" l "+O+",0 l 0,"+k+" l"+-O+" 0 z";var X=F.parseRadius(V);j.isArray(V)?V.length===1?X.r1=X.r2=X.r3=X.r4=V[0]:V.length===2?(X.r1=X.r3=V[0],X.r2=X.r4=V[1]):V.length===3?(X.r1=V[0],X.r2=X.r4=V[1],X.r3=V[2]):(X.r1=V[0],X.r2=V[1],X.r3=V[2],X.r4=V[3]):X.r1=X.r2=X.r3=X.r4=V;var K=[["M "+(D+X.r1)+","+M],["l "+(O-X.r1-X.r2)+",0"],["a "+X.r2+","+X.r2+",0,0,1,"+X.r2+","+X.r2],["l 0,"+(k-X.r2-X.r3)],["a "+X.r3+","+X.r3+",0,0,1,"+-X.r3+","+X.r3],["l "+(X.r3+X.r4-O)+",0"],["a "+X.r4+","+X.r4+",0,0,1,"+-X.r4+","+-X.r4],["l 0,"+(X.r4+X.r1-k)],["a "+X.r1+","+X.r1+",0,0,1,"+X.r1+","+-X.r1],["z"]];return K.join(" ")},N}(y.default);P.default=B},61622:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76789),j=S(49242),y=S(43631),U=S(84092),F=S(91995),B=S(5666),R=.3,N={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},A={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},D={left:"left",start:"left",center:"middle",right:"end",end:"end"},M=function(O){T.__extends(k,O);function k(){var V=O!==null&&O.apply(this,arguments)||this;return V.type="text",V.canFill=!0,V.canStroke=!0,V}return k.prototype.getDefaultAttrs=function(){var V=O.prototype.getDefaultAttrs.call(this);return T.__assign(T.__assign({},V),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},k.prototype.createPath=function(V,X){var K=this,q=this.attr(),ct=this.get("el");this._setFont(),j.each(X||q,function(_t,yt){yt==="text"?K._setText(""+_t):yt==="matrix"&&_t?U.setTransform(K):F.SVG_ATTR_MAP[yt]&&ct.setAttribute(F.SVG_ATTR_MAP[yt],_t)}),ct.setAttribute("paint-order","stroke"),ct.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},k.prototype._setFont=function(){var V=this.get("el"),X=this.attr(),K=X.textBaseline,q=X.textAlign,ct=y.detect();ct&&ct.name==="firefox"?V.setAttribute("dominant-baseline",A[K]||"alphabetic"):V.setAttribute("alignment-baseline",N[K]||"baseline"),V.setAttribute("text-anchor",D[q]||"left")},k.prototype._setText=function(V){var X=this.get("el"),K=this.attr(),q=K.x,ct=K.textBaseline,_t=ct===void 0?"bottom":ct;if(!V)X.innerHTML="";else if(~V.indexOf(`
`)){var yt=V.split(`
`),lt=yt.length-1,Lt="";j.each(yt,function(wt,Gt){Gt===0?_t==="alphabetic"?Lt+='<tspan x="'+q+'" dy="'+-lt+'em">'+wt+"</tspan>":_t==="top"?Lt+='<tspan x="'+q+'" dy="0.9em">'+wt+"</tspan>":_t==="middle"?Lt+='<tspan x="'+q+'" dy="'+-(lt-1)/2+'em">'+wt+"</tspan>":_t==="bottom"?Lt+='<tspan x="'+q+'" dy="-'+(lt+R)+'em">'+wt+"</tspan>":_t==="hanging"&&(Lt+='<tspan x="'+q+'" dy="'+(-(lt-1)-R)+'em">'+wt+"</tspan>"):Lt+='<tspan x="'+q+'" dy="1em">'+wt+"</tspan>"}),X.innerHTML=Lt}else X.innerHTML=V},k}(B.default);P.default=M},84745:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.moveTo=P.sortDom=P.createDom=P.createSVGElement=void 0;var T=S(49242),j=S(91995);function y(R){return document.createElementNS("http://www.w3.org/2000/svg",R)}P.createSVGElement=y;function U(R){var N=j.SHAPE_TO_TAGS[R.type],A=R.getParent();if(!N)throw new Error("the type "+R.type+" is not supported by svg");var D=y(N);if(R.get("id")&&(D.id=R.get("id")),R.set("el",D),R.set("attrs",{}),A){var M=A.get("el");M||(M=A.createDom(),A.set("el",M)),M.appendChild(D)}return D}P.createDom=U;function F(R,N){var A=R.get("el"),D=T.toArray(A.children).sort(N),M=document.createDocumentFragment();D.forEach(function(O){M.appendChild(O)}),A.appendChild(M)}P.sortDom=F;function B(R,N){var A=R.parentNode,D=Array.from(A.childNodes).filter(function(V){return V.nodeType===1&&V.nodeName.toLowerCase()!=="defs"}),M=D[N],O=D.indexOf(R);if(M){if(O>N)A.insertBefore(R,M);else if(O<N){var k=D[N+1];k?A.insertBefore(R,k):A.appendChild(R)}}else A.appendChild(R)}P.moveTo=B},49171:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.refreshElement=P.drawChildren=void 0;var T=S(84092),j=S(84745);function y(F,B){B.forEach(function(R){R.draw(F)})}P.drawChildren=y;function U(F,B){var R=F.get("canvas");if(R&&R.get("autoDraw")){var N=R.get("context"),A=F.getParent(),D=A?A.getChildren():[R],M=F.get("el");if(B==="remove"){var O=F.get("isClipShape");if(O){var k=M&&M.parentNode,V=k&&k.parentNode;k&&V&&V.removeChild(k)}else M&&M.parentNode&&M.parentNode.removeChild(M)}else if(B==="show")M.setAttribute("visibility","visible");else if(B==="hide")M.setAttribute("visibility","hidden");else if(B==="zIndex")j.moveTo(M,D.indexOf(F));else if(B==="sort"){var X=F.get("children");X&&X.length&&j.sortDom(F,function(K,q){return X.indexOf(K)-X.indexOf(q)?1:0})}else B==="clear"?M&&(M.innerHTML=""):B==="matrix"?T.setTransform(F):B==="clip"?T.setClip(F,N):B==="attr"||B==="add"&&F.draw(N)}}P.refreshElement=U},19544:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.parsePath=P.parseRadius=void 0;var T=S(49242),j=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,y=/[^\s,]+/gi;function U(B){var R=0,N=0,A=0,D=0;return T.isArray(B)?B.length===1?R=N=A=D=B[0]:B.length===2?(R=A=B[0],N=D=B[1]):B.length===3?(R=B[0],N=D=B[1],A=B[2]):(R=B[0],N=B[1],A=B[2],D=B[3]):R=N=A=D=B,{r1:R,r2:N,r3:A,r4:D}}P.parseRadius=U;function F(B){if(B=B||[],T.isArray(B))return B;if(T.isString(B))return B=B.match(j),T.each(B,function(R,N){if(R=R.match(y),R[0].length>1){var A=R[0].charAt(0);R.splice(1,0,R[0].substr(1)),R[0]=A}T.each(R,function(D,M){isNaN(D)||(R[M]=+D)}),B[N]=R}),B}P.parsePath=F},84092:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.setClip=P.setTransform=P.setShadow=void 0;var T=S(84745);function j(F,B){var R=F.cfg.el,N=F.attr(),A={dx:N.shadowOffsetX,dy:N.shadowOffsetY,blur:N.shadowBlur,color:N.shadowColor};if(!A.dx&&!A.dy&&!A.blur&&!A.color)R.removeAttribute("filter");else{var D=B.find("filter",A);D||(D=B.addShadow(A)),R.setAttribute("filter","url(#"+D+")")}}P.setShadow=j;function y(F){var B=F.attr().matrix;if(B){for(var R=F.cfg.el,N=[],A=0;A<9;A+=3)N.push(B[A]+","+B[A+1]);N=N.join(","),N.indexOf("NaN")===-1?R.setAttribute("transform","matrix("+N+")"):console.warn("invalid matrix:",B)}}P.setTransform=y;function U(F,B){var R=F.getClip(),N=F.get("el");if(!R)N.removeAttribute("clip-path");else if(R&&!N.hasAttribute("clip-path")){T.createDom(R),R.createPath(B);var A=B.addClip(R);N.setAttribute("clip-path","url(#"+A+")")}}P.setClip=U},76789:function(Vt,P,S){"use strict";S.r(P),S.d(P,{__extends:function(){return j},__assign:function(){return y},__rest:function(){return U},__decorate:function(){return F},__param:function(){return B},__metadata:function(){return R},__awaiter:function(){return N},__generator:function(){return A},__createBinding:function(){return D},__exportStar:function(){return M},__values:function(){return O},__read:function(){return k},__spread:function(){return V},__spreadArrays:function(){return X},__spreadArray:function(){return K},__await:function(){return q},__asyncGenerator:function(){return ct},__asyncDelegator:function(){return _t},__asyncValues:function(){return yt},__makeTemplateObject:function(){return lt},__importStar:function(){return wt},__importDefault:function(){return Gt},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return Qt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(it,dt){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var Y in vt)Object.prototype.hasOwnProperty.call(vt,Y)&&(gt[Y]=vt[Y])},T(it,dt)};function j(it,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");T(it,dt);function gt(){this.constructor=it}it.prototype=dt===null?Object.create(dt):(gt.prototype=dt.prototype,new gt)}var y=function(){return y=Object.assign||function(dt){for(var gt,vt=1,Y=arguments.length;vt<Y;vt++){gt=arguments[vt];for(var ot in gt)Object.prototype.hasOwnProperty.call(gt,ot)&&(dt[ot]=gt[ot])}return dt},y.apply(this,arguments)};function U(it,dt){var gt={};for(var vt in it)Object.prototype.hasOwnProperty.call(it,vt)&&dt.indexOf(vt)<0&&(gt[vt]=it[vt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,vt=Object.getOwnPropertySymbols(it);Y<vt.length;Y++)dt.indexOf(vt[Y])<0&&Object.prototype.propertyIsEnumerable.call(it,vt[Y])&&(gt[vt[Y]]=it[vt[Y]]);return gt}function F(it,dt,gt,vt){var Y=arguments.length,ot=Y<3?dt:vt===null?vt=Object.getOwnPropertyDescriptor(dt,gt):vt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,dt,gt,vt);else for(var rt=it.length-1;rt>=0;rt--)(nt=it[rt])&&(ot=(Y<3?nt(ot):Y>3?nt(dt,gt,ot):nt(dt,gt))||ot);return Y>3&&ot&&Object.defineProperty(dt,gt,ot),ot}function B(it,dt){return function(gt,vt){dt(gt,vt,it)}}function R(it,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,dt)}function N(it,dt,gt,vt){function Y(ot){return ot instanceof gt?ot:new gt(function(nt){nt(ot)})}return new(gt||(gt=Promise))(function(ot,nt){function rt(It){try{d(vt.next(It))}catch(Ht){nt(Ht)}}function st(It){try{d(vt.throw(It))}catch(Ht){nt(Ht)}}function d(It){It.done?ot(It.value):Y(It.value).then(rt,st)}d((vt=vt.apply(it,dt||[])).next())})}function A(it,dt){var gt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},vt,Y,ot,nt;return nt={next:rt(0),throw:rt(1),return:rt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function rt(d){return function(It){return st([d,It])}}function st(d){if(vt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(vt=1,Y&&(ot=d[0]&2?Y.return:d[0]?Y.throw||((ot=Y.return)&&ot.call(Y),0):Y.next)&&!(ot=ot.call(Y,d[1])).done)return ot;switch(Y=0,ot&&(d=[d[0]&2,ot.value]),d[0]){case 0:case 1:ot=d;break;case 4:return gt.label++,{value:d[1],done:!1};case 5:gt.label++,Y=d[1],d=[0];continue;case 7:d=gt.ops.pop(),gt.trys.pop();continue;default:if(ot=gt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(d[0]===6||d[0]===2)){gt=0;continue}if(d[0]===3&&(!ot||d[1]>ot[0]&&d[1]<ot[3])){gt.label=d[1];break}if(d[0]===6&&gt.label<ot[1]){gt.label=ot[1],ot=d;break}if(ot&&gt.label<ot[2]){gt.label=ot[2],gt.ops.push(d);break}ot[2]&&gt.ops.pop(),gt.trys.pop();continue}d=dt.call(it,gt)}catch(It){d=[6,It],Y=0}finally{vt=ot=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var D=Object.create?function(it,dt,gt,vt){vt===void 0&&(vt=gt),Object.defineProperty(it,vt,{enumerable:!0,get:function(){return dt[gt]}})}:function(it,dt,gt,vt){vt===void 0&&(vt=gt),it[vt]=dt[gt]};function M(it,dt){for(var gt in it)gt!=="default"&&!Object.prototype.hasOwnProperty.call(dt,gt)&&D(dt,it,gt)}function O(it){var dt=typeof Symbol=="function"&&Symbol.iterator,gt=dt&&it[dt],vt=0;if(gt)return gt.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&vt>=it.length&&(it=void 0),{value:it&&it[vt++],done:!it}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(it,dt){var gt=typeof Symbol=="function"&&it[Symbol.iterator];if(!gt)return it;var vt=gt.call(it),Y,ot=[],nt;try{for(;(dt===void 0||dt-- >0)&&!(Y=vt.next()).done;)ot.push(Y.value)}catch(rt){nt={error:rt}}finally{try{Y&&!Y.done&&(gt=vt.return)&&gt.call(vt)}finally{if(nt)throw nt.error}}return ot}function V(){for(var it=[],dt=0;dt<arguments.length;dt++)it=it.concat(k(arguments[dt]));return it}function X(){for(var it=0,dt=0,gt=arguments.length;dt<gt;dt++)it+=arguments[dt].length;for(var vt=Array(it),Y=0,dt=0;dt<gt;dt++)for(var ot=arguments[dt],nt=0,rt=ot.length;nt<rt;nt++,Y++)vt[Y]=ot[nt];return vt}function K(it,dt,gt){if(gt||arguments.length===2)for(var vt=0,Y=dt.length,ot;vt<Y;vt++)(ot||!(vt in dt))&&(ot||(ot=Array.prototype.slice.call(dt,0,vt)),ot[vt]=dt[vt]);return it.concat(ot||Array.prototype.slice.call(dt))}function q(it){return this instanceof q?(this.v=it,this):new q(it)}function ct(it,dt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=gt.apply(it,dt||[]),Y,ot=[];return Y={},nt("next"),nt("throw"),nt("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function nt(kt){vt[kt]&&(Y[kt]=function(Xt){return new Promise(function(Kt,Jt){ot.push([kt,Xt,Kt,Jt])>1||rt(kt,Xt)})})}function rt(kt,Xt){try{st(vt[kt](Xt))}catch(Kt){Ht(ot[0][3],Kt)}}function st(kt){kt.value instanceof q?Promise.resolve(kt.value.v).then(d,It):Ht(ot[0][2],kt)}function d(kt){rt("next",kt)}function It(kt){rt("throw",kt)}function Ht(kt,Xt){kt(Xt),ot.shift(),ot.length&&rt(ot[0][0],ot[0][1])}}function _t(it){var dt,gt;return dt={},vt("next"),vt("throw",function(Y){throw Y}),vt("return"),dt[Symbol.iterator]=function(){return this},dt;function vt(Y,ot){dt[Y]=it[Y]?function(nt){return(gt=!gt)?{value:q(it[Y](nt)),done:Y==="return"}:ot?ot(nt):nt}:ot}}function yt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it[Symbol.asyncIterator],gt;return dt?dt.call(it):(it=typeof O=="function"?O(it):it[Symbol.iterator](),gt={},vt("next"),vt("throw"),vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function vt(ot){gt[ot]=it[ot]&&function(nt){return new Promise(function(rt,st){nt=it[ot](nt),Y(rt,st,nt.done,nt.value)})}}function Y(ot,nt,rt,st){Promise.resolve(st).then(function(d){ot({value:d,done:rt})},nt)}}function lt(it,dt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:dt}):it.raw=dt,it}var Lt=Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt};function wt(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var gt in it)gt!=="default"&&Object.prototype.hasOwnProperty.call(it,gt)&&D(dt,it,gt);return Lt(dt,it),dt}function Gt(it){return it&&it.__esModule?it:{default:it}}function re(it,dt,gt,vt){if(gt==="a"&&!vt)throw new TypeError("Private accessor was defined without a getter");if(typeof dt=="function"?it!==dt||!vt:!dt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?vt:gt==="a"?vt.call(it):vt?vt.value:dt.get(it)}function Qt(it,dt,gt,vt,Y){if(vt==="m")throw new TypeError("Private method is not writable");if(vt==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof dt=="function"?it!==dt||!Y:!dt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return vt==="a"?Y.call(it,gt):Y?Y.value=gt:dt.set(it,gt),gt}},27549:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(7802);P.wO=j.default;var y=S(89193);T=y.default;var U=S(98543);T=U.default;var F=S(34532);P.vs=F.default},7802:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(31502);T.translate=function(j,y,U){var F=new Array(9);return T.fromTranslation(F,U),T.multiply(j,F,y)},T.rotate=function(j,y,U){var F=new Array(9);return T.fromRotation(F,U),T.multiply(j,F,y)},T.scale=function(j,y,U){var F=new Array(9);return T.fromScaling(F,U),T.multiply(j,F,y)},T.transform=function(j,y){for(var U=[].concat(j),F=0,B=y.length;F<B;F++){var R=y[F];switch(R[0]){case"t":T.translate(U,U,[R[1],R[2]]);break;case"s":T.scale(U,U,[R[1],R[2]]);break;case"r":T.rotate(U,U,R[1]);break;default:break}}return U},P.default=T},34532:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=S(7802);P.default=function(y,U){var F=y?T.clone(y):[1,0,0,0,1,0,0,0,1];return T.each(U,function(B){switch(B[0]){case"t":j.default.translate(F,F,[B[1],B[2]]);break;case"s":j.default.scale(F,F,[B[1],B[2]]);break;case"r":j.default.rotate(F,F,B[1]);break;case"m":j.default.multiply(F,F,B[1]);break;default:return!1}}),F}},89193:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(76172),j=S(49242);T.angle=function(y,U){var F=T.dot(y,U)/(T.length(y)*T.length(U));return Math.acos(j.clamp(F,-1,1))},T.direction=function(y,U){return y[0]*U[1]-U[0]*y[1]},T.angleTo=function(y,U,F){var B=T.angle(y,U),R=T.direction(y,U)>=0;return F?R?Math.PI*2-B:B:R?B:Math.PI*2-B},T.vertical=function(y,U,F){return F?(y[0]=U[1],y[1]=-1*U[0]):(y[0]=-1*U[1],y[1]=U[0]),y},P.default=T},98543:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(88395);P.default=T},74988:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.setMatrixArrayType=y,P.toRadian=F,P.equals=B;var S=P.EPSILON=1e-6,T=P.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,j=P.RANDOM=Math.random;function y(R){P.ARRAY_TYPE=T=R}var U=Math.PI/180;function F(R){return R*U}function B(R,N){return Math.abs(R-N)<=S*Math.max(1,Math.abs(R),Math.abs(N))}},31502:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.sub=P.mul=void 0,P.create=U,P.fromMat4=F,P.clone=B,P.copy=R,P.fromValues=N,P.set=A,P.identity=D,P.transpose=M,P.invert=O,P.adjoint=k,P.determinant=V,P.multiply=X,P.translate=K,P.rotate=q,P.scale=ct,P.fromTranslation=_t,P.fromRotation=yt,P.fromScaling=lt,P.fromMat2d=Lt,P.fromQuat=wt,P.normalFromMat4=Gt,P.projection=re,P.str=Qt,P.frob=it,P.add=dt,P.subtract=gt,P.multiplyScalar=vt,P.multiplyScalarAndAdd=Y,P.exactEquals=ot,P.equals=nt;var T=S(74988),j=y(T);function y(d){if(d&&d.__esModule)return d;var It={};if(d!=null)for(var Ht in d)Object.prototype.hasOwnProperty.call(d,Ht)&&(It[Ht]=d[Ht]);return It.default=d,It}function U(){var d=new j.ARRAY_TYPE(9);return j.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function F(d,It){return d[0]=It[0],d[1]=It[1],d[2]=It[2],d[3]=It[4],d[4]=It[5],d[5]=It[6],d[6]=It[8],d[7]=It[9],d[8]=It[10],d}function B(d){var It=new j.ARRAY_TYPE(9);return It[0]=d[0],It[1]=d[1],It[2]=d[2],It[3]=d[3],It[4]=d[4],It[5]=d[5],It[6]=d[6],It[7]=d[7],It[8]=d[8],It}function R(d,It){return d[0]=It[0],d[1]=It[1],d[2]=It[2],d[3]=It[3],d[4]=It[4],d[5]=It[5],d[6]=It[6],d[7]=It[7],d[8]=It[8],d}function N(d,It,Ht,kt,Xt,Kt,Jt,ue,ce){var $t=new j.ARRAY_TYPE(9);return $t[0]=d,$t[1]=It,$t[2]=Ht,$t[3]=kt,$t[4]=Xt,$t[5]=Kt,$t[6]=Jt,$t[7]=ue,$t[8]=ce,$t}function A(d,It,Ht,kt,Xt,Kt,Jt,ue,ce,$t){return d[0]=It,d[1]=Ht,d[2]=kt,d[3]=Xt,d[4]=Kt,d[5]=Jt,d[6]=ue,d[7]=ce,d[8]=$t,d}function D(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d}function M(d,It){if(d===It){var Ht=It[1],kt=It[2],Xt=It[5];d[1]=It[3],d[2]=It[6],d[3]=Ht,d[5]=It[7],d[6]=kt,d[7]=Xt}else d[0]=It[0],d[1]=It[3],d[2]=It[6],d[3]=It[1],d[4]=It[4],d[5]=It[7],d[6]=It[2],d[7]=It[5],d[8]=It[8];return d}function O(d,It){var Ht=It[0],kt=It[1],Xt=It[2],Kt=It[3],Jt=It[4],ue=It[5],ce=It[6],$t=It[7],Ut=It[8],Rt=Ut*Jt-ue*$t,Pt=-Ut*Kt+ue*ce,Yt=$t*Kt-Jt*ce,Dt=Ht*Rt+kt*Pt+Xt*Yt;return Dt?(Dt=1/Dt,d[0]=Rt*Dt,d[1]=(-Ut*kt+Xt*$t)*Dt,d[2]=(ue*kt-Xt*Jt)*Dt,d[3]=Pt*Dt,d[4]=(Ut*Ht-Xt*ce)*Dt,d[5]=(-ue*Ht+Xt*Kt)*Dt,d[6]=Yt*Dt,d[7]=(-$t*Ht+kt*ce)*Dt,d[8]=(Jt*Ht-kt*Kt)*Dt,d):null}function k(d,It){var Ht=It[0],kt=It[1],Xt=It[2],Kt=It[3],Jt=It[4],ue=It[5],ce=It[6],$t=It[7],Ut=It[8];return d[0]=Jt*Ut-ue*$t,d[1]=Xt*$t-kt*Ut,d[2]=kt*ue-Xt*Jt,d[3]=ue*ce-Kt*Ut,d[4]=Ht*Ut-Xt*ce,d[5]=Xt*Kt-Ht*ue,d[6]=Kt*$t-Jt*ce,d[7]=kt*ce-Ht*$t,d[8]=Ht*Jt-kt*Kt,d}function V(d){var It=d[0],Ht=d[1],kt=d[2],Xt=d[3],Kt=d[4],Jt=d[5],ue=d[6],ce=d[7],$t=d[8];return It*($t*Kt-Jt*ce)+Ht*(-$t*Xt+Jt*ue)+kt*(ce*Xt-Kt*ue)}function X(d,It,Ht){var kt=It[0],Xt=It[1],Kt=It[2],Jt=It[3],ue=It[4],ce=It[5],$t=It[6],Ut=It[7],Rt=It[8],Pt=Ht[0],Yt=Ht[1],Dt=Ht[2],Nt=Ht[3],ne=Ht[4],ve=Ht[5],Re=Ht[6],je=Ht[7],Cr=Ht[8];return d[0]=Pt*kt+Yt*Jt+Dt*$t,d[1]=Pt*Xt+Yt*ue+Dt*Ut,d[2]=Pt*Kt+Yt*ce+Dt*Rt,d[3]=Nt*kt+ne*Jt+ve*$t,d[4]=Nt*Xt+ne*ue+ve*Ut,d[5]=Nt*Kt+ne*ce+ve*Rt,d[6]=Re*kt+je*Jt+Cr*$t,d[7]=Re*Xt+je*ue+Cr*Ut,d[8]=Re*Kt+je*ce+Cr*Rt,d}function K(d,It,Ht){var kt=It[0],Xt=It[1],Kt=It[2],Jt=It[3],ue=It[4],ce=It[5],$t=It[6],Ut=It[7],Rt=It[8],Pt=Ht[0],Yt=Ht[1];return d[0]=kt,d[1]=Xt,d[2]=Kt,d[3]=Jt,d[4]=ue,d[5]=ce,d[6]=Pt*kt+Yt*Jt+$t,d[7]=Pt*Xt+Yt*ue+Ut,d[8]=Pt*Kt+Yt*ce+Rt,d}function q(d,It,Ht){var kt=It[0],Xt=It[1],Kt=It[2],Jt=It[3],ue=It[4],ce=It[5],$t=It[6],Ut=It[7],Rt=It[8],Pt=Math.sin(Ht),Yt=Math.cos(Ht);return d[0]=Yt*kt+Pt*Jt,d[1]=Yt*Xt+Pt*ue,d[2]=Yt*Kt+Pt*ce,d[3]=Yt*Jt-Pt*kt,d[4]=Yt*ue-Pt*Xt,d[5]=Yt*ce-Pt*Kt,d[6]=$t,d[7]=Ut,d[8]=Rt,d}function ct(d,It,Ht){var kt=Ht[0],Xt=Ht[1];return d[0]=kt*It[0],d[1]=kt*It[1],d[2]=kt*It[2],d[3]=Xt*It[3],d[4]=Xt*It[4],d[5]=Xt*It[5],d[6]=It[6],d[7]=It[7],d[8]=It[8],d}function _t(d,It){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=It[0],d[7]=It[1],d[8]=1,d}function yt(d,It){var Ht=Math.sin(It),kt=Math.cos(It);return d[0]=kt,d[1]=Ht,d[2]=0,d[3]=-Ht,d[4]=kt,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d}function lt(d,It){return d[0]=It[0],d[1]=0,d[2]=0,d[3]=0,d[4]=It[1],d[5]=0,d[6]=0,d[7]=0,d[8]=1,d}function Lt(d,It){return d[0]=It[0],d[1]=It[1],d[2]=0,d[3]=It[2],d[4]=It[3],d[5]=0,d[6]=It[4],d[7]=It[5],d[8]=1,d}function wt(d,It){var Ht=It[0],kt=It[1],Xt=It[2],Kt=It[3],Jt=Ht+Ht,ue=kt+kt,ce=Xt+Xt,$t=Ht*Jt,Ut=kt*Jt,Rt=kt*ue,Pt=Xt*Jt,Yt=Xt*ue,Dt=Xt*ce,Nt=Kt*Jt,ne=Kt*ue,ve=Kt*ce;return d[0]=1-Rt-Dt,d[3]=Ut-ve,d[6]=Pt+ne,d[1]=Ut+ve,d[4]=1-$t-Dt,d[7]=Yt-Nt,d[2]=Pt-ne,d[5]=Yt+Nt,d[8]=1-$t-Rt,d}function Gt(d,It){var Ht=It[0],kt=It[1],Xt=It[2],Kt=It[3],Jt=It[4],ue=It[5],ce=It[6],$t=It[7],Ut=It[8],Rt=It[9],Pt=It[10],Yt=It[11],Dt=It[12],Nt=It[13],ne=It[14],ve=It[15],Re=Ht*ue-kt*Jt,je=Ht*ce-Xt*Jt,Cr=Ht*$t-Kt*Jt,$r=kt*ce-Xt*ue,Qr=kt*$t-Kt*ue,Ee=Xt*$t-Kt*ce,yn=Ut*Nt-Rt*Dt,ui=Ut*ne-Pt*Dt,la=Ut*ve-Yt*Dt,Or=Rt*ne-Pt*Nt,ln=Rt*ve-Yt*Nt,Kn=Pt*ve-Yt*ne,jn=Re*Kn-je*ln+Cr*Or+$r*la-Qr*ui+Ee*yn;return jn?(jn=1/jn,d[0]=(ue*Kn-ce*ln+$t*Or)*jn,d[1]=(ce*la-Jt*Kn-$t*ui)*jn,d[2]=(Jt*ln-ue*la+$t*yn)*jn,d[3]=(Xt*ln-kt*Kn-Kt*Or)*jn,d[4]=(Ht*Kn-Xt*la+Kt*ui)*jn,d[5]=(kt*la-Ht*ln-Kt*yn)*jn,d[6]=(Nt*Ee-ne*Qr+ve*$r)*jn,d[7]=(ne*Cr-Dt*Ee-ve*je)*jn,d[8]=(Dt*Qr-Nt*Cr+ve*Re)*jn,d):null}function re(d,It,Ht){return d[0]=2/It,d[1]=0,d[2]=0,d[3]=0,d[4]=-2/Ht,d[5]=0,d[6]=-1,d[7]=1,d[8]=1,d}function Qt(d){return"mat3("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"}function it(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2))}function dt(d,It,Ht){return d[0]=It[0]+Ht[0],d[1]=It[1]+Ht[1],d[2]=It[2]+Ht[2],d[3]=It[3]+Ht[3],d[4]=It[4]+Ht[4],d[5]=It[5]+Ht[5],d[6]=It[6]+Ht[6],d[7]=It[7]+Ht[7],d[8]=It[8]+Ht[8],d}function gt(d,It,Ht){return d[0]=It[0]-Ht[0],d[1]=It[1]-Ht[1],d[2]=It[2]-Ht[2],d[3]=It[3]-Ht[3],d[4]=It[4]-Ht[4],d[5]=It[5]-Ht[5],d[6]=It[6]-Ht[6],d[7]=It[7]-Ht[7],d[8]=It[8]-Ht[8],d}function vt(d,It,Ht){return d[0]=It[0]*Ht,d[1]=It[1]*Ht,d[2]=It[2]*Ht,d[3]=It[3]*Ht,d[4]=It[4]*Ht,d[5]=It[5]*Ht,d[6]=It[6]*Ht,d[7]=It[7]*Ht,d[8]=It[8]*Ht,d}function Y(d,It,Ht,kt){return d[0]=It[0]+Ht[0]*kt,d[1]=It[1]+Ht[1]*kt,d[2]=It[2]+Ht[2]*kt,d[3]=It[3]+Ht[3]*kt,d[4]=It[4]+Ht[4]*kt,d[5]=It[5]+Ht[5]*kt,d[6]=It[6]+Ht[6]*kt,d[7]=It[7]+Ht[7]*kt,d[8]=It[8]+Ht[8]*kt,d}function ot(d,It){return d[0]===It[0]&&d[1]===It[1]&&d[2]===It[2]&&d[3]===It[3]&&d[4]===It[4]&&d[5]===It[5]&&d[6]===It[6]&&d[7]===It[7]&&d[8]===It[8]}function nt(d,It){var Ht=d[0],kt=d[1],Xt=d[2],Kt=d[3],Jt=d[4],ue=d[5],ce=d[6],$t=d[7],Ut=d[8],Rt=It[0],Pt=It[1],Yt=It[2],Dt=It[3],Nt=It[4],ne=It[5],ve=It[6],Re=It[7],je=It[8];return Math.abs(Ht-Rt)<=j.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Rt))&&Math.abs(kt-Pt)<=j.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Pt))&&Math.abs(Xt-Yt)<=j.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Yt))&&Math.abs(Kt-Dt)<=j.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(Dt))&&Math.abs(Jt-Nt)<=j.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(Nt))&&Math.abs(ue-ne)<=j.EPSILON*Math.max(1,Math.abs(ue),Math.abs(ne))&&Math.abs(ce-ve)<=j.EPSILON*Math.max(1,Math.abs(ce),Math.abs(ve))&&Math.abs($t-Re)<=j.EPSILON*Math.max(1,Math.abs($t),Math.abs(Re))&&Math.abs(Ut-je)<=j.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(je))}var rt=P.mul=X,st=P.sub=gt},76172:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.forEach=P.sqrLen=P.sqrDist=P.dist=P.div=P.mul=P.sub=P.len=void 0,P.create=U,P.clone=F,P.fromValues=B,P.copy=R,P.set=N,P.add=A,P.subtract=D,P.multiply=M,P.divide=O,P.ceil=k,P.floor=V,P.min=X,P.max=K,P.round=q,P.scale=ct,P.scaleAndAdd=_t,P.distance=yt,P.squaredDistance=lt,P.length=Lt,P.squaredLength=wt,P.negate=Gt,P.inverse=re,P.normalize=Qt,P.dot=it,P.cross=dt,P.lerp=gt,P.random=vt,P.transformMat2=Y,P.transformMat2d=ot,P.transformMat3=nt,P.transformMat4=rt,P.rotate=st,P.angle=d,P.str=It,P.exactEquals=Ht,P.equals=kt;var T=S(74988),j=y(T);function y(Pt){if(Pt&&Pt.__esModule)return Pt;var Yt={};if(Pt!=null)for(var Dt in Pt)Object.prototype.hasOwnProperty.call(Pt,Dt)&&(Yt[Dt]=Pt[Dt]);return Yt.default=Pt,Yt}function U(){var Pt=new j.ARRAY_TYPE(2);return j.ARRAY_TYPE!=Float32Array&&(Pt[0]=0,Pt[1]=0),Pt}function F(Pt){var Yt=new j.ARRAY_TYPE(2);return Yt[0]=Pt[0],Yt[1]=Pt[1],Yt}function B(Pt,Yt){var Dt=new j.ARRAY_TYPE(2);return Dt[0]=Pt,Dt[1]=Yt,Dt}function R(Pt,Yt){return Pt[0]=Yt[0],Pt[1]=Yt[1],Pt}function N(Pt,Yt,Dt){return Pt[0]=Yt,Pt[1]=Dt,Pt}function A(Pt,Yt,Dt){return Pt[0]=Yt[0]+Dt[0],Pt[1]=Yt[1]+Dt[1],Pt}function D(Pt,Yt,Dt){return Pt[0]=Yt[0]-Dt[0],Pt[1]=Yt[1]-Dt[1],Pt}function M(Pt,Yt,Dt){return Pt[0]=Yt[0]*Dt[0],Pt[1]=Yt[1]*Dt[1],Pt}function O(Pt,Yt,Dt){return Pt[0]=Yt[0]/Dt[0],Pt[1]=Yt[1]/Dt[1],Pt}function k(Pt,Yt){return Pt[0]=Math.ceil(Yt[0]),Pt[1]=Math.ceil(Yt[1]),Pt}function V(Pt,Yt){return Pt[0]=Math.floor(Yt[0]),Pt[1]=Math.floor(Yt[1]),Pt}function X(Pt,Yt,Dt){return Pt[0]=Math.min(Yt[0],Dt[0]),Pt[1]=Math.min(Yt[1],Dt[1]),Pt}function K(Pt,Yt,Dt){return Pt[0]=Math.max(Yt[0],Dt[0]),Pt[1]=Math.max(Yt[1],Dt[1]),Pt}function q(Pt,Yt){return Pt[0]=Math.round(Yt[0]),Pt[1]=Math.round(Yt[1]),Pt}function ct(Pt,Yt,Dt){return Pt[0]=Yt[0]*Dt,Pt[1]=Yt[1]*Dt,Pt}function _t(Pt,Yt,Dt,Nt){return Pt[0]=Yt[0]+Dt[0]*Nt,Pt[1]=Yt[1]+Dt[1]*Nt,Pt}function yt(Pt,Yt){var Dt=Yt[0]-Pt[0],Nt=Yt[1]-Pt[1];return Math.sqrt(Dt*Dt+Nt*Nt)}function lt(Pt,Yt){var Dt=Yt[0]-Pt[0],Nt=Yt[1]-Pt[1];return Dt*Dt+Nt*Nt}function Lt(Pt){var Yt=Pt[0],Dt=Pt[1];return Math.sqrt(Yt*Yt+Dt*Dt)}function wt(Pt){var Yt=Pt[0],Dt=Pt[1];return Yt*Yt+Dt*Dt}function Gt(Pt,Yt){return Pt[0]=-Yt[0],Pt[1]=-Yt[1],Pt}function re(Pt,Yt){return Pt[0]=1/Yt[0],Pt[1]=1/Yt[1],Pt}function Qt(Pt,Yt){var Dt=Yt[0],Nt=Yt[1],ne=Dt*Dt+Nt*Nt;return ne>0&&(ne=1/Math.sqrt(ne),Pt[0]=Yt[0]*ne,Pt[1]=Yt[1]*ne),Pt}function it(Pt,Yt){return Pt[0]*Yt[0]+Pt[1]*Yt[1]}function dt(Pt,Yt,Dt){var Nt=Yt[0]*Dt[1]-Yt[1]*Dt[0];return Pt[0]=Pt[1]=0,Pt[2]=Nt,Pt}function gt(Pt,Yt,Dt,Nt){var ne=Yt[0],ve=Yt[1];return Pt[0]=ne+Nt*(Dt[0]-ne),Pt[1]=ve+Nt*(Dt[1]-ve),Pt}function vt(Pt,Yt){Yt=Yt||1;var Dt=j.RANDOM()*2*Math.PI;return Pt[0]=Math.cos(Dt)*Yt,Pt[1]=Math.sin(Dt)*Yt,Pt}function Y(Pt,Yt,Dt){var Nt=Yt[0],ne=Yt[1];return Pt[0]=Dt[0]*Nt+Dt[2]*ne,Pt[1]=Dt[1]*Nt+Dt[3]*ne,Pt}function ot(Pt,Yt,Dt){var Nt=Yt[0],ne=Yt[1];return Pt[0]=Dt[0]*Nt+Dt[2]*ne+Dt[4],Pt[1]=Dt[1]*Nt+Dt[3]*ne+Dt[5],Pt}function nt(Pt,Yt,Dt){var Nt=Yt[0],ne=Yt[1];return Pt[0]=Dt[0]*Nt+Dt[3]*ne+Dt[6],Pt[1]=Dt[1]*Nt+Dt[4]*ne+Dt[7],Pt}function rt(Pt,Yt,Dt){var Nt=Yt[0],ne=Yt[1];return Pt[0]=Dt[0]*Nt+Dt[4]*ne+Dt[12],Pt[1]=Dt[1]*Nt+Dt[5]*ne+Dt[13],Pt}function st(Pt,Yt,Dt,Nt){var ne=Yt[0]-Dt[0],ve=Yt[1]-Dt[1],Re=Math.sin(Nt),je=Math.cos(Nt);return Pt[0]=ne*je-ve*Re+Dt[0],Pt[1]=ne*Re+ve*je+Dt[1],Pt}function d(Pt,Yt){var Dt=Pt[0],Nt=Pt[1],ne=Yt[0],ve=Yt[1],Re=Dt*Dt+Nt*Nt;Re>0&&(Re=1/Math.sqrt(Re));var je=ne*ne+ve*ve;je>0&&(je=1/Math.sqrt(je));var Cr=(Dt*ne+Nt*ve)*Re*je;return Cr>1?0:Cr<-1?Math.PI:Math.acos(Cr)}function It(Pt){return"vec2("+Pt[0]+", "+Pt[1]+")"}function Ht(Pt,Yt){return Pt[0]===Yt[0]&&Pt[1]===Yt[1]}function kt(Pt,Yt){var Dt=Pt[0],Nt=Pt[1],ne=Yt[0],ve=Yt[1];return Math.abs(Dt-ne)<=j.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(ne))&&Math.abs(Nt-ve)<=j.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(ve))}var Xt=P.len=Lt,Kt=P.sub=D,Jt=P.mul=M,ue=P.div=O,ce=P.dist=yt,$t=P.sqrDist=lt,Ut=P.sqrLen=wt,Rt=P.forEach=function(){var Pt=U();return function(Yt,Dt,Nt,ne,ve,Re){var je=void 0,Cr=void 0;for(Dt||(Dt=2),Nt||(Nt=0),ne?Cr=Math.min(ne*Dt+Nt,Yt.length):Cr=Yt.length,je=Nt;je<Cr;je+=Dt)Pt[0]=Yt[je],Pt[1]=Yt[je+1],ve(Pt,Pt,Re),Yt[je]=Pt[0],Yt[je+1]=Pt[1];return Yt}}()},88395:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.forEach=P.sqrLen=P.len=P.sqrDist=P.dist=P.div=P.mul=P.sub=void 0,P.create=U,P.clone=F,P.length=B,P.fromValues=R,P.copy=N,P.set=A,P.add=D,P.subtract=M,P.multiply=O,P.divide=k,P.ceil=V,P.floor=X,P.min=K,P.max=q,P.round=ct,P.scale=_t,P.scaleAndAdd=yt,P.distance=lt,P.squaredDistance=Lt,P.squaredLength=wt,P.negate=Gt,P.inverse=re,P.normalize=Qt,P.dot=it,P.cross=dt,P.lerp=gt,P.hermite=vt,P.bezier=Y,P.random=ot,P.transformMat4=nt,P.transformMat3=rt,P.transformQuat=st,P.rotateX=d,P.rotateY=It,P.rotateZ=Ht,P.angle=kt,P.str=Xt,P.exactEquals=Kt,P.equals=Jt;var T=S(74988),j=y(T);function y(Nt){if(Nt&&Nt.__esModule)return Nt;var ne={};if(Nt!=null)for(var ve in Nt)Object.prototype.hasOwnProperty.call(Nt,ve)&&(ne[ve]=Nt[ve]);return ne.default=Nt,ne}function U(){var Nt=new j.ARRAY_TYPE(3);return j.ARRAY_TYPE!=Float32Array&&(Nt[0]=0,Nt[1]=0,Nt[2]=0),Nt}function F(Nt){var ne=new j.ARRAY_TYPE(3);return ne[0]=Nt[0],ne[1]=Nt[1],ne[2]=Nt[2],ne}function B(Nt){var ne=Nt[0],ve=Nt[1],Re=Nt[2];return Math.sqrt(ne*ne+ve*ve+Re*Re)}function R(Nt,ne,ve){var Re=new j.ARRAY_TYPE(3);return Re[0]=Nt,Re[1]=ne,Re[2]=ve,Re}function N(Nt,ne){return Nt[0]=ne[0],Nt[1]=ne[1],Nt[2]=ne[2],Nt}function A(Nt,ne,ve,Re){return Nt[0]=ne,Nt[1]=ve,Nt[2]=Re,Nt}function D(Nt,ne,ve){return Nt[0]=ne[0]+ve[0],Nt[1]=ne[1]+ve[1],Nt[2]=ne[2]+ve[2],Nt}function M(Nt,ne,ve){return Nt[0]=ne[0]-ve[0],Nt[1]=ne[1]-ve[1],Nt[2]=ne[2]-ve[2],Nt}function O(Nt,ne,ve){return Nt[0]=ne[0]*ve[0],Nt[1]=ne[1]*ve[1],Nt[2]=ne[2]*ve[2],Nt}function k(Nt,ne,ve){return Nt[0]=ne[0]/ve[0],Nt[1]=ne[1]/ve[1],Nt[2]=ne[2]/ve[2],Nt}function V(Nt,ne){return Nt[0]=Math.ceil(ne[0]),Nt[1]=Math.ceil(ne[1]),Nt[2]=Math.ceil(ne[2]),Nt}function X(Nt,ne){return Nt[0]=Math.floor(ne[0]),Nt[1]=Math.floor(ne[1]),Nt[2]=Math.floor(ne[2]),Nt}function K(Nt,ne,ve){return Nt[0]=Math.min(ne[0],ve[0]),Nt[1]=Math.min(ne[1],ve[1]),Nt[2]=Math.min(ne[2],ve[2]),Nt}function q(Nt,ne,ve){return Nt[0]=Math.max(ne[0],ve[0]),Nt[1]=Math.max(ne[1],ve[1]),Nt[2]=Math.max(ne[2],ve[2]),Nt}function ct(Nt,ne){return Nt[0]=Math.round(ne[0]),Nt[1]=Math.round(ne[1]),Nt[2]=Math.round(ne[2]),Nt}function _t(Nt,ne,ve){return Nt[0]=ne[0]*ve,Nt[1]=ne[1]*ve,Nt[2]=ne[2]*ve,Nt}function yt(Nt,ne,ve,Re){return Nt[0]=ne[0]+ve[0]*Re,Nt[1]=ne[1]+ve[1]*Re,Nt[2]=ne[2]+ve[2]*Re,Nt}function lt(Nt,ne){var ve=ne[0]-Nt[0],Re=ne[1]-Nt[1],je=ne[2]-Nt[2];return Math.sqrt(ve*ve+Re*Re+je*je)}function Lt(Nt,ne){var ve=ne[0]-Nt[0],Re=ne[1]-Nt[1],je=ne[2]-Nt[2];return ve*ve+Re*Re+je*je}function wt(Nt){var ne=Nt[0],ve=Nt[1],Re=Nt[2];return ne*ne+ve*ve+Re*Re}function Gt(Nt,ne){return Nt[0]=-ne[0],Nt[1]=-ne[1],Nt[2]=-ne[2],Nt}function re(Nt,ne){return Nt[0]=1/ne[0],Nt[1]=1/ne[1],Nt[2]=1/ne[2],Nt}function Qt(Nt,ne){var ve=ne[0],Re=ne[1],je=ne[2],Cr=ve*ve+Re*Re+je*je;return Cr>0&&(Cr=1/Math.sqrt(Cr),Nt[0]=ne[0]*Cr,Nt[1]=ne[1]*Cr,Nt[2]=ne[2]*Cr),Nt}function it(Nt,ne){return Nt[0]*ne[0]+Nt[1]*ne[1]+Nt[2]*ne[2]}function dt(Nt,ne,ve){var Re=ne[0],je=ne[1],Cr=ne[2],$r=ve[0],Qr=ve[1],Ee=ve[2];return Nt[0]=je*Ee-Cr*Qr,Nt[1]=Cr*$r-Re*Ee,Nt[2]=Re*Qr-je*$r,Nt}function gt(Nt,ne,ve,Re){var je=ne[0],Cr=ne[1],$r=ne[2];return Nt[0]=je+Re*(ve[0]-je),Nt[1]=Cr+Re*(ve[1]-Cr),Nt[2]=$r+Re*(ve[2]-$r),Nt}function vt(Nt,ne,ve,Re,je,Cr){var $r=Cr*Cr,Qr=$r*(2*Cr-3)+1,Ee=$r*(Cr-2)+Cr,yn=$r*(Cr-1),ui=$r*(3-2*Cr);return Nt[0]=ne[0]*Qr+ve[0]*Ee+Re[0]*yn+je[0]*ui,Nt[1]=ne[1]*Qr+ve[1]*Ee+Re[1]*yn+je[1]*ui,Nt[2]=ne[2]*Qr+ve[2]*Ee+Re[2]*yn+je[2]*ui,Nt}function Y(Nt,ne,ve,Re,je,Cr){var $r=1-Cr,Qr=$r*$r,Ee=Cr*Cr,yn=Qr*$r,ui=3*Cr*Qr,la=3*Ee*$r,Or=Ee*Cr;return Nt[0]=ne[0]*yn+ve[0]*ui+Re[0]*la+je[0]*Or,Nt[1]=ne[1]*yn+ve[1]*ui+Re[1]*la+je[1]*Or,Nt[2]=ne[2]*yn+ve[2]*ui+Re[2]*la+je[2]*Or,Nt}function ot(Nt,ne){ne=ne||1;var ve=j.RANDOM()*2*Math.PI,Re=j.RANDOM()*2-1,je=Math.sqrt(1-Re*Re)*ne;return Nt[0]=Math.cos(ve)*je,Nt[1]=Math.sin(ve)*je,Nt[2]=Re*ne,Nt}function nt(Nt,ne,ve){var Re=ne[0],je=ne[1],Cr=ne[2],$r=ve[3]*Re+ve[7]*je+ve[11]*Cr+ve[15];return $r=$r||1,Nt[0]=(ve[0]*Re+ve[4]*je+ve[8]*Cr+ve[12])/$r,Nt[1]=(ve[1]*Re+ve[5]*je+ve[9]*Cr+ve[13])/$r,Nt[2]=(ve[2]*Re+ve[6]*je+ve[10]*Cr+ve[14])/$r,Nt}function rt(Nt,ne,ve){var Re=ne[0],je=ne[1],Cr=ne[2];return Nt[0]=Re*ve[0]+je*ve[3]+Cr*ve[6],Nt[1]=Re*ve[1]+je*ve[4]+Cr*ve[7],Nt[2]=Re*ve[2]+je*ve[5]+Cr*ve[8],Nt}function st(Nt,ne,ve){var Re=ve[0],je=ve[1],Cr=ve[2],$r=ve[3],Qr=ne[0],Ee=ne[1],yn=ne[2],ui=je*yn-Cr*Ee,la=Cr*Qr-Re*yn,Or=Re*Ee-je*Qr,ln=je*Or-Cr*la,Kn=Cr*ui-Re*Or,jn=Re*la-je*ui,wi=$r*2;return ui*=wi,la*=wi,Or*=wi,ln*=2,Kn*=2,jn*=2,Nt[0]=Qr+ui+ln,Nt[1]=Ee+la+Kn,Nt[2]=yn+Or+jn,Nt}function d(Nt,ne,ve,Re){var je=[],Cr=[];return je[0]=ne[0]-ve[0],je[1]=ne[1]-ve[1],je[2]=ne[2]-ve[2],Cr[0]=je[0],Cr[1]=je[1]*Math.cos(Re)-je[2]*Math.sin(Re),Cr[2]=je[1]*Math.sin(Re)+je[2]*Math.cos(Re),Nt[0]=Cr[0]+ve[0],Nt[1]=Cr[1]+ve[1],Nt[2]=Cr[2]+ve[2],Nt}function It(Nt,ne,ve,Re){var je=[],Cr=[];return je[0]=ne[0]-ve[0],je[1]=ne[1]-ve[1],je[2]=ne[2]-ve[2],Cr[0]=je[2]*Math.sin(Re)+je[0]*Math.cos(Re),Cr[1]=je[1],Cr[2]=je[2]*Math.cos(Re)-je[0]*Math.sin(Re),Nt[0]=Cr[0]+ve[0],Nt[1]=Cr[1]+ve[1],Nt[2]=Cr[2]+ve[2],Nt}function Ht(Nt,ne,ve,Re){var je=[],Cr=[];return je[0]=ne[0]-ve[0],je[1]=ne[1]-ve[1],je[2]=ne[2]-ve[2],Cr[0]=je[0]*Math.cos(Re)-je[1]*Math.sin(Re),Cr[1]=je[0]*Math.sin(Re)+je[1]*Math.cos(Re),Cr[2]=je[2],Nt[0]=Cr[0]+ve[0],Nt[1]=Cr[1]+ve[1],Nt[2]=Cr[2]+ve[2],Nt}function kt(Nt,ne){var ve=R(Nt[0],Nt[1],Nt[2]),Re=R(ne[0],ne[1],ne[2]);Qt(ve,ve),Qt(Re,Re);var je=it(ve,Re);return je>1?0:je<-1?Math.PI:Math.acos(je)}function Xt(Nt){return"vec3("+Nt[0]+", "+Nt[1]+", "+Nt[2]+")"}function Kt(Nt,ne){return Nt[0]===ne[0]&&Nt[1]===ne[1]&&Nt[2]===ne[2]}function Jt(Nt,ne){var ve=Nt[0],Re=Nt[1],je=Nt[2],Cr=ne[0],$r=ne[1],Qr=ne[2];return Math.abs(ve-Cr)<=j.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Cr))&&Math.abs(Re-$r)<=j.EPSILON*Math.max(1,Math.abs(Re),Math.abs($r))&&Math.abs(je-Qr)<=j.EPSILON*Math.max(1,Math.abs(je),Math.abs(Qr))}var ue=P.sub=M,ce=P.mul=O,$t=P.div=k,Ut=P.dist=lt,Rt=P.sqrDist=Lt,Pt=P.len=B,Yt=P.sqrLen=wt,Dt=P.forEach=function(){var Nt=U();return function(ne,ve,Re,je,Cr,$r){var Qr=void 0,Ee=void 0;for(ve||(ve=3),Re||(Re=0),je?Ee=Math.min(je*ve+Re,ne.length):Ee=ne.length,Qr=Re;Qr<Ee;Qr+=ve)Nt[0]=ne[Qr],Nt[1]=ne[Qr+1],Nt[2]=ne[Qr+2],Cr(Nt,Nt,$r),ne[Qr]=Nt[0],ne[Qr+1]=Nt[1],ne[Qr+2]=Nt[2];return ne}}()},92640:function(Vt,P,S){function T(A,D){A.prototype=Object.create(D.prototype),A.prototype.constructor=A,A.__proto__=D}var j=S(4905),y=S(90390),U=S(30130),F=S(22965),B=function(A){T(D,A);function D(){return A.apply(this,arguments)||this}var M=D.prototype;return M.execute=function(){var k=this;return U(k.rootNode,k.options,y)},D}(j),R={};function N(A,D){return D=F.assign({},R,D),new B(A,D).execute()}Vt.exports=N},34542:function(Vt,P,S){function T(A,D){A.prototype=Object.create(D.prototype),A.prototype.constructor=A,A.__proto__=D}var j=S(4905),y=S(37133),U=S(30130),F=S(22965),B=function(A){T(D,A);function D(){return A.apply(this,arguments)||this}var M=D.prototype;return M.execute=function(){var k=this;return k.rootNode.width=0,U(k.rootNode,k.options,y)},D}(j),R={};function N(A,D){return D=F.assign({},R,D),new B(A,D).execute()}Vt.exports=N},57088:function(Vt,P,S){function T(M,O){M.prototype=Object.create(O.prototype),M.prototype.constructor=M,M.__proto__=O}var j=S(4905),y=S(10568),U=S(59286),F=S(22965),B=["LR","RL","H"],R=B[0],N=function(M){T(O,M);function O(){return M.apply(this,arguments)||this}var k=O.prototype;return k.execute=function(){var X=this,K=X.options,q=X.rootNode;K.isHorizontal=!0;var ct=K.indent,_t=ct===void 0?20:ct,yt=K.dropCap,lt=yt===void 0?!0:yt,Lt=K.direction||R;if(Lt&&B.indexOf(Lt)===-1)throw new TypeError("Invalid direction: "+Lt);if(Lt===B[0])y(q,_t,lt);else if(Lt===B[1])y(q,_t,lt),q.right2left();else if(Lt===B[2]){var wt=U(q,K),Gt=wt.left,re=wt.right;y(Gt,_t,lt),Gt.right2left(),y(re,_t,lt);var Qt=Gt.getBoundingBox();re.translate(Qt.width,0),q.x=re.x-q.width/2}return q},O}(j),A={};function D(M,O){return O=F.assign({},A,O),new N(M,O).execute()}Vt.exports=D},77201:function(Vt,P,S){var T={compactBox:S(92640),dendrogram:S(34542),indented:S(57088),mindmap:S(1355)};Vt.exports=T},4905:function(Vt,P,S){var T=S(27249),j=function(){function y(F,B){B===void 0&&(B={});var R=this;R.options=B,R.rootNode=T(F,B)}var U=y.prototype;return U.execute=function(){throw new Error("please override this method")},y}();Vt.exports=j},37133:function(Vt,P,S){var T=S(22965);function j(F,B){F===void 0&&(F=0),B===void 0&&(B=[]);var R=this;R.x=R.y=0,R.leftChild=R.rightChild=null,R.height=0,R.children=B}var y={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function U(F,B,R){R?(B.x=F.x,B.y=F.y):(B.x=F.y,B.y=F.x),F.children.forEach(function(N,A){U(N,B.children[A],R)})}Vt.exports=function(F,B){B===void 0&&(B={}),B=T.assign({},y,B);var R=0;function N(k){if(!k)return null;k.width=0,k.depth&&k.depth>R&&(R=k.depth);var V=k.children,X=V.length,K=new j(k.height,[]);return V.forEach(function(q,ct){var _t=N(q);K.children.push(_t),ct===0&&(K.leftChild=_t),ct===X-1&&(K.rightChild=_t)}),K.originNode=k,K.isLeaf=k.isLeaf(),K}function A(k){if(k.isLeaf||k.children.length===0)k.drawingDepth=R;else{var V=k.children.map(function(K){return A(K)}),X=Math.min.apply(null,V);k.drawingDepth=X-1}return k.drawingDepth}var D;function M(k){k.x=k.drawingDepth*B.rankSep,k.isLeaf?(k.y=0,D&&(k.y=D.y+D.height+B.nodeSep,k.originNode.parent!==D.originNode.parent&&(k.y+=B.subTreeSep)),D=k):(k.children.forEach(function(V){M(V)}),k.y=(k.leftChild.y+k.rightChild.y)/2)}var O=N(F);return A(O),M(O),U(O,F,B.isHorizontal),F}},30130:function(Vt,P,S){var T=S(59286),j=["LR","RL","TB","BT","H","V"],y=["LR","RL","H"],U=function(R){return y.indexOf(R)>-1},F=j[0];Vt.exports=function(B,R,N){var A=R.direction||F;if(R.isHorizontal=U(A),A&&j.indexOf(A)===-1)throw new TypeError("Invalid direction: "+A);if(A===j[0])N(B,R);else if(A===j[1])N(B,R),B.right2left();else if(A===j[2])N(B,R);else if(A===j[3])N(B,R),B.bottom2top();else if(A===j[4]||A===j[5]){var D=T(B,R),M=D.left,O=D.right;N(M,R),N(O,R),R.isHorizontal?M.right2left():M.bottom2top(),O.translate(M.x-O.x,M.y-O.y),B.x=M.x,B.y=O.y;var k=B.getBoundingBox();R.isHorizontal?k.top<0&&B.translate(0,-k.top):k.left<0&&B.translate(-k.left,0)}var V=R.fixedRoot;return V===void 0&&(V=!0),V&&B.translate(-(B.x+B.width/2+B.hgap),-(B.y+B.height/2+B.vgap)),B}},27249:function(Vt,P,S){var T=S(22965),j=18,y=j*2,U=j,F={getId:function(A){return A.id||A.name},getPreH:function(A){return A.preH||0},getPreV:function(A){return A.preV||0},getHGap:function(A){return A.hgap||U},getVGap:function(A){return A.vgap||U},getChildren:function(A){return A.children},getHeight:function(A){return A.height||y},getWidth:function(A){var D=A.label||" ";return A.width||D.split("").length*j}};function B(N,A){var D=this;if(D.vgap=D.hgap=0,N instanceof B)return N;D.data=N;var M=A.getHGap(N),O=A.getVGap(N);return D.preH=A.getPreH(N),D.preV=A.getPreV(N),D.width=A.getWidth(N),D.height=A.getHeight(N),D.width+=D.preH,D.height+=D.preV,D.id=A.getId(N),D.x=D.y=0,D.depth=0,D.children||(D.children=[]),D.addGap(M,O),D}T.assign(B.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(A,D){var M=this;M.hgap+=A,M.vgap+=D,M.width+=2*A,M.height+=2*D},eachNode:function(A){for(var D=this,M=[D],O;O=M.shift();)A(O),M=O.children.concat(M)},DFTraverse:function(A){this.eachNode(A)},BFTraverse:function(A){for(var D=this,M=[D],O;O=M.shift();)A(O),M=M.concat(O.children)},getBoundingBox:function(){var A={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(D){A.left=Math.min(A.left,D.x),A.top=Math.min(A.top,D.y),A.width=Math.max(A.width,D.x+D.width),A.height=Math.max(A.height,D.y+D.height)}),A},translate:function(A,D){A===void 0&&(A=0),D===void 0&&(D=0),this.eachNode(function(M){M.x+=A,M.y+=D,M.x+=M.preH,M.y+=M.preV})},right2left:function(){var A=this,D=A.getBoundingBox();A.eachNode(function(M){M.x=M.x-(M.x-D.left)*2-M.width}),A.translate(D.width,0)},bottom2top:function(){var A=this,D=A.getBoundingBox();A.eachNode(function(M){M.y=M.y-(M.y-D.top)*2-M.height}),A.translate(0,D.height)}});function R(N,A,D){A===void 0&&(A={}),A=T.assign({},F,A);var M=new B(N,A),O=[M],k;if(!D&&!N.collapsed){for(;k=O.shift();)if(!k.data.collapsed){var V=A.getChildren(k.data),X=V?V.length:0;if(k.children=new Array(X),V&&X)for(var K=0;K<X;K++){var q=new B(V[K],A);k.children[K]=q,O.push(q),q.parent=k,q.depth=k.depth+1}}}return M}Vt.exports=R},10568:function(Vt){function P(S,T,j,y){var U=typeof j=="function"?j(S):j*S.depth;if(!y)try{if(S.id===S.parent.children[0].id){S.x+=U,S.y=T?T.y:0;return}}catch(F){}S.x+=U,S.y=T?T.y+T.height:0}Vt.exports=function(S,T,j){var y=null;S.eachNode(function(U){P(U,y,T,j),y=U})}},24461:function(Vt,P,S){var T=S(22965);function j(F,B){var R=0;return F.children.length?F.children.forEach(function(N){R+=j(N,B)}):R=F.height,F._subTreeSep=B.getSubTreeSep(F.data),F.totalHeight=Math.max(F.height,R)+2*F._subTreeSep,F.totalHeight}function y(F){var B=F.children,R=B.length;if(R){B.forEach(function(k){y(k)});var N=B[0],A=B[R-1],D=A.y-N.y+A.height,M=0;if(B.forEach(function(k){M+=k.totalHeight}),D>F.height)F.y=N.y+D/2-F.height/2;else if(B.length!==1||F.height>M){var O=F.y+(F.height-D)/2-N.y;B.forEach(function(k){k.translate(0,O)})}else F.y=(N.y+N.height/2+A.y+A.height/2)/2-F.height/2}}var U={getSubTreeSep:function(){return 0}};Vt.exports=function(F,B){B===void 0&&(B={}),B=T.assign({},U,B),F.parent={x:0,width:0,height:0,y:0},F.BFTraverse(function(R){R.x=R.parent.x+R.parent.width}),F.parent=null,j(F,B),F.startY=0,F.y=F.totalHeight/2-F.height/2,F.eachNode(function(R){var N=R.children,A=N.length;if(A){var D=N[0];if(D.startY=R.startY+R._subTreeSep,A===1)D.y=R.y+R.height/2-D.height/2;else{D.y=D.startY+D.totalHeight/2-D.height/2;for(var M=1;M<A;M++){var O=N[M];O.startY=N[M-1].startY+N[M-1].totalHeight,O.y=O.startY+O.totalHeight/2-O.height/2}}}}),y(F)}},90390:function(Vt){function P(F,B,R,N){N===void 0&&(N=[]);var A=this;A.w=F||0,A.h=B||0,A.y=R||0,A.x=0,A.c=N||[],A.cs=N.length,A.prelim=0,A.mod=0,A.shift=0,A.change=0,A.tl=null,A.tr=null,A.el=null,A.er=null,A.msel=0,A.mser=0}P.fromNode=function(F,B){if(!F)return null;var R=[];return F.children.forEach(function(N){R.push(P.fromNode(N,B))}),B?new P(F.height,F.width,F.x,R):new P(F.width,F.height,F.y,R)};function S(F,B,R){R?F.y+=B:F.x+=B,F.children.forEach(function(N){S(N,B,R)})}function T(F,B){var R=B?F.y:F.x;return F.children.forEach(function(N){R=Math.min(T(N,B),R)}),R}function j(F,B){var R=T(F,B);S(F,-R,B)}function y(F,B,R){R?B.y=F.x:B.x=F.x,F.c.forEach(function(N,A){y(N,B.children[A],R)})}function U(F,B,R){R===void 0&&(R=0),B?(F.x=R,R+=F.width):(F.y=R,R+=F.height),F.children.forEach(function(N){U(N,B,R)})}Vt.exports=function(F,B){B===void 0&&(B={});var R=B.isHorizontal;function N(wt){if(wt.cs===0){A(wt);return}N(wt.c[0]);for(var Gt=lt(V(wt.c[0].el),0,null),re=1;re<wt.cs;++re){N(wt.c[re]);var Qt=V(wt.c[re].er);D(wt,re,Gt),Gt=lt(Qt,re,Gt)}q(wt),A(wt)}function A(wt){wt.cs===0?(wt.el=wt,wt.er=wt,wt.msel=wt.mser=0):(wt.el=wt.c[0].el,wt.msel=wt.c[0].msel,wt.er=wt.c[wt.cs-1].er,wt.mser=wt.c[wt.cs-1].mser)}function D(wt,Gt,re){for(var Qt=wt.c[Gt-1],it=Qt.mod,dt=wt.c[Gt],gt=dt.mod;Qt!==null&&dt!==null;){V(Qt)>re.low&&(re=re.nxt);var vt=it+Qt.prelim+Qt.w-(gt+dt.prelim);vt>0&&(gt+=vt,M(wt,Gt,re.index,vt));var Y=V(Qt),ot=V(dt);Y<=ot&&(Qt=k(Qt),Qt!==null&&(it+=Qt.mod)),Y>=ot&&(dt=O(dt),dt!==null&&(gt+=dt.mod))}!Qt&&!!dt?X(wt,Gt,dt,gt):!!Qt&&!dt&&K(wt,Gt,Qt,it)}function M(wt,Gt,re,Qt){wt.c[Gt].mod+=Qt,wt.c[Gt].msel+=Qt,wt.c[Gt].mser+=Qt,_t(wt,Gt,re,Qt)}function O(wt){return wt.cs===0?wt.tl:wt.c[0]}function k(wt){return wt.cs===0?wt.tr:wt.c[wt.cs-1]}function V(wt){return wt.y+wt.h}function X(wt,Gt,re,Qt){var it=wt.c[0].el;it.tl=re;var dt=Qt-re.mod-wt.c[0].msel;it.mod+=dt,it.prelim-=dt,wt.c[0].el=wt.c[Gt].el,wt.c[0].msel=wt.c[Gt].msel}function K(wt,Gt,re,Qt){var it=wt.c[Gt].er;it.tr=re;var dt=Qt-re.mod-wt.c[Gt].mser;it.mod+=dt,it.prelim-=dt,wt.c[Gt].er=wt.c[Gt-1].er,wt.c[Gt].mser=wt.c[Gt-1].mser}function q(wt){wt.prelim=(wt.c[0].prelim+wt.c[0].mod+wt.c[wt.cs-1].mod+wt.c[wt.cs-1].prelim+wt.c[wt.cs-1].w)/2-wt.w/2}function ct(wt,Gt){Gt+=wt.mod,wt.x=wt.prelim+Gt,yt(wt);for(var re=0;re<wt.cs;re++)ct(wt.c[re],Gt)}function _t(wt,Gt,re,Qt){if(re!==Gt-1){var it=Gt-re;wt.c[re+1].shift+=Qt/it,wt.c[Gt].shift-=Qt/it,wt.c[Gt].change-=Qt-Qt/it}}function yt(wt){for(var Gt=0,re=0,Qt=0;Qt<wt.cs;Qt++)Gt+=wt.c[Qt].shift,re+=Gt+wt.c[Qt].change,wt.c[Qt].mod+=re}function lt(wt,Gt,re){for(;re!==null&&wt>=re.low;)re=re.nxt;return{low:wt,index:Gt,nxt:re}}U(F,R);var Lt=P.fromNode(F,R);return N(Lt),ct(Lt,0),y(Lt,F,R),j(F,R),F}},59286:function(Vt,P,S){var T=S(27249);Vt.exports=function(j,y){for(var U=T(j.data,y,!0),F=T(j.data,y,!0),B=j.children.length,R=Math.round(B/2),N=y.getSide||function(O,k){return k<R?"right":"left"},A=0;A<B;A++){var D=j.children[A],M=N(D,A);M==="right"?F.children.push(D):U.children.push(D)}return U.eachNode(function(O){O.isRoot()||(O.side="left")}),F.eachNode(function(O){O.isRoot()||(O.side="right")}),{left:U,right:F}}},1355:function(Vt,P,S){function T(A,D){A.prototype=Object.create(D.prototype),A.prototype.constructor=A,A.__proto__=D}var j=S(4905),y=S(24461),U=S(30130),F=S(22965),B=function(A){T(D,A);function D(){return A.apply(this,arguments)||this}var M=D.prototype;return M.execute=function(){var k=this;return U(k.rootNode,k.options,y)},D}(j),R={};function N(A,D){return D=F.assign({},R,D),new B(A,D).execute()}Vt.exports=N},22965:function(Vt,P,S){var T=S(49242),j=T.mix;Vt.exports={assign:j}},97490:function(Vt,P,S){"use strict";S.d(P,{Ie:function(){return ZL},JE:function(){return nC}});var T={};S.r(T),S.d(T,{add:function(){return Ki},adjoint:function(){return m0},clone:function(){return Hd},copy:function(){return Cg},create:function(){return uh},determinant:function(){return om},equals:function(){return Xn},exactEquals:function(){return ao},frob:function(){return Ai},fromQuat:function(){return On},fromQuat2:function(){return gy},fromRotation:function(){return eu},fromRotationTranslation:function(){return Ov},fromRotationTranslationScale:function(){return Ln},fromRotationTranslationScaleOrigin:function(){return ni},fromScaling:function(){return Kd},fromTranslation:function(){return Wd},fromValues:function(){return Us},fromXRotation:function(){return Mg},fromYRotation:function(){return Rf},fromZRotation:function(){return ud},frustum:function(){return Wn},getRotation:function(){return Pr},getScaling:function(){return ar},getTranslation:function(){return be},identity:function(){return tl},invert:function(){return jd},lookAt:function(){return Di},mul:function(){return ei},multiply:function(){return kf},multiplyScalar:function(){return Zi},multiplyScalarAndAdd:function(){return ha},ortho:function(){return ra},orthoNO:function(){return zi},orthoZO:function(){return Mi},perspective:function(){return xi},perspectiveFromFieldOfView:function(){return Ni},perspectiveNO:function(){return fi},perspectiveZO:function(){return Ii},rotate:function(){return Ag},rotateX:function(){return Yd},rotateY:function(){return Dh},rotateZ:function(){return gl},scale:function(){return Up},set:function(){return gp},str:function(){return zn},sub:function(){return ka},subtract:function(){return li},targetTo:function(){return fn},translate:function(){return Xd},transpose:function(){return Ic}});var j=S(67294),y=(0,j.createContext)({});function U(){return(0,j.useContext)(y)}var F={},B={},R=function(p){return B[p]},N=function(p,c){B[p]=c},A=function(p){return F[p]},D=function(p,c){F[p]=c},M={},O={},k=34,V=10,X=13;function K(s){return new Function("d","return {"+s.map(function(p,c){return JSON.stringify(p)+": d["+c+'] || ""'}).join(",")+"}")}function q(s,p){var c=K(s);return function(h,g){return p(c(h),g,s)}}function ct(s){var p=Object.create(null),c=[];return s.forEach(function(h){for(var g in h)g in p||c.push(p[g]=g)}),c}function _t(s,p){var c=s+"",h=c.length;return h<p?new Array(p-h+1).join(0)+c:c}function yt(s){return s<0?"-"+_t(-s,6):s>9999?"+"+_t(s,6):_t(s,4)}function lt(s){var p=s.getUTCHours(),c=s.getUTCMinutes(),h=s.getUTCSeconds(),g=s.getUTCMilliseconds();return isNaN(s)?"Invalid Date":yt(s.getUTCFullYear(),4)+"-"+_t(s.getUTCMonth()+1,2)+"-"+_t(s.getUTCDate(),2)+(g?"T"+_t(p,2)+":"+_t(c,2)+":"+_t(h,2)+"."+_t(g,3)+"Z":h?"T"+_t(p,2)+":"+_t(c,2)+":"+_t(h,2)+"Z":c||p?"T"+_t(p,2)+":"+_t(c,2)+"Z":"")}function Lt(s){var p=new RegExp('["'+s+`
\r]`),c=s.charCodeAt(0);function h(Bt,se){var xe,De,Xe=g(Bt,function(Qe,br){if(xe)return xe(Qe,br-1);De=Qe,xe=se?q(Qe,se):K(Qe)});return Xe.columns=De||[],Xe}function g(Bt,se){var xe=[],De=Bt.length,Xe=0,Qe=0,br,Wr=De<=0,sn=!1;Bt.charCodeAt(De-1)===V&&--De,Bt.charCodeAt(De-1)===X&&--De;function xn(){if(Wr)return O;if(sn)return sn=!1,M;var Bn,Qn=Xe,di;if(Bt.charCodeAt(Qn)===k){for(;Xe++<De&&Bt.charCodeAt(Xe)!==k||Bt.charCodeAt(++Xe)===k;);return(Bn=Xe)>=De?Wr=!0:(di=Bt.charCodeAt(Xe++))===V?sn=!0:di===X&&(sn=!0,Bt.charCodeAt(Xe)===V&&++Xe),Bt.slice(Qn+1,Bn-1).replace(/""/g,'"')}for(;Xe<De;){if((di=Bt.charCodeAt(Bn=Xe++))===V)sn=!0;else if(di===X)sn=!0,Bt.charCodeAt(Xe)===V&&++Xe;else if(di!==c)continue;return Bt.slice(Qn,Bn)}return Wr=!0,Bt.slice(Qn,De)}for(;(br=xn())!==O;){for(var Rn=[];br!==M&&br!==O;)Rn.push(br),br=xn();se&&(Rn=se(Rn,Qe++))==null||xe.push(Rn)}return xe}function _(Bt,se){return Bt.map(function(xe){return se.map(function(De){return Et(xe[De])}).join(s)})}function G(Bt,se){return se==null&&(se=ct(Bt)),[se.map(Et).join(s)].concat(_(Bt,se)).join(`
`)}function Q(Bt,se){return se==null&&(se=ct(Bt)),_(Bt,se).join(`
`)}function tt(Bt){return Bt.map(ft).join(`
`)}function ft(Bt){return Bt.map(Et).join(s)}function Et(Bt){return Bt==null?"":Bt instanceof Date?lt(Bt):p.test(Bt+="")?'"'+Bt.replace(/"/g,'""')+'"':Bt}return{parse:h,parseRows:g,format:G,formatBody:Q,formatRows:tt,formatRow:ft,formatValue:Et}}var wt=Lt(","),Gt=wt.parse,re=wt.parseRows,Qt=wt.format,it=wt.formatBody,dt=wt.formatRows,gt=wt.formatRow,vt=wt.formatValue,Y=S(96156),ot=S(85061),nt=S(38163),rt=S.n(nt);function st(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function d(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?st(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):st(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function It(s,p){var c=p.x,h=p.y,g=p.x1,_=p.y1,G=p.coordinates,Q=[];return s.forEach(function(tt,ft){var Et=[];if(c&&h&&(Et=[parseFloat(tt[c]),parseFloat(tt[h])]),c&&h&&g&&_){var Bt=[parseFloat(tt[c]),parseFloat(tt[h])],se=[parseFloat(tt[g]),parseFloat(tt[_])];Et=[Bt,se]}if(G){var xe="Polygon";Array.isArray(G[0])||(xe="Point"),Array.isArray(G[0])&&!Array.isArray(G[0][0])&&(xe="LineString");var De={type:xe,coordinates:(0,ot.Z)(tt[G])};rt()(De,!0),Et=De.coordinates}var Xe=d(d({},tt),{},{_id:ft,coordinates:Et});Q.push(Xe)}),{dataArray:Q}}var Ht=[{lng1:100,lat1:30,lng2:130,lat2:30}],kt={parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}};function Xt(s,p){var c=Gt(s);return It(c,p)}var Kt=63710088e-1,Jt={centimeters:Kt*100,centimetres:Kt*100,degrees:Kt/111325,feet:Kt*3.28084,inches:Kt*39.37,kilometers:Kt/1e3,kilometres:Kt/1e3,meters:Kt,metres:Kt,miles:Kt/1609.344,millimeters:Kt*1e3,millimetres:Kt*1e3,nauticalmiles:Kt/1852,radians:1,yards:Kt*1.0936},ue={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Kt,yards:1.0936133},ce={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function $t(s,p,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=p||{},h.geometry=s,h}function Ut(s,p,c){switch(c===void 0&&(c={}),s){case"Point":return Rt(p).geometry;case"LineString":return Nt(p).geometry;case"Polygon":return Yt(p).geometry;case"MultiPoint":return je(p).geometry;case"MultiLineString":return Re(p).geometry;case"MultiPolygon":return Cr(p).geometry;default:throw new Error(s+" is invalid")}}function Rt(s,p,c){if(c===void 0&&(c={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wi(s[0])||!wi(s[1]))throw new Error("coordinates must contain numbers");var h={type:"Point",coordinates:s};return $t(h,p,c)}function Pt(s,p,c){return c===void 0&&(c={}),ve(s.map(function(h){return Rt(h,p)}),c)}function Yt(s,p,c){c===void 0&&(c={});for(var h=0,g=s;h<g.length;h++){var _=g[h];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var G=0;G<_[_.length-1].length;G++)if(_[_.length-1][G]!==_[0][G])throw new Error("First and last Position are not equivalent.")}var Q={type:"Polygon",coordinates:s};return $t(Q,p,c)}function Dt(s,p,c){return c===void 0&&(c={}),ve(s.map(function(h){return Yt(h,p)}),c)}function Nt(s,p,c){if(c===void 0&&(c={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var h={type:"LineString",coordinates:s};return $t(h,p,c)}function ne(s,p,c){return c===void 0&&(c={}),ve(s.map(function(h){return Nt(h,p)}),c)}function ve(s,p){p===void 0&&(p={});var c={type:"FeatureCollection"};return p.id&&(c.id=p.id),p.bbox&&(c.bbox=p.bbox),c.features=s,c}function Re(s,p,c){c===void 0&&(c={});var h={type:"MultiLineString",coordinates:s};return $t(h,p,c)}function je(s,p,c){c===void 0&&(c={});var h={type:"MultiPoint",coordinates:s};return $t(h,p,c)}function Cr(s,p,c){c===void 0&&(c={});var h={type:"MultiPolygon",coordinates:s};return $t(h,p,c)}function $r(s,p,c){c===void 0&&(c={});var h={type:"GeometryCollection",geometries:s};return $t(h,p,c)}function Qr(s,p){if(p===void 0&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,p||0);return Math.round(s*c)/c}function Ee(s,p){p===void 0&&(p="kilometers");var c=Jt[p];if(!c)throw new Error(p+" units is invalid");return s*c}function yn(s,p){p===void 0&&(p="kilometers");var c=Jt[p];if(!c)throw new Error(p+" units is invalid");return s/c}function ui(s,p){return Or(yn(s,p))}function la(s){var p=s%360;return p<0&&(p+=360),p}function Or(s){var p=s%(2*Math.PI);return p*180/Math.PI}function ln(s){var p=s%360;return p*Math.PI/180}function Kn(s,p,c){if(p===void 0&&(p="kilometers"),c===void 0&&(c="kilometers"),!(s>=0))throw new Error("length must be a positive number");return Ee(yn(s,p),c)}function jn(s,p,c){if(p===void 0&&(p="meters"),c===void 0&&(c="kilometers"),!(s>=0))throw new Error("area must be a positive number");var h=ce[p];if(!h)throw new Error("invalid original units");var g=ce[c];if(!g)throw new Error("invalid final units");return s/h*g}function wi(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Sa(s){return!!s&&s.constructor===Object}function to(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(p){if(!wi(p))throw new Error("bbox must only contain numbers")})}function qa(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}function Ui(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ue(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function We(s){if(s.length>1&&isNumber(s[0])&&isNumber(s[1]))return!0;if(Array.isArray(s[0])&&s[0].length)return We(s[0]);throw new Error("coordinates must only contain numbers")}function fr(s,p,c){if(!p||!c)throw new Error("type and name required");if(!s||s.type!==p)throw new Error("Invalid input to "+c+": must be a "+p+", given "+s.type)}function Ar(s,p,c){if(!s)throw new Error("No feature passed");if(!c)throw new Error(".featureOf() requires a name");if(!s||s.type!=="Feature"||!s.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!s.geometry||s.geometry.type!==p)throw new Error("Invalid input to "+c+": must be a "+p+", given "+s.geometry.type)}function qr(s,p,c){if(!s)throw new Error("No featureCollection passed");if(!c)throw new Error(".collectionOf() requires a name");if(!s||s.type!=="FeatureCollection")throw new Error("Invalid input to "+c+", FeatureCollection required");for(var h=0,g=s.features;h<g.length;h++){var _=g[h];if(!_||_.type!=="Feature"||!_.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!_.geometry||_.geometry.type!==p)throw new Error("Invalid input to "+c+": must be a "+p+", given "+_.geometry.type)}}function nn(s){return s.type==="Feature"?s.geometry:s}function an(s,p){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function le(s,p,c){if(s!==null)for(var h,g,_,G,Q,tt,ft,Et=0,Bt=0,se,xe=s.type,De=xe==="FeatureCollection",Xe=xe==="Feature",Qe=De?s.features.length:1,br=0;br<Qe;br++){ft=De?s.features[br].geometry:Xe?s.geometry:s,se=ft?ft.type==="GeometryCollection":!1,Q=se?ft.geometries.length:1;for(var Wr=0;Wr<Q;Wr++){var sn=0,xn=0;if(G=se?ft.geometries[Wr]:ft,G!==null){tt=G.coordinates;var Rn=G.type;switch(Et=c&&(Rn==="Polygon"||Rn==="MultiPolygon")?1:0,Rn){case null:break;case"Point":if(p(tt,Bt,br,sn,xn)===!1)return!1;Bt++,sn++;break;case"LineString":case"MultiPoint":for(h=0;h<tt.length;h++){if(p(tt[h],Bt,br,sn,xn)===!1)return!1;Bt++,Rn==="MultiPoint"&&sn++}Rn==="LineString"&&sn++;break;case"Polygon":case"MultiLineString":for(h=0;h<tt.length;h++){for(g=0;g<tt[h].length-Et;g++){if(p(tt[h][g],Bt,br,sn,xn)===!1)return!1;Bt++}Rn==="MultiLineString"&&sn++,Rn==="Polygon"&&xn++}Rn==="Polygon"&&sn++;break;case"MultiPolygon":for(h=0;h<tt.length;h++){for(xn=0,g=0;g<tt[h].length;g++){for(_=0;_<tt[h][g].length-Et;_++){if(p(tt[h][g][_],Bt,br,sn,xn)===!1)return!1;Bt++}xn++}sn++}break;case"GeometryCollection":for(h=0;h<G.geometries.length;h++)if(le(G.geometries[h],p,c)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fe(s,p,c,h){var g=c;return le(s,function(_,G,Q,tt,ft){G===0&&c===void 0?g=_:g=p(g,_,G,Q,tt,ft)},h),g}function Me(s,p){var c;switch(s.type){case"FeatureCollection":for(c=0;c<s.features.length&&p(s.features[c].properties,c)!==!1;c++);break;case"Feature":p(s.properties,0);break}}function Te(s,p,c){var h=c;return Me(s,function(g,_){_===0&&c===void 0?h=g:h=p(h,g,_)}),h}function Ze(s,p){if(s.type==="Feature")p(s,0);else if(s.type==="FeatureCollection")for(var c=0;c<s.features.length&&p(s.features[c],c)!==!1;c++);}function or(s,p,c){var h=c;return Ze(s,function(g,_){_===0&&c===void 0?h=g:h=p(h,g,_)}),h}function lr(s){var p=[];return le(s,function(c){p.push(c)}),p}function Be(s,p){var c,h,g,_,G,Q,tt,ft,Et,Bt,se=0,xe=s.type==="FeatureCollection",De=s.type==="Feature",Xe=xe?s.features.length:1;for(c=0;c<Xe;c++){for(Q=xe?s.features[c].geometry:De?s.geometry:s,ft=xe?s.features[c].properties:De?s.properties:{},Et=xe?s.features[c].bbox:De?s.bbox:void 0,Bt=xe?s.features[c].id:De?s.id:void 0,tt=Q?Q.type==="GeometryCollection":!1,G=tt?Q.geometries.length:1,g=0;g<G;g++){if(_=tt?Q.geometries[g]:Q,_===null){if(p(null,se,ft,Et,Bt)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(p(_,se,ft,Et,Bt)===!1)return!1;break}case"GeometryCollection":{for(h=0;h<_.geometries.length;h++)if(p(_.geometries[h],se,ft,Et,Bt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}se++}}function tr(s,p,c){var h=c;return Be(s,function(g,_,G,Q,tt){_===0&&c===void 0?h=g:h=p(h,g,_,G,Q,tt)}),h}function Mr(s,p){Be(s,function(c,h,g,_,G){var Q=c===null?null:c.type;switch(Q){case null:case"Point":case"LineString":case"Polygon":return p($t(c,g,{bbox:_,id:G}),h,0)===!1?!1:void 0}var tt;switch(Q){case"MultiPoint":tt="Point";break;case"MultiLineString":tt="LineString";break;case"MultiPolygon":tt="Polygon";break}for(var ft=0;ft<c.coordinates.length;ft++){var Et=c.coordinates[ft],Bt={type:tt,coordinates:Et};if(p($t(Bt,g),h,ft)===!1)return!1}})}function Xr(s,p,c){var h=c;return Mr(s,function(g,_,G){_===0&&G===0&&c===void 0?h=g:h=p(h,g,_,G)}),h}function Zr(s,p){Mr(s,function(c,h,g){var _=0;if(!!c.geometry){var G=c.geometry.type;if(!(G==="Point"||G==="MultiPoint")){var Q,tt=0,ft=0,Et=0;if(le(c,function(Bt,se,xe,De,Xe){if(Q===void 0||h>tt||De>ft||Xe>Et){Q=Bt,tt=h,ft=De,Et=Xe,_=0;return}var Qe=lineString([Q,Bt],c.properties);if(p(Qe,h,g,Xe,_)===!1)return!1;_++,Q=Bt})===!1)return!1}}})}function tn(s,p,c){var h=c,g=!1;return Zr(s,function(_,G,Q,tt,ft){g===!1&&c===void 0?h=_:h=p(h,_,G,Q,tt,ft),g=!0}),h}function _n(s,p){if(!s)throw new Error("geojson is required");Mr(s,function(c,h,g){if(c.geometry!==null){var _=c.geometry.type,G=c.geometry.coordinates;switch(_){case"LineString":if(p(c,h,g,0,0)===!1)return!1;break;case"Polygon":for(var Q=0;Q<G.length;Q++)if(p(lineString(G[Q],c.properties),h,g,Q)===!1)return!1;break}}})}function $n(s,p,c){var h=c;return _n(s,function(g,_,G,Q){_===0&&c===void 0?h=g:h=p(h,g,_,G,Q)}),h}function si(s,p){if(p=p||{},!isObject(p))throw new Error("options is invalid");var c=p.featureIndex||0,h=p.multiFeatureIndex||0,g=p.geometryIndex||0,_=p.segmentIndex||0,G=p.properties,Q;switch(s.type){case"FeatureCollection":c<0&&(c=s.features.length+c),G=G||s.features[c].properties,Q=s.features[c].geometry;break;case"Feature":G=G||s.properties,Q=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Q=s;break;default:throw new Error("geojson is invalid")}if(Q===null)return null;var tt=Q.coordinates;switch(Q.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=tt.length+_-1),lineString([tt[_],tt[_+1]],G,p);case"Polygon":return g<0&&(g=tt.length+g),_<0&&(_=tt[g].length+_-1),lineString([tt[g][_],tt[g][_+1]],G,p);case"MultiLineString":return h<0&&(h=tt.length+h),_<0&&(_=tt[h].length+_-1),lineString([tt[h][_],tt[h][_+1]],G,p);case"MultiPolygon":return h<0&&(h=tt.length+h),g<0&&(g=tt[h].length+g),_<0&&(_=tt[h][g].length-_-1),lineString([tt[h][g][_],tt[h][g][_+1]],G,p)}throw new Error("geojson is invalid")}function Jr(s,p){if(p=p||{},!isObject(p))throw new Error("options is invalid");var c=p.featureIndex||0,h=p.multiFeatureIndex||0,g=p.geometryIndex||0,_=p.coordIndex||0,G=p.properties,Q;switch(s.type){case"FeatureCollection":c<0&&(c=s.features.length+c),G=G||s.features[c].properties,Q=s.features[c].geometry;break;case"Feature":G=G||s.properties,Q=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Q=s;break;default:throw new Error("geojson is invalid")}if(Q===null)return null;var tt=Q.coordinates;switch(Q.type){case"Point":return point(tt,G,p);case"MultiPoint":return h<0&&(h=tt.length+h),point(tt[h],G,p);case"LineString":return _<0&&(_=tt.length+_),point(tt[_],G,p);case"Polygon":return g<0&&(g=tt.length+g),_<0&&(_=tt[g].length+_),point(tt[g][_],G,p);case"MultiLineString":return h<0&&(h=tt.length+h),_<0&&(_=tt[h].length+_),point(tt[h][_],G,p);case"MultiPolygon":return h<0&&(h=tt.length+h),g<0&&(g=tt[h].length+g),_<0&&(_=tt[h][g].length-_),point(tt[h][g][_],G,p)}throw new Error("geojson is invalid")}function Si(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Jn(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Si(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Si(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function yi(s,p){var c=[],h={};if(s.features=s.features.filter(function(_){var G=_.geometry;return _!=null&&G&&G.type&&G.coordinates&&G.coordinates.length>0}),rt()(s,!0),s.features.length===0)return{dataArray:[],featureKeys:h};var g=0;return Mr(s,function(_,G){var Q=Ue(_),tt=G,ft=Jn(Jn({},_.properties),{},{coordinates:Q,_id:tt});c.push(ft)}),{dataArray:c,featureKeys:h}}function Ka(s){var p=131,c=137,h=0;s+="x";for(var g=Math.floor(9007199254740991/c),_=0;_<s.length;_++)h>g&&(h=Math.floor(h/c)),h=h*p+s.charCodeAt(_);return h}function ki(s){s=s.toString();for(var p=5381,c=s.length;c;)p=p*33^s.charCodeAt(--c);return p>>>0}var ga=S(28481),ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ci(s){this.message=s}Ci.prototype=new Error,Ci.prototype.name="InvalidCharacterError";function po(s){var p=String(s).replace(/=+$/,"");if(p.length%4==1)throw new Ci("'atob' failed: The string to be decoded is not correctly encoded.");for(var c="",h=0,g,_,G=0;_=p.charAt(G++);~_&&(g=h%4?g*64+_:_,h++%4)?c+=String.fromCharCode(255&g>>(-2*h&6)):0)_=ko.indexOf(_);return c}function oo(s){s=String(s);for(var p,c,h,g,_="",G=0,Q=s.length%3;G<s.length;){if((c=s.charCodeAt(G++))>255||(h=s.charCodeAt(G++))>255||(g=s.charCodeAt(G++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");p=c<<16|h<<8|g,_+=ko.charAt(p>>18&63)+ko.charAt(p>>12&63)+ko.charAt(p>>6&63)+ko.charAt(p&63)}return Q?_.slice(0,Q-3)+"===".substring(Q):_}var cn=S(6610),vn=S(5991),Wo=function(){function s(p,c){(0,cn.Z)(this,s),this.buffers=p,this.type=c}return(0,vn.Z)(s,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(c,h,g){throw new Error("not implemented")}}]),s}(),mo;typeof window=="undefined"?mo={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(p){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(p){return null},clearMeasures:function(p){return null},clearMarks:function(p){return null},measure:function(p,c,h){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(p){return!0},Event:function(p,c){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:mo=window;var fo=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",Po=fo?my.getSystemInfoSync().pixelRatio:mo.devicePixelRatio,vi=S(10379),pa=S(46070),An=S(77608),Pe=(0,vn.Z)(function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"cancelBubble",void 0),(0,Y.Z)(this,"cancelable",void 0),(0,Y.Z)(this,"target",void 0),(0,Y.Z)(this,"currentTarget",void 0),(0,Y.Z)(this,"preventDefault",void 0),(0,Y.Z)(this,"stopPropagation",void 0),(0,Y.Z)(this,"type",void 0),(0,Y.Z)(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=p,this.timeStamp=Date.now()}),Tt=S(63349);function ae(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=he(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function he(s,p){if(!!s){if(typeof s=="string")return zt(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return zt(s,p)}}function zt(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var Wt=new WeakMap,de=function(){function s(){(0,cn.Z)(this,s),Wt.set(this,{})}return(0,vn.Z)(s,[{key:"addEventListener",value:function(c,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=Wt.get(this);_||(_={}),_[c]||(_[c]=[]),_[c].push(h),Wt.set(this,_),g.capture,g.once,g.passive}},{key:"removeEventListener",value:function(c,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=Wt.get(this);if(_){var G=_[c];if(G&&G.length>0){for(var Q=G.length;Q--;Q>0)if(G[Q]===h){G.splice(Q,1);break}}}}},{key:"dispatchEvent",value:function(c){var h=Wt.get(this)[c.type];if(h){var g=ae(h),_;try{for(g.s();!(_=g.n()).done;){var G=_.value;G(c)}}catch(Q){g.e(Q)}finally{g.f()}}}}]),s}();function Se(s){var p=Ae();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var He=function(s){(0,vi.Z)(c,s);var p=Se(c);function c(){var h;return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"childNodes",void 0),h.childNodes=[],h}return(0,vn.Z)(c,[{key:"appendChild",value:function(g){this.childNodes.push(g)}},{key:"cloneNode",value:function(){var g=Object.create(this);return Object.assign(g,this),g}},{key:"removeChild",value:function(g){var _=this.childNodes.findIndex(function(G){return G===g});return _>-1?this.childNodes.splice(_,1):null}}]),c}(de);function _r(s){var p=Lr();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Lr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var wn=function(s){(0,vi.Z)(c,s);var p=_r(c);function c(){var h;return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"className",void 0),(0,Y.Z)((0,Tt.Z)(h),"children",void 0),h.className="",h.children=[],h}return(0,vn.Z)(c,[{key:"setAttribute",value:function(g,_){this[g]=_}},{key:"getAttribute",value:function(g){return this[g]}},{key:"setAttributeNS",value:function(g,_){this[g]=_}},{key:"getAttributeNS",value:function(g){return this[g]}}]),c}(He),Kr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",Fr,pi,Pi,ca;if(Kr){var va=my.getSystemInfoSync();Fr=va.screenWidth,pi=va.screenHeight,Pi=va.windowWidth,ca=va.windowHeight}else{var ji=mo.innerWidth,ai=mo.innerHeight;Fr=ji,pi=ai,Pi=ji,ca=ai}var Fe={width:Fr,height:pi,availWidth:Pi,availHeight:ca,availLeft:0,availTop:0},er=Fe.availWidth,Ir=Fe.availHeight,hn={style:[]};function ci(s,p){if(!("parentNode"in s)){var c;p===0?c=function(){return null}:p===1?c=function(){return hn}:c=function(){return null},Object.defineProperty(s,"parentNode",{enumerable:!0,get:c})}if(!("parentElement"in s)){var h;p===0?h=function(){return null}:p===1?h=function(){return hn}:h=function(){return null},Object.defineProperty(s,"parentElement",{enumerable:!0,get:h})}}function wa(s){s.style=s.style||{},Object.assign(s.style,{top:"0px",left:"0px",width:er+"px",height:Ir+"px",margin:"0px",padding:"0px"})}function no(s){"clientLeft"in s||(s.clientLeft=0,s.clientTop=0),"clientWidth"in s||(s.clientWidth=er,s.clientHeight=Ir),"getBoundingClientRect"in s||(s.getBoundingClientRect=function(){var p={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return p})}function ls(s){"offsetLeft"in s||(s.offsetLeft=0,s.offsetTop=0),"offsetWidth"in s||(s.offsetWidth=er,s.offsetHeight=Ir)}function Jo(s){"scrollLeft"in s||(s.scrollLeft=0,s.scrollTop=0),"scrollWidth"in s||(s.scrollWidth=er,s.scrollHeight=Ir)}function ps(s){var p=function(){return!0};s.classList=[],s.classList.add=p,s.classList.remove=p,s.classList.contains=p,s.classList.toggle=p}function Ks(s){var p=Fo();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Fo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function Vs(){}var $s=function(s){(0,vi.Z)(c,s);var p=Ks(c);function c(){var h,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_=arguments.length>1?arguments[1]:void 0;return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"className",void 0),(0,Y.Z)((0,Tt.Z)(h),"children",void 0),(0,Y.Z)((0,Tt.Z)(h),"focus",void 0),(0,Y.Z)((0,Tt.Z)(h),"blur",void 0),(0,Y.Z)((0,Tt.Z)(h),"insertBefore",void 0),(0,Y.Z)((0,Tt.Z)(h),"appendChild",void 0),(0,Y.Z)((0,Tt.Z)(h),"removeChild",void 0),(0,Y.Z)((0,Tt.Z)(h),"remove",void 0),(0,Y.Z)((0,Tt.Z)(h),"innerHTML",void 0),(0,Y.Z)((0,Tt.Z)(h),"tagName",void 0),h.className="",h.children=[],h.focus=Vs,h.blur=Vs,h.insertBefore=Vs,h.appendChild=Vs,h.removeChild=Vs,h.remove=Vs,h.innerHTML="",h.tagName=g.toUpperCase(),ci((0,Tt.Z)(h),_),wa((0,Tt.Z)(h)),ps((0,Tt.Z)(h)),no((0,Tt.Z)(h)),ls((0,Tt.Z)(h)),Jo((0,Tt.Z)(h)),h}return(0,vn.Z)(c)}(wn);function zs(s){var p=Ou();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Ou(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var au=function(s){(0,vi.Z)(c,s);var p=zs(c);function c(h){return(0,cn.Z)(this,c),p.call(this,h)}return(0,vn.Z)(c,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),c}($s);function Vu(s){var p=ou();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function ou(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var ds=function(s){(0,vi.Z)(c,s);var p=Vu(c);function c(){return(0,cn.Z)(this,c),p.call(this,"video")}return(0,vn.Z)(c)}(au),Ko={},Lu={};function Gl(s,p){Ko=s,Ko.id=p,"tagName"in Ko||(Ko.tagName="CANVAS"),Ko.type="canvas",Mixin.parentNode(Ko),Mixin.style(Ko),Mixin.classList(Ko),Mixin.clientRegion(Ko),Mixin.offsetRegion(Ko),Ko.focus=function(){},Ko.blur=function(){}}function Du(s,p){var c=1024,h=1024;Lu={width:c,height:h,clientWidth:c/devicePixelRatio,clientHeight:h/devicePixelRatio,id:p,type:"canvas"},"tagName"in Lu||(Lu.tagName="CANVAS"),Mixin.parentNode(Lu),Mixin.style(Lu),Mixin.classList(Lu),Mixin.clientRegion(Lu),Mixin.offsetRegion(Lu),Lu.getContext=function(g){if(g==="2d")return s},Lu.focus=function(){},Lu.blur=function(){}}function Wu(){return Ko}function Ul(){return Lu}var Ql=(0,vn.Z)(function s(){(0,cn.Z)(this,s);var p=Wu(),c=p.createImage&&p.createImage()||{};return"tagName"in c||(c.tagName="IMG",c.__proto__=s.prototype),ci(c),ps(c),Object.assign(c,{addEventListener:function(g,_){c["on".concat(g)]=_.bind(c)},removeEventListener:function(g){c["on".concat(g)]=null}}),c}),Ku={href:"",protocol:"",host:""};function Nc(s){var p=J();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Ct=function(s){(0,vi.Z)(c,s);var p=Nc(c);function c(){return(0,cn.Z)(this,c),p.call(this,"body",0)}return(0,vn.Z)(c,[{key:"addEventListener",value:function(g,_){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(g,_,G){}},{key:"dispatchEvent",value:function(g){}}]),c}($s),me=function(s){(0,vi.Z)(c,s);var p=Nc(c);function c(){return(0,cn.Z)(this,c),p.call(this,"html",0)}return(0,vn.Z)(c,[{key:"addEventListener",value:function(g,_){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(g,_){}},{key:"dispatchEvent",value:function(g){}}]),c}($s),jt={},ke={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Ku,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(p){return p=p.toLowerCase(),p==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):p==="img"?new Ql:p==="video"?new ds:new $s(p)},createElementNS:function(p,c){return this.createElement(c)},createTextNode:function(p){return p},getElementById:function(p){return null},getElementsByTagName:function(p){return p=p.toLowerCase(),[]},getElementsByTagNameNS:function(p,c){return this.getElementsByTagName(c)},getElementsByName:function(p){return[]},querySelector:function(p){return null},querySelectorAll:function(p){return[]},addEventListener:function(p,c,h){jt[p]||(jt[p]=[]),jt[p].push(c)},removeEventListener:function(p,c){var h=jt[p];if(h&&h.length>0){for(var g=h.length;g--;g>0)if(h[g]===c){h.splice(g,1);break}}},dispatchEvent:function(p){var c=p.type,h=jt[c];if(h)for(var g=0;g<h.length;g++)h[g](p);p.target&&typeof p.target["on"+c]=="function"&&p.target["on"+c](p)},createEvent:function(p){return new Pe(p)}};ke.documentElement=new me,ke.head=new $s("head"),ke.body=new Ct;var ir=Object,Gr=S(90484),pn=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"_w",void 0),(0,Y.Z)(this,"_h",void 0),(0,Y.Z)(this,"_data",void 0);var p=arguments.length;if(p===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else p===3&&(0,Gr.Z)(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return(0,vn.Z)(s,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),s}(),dn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",ti,Nn,Fa;if(dn){var Xa=my.getSystemInfoSync();ti=Xa.system,Nn=Xa.platform,Fa=Xa.language}else{var Wi={versions:function(){var s=mo.navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")===-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1||s.indexOf("Linux")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")===-1,weixin:s.indexOf("MicroMessenger")>-1,qq:s.match(/\sQQ/i)===" qq"}}(),language:(mo.navigator.browserLanguage||mo.navigator.language).toLowerCase()};Wi.versions.android?Nn="android":Wi.versions.trident?Nn="IE":Wi.versions.presto?Nn="Opera":Wi.versions.webKit?Nn="webKit":Wi.versions.gecko?Nn="Firefox":Wi.versions.mobile?Nn="mobile":Wi.versions.ios?Nn="ios":Wi.versions.iPhone?Nn="iPhone":Wi.versions.iPad?Nn="ipad":Wi.versions.webApp?Nn="webApp":Wi.versions.weixin?Nn="weixin":Wi.versions.qq&&(Nn="qq"),ti=mo.navigator.userAgent,Fa=Wi.language}var rs=ti.toLowerCase().indexOf("android")!==-1,io=rs?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",Cs="Mozilla/5.0 (".concat(io,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(Fa),Ve={platform:Nn,language:Fa,appVersion:"5.0 (".concat(io,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:Cs},pe={mark:function(p){return null},clearMeasures:function(p){return null},clearMarks:function(p){return null},measure:function(p,c,h){return{duration:0}},now:function(){}},pt=0,Ot=0;function ee(s){var p=Date.now(),c=Math.max(pt+23,p);return Ot=setTimeout(function(){s(pt=c)},c-p),Ot}function ye(s){var p=Wu();return p.requestAnimationFrame?p.requestAnimationFrame(s):ee(s)}function Ne(s){var p=Wu();return p.cancelAnimationFrame?p.cancelAnimationFrame(s):clearTimeout(s)}var Ye=function(){function s(p){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,cn.Z)(this,s),(0,Y.Z)(this,"href",void 0),p.indexOf("http://")==0||p.indexOf("https://")==0){this.href=p;return}this.href=c+p}return(0,vn.Z)(s,null,[{key:"createObjectURL",value:function(c){var h=c.buffers[0],g=c.type,_=hr(h),G="data:".concat(g,";base64, ");return G+_}}]),s}();function hr(s){for(var p="",c=new Uint8Array(s),h=c.byteLength,g=0;g<h;g++)p+=String.fromCharCode(c[g]);return oo(p)}var Er={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},Hr={};function bn(s){var p=ri();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function ri(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var qn=new Map,da=new Map,Ya=new Map,Ra={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function ts(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(s)]=="function"&&this["on".concat(s)].call(this,p)}function $o(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:s};this.readyState=s,ts.call(this,"readystatechange",p)}var Aa=function(s){(0,vi.Z)(c,s);var p=bn(c);function c(){var h;return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"onabort",void 0),(0,Y.Z)((0,Tt.Z)(h),"onerror",void 0),(0,Y.Z)((0,Tt.Z)(h),"onload",void 0),(0,Y.Z)((0,Tt.Z)(h),"onloadstart",void 0),(0,Y.Z)((0,Tt.Z)(h),"onprogress",void 0),(0,Y.Z)((0,Tt.Z)(h),"ontimeout",void 0),(0,Y.Z)((0,Tt.Z)(h),"onloadend",void 0),(0,Y.Z)((0,Tt.Z)(h),"onreadystatechange",void 0),(0,Y.Z)((0,Tt.Z)(h),"readyState",void 0),(0,Y.Z)((0,Tt.Z)(h),"response",void 0),(0,Y.Z)((0,Tt.Z)(h),"responseText",void 0),(0,Y.Z)((0,Tt.Z)(h),"_responseType",void 0),(0,Y.Z)((0,Tt.Z)(h),"responseXML",void 0),(0,Y.Z)((0,Tt.Z)(h),"status",void 0),(0,Y.Z)((0,Tt.Z)(h),"statusText",void 0),(0,Y.Z)((0,Tt.Z)(h),"upload",void 0),(0,Y.Z)((0,Tt.Z)(h),"withCredentials",void 0),(0,Y.Z)((0,Tt.Z)(h),"timeout",void 0),(0,Y.Z)((0,Tt.Z)(h),"_url",void 0),(0,Y.Z)((0,Tt.Z)(h),"_method",void 0),h.onabort=null,h.onerror=null,h.onload=null,h.onloadstart=null,h.onprogress=null,h.ontimeout=null,h.onloadend=null,h.onreadystatechange=null,h.readyState=0,h.response=null,h.responseText=null,h._responseType="text",h.responseXML=null,h.status=0,h.statusText="",h.upload={},h.withCredentials=!1,qn.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),h}return(0,vn.Z)(c,[{key:"responseType",set:function(g){this._responseType=g}},{key:"abort",value:function(){var g=Ya.get("requestTask");g&&g.abort()}},{key:"getAllResponseHeaders",value:function(){var g=da.get("responseHeader");return Object.keys(g).map(function(_){return"".concat(_,": ").concat(g[_])}).join(`
`)}},{key:"getResponseHeader",value:function(g){return da.get("responseHeader")[g]}},{key:"open",value:function(g,_,G){this._method=g,this._url=_}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(g,_){var G=qn.get("requestHeader");G[g]=_,qn.set("requestHeader",G)}},{key:"addEventListener",value:function(g,_){var G=this;typeof _=="function"&&(this["on"+g]=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Q.target=Q.target||G,_.call(G,Q)})}},{key:"removeEventListener",value:function(g,_){this["on"+g]===_&&(this["on"+g]=null)}}]),c}(de);(0,Y.Z)(Aa,"UNSEND",void 0),(0,Y.Z)(Aa,"OPENED",void 0),(0,Y.Z)(Aa,"HEADERS_RECEIVED",void 0),(0,Y.Z)(Aa,"LOADING",void 0),(0,Y.Z)(Aa,"DONE",void 0),Aa.UNSEND=0,Aa.OPENED=1,Aa.HEADERS_RECEIVED=2,Aa.LOADING=3,Aa.DONE=4;function Le(s){var p=gr();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function gr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Dr=function(s){(0,vi.Z)(c,s);var p=Le(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this,h),(0,Y.Z)((0,Tt.Z)(g),"touches",void 0),(0,Y.Z)((0,Tt.Z)(g),"targetTouches",void 0),(0,Y.Z)((0,Tt.Z)(g),"changedTouches",void 0),g.touches=[],g.targetTouches=[],g.changedTouches=[],g.target=Wu(),g.currentTarget=Wu(),g}return(0,vn.Z)(c)}(Pe);function on(s){var p=s||{},c=p.x,h=c===void 0?0:c,g=p.y,_=g===void 0?0:g,G=p.clientX,Q=G===void 0?0:G,tt=p.clientY,ft=tt===void 0?0:tt;Object.keys(s).indexOf("x")!==-1?(s.pageX=s.clientX=h,s.pageY=s.clientY=_):(s.x=Q,s.y=ft)}function Yn(s){return function(p){var c=new Dr(s);c.changedTouches=p.changedTouches,c.touches=p.touches,c.targetTouches=Array.prototype.slice.call(p.touches),c.timeStamp=p.timeStamp,c.changedTouches.forEach(function(h){return on(h)}),c.touches.forEach(function(h){return on(h)}),c.targetTouches.forEach(function(h){return on(h)}),ke.dispatchEvent(c)}}function ia(s){return function(p){p.type=s,ke.dispatchEvent(p)}}var vo=Yn("touchstart"),As=Yn("touchmove"),Bu=Yn("touchend"),Cl=ia("mapCameaParams");function Al(s){var p=zc();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function zc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Sh=function(s){(0,vi.Z)(c,s);var p=Al(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this,h),(0,Y.Z)((0,Tt.Z)(g),"buttons",void 0),(0,Y.Z)((0,Tt.Z)(g),"which",void 0),(0,Y.Z)((0,Tt.Z)(g),"pointerId",void 0),(0,Y.Z)((0,Tt.Z)(g),"bubbles",void 0),(0,Y.Z)((0,Tt.Z)(g),"button",void 0),(0,Y.Z)((0,Tt.Z)(g),"width",void 0),(0,Y.Z)((0,Tt.Z)(g),"height",void 0),(0,Y.Z)((0,Tt.Z)(g),"pressure",void 0),(0,Y.Z)((0,Tt.Z)(g),"isPrimary",void 0),(0,Y.Z)((0,Tt.Z)(g),"pointerType",void 0),(0,Y.Z)((0,Tt.Z)(g),"altKey",void 0),(0,Y.Z)((0,Tt.Z)(g),"ctrlKey",void 0),(0,Y.Z)((0,Tt.Z)(g),"metaKey",void 0),(0,Y.Z)((0,Tt.Z)(g),"shiftKey",void 0),g.target=Wu(),g.currentTarget=Wu(),g}return(0,vn.Z)(c)}(Pe),nf=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],Zu=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],tp="touch";function qp(s,p,c){for(var h=new Sh(s),g=0;g<nf.length;g++){var _=nf[g];h[_]=p[_]||Zu[g]}return h.type=s,h.target=Wu(),h.currentTarget=Wu(),h.buttons=Md(s),h.which=h.buttons,h.pointerId=(p.identifier||0)+2,h.bubbles=!0,h.cancelable=!0,h.button=0,h.width=(p.radiusX||.5)*2,h.height=(p.radiusY||.5)*2,h.pressure=p.force||.5,h.isPrimary=wh(p),h.pointerType=tp,h.altKey=c.altKey,h.ctrlKey=c.ctrlKey,h.metaKey=c.metaKey,h.shiftKey=c.shiftKey,c.preventDefault&&(h.preventDefault=function(){c.preventDefault()}),h}function Md(s){var p=0;return(s==="touchstart"||s==="touchmove"||s==="pointerdown"||s==="pointermove")&&(p=1),p}var Vl=null;function wh(s){return Vl===s.identifier}function Ip(s){Vl===null&&(Vl=s.identifier)}function Jp(s){Vl===s.identifier&&(Vl=null)}function Eh(s){return function(p){for(var c=p.changedTouches,h=0;h<c.length;h++){var g=c[h];h===0&&s==="pointerdown"?Ip(g):(s==="pointerup"||s==="pointercancel")&&Jp(g);var _=qp(s,g,p);ke.dispatchEvent(_)}}}var yg=Eh("pointerdown"),Ch=Eh("pointermove"),Xf=Eh("pointerup");function Op(s){var p=Ah();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Ah(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Ft=function(s){(0,vi.Z)(c,s);var p=Op(c);function c(h){return(0,cn.Z)(this,c),p.call(this,h)}return(0,vn.Z)(c)}(Pe);function Lp(s){return function(p){p.type=s,ke.dispatchEvent(p)}}var Sv=Lp("mousedown"),wv=Lp("mousemove"),ep=Lp("mouseup"),Ev=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",wf=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),Ms=Ev||wf,rp={atob:po,btoa:oo,devicePixelRatio:Po,Blob:Wo,document:ke,Element:wn,Event:Pe,EventTarget:de,HTMLCanvasElement:ir,HTMLElement:$s,HTMLMediaElement:au,HTMLVideoElement:ds,Image:Ql,ImageData:pn,navigator:Ve,Node:He,requestAnimationFrame:ye,cancelAnimationFrame:Ne,screen:Fe,XMLHttpRequest:Aa,performance:pe,URL:Ye,WebGLRenderingContext:Er,WebGL2RenderingContext:Hr,addEventListener:function(p,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ke.addEventListener(p,c,h)},removeEventListener:function(p,c,h){ke.removeEventListener(p,c)},dispatchEvent:function(p){ke.dispatchEvent(p)},innerWidth:Fe.availWidth,innerHeight:Fe.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},Ds=Ms?rp:mo,af=Ms?Aa:mo.XMLHttpRequest,vs=Ms?Ku:mo.location;function Qs(s){var p=s;return typeof s=="string"&&(p=Ds.document.getElementById(s)),p}function ks(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function of(s){return ks(s).split(/\s+/)}function Ef(s){var p,c,h=Ds==null||(p=Ds.document)===null||p===void 0||(c=p.documentElement)===null||c===void 0?void 0:c.style;if(!h)return s[0];for(var g in s)if(s[g]&&s[g]in h)return s[g];return s[0]}function lu(s,p,c){var h=Ds.document.createElement(s);return h.className=p||"",c&&c.appendChild(h),h}function np(s){var p=s.parentNode;p&&p.removeChild(s)}function Yf(s,p){if(s.classList!==void 0)for(var c=of(p),h=0,g=c.length;h<g;h++)s.classList.add(c[h]);else if(!kp(s,p)){var _=Hu(s);sf(s,(_?_+" ":"")+p)}}function fc(s,p){s.classList!==void 0?s.classList.remove(p):sf(s,ks((" "+Hu(s)+" ").replace(" "+p+" "," ")))}function kp(s,p){if(s.classList!==void 0)return s.classList.contains(p);var c=Hu(s);return c.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(c)}function sf(s,p){s instanceof HTMLElement?s.className=p:s.className.baseVal=p}function Hu(s){return s instanceof SVGElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Wf(s){for(;s&&s.firstChild;)s.removeChild(s.firstChild)}var Mh=Ef(["transform","WebkitTransform"]);function Fu(s,p){s.style[Mh]=p}function Ma(){if(typeof Event=="function")Ds.dispatchEvent(new Event("resize"));else{var s=Ds.document.createEvent("UIEvents");s.initUIEvent("resize",!0,!1,Ds,0),Ds.dispatchEvent(s)}}function pu(s){var p=["padding: "+(s.height/2-8)+"px "+s.width/2+"px;","line-height: "+s.height+"px;","background-image: url("+s.toDataURL()+");"];console.log(`%c
`,p.join(""))}function uf(){var s,p=Ds.document.querySelector('meta[name="viewport"]');if(!p)return 1;var c=(s=p.content)===null||s===void 0?void 0:s.split(","),h=c.find(function(g){var _=g.split("="),G=(0,ga.Z)(_,2),Q=G[0],tt=G[1];return Q==="initial-scale"});return h?h.split("=")[1]*1:1}var Gs=uf()<1?1:Ds.devicePixelRatio,ql=S(14665);function oc(s){return Function.toString.call(s).indexOf("[native code]")!==-1}var td=S(51814);function Qi(s,p,c){return(0,td.Z)()?Qi=Reflect.construct:Qi=function(g,_,G){var Q=[null];Q.push.apply(Q,_);var tt=Function.bind.apply(g,Q),ft=new tt;return G&&(0,ql.Z)(ft,G.prototype),ft},Qi.apply(null,arguments)}function Ec(s){var p=typeof Map=="function"?new Map:void 0;return Ec=function(h){if(h===null||!oc(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof p!="undefined"){if(p.has(h))return p.get(h);p.set(h,g)}function g(){return Qi(h,arguments,(0,An.Z)(this).constructor)}return g.prototype=Object.create(h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),(0,ql.Z)(g,h)},Ec(s)}function ws(s){var p=lf();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function lf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Js=function(s){(0,vi.Z)(c,s);var p=ws(c);function c(h,g,_){var G;return(0,cn.Z)(this,c),G=p.call(this,h),(0,Y.Z)((0,Tt.Z)(G),"status",void 0),(0,Y.Z)((0,Tt.Z)(G),"url",void 0),G.status=g,G.url=_,G.name=G.constructor.name,G.message=h,G}return(0,vn.Z)(c,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),c}(Ec(Error));function Zl(s){var p=new af;p.open("GET",s.url,!0);for(var c in s.headers)s.headers.hasOwnProperty(c)&&p.setRequestHeader(c,s.headers[c]);return p.withCredentials=s.credentials==="include",p}var Kf=function(p,c){var h=Zl(p);return h.setRequestHeader("Accept","application/json"),h.onerror=function(){c(new Error(h.statusText))},h.onload=function(){if(h.status>=200&&h.status<300&&h.response){var g;try{g=JSON.parse(h.response)}catch(_){return c(_)}c(null,g)}else h.status===401?c(new Js("".concat(h.statusText),h.status,p.url)):c(new Js(h.statusText,h.status,p.url))},h.send(),h},cf=function(p,c){var h=Zl(p);return h.responseType="arraybuffer",h.onerror=function(){c(new Error(h.statusText))},h.onload=function(){var g=h.response;if(g.byteLength===0&&h.status===200)return c(new Error("http status 200 returned without content."));h.status>=200&&h.status<300&&h.response?c(null,{data:g,cacheControl:h.getResponseHeader("Cache-Control"),expires:h.getResponseHeader("Expires")}):c(new Js(h.statusText,h.status,p.url))},h.send(),h};function hc(s){var p=$window.document.createElement("a");return p.href=s,p.protocol===$window.document.location.protocol&&p.host===$window.document.location.host}var Rl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",ip=function(p,c){return cf(p,function(h,g){if(h)c(h);else if(g){var _=new Ds.Image;_.crossOrigin="anonymous";var G=Ds.URL||Ds.webkitURL;_.onload=function(){c(null,_),G.revokeObjectURL(_.src)};var Q=new Ds.Blob([new Uint8Array(g.data)],{type:"image/png"});_.src=g.data.byteLength?G.createObjectURL(Q):Rl}})},ff=2*Math.PI*6378137/2;function ed(s){var p=[Infinity,Infinity,-Infinity,-Infinity];return s.forEach(function(c){var h=c.coordinates;Td(p,h)}),p}function Td(s,p){return Array.isArray(p[0])?p.forEach(function(c){Td(s,c)}):(s[0]>p[0]&&(s[0]=p[0]),s[1]>p[1]&&(s[1]=p[1]),s[2]<p[0]&&(s[2]=p[0]),s[3]<p[1]&&(s[3]=p[1])),s}function Gc(s,p){return sc(s,p)}function sc(s,p){return Array.isArray(s[0])?s.map(function(c){return sc(c,p)}):p(s)}function Qo(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};s=$f(s,p);var h=s[0],g=s[1],_=h*ff/180,G=Math.log(Math.tan((90+g)*Math.PI/360))/(Math.PI/180);return G=G*ff/180,c.enable&&(_=Number(_.toFixed(c.decimal)),G=Number(G.toFixed(c.decimal))),s.length===3?[_,G,s[2]]:[_,G]}function hf(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,c=s[0],h=s[1],g=c/ff*180,_=h/ff*180;return _=180/Math.PI*(2*Math.atan(Math.exp(_*Math.PI/180))-Math.PI/2),p!=null&&(g=Number(g.toFixed(p)),_=Number(_.toFixed(p))),s.length===3?[g,_,s[2]]:[g,_]}function Uc(s){if(s==null)throw new Error("lng is required");return(s>180||s<-180)&&(s=s%360,s>180&&(s=-360+s),s<-180&&(s=360+s),s===0&&(s=0)),s}function $u(s){if(s==null)throw new Error("lat is required");return(s>90||s<-90)&&(s=s%180,s>90&&(s=-180+s),s<-90&&(s=180+s),s===0&&(s=0)),s}function $f(s,p){if(p===!1)return s;var c=Uc(s[0]),h=$u(s[1]);return h>85&&(h=85),h<-85&&(h=-85),s.length===3?[c,h,s[2]]:[c,h]}function Hl(s){var p=85.0511287798,c=Math.max(Math.min(p,s[1]),-p),h=256<<20,g=Math.PI/180,_=s[0]*g,G=c*g;G=Math.log(Math.tan(Math.PI/4+G/2));var Q=.5/Math.PI,tt=.5,ft=-.5/Math.PI;return g=.5,_=h*(Q*_+tt),G=h*(ft*G+g),[Math.floor(_),Math.floor(G)]}function Ml(s){var p=.5/Math.PI,c=.5,h=-.5/Math.PI,g=.5,_=256<<20,G=_slicedToArray(s,2),Q=G[0],tt=G[1];Q=(Q/_-c)/p,tt=(tt/_-g)/h,tt=(Math.atan(Math.pow(Math.E,tt))-Math.PI/4)*2,g=Math.PI/180;var ft=tt/g,Et=Q/g;return[Et,ft]}function cs(s,p,c){var h=ln(p[1]-s[1]),g=ln(p[0]-s[0]),_=ln(s[1]),G=ln(p[1]),Q=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(_)*Math.cos(G);return Ee(2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q)),c="meters")}function Qu(s){var p=Math.PI/180,c=85.0511287798,h=6378137,g=Math.max(Math.min(c,s[1]),-c),_=Math.sin(g*p),G=h*s[0]*p,Q=h*Math.log((1+_)/(1-_))/2;return[G,Q]}function Wa(s,p){var c=Math.abs(s[1][1]-s[0][1])*p,h=Math.abs(s[1][0]-s[0][0])*p;return[[s[0][0]-h,s[0][1]-c],[s[1][0]+h,s[1][1]+c]]}function za(s,p){return s[0][0]<=p[0][0]&&s[0][1]<=p[0][1]&&s[1][0]>=p[1][0]&&s[1][1]>=p[1][1]}function qu(s){return[[s[0],s[1]],[s[2],s[3]]]}function Zo(s,p){return Math.sqrt(Math.pow(s[0]-p[0],2)+Math.pow(s[1]-p[1],2))}function uc(s,p){return s[0]*p[0]+s[1]*p[1]}function Rs(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function gs(s,p){return Math.acos(uc(s,p)/(Rs(s)*Rs(p)))*180/Math.PI}function rd(s,p){return p[0]>0?p[1]>0?90-Math.atan(p[1]/p[0])*180/Math.PI:90+Math.atan(-p[1]/p[0])*180/Math.PI:p[1]<0?180+(90-Math.atan(p[1]/p[0])*180/Math.PI):270+Math.atan(p[1]/-p[0])*180/Math.PI}function nd(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!s||s.length<2)){for(var c=[0,1],h=0,g=[],_=0;_<s.length-1;_++){var G=s[_],Q=s[_+1],tt=Zo(G,Q);h+=tt;var ft=[G[0]-Q[0],G[1]-Q[1]],Et=rd(c,ft);if(_>0){var Bt=g[_-1].rotation;Bt-Et>360-Bt+Et&&(Et=Et+360)}g.push({start:G,end:Q,dis:tt,rotation:Et,duration:0})}return g.map(function(se){se.duration=p*(se.dis/h)}),g}}var Zs=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,c=arguments.length>1?arguments[1]:void 0;(0,cn.Z)(this,s),(0,Y.Z)(this,"limit",void 0),(0,Y.Z)(this,"cache",void 0),(0,Y.Z)(this,"destroy",void 0),(0,Y.Z)(this,"order",void 0),this.limit=p,this.destroy=c||this.defaultDestroy,this.order=[],this.clear()}return(0,vn.Z)(s,[{key:"clear",value:function(){var c=this;this.order.forEach(function(h){c.delete(h)}),this.cache={},this.order=[]}},{key:"get",value:function(c){var h=this.cache[c];return h&&(this.deleteOrder(c),this.appendOrder(c)),h}},{key:"set",value:function(c,h){this.cache[c]?(this.delete(c),this.cache[c]=h,this.appendOrder(c)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[c]=h,this.appendOrder(c))}},{key:"delete",value:function(c){var h=this.cache[c];h&&(this.deleteCache(c),this.deleteOrder(c),this.destroy(h,c))}},{key:"deleteCache",value:function(c){delete this.cache[c]}},{key:"deleteOrder",value:function(c){var h=this.order.findIndex(function(g){return g===c});h>=0&&this.order.splice(h,1)}},{key:"appendOrder",value:function(c){this.order.push(c)}},{key:"defaultDestroy",value:function(c,h){return null}}]),s}();function Hs(s,p){s.forEach(function(c){!p[c]||(p[c]=p[c].bind(p))})}var Cv=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;(0,cn.Z)(this,s),(0,Y.Z)(this,"duration",16),(0,Y.Z)(this,"timestamp",new Date().getTime()),this.duration=p}return(0,vn.Z)(s,[{key:"run",value:function(c){var h=new Date().getTime(),g=h-this.timestamp;this.timestamp=h,g>=this.duration&&c()}}]),s}(),Cf=S(2650);function Vc(s){return typeof s=="string"?!!Cf.ZP(s):!1}function as(s){var p=Cf.ZP(s),c=[0,0,0,0];return p!=null&&(c[0]=p.r/255,c[1]=p.g/255,c[2]=p.b/255,c[3]=p.opacity),c}function gu(s){var p=s&&s[0],c=s&&s[1],h=s&&s[2],g=p+c*256+h*65536-1;return g}function pc(s){return[s+1&255,s+1>>8&255,s+1>>8>>8&255]}function dc(s){var p=Ds.document.createElement("canvas"),c=p.getContext("2d");p.width=256,p.height=1;for(var h=c.createLinearGradient(0,0,256,1),g=null,_=s.positions[0],G=s.positions[s.positions.length-1],Q=0;Q<s.colors.length;++Q){var tt=(s.positions[Q]-_)/(G-_);h.addColorStop(tt,s.colors[Q])}return c.fillStyle=h,c.fillRect(0,0,256,1),g=new Uint8ClampedArray(c.getImageData(0,0,256,1).data),Ms?{data:g,width:256,height:1}:new ImageData(g,256,1)}var Th;(function(s){s.CENTER="center",s.TOP="top",s["TOP-LEFT"]="top-left",s["TOP-RIGHT"]="top-right",s.BOTTOM="bottom",s["BOTTOM-LEFT"]="bottom-left",s.LEFT="left",s.RIGHT="right"})(Th||(Th={}));var Af={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ph(s,p,c){var h=s.classList;for(var g in Af)Af.hasOwnProperty(g)&&h.remove("l7-".concat(c,"-anchor-").concat(g));h.add("l7-".concat(c,"-anchor-").concat(p))}function ju(s,p){return{enable:s,mask:255,func:{cmp:514,ref:p?1:0,mask:255}}}function ap(s){if(s.length===0)throw new Error("max requires at least one data point");for(var p=s[0],c=1;c<s.length;c++)s[c]>p&&(p=s[c]);return p*1}function Qf(s){if(s.length===0)throw new Error("min requires at least one data point");for(var p=s[0],c=1;c<s.length;c++)s[c]<p&&(p=s[c]);return p*1}function Rp(s){if(s.length===0)return 0;for(var p=s[0]*1,c=1;c<s.length;c++)p+=s[c]*1;return p}function qf(s){if(s.length===0)throw new Error("mean requires at least one data point");return Rp(s)/s.length}function Jf(s){if(s.length===0)throw new Error("mean requires at least one data point");if(s.length<3)return s[0];s.sort();for(var p=s[0],c=NaN,h=0,g=1,_=1;_<s.length+1;_++)s[_]!==p?(g>h&&(h=g,c=p),g=1,p=s[_]):g++;return c*1}var op={min:Qf,max:ap,mean:qf,sum:Rp,mode:Jf};function pf(s,p){return s.map(function(c){return c[p]})}function Cc(s,p){return op[s](p)}function th(s,p){var c=p.extent,h=c===void 0?[121.168,30.2828,121.384,30.4219]:c,g=new Promise(function(G){Ih(s,function(Q){G(Q)})}),_={originData:s,images:g,_id:1,dataArray:[{_id:0,coordinates:[[h[0],h[1]],[h[2],h[3]]]}]};return _}function Ih(s,p){var c=s,h=[];if(typeof c=="string")ip({url:c},function(G,Q){h.push(Q),p(h)});else{var g=c.length,_=0;c.forEach(function(G){ip({url:G},function(Q,tt){_++,h.push(tt),_===g&&p(h)})})}return th}function id(s,p){var c=p.extent,h=p.width,g=p.height,_=p.min,G=p.max,Q={_id:1,dataArray:[{_id:1,data:Array.from(s),width:h,height:g,min:_,max:G,coordinates:[[c[0],c[1]],[c[2],c[3]]]}]};return Q}var Oh=S(30236),E=S.n(Oh),I=S(47037),C=S.n(I),Z=S(23560),ut=S.n(Z),St=S(50361),At=S.n(St),te=S(34155);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function we(s,p,c,h){function g(_){return _ instanceof c?_:new c(function(G){G(_)})}return new(c||(c=Promise))(function(_,G){function Q(Et){try{ft(h.next(Et))}catch(Bt){G(Bt)}}function tt(Et){try{ft(h.throw(Et))}catch(Bt){G(Bt)}}function ft(Et){Et.done?_(Et.value):g(Et.value).then(Q,tt)}ft((h=h.apply(s,p||[])).next())})}function Oe(s,p){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},h,g,_,G;return G={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function Q(ft){return function(Et){return tt([ft,Et])}}function tt(ft){if(h)throw new TypeError("Generator is already executing.");for(;c;)try{if(h=1,g&&(_=ft[0]&2?g.return:ft[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,ft[1])).done)return _;switch(g=0,_&&(ft=[ft[0]&2,_.value]),ft[0]){case 0:case 1:_=ft;break;case 4:return c.label++,{value:ft[1],done:!1};case 5:c.label++,g=ft[1],ft=[0];continue;case 7:ft=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(ft[0]===6||ft[0]===2)){c=0;continue}if(ft[0]===3&&(!_||ft[1]>_[0]&&ft[1]<_[3])){c.label=ft[1];break}if(ft[0]===6&&c.label<_[1]){c.label=_[1],_=ft;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(ft);break}_[2]&&c.ops.pop(),c.trys.pop();continue}ft=p.call(s,c)}catch(Et){ft=[6,Et],g=0}finally{h=_=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function Ke(s,p){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var h=c.call(s),g,_=[],G;try{for(;(p===void 0||p-- >0)&&!(g=h.next()).done;)_.push(g.value)}catch(Q){G={error:Q}}finally{try{g&&!g.done&&(c=h.return)&&c.call(h)}finally{if(G)throw G.error}}return _}function nr(){for(var s=[],p=0;p<arguments.length;p++)s=s.concat(Ke(arguments[p]));return s}function $e(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function pr(s,p){return p={exports:{}},s(p,p.exports),p.exports}var Sr=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=c;function c(h){return h&&typeof h.length=="number"&&h.length>=0&&h.length%1==0}s.exports=p.default});$e(Sr);var zr=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(c){return function(){for(var h=[],g=arguments.length;g--;)h[g]=arguments[g];var _=h.pop();return c.call(this,h,_)}},s.exports=p.default});$e(zr);var dr=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.fallback=g,p.wrap=_;var c=p.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,h=p.hasNextTick=typeof te=="object"&&typeof te.nextTick=="function";function g(Q){setTimeout(Q,0)}function _(Q){return function(tt){for(var ft=[],Et=arguments.length-1;Et-- >0;)ft[Et]=arguments[Et+1];return Q(function(){return tt.apply(void 0,ft)})}}var G;c?G=setImmediate:h?G=te.nextTick:G=g,p.default=_(G)});$e(dr);var Ur=dr.fallback,en=dr.wrap,Sn=dr.hasSetImmediate,Zn=dr.hasNextTick,Pn=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=_;var c=g(zr),h=g(dr);function g(tt){return tt&&tt.__esModule?tt:{default:tt}}function _(tt){return(0,Fn.isAsync)(tt)?function(){for(var ft=[],Et=arguments.length;Et--;)ft[Et]=arguments[Et];var Bt=ft.pop(),se=tt.apply(this,ft);return G(se,Bt)}:(0,c.default)(function(ft,Et){var Bt;try{Bt=tt.apply(this,ft)}catch(se){return Et(se)}if(Bt&&typeof Bt.then=="function")return G(Bt,Et);Et(null,Bt)})}function G(tt,ft){return tt.then(function(Et){Q(ft,null,Et)},function(Et){Q(ft,Et&&Et.message?Et:new Error(Et))})}function Q(tt,ft,Et){try{tt(ft,Et)}catch(Bt){(0,h.default)(function(se){throw se},Bt)}}s.exports=p.default});$e(Pn);var Fn=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.isAsyncIterable=p.isAsyncGenerator=p.isAsync=void 0;var c=h(Pn);function h(tt){return tt&&tt.__esModule?tt:{default:tt}}function g(tt){return tt[Symbol.toStringTag]==="AsyncFunction"}function _(tt){return tt[Symbol.toStringTag]==="AsyncGenerator"}function G(tt){return typeof tt[Symbol.asyncIterator]=="function"}function Q(tt){if(typeof tt!="function")throw new Error("expected a function");return g(tt)?(0,c.default)(tt):tt}p.default=Q,p.isAsync=g,p.isAsyncGenerator=_,p.isAsyncIterable=G});$e(Fn);var gi=Fn.isAsyncIterable,Vi=Fn.isAsyncGenerator,Hi=Fn.isAsync,fa=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=c;function c(h,g){if(g===void 0&&(g=h.length),!g)throw new Error("arity is undefined");function _(){for(var G=this,Q=[],tt=arguments.length;tt--;)Q[tt]=arguments[tt];return typeof Q[g-1]=="function"?h.apply(this,Q):new Promise(function(ft,Et){Q[g-1]=function(Bt){for(var se=[],xe=arguments.length-1;xe-- >0;)se[xe]=arguments[xe+1];if(Bt)return Et(Bt);ft(se.length>1?se:se[0])},h.apply(G,Q)})}return Object.defineProperty(_,"name",{configurable:!0,value:"awaitable("+h.name+")"}),_}s.exports=p.default});$e(fa);var $a=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=_(Sr),h=_(Fn),g=_(fa);function _(G){return G&&G.__esModule?G:{default:G}}p.default=(0,g.default)(function(G,Q,tt){var ft=(0,c.default)(Q)?[]:{};G(Q,function(Et,Bt,se){(0,h.default)(Et)(function(xe){for(var De,Xe=[],Qe=arguments.length-1;Qe-- >0;)Xe[Qe]=arguments[Qe+1];Xe.length<2&&(De=Xe,Xe=De[0]),ft[Bt]=Xe,se(xe)})},function(Et){return tt(Et,ft)})},3),s.exports=p.default});$e($a);var Qa=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=c;function c(h){function g(){for(var _=[],G=arguments.length;G--;)_[G]=arguments[G];if(h!==null){var Q=h;h=null,Q.apply(this,_)}}return Object.assign(g,h),g}s.exports=p.default});$e(Qa);var so=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(c){return c[Symbol.iterator]&&c[Symbol.iterator]()},s.exports=p.default});$e(so);var No=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=tt;var c=g(Sr),h=g(so);function g(ft){return ft&&ft.__esModule?ft:{default:ft}}function _(ft){var Et=-1,Bt=ft.length;return function(){return++Et<Bt?{value:ft[Et],key:Et}:null}}function G(ft){var Et=-1;return function(){var se=ft.next();return se.done?null:(Et++,{value:se.value,key:Et})}}function Q(ft){var Et=ft?Object.keys(ft):[],Bt=-1,se=Et.length;return function(){var De=Et[++Bt];return Bt<se?{value:ft[De],key:De}:null}}function tt(ft){if((0,c.default)(ft))return _(ft);var Et=(0,h.default)(ft);return Et?G(Et):Q(ft)}s.exports=p.default});$e(No);var ea=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=c;function c(h){return function(){for(var g=[],_=arguments.length;_--;)g[_]=arguments[_];if(h===null)throw new Error("Callback was already called.");var G=h;h=null,G.apply(this,g)}}s.exports=p.default});$e(ea);var Eo=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c={};p.default=c,s.exports=p.default});$e(Eo);var Ro=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=g;var c=h(Eo);function h(_){return _&&_.__esModule?_:{default:_}}function g(_,G,Q,tt){var ft=!1,Et=!1,Bt=!1,se=0,xe=0;function De(){se>=G||Bt||ft||(Bt=!0,_.next().then(function(br){var Wr=br.value,sn=br.done;if(!(Et||ft)){if(Bt=!1,sn){ft=!0,se<=0&&tt(null);return}se++,Q(Wr,xe,Xe),xe++,De()}}).catch(Qe))}function Xe(br,Wr){if(se-=1,!Et){if(br)return Qe(br);if(br===!1){ft=!0,Et=!0;return}if(Wr===c.default||ft&&se<=0)return ft=!0,tt(null);De()}}function Qe(br){Et||(Bt=!1,ft=!0,tt(br))}De()}s.exports=p.default});$e(Ro);var bo=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=Q(Qa),h=Q(No),g=Q(ea),_=Q(Ro),G=Q(Eo);function Q(tt){return tt&&tt.__esModule?tt:{default:tt}}p.default=function(tt){return function(ft,Et,Bt){if(Bt=(0,c.default)(Bt),tt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ft)return Bt(null);if((0,Fn.isAsyncGenerator)(ft))return(0,_.default)(ft,tt,Et,Bt);if((0,Fn.isAsyncIterable)(ft))return(0,_.default)(ft[Symbol.asyncIterator](),tt,Et,Bt);var se=(0,h.default)(ft),xe=!1,De=!1,Xe=0,Qe=!1;function br(sn,xn){if(!De)if(Xe-=1,sn)xe=!0,Bt(sn);else if(sn===!1)xe=!0,De=!0;else{if(xn===G.default||xe&&Xe<=0)return xe=!0,Bt(null);Qe||Wr()}}function Wr(){for(Qe=!0;Xe<tt&&!xe;){var sn=se();if(sn===null){xe=!0,Xe<=0&&Bt(null);return}Xe+=1,Et(sn.value,sn.key,(0,g.default)(br))}Qe=!1}Wr()}},s.exports=p.default});$e(bo);var ho=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=_(bo),h=_(Fn),g=_(fa);function _(Q){return Q&&Q.__esModule?Q:{default:Q}}function G(Q,tt,ft,Et){return(0,c.default)(tt)(Q,(0,h.default)(ft),Et)}p.default=(0,g.default)(G,4),s.exports=p.default});$e(ho);var zo=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=g(ho),h=g(fa);function g(G){return G&&G.__esModule?G:{default:G}}function _(G,Q,tt){return(0,c.default)(G,1,Q,tt)}p.default=(0,h.default)(_,3),s.exports=p.default});$e(zo);var yo=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=_;var c=g($a),h=g(zo);function g(G){return G&&G.__esModule?G:{default:G}}function _(G,Q){return(0,c.default)(h.default,G,Q)}s.exports=p.default}),uo=$e(yo),tu=function(){function s(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];this.args=[],this.tasks=[]}return s.prototype.call=function(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];return this.args=c,uo(this.tasks)},s.prototype.tap=function(p,c){var h=this;this.tasks.push(function(g){c.apply(void 0,nr(h.args)),g(null,p)})},s}(),mu=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=ft(Sr),h=ft(Eo),g=ft(ho),_=ft(Qa),G=ft(ea),Q=ft(Fn),tt=ft(fa);function ft(xe){return xe&&xe.__esModule?xe:{default:xe}}function Et(xe,De,Xe){Xe=(0,_.default)(Xe);var Qe=0,br=0,Wr=xe.length,sn=!1;Wr===0&&Xe(null);function xn(Rn,Bn){Rn===!1&&(sn=!0),sn!==!0&&(Rn?Xe(Rn):(++br===Wr||Bn===h.default)&&Xe(null))}for(;Qe<Wr;Qe++)De(xe[Qe],Qe,(0,G.default)(xn))}function Bt(xe,De,Xe){return(0,g.default)(xe,Infinity,De,Xe)}function se(xe,De,Xe){var Qe=(0,c.default)(xe)?Et:Bt;return Qe(xe,(0,Q.default)(De),Xe)}p.default=(0,tt.default)(se,3),s.exports=p.default});$e(mu);var al=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=_;var c=g(mu),h=g($a);function g(G){return G&&G.__esModule?G:{default:G}}function _(G,Q){return(0,h.default)(c.default,G,Q)}s.exports=p.default}),vl=$e(al),du=function(){function s(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];this.tasks=[]}return s.prototype.promise=function(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];return vl(this.tasks)},s.prototype.tapPromise=function(p,c){var h=this;this.tasks.push(function(g){return we(h,void 0,void 0,function(){return Oe(this,function(_){switch(_.label){case 0:return[4,c()];case 1:return _.sent(),g(null,p),[2]}})})})},s}(),Nu=pr(function(s,p){Object.defineProperty(p,"__esModule",{value:!0});var c=G(Qa),h=G(ea),g=G(Fn),_=G(fa);function G(tt){return tt&&tt.__esModule?tt:{default:tt}}function Q(tt,ft){if(ft=(0,c.default)(ft),!Array.isArray(tt))return ft(new Error("First argument to waterfall must be an array of functions"));if(!tt.length)return ft();var Et=0;function Bt(xe){var De=(0,g.default)(tt[Et++]);De.apply(void 0,xe.concat([(0,h.default)(se)]))}function se(xe){for(var De=[],Xe=arguments.length-1;Xe-- >0;)De[Xe]=arguments[Xe+1];if(xe!==!1){if(xe||Et===tt.length)return ft.apply(void 0,[xe].concat(De));Bt(De)}}Bt([])}p.default=(0,_.default)(Q),s.exports=p.default}),Jl=$e(Nu),jl=function(){function s(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];this.tasks=[]}return s.prototype.call=function(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];return Jl(this.tasks)},s.prototype.tap=function(p,c){this.tasks.length===0?this.tasks.push(function(h){var g=c();h(g?null:!1,g)}):this.tasks.push(function(h,g){var _=c();g(_?null:!1,p)})},s}(),tc=function(){function s(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];this.tasks=[]}return s.prototype.call=function(){for(var p=arguments,c=[],h=0;h<arguments.length;h++)c[h]=p[h];return uo(this.tasks)},s.prototype.tap=function(p,c){this.tasks.push(function(h){var g=c();h(g,p)})},s}(),cu=S(26729),Ac=S.n(cu),Mc=S(69848),Lh=S.n(Mc);function eh(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function vc(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?eh(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):eh(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Mf(s,p){var c=p.radius,h=c===void 0?40:c,g=p.maxZoom,_=g===void 0?18:g,G=p.minZoom,Q=G===void 0?0:G,tt=p.zoom,ft=tt===void 0?2:tt;if(s.pointIndex){var Et=s.pointIndex.getClusters(s.extent,Math.floor(ft));return s.dataArray=sp(Et),s}var Bt=new(Lh())({radius:h,minZoom:Q,maxZoom:_}),se={type:"FeatureCollection",features:[]};return se.features=s.dataArray.map(function(xe){return{type:"Feature",geometry:{type:"Point",coordinates:xe.coordinates},properties:vc({},xe)}}),Bt.load(se.features),Bt}function sp(s){return s.map(function(p,c){return vc({coordinates:p.geometry.coordinates,_id:c+1},p.properties)})}function gc(s){if(s.length===0)throw new Error("max requires at least one data point");for(var p=s[0],c=1;c<s.length;c++)s[c]>p&&(p=s[c]);return p}function rh(s){if(s.length===0)throw new Error("min requires at least one data point");for(var p=s[0],c=1;c<s.length;c++)s[c]<p&&(p=s[c]);return p}function Zc(s){if(s.length===0)return 0;for(var p=s[0],c=0,h,g=1;g<s.length;g++)h=p+s[g]*1,Math.abs(p)>=Math.abs(s[g])?c+=p-h+s[g]:c+=s[g]-h+p,p=h;return p+c*1}function Ju(s){if(s.length===0)throw new Error("mean requires at least one data point");return Zc(s)/s.length}var Kc={min:rh,max:gc,mean:Ju,sum:Zc};function Tf(s,p){return s.map(function(c){return c[p]*1})}function df(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Ps(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?df(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):df(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function mc(s){var p=Xl();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Xl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function Pf(s,p){if(Array.isArray(p))return p}var up=function(s){(0,vi.Z)(c,s);var p=mc(c);function c(h,g){var _;return(0,cn.Z)(this,c),_=p.call(this),(0,Y.Z)((0,Tt.Z)(_),"data",void 0),(0,Y.Z)((0,Tt.Z)(_),"extent",void 0),(0,Y.Z)((0,Tt.Z)(_),"hooks",{init:new tu}),(0,Y.Z)((0,Tt.Z)(_),"parser",{type:"geojson"}),(0,Y.Z)((0,Tt.Z)(_),"transforms",[]),(0,Y.Z)((0,Tt.Z)(_),"cluster",!1),(0,Y.Z)((0,Tt.Z)(_),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,Y.Z)((0,Tt.Z)(_),"mapService",void 0),(0,Y.Z)((0,Tt.Z)(_),"invalidExtent",!1),(0,Y.Z)((0,Tt.Z)(_),"originData",void 0),(0,Y.Z)((0,Tt.Z)(_),"rawData",void 0),(0,Y.Z)((0,Tt.Z)(_),"cfg",{}),(0,Y.Z)((0,Tt.Z)(_),"clusterIndex",void 0),_.originData=h,_.initCfg(g),_.hooks.init.tap("parser",function(){_.excuteParser()}),_.hooks.init.tap("cluster",function(){_.initCluster()}),_.hooks.init.tap("transform",function(){_.executeTrans()}),_.init(),_}return(0,vn.Z)(c,[{key:"setData",value:function(g,_){this.rawData=g,this.originData=g,this.initCfg(_),this.init(),this.emit("update")}},{key:"getClusters",value:function(g){return this.clusterIndex.getClusters(this.caculClusterExtent(2),g)}},{key:"getClustersLeaves",value:function(g){return this.clusterIndex.getLeaves(g,Infinity)}},{key:"updateClusterData",value:function(g){var _=this,G=this.clusterOptions,Q=G.method,tt=Q===void 0?"sum":Q,ft=G.field,Et=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(g));this.clusterOptions.zoom=g,Et.forEach(function(Bt){Bt.id||(Bt.properties.point_count=1)}),(ft||ut()(tt))&&(Et=Et.map(function(Bt){var se=Bt.id;if(se){var xe=_.clusterIndex.getLeaves(se,Infinity),De=xe.map(function(br){return br.properties}),Xe;if(C()(tt)&&ft){var Qe=Tf(De,ft);Xe=Kc[tt](Qe)}ut()(tt)&&(Xe=tt(De)),Bt.properties.stat=Xe}else Bt.properties.point_count=1;return Bt})),this.data=R("geojson")({type:"FeatureCollection",features:Et}),this.executeTrans()}},{key:"getFeatureById",value:function(g){var _=this.parser.type,G=_===void 0?"geojson":_;if(G==="geojson"&&!this.cluster){var Q=g<this.originData.features.length?this.originData.features[g]:"null",tt=At()(Q);if(this.transforms.length!==0){var ft=this.data.dataArray.find(function(Et){return Et._id===g});tt.properties=ft}return tt}else return g<this.data.dataArray.length?this.data.dataArray[g]:"null"}},{key:"getFeatureId",value:function(g,_){var G=this.data.dataArray.find(function(Q){return Q[g]===name});return G==null?void 0:G._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(g){var _=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(_=Wa(qu(this.extent),g)),_[0].concat(_[1])}},{key:"initCfg",value:function(g){this.cfg=E()(this.cfg,g,Pf);var _=this.cfg;_&&(_.parser&&(this.parser=_.parser),_.transforms&&(this.transforms=_.transforms),this.cluster=_.cluster||!1,_.clusterOptions&&(this.cluster=!0,this.clusterOptions=Ps(Ps({},this.clusterOptions),_.clusterOptions)))}},{key:"excuteParser",value:function(){var g=this.parser,_=g.type||"geojson";if(_==="imagetile"){this.data={tileurl:this.originData,dataArray:[]};return}var G=R(_);this.data=G(this.originData,g),this.extent=ed(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var g=this,_=this.transforms;_.forEach(function(G){var Q=G.type,tt=A(Q)(g.data,G);Object.assign(g.data,tt)})}},{key:"initCluster",value:function(){if(!!this.cluster){var g=this.clusterOptions||{};this.clusterIndex=Mf(this.data,g)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),c}(cu.EventEmitter);function Dp(s,p){var c=p.callback;return c&&(s.dataArray=s.dataArray.filter(c)),s}function Bp(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Tc(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function Tc(s,p){if(!!s){if(typeof s=="string")return lp(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return lp(s,p)}}function lp(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var yc=6378e3;function If(s,p){var c=s.dataArray,h=p.size,g=h===void 0?10:h,_=g/(2*Math.PI*yc)*(256<<20)/2,G=Fp(c,g),Q=G.gridHash,tt=G.gridOffset,ft=Pd(Q,tt,p);return{yOffset:_,xOffset:_,radius:_,type:"grid",dataArray:ft}}function Fp(s,p){var c=Infinity,h=-Infinity,g,_=Bp(s),G;try{for(_.s();!(G=_.n()).done;){var Q=G.value;g=Q.coordinates[1],Number.isFinite(g)&&(c=g<c?g:c,h=g>h?g:h)}}catch(sn){_.e(sn)}finally{_.f()}var tt=(c+h)/2,ft=Hc(p,tt);if(ft.xOffset<=0||ft.yOffset<=0)return{gridHash:{},gridOffset:ft};var Et={},Bt=Bp(s),se;try{for(Bt.s();!(se=Bt.n()).done;){var xe=se.value,De=xe.coordinates[1],Xe=xe.coordinates[0];if(Number.isFinite(De)&&Number.isFinite(Xe)){var Qe=Math.floor((De+90)/ft.yOffset),br=Math.floor((Xe+180)/ft.xOffset),Wr="".concat(Qe,"-").concat(br);Et[Wr]=Et[Wr]||{count:0,points:[]},Et[Wr].count+=1,Et[Wr].points.push(xe)}}}catch(sn){Bt.e(sn)}finally{Bt.f()}return{gridHash:Et,gridOffset:ft}}function Hc(s,p){var c=ol(s),h=cp(p,s);return{yOffset:c,xOffset:h}}function ol(s){return s/yc*(180/Math.PI)}function cp(s,p){return p/yc*(180/Math.PI)/Math.cos(s*Math.PI/180)}function Pd(s,p,c){return Object.keys(s).reduce(function(h,g,_){var G=g.split("-"),Q=parseInt(G[0],10),tt=parseInt(G[1],10),ft={};if(c.field&&c.method){var Et=pf(s[g].points,c.field);ft[c.method]=op[c.method](Et)}return Object.assign(ft,{_id:_,coordinates:Hl([-180+p.xOffset*(tt+.5),-90+p.yOffset*(Q+.5)]),rawData:s[g].points,count:s[g].count}),h.push(ft),h},[])}var nh=Math.PI/3,Id=[0,nh,2*nh,3*nh,4*nh,5*nh];function xg(s){return s[0]}function Od(s){return s[1]}function ms(){var s=0,p=0,c=1,h=1,g=xg,_=Od,G,Q,tt;function ft(Bt){var se={},xe=[],De,Xe=Bt.length;for(De=0;De<Xe;++De)if(!(isNaN(br=+g.call(null,Qe=Bt[De],De,Bt))||isNaN(Wr=+_.call(null,Qe,De,Bt)))){var Qe,br,Wr,sn=Math.round(Wr=Wr/tt),xn=Math.round(br=br/Q-(sn&1)/2),Rn=Wr-sn;if(Math.abs(Rn)*3>1){var Bn=br-xn,Qn=xn+(br<xn?-1:1)/2,di=sn+(Wr<sn?-1:1),ta=br-Qn,Ca=Wr-di;Bn*Bn+Rn*Rn>ta*ta+Ca*Ca&&(xn=Qn+(sn&1?1:-1)/2,sn=di)}var Fi=xn+"-"+sn,ja=se[Fi];ja?ja.push(Qe):(xe.push(ja=se[Fi]=[Qe]),ja.x=(xn+(sn&1)/2)*Q,ja.y=sn*tt)}return xe}function Et(Bt){var se=0,xe=0;return Id.map(function(De){var Xe=Math.sin(De)*Bt,Qe=-Math.cos(De)*Bt,br=Xe-se,Wr=Qe-xe;return se=Xe,xe=Qe,[br,Wr]})}return ft.hexagon=function(Bt){return"m"+Et(Bt==null?G:+Bt).join("l")+"z"},ft.centers=function(){for(var Bt=[],se=Math.round(p/tt),xe=Math.round(s/Q),De=se*tt;De<h+G;De+=tt,++se)for(var Xe=xe*Q+(se&1)*Q/2;Xe<c+Q/2;Xe+=Q)Bt.push([Xe,De]);return Bt},ft.mesh=function(){var Bt=Et(G).slice(0,4).join("l");return ft.centers().map(function(se){return"M"+se+"m"+Bt}).join("")},ft.x=function(Bt){return arguments.length?(g=Bt,ft):g},ft.y=function(Bt){return arguments.length?(_=Bt,ft):_},ft.radius=function(Bt){return arguments.length?(G=+Bt,Q=G*2*Math.sin(nh),tt=G*1.5,ft):G},ft.size=function(Bt){return arguments.length?(s=p=0,c=+Bt[0],h=+Bt[1],ft):[c-s,h-p]},ft.extent=function(Bt){return arguments.length?(s=+Bt[0][0],p=+Bt[0][1],c=+Bt[1][0],h=+Bt[1][1],ft):[[s,p],[c,h]]},ft.radius(1)}function ad(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function xc(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ad(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ad(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var _g=6378e3;function ih(s,p){var c=s.dataArray,h=p.size,g=h===void 0?10:h,_=p.method,G=_===void 0?"sum":_,Q=g/(2*Math.PI*_g)*(256<<20)/2,tt=c.map(function(se){var xe=Hl(se.coordinates),De=(0,ga.Z)(xe,2),Xe=De[0],Qe=De[1];return xc(xc({},se),{},{coordinates:[Xe,Qe]})}),ft=ms().radius(Q).x(function(se){return se.coordinates[0]}).y(function(se){return se.coordinates[1]}),Et=ft(tt),Bt={dataArray:Et.map(function(se,xe){var De;if(p.field&&G){var Xe=pf(se,p.field);se[G]=op[G](Xe)}return De={},(0,Y.Z)(De,p.method,se[G]),(0,Y.Z)(De,"count",se.length),(0,Y.Z)(De,"rawData",se),(0,Y.Z)(De,"coordinates",[se.x,se.y]),(0,Y.Z)(De,"_id",xe),De}),radius:Q,xOffset:Q,yOffset:Q,type:"hexagon"};return Bt}function Np(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function bg(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Np(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Np(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Ld(s,p){var c=p.sourceField,h=p.targetField,g=p.data,_={};return g.forEach(function(G){_[G[c]]=G}),s.dataArray=s.dataArray.map(function(G){var Q=G[h];return bg(bg({},G),_[Q])}),s}function ah(s,p){var c=p.callback;return c&&(s.dataArray=s.dataArray.map(c)),s}N("geojson",yi),N("image",th),N("csv",Xt),N("json",It),N("raster",id),D("cluster",Mf),D("filter",Dp),D("join",Ld),D("map",ah),D("grid",If),D("hexagon",ih);var Av=Ht,p0=kt,rm=up,Sg=S(28660),sa=S(86700),vf=S(84879),Vn={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},nm=S(31745),sl=S.n(nm);function kd(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function wg(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?kd(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):kd(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Rd(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Mv(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function Mv(s,p){if(!!s){if(typeof s=="string")return od(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return od(s,p)}}function od(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var fp=30;function Dd(s){var p=s.characterSet,c=s.getFontWidth,h=s.fontHeight,g=s.buffer,_=s.maxCanvasWidth,G=s.mapping,Q=G===void 0?{}:G,tt=s.xOffset,ft=tt===void 0?0:tt,Et=s.yOffset,Bt=Et===void 0?0:Et,se=0,xe=ft;Array.from(p).forEach(function(Xe,Qe){if(!Q[Xe]){var br=c(Xe,Qe);xe+fp>_&&(xe=0,se++),Q[Xe]={x:xe,y:Bt+se*fp,width:fp,height:fp,advance:br},xe+=fp}});var De=h+g*2;return{mapping:Q,xOffset:xe,yOffset:Bt+se*De,canvasHeight:sd(Bt+(se+1)*De)}}function Of(s,p,c){var h=0,g=0,_=0,G=[],Q={},tt=Rd(s),ft;try{for(tt.s();!(ft=tt.n()).done;){var Et=ft.value;if(!Q[Et.id]){var Bt=Et.size;h+Bt+p>c&&(hp(Q,G,g),h=0,g=_+g+p,_=0,G=[]),G.push({icon:Et,xOffset:h}),h=h+Bt+p,_=Math.max(_,Bt)}}}catch(xe){tt.e(xe)}finally{tt.f()}G.length>0&&hp(Q,G,g);var se=sd(_+g+p);return{mapping:Q,canvasHeight:se}}function hp(s,p,c){var h=Rd(p),g;try{for(h.s();!(g=h.n()).done;){var _=g.value,G=_.icon,Q=_.xOffset;s[G.id]=wg(wg({},G),{},{x:Q,y:c,image:G.image,width:G.width,height:G.height})}}catch(tt){h.e(tt)}finally{h.f()}}function sd(s){return Math.pow(2,Math.ceil(Math.log2(s)))}var Bd,kh;function Fd(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Nd(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function Nd(s,p){if(!!s){if(typeof s=="string")return zd(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return zd(s,p)}}function zd(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function zp(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function pp(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?zp(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):zp(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var Pc=im(),Gd="sans-serif",Ud="normal",Tv=24,Vd=3,Pv=.25,oh=8,Rh=1024,d0=1,Zd=1,v0=3,vy=null;function im(){for(var s=[],p=32;p<128;p++)s.push(String.fromCharCode(p));return s}function jc(s,p,c,h){s.font="".concat(h," ").concat(c,"px ").concat(p),s.fillStyle="black",s.textBaseline="middle"}function Eg(s,p){for(var c=0;c<s.length;c++)p.data[4*c+3]=s[c]}var Iv=(Bd=(0,sa.b2)(),Bd(kh=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"fontAtlas",void 0),(0,Y.Z)(this,"iconFontMap",void 0),(0,Y.Z)(this,"iconFontGlyphs",{}),(0,Y.Z)(this,"fontOptions",void 0),(0,Y.Z)(this,"key",void 0),(0,Y.Z)(this,"cache",new Zs(v0))}return(0,vn.Z)(s,[{key:"scale",get:function(){return Zd}},{key:"canvas",get:function(){var c=this.cache.get(this.key);return c&&c.data}},{key:"mapping",get:function(){var c=this.cache.get(this.key);return c&&c.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Gd,fontWeight:Ud,characterSet:Pc,fontSize:Tv,buffer:Vd,sdf:!0,cutoff:Pv,radius:oh,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(c){var h=this;c.forEach(function(g){h.iconFontGlyphs[g.name]=g.unicode})}},{key:"addIconFont",value:function(c,h){this.iconFontMap.set(c,h)}},{key:"getIconFontKey",value:function(c){return this.iconFontMap.get(c)||c}},{key:"getGlyph",value:function(c){return this.iconFontGlyphs[c]?String.fromCharCode(parseInt(this.iconFontGlyphs[c],16)):""}},{key:"setFontOptions",value:function(c){this.fontOptions=pp(pp({},this.fontOptions),c),this.key=this.getKey();var h=this.getNewChars(this.key,this.fontOptions.characterSet),g=this.cache.get(this.key);if(!(g&&h.length===0)){var _=this.generateFontAtlas(this.key,h,g);this.fontAtlas=_,this.cache.set(this.key,_)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(c,h,g){var _=this.fontOptions,G=_.fontFamily,Q=_.fontWeight,tt=_.fontSize,ft=_.buffer,Et=_.sdf,Bt=_.radius,se=_.cutoff,xe=_.iconfont,De=g&&g.data;De||(De=Ds.document.createElement("canvas"),De.width=Rh);var Xe=De.getContext("2d");jc(Xe,G,tt,Q);var Qe=Dd(pp({getFontWidth:function(xf){return Xe.measureText(xf).width},fontHeight:tt*Zd,buffer:ft,characterSet:h,maxCanvasWidth:Rh},g&&{mapping:g.mapping,xOffset:g.xOffset,yOffset:g.yOffset})),br=Qe.mapping,Wr=Qe.canvasHeight,sn=Qe.xOffset,xn=Qe.yOffset,Rn=Xe.getImageData(0,0,De.width,De.height);if(De.height=Wr,Xe.putImageData(Rn,0,0),jc(Xe,G,tt,Q),Et){var Bn=new(sl())(tt,ft,Bt,se,G,Q),Qn=Xe.getImageData(0,0,Bn.size,Bn.size),di=Fd(h),ta;try{for(di.s();!(ta=di.n()).done;){var Ca=ta.value;if(xe){var Fi=String.fromCharCode(parseInt(Ca.replace("&#x","").replace(";",""),16)),ja=Bn.draw(Fi);Eg(ja,Qn)}else Eg(Bn.draw(Ca),Qn);Xe.putImageData(Qn,br[Ca].x,br[Ca].y)}}catch(ic){di.e(ic)}finally{di.f()}}else{var ro=Fd(h),Bo;try{for(ro.s();!(Bo=ro.n()).done;){var Uu=Bo.value;Xe.fillText(Uu,br[Uu].x,br[Uu].y+tt*d0)}}catch(ic){ro.e(ic)}finally{ro.f()}}return{xOffset:sn,yOffset:xn,mapping:br,data:De,width:De.width,height:De.height}}},{key:"getKey",value:function(){return"key";var c,h,g,_,G,Q,tt,ft}},{key:"getNewChars",value:function(c,h){var g=this.cache.get(c);if(!g)return h;var _=[],G=g.mapping,Q=new Set(Object.keys(G)),tt=new Set(h);return tt.forEach(function(ft){Q.has(ft)||_.push(ft)}),_}}]),s}())||kh),dp,gf;function g0(s){var p=am();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function am(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var sh=3,Gp=1024,Lf=64,vp=(dp=(0,sa.b2)(),dp(gf=function(s){(0,vi.Z)(c,s);var p=g0(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"canvasHeight",128),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"canvas",void 0),(0,Y.Z)((0,Tt.Z)(h),"iconData",void 0),(0,Y.Z)((0,Tt.Z)(h),"iconMap",void 0),(0,Y.Z)((0,Tt.Z)(h),"ctx",void 0),(0,Y.Z)((0,Tt.Z)(h),"loadingImageCount",0),h}return(0,vn.Z)(c,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=Ds.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(g,_){var G=this,Q=new Image;if(this.loadingImageCount++,this.hasImage(g))throw new Error("Image Id already exists");this.iconData.push({id:g,size:Lf}),this.updateIconMap(),this.loadImage(_).then(function(tt){Q=tt;var ft=G.iconData.find(function(Et){return Et.id===g});ft&&(ft.image=Q,ft.width=Q.width,ft.height=Q.height),G.update()})}},{key:"addImageMini",value:function(g,_,G){var Q=this,tt=G.getSceneConfig().canvas,ft=tt.createImage();if(this.loadingImageCount++,this.hasImage(g))throw new Error("Image Id already exists");this.iconData.push({id:g,size:Lf}),this.updateIconMap(),this.loadImageMini(_,tt).then(function(Et){ft=Et;var Bt=Q.iconData.find(function(se){return se.id===g});Bt&&(Bt.image=ft,Bt.width=ft.width,Bt.height=ft.height),Q.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(g){return this.iconMap.hasOwnProperty(g)}},{key:"removeImage",value:function(g){this.hasImage(g)&&(this.iconData=this.iconData.filter(function(_){return _.id!==g}),delete this.iconMap[g],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var g=this;this.canvas.width=Gp,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(_){var G=g.iconMap[_],Q=G.x,tt=G.y,ft=G.image,Et=G.width,Bt=Et===void 0?64:Et,se=G.height,xe=se===void 0?64:se,De=Math.max(Bt,xe),Xe=De/Lf,Qe=xe/Xe,br=Bt/Xe;ft&&g.ctx.drawImage(ft,Q+(Lf-br)/2,tt+(Lf-Qe)/2,br,Qe)})}},{key:"updateIconMap",value:function(){var g=Of(this.iconData,sh,Gp),_=g.mapping,G=g.canvasHeight;this.iconMap=_,this.canvasHeight=G}},{key:"loadImage",value:function(g){return new Promise(function(_,G){if(g instanceof HTMLImageElement){_(g);return}var Q=new Image;Q.crossOrigin="anonymous",Q.onload=function(){_(Q)},Q.onerror=function(){G(new Error("Could not load image at "+g))},Q.src=g instanceof File?URL.createObjectURL(g):g})}},{key:"loadImageMini",value:function(g,_){return new Promise(function(G,Q){var tt=_.createImage();tt.crossOrigin="anonymous",tt.onload=function(){G(tt)},tt.onerror=function(){Q(new Error("Could not load image at "+g))},tt.src=g})}}]),c}(cu.EventEmitter))||gf),fu=S(49685);function uh(){var s=new fu.WT(16);return fu.WT!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s}function Hd(s){var p=new fu.WT(16);return p[0]=s[0],p[1]=s[1],p[2]=s[2],p[3]=s[3],p[4]=s[4],p[5]=s[5],p[6]=s[6],p[7]=s[7],p[8]=s[8],p[9]=s[9],p[10]=s[10],p[11]=s[11],p[12]=s[12],p[13]=s[13],p[14]=s[14],p[15]=s[15],p}function Cg(s,p){return s[0]=p[0],s[1]=p[1],s[2]=p[2],s[3]=p[3],s[4]=p[4],s[5]=p[5],s[6]=p[6],s[7]=p[7],s[8]=p[8],s[9]=p[9],s[10]=p[10],s[11]=p[11],s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15],s}function Us(s,p,c,h,g,_,G,Q,tt,ft,Et,Bt,se,xe,De,Xe){var Qe=new fu.WT(16);return Qe[0]=s,Qe[1]=p,Qe[2]=c,Qe[3]=h,Qe[4]=g,Qe[5]=_,Qe[6]=G,Qe[7]=Q,Qe[8]=tt,Qe[9]=ft,Qe[10]=Et,Qe[11]=Bt,Qe[12]=se,Qe[13]=xe,Qe[14]=De,Qe[15]=Xe,Qe}function gp(s,p,c,h,g,_,G,Q,tt,ft,Et,Bt,se,xe,De,Xe,Qe){return s[0]=p,s[1]=c,s[2]=h,s[3]=g,s[4]=_,s[5]=G,s[6]=Q,s[7]=tt,s[8]=ft,s[9]=Et,s[10]=Bt,s[11]=se,s[12]=xe,s[13]=De,s[14]=Xe,s[15]=Qe,s}function tl(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ic(s,p){if(s===p){var c=p[1],h=p[2],g=p[3],_=p[6],G=p[7],Q=p[11];s[1]=p[4],s[2]=p[8],s[3]=p[12],s[4]=c,s[6]=p[9],s[7]=p[13],s[8]=h,s[9]=_,s[11]=p[14],s[12]=g,s[13]=G,s[14]=Q}else s[0]=p[0],s[1]=p[4],s[2]=p[8],s[3]=p[12],s[4]=p[1],s[5]=p[5],s[6]=p[9],s[7]=p[13],s[8]=p[2],s[9]=p[6],s[10]=p[10],s[11]=p[14],s[12]=p[3],s[13]=p[7],s[14]=p[11],s[15]=p[15];return s}function jd(s,p){var c=p[0],h=p[1],g=p[2],_=p[3],G=p[4],Q=p[5],tt=p[6],ft=p[7],Et=p[8],Bt=p[9],se=p[10],xe=p[11],De=p[12],Xe=p[13],Qe=p[14],br=p[15],Wr=c*Q-h*G,sn=c*tt-g*G,xn=c*ft-_*G,Rn=h*tt-g*Q,Bn=h*ft-_*Q,Qn=g*ft-_*tt,di=Et*Xe-Bt*De,ta=Et*Qe-se*De,Ca=Et*br-xe*De,Fi=Bt*Qe-se*Xe,ja=Bt*br-xe*Xe,ro=se*br-xe*Qe,Bo=Wr*ro-sn*ja+xn*Fi+Rn*Ca-Bn*ta+Qn*di;return Bo?(Bo=1/Bo,s[0]=(Q*ro-tt*ja+ft*Fi)*Bo,s[1]=(g*ja-h*ro-_*Fi)*Bo,s[2]=(Xe*Qn-Qe*Bn+br*Rn)*Bo,s[3]=(se*Bn-Bt*Qn-xe*Rn)*Bo,s[4]=(tt*Ca-G*ro-ft*ta)*Bo,s[5]=(c*ro-g*Ca+_*ta)*Bo,s[6]=(Qe*xn-De*Qn-br*sn)*Bo,s[7]=(Et*Qn-se*xn+xe*sn)*Bo,s[8]=(G*ja-Q*Ca+ft*di)*Bo,s[9]=(h*Ca-c*ja-_*di)*Bo,s[10]=(De*Bn-Xe*xn+br*Wr)*Bo,s[11]=(Bt*xn-Et*Bn-xe*Wr)*Bo,s[12]=(Q*ta-G*Fi-tt*di)*Bo,s[13]=(c*Fi-h*ta+g*di)*Bo,s[14]=(Xe*sn-De*Rn-Qe*Wr)*Bo,s[15]=(Et*Rn-Bt*sn+se*Wr)*Bo,s):null}function m0(s,p){var c=p[0],h=p[1],g=p[2],_=p[3],G=p[4],Q=p[5],tt=p[6],ft=p[7],Et=p[8],Bt=p[9],se=p[10],xe=p[11],De=p[12],Xe=p[13],Qe=p[14],br=p[15];return s[0]=Q*(se*br-xe*Qe)-Bt*(tt*br-ft*Qe)+Xe*(tt*xe-ft*se),s[1]=-(h*(se*br-xe*Qe)-Bt*(g*br-_*Qe)+Xe*(g*xe-_*se)),s[2]=h*(tt*br-ft*Qe)-Q*(g*br-_*Qe)+Xe*(g*ft-_*tt),s[3]=-(h*(tt*xe-ft*se)-Q*(g*xe-_*se)+Bt*(g*ft-_*tt)),s[4]=-(G*(se*br-xe*Qe)-Et*(tt*br-ft*Qe)+De*(tt*xe-ft*se)),s[5]=c*(se*br-xe*Qe)-Et*(g*br-_*Qe)+De*(g*xe-_*se),s[6]=-(c*(tt*br-ft*Qe)-G*(g*br-_*Qe)+De*(g*ft-_*tt)),s[7]=c*(tt*xe-ft*se)-G*(g*xe-_*se)+Et*(g*ft-_*tt),s[8]=G*(Bt*br-xe*Xe)-Et*(Q*br-ft*Xe)+De*(Q*xe-ft*Bt),s[9]=-(c*(Bt*br-xe*Xe)-Et*(h*br-_*Xe)+De*(h*xe-_*Bt)),s[10]=c*(Q*br-ft*Xe)-G*(h*br-_*Xe)+De*(h*ft-_*Q),s[11]=-(c*(Q*xe-ft*Bt)-G*(h*xe-_*Bt)+Et*(h*ft-_*Q)),s[12]=-(G*(Bt*Qe-se*Xe)-Et*(Q*Qe-tt*Xe)+De*(Q*se-tt*Bt)),s[13]=c*(Bt*Qe-se*Xe)-Et*(h*Qe-g*Xe)+De*(h*se-g*Bt),s[14]=-(c*(Q*Qe-tt*Xe)-G*(h*Qe-g*Xe)+De*(h*tt-g*Q)),s[15]=c*(Q*se-tt*Bt)-G*(h*se-g*Bt)+Et*(h*tt-g*Q),s}function om(s){var p=s[0],c=s[1],h=s[2],g=s[3],_=s[4],G=s[5],Q=s[6],tt=s[7],ft=s[8],Et=s[9],Bt=s[10],se=s[11],xe=s[12],De=s[13],Xe=s[14],Qe=s[15],br=p*G-c*_,Wr=p*Q-h*_,sn=p*tt-g*_,xn=c*Q-h*G,Rn=c*tt-g*G,Bn=h*tt-g*Q,Qn=ft*De-Et*xe,di=ft*Xe-Bt*xe,ta=ft*Qe-se*xe,Ca=Et*Xe-Bt*De,Fi=Et*Qe-se*De,ja=Bt*Qe-se*Xe;return br*ja-Wr*Fi+sn*Ca+xn*ta-Rn*di+Bn*Qn}function kf(s,p,c){var h=p[0],g=p[1],_=p[2],G=p[3],Q=p[4],tt=p[5],ft=p[6],Et=p[7],Bt=p[8],se=p[9],xe=p[10],De=p[11],Xe=p[12],Qe=p[13],br=p[14],Wr=p[15],sn=c[0],xn=c[1],Rn=c[2],Bn=c[3];return s[0]=sn*h+xn*Q+Rn*Bt+Bn*Xe,s[1]=sn*g+xn*tt+Rn*se+Bn*Qe,s[2]=sn*_+xn*ft+Rn*xe+Bn*br,s[3]=sn*G+xn*Et+Rn*De+Bn*Wr,sn=c[4],xn=c[5],Rn=c[6],Bn=c[7],s[4]=sn*h+xn*Q+Rn*Bt+Bn*Xe,s[5]=sn*g+xn*tt+Rn*se+Bn*Qe,s[6]=sn*_+xn*ft+Rn*xe+Bn*br,s[7]=sn*G+xn*Et+Rn*De+Bn*Wr,sn=c[8],xn=c[9],Rn=c[10],Bn=c[11],s[8]=sn*h+xn*Q+Rn*Bt+Bn*Xe,s[9]=sn*g+xn*tt+Rn*se+Bn*Qe,s[10]=sn*_+xn*ft+Rn*xe+Bn*br,s[11]=sn*G+xn*Et+Rn*De+Bn*Wr,sn=c[12],xn=c[13],Rn=c[14],Bn=c[15],s[12]=sn*h+xn*Q+Rn*Bt+Bn*Xe,s[13]=sn*g+xn*tt+Rn*se+Bn*Qe,s[14]=sn*_+xn*ft+Rn*xe+Bn*br,s[15]=sn*G+xn*Et+Rn*De+Bn*Wr,s}function Xd(s,p,c){var h=c[0],g=c[1],_=c[2],G,Q,tt,ft,Et,Bt,se,xe,De,Xe,Qe,br;return p===s?(s[12]=p[0]*h+p[4]*g+p[8]*_+p[12],s[13]=p[1]*h+p[5]*g+p[9]*_+p[13],s[14]=p[2]*h+p[6]*g+p[10]*_+p[14],s[15]=p[3]*h+p[7]*g+p[11]*_+p[15]):(G=p[0],Q=p[1],tt=p[2],ft=p[3],Et=p[4],Bt=p[5],se=p[6],xe=p[7],De=p[8],Xe=p[9],Qe=p[10],br=p[11],s[0]=G,s[1]=Q,s[2]=tt,s[3]=ft,s[4]=Et,s[5]=Bt,s[6]=se,s[7]=xe,s[8]=De,s[9]=Xe,s[10]=Qe,s[11]=br,s[12]=G*h+Et*g+De*_+p[12],s[13]=Q*h+Bt*g+Xe*_+p[13],s[14]=tt*h+se*g+Qe*_+p[14],s[15]=ft*h+xe*g+br*_+p[15]),s}function Up(s,p,c){var h=c[0],g=c[1],_=c[2];return s[0]=p[0]*h,s[1]=p[1]*h,s[2]=p[2]*h,s[3]=p[3]*h,s[4]=p[4]*g,s[5]=p[5]*g,s[6]=p[6]*g,s[7]=p[7]*g,s[8]=p[8]*_,s[9]=p[9]*_,s[10]=p[10]*_,s[11]=p[11]*_,s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15],s}function Ag(s,p,c,h){var g=h[0],_=h[1],G=h[2],Q=Math.hypot(g,_,G),tt,ft,Et,Bt,se,xe,De,Xe,Qe,br,Wr,sn,xn,Rn,Bn,Qn,di,ta,Ca,Fi,ja,ro,Bo,Uu;return Q<fu.Ib?null:(Q=1/Q,g*=Q,_*=Q,G*=Q,tt=Math.sin(c),ft=Math.cos(c),Et=1-ft,Bt=p[0],se=p[1],xe=p[2],De=p[3],Xe=p[4],Qe=p[5],br=p[6],Wr=p[7],sn=p[8],xn=p[9],Rn=p[10],Bn=p[11],Qn=g*g*Et+ft,di=_*g*Et+G*tt,ta=G*g*Et-_*tt,Ca=g*_*Et-G*tt,Fi=_*_*Et+ft,ja=G*_*Et+g*tt,ro=g*G*Et+_*tt,Bo=_*G*Et-g*tt,Uu=G*G*Et+ft,s[0]=Bt*Qn+Xe*di+sn*ta,s[1]=se*Qn+Qe*di+xn*ta,s[2]=xe*Qn+br*di+Rn*ta,s[3]=De*Qn+Wr*di+Bn*ta,s[4]=Bt*Ca+Xe*Fi+sn*ja,s[5]=se*Ca+Qe*Fi+xn*ja,s[6]=xe*Ca+br*Fi+Rn*ja,s[7]=De*Ca+Wr*Fi+Bn*ja,s[8]=Bt*ro+Xe*Bo+sn*Uu,s[9]=se*ro+Qe*Bo+xn*Uu,s[10]=xe*ro+br*Bo+Rn*Uu,s[11]=De*ro+Wr*Bo+Bn*Uu,p!==s&&(s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15]),s)}function Yd(s,p,c){var h=Math.sin(c),g=Math.cos(c),_=p[4],G=p[5],Q=p[6],tt=p[7],ft=p[8],Et=p[9],Bt=p[10],se=p[11];return p!==s&&(s[0]=p[0],s[1]=p[1],s[2]=p[2],s[3]=p[3],s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15]),s[4]=_*g+ft*h,s[5]=G*g+Et*h,s[6]=Q*g+Bt*h,s[7]=tt*g+se*h,s[8]=ft*g-_*h,s[9]=Et*g-G*h,s[10]=Bt*g-Q*h,s[11]=se*g-tt*h,s}function Dh(s,p,c){var h=Math.sin(c),g=Math.cos(c),_=p[0],G=p[1],Q=p[2],tt=p[3],ft=p[8],Et=p[9],Bt=p[10],se=p[11];return p!==s&&(s[4]=p[4],s[5]=p[5],s[6]=p[6],s[7]=p[7],s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15]),s[0]=_*g-ft*h,s[1]=G*g-Et*h,s[2]=Q*g-Bt*h,s[3]=tt*g-se*h,s[8]=_*h+ft*g,s[9]=G*h+Et*g,s[10]=Q*h+Bt*g,s[11]=tt*h+se*g,s}function gl(s,p,c){var h=Math.sin(c),g=Math.cos(c),_=p[0],G=p[1],Q=p[2],tt=p[3],ft=p[4],Et=p[5],Bt=p[6],se=p[7];return p!==s&&(s[8]=p[8],s[9]=p[9],s[10]=p[10],s[11]=p[11],s[12]=p[12],s[13]=p[13],s[14]=p[14],s[15]=p[15]),s[0]=_*g+ft*h,s[1]=G*g+Et*h,s[2]=Q*g+Bt*h,s[3]=tt*g+se*h,s[4]=ft*g-_*h,s[5]=Et*g-G*h,s[6]=Bt*g-Q*h,s[7]=se*g-tt*h,s}function Wd(s,p){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=p[0],s[13]=p[1],s[14]=p[2],s[15]=1,s}function Kd(s,p){return s[0]=p[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=p[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=p[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function eu(s,p,c){var h=c[0],g=c[1],_=c[2],G=Math.hypot(h,g,_),Q,tt,ft;return G<fu.Ib?null:(G=1/G,h*=G,g*=G,_*=G,Q=Math.sin(p),tt=Math.cos(p),ft=1-tt,s[0]=h*h*ft+tt,s[1]=g*h*ft+_*Q,s[2]=_*h*ft-g*Q,s[3]=0,s[4]=h*g*ft-_*Q,s[5]=g*g*ft+tt,s[6]=_*g*ft+h*Q,s[7]=0,s[8]=h*_*ft+g*Q,s[9]=g*_*ft-h*Q,s[10]=_*_*ft+tt,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}function Mg(s,p){var c=Math.sin(p),h=Math.cos(p);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=h,s[6]=c,s[7]=0,s[8]=0,s[9]=-c,s[10]=h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Rf(s,p){var c=Math.sin(p),h=Math.cos(p);return s[0]=h,s[1]=0,s[2]=-c,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=c,s[9]=0,s[10]=h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function ud(s,p){var c=Math.sin(p),h=Math.cos(p);return s[0]=h,s[1]=c,s[2]=0,s[3]=0,s[4]=-c,s[5]=h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ov(s,p,c){var h=p[0],g=p[1],_=p[2],G=p[3],Q=h+h,tt=g+g,ft=_+_,Et=h*Q,Bt=h*tt,se=h*ft,xe=g*tt,De=g*ft,Xe=_*ft,Qe=G*Q,br=G*tt,Wr=G*ft;return s[0]=1-(xe+Xe),s[1]=Bt+Wr,s[2]=se-br,s[3]=0,s[4]=Bt-Wr,s[5]=1-(Et+Xe),s[6]=De+Qe,s[7]=0,s[8]=se+br,s[9]=De-Qe,s[10]=1-(Et+xe),s[11]=0,s[12]=c[0],s[13]=c[1],s[14]=c[2],s[15]=1,s}function gy(s,p){var c=new fu.WT(3),h=-p[0],g=-p[1],_=-p[2],G=p[3],Q=p[4],tt=p[5],ft=p[6],Et=p[7],Bt=h*h+g*g+_*_+G*G;return Bt>0?(c[0]=(Q*G+Et*h+tt*_-ft*g)*2/Bt,c[1]=(tt*G+Et*g+ft*h-Q*_)*2/Bt,c[2]=(ft*G+Et*_+Q*g-tt*h)*2/Bt):(c[0]=(Q*G+Et*h+tt*_-ft*g)*2,c[1]=(tt*G+Et*g+ft*h-Q*_)*2,c[2]=(ft*G+Et*_+Q*g-tt*h)*2),Ov(s,p,c),s}function be(s,p){return s[0]=p[12],s[1]=p[13],s[2]=p[14],s}function ar(s,p){var c=p[0],h=p[1],g=p[2],_=p[4],G=p[5],Q=p[6],tt=p[8],ft=p[9],Et=p[10];return s[0]=Math.hypot(c,h,g),s[1]=Math.hypot(_,G,Q),s[2]=Math.hypot(tt,ft,Et),s}function Pr(s,p){var c=new fu.WT(3);ar(c,p);var h=1/c[0],g=1/c[1],_=1/c[2],G=p[0]*h,Q=p[1]*g,tt=p[2]*_,ft=p[4]*h,Et=p[5]*g,Bt=p[6]*_,se=p[8]*h,xe=p[9]*g,De=p[10]*_,Xe=G+Et+De,Qe=0;return Xe>0?(Qe=Math.sqrt(Xe+1)*2,s[3]=.25*Qe,s[0]=(Bt-xe)/Qe,s[1]=(se-tt)/Qe,s[2]=(Q-ft)/Qe):G>Et&&G>De?(Qe=Math.sqrt(1+G-Et-De)*2,s[3]=(Bt-xe)/Qe,s[0]=.25*Qe,s[1]=(Q+ft)/Qe,s[2]=(se+tt)/Qe):Et>De?(Qe=Math.sqrt(1+Et-G-De)*2,s[3]=(se-tt)/Qe,s[0]=(Q+ft)/Qe,s[1]=.25*Qe,s[2]=(Bt+xe)/Qe):(Qe=Math.sqrt(1+De-G-Et)*2,s[3]=(Q-ft)/Qe,s[0]=(se+tt)/Qe,s[1]=(Bt+xe)/Qe,s[2]=.25*Qe),s}function Ln(s,p,c,h){var g=p[0],_=p[1],G=p[2],Q=p[3],tt=g+g,ft=_+_,Et=G+G,Bt=g*tt,se=g*ft,xe=g*Et,De=_*ft,Xe=_*Et,Qe=G*Et,br=Q*tt,Wr=Q*ft,sn=Q*Et,xn=h[0],Rn=h[1],Bn=h[2];return s[0]=(1-(De+Qe))*xn,s[1]=(se+sn)*xn,s[2]=(xe-Wr)*xn,s[3]=0,s[4]=(se-sn)*Rn,s[5]=(1-(Bt+Qe))*Rn,s[6]=(Xe+br)*Rn,s[7]=0,s[8]=(xe+Wr)*Bn,s[9]=(Xe-br)*Bn,s[10]=(1-(Bt+De))*Bn,s[11]=0,s[12]=c[0],s[13]=c[1],s[14]=c[2],s[15]=1,s}function ni(s,p,c,h,g){var _=p[0],G=p[1],Q=p[2],tt=p[3],ft=_+_,Et=G+G,Bt=Q+Q,se=_*ft,xe=_*Et,De=_*Bt,Xe=G*Et,Qe=G*Bt,br=Q*Bt,Wr=tt*ft,sn=tt*Et,xn=tt*Bt,Rn=h[0],Bn=h[1],Qn=h[2],di=g[0],ta=g[1],Ca=g[2],Fi=(1-(Xe+br))*Rn,ja=(xe+xn)*Rn,ro=(De-sn)*Rn,Bo=(xe-xn)*Bn,Uu=(1-(se+br))*Bn,ic=(Qe+Wr)*Bn,xf=(De+sn)*Qn,Tp=(Qe-Wr)*Qn,yh=(1-(se+Xe))*Qn;return s[0]=Fi,s[1]=ja,s[2]=ro,s[3]=0,s[4]=Bo,s[5]=Uu,s[6]=ic,s[7]=0,s[8]=xf,s[9]=Tp,s[10]=yh,s[11]=0,s[12]=c[0]+di-(Fi*di+Bo*ta+xf*Ca),s[13]=c[1]+ta-(ja*di+Uu*ta+Tp*Ca),s[14]=c[2]+Ca-(ro*di+ic*ta+yh*Ca),s[15]=1,s}function On(s,p){var c=p[0],h=p[1],g=p[2],_=p[3],G=c+c,Q=h+h,tt=g+g,ft=c*G,Et=h*G,Bt=h*Q,se=g*G,xe=g*Q,De=g*tt,Xe=_*G,Qe=_*Q,br=_*tt;return s[0]=1-Bt-De,s[1]=Et+br,s[2]=se-Qe,s[3]=0,s[4]=Et-br,s[5]=1-ft-De,s[6]=xe+Xe,s[7]=0,s[8]=se+Qe,s[9]=xe-Xe,s[10]=1-ft-Bt,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Wn(s,p,c,h,g,_,G){var Q=1/(c-p),tt=1/(g-h),ft=1/(_-G);return s[0]=_*2*Q,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=_*2*tt,s[6]=0,s[7]=0,s[8]=(c+p)*Q,s[9]=(g+h)*tt,s[10]=(G+_)*ft,s[11]=-1,s[12]=0,s[13]=0,s[14]=G*_*2*ft,s[15]=0,s}function fi(s,p,c,h,g){var _=1/Math.tan(p/2),G;return s[0]=_/c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=_,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==Infinity?(G=1/(h-g),s[10]=(g+h)*G,s[14]=2*g*h*G):(s[10]=-1,s[14]=-2*h),s}var xi=fi;function Ii(s,p,c,h,g){var _=1/Math.tan(p/2),G;return s[0]=_/c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=_,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==Infinity?(G=1/(h-g),s[10]=g*G,s[14]=g*h*G):(s[10]=-1,s[14]=-h),s}function Ni(s,p,c,h){var g=Math.tan(p.upDegrees*Math.PI/180),_=Math.tan(p.downDegrees*Math.PI/180),G=Math.tan(p.leftDegrees*Math.PI/180),Q=Math.tan(p.rightDegrees*Math.PI/180),tt=2/(G+Q),ft=2/(g+_);return s[0]=tt,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=ft,s[6]=0,s[7]=0,s[8]=-((G-Q)*tt*.5),s[9]=(g-_)*ft*.5,s[10]=h/(c-h),s[11]=-1,s[12]=0,s[13]=0,s[14]=h*c/(c-h),s[15]=0,s}function zi(s,p,c,h,g,_,G){var Q=1/(p-c),tt=1/(h-g),ft=1/(_-G);return s[0]=-2*Q,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*tt,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*ft,s[11]=0,s[12]=(p+c)*Q,s[13]=(g+h)*tt,s[14]=(G+_)*ft,s[15]=1,s}var ra=zi;function Mi(s,p,c,h,g,_,G){var Q=1/(p-c),tt=1/(h-g),ft=1/(_-G);return s[0]=-2*Q,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*tt,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=ft,s[11]=0,s[12]=(p+c)*Q,s[13]=(g+h)*tt,s[14]=_*ft,s[15]=1,s}function Di(s,p,c,h){var g,_,G,Q,tt,ft,Et,Bt,se,xe,De=p[0],Xe=p[1],Qe=p[2],br=h[0],Wr=h[1],sn=h[2],xn=c[0],Rn=c[1],Bn=c[2];return Math.abs(De-xn)<fu.Ib&&Math.abs(Xe-Rn)<fu.Ib&&Math.abs(Qe-Bn)<fu.Ib?tl(s):(Et=De-xn,Bt=Xe-Rn,se=Qe-Bn,xe=1/Math.hypot(Et,Bt,se),Et*=xe,Bt*=xe,se*=xe,g=Wr*se-sn*Bt,_=sn*Et-br*se,G=br*Bt-Wr*Et,xe=Math.hypot(g,_,G),xe?(xe=1/xe,g*=xe,_*=xe,G*=xe):(g=0,_=0,G=0),Q=Bt*G-se*_,tt=se*g-Et*G,ft=Et*_-Bt*g,xe=Math.hypot(Q,tt,ft),xe?(xe=1/xe,Q*=xe,tt*=xe,ft*=xe):(Q=0,tt=0,ft=0),s[0]=g,s[1]=Q,s[2]=Et,s[3]=0,s[4]=_,s[5]=tt,s[6]=Bt,s[7]=0,s[8]=G,s[9]=ft,s[10]=se,s[11]=0,s[12]=-(g*De+_*Xe+G*Qe),s[13]=-(Q*De+tt*Xe+ft*Qe),s[14]=-(Et*De+Bt*Xe+se*Qe),s[15]=1,s)}function fn(s,p,c,h){var g=p[0],_=p[1],G=p[2],Q=h[0],tt=h[1],ft=h[2],Et=g-c[0],Bt=_-c[1],se=G-c[2],xe=Et*Et+Bt*Bt+se*se;xe>0&&(xe=1/Math.sqrt(xe),Et*=xe,Bt*=xe,se*=xe);var De=tt*se-ft*Bt,Xe=ft*Et-Q*se,Qe=Q*Bt-tt*Et;return xe=De*De+Xe*Xe+Qe*Qe,xe>0&&(xe=1/Math.sqrt(xe),De*=xe,Xe*=xe,Qe*=xe),s[0]=De,s[1]=Xe,s[2]=Qe,s[3]=0,s[4]=Bt*Qe-se*Xe,s[5]=se*De-Et*Qe,s[6]=Et*Xe-Bt*De,s[7]=0,s[8]=Et,s[9]=Bt,s[10]=se,s[11]=0,s[12]=g,s[13]=_,s[14]=G,s[15]=1,s}function zn(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}function Ai(s){return Math.hypot(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15])}function Ki(s,p,c){return s[0]=p[0]+c[0],s[1]=p[1]+c[1],s[2]=p[2]+c[2],s[3]=p[3]+c[3],s[4]=p[4]+c[4],s[5]=p[5]+c[5],s[6]=p[6]+c[6],s[7]=p[7]+c[7],s[8]=p[8]+c[8],s[9]=p[9]+c[9],s[10]=p[10]+c[10],s[11]=p[11]+c[11],s[12]=p[12]+c[12],s[13]=p[13]+c[13],s[14]=p[14]+c[14],s[15]=p[15]+c[15],s}function li(s,p,c){return s[0]=p[0]-c[0],s[1]=p[1]-c[1],s[2]=p[2]-c[2],s[3]=p[3]-c[3],s[4]=p[4]-c[4],s[5]=p[5]-c[5],s[6]=p[6]-c[6],s[7]=p[7]-c[7],s[8]=p[8]-c[8],s[9]=p[9]-c[9],s[10]=p[10]-c[10],s[11]=p[11]-c[11],s[12]=p[12]-c[12],s[13]=p[13]-c[13],s[14]=p[14]-c[14],s[15]=p[15]-c[15],s}function Zi(s,p,c){return s[0]=p[0]*c,s[1]=p[1]*c,s[2]=p[2]*c,s[3]=p[3]*c,s[4]=p[4]*c,s[5]=p[5]*c,s[6]=p[6]*c,s[7]=p[7]*c,s[8]=p[8]*c,s[9]=p[9]*c,s[10]=p[10]*c,s[11]=p[11]*c,s[12]=p[12]*c,s[13]=p[13]*c,s[14]=p[14]*c,s[15]=p[15]*c,s}function ha(s,p,c,h){return s[0]=p[0]+c[0]*h,s[1]=p[1]+c[1]*h,s[2]=p[2]+c[2]*h,s[3]=p[3]+c[3]*h,s[4]=p[4]+c[4]*h,s[5]=p[5]+c[5]*h,s[6]=p[6]+c[6]*h,s[7]=p[7]+c[7]*h,s[8]=p[8]+c[8]*h,s[9]=p[9]+c[9]*h,s[10]=p[10]+c[10]*h,s[11]=p[11]+c[11]*h,s[12]=p[12]+c[12]*h,s[13]=p[13]+c[13]*h,s[14]=p[14]+c[14]*h,s[15]=p[15]+c[15]*h,s}function ao(s,p){return s[0]===p[0]&&s[1]===p[1]&&s[2]===p[2]&&s[3]===p[3]&&s[4]===p[4]&&s[5]===p[5]&&s[6]===p[6]&&s[7]===p[7]&&s[8]===p[8]&&s[9]===p[9]&&s[10]===p[10]&&s[11]===p[11]&&s[12]===p[12]&&s[13]===p[13]&&s[14]===p[14]&&s[15]===p[15]}function Xn(s,p){var c=s[0],h=s[1],g=s[2],_=s[3],G=s[4],Q=s[5],tt=s[6],ft=s[7],Et=s[8],Bt=s[9],se=s[10],xe=s[11],De=s[12],Xe=s[13],Qe=s[14],br=s[15],Wr=p[0],sn=p[1],xn=p[2],Rn=p[3],Bn=p[4],Qn=p[5],di=p[6],ta=p[7],Ca=p[8],Fi=p[9],ja=p[10],ro=p[11],Bo=p[12],Uu=p[13],ic=p[14],xf=p[15];return Math.abs(c-Wr)<=fu.Ib*Math.max(1,Math.abs(c),Math.abs(Wr))&&Math.abs(h-sn)<=fu.Ib*Math.max(1,Math.abs(h),Math.abs(sn))&&Math.abs(g-xn)<=fu.Ib*Math.max(1,Math.abs(g),Math.abs(xn))&&Math.abs(_-Rn)<=fu.Ib*Math.max(1,Math.abs(_),Math.abs(Rn))&&Math.abs(G-Bn)<=fu.Ib*Math.max(1,Math.abs(G),Math.abs(Bn))&&Math.abs(Q-Qn)<=fu.Ib*Math.max(1,Math.abs(Q),Math.abs(Qn))&&Math.abs(tt-di)<=fu.Ib*Math.max(1,Math.abs(tt),Math.abs(di))&&Math.abs(ft-ta)<=fu.Ib*Math.max(1,Math.abs(ft),Math.abs(ta))&&Math.abs(Et-Ca)<=fu.Ib*Math.max(1,Math.abs(Et),Math.abs(Ca))&&Math.abs(Bt-Fi)<=fu.Ib*Math.max(1,Math.abs(Bt),Math.abs(Fi))&&Math.abs(se-ja)<=fu.Ib*Math.max(1,Math.abs(se),Math.abs(ja))&&Math.abs(xe-ro)<=fu.Ib*Math.max(1,Math.abs(xe),Math.abs(ro))&&Math.abs(De-Bo)<=fu.Ib*Math.max(1,Math.abs(De),Math.abs(Bo))&&Math.abs(Xe-Uu)<=fu.Ib*Math.max(1,Math.abs(Xe),Math.abs(Uu))&&Math.abs(Qe-ic)<=fu.Ib*Math.max(1,Math.abs(Qe),Math.abs(ic))&&Math.abs(br-xf)<=fu.Ib*Math.max(1,Math.abs(br),Math.abs(xf))}var ei=kf,ka=li,aa,Oi,ua=(aa=(0,sa.b2)(),aa(Oi=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"viewport",void 0),(0,Y.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Y.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,Y.Z)(this,"jitteredProjectionMatrix",void 0),(0,Y.Z)(this,"viewMatrixInverse",void 0),(0,Y.Z)(this,"cameraPosition",void 0)}return(0,vn.Z)(s,[{key:"init",value:function(){}},{key:"update",value:function(c){this.viewport=c,this.viewMatrixInverse=uh(),jd(this.viewMatrixInverse,c.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var c=this.viewport.getCenter(),h=(0,ga.Z)(c,2),g=h[0],_=h[1];return[g,_]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(c,h){return this.viewport.projectFlat(c,h)}},{key:"setViewProjectionMatrix",value:function(c){this.overridedViewProjectionMatrix=c}},{key:"jitterProjectionMatrix",value:function(c,h){var g=Wd(uh(),[c,h,0]);this.jitteredProjectionMatrix=kf(uh(),g,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=kf(uh(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),s}())||Oi),$i,Go;function Io(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=na(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function na(s,p){if(!!s){if(typeof s=="string")return ma(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ma(s,p)}}function ma(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var Co=($i=(0,sa.b2)(),$i(Go=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"container",void 0),(0,Y.Z)(this,"controlCorners",void 0),(0,Y.Z)(this,"controlContainer",void 0),(0,Y.Z)(this,"scene",void 0),(0,Y.Z)(this,"mapsService",void 0),(0,Y.Z)(this,"controls",[]),(0,Y.Z)(this,"unAddControls",[])}return(0,vn.Z)(s,[{key:"init",value:function(c,h){this.container=c.container,this.scene=h,this.mapsService=h.get(Vn.IMapService),this.initControlPos()}},{key:"addControl",value:function(c,h){var g=h.get(Vn.IMapService);g.map?(c.addTo(this.scene),this.controls.push(c)):this.unAddControls.push(c)}},{key:"getControlByName",value:function(c){return this.controls.find(function(h){return h.controlOption.name===c})}},{key:"removeControl",value:function(c){var h=this.controls.indexOf(c);return h>-1&&this.controls.splice(h,1),c.remove(),this}},{key:"addControls",value:function(){var c=this;this.unAddControls.forEach(function(h){h.addTo(c.scene),c.controls.push(h)}),this.unAddControls=[]}},{key:"destroy",value:function(){var c=Io(this.controls),h;try{for(c.s();!(h=c.n()).done;){var g=h.value;g.remove()}}catch(_){c.e(_)}finally{c.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var c=this.controlCorners={},h="l7-",g=this.controlContainer=lu("div",h+"control-container",this.container);function _(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Q=G.map(function(tt){return h+tt}).join(" ");c[G.join("")]=lu("div",Q,g)}_(["top","left"]),_(["top","right"]),_(["bottom","left"]),_(["bottom","right"]),_(["top","center"]),_(["right","center"]),_(["left","center"]),_(["bottom","center"])}},{key:"clearControlPos",value:function(){for(var c in this.controlCorners)this.controlCorners[c]&&np(this.controlCorners[c]);this.controlContainer&&np(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),s}())||Go),Do,os,ku=(Do=(0,sa.b2)(),Do(os=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"container",void 0),(0,Y.Z)(this,"scene",void 0),(0,Y.Z)(this,"mapsService",void 0),(0,Y.Z)(this,"markers",[]),(0,Y.Z)(this,"markerLayers",[]),(0,Y.Z)(this,"unAddMarkers",[]),(0,Y.Z)(this,"unAddMarkerLayers",[])}return(0,vn.Z)(s,[{key:"addMarkerLayer",value:function(c){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(c),c.addTo(this.scene)):this.unAddMarkerLayers.push(c)}},{key:"removeMarkerLayer",value:function(c){c.destroy(),this.markerLayers.indexOf(c);var h=this.markerLayers.indexOf(c);h>-1&&this.markerLayers.splice(h,1)}},{key:"addMarker",value:function(c){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(c),c.addTo(this.scene)):this.unAddMarkers.push(c)}},{key:"addMarkers",value:function(){var c=this;this.unAddMarkers.forEach(function(h){h.addTo(c.scene),c.markers.push(h)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var c=this;this.unAddMarkerLayers.forEach(function(h){c.markerLayers.push(h),h.addTo(c.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(c){c.remove(),this.markers.indexOf(c);var h=this.markers.indexOf(c);h>-1&&this.markers.splice(h,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(c){this.scene=c,this.mapsService=c.get(Vn.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(c){c.remove()}),this.markers=[],this.markerLayers.forEach(function(c){c.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(c){c.destroy()}}]),s}())||os),zu,ss,Dl=(zu=(0,sa.b2)(),zu(ss=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"scene",void 0),(0,Y.Z)(this,"popup",void 0),(0,Y.Z)(this,"mapsService",void 0),(0,Y.Z)(this,"unAddPopup",void 0)}return(0,vn.Z)(s,[{key:"removePopup",value:function(c){c.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(c){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(c.addTo(this.scene),this.popup=c):this.unAddPopup=c}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(c){this.scene=c,this.mapsService=c.get(Vn.IMapService)}}]),s}())||ss),yu=S(82492),Tl=S.n(yu),ul={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Pl=ul,ll,ml;function xu(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Uo(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?xu(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):xu(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var yl={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Is={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},cl=(ll=(0,sa.b2)(),ll(ml=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"sceneConfigCache",{}),(0,Y.Z)(this,"layerConfigCache",{})}return(0,vn.Z)(s,[{key:"getSceneConfig",value:function(c){return this.sceneConfigCache[c]}},{key:"getSceneWarninfo",value:function(c){return Pl[c]}},{key:"setSceneConfig",value:function(c,h){this.sceneConfigCache[c]=Uo(Uo({},yl),h)}},{key:"getLayerConfig",value:function(c){return this.layerConfigCache[c]}},{key:"setLayerConfig",value:function(c,h,g){this.layerConfigCache[h]=Uo({},Tl()({},this.sceneConfigCache[c],Is,g))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),s}())||ml);function Xi(s,p,c,h){!c||Object.defineProperty(s,p,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(h):void 0})}function ya(s,p,c,h,g){var _={};return Object.keys(h).forEach(function(G){_[G]=h[G]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=c.slice().reverse().reduce(function(G,Q){return Q(s,p,G)||G},_),g&&_.initializer!==void 0&&(_.value=_.initializer?_.initializer.call(g):void 0,_.initializer=void 0),_.initializer===void 0&&(Object.defineProperty(s,p,_),_=null),_}function Bs(){var s=new fu.WT(4);return fu.WT!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0),s}function fl(s){var p=new glMatrix.ARRAY_TYPE(4);return p[0]=s[0],p[1]=s[1],p[2]=s[2],p[3]=s[3],p}function lh(s,p,c,h){var g=new fu.WT(4);return g[0]=s,g[1]=p,g[2]=c,g[3]=h,g}function yr(s,p){return s[0]=p[0],s[1]=p[1],s[2]=p[2],s[3]=p[3],s}function Dn(s,p,c,h,g){return s[0]=p,s[1]=c,s[2]=h,s[3]=g,s}function Mn(s,p,c){return s[0]=p[0]+c[0],s[1]=p[1]+c[1],s[2]=p[2]+c[2],s[3]=p[3]+c[3],s}function Ta(s,p,c){return s[0]=p[0]-c[0],s[1]=p[1]-c[1],s[2]=p[2]-c[2],s[3]=p[3]-c[3],s}function fs(s,p,c){return s[0]=p[0]*c[0],s[1]=p[1]*c[1],s[2]=p[2]*c[2],s[3]=p[3]*c[3],s}function cr(s,p,c){return s[0]=p[0]/c[0],s[1]=p[1]/c[1],s[2]=p[2]/c[2],s[3]=p[3]/c[3],s}function Je(s,p){return s[0]=Math.ceil(p[0]),s[1]=Math.ceil(p[1]),s[2]=Math.ceil(p[2]),s[3]=Math.ceil(p[3]),s}function Nr(s,p){return s[0]=Math.floor(p[0]),s[1]=Math.floor(p[1]),s[2]=Math.floor(p[2]),s[3]=Math.floor(p[3]),s}function gn(s,p,c){return s[0]=Math.min(p[0],c[0]),s[1]=Math.min(p[1],c[1]),s[2]=Math.min(p[2],c[2]),s[3]=Math.min(p[3],c[3]),s}function In(s,p,c){return s[0]=Math.max(p[0],c[0]),s[1]=Math.max(p[1],c[1]),s[2]=Math.max(p[2],c[2]),s[3]=Math.max(p[3],c[3]),s}function Yr(s,p){return s[0]=Math.round(p[0]),s[1]=Math.round(p[1]),s[2]=Math.round(p[2]),s[3]=Math.round(p[3]),s}function Tr(s,p,c){return s[0]=p[0]*c,s[1]=p[1]*c,s[2]=p[2]*c,s[3]=p[3]*c,s}function rn(s,p,c,h){return s[0]=p[0]+c[0]*h,s[1]=p[1]+c[1]*h,s[2]=p[2]+c[2]*h,s[3]=p[3]+c[3]*h,s}function ur(s,p){var c=p[0]-s[0],h=p[1]-s[1],g=p[2]-s[2],_=p[3]-s[3];return Math.hypot(c,h,g,_)}function Rr(s,p){var c=p[0]-s[0],h=p[1]-s[1],g=p[2]-s[2],_=p[3]-s[3];return c*c+h*h+g*g+_*_}function vr(s){var p=s[0],c=s[1],h=s[2],g=s[3];return Math.hypot(p,c,h,g)}function mn(s){var p=s[0],c=s[1],h=s[2],g=s[3];return p*p+c*c+h*h+g*g}function Cn(s,p){return s[0]=-p[0],s[1]=-p[1],s[2]=-p[2],s[3]=-p[3],s}function hi(s,p){return s[0]=1/p[0],s[1]=1/p[1],s[2]=1/p[2],s[3]=1/p[3],s}function Ji(s,p){var c=p[0],h=p[1],g=p[2],_=p[3],G=c*c+h*h+g*g+_*_;return G>0&&(G=1/Math.sqrt(G)),s[0]=c*G,s[1]=h*G,s[2]=g*G,s[3]=_*G,s}function qi(s,p){return s[0]*p[0]+s[1]*p[1]+s[2]*p[2]+s[3]*p[3]}function xa(s,p,c,h){var g=c[0]*h[1]-c[1]*h[0],_=c[0]*h[2]-c[2]*h[0],G=c[0]*h[3]-c[3]*h[0],Q=c[1]*h[2]-c[2]*h[1],tt=c[1]*h[3]-c[3]*h[1],ft=c[2]*h[3]-c[3]*h[2],Et=p[0],Bt=p[1],se=p[2],xe=p[3];return s[0]=Bt*ft-se*tt+xe*Q,s[1]=-(Et*ft)+se*G-xe*_,s[2]=Et*tt-Bt*G+xe*g,s[3]=-(Et*Q)+Bt*_-se*g,s}function Yi(s,p,c,h){var g=p[0],_=p[1],G=p[2],Q=p[3];return s[0]=g+h*(c[0]-g),s[1]=_+h*(c[1]-_),s[2]=G+h*(c[2]-G),s[3]=Q+h*(c[3]-Q),s}function Ga(s,p){p=p||1;var c,h,g,_,G,Q;do c=glMatrix.RANDOM()*2-1,h=glMatrix.RANDOM()*2-1,G=c*c+h*h;while(G>=1);do g=glMatrix.RANDOM()*2-1,_=glMatrix.RANDOM()*2-1,Q=g*g+_*_;while(Q>=1);var tt=Math.sqrt((1-G)/Q);return s[0]=p*c,s[1]=p*h,s[2]=p*g*tt,s[3]=p*_*tt,s}function _a(s,p,c){var h=p[0],g=p[1],_=p[2],G=p[3];return s[0]=c[0]*h+c[4]*g+c[8]*_+c[12]*G,s[1]=c[1]*h+c[5]*g+c[9]*_+c[13]*G,s[2]=c[2]*h+c[6]*g+c[10]*_+c[14]*G,s[3]=c[3]*h+c[7]*g+c[11]*_+c[15]*G,s}function Da(s,p,c){var h=p[0],g=p[1],_=p[2],G=c[0],Q=c[1],tt=c[2],ft=c[3],Et=ft*h+Q*_-tt*g,Bt=ft*g+tt*h-G*_,se=ft*_+G*g-Q*h,xe=-G*h-Q*g-tt*_;return s[0]=Et*ft+xe*-G+Bt*-tt-se*-Q,s[1]=Bt*ft+xe*-Q+se*-G-Et*-tt,s[2]=se*ft+xe*-tt+Et*-Q-Bt*-G,s[3]=p[3],s}function Oa(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}function Pa(s){return"vec4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+")"}function So(s,p){return s[0]===p[0]&&s[1]===p[1]&&s[2]===p[2]&&s[3]===p[3]}function qs(s,p){var c=s[0],h=s[1],g=s[2],_=s[3],G=p[0],Q=p[1],tt=p[2],ft=p[3];return Math.abs(c-G)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(h-Q)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(g-tt)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(tt))&&Math.abs(_-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(_),Math.abs(ft))}var Yl=null,vu=null,js=null,Bh=null,ec=null,ch=null,mf=null,y0=function(){var s=Bs();return function(p,c,h,g,_,G){var Q,tt;for(c||(c=4),h||(h=0),g?tt=Math.min(g*c+h,p.length):tt=p.length,Q=h;Q<tt;Q+=c)s[0]=p[Q],s[1]=p[Q+1],s[2]=p[Q+2],s[3]=p[Q+3],_(s,s,G),p[Q]=s[0],p[Q+1]=s[1],p[Q+2]=s[2],p[Q+3]=s[3];return p}}(),Oc=Math.PI/180,mp=512,ld=4003e4;function sm(s){var p=s.latitude,c=p===void 0?0:p,h=s.zoom,g=h===void 0?0:h,_=s.scale,G=s.highPrecision,Q=G===void 0?!1:G,tt=s.flipY,ft=tt===void 0?!1:tt;_=_!==void 0?_:Math.pow(2,g);var Et={},Bt=mp*_,se=Math.cos(c*Oc),xe=Bt/360,De=xe/se,Xe=Bt/ld/se;if(Et.pixelsPerMeter=[Xe,-Xe,Xe],Et.metersPerPixel=[1/Xe,-1/Xe,1/Xe],Et.pixelsPerDegree=[xe,-De,Xe],Et.degreesPerPixel=[1/xe,-1/De,1/Xe],Q){var Qe=Oc*Math.tan(c*Oc)/se,br=xe*Qe/2,Wr=Bt/ld*Qe,sn=Wr/De*Xe;Et.pixelsPerDegree2=[0,-br,Wr],Et.pixelsPerMeter2=[sn,0,sn],ft&&(Et.pixelsPerDegree2[1]=-Et.pixelsPerDegree2[1],Et.pixelsPerMeter2[1]=-Et.pixelsPerMeter2[1])}return ft&&(Et.pixelsPerMeter[1]=-Et.pixelsPerMeter[1],Et.metersPerPixel[1]=-Et.metersPerPixel[1],Et.pixelsPerDegree[1]=-Et.pixelsPerDegree[1],Et.degreesPerPixel[1]=-Et.degreesPerPixel[1]),Et}var Eu;(function(s){s[s.LNGLAT=1]="LNGLAT",s[s.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",s[s.VECTOR_TILE=3]="VECTOR_TILE",s[s.IDENTITY=4]="IDENTITY",s[s.P20=5]="P20",s[s.P20_OFFSET=6]="P20_OFFSET",s[s.METER_OFFSET=7]="METER_OFFSET",s[s.P20_2=8]="P20_2"})(Eu||(Eu={}));var fh={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},Fh,Lv,Tg,Pg,Vp,Zp=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],yy=(Fh=(0,sa.b2)(),Lv=(0,sa.f3)(Vn.ICameraService),Fh(Tg=(Pg=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"needRefresh",!0),Xi(this,"cameraService",Vp,this),(0,Y.Z)(this,"coordinateSystem",void 0),(0,Y.Z)(this,"viewportCenter",void 0),(0,Y.Z)(this,"viewportCenterProjection",void 0),(0,Y.Z)(this,"pixelsPerDegree",void 0),(0,Y.Z)(this,"pixelsPerDegree2",void 0),(0,Y.Z)(this,"pixelsPerMeter",void 0)}return(0,vn.Z)(s,[{key:"refresh",value:function(){var c=this.cameraService.getZoom(),h=this.cameraService.getZoomScale(),g=this.cameraService.getCenter(),_=sm({latitude:g[1],zoom:c}),G=_.pixelsPerMeter,Q=_.pixelsPerDegree;this.viewportCenter=g,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=G,this.pixelsPerDegree=Q,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Eu.LNGLAT||this.coordinateSystem===Eu.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Eu.LNGLAT_OFFSET?this.calculateLnglatOffset(g,c):this.coordinateSystem===Eu.P20_OFFSET&&this.calculateLnglatOffset(g,c,h,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(c){this.coordinateSystem=c}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(c,h,g,_){var G=sm({latitude:c[1],zoom:h,scale:g,flipY:_,highPrecision:!0}),Q=G.pixelsPerMeter,tt=G.pixelsPerDegree,ft=G.pixelsPerDegree2,Et=this.cameraService.getViewMatrix(),Bt=this.cameraService.getProjectionMatrix(),se=kf([],Bt,Et),xe=this.cameraService.projectFlat([Math.fround(c[0]),Math.fround(c[1])],Math.pow(2,h));this.viewportCenterProjection=_a([],[xe[0],xe[1],0,1],se),Et=this.cameraService.getViewMatrixUncentered()||Et,se=kf([],Bt,Et),se=kf([],se,Zp),this.cameraService.setViewProjectionMatrix(se),this.pixelsPerMeter=Q,this.pixelsPerDegree=tt,this.pixelsPerDegree2=ft}}]),s}(),Vp=ya(Pg.prototype,"cameraService",[Lv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg))||Tg),yp=S(20396),$d=S.n(yp),Ys;(function(s){s.Hover="hover",s.Click="click",s.Select="select",s.Active="active",s.Drag="drag"})(Ys||(Ys={}));var Hp,um,l,v,b;function z(s){var p=$();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function $(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var at={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},mt=(Hp=(0,sa.b2)(),um=(0,sa.f3)(Vn.IMapService),Hp(l=(v=function(s){(0,vi.Z)(c,s);var p=z(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),Xi((0,Tt.Z)(h),"mapService",b,(0,Tt.Z)(h)),(0,Y.Z)((0,Tt.Z)(h),"hammertime",void 0),(0,Y.Z)((0,Tt.Z)(h),"lastClickTime",0),(0,Y.Z)((0,Tt.Z)(h),"lastClickXY",[-1,-1]),(0,Y.Z)((0,Tt.Z)(h),"clickTimer",void 0),(0,Y.Z)((0,Tt.Z)(h),"$containter",void 0),(0,Y.Z)((0,Tt.Z)(h),"onDrag",function(Q){var tt=h.interactionEvent(Q);tt.type=at[tt.type],h.emit(Ys.Drag,tt)}),(0,Y.Z)((0,Tt.Z)(h),"onHammer",function(Q){Q.srcEvent.stopPropagation();var tt=h.interactionEvent(Q);h.emit(Ys.Hover,tt)}),(0,Y.Z)((0,Tt.Z)(h),"onTouch",function(Q){var tt=Q.touches[0];h.onHover({x:tt.pageX,y:tt.pageY,type:"touch"})}),(0,Y.Z)((0,Tt.Z)(h),"onHover",function(Q){var tt=Q.clientX,ft=Q.clientY,Et=tt,Bt=ft,se=Q.type,xe=h.mapService.getMapContainer();if(xe)if(Ms)Et=Et-xe.left-0,Bt=Bt-xe.top-0;else{var De=xe.getBoundingClientRect(),Xe=De.top,Qe=De.left;Et=Et-Qe-xe.clientLeft,Bt=Bt-Xe-xe.clientTop}var br=h.mapService.containerToLngLat([Et,Bt]);if(se==="click"){if(!Ms&&"ontouchstart"in document.documentElement)return;h.isDoubleTap(Et,Bt,br);return}if(se==="touch"){h.isDoubleTap(Et,Bt,br);return}se!=="click"&&se!=="dblclick"&&h.emit(Ys.Hover,{x:Et,y:Bt,lngLat:br,type:se,target:Q})}),h}return(0,vn.Z)(c,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Ys.Hover)}},{key:"triggerHover",value:function(g){var _=g.x,G=g.y;this.emit(Ys.Hover,{x:_,y:G})}},{key:"triggerSelect",value:function(g){this.emit(Ys.Select,{featureId:g})}},{key:"triggerActive",value:function(g){this.emit(Ys.Active,{featureId:g})}},{key:"handleMiniEvent",value:function(g){this.onHover({clientX:g.touches[0].pageX,clientY:g.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var g=this.mapService.getMapContainer();if(g)if(Ms)Ds.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var _=new($d()).Manager(g);_.add(new($d()).Tap({event:"dblclick",taps:2})),_.add(new($d()).Tap({event:"click"})),_.add(new($d()).Pan({threshold:0,pointers:0})),_.add(new($d()).Press({})),_.on("dblclick click",this.onHammer),_.on("panstart panmove panend pancancel",this.onDrag),g.addEventListener("mousemove",this.onHover),g.addEventListener("mousedown",this.onHover,!0),g.addEventListener("mouseup",this.onHover),g.addEventListener("contextmenu",this.onHover),this.hammertime=_}}},{key:"removeEventListenerOnMap",value:function(){if(Ms)Ds.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var g=this.mapService.getMapContainer();g&&(g.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),g.removeEventListener("mousedown",this.onHover),g.removeEventListener("mouseup",this.onHover),g.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(g){var _=g.type,G=g.pointerType,Q,tt;G==="touch"?(tt=Math.floor(g.pointers[0].clientY),Q=Math.floor(g.pointers[0].clientX)):(tt=Math.floor(g.srcEvent.y),Q=Math.floor(g.srcEvent.x));var ft=this.mapService.getMapContainer();if(ft){var Et=ft.getBoundingClientRect(),Bt=Et.top,se=Et.left;Q-=se,tt-=Bt}var xe=this.mapService.containerToLngLat([Q,tt]);return{x:Q,y:tt,lngLat:xe,type:_,target:g.srcEvent}}},{key:"isDoubleTap",value:function(g,_,G){var Q=this,tt=new Date().getTime(),ft="click";tt-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-g)<10&&Math.abs(this.lastClickXY[1]-_)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),ft="dblclick",this.emit(Ys.Hover,{x:g,y:_,lngLat:G,type:ft})):(this.lastClickTime=tt,this.lastClickXY=[g,_],this.clickTimer=setTimeout(function(){ft="click",Q.emit(Ys.Hover,{x:g,y:_,lngLat:G,type:ft})},400))}}]),c}(Ac()),b=ya(v.prototype,"mapService",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v))||l),Mt=S(92137),oe=S(87757),ge=S.n(oe),Ce=0;function Ie(s){if(Ms)return null;var p=s;if(typeof s=="string"&&(p=document.getElementById(s)),p){var c=document.createElement("div");return c.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,c.id="l7-scene-".concat(Ce++),c.classList.add("l7-scene"),p.appendChild(c),c}return null}function Ge(s){var p,c,h=!0;return s==null||(p=s.target)===null||p===void 0||(c=p.path)===null||c===void 0||c.map(function(g){if(g!=null&&g.classList){var _;g==null||(_=g.classList)===null||_===void 0||_.forEach(function(G){(G==="l7-marker"||G==="l7-popup")&&(h=!1)})}}),h}var Zt;(function(s){s[s.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",s[s.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",s[s.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",s[s.ZERO=0]="ZERO",s[s.ONE=1]="ONE",s[s.SRC_COLOR=768]="SRC_COLOR",s[s.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",s[s.SRC_ALPHA=770]="SRC_ALPHA",s[s.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",s[s.DST_ALPHA=772]="DST_ALPHA",s[s.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",s[s.DST_COLOR=774]="DST_COLOR",s[s.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",s[s.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",s[s.FUNC_ADD=32774]="FUNC_ADD",s[s.BLEND_EQUATION=32777]="BLEND_EQUATION",s[s.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",s[s.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",s[s.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",s[s.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",s[s.MAX_EXT=32776]="MAX_EXT",s[s.MIN_EXT=32775]="MIN_EXT",s[s.BLEND_DST_RGB=32968]="BLEND_DST_RGB",s[s.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",s[s.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",s[s.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",s[s.CONSTANT_COLOR=32769]="CONSTANT_COLOR",s[s.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",s[s.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",s[s.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",s[s.BLEND_COLOR=32773]="BLEND_COLOR",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",s[s.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",s[s.STREAM_DRAW=35040]="STREAM_DRAW",s[s.STATIC_DRAW=35044]="STATIC_DRAW",s[s.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",s[s.BUFFER_SIZE=34660]="BUFFER_SIZE",s[s.BUFFER_USAGE=34661]="BUFFER_USAGE",s[s.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",s[s.FRONT=1028]="FRONT",s[s.BACK=1029]="BACK",s[s.FRONT_AND_BACK=1032]="FRONT_AND_BACK",s[s.CULL_FACE=2884]="CULL_FACE",s[s.BLEND=3042]="BLEND",s[s.DITHER=3024]="DITHER",s[s.STENCIL_TEST=2960]="STENCIL_TEST",s[s.DEPTH_TEST=2929]="DEPTH_TEST",s[s.SCISSOR_TEST=3089]="SCISSOR_TEST",s[s.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",s[s.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",s[s.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",s[s.NO_ERROR=0]="NO_ERROR",s[s.INVALID_ENUM=1280]="INVALID_ENUM",s[s.INVALID_VALUE=1281]="INVALID_VALUE",s[s.INVALID_OPERATION=1282]="INVALID_OPERATION",s[s.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",s[s.CW=2304]="CW",s[s.CCW=2305]="CCW",s[s.LINE_WIDTH=2849]="LINE_WIDTH",s[s.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",s[s.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",s[s.CULL_FACE_MODE=2885]="CULL_FACE_MODE",s[s.FRONT_FACE=2886]="FRONT_FACE",s[s.DEPTH_RANGE=2928]="DEPTH_RANGE",s[s.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",s[s.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",s[s.DEPTH_FUNC=2932]="DEPTH_FUNC",s[s.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",s[s.STENCIL_FUNC=2962]="STENCIL_FUNC",s[s.STENCIL_FAIL=2964]="STENCIL_FAIL",s[s.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",s[s.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",s[s.STENCIL_REF=2967]="STENCIL_REF",s[s.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",s[s.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",s[s.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",s[s.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",s[s.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",s[s.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",s[s.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",s[s.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",s[s.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",s[s.VIEWPORT=2978]="VIEWPORT",s[s.SCISSOR_BOX=3088]="SCISSOR_BOX",s[s.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",s[s.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",s[s.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",s[s.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",s[s.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",s[s.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",s[s.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",s[s.RED_BITS=3410]="RED_BITS",s[s.GREEN_BITS=3411]="GREEN_BITS",s[s.BLUE_BITS=3412]="BLUE_BITS",s[s.ALPHA_BITS=3413]="ALPHA_BITS",s[s.DEPTH_BITS=3414]="DEPTH_BITS",s[s.STENCIL_BITS=3415]="STENCIL_BITS",s[s.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",s[s.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",s[s.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",s[s.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",s[s.SAMPLES=32937]="SAMPLES",s[s.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",s[s.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",s[s.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",s[s.DONT_CARE=4352]="DONT_CARE",s[s.FASTEST=4353]="FASTEST",s[s.NICEST=4354]="NICEST",s[s.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",s[s.BYTE=5120]="BYTE",s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.SHORT=5122]="SHORT",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.INT=5124]="INT",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.FLOAT=5126]="FLOAT",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.ALPHA=6406]="ALPHA",s[s.RGB=6407]="RGB",s[s.RGBA=6408]="RGBA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",s[s.VERTEX_SHADER=35633]="VERTEX_SHADER",s[s.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",s[s.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",s[s.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",s[s.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",s[s.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",s[s.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",s[s.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",s[s.SHADER_TYPE=35663]="SHADER_TYPE",s[s.DELETE_STATUS=35712]="DELETE_STATUS",s[s.LINK_STATUS=35714]="LINK_STATUS",s[s.VALIDATE_STATUS=35715]="VALIDATE_STATUS",s[s.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",s[s.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",s[s.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",s[s.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",s[s.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",s[s.NEVER=512]="NEVER",s[s.LESS=513]="LESS",s[s.EQUAL=514]="EQUAL",s[s.LEQUAL=515]="LEQUAL",s[s.GREATER=516]="GREATER",s[s.NOTEQUAL=517]="NOTEQUAL",s[s.GEQUAL=518]="GEQUAL",s[s.ALWAYS=519]="ALWAYS",s[s.KEEP=7680]="KEEP",s[s.REPLACE=7681]="REPLACE",s[s.INCR=7682]="INCR",s[s.DECR=7683]="DECR",s[s.INVERT=5386]="INVERT",s[s.INCR_WRAP=34055]="INCR_WRAP",s[s.DECR_WRAP=34056]="DECR_WRAP",s[s.VENDOR=7936]="VENDOR",s[s.RENDERER=7937]="RENDERER",s[s.VERSION=7938]="VERSION",s[s.NEAREST=9728]="NEAREST",s[s.LINEAR=9729]="LINEAR",s[s.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",s[s.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",s[s.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",s[s.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",s[s.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",s[s.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",s[s.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",s[s.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE=5890]="TEXTURE",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",s[s.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",s[s.TEXTURE0=33984]="TEXTURE0",s[s.TEXTURE1=33985]="TEXTURE1",s[s.TEXTURE2=33986]="TEXTURE2",s[s.TEXTURE3=33987]="TEXTURE3",s[s.TEXTURE4=33988]="TEXTURE4",s[s.TEXTURE5=33989]="TEXTURE5",s[s.TEXTURE6=33990]="TEXTURE6",s[s.TEXTURE7=33991]="TEXTURE7",s[s.TEXTURE8=33992]="TEXTURE8",s[s.TEXTURE9=33993]="TEXTURE9",s[s.TEXTURE10=33994]="TEXTURE10",s[s.TEXTURE11=33995]="TEXTURE11",s[s.TEXTURE12=33996]="TEXTURE12",s[s.TEXTURE13=33997]="TEXTURE13",s[s.TEXTURE14=33998]="TEXTURE14",s[s.TEXTURE15=33999]="TEXTURE15",s[s.TEXTURE16=34e3]="TEXTURE16",s[s.TEXTURE17=34001]="TEXTURE17",s[s.TEXTURE18=34002]="TEXTURE18",s[s.TEXTURE19=34003]="TEXTURE19",s[s.TEXTURE20=34004]="TEXTURE20",s[s.TEXTURE21=34005]="TEXTURE21",s[s.TEXTURE22=34006]="TEXTURE22",s[s.TEXTURE23=34007]="TEXTURE23",s[s.TEXTURE24=34008]="TEXTURE24",s[s.TEXTURE25=34009]="TEXTURE25",s[s.TEXTURE26=34010]="TEXTURE26",s[s.TEXTURE27=34011]="TEXTURE27",s[s.TEXTURE28=34012]="TEXTURE28",s[s.TEXTURE29=34013]="TEXTURE29",s[s.TEXTURE30=34014]="TEXTURE30",s[s.TEXTURE31=34015]="TEXTURE31",s[s.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",s[s.REPEAT=10497]="REPEAT",s[s.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s[s.FLOAT_VEC2=35664]="FLOAT_VEC2",s[s.FLOAT_VEC3=35665]="FLOAT_VEC3",s[s.FLOAT_VEC4=35666]="FLOAT_VEC4",s[s.INT_VEC2=35667]="INT_VEC2",s[s.INT_VEC3=35668]="INT_VEC3",s[s.INT_VEC4=35669]="INT_VEC4",s[s.BOOL=35670]="BOOL",s[s.BOOL_VEC2=35671]="BOOL_VEC2",s[s.BOOL_VEC3=35672]="BOOL_VEC3",s[s.BOOL_VEC4=35673]="BOOL_VEC4",s[s.FLOAT_MAT2=35674]="FLOAT_MAT2",s[s.FLOAT_MAT3=35675]="FLOAT_MAT3",s[s.FLOAT_MAT4=35676]="FLOAT_MAT4",s[s.SAMPLER_2D=35678]="SAMPLER_2D",s[s.SAMPLER_CUBE=35680]="SAMPLER_CUBE",s[s.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",s[s.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",s[s.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",s[s.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",s[s.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",s[s.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",s[s.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",s[s.COMPILE_STATUS=35713]="COMPILE_STATUS",s[s.LOW_FLOAT=36336]="LOW_FLOAT",s[s.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",s[s.HIGH_FLOAT=36338]="HIGH_FLOAT",s[s.LOW_INT=36339]="LOW_INT",s[s.MEDIUM_INT=36340]="MEDIUM_INT",s[s.HIGH_INT=36341]="HIGH_INT",s[s.FRAMEBUFFER=36160]="FRAMEBUFFER",s[s.RENDERBUFFER=36161]="RENDERBUFFER",s[s.RGBA4=32854]="RGBA4",s[s.RGB5_A1=32855]="RGB5_A1",s[s.RGB565=36194]="RGB565",s[s.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",s[s.STENCIL_INDEX=6401]="STENCIL_INDEX",s[s.STENCIL_INDEX8=36168]="STENCIL_INDEX8",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL",s[s.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",s[s.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",s[s.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",s[s.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",s[s.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",s[s.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",s[s.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",s[s.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",s[s.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",s[s.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",s[s.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",s[s.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",s[s.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",s[s.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",s[s.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",s[s.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",s[s.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",s[s.NONE=0]="NONE",s[s.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",s[s.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",s[s.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",s[s.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",s[s.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",s[s.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",s[s.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",s[s.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",s[s.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",s[s.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",s[s.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",s[s.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",s[s.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",s[s.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(Zt||(Zt={}));var xr,mr,jr,kr,un,En,kn,Gn,oi,Bi,oa;function eo(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function ba(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?eo(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):eo(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var lo=(xr=(0,sa.b2)(),mr=(0,sa.f3)(Vn.IRendererService),jr=(0,sa.f3)(Vn.IGlobalConfigService),kr=(0,sa.f3)(Vn.IInteractionService),un=(0,sa.f3)(Vn.ILayerService),xr(En=(kn=function(){function s(){var p=this;(0,cn.Z)(this,s),Xi(this,"rendererService",Gn,this),Xi(this,"configService",oi,this),Xi(this,"interactionService",Bi,this),Xi(this,"layerService",oa,this),(0,Y.Z)(this,"pickingFBO",void 0),(0,Y.Z)(this,"width",0),(0,Y.Z)(this,"height",0),(0,Y.Z)(this,"alreadyInPicking",!1),(0,Y.Z)(this,"pickBufferScale",1),(0,Y.Z)(this,"lastPickTime",new Date().getTime()),(0,Y.Z)(this,"pickFromPickingFBO",function(c,h){var g,_=h.x,G=h.y,Q=h.lngLat,tt=h.type,ft=h.target,Et=!1,Bt=p.rendererService,se=Bt.getViewportSize,xe=Bt.readPixels,De=Bt.getContainer,Xe=p.getContainerSize(De()),Qe=Xe.width,br=Xe.height;Qe*=Gs,br*=Gs;var Wr=c.getLayerConfig(),sn=Wr.enableHighlight,xn=Wr.enableSelect,Rn=_*Gs,Bn=G*Gs;if(Rn>Qe-1*Gs||Rn<0||Bn>br-1*Gs||Bn<0)return!1;var Qn;if(Qn=xe({x:Math.floor(Rn/p.pickBufferScale),y:Math.floor((br-(G+1)*Gs)/p.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:p.pickingFBO}),Qn[0]!==0||Qn[1]!==0||Qn[2]!==0){var di=gu(Qn),ta=c.getSource().getFeatureById(di);di!==c.getCurrentPickId()&&tt==="mousemove"&&(tt="mouseenter");var Ca={x:_,y:G,type:tt,lngLat:Q,featureId:di,feature:ta,target:ft};ta&&(Et=!0,c.setCurrentPickId(di),p.triggerHoverOnLayer(c,Ca))}else{var Fi={x:_,y:G,lngLat:Q,type:c.getCurrentPickId()!==null&&tt==="mousemove"?"mouseout":"un"+tt,featureId:null,target:ft,feature:null};p.triggerHoverOnLayer(c,ba(ba({},Fi),{},{type:"unpick"})),p.triggerHoverOnLayer(c,Fi),c.setCurrentPickId(null)}if(sn&&p.highlightPickedFeature(c,Qn),xn&&tt==="click"&&((g=Qn)===null||g===void 0?void 0:g.toString())!==[0,0,0,0].toString()){var ja=gu(Qn);c.getCurrentSelectedId()===null||ja!==c.getCurrentSelectedId()?(p.selectFeature(c,Qn),c.setCurrentSelectedId(ja)):(p.selectFeature(c,new Uint8Array([0,0,0,0])),c.setCurrentSelectedId(null))}return Et})}return(0,vn.Z)(s,[{key:"init",value:function(c){var h=this.rendererService,g=h.createTexture2D,_=h.createFramebuffer,G=h.getViewportSize,Q=h.getContainer,tt=this.getContainerSize(Q()),ft=tt.width,Et=tt.height;ft*=Gs,Et*=Gs,this.pickBufferScale=this.configService.getSceneConfig(c).pickBufferScale||1,this.pickingFBO=_({color:g({width:Math.round(ft/this.pickBufferScale),height:Math.round(Et/this.pickBufferScale),wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})}),this.interactionService.on(Ys.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var p=(0,Mt.Z)(ge().mark(function h(g,_,G){var Q=this,tt,ft,Et,Bt;return ge().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:tt=this.rendererService,ft=tt.useFramebuffer,Et=tt.clear,Bt=tt.getContainer,this.resizePickingFBO(),ft(this.pickingFBO,function(){Et({framebuffer:Q.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),g.hooks.beforePickingEncode.call(),g.renderModels(),g.hooks.afterPickingEncode.call();var De=Q.pickBox(g,_);G(De)});case 3:case"end":return xe.stop()}},h,this)}));function c(h,g,_){return p.apply(this,arguments)}return c}()},{key:"pickBox",value:function(c,h){var g=this,_=h.map(function(Fi){var ja=Fi<0?0:Fi;return Math.floor(ja*Gs/g.pickBufferScale)}),G=(0,ga.Z)(_,4),Q=G[0],tt=G[1],ft=G[2],Et=G[3],Bt=this.rendererService,se=Bt.getViewportSize,xe=Bt.readPixels,De=Bt.getContainer,Xe=this.getContainerSize(De()),Qe=Xe.width,br=Xe.height;if(Qe*=Gs,br*=Gs,Q>(Qe-1)*Gs/this.pickBufferScale||ft<0||tt>(br-1)*Gs/this.pickBufferScale||Et<0)return[];var Wr,sn=Math.min(Qe/this.pickBufferScale,ft)-Q,xn=Math.min(br/this.pickBufferScale,Et)-tt;Wr=xe({x:Q,y:Math.floor(br/this.pickBufferScale-(Et+1)),width:sn,height:xn,data:new Uint8Array(sn*xn*4),framebuffer:this.pickingFBO});for(var Rn=[],Bn={},Qn=0;Qn<Wr.length/4;Qn=Qn+1){var di=Wr.slice(Qn*4,Qn*4+4),ta=gu(di);if(ta!==-1&&!Bn[ta]){var Ca=c.getSource().getFeatureById(ta);Rn.push(ba(ba({},Ca),{},{pickedFeatureIdx:ta})),Bn[ta]=!0}}return Rn}},{key:"getContainerSize",value:function(c){return c.getContext?{width:c.width/Gs,height:c.height/Gs}:c.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var p=(0,Mt.Z)(ge().mark(function h(g){var _;return ge().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.layerService.isMapDragging()||!this.layerService.getShaderPickStat())){Q.next=2;break}return Q.abrupt("return");case 2:if(this.alreadyInPicking=!0,_=new Date().getTime(),!(_-this.lastPickTime>10||g.type==="contextmenu")){Q.next=7;break}return Q.next=7,this.pickingLayers(g);case 7:this.lastPickTime=_,this.layerService.renderLayers(),this.alreadyInPicking=!1;case 10:case"end":return Q.stop()}},h,this)}));function c(h){return p.apply(this,arguments)}return c}()},{key:"resizePickingFBO",value:function(){var c=this.rendererService.getContainer,h=this.getContainerSize(c()),g=h.width,_=h.height;g*=Gs,_*=Gs,(this.width!==g||this.height!==_)&&(this.pickingFBO.resize({width:Math.round(g/this.pickBufferScale),height:Math.round(_/this.pickBufferScale)}),this.width=g,this.height=_)}},{key:"pickingLayers",value:function(){var p=(0,Mt.Z)(ge().mark(function h(g){var _=this,G,Q,tt,ft,Et;return ge().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:G=this.rendererService,Q=G.getViewportSize,tt=G.useFramebuffer,ft=G.clear,Et=G.getContainer,this.resizePickingFBO(),tt(this.pickingFBO,function(){var xe=_.layerService.getRenderList();xe.filter(function(De){return De.needPick(g.type)}).reverse().some(function(De){ft({framebuffer:_.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),De.hooks.beforePickingEncode.call(),De.renderModels(!0),De.hooks.afterPickingEncode.call();var Xe=_.pickFromPickingFBO(De,g);return Xe&&!De.getLayerConfig().enablePropagation})});case 3:case"end":return se.stop()}},h,this)}));function c(h){return p.apply(this,arguments)}return c}()},{key:"triggerHoverOnLayer",value:function(c,h){Ge(h)&&c.emit(h.type,h)}},{key:"highlightPickedFeature",value:function(c,h){var g=(0,ga.Z)(h,3),_=g[0],G=g[1],Q=g[2];c.hooks.beforeHighlight.call([_,G,Q])}},{key:"selectFeature",value:function(c,h){var g=(0,ga.Z)(h,3),_=g[0],G=g[1],Q=g[2];c.hooks.beforeSelect.call([_,G,Q])}}]),s}(),Gn=ya(kn.prototype,"rendererService",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oi=ya(kn.prototype,"configService",[jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bi=ya(kn.prototype,"interactionService",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oa=ya(kn.prototype,"layerService",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn))||En),Ea=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,cn.Z)(this,s),(0,Y.Z)(this,"autoStart",void 0),(0,Y.Z)(this,"startTime",0),(0,Y.Z)(this,"oldTime",0),(0,Y.Z)(this,"running",!1),(0,Y.Z)(this,"elapsedTime",0),this.autoStart=p}return(0,vn.Z)(s,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var c=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var h=(typeof performance=="undefined"?Date:performance).now();c=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=c}return c}}]),s}(),es,Ao,Za,qo,jo,ys,co,Fs,Cu,el=(es=(0,sa.b2)(),Ao=(0,sa.f3)(Vn.IRendererService),Za=(0,sa.f3)(Vn.IMapService),qo=(0,sa.f3)(Vn.IGlobalConfigService),es(jo=(ys=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"clock",new Ea),(0,Y.Z)(this,"alreadyInRendering",!1),(0,Y.Z)(this,"layers",[]),(0,Y.Z)(this,"layerList",[]),(0,Y.Z)(this,"layerRenderID",void 0),(0,Y.Z)(this,"sceneInited",!1),(0,Y.Z)(this,"animateInstanceCount",0),(0,Y.Z)(this,"shaderPicking",!0),(0,Y.Z)(this,"enableRender",!0),Xi(this,"renderService",co,this),Xi(this,"mapService",Fs,this),Xi(this,"configService",Cu,this)}return(0,vn.Z)(s,[{key:"add",value:function(c){this.sceneInited&&c.init(),this.layers.push(c),this.updateLayerRenderList()}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(c){c.inited||c.init()}),this.updateLayerRenderList()}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(c){return this.layers.find(function(h){return h.id===c})}},{key:"getLayerByName",value:function(c){return this.layers.find(function(h){return h.name===c})}},{key:"cleanRemove",value:function(c,h){if(h){var g=h.layerChildren.indexOf(c);g>-1&&h.layerChildren.splice(g,1)}else{var _=this.layers.indexOf(c);_>-1&&this.layers.splice(_,1)}this.updateLayerRenderList(),this.renderLayers()}},{key:"remove",value:function(c,h){if(h){var g=h.layerChildren.indexOf(c);g>-1&&h.layerChildren.splice(g,1)}else{var _=this.layers.indexOf(c);_>-1&&this.layers.splice(_,1)}this.updateLayerRenderList(),c.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"setEnableRender",value:function(c){this.enableRender=c}},{key:"renderLayers",value:function(){this.alreadyInRendering||!this.enableRender||(this.alreadyInRendering=!0,this.clear(),this.layerList.forEach(function(c){c.hooks.beforeRenderData.call(),c.hooks.beforeRender.call(),c.render(),c.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateLayerRenderList",value:function(){var c=this;this.layerList=[],this.layers.filter(function(h){return h.inited}).filter(function(h){return h.isVisible()}).forEach(function(h){c.layerList.push(h),h.layerChildren.filter(function(g){return g.inited}).filter(function(g){return g.isVisible()}).forEach(function(g){c.layerList.push(g)})}),this.layerList.sort(function(h,g){return h.zIndex-g.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(c){c.layerChildren&&(c.layerChildren.forEach(function(h){return h.destroy()}),c.layerChildren=[]),c.destroy()}),this.layers=[],this.layerList=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"isMapDragging",value:function(){return this.mapService.dragging}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=Ds.requestAnimationFrame(this.runRender.bind(this))}},{key:"clear",value:function(){var c=as(this.mapService.bgColor);this.renderService.clear({color:c,depth:1,stencil:0,framebuffer:null})}},{key:"stopRender",value:function(){Ds.cancelAnimationFrame(this.layerRenderID)}}]),s}(),co=ya(ys.prototype,"renderService",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fs=ya(ys.prototype,"mapService",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu=ya(ys.prototype,"configService",[qo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ys))||jo),_u=S(81253),Ru=S(14293),bu=S.n(Ru),Bl=function(){function s(p){var c=this;(0,cn.Z)(this,s),(0,Y.Z)(this,"name",void 0),(0,Y.Z)(this,"type",void 0),(0,Y.Z)(this,"scale",void 0),(0,Y.Z)(this,"descriptor",void 0),(0,Y.Z)(this,"featureBufferLayout",[]),(0,Y.Z)(this,"needRescale",!1),(0,Y.Z)(this,"needRemapping",!1),(0,Y.Z)(this,"needRegenerateVertices",!1),(0,Y.Z)(this,"featureRange",{startIndex:0,endIndex:Infinity}),(0,Y.Z)(this,"vertexAttribute",void 0),(0,Y.Z)(this,"defaultCallback",function(h){if(h.length===0){var g;return((g=c.scale)===null||g===void 0?void 0:g.defaultValues)||[]}return h.map(function(_,G){var Q,tt=(Q=c.scale)===null||Q===void 0?void 0:Q.scalers[G].func,ft=tt(_);return ft})}),this.setProps(p)}return(0,vn.Z)(s,[{key:"setProps",value:function(c){Object.assign(this,c)}},{key:"mapping",value:function(c){var h;if((h=this.scale)!==null&&h!==void 0&&h.callback){var g,_=(g=this.scale)===null||g===void 0?void 0:g.callback.apply(g,(0,ot.Z)(c));if(!bu()(_))return[_]}return this.defaultCallback(c)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),s}(),Il=["buffer","update","name"],Fl,Nl,lc,rl,Ol,us;function ru(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Ws(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ru(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ru(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Os(s){return new Promise(function(p){return setTimeout(p,s)})}var Lc=(Fl={},(0,Y.Z)(Fl,Zt.FLOAT,4),(0,Y.Z)(Fl,Zt.UNSIGNED_BYTE,1),(0,Y.Z)(Fl,Zt.UNSIGNED_SHORT,2),Fl),cc=(Nl=(0,sa.b2)(),lc=(0,sa.f3)(Vn.IRendererService),Nl(rl=(Ol=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"attributesAndIndices",void 0),Xi(this,"rendererService",us,this),(0,Y.Z)(this,"attributes",[]),(0,Y.Z)(this,"triangulation",void 0),(0,Y.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,vn.Z)(s,[{key:"registerStyleAttribute",value:function(c){var h=this.getLayerStyleAttribute(c.name||"");return h?h.setProps(c):(h=new Bl(c),this.attributes.push(h)),h}},{key:"updateStyleAttribute",value:function(c,h,g){var _=this.getLayerStyleAttribute(c);_||(_=this.registerStyleAttribute(Ws(Ws({},h),{},{name:c})));var G=h.scale;G&&_&&(_.scale=G,_.needRescale=!0,_.needRemapping=!0,_.needRegenerateVertices=!0,g&&g.featureRange&&(_.featureRange=g.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(c){return this.attributes.find(function(h){return h.name===c})}},{key:"getLayerAttributeScale",value:function(c){var h,g=this.getLayerStyleAttribute(c),_=g==null||(h=g.scale)===null||h===void 0?void 0:h.scalers;return _&&_[0]?_[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(c,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=arguments.length>3?arguments[3]:void 0,G=this.attributes.find(function(xn){return xn.name===c});if(G&&G.descriptor){var Q=G.descriptor,tt=Q.update,ft=Q.buffer,Et=Q.size,Bt=Et===void 0?0:Et,se=Lc[ft.type||Zt.FLOAT];if(tt){var xe=this.featureLayout,De=xe.elements,Xe=xe.sizePerElement,Qe=De.slice(g,_);if(!Qe.length)return;var br=Qe[0].offset,Wr=br*Bt*se,sn=Qe.map(function(xn,Rn){for(var Bn=xn.featureIdx,Qn=xn.vertices,di=xn.normals,ta=Qn.length/Xe,Ca=[],Fi=0;Fi<ta;Fi++){var ja=di?di.slice(Fi*3,Fi*3+3):[];Ca.push.apply(Ca,(0,ot.Z)(tt(h[Bn],Bn,Qn.slice(Fi*Xe,Fi*Xe+Xe),Rn,ja)))}return Ca}).reduce(function(xn,Rn){return xn.push.apply(xn,(0,ot.Z)(Rn)),xn},[]);G.vertexAttribute.updateBuffer({data:sn,offset:Wr})}}}},{key:"createAttributesAndIndices",value:function(c,h,g){var _=this;this.featureLayout={sizePerElement:0,elements:[]},h&&(this.triangulation=h);var G=this.attributes.map(function(Wr){return Wr.resetDescriptor(),Wr.descriptor}),Q=0,tt=[],ft=[],Et=[],Bt=3;c.forEach(function(Wr,sn){var xn=_.triangulation(Wr,g),Rn=xn.indices,Bn=xn.vertices,Qn=xn.normals,di=xn.size;Rn.forEach(function(ja){ft.push(ja+Q)}),Bt=di;var ta=Bn.length/di;_.featureLayout.sizePerElement=Bt,_.featureLayout.elements.push({featureIdx:sn,vertices:Bn,normals:Qn,offset:Q}),Q+=ta;for(var Ca=function(ro){var Bo=(Qn==null?void 0:Qn.slice(ro*3,ro*3+3))||[],Uu=Bn.slice(ro*di,ro*di+di);G.forEach(function(ic,xf){if(ic&&ic.update){var Tp;(Tp=ic.buffer.data).push.apply(Tp,(0,ot.Z)(ic.update(Wr,sn,Uu,ro,Bo)))}})},Fi=0;Fi<ta;Fi++)Ca(Fi)});var se=this.rendererService,xe=se.createAttribute,De=se.createBuffer,Xe=se.createElements,Qe={};G.forEach(function(Wr,sn){if(Wr){var xn=Wr.buffer,Rn=Wr.update,Bn=Wr.name,Qn=(0,_u.Z)(Wr,Il),di=xe(Ws({buffer:De(xn)},Qn));Qe[Wr.name||""]=di,_.attributes[sn].vertexAttribute=di}});var br=Xe({data:ft,type:Zt.UNSIGNED_INT,count:ft.length});return this.attributesAndIndices={attributes:Qe,elements:br},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var c;this.attributes.forEach(function(h){h.vertexAttribute&&h.vertexAttribute.destroy()}),(c=this.attributesAndIndices)===null||c===void 0||c.elements.destroy(),this.attributes=[]}}]),s}(),us=ya(Ol.prototype,"rendererService",[lc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ol))||rl),Su=S(67709),xl=S.n(Su),rc,Ls,Nh,$c,zh,Gu,Gh,Df,Uh,hh,jp,Vh,Bf,Ff,Qd,cd,Ig,nc,xp,kv,qd,_p,Jd,Og,Lg,Rv,Dv,kg,Bv,Fv,Nv,fd,tv;function x0(s){var p=ev();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function ev(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var zv=(rc=(0,sa.b2)(),Ls=(0,sa.f3)(Vn.SceneID),Nh=(0,sa.f3)(Vn.IIconService),$c=(0,sa.f3)(Vn.IFontService),zh=(0,sa.f3)(Vn.IControlService),Gu=(0,sa.f3)(Vn.IGlobalConfigService),Gh=(0,sa.f3)(Vn.IMapService),Df=(0,sa.f3)(Vn.ICoordinateSystemService),Uh=(0,sa.f3)(Vn.IRendererService),hh=(0,sa.f3)(Vn.ILayerService),jp=(0,sa.f3)(Vn.ICameraService),Vh=(0,sa.f3)(Vn.IInteractionService),Bf=(0,sa.f3)(Vn.IPickingService),Ff=(0,sa.f3)(Vn.IShaderModuleService),Qd=(0,sa.f3)(Vn.IMarkerService),cd=(0,sa.f3)(Vn.IPopupService),rc(Ig=(nc=function(s){(0,vi.Z)(c,s);var p=x0(c);function c(){var h;return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"destroyed",!1),(0,Y.Z)((0,Tt.Z)(h),"loaded",!1),(0,Y.Z)((0,Tt.Z)(h),"loadFont",!1),(0,Y.Z)((0,Tt.Z)(h),"fontFamily",""),Xi((0,Tt.Z)(h),"id",xp,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"iconService",kv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"fontService",qd,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"controlService",_p,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"configService",Jd,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"map",Og,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"coordinateSystemService",Lg,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"rendererService",Rv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"layerService",Dv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"cameraService",kg,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"interactionService",Bv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"pickingService",Fv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"shaderModuleService",Nv,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"markerService",fd,(0,Tt.Z)(h)),Xi((0,Tt.Z)(h),"popupService",tv,(0,Tt.Z)(h)),(0,Y.Z)((0,Tt.Z)(h),"inited",!1),(0,Y.Z)((0,Tt.Z)(h),"initPromise",void 0),(0,Y.Z)((0,Tt.Z)(h),"rendering",!1),(0,Y.Z)((0,Tt.Z)(h),"$container",void 0),(0,Y.Z)((0,Tt.Z)(h),"canvas",void 0),(0,Y.Z)((0,Tt.Z)(h),"markerContainer",void 0),(0,Y.Z)((0,Tt.Z)(h),"hooks",void 0),(0,Y.Z)((0,Tt.Z)(h),"handleWindowResized",function(){h.emit("resize"),h.$container&&(h.initContainer(),Ma(),h.coordinateSystemService.needRefresh=!0,h.render())}),(0,Y.Z)((0,Tt.Z)(h),"handleMapCameraChanged",function(g){h.cameraService.update(g),h.render()}),h.hooks={init:new du},h}return(0,vn.Z)(c,[{key:"init",value:function(g){var _=this;this.configService.setSceneConfig(this.id,g),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Mt.Z)(ge().mark(function G(){return ge().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,new Promise(function(ft){_.map.onCameraChanged(function(Et){_.cameraService.init(),_.cameraService.update(Et),_.map.version!=="GAODE2.x"&&ft()}),_.map.version!=="GAODE2.x"?_.map.init():ft()});case 2:if(!(_.map.version==="GAODE2.x"&&_.map.initViewPort)){tt.next=6;break}return tt.next=5,_.map.init();case 5:_.map.initViewPort();case 6:_.map.onCameraChanged(_.handleMapCameraChanged),_.map.addMarkerContainer(),_.markerService.addMarkers(),_.markerService.addMarkerLayers(),_.popupService.initPopup(),_.interactionService.init(),_.interactionService.on(Ys.Drag,_.addSceneEvent.bind(_));case 13:case"end":return tt.stop()}},G)}))),this.hooks.init.tapPromise("initRenderer",(0,Mt.Z)(ge().mark(function G(){var Q,tt;return ge().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(Q=Ie(_.configService.getSceneConfig(_.id).id||""),_.$container=Q,!Q){Et.next=11;break}return _.canvas=lu("canvas","",Q),_.setCanvas(),Et.next=7,_.rendererService.init(_.canvas,_.configService.getSceneConfig(_.id));case 7:xl()(_.$container,_.handleWindowResized),Ds.matchMedia&&((tt=Ds.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||tt===void 0||tt.addListener(_.handleWindowResized)),Et.next=12;break;case 11:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:_.pickingService.init(_.id);case 13:case"end":return Et.stop()}},G)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"initMiniScene",value:function(g){var _=this;this.configService.setSceneConfig(this.id,g),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Mt.Z)(ge().mark(function G(){return ge().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,new Promise(function(ft){_.map.onCameraChanged(function(Et){_.cameraService.init(),_.cameraService.update(Et),_.map.version!=="GAODE2.x"&&ft()}),_.map.initMiniMap()});case 2:_.map.onCameraChanged(_.handleMapCameraChanged),_.interactionService.init(),_.interactionService.on(Ys.Drag,_.addSceneEvent.bind(_));case 5:case"end":return tt.stop()}},G)}))),this.hooks.init.tapPromise("initRenderer",(0,Mt.Z)(ge().mark(function G(){var Q;return ge().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(Q=g.canvas,_.$container=Q||null,!_.$container){ft.next=7;break}return ft.next=5,_.rendererService.init(g.canvas,_.configService.getSceneConfig(_.id));case 5:ft.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:_.pickingService.init(_.id);case 9:case"end":return ft.stop()}},G)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(g){this.layerService.sceneService=this,this.layerService.add(g),this.render()}},{key:"render",value:function(){var h=(0,Mt.Z)(ge().mark(function _(){return ge().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!(this.rendering||this.destroyed)){Q.next=2;break}return Q.abrupt("return");case 2:if(this.rendering=!0,this.inited){Q.next=15;break}return Q.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){Q.next=10;break}return Q.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 15:this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this.rendering=!1;case 18:case"end":return Q.stop()}},_,this)}));function g(){return h.apply(this,arguments)}return g}()},{key:"addFontFace",value:function(g,_){this.fontFamily=g;var G=document.createElement("style");G.type="text/css",G.innerText=`
        @font-face{
            font-family: '`.concat(g,`';
            src: url('`).concat(_,`') format('woff2'),
            url('`).concat(_,`') format('woff'),
            url('`).concat(_,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(G),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(g){var _,G=(_=this.$container)===null||_===void 0?void 0:_.getElementsByTagName("canvas")[0];this.render();var Q=g==="jpg"?G==null?void 0:G.toDataURL("image/jpeg"):G==null?void 0:G.toDataURL("image/png");return Q}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var g=this.$container.parentElement;g!==null&&(this.markerContainer=lu("div","l7-marker-container",g))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var g=this,_,G;if(!this.inited){this.destroyed=!0;return}if(this.emit("destroy"),this.layerService.destroy(),setTimeout(function(){g.rendererService.destroy()}),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),(_=this.$container)===null||_===void 0||(G=_.parentNode)===null||G===void 0||G.removeChild(this.$container),this.removeAllListeners(),this.inited=!1,(0,Su.unbind)(this.$container,this.handleWindowResized),Ds.matchMedia){var Q;(Q=Ds.matchMedia("screen and (min-resolution: 2dppx)"))===null||Q===void 0||Q.removeListener(this.handleWindowResized)}}},{key:"initContainer",value:function(){var g,_,G=Gs,Q=((g=this.$container)===null||g===void 0?void 0:g.clientWidth)||400,tt=((_=this.$container)===null||_===void 0?void 0:_.clientHeight)||300,ft=this.canvas;ft&&(ft.width=Q*G,ft.height=tt*G),this.rendererService.viewport({x:0,y:0,width:G*Q,height:G*tt})}},{key:"setCanvas",value:function(){var g,_,G=Gs,Q=((g=this.$container)===null||g===void 0?void 0:g.clientWidth)||400,tt=((_=this.$container)===null||_===void 0?void 0:_.clientHeight)||300,ft=this.canvas;ft.width=Q*G,ft.height=tt*G,ft.style.width="100%",ft.style.height="100%"}},{key:"addSceneEvent",value:function(g){this.emit(g.type,g)}}]),c}(cu.EventEmitter),xp=ya(nc.prototype,"id",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kv=ya(nc.prototype,"iconService",[Nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qd=ya(nc.prototype,"fontService",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_p=ya(nc.prototype,"controlService",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=ya(nc.prototype,"configService",[Gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Og=ya(nc.prototype,"map",[Gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lg=ya(nc.prototype,"coordinateSystemService",[Df],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rv=ya(nc.prototype,"rendererService",[Uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dv=ya(nc.prototype,"layerService",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kg=ya(nc.prototype,"cameraService",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bv=ya(nc.prototype,"interactionService",[Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fv=ya(nc.prototype,"pickingService",[Bf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nv=ya(nc.prototype,"shaderModuleService",[Ff],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fd=ya(nc.prototype,"markerService",[Qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tv=ya(nc.prototype,"popupService",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nc))||Ig),rv=S(44908),bp=S.n(rv);function ph(s){var p=0;switch(s){case"vec2":case"ivec2":p=2;break;case"vec3":case"ivec3":p=3;break;case"vec4":case"ivec4":case"mat2":p=4;break;case"mat3":p=9;break;case"mat4":p=16;break;default:}return p}var lm=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Rg(s){var p={};return s=s.replace(lm,function(c,h,g){var _=g.split(":"),G=_[0].trim(),Q="";switch(_.length>1&&(Q=_[1].trim()),h){case"bool":Q=Q==="true";break;case"float":case"int":Q=Number(Q);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Q?Q=Q.replace("[","").replace("]","").split(",").reduce(function(tt,ft){return tt.push(Number(ft.trim())),tt},[]):Q=new Array(ph(h)).fill(0);break;default:}return p[G]=Q,"uniform ".concat(h," ").concat(G,`;
`)}),{content:s,uniforms:p}}var _0,cm;function b0(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Dg(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?b0(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):b0(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var Gv="#define PI 3.14159265359",Xu=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,Zh=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,F1=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,hd=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float selected = v_PickingResult.a;

  if (selected == SELECT) {
    // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
    vec4 selectColor = u_SelectColor * COLOR_SCALE;
    return selectColor;
  } else if (selected == HIGHLIGHT) {
    // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

// TODO: \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
vec4 filterColorAnimate(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, color.a));
  }
}

vec4 filterColorWithLight(vec4 color, float lightWeight) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, lightWeight));
  }
}

`,S0=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage
  if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
    // \u9009\u4E2D\u6001
    v_PickingResult.a = SELECT;
  } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
    // \u9AD8\u4EAE\u6001
    v_PickingResult.a = HIGHLIGHT;
  } else {
    v_PickingResult.a = NORMAL;
  }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,fm=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,w0=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom));
  }
  return pixel * 2.0;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,Hh=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,E0=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,Uv=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,C0=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,A0=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,hm=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,xy=/precision\s+(high|low|medium)p\s+float/,Bg=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,_y=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,pm=(_0=(0,sa.b2)(),_0(cm=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"moduleCache",{}),(0,Y.Z)(this,"rawContentCache",{})}return(0,vn.Z)(s,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Gv,fs:Gv}),this.registerModule("decode",{vs:Xu,fs:""}),this.registerModule("projection",{vs:w0,fs:""}),this.registerModule("project",{vs:fm,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Hh}),this.registerModule("lighting",{vs:F1,fs:""}),this.registerModule("light",{vs:Zh,fs:""}),this.registerModule("picking",{vs:S0,fs:hd}),this.registerModule("styleMapping",{vs:E0,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:hm,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:Uv,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:C0,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:A0,fs:""})}},{key:"registerModule",value:function(c,h){if(!this.rawContentCache[c]){var g=h.vs,_=h.fs,G=h.uniforms,Q=Rg(g),tt=Q.content,ft=Q.uniforms,Et=Rg(_),Bt=Et.content,se=Et.uniforms;this.rawContentCache[c]={fs:Bt,uniforms:Dg(Dg(Dg({},ft),se),G),vs:tt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(c){var h=this;if(this.moduleCache[c])return this.moduleCache[c];var g=this.rawContentCache[c].vs,_=this.rawContentCache[c].fs,G=this.processModule(g,[],"vs"),Q=G.content,tt=G.includeList,ft=this.processModule(_,[],"fs"),Et=ft.content,Bt=ft.includeList,se=Et,xe=bp()(tt.concat(Bt).concat(c)).reduce(function(De,Xe){return Dg(Dg({},De),h.rawContentCache[Xe].uniforms)},{});return xy.test(Et)||(se=Bg+Et),this.moduleCache[c]={fs:se.trim(),uniforms:xe,vs:Q.trim()},this.moduleCache[c]}},{key:"processModule",value:function(c,h,g){var _=this,G=c.replace(_y,function(Q,tt){var ft=tt.split(" "),Et=ft[0].replace(/"/g,"");if(h.indexOf(Et)>-1)return"";var Bt=_.rawContentCache[Et][g];h.push(Et);var se=_.processModule(Bt,h,g),xe=se.content;return xe});return{content:G,includeList:h}}}]),s}())||cm);function by(s,p){for(;!Object.prototype.hasOwnProperty.call(s,p)&&(s=(0,An.Z)(s),s!==null););return s}function jh(){return typeof Reflect!="undefined"&&Reflect.get?jh=Reflect.get:jh=function(p,c,h){var g=by(p,c);if(!!g){var _=Object.getOwnPropertyDescriptor(g,c);return _.get?_.get.call(arguments.length<3?p:h):_.value}},jh.apply(this,arguments)}var Xp;(function(s){s.Normal="normal",s.PostProcessing="post-processing"})(Xp||(Xp={}));var kc,Fg,Ng=(kc=(0,sa.b2)(),kc(Fg=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"shaderModuleService",void 0),(0,Y.Z)(this,"rendererService",void 0),(0,Y.Z)(this,"cameraService",void 0),(0,Y.Z)(this,"mapService",void 0),(0,Y.Z)(this,"interactionService",void 0),(0,Y.Z)(this,"layerService",void 0),(0,Y.Z)(this,"config",void 0)}return(0,vn.Z)(s,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Xp.Normal}},{key:"init",value:function(c,h){this.config=h,this.rendererService=c.getContainer().get(Vn.IRendererService),this.cameraService=c.getContainer().get(Vn.ICameraService),this.mapService=c.getContainer().get(Vn.IMapService),this.interactionService=c.getContainer().get(Vn.IInteractionService),this.layerService=c.getContainer().get(Vn.ILayerService),this.shaderModuleService=c.getContainer().get(Vn.IShaderModuleService)}},{key:"render",value:function(c){}}]),s}())||Fg),Xh,dm;function Sy(s){var p=nv();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function nv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Vv=(Xh=(0,sa.b2)(),Xh(dm=function(s){(0,vi.Z)(c,s);var p=Sy(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(g,_){jh((0,An.Z)(c.prototype),"init",this).call(this,g,_)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),c}(Ng))||dm),iv,av,ov,M0,vm;function wy(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Ey(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function Ey(s,p){if(!!s){if(typeof s=="string")return zg(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return zg(s,p)}}function zg(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var T0=(iv=(0,sa.b2)(),av=(0,sa.f3)(Vn.IPostProcessor),iv(ov=(M0=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"passes",[]),Xi(this,"postProcessor",vm,this),(0,Y.Z)(this,"layer",void 0),(0,Y.Z)(this,"renderFlag",void 0),(0,Y.Z)(this,"width",0),(0,Y.Z)(this,"height",0)}return(0,vn.Z)(s,[{key:"setLayer",value:function(c){this.layer=c}},{key:"setRenderFlag",value:function(c){this.renderFlag=c}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var p=(0,Mt.Z)(ge().mark(function h(){var g,_,G;return ge().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:g=wy(this.passes),tt.prev=1,g.s();case 3:if((_=g.n()).done){tt.next=9;break}return G=_.value,tt.next=7,G.render(this.layer);case 7:tt.next=3;break;case 9:tt.next=14;break;case 11:tt.prev=11,tt.t0=tt.catch(1),g.e(tt.t0);case 14:return tt.prev=14,g.f(),tt.finish(14);case 17:this.layer.renderModels();case 18:case"end":return tt.stop()}},h,this,[[1,11,14,17]])}));function c(){return p.apply(this,arguments)}return c}()},{key:"resize",value:function(c,h){(this.width!==c||this.height!==h)&&(this.width=c,this.height=h)}},{key:"add",value:function(c,h){c.getType()===Xp.PostProcessing?this.postProcessor.add(c,this.layer,h):(c.init(this.layer,h),this.passes.push(c))}},{key:"insert",value:function(c,h,g){c.init(this.layer,h),this.passes.splice(g,0,c)}},{key:"destroy",value:function(){this.passes.length=0}}]),s}(),vm=ya(M0.prototype,"postProcessor",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M0))||ov),Sp,P0;function I0(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function O0(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?I0(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):I0(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Cy(s){var p=gm();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function gm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Yp=(Sp=(0,sa.b2)(),Sp(P0=function(s){(0,vi.Z)(c,s);var p=Cy(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"pickingFBO",void 0),(0,Y.Z)((0,Tt.Z)(h),"layer",void 0),(0,Y.Z)((0,Tt.Z)(h),"width",0),(0,Y.Z)((0,Tt.Z)(h),"height",0),(0,Y.Z)((0,Tt.Z)(h),"alreadyInRendering",!1),(0,Y.Z)((0,Tt.Z)(h),"pickFromPickingFBO",function(Q){var tt=Q.x,ft=Q.y,Et=Q.lngLat,Bt=Q.type;if(!(!h.layer.isVisible()||!h.layer.needPick(Bt))){var se=h.rendererService,xe=se.getViewportSize,De=se.readPixels,Xe=se.useFramebuffer,Qe=xe(),br=Qe.width,Wr=Qe.height,sn=h.layer.getLayerConfig(),xn=sn.enableHighlight,Rn=sn.enableSelect,Bn=tt*Gs,Qn=ft*Gs;if(!(Bn>br||Bn<0||Qn>Wr||Qn<0)){var di;Xe(h.pickingFBO,function(){var ta;if(di=De({x:Math.round(Bn),y:Math.round(Wr-(ft+1)*Gs),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:h.pickingFBO}),di[0]!==0||di[1]!==0||di[2]!==0){var Ca=gu(di),Fi=h.layer.getSource().getFeatureById(Ca),ja={x:tt,y:ft,type:Bt,lngLat:Et,featureId:Ca,feature:Fi};Fi&&(h.layer.setCurrentPickId(Ca),h.triggerHoverOnLayer(ja))}else{var ro={x:tt,y:ft,lngLat:Et,type:h.layer.getCurrentPickId()===null?"un"+Bt:"mouseout",featureId:null,feature:null};h.triggerHoverOnLayer(O0(O0({},ro),{},{type:"unpick"})),h.triggerHoverOnLayer(ro),h.layer.setCurrentPickId(null)}xn&&h.highlightPickedFeature(di),Rn&&Bt==="click"&&((ta=di)===null||ta===void 0?void 0:ta.toString())!==[0,0,0,0].toString()&&h.selectFeature(di)})}}}),h}return(0,vn.Z)(c,[{key:"getType",value:function(){return Xp.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(g,_){jh((0,An.Z)(c.prototype),"init",this).call(this,g,_),this.layer=g;var G=this.rendererService,Q=G.createTexture2D,tt=G.createFramebuffer,ft=G.getViewportSize,Et=ft(),Bt=Et.width,se=Et.height;this.pickingFBO=tt({color:Q({width:Bt,height:se,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})}),this.interactionService.on(Ys.Hover,this.pickFromPickingFBO),this.interactionService.on(Ys.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Ys.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(g){var _=this;if(!this.alreadyInRendering){var G=this.rendererService,Q=G.getViewportSize,tt=G.useFramebuffer,ft=G.clear,Et=Q(),Bt=Et.width,se=Et.height;this.alreadyInRendering=!0,(this.width!==Bt||this.height!==se)&&(this.pickingFBO.resize({width:Bt,height:se}),this.width=Bt,this.height=se),tt(this.pickingFBO,function(){ft({framebuffer:_.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var xe=_.layer.multiPassRenderer.getRenderFlag();_.layer.multiPassRenderer.setRenderFlag(!1),g.hooks.beforePickingEncode.call(),g.render(),g.hooks.afterPickingEncode.call(),_.layer.multiPassRenderer.setRenderFlag(xe),_.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(g){this.layer.emit(g.type,g)}},{key:"highlightPickedFeature",value:function(g){var _=(0,ga.Z)(g,3),G=_[0],Q=_[1],tt=_[2];this.layer.hooks.beforeHighlight.call([G,Q,tt]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(g){var _=(0,ga.Z)(g,3),G=_[0],Q=_[1],tt=_[2];this.layer.hooks.beforeSelect.call([G,Q,tt]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(g){var _=g.featureId,G=pc(_);this.selectFeature(new Uint8Array(G))}},{key:"highlightFeatureHandle",value:function(g){var _=g.featureId,G=pc(_);this.highlightPickedFeature(new Uint8Array(G))}}]),c}(Ng))||P0),mm=S(11700),L0=S.n(mm),Gg=S(68929),Ug=S.n(Gg),wp,Vg;function ym(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Zv(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ym(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ym(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var N1=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,pd=(wp=(0,sa.b2)(),wp(Vg=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"shaderModuleService",void 0),(0,Y.Z)(this,"rendererService",void 0),(0,Y.Z)(this,"config",void 0),(0,Y.Z)(this,"quad",N1),(0,Y.Z)(this,"enabled",!0),(0,Y.Z)(this,"renderToScreen",!1),(0,Y.Z)(this,"model",void 0),(0,Y.Z)(this,"name",void 0),(0,Y.Z)(this,"optionsToUpdate",{})}return(0,vn.Z)(s,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(c){this.name=c}},{key:"getType",value:function(){return Xp.PostProcessing}},{key:"init",value:function(c,h){this.config=h,this.rendererService=c.getContainer().get(Vn.IRendererService),this.shaderModuleService=c.getContainer().get(Vn.IShaderModuleService);var g=this.rendererService,_=g.createAttribute,G=g.createBuffer,Q=g.createModel,tt=this.setupShaders(),ft=tt.vs,Et=tt.fs,Bt=tt.uniforms;this.model=Q({vs:ft,fs:Et,attributes:{a_Position:_({buffer:G({data:[-4,-4,4,-4,0,4],type:Zt.FLOAT}),size:2})},uniforms:Zv(Zv({u_Texture:null},Bt),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(c){var h=this,g=c.multiPassRenderer.getPostProcessor(),_=this.rendererService,G=_.useFramebuffer,Q=_.getViewportSize,tt=_.clear,ft=Q(),Et=ft.width,Bt=ft.height;G(this.renderToScreen?null:g.getWriteFBO(),function(){tt({framebuffer:g.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),h.model.draw({uniforms:Zv({u_Texture:g.getReadFBO(),u_ViewportSize:[Et,Bt]},h.convertOptionsToUniforms(h.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(c){this.enabled=c}},{key:"setRenderToScreen",value:function(c){this.renderToScreen=c}},{key:"updateOptions",value:function(c){this.optionsToUpdate=Zv(Zv({},this.optionsToUpdate),c)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(c){var h={};return Object.keys(c).forEach(function(g){bu()(c[g])||(h["u_".concat(L0()(Ug()(g)))]=c[g])}),h}}]),s}())||Vg),Ay,xm;function My(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Ty(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?My(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):My(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function z1(s){var p=Py();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Py(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Ep=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,k0=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Iy=(Ay=(0,sa.b2)(),Ay(xm=function(s){(0,vi.Z)(c,s);var p=z1(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:k0,fs:Ep});var g=this.shaderModuleService.getModule("blur-pass"),_=g.vs,G=g.fs,Q=g.uniforms,tt=this.rendererService.getViewportSize(),ft=tt.width,Et=tt.height;return{vs:_,fs:G,uniforms:Ty(Ty({},Q),{},{u_ViewportSize:[ft,Et]})}}},{key:"convertOptionsToUniforms",value:function(g){var _={};return bu()(g.blurRadius)||(_.u_BlurDir=[g.blurRadius,0]),_}}]),c}(pd))||xm),Hv,_m;function G1(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function rb(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?G1(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):G1(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function nu(s){var p=nb();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function nb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var MA=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,rk=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,TA=(Hv=(0,sa.b2)(),Hv(_m=function(s){(0,vi.Z)(c,s);var p=nu(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:rk,fs:MA});var g=this.shaderModuleService.getModule("blur-pass"),_=g.vs,G=g.fs,Q=g.uniforms,tt=this.rendererService.getViewportSize(),ft=tt.width,Et=tt.height;return{vs:_,fs:G,uniforms:rb(rb({},Q),{},{u_ViewportSize:[ft,Et]})}}},{key:"convertOptionsToUniforms",value:function(g){var _={};return bu()(g.blurRadius)||(_.u_BlurDir=[0,g.blurRadius]),_}}]),c}(pd))||_m),sv,PA;function ib(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function jv(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ib(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ib(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function dh(s){var p=bm();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function bm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var ab=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,ob=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,sb=(sv=(0,sa.b2)(),sv(PA=function(s){(0,vi.Z)(c,s);var p=dh(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:ob,fs:ab});var g=this.shaderModuleService.getModule("colorhalftone-pass"),_=g.vs,G=g.fs,Q=g.uniforms,tt=this.rendererService.getViewportSize(),ft=tt.width,Et=tt.height;return{vs:_,fs:G,uniforms:jv(jv({},Q),{},{u_ViewportSize:[ft,Et]})}}}]),c}(pd))||PA),Sm,ub;function IA(s){var p=OA();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function OA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var LA=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Oy=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,kA=(Sm=(0,sa.b2)(),Sm(ub=function(s){(0,vi.Z)(c,s);var p=IA(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Oy,fs:LA}),this.shaderModuleService.getModule("copy-pass")}}]),c}(pd))||ub),lb,cb;function U1(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function V1(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?U1(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):U1(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Ns(s){var p=Wl();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Rc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Z1=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,RA=(lb=(0,sa.b2)(),lb(cb=function(s){(0,vi.Z)(c,s);var p=Ns(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Z1,fs:Rc});var g=this.shaderModuleService.getModule("hexagonalpixelate-pass"),_=g.vs,G=g.fs,Q=g.uniforms,tt=this.rendererService.getViewportSize(),ft=tt.width,Et=tt.height;return{vs:_,fs:G,uniforms:V1(V1({},Q),{},{u_ViewportSize:[ft,Et]})}}}]),c}(pd))||cb),fb,hb;function ns(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function pb(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ns(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ns(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Ly(s){var p=R0();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function R0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var db=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,DA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,BA=(fb=(0,sa.b2)(),fb(hb=function(s){(0,vi.Z)(c,s);var p=Ly(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:DA,fs:db});var g=this.shaderModuleService.getModule("ink-pass"),_=g.vs,G=g.fs,Q=g.uniforms,tt=this.rendererService.getViewportSize(),ft=tt.width,Et=tt.height;return{vs:_,fs:G,uniforms:pb(pb({},Q),{},{u_ViewportSize:[ft,Et]})}}}]),c}(pd))||hb),FA,NA;function zA(s){var p=vb();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function vb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var nk=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,GA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ky=(FA=(0,sa.b2)(),FA(NA=function(s){(0,vi.Z)(c,s);var p=zA(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:GA,fs:nk}),this.shaderModuleService.getModule("noise-pass")}}]),c}(pd))||NA),gb,D0;function UA(s){var p=H1();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function H1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var mb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Nf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,VA=(gb=(0,sa.b2)(),gb(D0=function(s){(0,vi.Z)(c,s);var p=UA(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:mb,fs:Nf}),this.shaderModuleService.getModule("sepia-pass")}}]),c}(pd))||D0),Ry,Dy,j1,X1,Xv,yb,ZA=(Ry=(0,sa.b2)(),Dy=(0,sa.f3)(Vn.IRendererService),j1=(0,sa.zY)(),Ry(X1=(Xv=function(){function s(){(0,cn.Z)(this,s),Xi(this,"rendererService",yb,this),(0,Y.Z)(this,"passes",[]),(0,Y.Z)(this,"readFBO",void 0),(0,Y.Z)(this,"writeFBO",void 0)}return(0,vn.Z)(s,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var p=(0,Mt.Z)(ge().mark(function h(g){var _,G;return ge().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:_=0;case 1:if(!(_<this.passes.length)){tt.next=10;break}return G=this.passes[_],G.setRenderToScreen(this.isLastEnabledPass(_)),tt.next=6,G.render(g);case 6:_!==this.passes.length-1&&this.swap();case 7:_++,tt.next=1;break;case 10:case"end":return tt.stop()}},h,this)}));function c(h){return p.apply(this,arguments)}return c}()},{key:"resize",value:function(c,h){this.readFBO.resize({width:c,height:h}),this.writeFBO.resize({width:c,height:h})}},{key:"add",value:function(c,h,g){c.init(h,g),this.passes.push(c)}},{key:"insert",value:function(c,h,g,_){c.init(g,_),this.passes.splice(h,0,c)}},{key:"getPostProcessingPassByName",value:function(c){return this.passes.find(function(h){return h.getName()===c})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(c){for(var h=c+1;h<this.passes.length;h++)if(this.passes[h].isEnabled())return!1;return!0}},{key:"swap",value:function(){var c=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=c}}]),s}(),yb=ya(Xv.prototype,"rendererService",[Dy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya(Xv.prototype,"init",[j1],Object.getOwnPropertyDescriptor(Xv.prototype,"init"),Xv.prototype),Xv))||X1),wm,By;function ik(s){var p=ak();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function ak(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var ok=(wm=(0,sa.b2)(),wm(By=function(s){(0,vi.Z)(c,s);var p=ik(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getType",value:function(){return Xp.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(g,_){jh((0,An.Z)(c.prototype),"init",this).call(this,g,_)}},{key:"render",value:function(g){var _=this.rendererService,G=_.useFramebuffer,Q=_.clear;G(null,function(){Q({color:[0,0,0,0],depth:1,stencil:0}),g.multiPassRenderer.setRenderFlag(!1),g.render(),g.multiPassRenderer.setRenderFlag(!0)})}}]),c}(Ng))||By),HA,Em,Y1,W1,jA;function xb(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Cm(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?xb(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):xb(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Fy(s){var p=_b();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function _b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var bb=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,K1=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,XA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function $1(s,p){for(var c=0,h=1/p,g=s;g>0;)c=c+h*(g%p),g=Math.floor(g/p),h=h/p;return c}var YA=1,WA=(HA=(0,sa.b2)(),Em=(0,sa.f3)(Vn.IShaderModuleService),HA(Y1=(W1=function(s){(0,vi.Z)(c,s);var p=Fy(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),Xi((0,Tt.Z)(h),"shaderModuleService",jA,(0,Tt.Z)(h)),(0,Y.Z)((0,Tt.Z)(h),"haltonSequence",[]),(0,Y.Z)((0,Tt.Z)(h),"accumulatingId",0),(0,Y.Z)((0,Tt.Z)(h),"frame",0),(0,Y.Z)((0,Tt.Z)(h),"timer",void 0),(0,Y.Z)((0,Tt.Z)(h),"sampleRenderTarget",void 0),(0,Y.Z)((0,Tt.Z)(h),"prevRenderTarget",void 0),(0,Y.Z)((0,Tt.Z)(h),"outputRenderTarget",void 0),(0,Y.Z)((0,Tt.Z)(h),"copyRenderTarget",void 0),(0,Y.Z)((0,Tt.Z)(h),"blendModel",void 0),(0,Y.Z)((0,Tt.Z)(h),"outputModel",void 0),(0,Y.Z)((0,Tt.Z)(h),"copyModel",void 0),h}return(0,vn.Z)(c,[{key:"getType",value:function(){return Xp.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(g,_){jh((0,An.Z)(c.prototype),"init",this).call(this,g,_);var G=this.rendererService,Q=G.createFramebuffer,tt=G.createTexture2D;this.sampleRenderTarget=Q({color:tt({width:1,height:1,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})}),this.prevRenderTarget=Q({color:tt({width:1,height:1,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})}),this.outputRenderTarget=Q({color:tt({width:1,height:1,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})}),this.copyRenderTarget=Q({color:tt({width:1,height:1,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE})});for(var ft=0;ft<30;ft++)this.haltonSequence.push([$1(ft,2),$1(ft,3)]);this.blendModel=this.createTriangleModel("blend-pass",bb),this.outputModel=this.createTriangleModel("copy-pass",K1,{blend:{enable:!0,func:{srcRGB:Zt.ONE,dstRGB:Zt.ONE_MINUS_SRC_ALPHA,srcAlpha:Zt.ONE,dstAlpha:Zt.ONE_MINUS_SRC_ALPHA},equation:{rgb:Zt.FUNC_ADD,alpha:Zt.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",K1)}},{key:"render",value:function(g){var _=this,G=this.rendererService,Q=G.clear,tt=G.getViewportSize,ft=G.useFramebuffer,Et=tt(),Bt=Et.width,se=Et.height;this.sampleRenderTarget.resize({width:Bt,height:se}),this.prevRenderTarget.resize({width:Bt,height:se}),this.outputRenderTarget.resize({width:Bt,height:se}),this.copyRenderTarget.resize({width:Bt,height:se}),this.resetFrame(),this.stopAccumulating();var xe=g.multiPassRenderer.getPostProcessor().getReadFBO();ft(xe,function(){Q({color:[0,0,0,0],depth:1,stencil:0,framebuffer:xe}),g.multiPassRenderer.setRenderFlag(!1),g.render(),g.multiPassRenderer.setRenderFlag(!0)});var De=function Xe(Qe){!_.accumulatingId||Qe!==_.accumulatingId||_.isFinished()||(_.doRender(g),Ds.requestAnimationFrame(function(){Xe(Qe)}))};this.accumulatingId=YA++,this.timer=Ds.setTimeout(function(){De(_.accumulatingId)},50)}},{key:"doRender",value:function(g){var _=this,G=this.rendererService,Q=G.clear,tt=G.getViewportSize,ft=G.useFramebuffer,Et=tt(),Bt=Et.width,se=Et.height,xe=g.getLayerConfig(),De=xe.jitterScale,Xe=De===void 0?1:De,Qe=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Qe[0]*2-1)/Bt*Xe,(Qe[1]*2-1)/se*Xe),g.multiPassRenderer.setRenderFlag(!1),g.hooks.beforeRender.call(),ft(this.sampleRenderTarget,function(){Q({color:[0,0,0,0],depth:1,stencil:0,framebuffer:_.sampleRenderTarget}),g.render()}),g.hooks.afterRender.call(),g.multiPassRenderer.setRenderFlag(!0);var br=g.getLayerConfig();ft(this.outputRenderTarget,function(){_.blendModel.draw({uniforms:{u_opacity:br.opacity||1,u_MixRatio:_.frame===0?1:.9,u_Diffuse1:_.sampleRenderTarget,u_Diffuse2:_.frame===0?g.multiPassRenderer.getPostProcessor().getReadFBO():_.prevRenderTarget}})}),this.frame===0&&Q({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(ft(this.copyRenderTarget,function(){_.outputModel.draw({uniforms:{u_Texture:_.outputRenderTarget}})}),ft(g.multiPassRenderer.getPostProcessor().getReadFBO(),function(){_.copyModel.draw({uniforms:{u_Texture:_.copyRenderTarget}})}),g.multiPassRenderer.getPostProcessor().render(g));var Wr=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Wr,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,Ds.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(g,_,G){this.shaderModuleService.registerModule(g,{vs:XA,fs:_});var Q=this.shaderModuleService.getModule(g),tt=Q.vs,ft=Q.fs,Et=Q.uniforms,Bt=this.rendererService,se=Bt.createAttribute,xe=Bt.createBuffer,De=Bt.createModel;return De(Cm({vs:tt,fs:ft,attributes:{a_Position:se({buffer:xe({data:[-4,-4,4,-4,0,4],type:Zt.FLOAT}),size:2})},uniforms:Cm({},Et),depth:{enable:!1},count:3},G))}}]),c}(Ng),jA=ya(W1.prototype,"shaderModuleService",[Em],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W1))||Y1),Zg=new sa.W2;Zg.bind(Vn.IGlobalConfigService).to(cl).inSingletonScope(),(0,sa.GW)((0,sa.b2)(),cu.EventEmitter),Zg.bind(Vn.IEventEmitter).to(cu.EventEmitter);var Ny=(0,vf.Z)(Zg,!1),zy=function(p){var c=Ny.lazyInject(p);return function(h,g,_){c.call(this,h,g),_&&(_.initializer=function(){return h[g]})}},sk=function(p){var c=Ny.lazyMultiInject(p);return function(h,g,_){c.call(this,h,g),_&&(_.initializer=function(){return h[g]})}},vh=Zg,KA=0;function $A(){var s=new sa.W2;return s.parent=Zg,s.bind(Vn.SceneID).toConstantValue("".concat(KA++)),s.bind(Vn.IShaderModuleService).to(pm).inSingletonScope(),s.bind(Vn.ILayerService).to(el).inSingletonScope(),s.bind(Vn.ISceneService).to(zv).inSingletonScope(),s.bind(Vn.ICameraService).to(ua).inSingletonScope(),s.bind(Vn.ICoordinateSystemService).to(yy).inSingletonScope(),s.bind(Vn.IInteractionService).to(mt).inSingletonScope(),s.bind(Vn.IPickingService).to(lo).inSingletonScope(),s.bind(Vn.IControlService).to(Co).inSingletonScope(),s.bind(Vn.IMarkerService).to(ku).inSingletonScope(),s.bind(Vn.IIconService).to(vp).inSingletonScope(),s.bind(Vn.IFontService).to(Iv).inSingletonScope(),s.bind(Vn.IPopupService).to(Dl).inSingletonScope(),s.bind(Vn.INormalPass).to(Vv).whenTargetNamed("clear"),s.bind(Vn.INormalPass).to(Yp).whenTargetNamed("pixelPicking"),s.bind(Vn.INormalPass).to(ok).whenTargetNamed("render"),s.bind(Vn.INormalPass).to(WA).whenTargetNamed("taa"),s.bind(Vn.IFactoryNormalPass).toFactory(function(p){return function(c){return p.container.getNamed(Vn.INormalPass,c)}}),s.bind(Vn.IPostProcessingPass).to(kA).whenTargetNamed("copy"),s.bind(Vn.IPostProcessingPass).to(Iy).whenTargetNamed("blurH"),s.bind(Vn.IPostProcessingPass).to(TA).whenTargetNamed("blurV"),s.bind(Vn.IPostProcessingPass).to(ky).whenTargetNamed("noise"),s.bind(Vn.IPostProcessingPass).to(VA).whenTargetNamed("sepia"),s.bind(Vn.IPostProcessingPass).to(sb).whenTargetNamed("colorHalftone"),s.bind(Vn.IPostProcessingPass).to(RA).whenTargetNamed("hexagonalPixelate"),s.bind(Vn.IPostProcessingPass).to(BA).whenTargetNamed("ink"),s.bind(Vn.IFactoryPostProcessingPass).toFactory(function(p){return function(c){var h=p.container.getNamed(Vn.IPostProcessingPass,c);return h.setName(c),h}}),s}function QA(s){var p=new sa.W2;return p.parent=s,p.bind(Vn.IStyleAttributeService).to(cc).inSingletonScope(),p.bind(Vn.IMultiPassRenderer).to(T0).inSingletonScope(),p.bind(Vn.IPostProcessor).to(ZA).inSingletonScope(),p}var uk=S(74691),qA=null;function B0(s){return qA.indexOf(s)}var Q1=2,JA=4,tM=64,eM=128,rM=256,Sb=512,lk=8192,ck=16384,nM=32768,iM=null,wb=131072,fk=262144,uv=524288,hk=1048576,aM=2097152,Am=4194304,Gy=8388608,Eb=16777216,oM=null;function Mm(s,p){return s=_clamp(Math.floor(s),0,255),p=_clamp(Math.floor(p),0,255),256*s+p}function pk(s){var p=s.color,c=s.radius,h=s.tileX,g=s.tileY,_=s.shape,G=s.opacity,Q=s.stroke,tt=s.strokeWidth,ft=s.strokeOpacity,Et=[],Bt=[],se=[],xe=[Mm(p[0],p[1]),Mm(p[2],p[3])],De=[Mm(Q[0],Q[1]),Mm(Q[2],Q[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Xe){var Qe=_slicedToArray(Xe,2),br=Qe[0],Wr=Qe[1];Et.push([].concat(xe,[(br+1)*Gy+(Wr+1)*aM+getShapeIndex(_)*wb+c,(h+512)*uv+(g+512)*tM])),Bt.push([].concat(De,[tt,ft])),se.push([G,0,0,0])}),{packedBuffer:Et,packedBuffer2:Bt,packedBuffer3:se}}function dk(s,p){if(s===0&&!p)return 0;if(s===1&&p)return 4294967295;var c=p?1:0,h=Math.floor(s*127);return h*oM+c*Eb+h*wb+c*iM+h*Sb+c*rM+h*Q1+c}var Cp;(function(s){s.normal="normal",s.additive="additive",s.subtractive="subtractive",s.min="min",s.max="max",s.none="none"})(Cp||(Cp={}));var _c;(function(s){s.LINEAR="linear",s.POWER="power",s.LOG="log",s.IDENTITY="identity",s.TIME="time",s.QUANTILE="quantile",s.QUANTIZE="quantize",s.THRESHOLD="threshold",s.CAT="cat"})(_c||(_c={}));var Yv;(function(s){s.CONSTANT="constant",s.VARIABLE="variable"})(Yv||(Yv={}));var xo;(function(s){s[s.Attribute=0]="Attribute",s[s.InstancedAttribute=1]="InstancedAttribute",s[s.Uniform=2]="Uniform"})(xo||(xo={}));var sM=["mapload","mapchange"],Hg={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},q1=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Wv;(function(s){s.TOPRIGHT="topright",s.TOPLEFT="topleft",s.BOTTOMRIGHT="bottomright",s.BOTTOMLEFT="bottomleft",s.TOPCENTER="topcenter",s.BOTTOMCENTER="bottomcenter",s.LEFTCENTER="leftcenter",s.RIGHTCENTER="rightcenter"})(Wv||(Wv={}));function Cb(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Dc(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Cb(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Cb(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function uM(s){var p=lM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function lM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var cM=0,F0=function(s){(0,vi.Z)(c,s);var p=uM(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this),(0,Y.Z)((0,Tt.Z)(g),"controlOption",void 0),(0,Y.Z)((0,Tt.Z)(g),"container",void 0),(0,Y.Z)((0,Tt.Z)(g),"sceneContainer",void 0),(0,Y.Z)((0,Tt.Z)(g),"mapsService",void 0),(0,Y.Z)((0,Tt.Z)(g),"renderService",void 0),(0,Y.Z)((0,Tt.Z)(g),"layerService",void 0),(0,Y.Z)((0,Tt.Z)(g),"controlService",void 0),(0,Y.Z)((0,Tt.Z)(g),"isShow",void 0),g.controlOption=Dc(Dc({},g.getDefault()),h||{}),g}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{position:Wv.TOPRIGHT,name:"".concat(cM++)}}},{key:"setPosition",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wv.BOTTOMRIGHT,_=this.controlService;return _&&_.removeControl(this),this.controlOption.position=g,_&&_.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(g){this.mapsService=g.get(Vn.IMapService),this.renderService=g.get(Vn.IRendererService),this.layerService=g.get(Vn.ILayerService),this.controlService=g.get(Vn.IControlService),this.sceneContainer=g,this.isShow=!0,this.container=this.onAdd();var _=this.container,G=this.controlOption.position,Q=this.controlService.controlCorners[G];return Yf(_,"l7-control"),G.indexOf("bottom")!==-1?Q.insertBefore(_,Q.firstChild):Q.appendChild(_),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var g=this.container;Yf(g,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var g=this.container;fc(g,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;np(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(g){if(this.mapsService&&g&&g.screenX>0&&g.screenY>0){var _=this.mapsService.getContainer();_!==null&&_.focus()}}}]),c}(cu.EventEmitter);function fM(s){var p=Wp();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Wp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var hM=function(s){(0,vi.Z)(c,s);var p=fM(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this,h),(0,Y.Z)((0,Tt.Z)(g),"layerControlInputs",void 0),(0,Y.Z)((0,Tt.Z)(g),"layers",void 0),(0,Y.Z)((0,Tt.Z)(g),"lastZIndex",void 0),(0,Y.Z)((0,Tt.Z)(g),"handlingClick",void 0),(0,Y.Z)((0,Tt.Z)(g),"layersLink",void 0),(0,Y.Z)((0,Tt.Z)(g),"baseLayersList",void 0),(0,Y.Z)((0,Tt.Z)(g),"separator",void 0),(0,Y.Z)((0,Tt.Z)(g),"overlaysList",void 0),(0,Y.Z)((0,Tt.Z)(g),"form",void 0),g.layerControlInputs=[],g.layers=[],g.lastZIndex=0,g.handlingClick=!1,g.initLayers(),Hs(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],(0,Tt.Z)(g)),g}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{collapsed:!0,position:Wv.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var g=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(_){_.layer.on("remove",g.onLayerChange),_.layer.on("add",g.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(g,_){return this.addLayer(g,_,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var g=this.renderService.getViewportSize(),_=g.height;Yf(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var G=_-(this.container.offsetTop+50);return G<this.form.clientHeight?(Yf(this.form,"l7-control-layers-scrollbar"),this.form.style.height=G+"px"):fc(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return fc(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var g=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(_){_.layer.off("remove",g.onLayerChange),_.layer.off("add",g.onLayerChange)}))}},{key:"initLayout",value:function(){var g="l7-control-layers",_=this.container=lu("div",g),G=this.controlOption.collapsed;_.setAttribute("aria-haspopup","true");var Q=this.form=lu("form",g+"-list");G&&(this.mapsService.on("click",this.collapse),_.addEventListener("mouseenter",this.expand),_.addEventListener("mouseleave",this.collapse)),this.layersLink=lu("a",g+"-toggle",_);var tt=this.layersLink;tt.title="Layers",G||this.expand(),this.baseLayersList=lu("div",g+"-base",Q),this.separator=lu("div",g+"-separator",Q),this.overlaysList=lu("div",g+"-overlays",Q),_.appendChild(Q)}},{key:"initLayers",value:function(){var g=this,_=this.controlOption,G=_.baseLayers,Q=G===void 0?{}:G,tt=_.overlayers,ft=tt===void 0?{}:tt;Object.keys(Q).forEach(function(Et,Bt){g.addLayer(Q[Et],Et,!1)}),Object.keys(ft).forEach(function(Et,Bt){g.addLayer(ft[Et],Et,!0)})}},{key:"update",value:function(){if(!this.container)return this;Wf(this.baseLayersList),Wf(this.overlaysList),this.layerControlInputs=[];var g,_,G,Q,tt=0;for(G=0;G<this.layers.length;G++)Q=this.layers[G],this.addItem(Q),_=_||Q.overlay,g=g||!Q.overlay,tt+=Q.overlay?0:1;return this.controlOption.hideSingleBase&&(g=g&&tt>1,this.baseLayersList.style.display=g?"":"none"),this.separator.style.display=_&&g?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var g=this.layerControlInputs,_,G,Q=this.mapsService.getZoom(),tt=g.length-1;tt>=0;tt--)if(_=g[tt],G=this.layerService.getLayer(_.layerId),G&&G.inited){var ft=G.getMinZoom(),Et=G.getMaxZoom();_.disabled=Q<ft||Q>Et}}},{key:"addLayer",value:function(g,_,G){this.mapsService&&(g.on("add",this.onLayerChange),g.on("remove",this.onLayerChange)),this.layers.push({layer:g,name:_,overlay:G});var Q=this.controlOption,tt=Q.sortLayers,ft=Q.sortFunction,Et=Q.autoZIndex;tt&&this.layers.sort(function(Bt,se){return ft(Bt.layer,se.layer,Bt.name,se.name)}),Et&&g.setZIndex&&(this.lastZIndex++,g.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(g){this.handlingClick||this.update();var _=this.layerService.getLayer(g.target.layerId),G=_!=null&&_.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;G&&this.emit(G,_)}},{key:"createRadioElement",value:function(g,_){var G='<input type="radio" class="l7-control-layers-selector" name="'+g+'"'+(_?' checked="checked"':"")+"/>",Q=document.createElement("div");return Q.innerHTML=G,Q.firstChild}},{key:"addItem",value:function(g){var _=document.createElement("label"),G=this.layerService.getLayer(g.layer.id),Q=G&&G.inited&&g.layer.isVisible(),tt;g.overlay?(tt=document.createElement("input"),tt.type="checkbox",tt.className="l7-control-layers-selector",tt.defaultChecked=Q):tt=this.createRadioElement("l7-base-layers",Q),this.layerControlInputs.push(tt),tt.layerId=g.layer.id,tt.addEventListener("click",this.onInputClick);var ft=document.createElement("span");ft.innerHTML=" "+g.name;var Et=document.createElement("div");_.appendChild(Et),Et.appendChild(tt),Et.appendChild(ft);var Bt=g.overlay?this.overlaysList:this.baseLayersList;return Bt.appendChild(_),this.checkDisabledLayers(),_}},{key:"onInputClick",value:function(){var g=this.layerControlInputs,_,G,Q=[],tt=[];this.handlingClick=!0;for(var ft=g.length-1;ft>=0;ft--)_=g[ft],G=this.layerService.getLayer(_.layerId),_.checked?Q.push(G):_.checked||tt.push(G);tt.forEach(function(Et){Et.hide()}),Q.forEach(function(Et){Et.show()}),this.handlingClick=!1}}]),c}(F0);function dd(s){var p=Uy();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Uy(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Ab=function(s){(0,vi.Z)(c,s);var p=dd(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{position:Wv.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var g="l7-control-logo",_=lu("div",g),G=lu("a","l7-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://antv.alipay.com/l7",G.setAttribute("aria-label","AntV logo"),G.setAttribute("rel","noopener nofollow"),_.appendChild(G),_}},{key:"onRemove",value:function(){return null}}]),c}(F0);function pM(s){var p=dM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function dM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var vk=function(s){(0,vi.Z)(c,s);var p=pM(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this,h),(0,Y.Z)((0,Tt.Z)(g),"mScale",void 0),(0,Y.Z)((0,Tt.Z)(g),"iScale",void 0),Hs(["update"],(0,Tt.Z)(g)),g}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{position:Wv.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var g="l7-control-scale",_=lu("div",g);this.addScales(g+"-line",_);var G=this.controlOption.updateWhenIdle;return this.mapsService.on(G?"moveend":"mapmove",this.update),this.mapsService.on(G?"zoomend":"zoomchange",this.update),this.update(),_}},{key:"onRemove",value:function(){var g=this.controlOption.updateWhenIdle;this.mapsService.off(g?"zoomend":"zoomchange",this.update),this.mapsService.off(g?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var g=this.mapsService,_=this.controlOption.maxWidth,G=g.getSize()[1]/2,Q=g.containerToLngLat([0,G]),tt=g.containerToLngLat([_,G]),ft=cs([Q.lng,Q.lat],[tt.lng,tt.lat]);this.updateScales(ft)}},{key:"updateScales",value:function(g){var _=this.controlOption,G=_.metric,Q=_.imperial;G&&g&&this.updateMetric(g),Q&&g&&this.updateImperial(g)}},{key:"updateMetric",value:function(g){var _=this.getRoundNum(g),G=_<1e3?_+" m":_/1e3+" km";this.updateScale(this.mScale,G,_/g)}},{key:"updateImperial",value:function(g){var _=g*3.2808399,G,Q,tt;_>5280?(G=_/5280,Q=this.getRoundNum(G),this.updateScale(this.iScale,Q+" mi",Q/G)):(tt=this.getRoundNum(_),this.updateScale(this.iScale,tt+" ft",tt/_))}},{key:"updateScale",value:function(g,_,G){var Q=this.controlOption.maxWidth;g.style.width=Math.round(Q*G)+"px",g.innerHTML=_}},{key:"getRoundNum",value:function(g){var _=Math.pow(10,(Math.floor(g)+"").length-1),G=g/_;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:1,_*G}},{key:"addScales",value:function(g,_){var G=this.controlOption,Q=G.metric,tt=G.imperial;Q&&(this.mScale=lu("div",g,_)),tt&&(this.iScale=lu("div",g,_))}}]),c}(F0);function Vy(s){var p=vM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function vM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var gk=function(s){(0,vi.Z)(c,s);var p=Vy(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this,h),(0,Y.Z)((0,Tt.Z)(g),"disabled",void 0),(0,Y.Z)((0,Tt.Z)(g),"zoomInButton",void 0),(0,Y.Z)((0,Tt.Z)(g),"zoomOutButton",void 0),Hs(["updateDisabled","zoomIn","zoomOut"],(0,Tt.Z)(g)),g}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{position:Wv.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var g="l7-control-zoom",_=lu("div",g+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,g+"-in",_,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,g+"-out",_,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),_}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(g,_,G,Q,tt){var ft=lu("a",G,Q);return ft.innerHTML=g,ft.title=_,ft.href="javascript:void(0)",ft.addEventListener("click",tt),ft}},{key:"updateDisabled",value:function(){var g=this.mapsService,_="l7-disabled";fc(this.zoomInButton,_),fc(this.zoomOutButton,_),(this.disabled||g.getZoom()<=g.getMinZoom())&&Yf(this.zoomOutButton,_),(this.disabled||g.getZoom()>=g.getMaxZoom())&&Yf(this.zoomInButton,_)}}]),c}(F0);function Tm(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function J1(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Tm(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Tm(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function tx(s){var p=gM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function gM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Mb=function(s){(0,vi.Z)(c,s);var p=tx(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this),(0,Y.Z)((0,Tt.Z)(g),"markerOption",void 0),(0,Y.Z)((0,Tt.Z)(g),"defaultMarker",void 0),(0,Y.Z)((0,Tt.Z)(g),"popup",void 0),(0,Y.Z)((0,Tt.Z)(g),"mapsService",void 0),(0,Y.Z)((0,Tt.Z)(g),"sceneSerive",void 0),(0,Y.Z)((0,Tt.Z)(g),"lngLat",void 0),(0,Y.Z)((0,Tt.Z)(g),"scene",void 0),(0,Y.Z)((0,Tt.Z)(g),"added",!1),(0,Y.Z)((0,Tt.Z)(g),"eventHandle",function(_){g.emit(_.type,{target:_,data:g.markerOption.extData,lngLat:g.lngLat})}),g.markerOption=J1(J1({},g.getDefault()),h),Hs(["update","onMove","onUp","addDragHandler","onMapClick"],(0,Tt.Z)(g)),g.init(),g}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{element:void 0,anchor:Th.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(g){this.scene=g,this.mapsService=g.get(Vn.IMapService),this.sceneSerive=g.get(Vn.ISceneService);var _=this.markerOption,G=_.element,Q=_.draggable;return this.mapsService.getMarkerContainer().appendChild(G),this.registerMarkerEvent(G),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var g=this.markerOption.element;return g&&np(g),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(g){return this.lngLat=g,Array.isArray(g)&&(this.lngLat={lng:g[0],lat:g[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(g){var _=this;if(!this.added)return this.once("added",function(){_.setElement(g)}),this;var G=this.markerOption.element;return G&&np(G),this.markerOption.element=g,this.init(),this.mapsService.getMarkerContainer().appendChild(g),this.registerMarkerEvent(g),this.update(),this}},{key:"openPopup",value:function(){var g=this;if(!this.added)return this.once("added",function(){g.openPopup()}),this;var _=this.popup;return _?(_.isOpen()||_.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var g=this;this.added||this.once("added",function(){g.closePopup()});var _=this.popup;return _&&_.remove(),this}},{key:"setPopup",value:function(g){return this.popup=g,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var g=this.popup;if(g)g.isOpen()?g.remove():g.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(g){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(g){this.markerOption.extData=g}},{key:"update",value:function(){if(!!this.mapsService){var g=this.markerOption,_=g.element,G=g.anchor;this.updatePosition(),Fu(_,"".concat(Af[G]))}}},{key:"onMapClick",value:function(g){var _=this.markerOption.element;this.popup&&_&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var g=this.markerOption,_=g.element,G=g.offsets,Q=this.lngLat,tt=Q.lng,ft=Q.lat,Et=this.mapsService.getBounds(),Bt=this.mapsService.lngLatToContainer([tt,ft]);if(_){_.style.display="block",_.style.whiteSpace="nowrap";var se=this.mapsService.getContainer(),xe=0,De=0;if(se&&(xe=se.scrollWidth,De=se.scrollHeight),Math.abs(Et[0][0])>180||Math.abs(Et[1][0])>180){if(Bt.x>xe){var Xe=this.mapsService.lngLatToContainer([tt-360,ft]);Bt.x=Xe.x}if(Bt.x<0){var Qe=this.mapsService.lngLatToContainer([tt+360,ft]);Bt.x=Qe.x}}(Bt.x>xe||Bt.x<0||Bt.y>De||Bt.y<0)&&(_.style.display="none"),_.style.left=Bt.x+G[0]+"px",_.style.top=Bt.y-G[1]+"px"}}}},{key:"init",value:function(){var g=this,_=this.markerOption.element,G=this.markerOption,Q=G.color,tt=G.anchor;if(!_){this.defaultMarker=!0,_=lu("div"),this.markerOption.element=_;var ft=document.createElementNS("http://www.w3.org/2000/svg","svg");ft.setAttributeNS(null,"display","block"),ft.setAttributeNS(null,"height","48px"),ft.setAttributeNS(null,"width","48px"),ft.setAttributeNS(null,"viewBox","0 0 1024 1024");var Et=document.createElementNS("http://www.w3.org/2000/svg","path");Et.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),Et.setAttributeNS(null,"fill",Q),ft.appendChild(Et),_.appendChild(ft)}Yf(_,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(Bt){var se,xe,De=((se=g.markerOption)===null||se===void 0?void 0:se.style)&&((xe=g.markerOption)===null||xe===void 0?void 0:xe.style[Bt]);_&&(_.style[Bt]=De)}),_.addEventListener("click",function(Bt){g.onMapClick(Bt)}),_.addEventListener("click",this.eventHandle),Ph(_,tt,"marker")}},{key:"registerMarkerEvent",value:function(g){g.addEventListener("mousemove",this.eventHandle),g.addEventListener("click",this.eventHandle),g.addEventListener("mousedown",this.eventHandle),g.addEventListener("mouseup",this.eventHandle),g.addEventListener("dblclick",this.eventHandle),g.addEventListener("contextmenu",this.eventHandle),g.addEventListener("mouseover",this.eventHandle),g.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var g=this.getElement();g.removeEventListener("mousemove",this.eventHandle),g.removeEventListener("click",this.eventHandle),g.removeEventListener("mousedown",this.eventHandle),g.removeEventListener("mouseup",this.eventHandle),g.removeEventListener("dblclick",this.eventHandle),g.removeEventListener("contextmenu",this.eventHandle),g.removeEventListener("mouseover",this.eventHandle),g.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(g){throw new Error("Method not implemented.")}},{key:"onUp",value:function(g){throw new Error("Method not implemented.")}}]),c}(cu.EventEmitter);function Tb(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Pb(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Tb(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Tb(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function Ib(s){var p=mM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function mM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var yM=function(s){(0,vi.Z)(c,s);var p=Ib(c);function c(h){var g,_;return(0,cn.Z)(this,c),_=p.call(this),(0,Y.Z)((0,Tt.Z)(_),"markers",[]),(0,Y.Z)((0,Tt.Z)(_),"markerLayerOption",void 0),(0,Y.Z)((0,Tt.Z)(_),"clusterIndex",void 0),(0,Y.Z)((0,Tt.Z)(_),"points",[]),(0,Y.Z)((0,Tt.Z)(_),"clusterMarkers",[]),(0,Y.Z)((0,Tt.Z)(_),"mapsService",void 0),(0,Y.Z)((0,Tt.Z)(_),"scene",void 0),(0,Y.Z)((0,Tt.Z)(_),"zoom",void 0),(0,Y.Z)((0,Tt.Z)(_),"bbox",void 0),_.markerLayerOption=Tl()(_.getDefault(),h),Hs(["update"],(0,Tt.Z)(_)),_.zoom=((g=_.markerLayerOption.clusterOption)===null||g===void 0?void 0:g.zoom)||-99,_}return(0,vn.Z)(c,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(g){return this.scene=g,this.mapsService=g.get(Vn.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(g){var _=this.markerLayerOption.cluster;_&&this.addPoint(g,this.markers.length),this.markers.push(g)}},{key:"removeMarker",value:function(g){this.markers.indexOf(g);var _=this.markers.indexOf(g);_>-1&&this.markers.splice(_,1)}},{key:"hide",value:function(){this.markers.map(function(g){g.getElement().style.opacity="0"}),this.clusterMarkers.map(function(g){g.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(g){g.getElement().style.opacity="1"}),this.clusterMarkers.map(function(g){g.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var g=this.markerLayerOption.cluster;return g?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var g=this;this.getMarkers().forEach(function(_){_.addTo(g.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(g){g.remove()}),this.clusterMarkers.forEach(function(g){g.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(g,_){var G=g.getLnglat(),Q=G.lng,tt=G.lat,ft={geometry:{type:"Point",coordinates:[Q,tt]},properties:Pb(Pb({},g.getExtData()),{},{marker_id:_})};this.points.push(ft)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var g=this.markerLayerOption.clusterOption,_=g.radius,G=g.minZoom,Q=G===void 0?0:G,tt=g.maxZoom;this.clusterIndex=new(Lh())({radius:_,minZoom:Q,maxZoom:tt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(g,_){var G=this,Q=g[0].concat(g[1]),tt=this.clusterIndex.getClusters(Q,_);this.clusterMarkers.forEach(function(ft){ft.remove()}),this.clusterMarkers=[],tt.forEach(function(ft){var Et,Bt=G.markerLayerOption.clusterOption,se=Bt.field,xe=Bt.method;if(ft.properties&&(Et=ft.properties)!==null&&Et!==void 0&&Et.cluster_id){var De,Xe=G.getLeaves((De=ft.properties)===null||De===void 0?void 0:De.cluster_id);if(ft.properties.clusterData=Xe,se&&xe){var Qe=Xe==null?void 0:Xe.map(function(Rn){var Bn=(0,Y.Z)({},se,Rn.properties[se]);return Bn}),br=pf(Qe,se),Wr=Cc(xe,br),sn="point_"+xe;ft.properties[sn]=Wr.toFixed(2)}}var xn=G.clusterMarker(ft);G.clusterMarkers.push(xn),xn.addTo(G.scene)})}},{key:"getLeaves",value:function(g){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return g?this.clusterIndex.getLeaves(g,_,G):null}},{key:"clusterMarker",value:function(g){var _=this.markerLayerOption.clusterOption,G=_,Q=G.element,tt=Q===void 0?this.generateElement.bind(this):Q,ft=new Mb({element:tt(g)}).setLnglat({lng:g.geometry.coordinates[0],lat:g.geometry.coordinates[1]});return ft}},{key:"normalMarker",value:function(g){var _=g.properties.marker_id;return this.markers[_]}},{key:"update",value:function(){var g=this.mapsService.getZoom(),_=this.mapsService.getBounds();(!this.bbox||Math.abs(g-this.zoom)>=1||!za(this.bbox,_))&&(this.bbox=Wa(_,.5),this.zoom=Math.floor(g),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(g){var _=lu("div","l7-marker-cluster"),G=lu("div","",_),Q=lu("span","",G),tt=this.markerLayerOption.clusterOption,ft=tt.field,Et=tt.method;g.properties.point_count=g.properties.point_count||1;var Bt=ft&&Et?g.properties["point_"+Et]||g.properties[ft]:g.properties.point_count;return Q.textContent=Bt,_}}]),c}(cu.EventEmitter);function Ob(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Lb(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Ob(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ob(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function xM(s){var p=_M();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function _M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var kb=function(s){(0,vi.Z)(c,s);var p=xM(c);function c(h){var g;return(0,cn.Z)(this,c),g=p.call(this),(0,Y.Z)((0,Tt.Z)(g),"popupOption",void 0),(0,Y.Z)((0,Tt.Z)(g),"mapsService",void 0),(0,Y.Z)((0,Tt.Z)(g),"sceneSerive",void 0),(0,Y.Z)((0,Tt.Z)(g),"lngLat",void 0),(0,Y.Z)((0,Tt.Z)(g),"content",void 0),(0,Y.Z)((0,Tt.Z)(g),"closeButton",void 0),(0,Y.Z)((0,Tt.Z)(g),"timeoutInstance",void 0),(0,Y.Z)((0,Tt.Z)(g),"container",void 0),(0,Y.Z)((0,Tt.Z)(g),"tip",void 0),(0,Y.Z)((0,Tt.Z)(g),"scene",void 0),g.popupOption=Lb(Lb({},g.getdefault()),h),Hs(["update","onClickClose","remove"],(0,Tt.Z)(g)),g}return(0,vn.Z)(c,[{key:"addTo",value:function(g){var _=this;return this.mapsService=g.get(Vn.IMapService),this.sceneSerive=g.get(Vn.ISceneService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=g,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){_.mapsService.on("click",_.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(g){var _=window.document.createDocumentFragment(),G=window.document.createElement("body"),Q;for(G.innerHTML=g;Q=G.firstChild,!!Q;)_.appendChild(Q);return this.setDOMContent(_)}},{key:"setLnglat",value:function(g){return this.lngLat=g,Array.isArray(g)&&(this.lngLat={lng:g[0],lat:g[1]}),this.mapsService&&(this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(g){return this.setDOMContent(window.document.createTextNode(g))}},{key:"setMaxWidth",value:function(g){return this.popupOption.maxWidth=g,this.update(),this}},{key:"setDOMContent",value:function(g){return this.createContent(),this.content.appendChild(g),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&np(this.content),this.content=lu("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=lu("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(g,_,G){var Q=window.document.createElement(g);return _!==void 0&&(Q.className=_),G&&G.appendChild(Q),Q}},{key:"removeDom",value:function(g){g.parentNode&&g.parentNode.removeChild(g)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:Th.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(g){g.stopPropagation&&g.stopPropagation(),this.remove()}},{key:"update",value:function(){var g=this,_=this.lngLat,G=this.popupOption,Q=G.className,tt=G.maxWidth,ft=G.anchor;if(!(!this.mapsService||!_||!this.content)){var Et=this.mapsService.getMarkerContainer();if(!this.container&&Et){this.container=this.creatDom("div","l7-popup",Et),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Q&&Q.split(" ").forEach(function(se){return g.container.classList.add(se)});var Bt=this.popupOption.stopPropagation;Bt&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(se){g.container.addEventListener(se,function(xe){xe.stopPropagation()})}),this.container.style.whiteSpace="nowrap"}tt&&this.container.style.maxWidth!==tt&&(this.container.style.maxWidth=tt),this.updatePosition(),Fu(this.container,"".concat(Af[ft])),Ph(this.container,ft,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var g=this.lngLat,_=g.lng,G=g.lat,Q=this.popupOption.offsets,tt=this.mapsService.lngLatToContainer([_,G]);this.container.style.left=tt.x+Q[0]+"px",this.container.style.top=tt.y-Q[1]+"px"}}}]),c}(cu.EventEmitter);function bM(s,p){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",h=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||h)&&(p||(p=document),!!p)){var g=p.head||p.getElementsByTagName("head")[0];if(!g){g=p.createElement("head");var _=p.body||p.getElementsByTagName("body")[0];_?_.parentNode.insertBefore(g,_):p.documentElement.appendChild(g)}var G=p.createElement("style");return G.type="text/css",G.styleSheet?G.styleSheet.cssText=s:G.appendChild(p.createTextNode(s)),g.appendChild(G),G}}bM(`.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
}

.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 5px;
}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}

.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-left: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-bottom: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-bottom: none;
  border-left: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-bottom: none;
  border-right: none;
  border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-left: none;
  border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  padding: 0;
  font-size: 25px;
  line-height: 20px;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
  display: none;
}

.l7-popup-track-pointer * {
  pointer-events: none;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

.l7-map:active .l7-popup-track-pointer {
  display: none;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);
  border-radius: 4px;
}
.l7-bar a,
.l7-bar a:hover {
  background-color: #fff;
  width: 30px;
  height: 30px;
  font-size: 20px;
  display: block;
  text-align: center;
  text-decoration: none;
  color: #8e9dab;
}
.l7-bar a,
.l7-control-layers-toggle {
  background-position: 50% 50%;
  background-repeat: no-repeat;
  display: block;
}
.l7-bar a:hover {
  background-color: #f4f4f4;
}
.l7-bar a:first-child {
  border-top-left-radius: 2px;
  border-top-right-radius: 2px;
}
.l7-bar a:last-child {
  border-bottom-left-radius: 2px;
  border-bottom-right-radius: 2px;
  border-bottom: none;
}
.l7-bar a.l7-disabled {
  cursor: default;
  background-color: #f4f4f4;
  color: #bbb;
}

/* control positioning */

.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-hide {
  display: none;
}
.l7-control {
  position: relative;
  z-index: 800;
  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control {
  float: left;
  clear: both;
}
.l7-top,
.l7-bottom {
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-top {
  top: 0;
}
.l7-right {
  right: 0;
}
.l7-bottom {
  bottom: 0;
}
.l7-left {
  left: 0;
}
.l7-center {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-bottom.l7-center,
.l7-top.l7-center {
  width: 100%;
}
.l7-right.l7-center,
.l7-left.l7-center {
  height: 100%;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-top.l7-center,
.l7-left.l7-center {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}

.l7-bottom.l7-center,
.l7-right.l7-center {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}

.l7-center .l7-control {
  margin-right: 10px;
  margin-bottom: 10px;
}

.l7-control {
  float: left;
  clear: both;
}
.l7-right .l7-control {
  float: right;
}
.l7-top .l7-control {
  margin-top: 10px;
}
.l7-bottom .l7-control {
  margin-bottom: 10px;
}
.l7-left .l7-control {
  margin-left: 10px;
}
.l7-right .l7-control {
  margin-right: 10px;
}

/* attribution and scale controls */

.l7-control-container .l7-control-attribution {
  background: #fff;
  background: rgba(255, 255, 255, 0.7);
  margin: 0;
}
.l7-control-attribution,
.l7-control-scale-line {
  padding: 0 5px;
  color: #333;
}
.l7-control-attribution a {
  text-decoration: none;
}
.l7-control-attribution a:hover {
  text-decoration: underline;
}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
}
.l7-left .l7-control-scale {
  margin-left: 5px;
}
.l7-bottom .l7-control-scale {
  margin-bottom: 5px;
}
.l7-control-scale-line {
  border: 2px solid #000;
  border-top: none;
  color: #000;
  line-height: 1.1;
  padding: 2px 5px 1px;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;

  background: #fff;
}
.l7-control-scale-line:not(:first-child) {
  border-top: 2px solid #777;
  border-bottom: none;
  margin-top: -2px;
}
.l7-control-scale-line:not(:first-child):not(:last-child) {
  border-bottom: 2px solid #777;
}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  border: 2px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}
/*logo */

.l7-ctrl-logo {
  background-size: 100% 100%;
  width: 89px;
  height: 16px;
  margin: 0 0 -3px -3px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  background-repeat: no-repeat;
  cursor: pointer;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 2px;
}
.l7-control-layers-toggle {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
  width: 30px;
  height: 30px;
  background-size: 20px 20px;
}

.l7-touch .l7-control-layers-toggle {
  width: 44px;
  height: 44px;
}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
  display: none;
}
.l7-control-layers-expanded .l7-control-layers-list {
  display: block;
  position: relative;
}
.l7-control-layers-expanded {
  padding: 6px 10px 6px 6px;
  color: #59626b;
  background: #fff;
}
.l7-control-layers-scrollbar {
  overflow-y: scroll;
  overflow-x: hidden;
  padding-right: 5px;
}
.l7-control-layers-selector {
  margin-top: 2px;
  position: relative;
  top: 1px;
}
.l7-control-layers label {
  display: block;
  padding: 8px;
}
.l7-control-layers label input[type='radio'],
.l7-control-layers label input[type='checkbox'] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
  height: 0;
  border-top: 1px solid #d8d8d8;
  margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
}
.amap-logo {
  display: none !important;
}
`);var Rb=S(88307),SM=S.n(Rb),wM=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"attribute",void 0),(0,Y.Z)(this,"buffer",void 0);var h=c.buffer,g=c.offset,_=c.stride,G=c.normalized,Q=c.size,tt=c.divisor;this.buffer=h,this.attribute={buffer:h.get(),offset:g||0,stride:_||0,normalized:G||!1,divisor:tt||0},Q&&(this.attribute.size=Q)}return(0,vn.Z)(s,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(c){this.buffer.subData(c)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),s}(),lv,vd,gd,Ap,Zy,Kv,N0,jg,Kp,Au,bc,Qc,md,Hy,EM=(lv={},(0,Y.Z)(lv,Zt.POINTS,"points"),(0,Y.Z)(lv,Zt.LINES,"lines"),(0,Y.Z)(lv,Zt.LINE_LOOP,"line loop"),(0,Y.Z)(lv,Zt.LINE_STRIP,"line strip"),(0,Y.Z)(lv,Zt.TRIANGLES,"triangles"),(0,Y.Z)(lv,Zt.TRIANGLE_FAN,"triangle fan"),(0,Y.Z)(lv,Zt.TRIANGLE_STRIP,"triangle strip"),lv),Db=(vd={},(0,Y.Z)(vd,Zt.STATIC_DRAW,"static"),(0,Y.Z)(vd,Zt.DYNAMIC_DRAW,"dynamic"),(0,Y.Z)(vd,Zt.STREAM_DRAW,"stream"),vd),ex=(gd={},(0,Y.Z)(gd,Zt.BYTE,"int8"),(0,Y.Z)(gd,Zt.UNSIGNED_INT,"int16"),(0,Y.Z)(gd,Zt.INT,"int32"),(0,Y.Z)(gd,Zt.UNSIGNED_BYTE,"uint8"),(0,Y.Z)(gd,Zt.UNSIGNED_SHORT,"uint16"),(0,Y.Z)(gd,Zt.UNSIGNED_INT,"uint32"),(0,Y.Z)(gd,Zt.FLOAT,"float"),gd),$v=(Ap={},(0,Y.Z)(Ap,Zt.ALPHA,"alpha"),(0,Y.Z)(Ap,Zt.LUMINANCE,"luminance"),(0,Y.Z)(Ap,Zt.LUMINANCE_ALPHA,"luminance alpha"),(0,Y.Z)(Ap,Zt.RGB,"rgb"),(0,Y.Z)(Ap,Zt.RGBA,"rgba"),(0,Y.Z)(Ap,Zt.RGBA4,"rgba4"),(0,Y.Z)(Ap,Zt.RGB5_A1,"rgb5 a1"),(0,Y.Z)(Ap,Zt.RGB565,"rgb565"),(0,Y.Z)(Ap,Zt.DEPTH_COMPONENT,"depth"),(0,Y.Z)(Ap,Zt.DEPTH_STENCIL,"depth stencil"),Ap),CM=(Zy={},(0,Y.Z)(Zy,Zt.DONT_CARE,"dont care"),(0,Y.Z)(Zy,Zt.NICEST,"nice"),(0,Y.Z)(Zy,Zt.FASTEST,"fast"),Zy),AM=(Kv={},(0,Y.Z)(Kv,Zt.NEAREST,"nearest"),(0,Y.Z)(Kv,Zt.LINEAR,"linear"),(0,Y.Z)(Kv,Zt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Y.Z)(Kv,Zt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Y.Z)(Kv,Zt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Y.Z)(Kv,Zt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Kv),jy=(N0={},(0,Y.Z)(N0,Zt.REPEAT,"repeat"),(0,Y.Z)(N0,Zt.CLAMP_TO_EDGE,"clamp"),(0,Y.Z)(N0,Zt.MIRRORED_REPEAT,"mirror"),N0),MM=(jg={},(0,Y.Z)(jg,Zt.NONE,"none"),(0,Y.Z)(jg,Zt.BROWSER_DEFAULT_WEBGL,"browser"),jg),Xy=(Kp={},(0,Y.Z)(Kp,Zt.NEVER,"never"),(0,Y.Z)(Kp,Zt.ALWAYS,"always"),(0,Y.Z)(Kp,Zt.LESS,"less"),(0,Y.Z)(Kp,Zt.LEQUAL,"lequal"),(0,Y.Z)(Kp,Zt.GREATER,"greater"),(0,Y.Z)(Kp,Zt.GEQUAL,"gequal"),(0,Y.Z)(Kp,Zt.EQUAL,"equal"),(0,Y.Z)(Kp,Zt.NOTEQUAL,"notequal"),Kp),Yy=(Au={},(0,Y.Z)(Au,Zt.FUNC_ADD,"add"),(0,Y.Z)(Au,Zt.MIN_EXT,"min"),(0,Y.Z)(Au,Zt.MAX_EXT,"max"),(0,Y.Z)(Au,Zt.FUNC_SUBTRACT,"subtract"),(0,Y.Z)(Au,Zt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Au),Xg=(bc={},(0,Y.Z)(bc,Zt.ZERO,"zero"),(0,Y.Z)(bc,Zt.ONE,"one"),(0,Y.Z)(bc,Zt.SRC_COLOR,"src color"),(0,Y.Z)(bc,Zt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Y.Z)(bc,Zt.SRC_ALPHA,"src alpha"),(0,Y.Z)(bc,Zt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Y.Z)(bc,Zt.DST_COLOR,"dst color"),(0,Y.Z)(bc,Zt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Y.Z)(bc,Zt.DST_ALPHA,"dst alpha"),(0,Y.Z)(bc,Zt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Y.Z)(bc,Zt.CONSTANT_COLOR,"constant color"),(0,Y.Z)(bc,Zt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Y.Z)(bc,Zt.CONSTANT_ALPHA,"constant alpha"),(0,Y.Z)(bc,Zt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Y.Z)(bc,Zt.SRC_ALPHA_SATURATE,"src alpha saturate"),bc),Bb=(Qc={},(0,Y.Z)(Qc,Zt.NEVER,"never"),(0,Y.Z)(Qc,Zt.ALWAYS,"always"),(0,Y.Z)(Qc,Zt.LESS,"less"),(0,Y.Z)(Qc,Zt.LEQUAL,"lequal"),(0,Y.Z)(Qc,Zt.GREATER,"greater"),(0,Y.Z)(Qc,Zt.GEQUAL,"gequal"),(0,Y.Z)(Qc,Zt.EQUAL,"equal"),(0,Y.Z)(Qc,Zt.NOTEQUAL,"notequal"),Qc),Yg=(md={},(0,Y.Z)(md,Zt.ZERO,"zero"),(0,Y.Z)(md,Zt.KEEP,"keep"),(0,Y.Z)(md,Zt.REPLACE,"replace"),(0,Y.Z)(md,Zt.INVERT,"invert"),(0,Y.Z)(md,Zt.INCR,"increment"),(0,Y.Z)(md,Zt.DECR,"decrement"),(0,Y.Z)(md,Zt.INCR_WRAP,"increment wrap"),(0,Y.Z)(md,Zt.DECR_WRAP,"decrement wrap"),md),z0=(Hy={},(0,Y.Z)(Hy,Zt.FRONT,"front"),(0,Y.Z)(Hy,Zt.BACK,"back"),Hy),TM=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"buffer",void 0);var h=c.data,g=c.usage,_=c.type;this.buffer=p.buffer({data:h,usage:Db[g||Zt.STATIC_DRAW],type:ex[_||Zt.UNSIGNED_BYTE]})}return(0,vn.Z)(s,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(c){var h=c.data,g=c.offset;this.buffer.subdata(h,g)}}]),s}(),PM=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"elements",void 0);var h=c.data,g=c.usage,_=c.type,G=c.count;this.elements=p.elements({data:h,usage:Db[g||Zt.STATIC_DRAW],type:ex[_||Zt.UNSIGNED_BYTE],count:G})}return(0,vn.Z)(s,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(c){var h=c.data;this.elements.subdata(h)}},{key:"destroy",value:function(){}}]),s}(),IM=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"framebuffer",void 0);var h=c.width,g=c.height,_=c.color,G=c.colors,Q=c.depth,tt=c.stencil,ft={width:h,height:g};Array.isArray(G)&&(ft.colors=G.map(function(Et){return Et.get()})),_&&typeof _!="boolean"&&(ft.color=_.get()),this.framebuffer=p.framebuffer(ft)}return(0,vn.Z)(s,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(c){var h=c.width,g=c.height;this.framebuffer.resize(h,g)}}]),s}(),Fb=S(36719),OM=S.n(Fb),LM=S(68630),kM=S.n(LM);function Nb(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function yd(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?Nb(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Nb(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var zb=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"reGl",void 0),(0,Y.Z)(this,"destroyed",!1),(0,Y.Z)(this,"drawCommand",void 0),(0,Y.Z)(this,"drawPickCommand",void 0),(0,Y.Z)(this,"drawParams",void 0),(0,Y.Z)(this,"options",void 0),(0,Y.Z)(this,"uniforms",{}),this.reGl=p;var h=c.vs,g=c.fs,_=c.attributes,G=c.uniforms,Q=c.primitive,tt=c.count,ft=c.elements,Et=c.depth,Bt=c.blend,se=c.stencil,xe=c.cull,De=c.instances,Xe={};this.options=c,G&&(this.uniforms=this.extractUniforms(G),Object.keys(G).forEach(function(sn){Xe[sn]=p.prop(sn)}));var Qe={};Object.keys(_).forEach(function(sn){Qe[sn]=_[sn].get()});var br={attributes:Qe,frag:g,uniforms:Xe,vert:h,blend:{},primitive:EM[Q===void 0?Zt.TRIANGLES:Q]};De&&(br.instances=De),tt&&(br.count=tt),ft&&(br.elements=ft.get()),this.initDepthDrawParams({depth:Et},br),this.initBlendDrawParams({blend:Bt},br),this.initStencilDrawParams({stencil:se},br),this.initCullDrawParams({cull:xe},br),this.drawCommand=p(br);var Wr=At()(br);Wr.blend=yd(yd({},Wr.blend),{},{enable:!1}),Wr.stencil=yd(yd({},Wr.stencil),{},{enable:!1}),this.drawPickCommand=p(Wr),this.drawParams=br}return(0,vn.Z)(s,[{key:"addUniforms",value:function(c){this.uniforms=yd(yd({},this.uniforms),this.extractUniforms(c))}},{key:"draw",value:function(c,h){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var g=yd(yd({},this.uniforms),this.extractUniforms(c.uniforms||{})),_={};Object.keys(g).forEach(function(G){var Q=(0,Gr.Z)(g[G]);Q==="boolean"||Q==="number"||Array.isArray(g[G])||g[G].BYTES_PER_ELEMENT?_[G]=g[G]:_[G]=g[G].get()}),h?this.drawPickCommand(_):this.drawCommand(_)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(c){c.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(c,h){var g=c.depth;g&&(h.depth={enable:g.enable===void 0?!0:!!g.enable,mask:g.mask===void 0?!0:!!g.mask,func:Xy[g.func||Zt.LESS],range:g.range||[0,1]})}},{key:"initBlendDrawParams",value:function(c,h){var g=c.blend;if(g){var _=g.enable,G=g.func,Q=g.equation,tt=g.color,ft=tt===void 0?[0,0,0,0]:tt;h.blend={enable:!!_,func:{srcRGB:Xg[G&&G.srcRGB||Zt.SRC_ALPHA],srcAlpha:Xg[G&&G.srcAlpha||Zt.SRC_ALPHA],dstRGB:Xg[G&&G.dstRGB||Zt.ONE_MINUS_SRC_ALPHA],dstAlpha:Xg[G&&G.dstAlpha||Zt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Yy[Q&&Q.rgb||Zt.FUNC_ADD],alpha:Yy[Q&&Q.alpha||Zt.FUNC_ADD]},color:ft}}}},{key:"initStencilDrawParams",value:function(c,h){var g=c.stencil;if(g){var _=g.enable,G=g.mask,Q=G===void 0?-1:G,tt=g.func,ft=tt===void 0?{cmp:Zt.ALWAYS,ref:0,mask:-1}:tt,Et=g.opFront,Bt=Et===void 0?{fail:Zt.KEEP,zfail:Zt.KEEP,zpass:Zt.KEEP}:Et,se=g.opBack,xe=se===void 0?{fail:Zt.KEEP,zfail:Zt.KEEP,zpass:Zt.KEEP}:se;h.stencil={enable:!!_,mask:Q,func:yd(yd({},ft),{},{cmp:Bb[ft.cmp]}),opFront:{fail:Yg[Bt.fail],zfail:Yg[Bt.zfail],zpass:Yg[Bt.zpass]},opBack:{fail:Yg[xe.fail],zfail:Yg[xe.zfail],zpass:Yg[xe.zpass]}}}}},{key:"initCullDrawParams",value:function(c,h){var g=c.cull;if(g){var _=g.enable,G=g.face,Q=G===void 0?Zt.BACK:G;h.cull={enable:!!_,face:z0[Q]}}}},{key:"extractUniforms",value:function(c){var h=this,g={};return Object.keys(c).forEach(function(_){h.extractUniformsRecursively(_,c[_],g,"")}),g}},{key:"extractUniformsRecursively",value:function(c,h,g,_){var G=this;if(h===null||typeof h=="number"||typeof h=="boolean"||Array.isArray(h)&&typeof h[0]=="number"||OM()(h)||h===""||"resize"in h){g["".concat(_&&_+".").concat(c)]=h;return}kM()(h)&&Object.keys(h).forEach(function(Q){G.extractUniformsRecursively(Q,h[Q],g,"".concat(_&&_+".").concat(c))}),Array.isArray(h)&&h.forEach(function(Q,tt){Object.keys(Q).forEach(function(ft){G.extractUniformsRecursively(ft,Q[ft],g,"".concat(_&&_+".").concat(c,"[").concat(tt,"]"))})})}}]),s}(),Gb=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"texture",void 0),(0,Y.Z)(this,"width",void 0),(0,Y.Z)(this,"height",void 0),(0,Y.Z)(this,"isDistroy",!1);var h=c.data,g=c.type,_=g===void 0?Zt.UNSIGNED_BYTE:g,G=c.width,Q=c.height,tt=c.flipY,ft=tt===void 0?!1:tt,Et=c.format,Bt=Et===void 0?Zt.RGBA:Et,se=c.mipmap,xe=se===void 0?!1:se,De=c.wrapS,Xe=De===void 0?Zt.CLAMP_TO_EDGE:De,Qe=c.wrapT,br=Qe===void 0?Zt.CLAMP_TO_EDGE:Qe,Wr=c.aniso,sn=Wr===void 0?0:Wr,xn=c.alignment,Rn=xn===void 0?1:xn,Bn=c.premultiplyAlpha,Qn=Bn===void 0?!1:Bn,di=c.mag,ta=di===void 0?Zt.NEAREST:di,Ca=c.min,Fi=Ca===void 0?Zt.NEAREST:Ca,ja=c.colorSpace,ro=ja===void 0?Zt.BROWSER_DEFAULT_WEBGL:ja;this.width=G,this.height=Q;var Bo={width:G,height:Q,type:ex[_],format:$v[Bt],wrapS:jy[Xe],wrapT:jy[br],mag:AM[ta],min:AM[Fi],alignment:Rn,flipY:ft,colorSpace:MM[ro],premultiplyAlpha:Qn,aniso:sn};h&&(Bo.data=h),typeof xe=="number"?Bo.mipmap=CM[xe]:typeof xe=="boolean"&&(Bo.mipmap=xe),this.texture=p.texture(Bo)}return(0,vn.Z)(s,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(c)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(c){var h=c.width,g=c.height;this.texture.resize(h,g),this.width=h,this.height=g}},{key:"destroy",value:function(){this.isDistroy||this.texture.destroy(),this.isDistroy=!0}}]),s}(),rx,nx,RM=(rx=(0,sa.b2)(),rx(nx=function(){function s(){var p=this;(0,cn.Z)(this,s),(0,Y.Z)(this,"extensionObject",void 0),(0,Y.Z)(this,"gl",void 0),(0,Y.Z)(this,"$container",void 0),(0,Y.Z)(this,"canvas",void 0),(0,Y.Z)(this,"width",void 0),(0,Y.Z)(this,"height",void 0),(0,Y.Z)(this,"isDirty",void 0),(0,Y.Z)(this,"createModel",function(c){return new zb(p.gl,c)}),(0,Y.Z)(this,"createAttribute",function(c){return new wM(p.gl,c)}),(0,Y.Z)(this,"createBuffer",function(c){return new TM(p.gl,c)}),(0,Y.Z)(this,"createElements",function(c){return new PM(p.gl,c)}),(0,Y.Z)(this,"createTexture2D",function(c){return new Gb(p.gl,c)}),(0,Y.Z)(this,"createFramebuffer",function(c){return new IM(p.gl,c)}),(0,Y.Z)(this,"useFramebuffer",function(c,h){p.gl({framebuffer:c?c.get():null})(h)}),(0,Y.Z)(this,"clear",function(c){var h=c.color,g=c.depth,_=c.stencil,G=c.framebuffer,Q=G===void 0?null:G,tt={color:h,depth:g,stencil:_};tt.framebuffer=Q===null?Q:Q.get(),p.gl.clear(tt)}),(0,Y.Z)(this,"viewport",function(c){var h=c.x,g=c.y,_=c.width,G=c.height;p.gl._gl.viewport(h,g,_,G),p.width=_,p.height=G,p.gl._refresh()}),(0,Y.Z)(this,"readPixels",function(c){var h=c.framebuffer,g=c.x,_=c.y,G=c.width,Q=c.height,tt={x:g,y:_,width:G,height:Q};return h&&(tt.framebuffer=h.get()),p.gl.read(tt)}),(0,Y.Z)(this,"getViewportSize",function(){return{width:p.gl._gl.drawingBufferWidth,height:p.gl._gl.drawingBufferHeight}}),(0,Y.Z)(this,"getContainer",function(){if(Ms)return p.canvas;var c;return(c=p.canvas)===null||c===void 0?void 0:c.parentElement}),(0,Y.Z)(this,"getCanvas",function(){return p.canvas}),(0,Y.Z)(this,"getGLContext",function(){return p.gl._gl}),(0,Y.Z)(this,"destroy",function(){p.gl.destroy()})}return(0,vn.Z)(s,[{key:"init",value:function(){var p=(0,Mt.Z)(ge().mark(function h(g,_){var G=this;return ge().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return this.canvas=g,tt.next=3,new Promise(function(ft,Et){SM()({canvas:G.canvas,attributes:{alpha:!0,antialias:_.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,stencil:_.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(se,xe){(se||!xe)&&Et(se),ft(xe)}})});case 3:this.gl=tt.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return tt.stop()}},h,this)}));function c(h,g){return p.apply(this,arguments)}return c}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(c){return!!this.getGLContext().getExtension(c)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var c=this.getGLContext();c.disable(c.CULL_FACE)}},{key:"setDirty",value:function(c){this.isDirty=c}},{key:"getDirty",value:function(){return this.isDirty}}]),s}())||nx);function ix(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function DM(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?ix(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ix(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var qc=function(){function s(p){(0,cn.Z)(this,s),(0,Y.Z)(this,"sceneService",void 0),(0,Y.Z)(this,"mapService",void 0),(0,Y.Z)(this,"controlService",void 0),(0,Y.Z)(this,"layerService",void 0),(0,Y.Z)(this,"iconService",void 0),(0,Y.Z)(this,"markerService",void 0),(0,Y.Z)(this,"popupService",void 0),(0,Y.Z)(this,"fontService",void 0),(0,Y.Z)(this,"interactionService",void 0),(0,Y.Z)(this,"container",void 0);var c=p.id,h=p.map,g=p.canvas,_=p.hasBaseMap,G=$A();this.container=G,h.setContainer(G,c,g,_),G.bind(Vn.IRendererService).to(RM).inSingletonScope(),this.sceneService=G.get(Vn.ISceneService),this.mapService=G.get(Vn.IMapService),this.iconService=G.get(Vn.IIconService),this.fontService=G.get(Vn.IFontService),this.controlService=G.get(Vn.IControlService),this.layerService=G.get(Vn.ILayerService),this.markerService=G.get(Vn.IMarkerService),this.interactionService=G.get(Vn.IInteractionService),this.popupService=G.get(Vn.IPopupService),Ms?this.sceneService.initMiniScene(p):(this.initComponent(c),this.sceneService.init(p),this.initControl())}return(0,vn.Z)(s,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(c){return this.sceneService.exportPng(c)}},{key:"exportMap",value:function(c){return this.sceneService.exportPng(c)}},{key:"registerRenderService",value:function(c){var h=this;if(this.sceneService.loaded){var g=new c(this);g.init()}else this.on("loaded",function(){var _=new c(h);_.init()})}},{key:"setBgColor",value:function(c){this.mapService.setBgColor(c)}},{key:"addLayer",value:function(c){var h=QA(this.container);c.setContainer(h,this.container),this.sceneService.addLayer(c)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(c){return this.layerService.getLayer(c)}},{key:"getLayerByName",value:function(c){return this.layerService.getLayerByName(c)}},{key:"removeLayer",value:function(c,h){this.layerService.remove(c,h)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(c){this.layerService.setEnableRender(c)}},{key:"addIconFont",value:function(c,h){this.fontService.addIconFont(c,h)}},{key:"addIconFonts",value:function(c){var h=this;c.forEach(function(g){var _=(0,ga.Z)(g,2),G=_[0],Q=_[1];h.fontService.addIconFont(G,Q)})}},{key:"addFontFace",value:function(c,h){this.sceneService.addFontFace(c,h)}},{key:"addImage",value:function(c,h){Ms?this.iconService.addImageMini(c,h,this.sceneService):this.iconService.addImage(c,h)}},{key:"hasImage",value:function(c){return this.iconService.hasImage(c)}},{key:"removeImage",value:function(c){this.iconService.removeImage(c)}},{key:"addIconFontGlyphs",value:function(c,h){this.fontService.addIconGlyphs(h)}},{key:"addControl",value:function(c){this.controlService.addControl(c,this.container)}},{key:"removeControl",value:function(c){this.controlService.removeControl(c)}},{key:"getControlByName",value:function(c){return this.controlService.getControlByName(c)}},{key:"addMarker",value:function(c){this.markerService.addMarker(c)}},{key:"addMarkerLayer",value:function(c){this.markerService.addMarkerLayer(c)}},{key:"removeMarkerLayer",value:function(c){this.markerService.removeMarkerLayer(c)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(c){this.popupService.addPopup(c)}},{key:"on",value:function(c,h){q1.indexOf(c)===-1?this.mapService.on(c,h):this.sceneService.on(c,h)}},{key:"once",value:function(c,h){q1.indexOf(c)===-1?this.mapService.once(c,h):this.sceneService.once(c,h)}},{key:"off",value:function(c,h){q1.indexOf(c)===-1?this.mapService.off(c,h):this.sceneService.off(c,h)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(c){return this.mapService.getCenter(c)}},{key:"setCenter",value:function(c,h){return this.mapService.setCenter(c,h)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(c){return this.mapService.setPitch(c)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(c){this.mapService.setRotation(c)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(c){this.mapService.panTo(c)}},{key:"panBy",value:function(c,h){this.mapService.panBy(c,h)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(c){this.mapService.setZoom(c)}},{key:"fitBounds",value:function(c,h){var g=this.sceneService.getSceneConfig(),_=g.fitBoundsOptions,G=g.animate;this.mapService.fitBounds(c,h||DM(DM({},_),{},{animate:G}))}},{key:"setZoomAndCenter",value:function(c,h){this.mapService.setZoomAndCenter(c,h)}},{key:"setMapStyle",value:function(c){this.mapService.setMapStyle(c)}},{key:"setMapStatus",value:function(c){this.mapService.setMapStatus(c)}},{key:"pixelToLngLat",value:function(c){return this.mapService.pixelToLngLat(c)}},{key:"lngLatToPixel",value:function(c){return this.mapService.lngLatToPixel(c)}},{key:"containerToLngLat",value:function(c){return this.mapService.containerToLngLat(c)}},{key:"lngLatToContainer",value:function(c){return this.mapService.lngLatToContainer(c)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(c,h){this.container.bind(Vn.IPostProcessingPass).to(c).whenTargetNamed(h)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(c){this.controlService.init({container:Qs(c)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var c=this.sceneService.getSceneConfig(),h=c.logoVisible,g=c.logoPosition;h&&this.addControl(new Ab({position:g}))}}]),s}(),Ub=S(13218),Jc=S.n(Ub),yf,ax,Vb,Pm,ox;function Zb(s){return s.map(function(p){return typeof p=="string"&&(p=[p,{}]),p})}var Hb=(yf=(0,sa.b2)(),ax=(0,sa.f3)(Vn.IGlobalConfigService),yf(Vb=(Pm=function(){function s(){(0,cn.Z)(this,s),Xi(this,"configService",ox,this),(0,Y.Z)(this,"enabled",void 0)}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=this,_=h.rendererService,G=h.postProcessingPassFactory,Q=h.normalPassFactory;c.hooks.init.tap("MultiPassRendererPlugin",function(){var tt=c.getLayerConfig(),ft=tt.enableMultiPassRenderer,Et=tt.passes,Bt=Et===void 0?[]:Et;g.enabled=!!ft&&c.getLayerConfig().enableMultiPassRenderer!==!1,g.enabled&&(c.multiPassRenderer=g.createMultiPassRenderer(c,Bt,G,Q),c.multiPassRenderer.setRenderFlag(!0))}),c.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(c,h,g,_){var G=c.multiPassRenderer,Q=c.getLayerConfig(),tt=Q.enablePicking,ft=Q.enableTAA;return tt&&G.add(_("pixelPicking")),G}}]),s}(),ox=ya(Pm.prototype,"configService",[ax],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pm))||Vb),Qv,jb=(Qv={},(0,Y.Z)(Qv,Cp.additive,{enable:!0,func:{srcRGB:Zt.ONE,dstRGB:Zt.ONE,srcAlpha:1,dstAlpha:1}}),(0,Y.Z)(Qv,Cp.none,{enable:!1}),(0,Y.Z)(Qv,Cp.normal,{enable:!0,func:{srcRGB:Zt.SRC_ALPHA,dstRGB:Zt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,Y.Z)(Qv,Cp.subtractive,{enable:!0,func:{srcRGB:Zt.ONE,dstRGB:Zt.ONE,srcAlpha:Zt.ZERO,dstAlpha:Zt.ONE_MINUS_SRC_COLOR},equation:{rgb:Zt.FUNC_SUBTRACT,alpha:Zt.FUNC_SUBTRACT}}),(0,Y.Z)(Qv,Cp.max,{enable:!0,func:{srcRGB:Zt.ONE,dstRGB:Zt.ONE},equation:{rgb:Zt.MAX_EXT}}),(0,Y.Z)(Qv,Cp.min,{enable:!0,func:{srcRGB:Zt.ONE,dstRGB:Zt.ONE},equation:{rgb:Zt.MIN_EXT}}),Qv),sx=S(81763),su=S.n(sx),_l=S(1469),Wg=S.n(_l),mk=1024;function zf(s,p,c,h,g){p.updateStyleAttribute(s,c,h,g)}function BM(s,p){s.opacity&&Wy("opacity",p,s.opacity),s.strokeWidth&&Wy("strokeWidth",p,s.strokeWidth),s.strokeOpacity&&Wy("strokeOpacity",p,s.strokeOpacity),s.stroke&&FM("stroke",p,s.stroke),s.offsets&&Xb("offsets",p,s.offsets),s.textOffset&&Xb("textOffset",p,s.textOffset),s.thetaOffset&&Wy("thetaOffset",p,s.thetaOffset)}function Wy(s,p,c){C()(c)?zf(s,p,c,function(h){return h}):su()(c)?zf(s,p,[c],void 0):Wg()(c)&&c.length===2?C()(c[0])&&ut()(c[1])||C()(c[0])&&Wg()(c[1])&&su()(c[1][0])&&su()(c[1][1])?zf(s,p,c[0],c[1]):zf(s,p,[1],void 0):zf(s,p,[1],void 0)}function Xb(s,p,c){C()(c)?zf(s,p,c,function(h){return h}):Wg()(c)&&c.length===2&&C()(c[0])&&ut()(c[1])?zf(s,p,c[0],c[1]):Wg()(c)&&c.length===2&&su()(c[0])&&su()(c[1])?zf(s,p,c,void 0):zf(s,p,[0,0],void 0)}function FM(s,p,c){C()(c)?zf(s,p,c,void 0):Wg()(c)&&c.length===2&&(C()(c[0])&&ut()(c[1])||C()(c[0])&&Wg()(c[1])&&c[1].length>0)?zf(s,p,c[0],c[1]):zf(s,p,"#fff",void 0)}var Yb=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function Es(s,p,c){typeof p=="string"&&typeof c=="string"&&p!==c&&Yb.map(function(h){h.includes(p)&&h.includes(c)&&(s.dataState.dataSourceNeedUpdate=!0)})}var NM=["passes"],zM=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber"],Xo,ux,G0;function GM(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Wb(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function Wb(s,p){if(!!s){if(typeof s=="string")return Kb(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Kb(s,p)}}function Kb(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function lx(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function Xc(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?lx(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):lx(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function UM(s){var p=VM();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function VM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var $b=0,Kg=(Xo=zy(Vn.IGlobalConfigService),ux=function(s){(0,vi.Z)(c,s);var p=UM(c);function c(){var h,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,cn.Z)(this,c),h=p.call(this),(0,Y.Z)((0,Tt.Z)(h),"id","".concat($b++)),(0,Y.Z)((0,Tt.Z)(h),"name","".concat($b)),(0,Y.Z)((0,Tt.Z)(h),"type",void 0),(0,Y.Z)((0,Tt.Z)(h),"visible",!0),(0,Y.Z)((0,Tt.Z)(h),"zIndex",0),(0,Y.Z)((0,Tt.Z)(h),"minZoom",void 0),(0,Y.Z)((0,Tt.Z)(h),"maxZoom",void 0),(0,Y.Z)((0,Tt.Z)(h),"inited",!1),(0,Y.Z)((0,Tt.Z)(h),"layerModelNeedUpdate",!1),(0,Y.Z)((0,Tt.Z)(h),"pickedFeatureID",null),(0,Y.Z)((0,Tt.Z)(h),"selectedFeatureID",null),(0,Y.Z)((0,Tt.Z)(h),"styleNeedUpdate",!1),(0,Y.Z)((0,Tt.Z)(h),"rendering",void 0),(0,Y.Z)((0,Tt.Z)(h),"clusterZoom",0),(0,Y.Z)((0,Tt.Z)(h),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Y.Z)((0,Tt.Z)(h),"hooks",{init:new tc,afterInit:new tc,beforeRender:new tc,beforeRenderData:new jl,afterRender:new tu,beforePickingEncode:new tu,afterPickingEncode:new tu,beforeHighlight:new tu(["pickedColor"]),afterHighlight:new tu,beforeSelect:new tu(["pickedColor"]),afterSelect:new tu,beforeDestroy:new tu,afterDestroy:new tu}),(0,Y.Z)((0,Tt.Z)(h),"models",[]),(0,Y.Z)((0,Tt.Z)(h),"multiPassRenderer",void 0),(0,Y.Z)((0,Tt.Z)(h),"plugins",void 0),(0,Y.Z)((0,Tt.Z)(h),"sourceOption",void 0),(0,Y.Z)((0,Tt.Z)(h),"layerModel",void 0),(0,Y.Z)((0,Tt.Z)(h),"sceneContainer",void 0),(0,Y.Z)((0,Tt.Z)(h),"layerChildren",[]),Xi((0,Tt.Z)(h),"configService",G0,(0,Tt.Z)(h)),(0,Y.Z)((0,Tt.Z)(h),"shaderModuleService",void 0),(0,Y.Z)((0,Tt.Z)(h),"cameraService",void 0),(0,Y.Z)((0,Tt.Z)(h),"coordinateService",void 0),(0,Y.Z)((0,Tt.Z)(h),"iconService",void 0),(0,Y.Z)((0,Tt.Z)(h),"fontService",void 0),(0,Y.Z)((0,Tt.Z)(h),"pickingService",void 0),(0,Y.Z)((0,Tt.Z)(h),"rendererService",void 0),(0,Y.Z)((0,Tt.Z)(h),"layerService",void 0),(0,Y.Z)((0,Tt.Z)(h),"interactionService",void 0),(0,Y.Z)((0,Tt.Z)(h),"mapService",void 0),(0,Y.Z)((0,Tt.Z)(h),"styleAttributeService",void 0),(0,Y.Z)((0,Tt.Z)(h),"layerSource",void 0),(0,Y.Z)((0,Tt.Z)(h),"postProcessingPassFactory",void 0),(0,Y.Z)((0,Tt.Z)(h),"normalPassFactory",void 0),(0,Y.Z)((0,Tt.Z)(h),"animateOptions",{enable:!1}),(0,Y.Z)((0,Tt.Z)(h),"container",void 0),(0,Y.Z)((0,Tt.Z)(h),"encodedData",void 0),(0,Y.Z)((0,Tt.Z)(h),"configSchema",void 0),(0,Y.Z)((0,Tt.Z)(h),"currentPickId",null),(0,Y.Z)((0,Tt.Z)(h),"rawConfig",void 0),(0,Y.Z)((0,Tt.Z)(h),"needUpdateConfig",void 0),(0,Y.Z)((0,Tt.Z)(h),"pendingStyleAttributes",[]),(0,Y.Z)((0,Tt.Z)(h),"scaleOptions",{}),(0,Y.Z)((0,Tt.Z)(h),"animateStartTime",void 0),(0,Y.Z)((0,Tt.Z)(h),"aniamateStatus",!1),(0,Y.Z)((0,Tt.Z)(h),"bottomColor","rgba(0, 0, 0, 0)"),(0,Y.Z)((0,Tt.Z)(h),"isDestroied",!1),(0,Y.Z)((0,Tt.Z)(h),"sourceEvent",function(){h.dataState.dataSourceNeedUpdate=!0;var _=h.getLayerConfig(),G=_.autoFit,Q=_.fitBoundsOptions;G&&h.fitBounds(Q),h.emit("dataUpdate"),h.reRender()}),h.name=g.name||h.id,h.zIndex=g.zIndex||0,h.rawConfig=g,h}return(0,vn.Z)(c,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(g){if(!this.inited)this.needUpdateConfig=Xc(Xc({},this.needUpdateConfig),g);else{var _=this.container.get(Vn.SceneID);BM(g,this),this.configService.setLayerConfig(_,this.id,Xc(Xc(Xc({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),g)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(g,_){this.container=g,this.sceneContainer=_}},{key:"getContainer",value:function(){return this.container}},{key:"setBottomColor",value:function(g){this.bottomColor=g}},{key:"getBottomColor",value:function(){return this.bottomColor}},{key:"addPlugin",value:function(g){return this.plugins.push(g),this}},{key:"init",value:function(){var g=this,_=this.container.get(Vn.SceneID),G=this.rawConfig.enableMultiPassRenderer,Q=G===void 0?!1:G;this.configService.setLayerConfig(_,this.id,{enableMultiPassRenderer:Q}),this.iconService=this.container.get(Vn.IIconService),this.fontService=this.container.get(Vn.IFontService),this.rendererService=this.container.get(Vn.IRendererService),this.layerService=this.container.get(Vn.ILayerService),this.interactionService=this.container.get(Vn.IInteractionService),this.pickingService=this.container.get(Vn.IPickingService),this.mapService=this.container.get(Vn.IMapService),this.cameraService=this.container.get(Vn.ICameraService),this.coordinateService=this.container.get(Vn.ICoordinateSystemService),this.shaderModuleService=this.container.get(Vn.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Vn.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Vn.IFactoryNormalPass),this.styleAttributeService=this.container.get(Vn.IStyleAttributeService),this.multiPassRenderer=this.container.get(Vn.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(Bt){var se=Bt.attributeName,xe=Bt.attributeField,De=Bt.attributeValues,Xe=Bt.updateOptions;g.styleAttributeService.updateStyleAttribute(se,{scale:Xc({field:xe},g.splitValuesAndCallbackInAttribute(De,g.getLayerConfig()[se]))},Xe)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Vn.ILayerPlugin);var tt=GM(this.plugins),ft;try{for(tt.s();!(ft=tt.n()).done;){var Et=ft.value;Et.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(Bt){tt.e(Bt)}finally{tt.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(Xc(Xc({},this.getDefaultConfig()),this.rawConfig));var g=this.getLayerConfig(),_=g.animateOption;_!=null&&_.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(g,_,G){return this.updateStyleAttribute("color",g,_,G),this}},{key:"texture",value:function(g,_,G){return this.updateStyleAttribute("texture",g,_,G),this}},{key:"rotate",value:function(g,_,G){return this.updateStyleAttribute("rotate",g,_,G),this}},{key:"size",value:function(g,_,G){return this.updateStyleAttribute("size",g,_,G),this}},{key:"filter",value:function(g,_,G){return this.updateStyleAttribute("filter",g,_,G),this}},{key:"shape",value:function(g,_,G){var Q,tt,ft,Et=(Q=this.styleAttributeService)===null||Q===void 0||(tt=Q.getLayerStyleAttribute("shape"))===null||tt===void 0||(ft=tt.scale)===null||ft===void 0?void 0:ft.field,Bt=g;return this.updateStyleAttribute("shape",g,_,G),Es(this,Et,Bt),this}},{key:"label",value:function(g,_,G){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:g,attributeValues:_,updateOptions:G}),this}},{key:"animate",value:function(g){var _={};return Jc()(g)?(_.enable=!0,_=Xc(Xc({},_),g)):_.enable=g,this.updateLayerConfig({animateOption:_}),this}},{key:"source",value:function(g,_){return g!=null&&g.data?(this.setSource(g),this):(this.sourceOption={data:g,options:_},this.clusterZoom=0,this)}},{key:"setData",value:function(g,_){var G=this;return this.inited?this.layerSource.setData(g,_):this.on("inited",function(){G.layerSource.setData(g,_)}),this}},{key:"style",value:function(g){var _=this,G=g.passes,Q=(0,_u.Z)(g,NM);return G&&Zb(G).forEach(function(tt){var ft=_.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(tt[0]);ft&&ft.updateOptions(tt[1])}),this.rawConfig=Xc(Xc({},this.rawConfig),Q),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(g,_){return Jc()(g)?this.scaleOptions=Xc(Xc({},this.scaleOptions),g):this.scaleOptions[g]=_,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.getEncodedData().length!==0&&this.renderModels(),this}},{key:"active",value:function(g){var _={};return _.enableHighlight=Jc()(g)?!0:g,Jc()(g)?(_.enableHighlight=!0,g.color&&(_.highlightColor=g.color),g.mix&&(_.activeMix=g.mix)):_.enableHighlight=!!g,this.updateLayerConfig(_),this}},{key:"setActive",value:function(g,_){var G=this;if(Jc()(g)){var Q=g.x,tt=Q===void 0?0:Q,ft=g.y,Et=ft===void 0?0:ft;this.updateLayerConfig({highlightColor:Jc()(_)?_.color:this.getLayerConfig().highlightColor,activeMix:Jc()(_)?_.mix:this.getLayerConfig().activeMix}),this.pick({x:tt,y:Et})}else this.updateLayerConfig({pickedFeatureID:g,highlightColor:Jc()(_)?_.color:this.getLayerConfig().highlightColor,activeMix:Jc()(_)?_.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(pc(g)).then(function(){setTimeout(function(){G.reRender()},1)})}},{key:"select",value:function(g){var _={};return _.enableSelect=Jc()(g)?!0:g,Jc()(g)?(_.enableSelect=!0,g.color&&(_.selectColor=g.color),g.mix&&(_.selectMix=g.mix)):_.enableSelect=!!g,this.updateLayerConfig(_),this}},{key:"setSelect",value:function(g,_){var G=this;if(Jc()(g)){var Q=g.x,tt=Q===void 0?0:Q,ft=g.y,Et=ft===void 0?0:ft;this.updateLayerConfig({selectColor:Jc()(_)?_.color:this.getLayerConfig().selectColor,selectMix:Jc()(_)?_.mix:this.getLayerConfig().selectMix}),this.pick({x:tt,y:Et})}else this.updateLayerConfig({pickedFeatureID:g,selectColor:Jc()(_)?_.color:this.getLayerConfig().selectColor,selectMix:Jc()(_)?_.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(pc(g)).then(function(){setTimeout(function(){G.reRender()},1)})}},{key:"setBlend",value:function(g){this.updateLayerConfig({blend:g}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(g){return this.zIndex=g,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(g){this.currentPickId=g}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(g){this.selectedFeatureID=g}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var g=this.mapService.getZoom(),_=this.getLayerConfig(),G=_.visible,Q=_.minZoom,tt=Q===void 0?-Infinity:Q,ft=_.maxZoom,Et=ft===void 0?Infinity:ft;return!!G&&g>=tt&&g<=Et}},{key:"setMinZoom",value:function(g){return this.updateLayerConfig({minZoom:g}),this}},{key:"getMinZoom",value:function(){var g=this.getLayerConfig(),_=g.minZoom;return _}},{key:"getMaxZoom",value:function(){var g=this.getLayerConfig(),_=g.maxZoom;return _}},{key:"get",value:function(g){var _=this.getLayerConfig();return _[g]}},{key:"setMaxZoom",value:function(g){return this.updateLayerConfig({maxZoom:g}),this}},{key:"fitBounds",value:function(g){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var _=this.getSource(),G=_.extent,Q=G.some(function(tt){return Math.abs(tt)===Infinity});return Q?this:(this.mapService.fitBounds([[G[0],G[1]],[G[2],G[3]]],g),this)}},{key:"destroy",value:function(){this.isDestroied||(this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.models=[],this.layerService.cleanRemove(this),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroied=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(g){return g.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(g){return g.needRescale||g.needRemapping||g.needRegenerateVertices}).length}},{key:"setSource",value:function(g){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=g,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var _=this.mapService.getZoom();this.layerSource.updateClusterData(_)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(g){this.encodedData=g}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getLegendItems",value:function(g){var _=this.styleAttributeService.getLayerAttributeScale(g);if(_){if(_.ticks){var G=_.ticks().map(function(tt){return(0,Y.Z)({value:tt},g,_(tt))});return G}else if(_.invertExtent){var Q=_.range().map(function(tt){return(0,Y.Z)({value:_.invertExtent(tt)},g,tt)});return Q}}else return[]}},{key:"pick",value:function(g){var _=g.x,G=g.y;this.interactionService.triggerHover({x:_,y:G})}},{key:"boxSelect",value:function(g,_){this.pickingService.boxPickLayer(this,g,_)}},{key:"buildLayerModel",value:function(g){var _=g.moduleName,G=g.vertexShader,Q=g.fragmentShader,tt=g.triangulation,ft=g.segmentNumber,Et=(0,_u.Z)(g,zM);this.shaderModuleService.registerModule(_,{vs:G,fs:Q});var Bt=this.shaderModuleService.getModule(_),se=Bt.vs,xe=Bt.fs,De=Bt.uniforms,Xe=this.rendererService.createModel,Qe=this.styleAttributeService.createAttributesAndIndices(this.encodedData,tt,ft),br=Qe.attributes,Wr=Qe.elements;return Xe(Xc({attributes:br,uniforms:De,fs:xe,vs:se,elements:Wr,blend:jb[Cp.normal]},Et))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(g){var _=this.getLayerConfig(),G=_.enableHighlight,Q=G===void 0?!0:G,tt=_.enableSelect,ft=tt===void 0?!0:tt,Et=this.eventNames().indexOf(g)!==-1||this.eventNames().indexOf("un"+g)!==-1;return(g==="click"||g==="dblclick")&&ft&&(Et=!0),g==="mousemove"&&(Q||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(Et=!0),this.isVisible()&&Et}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(g){var _=this;return this.getEncodedData().length>0&&(this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(G){G.draw({uniforms:_.layerModel.getUninforms()},g)})),this}},{key:"updateStyleAttribute",value:function(g,_,G,Q){this.inited?this.styleAttributeService.updateStyleAttribute(g,{scale:Xc({field:_},this.splitValuesAndCallbackInAttribute(G,this.getLayerConfig()[_]))},Q):this.pendingStyleAttributes.push({attributeName:g,attributeField:_,attributeValues:G,updateOptions:Q})}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(g){console.warn("empty fn")}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&(this.layerService.updateLayerRenderList(),this.layerService.renderLayers())}},{key:"splitValuesAndCallbackInAttribute",value:function(g,_){return{values:ut()(g)?void 0:g||_,callback:ut()(g)?g:void 0}}}]),c}(cu.EventEmitter),G0=ya(ux.prototype,"configService",[Xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ux),ZM=S(18446),qv=S.n(ZM),HM,Qb,jM;function yk(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=qb(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function qb(s,p){if(!!s){if(typeof s=="string")return cx(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return cx(s,p)}}function cx(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var zl=(HM=zy(Vn.IGlobalConfigService),Qb=function(){function s(p){(0,cn.Z)(this,s),(0,Y.Z)(this,"triangulation",void 0),(0,Y.Z)(this,"createTexture2D",void 0),(0,Y.Z)(this,"layer",void 0),(0,Y.Z)(this,"dataTexture",void 0),(0,Y.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,Y.Z)(this,"rowCount",void 0),(0,Y.Z)(this,"cacheStyleProperties",void 0),(0,Y.Z)(this,"cellLength",void 0),(0,Y.Z)(this,"cellProperties",void 0),(0,Y.Z)(this,"cellTypeLayout",void 0),(0,Y.Z)(this,"stylePropertyesExist",void 0),(0,Y.Z)(this,"dataTextureTest",void 0),Xi(this,"configService",jM,this),(0,Y.Z)(this,"shaderModuleService",void 0),(0,Y.Z)(this,"rendererService",void 0),(0,Y.Z)(this,"iconService",void 0),(0,Y.Z)(this,"fontService",void 0),(0,Y.Z)(this,"styleAttributeService",void 0),(0,Y.Z)(this,"mapService",void 0),(0,Y.Z)(this,"cameraService",void 0),(0,Y.Z)(this,"layerService",void 0),this.layer=p,this.rendererService=p.getContainer().get(Vn.IRendererService),this.shaderModuleService=p.getContainer().get(Vn.IShaderModuleService),this.styleAttributeService=p.getContainer().get(Vn.IStyleAttributeService),this.mapService=p.getContainer().get(Vn.IMapService),this.iconService=p.getContainer().get(Vn.IIconService),this.fontService=p.getContainer().get(Vn.IFontService),this.cameraService=p.getContainer().get(Vn.ICameraService),this.layerService=p.getContainer().get(Vn.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var c=this.rendererService.createTexture2D;this.createTexture2D=c,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8ClampedArray(4),mag:Zt.NEAREST,min:Zt.NEAREST,width:1,height:1}))}return(0,vn.Z)(s,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertyesExist.hasOpacity,this.stylePropertyesExist.hasStrokeOpacity,this.stylePropertyesExist.hasStrokeWidth,this.stylePropertyesExist.hasStroke,this.stylePropertyesExist.hasOffsets,this.stylePropertyesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(c){var h=!1;return qv()(c.thetaOffset,this.cacheStyleProperties.thetaOffset)||(h=!0,this.cacheStyleProperties.thetaOffset=c.thetaOffset),qv()(c.opacity,this.cacheStyleProperties.opacity)||(h=!0,this.cacheStyleProperties.opacity=c.opacity),qv()(c.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(h=!0,this.cacheStyleProperties.strokeOpacity=c.strokeOpacity),qv()(c.strokeWidth,this.cacheStyleProperties.strokeWidth)||(h=!0,this.cacheStyleProperties.strokeWidth=c.strokeWidth),qv()(c.stroke,this.cacheStyleProperties.stroke)||(h=!0,this.cacheStyleProperties.stroke=c.stroke),qv()(c.offsets,this.cacheStyleProperties.offsets)||(h=!0,this.cacheStyleProperties.offsets=c.offsets),this.dataTexture===void 0&&(h=!0),h}},{key:"judgeStyleAttributes",value:function(c){this.clearLastCalRes(),c.opacity!==void 0&&!su()(c.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertyesExist.hasOpacity=1,this.cellLength+=1),c.strokeOpacity!==void 0&&!su()(c.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertyesExist.hasStrokeOpacity=1,this.cellLength+=1),c.strokeWidth!==void 0&&!su()(c.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertyesExist.hasStrokeWidth=1,this.cellLength+=1),c.stroke!==void 0&&!this.isStaticColor(c.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertyesExist.hasStroke=1,this.cellLength+=4),c.offsets!==void 0&&!this.isOffsetStatic(c.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertyesExist.hasOffsets=1,this.cellLength+=2),c.thetaOffset!==void 0&&!su()(c.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertyesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(c){return C()(c)?!!(0,Cf.ZP)(c):!1}},{key:"getStrokeColor",value:function(c){if(this.isStaticColor(c)){var h=as(c);return h[0]=h[0]?h[0]:0,h[1]=h[1]?h[1]:0,h[2]=h[2]?h[2]:0,h[3]=h[3]?h[3]:0,h}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(c){return!!(Wg()(c)&&c.length===2&&su()(c[0])&&su()(c[1]))}},{key:"patchMod",value:function(c,h){for(var g=0;g<h;g++)c.push(-1)}},{key:"patchData",value:function(c,h,g){var _=yk(g),G;try{for(_.s();!(G=_.n()).done;){var Q=G.value,tt=Q.attr,ft=Q.count,Et=h[tt];Et!==void 0?tt==="stroke"?c.push.apply(c,(0,ot.Z)(as(Et))):tt==="offsets"?this.isOffsetStatic(Et)?c.push(-Et[0],Et[1]):c.push(0,0):c.push(su()(Et)?Et:1):this.patchMod(c,ft)}}catch(Bt){_.e(Bt)}finally{_.f()}}},{key:"calDataFrame",value:function(c,h,g){for(var _=h.length,G=Math.ceil(_*c/this.DATA_TEXTURE_WIDTH),Q=G*this.DATA_TEXTURE_WIDTH,tt=[],ft=0;ft<_;ft++){var Et=h[ft];this.patchData(tt,Et,g)}for(var Bt=tt.length;Bt<Q;Bt++)tt.push(-1);return{data:tt,width:this.DATA_TEXTURE_WIDTH,height:G}}},{key:"getBlend",value:function(){var c=this.layer.getLayerConfig(),h=c.blend,g=h===void 0?"normal":h;return jb[Cp[g]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(c){return[c.enable?0:1,c.duration||4,c.interval||.2,c.trailLength||.1]}},{key:"startModelAnimate",value:function(){var c=this.layer.getLayerConfig(),h=c.animateOption;h.enable&&this.layer.setAnimateStartTime()}}]),s}(),jM=ya(Qb.prototype,"configService",[HM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qb),XM=S(9187),xd=S.n(XM),Jb=100,YM=36,xk=40;function t2(s){return s/180*Math.acos(-1)}function e2(s){var p=t2(s[0])+Math.PI/2,c=t2(s[1]),h=Jb+Math.random()*.4,g=h*Math.cos(c)*Math.cos(p),_=h*Math.cos(c)*Math.sin(p),G=h*Math.sin(c);return[_,G,g]}function _k(s,p){var c=mat4.create(),h=mat4.create(),g=vec3.fromValues(0,1,0),_=vec3.fromValues(0,0,0);p=p||{},s=typeof s!="undefined"?s:1;for(var G=typeof p.segments!="undefined"?p.segments:32,Q=2+G,tt=2*Q,ft=[],Et=[],Bt=[],se=[],xe=[],De=[],Xe=0;Xe<=Q;Xe++){for(var Qe=Xe/Q,br=Qe*Math.PI,Wr=0;Wr<=tt;Wr++){var sn=Wr/tt,xn=sn*Math.PI*2;mat4.identity(h),mat4.rotateZ(h,h,-br),mat4.identity(c),mat4.rotateY(c,c,xn),vec3.transformMat4(_,g,h),vec3.transformMat4(_,_,c),vec3.scale(_,_,-s),Bt.push(_.slice()),se.push.apply(se,_toConsumableArray(_.slice())),vec3.normalize(_,_),xe.push.apply(xe,_toConsumableArray(_.slice())),De.push([sn,1-Qe]),se.push(sn,1-Qe)}if(Xe>0)for(var Rn=Bt.length,Bn=Rn-2*(tt+1);Bn+tt+2<Rn;Bn++)ft.push([Bn,Bn+1,Bn+tt+1]),Et.push(Bn,Bn+1,Bn+tt+1),ft.push([Bn+tt+1,Bn+1,Bn+tt+2]),Et.push(Bn+tt+1,Bn+1,Bn+tt+2)}return{cells:ft,positions:Bt,uvs:De,positionsArr:se,indicesArr:Et,normalArr:xe}}var Vo=S(31437),Ky=Vo.create(),bk=Vo.create(),Sc=Vo.create(),Jv=Vo.create(),U0=Vo.create();function fx(s,p,c,h,g){Vo.add(s,c,h),Vo.normalize(s,s),p=Vo.fromValues(-s[1],s[0]);var _=Vo.fromValues(-c[1],c[0]);return[g/Vo.dot(p,_),p]}function tg(s,p){return Vo.set(s,-p[1],p[0])}function V0(s,p,c){return Vo.sub(s,p,c),Vo.normalize(s,s),s}function hx(s,p){return s[0]===p[0]&&s[1]===p[1]}function Sk(s){for(var p=new Map,c=0;c<s.length;c++){var h=s[0].toString()+"-"+s[1].toString();p.get(h)?(s.splice(c,1),c++):p.set(h,h)}return s}var r2=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,cn.Z)(this,s),(0,Y.Z)(this,"complex",void 0),(0,Y.Z)(this,"join",void 0),(0,Y.Z)(this,"cap",void 0),(0,Y.Z)(this,"miterLimit",void 0),(0,Y.Z)(this,"thickness",void 0),(0,Y.Z)(this,"normal",void 0),(0,Y.Z)(this,"lastFlip",-1),(0,Y.Z)(this,"miter",Vo.fromValues(0,0)),(0,Y.Z)(this,"started",!1),(0,Y.Z)(this,"dash",!1),(0,Y.Z)(this,"totalDistance",0),this.join=p.join||"miter",this.cap=p.cap||"butt",this.miterLimit=p.miterLimit||10,this.thickness=p.thickness||1,this.dash=p.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return(0,vn.Z)(s,[{key:"extrude_gaode2",value:function(c,h){var g=this.complex;if(c.length<=1)return g;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var _=c.length,G=g.startIndex,Q=1;Q<_;Q++){var tt,ft,Et,Bt=c[Q-1];Bt.push((tt=h[Q-1][2])!==null&&tt!==void 0?tt:0);var se=h[Q-1],xe=c[Q];xe.push((ft=h[Q][2])!==null&&ft!==void 0?ft:0);var De=h[Q],Xe=Q<c.length-1?[].concat((0,ot.Z)(c[Q+1]),[(Et=h[Q+1][2])!==null&&Et!==void 0?Et:0]):null,Qe=Q<h.length-1?h[Q+1]:null,br=this.segment_gaode2(g,G,Bt,xe,Xe,se,De,Qe);G+=br}if(this.dash)for(var Wr=0;Wr<g.positions.length/6;Wr++)g.positions[Wr*6+5]=this.totalDistance;return g.startIndex=g.positions.length/6,g}},{key:"simpleExtrude_gaode2",value:function(c,h){var g=this.complex;if(c.length<=1)return g;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var _=c.length,G=g.startIndex,Q=1;Q<_;Q++){var tt,ft,Et,Bt=c[Q-1];Bt.push((tt=h[Q-1][2])!==null&&tt!==void 0?tt:0);var se=h[Q-1],xe=c[Q];xe.push((ft=h[Q][2])!==null&&ft!==void 0?ft:0);var De=h[Q],Xe=Q<c.length-1?[].concat((0,ot.Z)(c[Q+1]),[(Et=h[Q+1][2])!==null&&Et!==void 0?Et:0]):null,Qe=Q<h.length-1?h[Q+1]:null,br=this.simpleSegment(g,G,Bt,xe,Xe,se,De,Qe);G+=br}if(this.dash)for(var Wr=0;Wr<g.positions.length/6;Wr++)g.positions[Wr*6+5]=this.totalDistance;return g.startIndex=g.positions.length/6,g}},{key:"extrude",value:function(c){var h=this.complex;if(c.length<=1)return h;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var g=c.length,_=h.startIndex,G=1;G<g;G++){var Q=c[G-1],tt=c[G],ft=G<c.length-1?c[G+1]:null,Et=this.segment(h,_,Q,tt,ft);_+=Et}if(this.dash)for(var Bt=0;Bt<h.positions.length/6;Bt++)h.positions[Bt*6+5]=this.totalDistance;return h.startIndex=h.positions.length/6,h}},{key:"simpleExtrude",value:function(c){var h=this.complex;if(c.length<=1)return h;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var g=c.length,_=h.startIndex,G=1;G<g;G++){var Q=c[G-1],tt=c[G],ft=G<c.length-1?c[G+1]:null,Et=this.simpleSegment(h,_,Q,tt,ft);_+=Et}if(this.dash)for(var Bt=0;Bt<h.positions.length/6;Bt++)h.positions[Bt*6+5]=this.totalDistance;return h.startIndex=h.positions.length/6,h}},{key:"segment_gaode2",value:function(c,h,g,_,G,Q,tt,ft){var Et=0,Bt=c.indices,se=c.positions,xe=c.normals,De=this.cap==="square",Xe=this.join==="bevel",Qe=Hl([tt[0],tt[1]]),br=Hl([Q[0],Q[1]]);V0(Sc,_,g);var Wr=0;if(this.dash&&(Wr=this.lineSegmentDistance(Qe,br),this.totalDistance+=Wr),this.normal||(this.normal=Vo.create(),tg(this.normal,Sc)),!this.started)if(this.started=!0,De){var sn=Vo.create(),xn=Vo.create();Vo.add(sn,this.normal,Sc),Vo.add(xn,this.normal,Sc),xe.push(xn[0],xn[1],0),xe.push(sn[0],sn[1],0),se.push(g[0],g[1],g[2]|0,this.totalDistance-Wr,-this.thickness,g[2]|0),se.push(g[0],g[1],g[2]|0,this.totalDistance-Wr,this.thickness,g[2]|0)}else this.extrusions(se,xe,g,this.normal,this.thickness,this.totalDistance-Wr);if(Bt.push(h+0,h+1,h+2),G){hx(_,G)&&Vo.add(G,_,Vo.normalize(G,Vo.subtract(G,_,g))),V0(Jv,G,_);var Qn=fx(U0,Vo.create(),Sc,Jv,this.thickness),di=(0,ga.Z)(Qn,2),ta=di[0],Ca=di[1],Fi=Vo.dot(U0,this.normal)<0?-1:1,ja=Xe;if(!ja&&this.join==="miter"){var ro=ta;ro>this.miterLimit&&(ja=!0)}ja?(xe.push(this.normal[0],this.normal[1],0),xe.push(Ca[0],Ca[1],0),se.push(_[0],_[1],_[2]|0,this.totalDistance,-this.thickness*Fi,_[2]|0),se.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness*Fi,_[2]|0),Bt.push.apply(Bt,(0,ot.Z)(this.lastFlip!==-Fi?[h,h+2,h+3]:[h+2,h+1,h+3])),Bt.push(h+2,h+3,h+4),tg(Ky,Jv),Vo.copy(this.normal,Ky),xe.push(this.normal[0],this.normal[1],0),se.push(_[0],_[1],_[2]|0,this.totalDistance,-this.thickness*Fi,_[2]|0),Et+=3):(this.extrusions(se,xe,_,Ca,ta,this.totalDistance),Bt.push.apply(Bt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),Fi=-1,Vo.copy(this.normal,Ca),Et+=2),this.lastFlip=Fi}else{if(tg(this.normal,Sc),De){var Rn=Vo.create(),Bn=Vo.create();Vo.sub(Bn,Sc,this.normal),Vo.add(Rn,Sc,this.normal),xe.push(Bn[0],Bn[1],0),xe.push(Rn[0],Rn[1],0),se.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness,_[2]|0),se.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness,_[2]|0)}else this.extrusions(se,xe,_,this.normal,this.thickness,this.totalDistance);Bt.push.apply(Bt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),Et+=2}return Et}},{key:"simpleSegment",value:function(c,h,g,_,G){var Q=0,tt=c.indices,ft=c.positions,Et=c.normals,Bt=Hl([_[0],_[1]]),se=Hl([g[0],g[1]]);V0(Sc,Bt,se);var xe=0;if(this.dash&&(xe=this.lineSegmentDistance(Bt,se),this.totalDistance+=xe),this.normal||(this.normal=Vo.create(),tg(this.normal,Sc)),this.started||(this.started=!0,this.extrusions(ft,Et,g,this.normal,this.thickness,this.totalDistance-xe)),tt.push(h+0,h+1,h+2),!G)tg(this.normal,Sc),this.extrusions(ft,Et,_,this.normal,this.thickness,this.totalDistance),tt.push.apply(tt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),Q+=2;else{var De=Hl([G[0],G[1]]);hx(Bt,De)&&Vo.add(De,Bt,Vo.normalize(De,Vo.subtract(De,Bt,se))),V0(Jv,De,Bt);var Xe=fx(U0,Vo.create(),Sc,Jv,this.thickness),Qe=(0,ga.Z)(Xe,2),br=Qe[0],Wr=Qe[1],sn=Vo.dot(U0,this.normal)<0?-1:1;this.extrusions(ft,Et,_,Wr,br,this.totalDistance),tt.push.apply(tt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),sn=-1,Vo.copy(this.normal,Wr),Q+=2,this.lastFlip=sn}return Q}},{key:"segment",value:function(c,h,g,_,G){var Q=0,tt=c.indices,ft=c.positions,Et=c.normals,Bt=this.cap==="square",se=this.join==="bevel",xe=Hl([_[0],_[1]]),De=Hl([g[0],g[1]]);V0(Sc,xe,De);var Xe=0;if(this.dash&&(Xe=this.lineSegmentDistance(xe,De),this.totalDistance+=Xe),this.normal||(this.normal=Vo.create(),tg(this.normal,Sc)),!this.started)if(this.started=!0,Bt){var Qe=Vo.create(),br=Vo.create();Vo.add(Qe,this.normal,Sc),Vo.add(br,this.normal,Sc),Et.push(br[0],br[1],0),Et.push(Qe[0],Qe[1],0),ft.push(g[0],g[1],g[2]|0,this.totalDistance-Xe,-this.thickness,g[2]|0),ft.push(g[0],g[1],g[2]|0,this.totalDistance-Xe,this.thickness,g[2]|0)}else this.extrusions(ft,Et,g,this.normal,this.thickness,this.totalDistance-Xe);if(tt.push(h+0,h+1,h+2),G){var xn=Hl([G[0],G[1]]);hx(xe,xn)&&Vo.add(xn,xe,Vo.normalize(xn,Vo.subtract(xn,xe,De))),V0(Jv,xn,xe);var Rn=fx(U0,Vo.create(),Sc,Jv,this.thickness),Bn=(0,ga.Z)(Rn,2),Qn=Bn[0],di=Bn[1],ta=Vo.dot(U0,this.normal)<0?-1:1,Ca=se;if(!Ca&&this.join==="miter"){var Fi=Qn;Fi>this.miterLimit&&(Ca=!0)}Ca?(Et.push(this.normal[0],this.normal[1],0),Et.push(di[0],di[1],0),ft.push(_[0],_[1],_[2]|0,this.totalDistance,-this.thickness*ta,_[2]|0),ft.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness*ta,_[2]|0),tt.push.apply(tt,(0,ot.Z)(this.lastFlip!==-ta?[h,h+2,h+3]:[h+2,h+1,h+3])),tt.push(h+2,h+3,h+4),tg(Ky,Jv),Vo.copy(this.normal,Ky),Et.push(this.normal[0],this.normal[1],0),ft.push(_[0],_[1],_[2]|0,this.totalDistance,-this.thickness*ta,_[2]|0),Q+=3):(this.extrusions(ft,Et,_,di,Qn,this.totalDistance),tt.push.apply(tt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),ta=-1,Vo.copy(this.normal,di),Q+=2),this.lastFlip=ta}else{if(tg(this.normal,Sc),Bt){var Wr=Vo.create(),sn=Vo.create();Vo.sub(sn,Sc,this.normal),Vo.add(Wr,Sc,this.normal),Et.push(sn[0],sn[1],0),Et.push(Wr[0],Wr[1],0),ft.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness,_[2]|0),ft.push(_[0],_[1],_[2]|0,this.totalDistance,this.thickness,_[2]|0)}else this.extrusions(ft,Et,_,this.normal,this.thickness,this.totalDistance);tt.push.apply(tt,(0,ot.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),Q+=2}return Q}},{key:"extrusions",value:function(c,h,g,_,G,Q){h.push(_[0],_[1],0),h.push(_[0],_[1],0),c.push(g[0],g[1],g[2]|0,Q,-G,g[2]|0),c.push(g[0],g[1],g[2]|0,Q,G,g[2]|0)}},{key:"lineSegmentDistance",value:function(c,h){var g=h[0]-c[0],_=h[1]-c[1];return Math.sqrt(g*g+_*_)}}]),s}();function $g(s){if(su()(s[0]))return s;if(su()(s[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(su()(s[0][0][0])){var p=s,c=0,h=0,g=0;return p.forEach(function(_){_.forEach(function(G){c+=G[0],h+=G[1],g++})}),[c/g,h/g,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function WM(s){for(var p=s[0],c=s[1],h=s[0],g=s[1],_=0,G=0,Q=0,tt=0;tt<s.length;tt+=2){var ft=s[tt],Et=s[tt+1];ft&&Et&&(p=Math.max(ft,p),c=Math.max(Et,c),h=Math.min(ft,h),g=Math.min(Et,g),_+=ft,G+=Et,Q++)}return{center:[_/Q,G/Q],radius:Math.sqrt(Math.pow(p-h,2)+Math.pow(c-g,2))/2}}var Yo=S(77160);function KM(s){var p=s[0][0],c=s[0][s[0].length-1];p[0]===c[0]&&p[1]===c[1]&&(s[0]=s[0].slice(0,s[0].length-1));for(var h=s[0].length,g=xd().flatten(s),_=g.vertices,G=g.dimensions,Q=[],tt=[],ft=0;ft<_.length/G;ft++)G===2?Q.push(_[ft*2],_[ft*2+1],1):Q.push(_[ft*3],_[ft*3+1],1);var Et=xd()(g.vertices,g.holes,g.dimensions);tt.push.apply(tt,(0,ot.Z)(Et));for(var Bt=function(De){var Xe=g.vertices.slice(De*G,(De+1)*G),Qe=g.vertices.slice((De+1)*G,(De+2)*G);Qe.length===0&&(Qe=g.vertices.slice(0,G));var br=Q.length/3;Q.push(Xe[0],Xe[1],1,Qe[0],Qe[1],1,Xe[0],Xe[1],0,Qe[0],Qe[1],0),tt.push.apply(tt,(0,ot.Z)([0,2,1,2,3,1].map(function(Wr){return Wr+br})))},se=0;se<h;se++)Bt(se);return{positions:Q,index:tt}}function wc(s){var p=xd().flatten(s),c=xd()(p.vertices,p.holes,p.dimensions);return{positions:p.vertices,index:c}}function n2(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=s[0][0],h=s[0][s[0].length-1];c[0]===h[0]&&c[1]===h[1]&&(s[0]=s[0].slice(0,s[0].length-1));for(var g=s[0].length,_=xd().flatten(s),G=_.vertices,Q=_.dimensions,tt=[],ft=[],Et=[],Bt=0;Bt<G.length/Q;Bt++)Q===2?tt.push(G[Bt*2],G[Bt*2+1],1,-1,-1):tt.push(G[Bt*3],G[Bt*3+1],1,-1,-1),Et.push(0,0,1);var se=xd()(_.vertices,_.holes,_.dimensions);ft.push.apply(ft,(0,ot.Z)(se));for(var xe=function(Qe){var br=_.vertices.slice(Qe*Q,(Qe+1)*Q),Wr=_.vertices.slice((Qe+1)*Q,(Qe+2)*Q);Wr.length===0&&(Wr=_.vertices.slice(0,Q));var sn=tt.length/5;tt.push(br[0],br[1],1,0,0,Wr[0],Wr[1],1,.1,0,br[0],br[1],0,0,.8,Wr[0],Wr[1],0,.1,.8);var xn=px([Wr[0],Wr[1],1],[br[0],br[1],0],[br[0],br[1],1],p);Et.push.apply(Et,(0,ot.Z)(xn).concat((0,ot.Z)(xn),(0,ot.Z)(xn),(0,ot.Z)(xn))),ft.push.apply(ft,(0,ot.Z)([1,2,0,3,2,1].map(function(Rn){return Rn+sn})))},De=0;De<g;De++)xe(De);return{positions:tt,index:ft,normals:Et}}function px(s,p,c){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=Yo.create(),_=Yo.create(),G=Yo.create();h&&(s=Qo(s),p=Qo(p),c=Qo(c));var Q=Yo.fromValues.apply(Yo,(0,ot.Z)(s)),tt=Yo.fromValues.apply(Yo,(0,ot.Z)(p)),ft=Yo.fromValues.apply(Yo,(0,ot.Z)(c));Yo.sub(g,ft,tt),Yo.sub(_,Q,tt),Yo.cross(G,g,_);var Et=Yo.create();return Yo.normalize(Et,G),Et}var Mp,Qg;(function(s){s.CYLINDER="cylinder",s.SQUARECOLUMN="squareColumn",s.TRIANGLECOLUMN="triangleColumn",s.HEXAGONCOLUMN="hexagonColumn",s.PENTAGONCOLUMN="pentagonColumn"})(Qg||(Qg={}));var eg;(function(s){s.CIRCLE="circle",s.SQUARE="square",s.TRIANGLE="triangle",s.HEXAGON="hexagon",s.PENTAGON="pentagon"})(eg||(eg={}));function Im(s){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=Math.PI*2/s,h=[],g=0;g<s;g++)h.push(c*g+p*Math.PI/12);var _=h.map(function(G){var Q=Math.sin(G+Math.PI/4),tt=Math.cos(G+Math.PI/4);return[Q,tt,0]});return _}function i2(){return Im(30)}function a2(){return Im(4)}function dx(){return Im(3)}function o2(){return Im(6,1)}function s2(){return Im(5)}var Z0=(Mp={},(0,Y.Z)(Mp,eg.CIRCLE,i2),(0,Y.Z)(Mp,eg.HEXAGON,o2),(0,Y.Z)(Mp,eg.TRIANGLE,dx),(0,Y.Z)(Mp,eg.SQUARE,a2),(0,Y.Z)(Mp,eg.PENTAGON,s2),(0,Y.Z)(Mp,Qg.CYLINDER,i2),(0,Y.Z)(Mp,Qg.HEXAGONCOLUMN,o2),(0,Y.Z)(Mp,Qg.TRIANGLECOLUMN,dx),(0,Y.Z)(Mp,Qg.SQUARECOLUMN,a2),(0,Y.Z)(Mp,Qg.PENTAGONCOLUMN,s2),Mp),$y={};function u2(s){var p=$g(s.coordinates);return{vertices:[].concat((0,ot.Z)(p),(0,ot.Z)(p),(0,ot.Z)(p),(0,ot.Z)(p)),indices:[0,1,2,2,3,0],size:p.length}}function $M(s){var p=$g(s.coordinates),c=e2(p);return{vertices:[].concat((0,ot.Z)(c),(0,ot.Z)(c),(0,ot.Z)(c),(0,ot.Z)(c)),indices:[0,1,2,2,3,0],size:c.length}}function l2(s){var p=s.shape,c=p2(p,!1),h=c.positions,g=c.index,_=c.normals;return{vertices:h,indices:g,normals:_,size:5}}function c2(s){var p=$g(s.coordinates);return{vertices:(0,ot.Z)(p),indices:[0],size:p.length}}function f2(s){var p=s.coordinates,c=s.originCoordinates,h=s.version,g=new r2({dash:!0,join:"bevel"});if(h==="GAODE2.x"){var _=p;Array.isArray(_[0][0])||(_=[p]);var G=c;Array.isArray(G[0][0])||(G=[c]);for(var Q=0;Q<_.length;Q++){var tt=_[Q],ft=G[Q];g.extrude_gaode2(tt,ft)}}else{var Et=p;Array.isArray(Et[0][0])||(Et=[p]),Et.forEach(function(se){g.extrude(se)})}var Bt=g.complex;return{vertices:Bt.positions,indices:Bt.indices,normals:Bt.normals,size:6}}function QM(s){var p=s.coordinates,c=s.originCoordinates,h=s.version,g=new r2({dash:!0,join:"bevel"});if(h==="GAODE2.x"){var _=p;Array.isArray(_[0][0])||(_=[p]);var G=c;Array.isArray(G[0][0])||(G=[c]);for(var Q=0;Q<_.length;Q++){var tt=_[Q],ft=G[Q];g.simpleExtrude_gaode2(tt,ft)}}else{var Et=p;Array.isArray(Et[0][0])||(Et=[p]),Et.forEach(function(se){g.simpleExtrude(se)})}var Bt=g.complex;return{vertices:Bt.positions,indices:Bt.indices,normals:Bt.normals,size:6}}function qM(s){var p=s.coordinates,c=xd().flatten(p),h=c.vertices,g=c.dimensions,_=c.holes;return{indices:xd()(h,_,g),vertices:h,size:g}}function JM(s){var p=s.coordinates,c=xd().flatten(p),h=c.vertices,g=c.dimensions,_=c.holes;return{indices:xd()(h,_,g),vertices:tT(h),size:g+4}}function tT(s){for(var p=[],c=WM(s),h=c.center,g=c.radius,_=0;_<s.length;_+=2){var G=s[_],Q=s[_+1];p.push.apply(p,[G,Q,0].concat((0,ot.Z)(h),[g]))}return p}function h2(s){var p=s.coordinates,c=n2(p,!0),h=c.positions,g=c.index,_=c.normals;return{vertices:h,indices:g,normals:_,size:5}}function vx(s){var p=s.shape,c=gx(p),h=c.positions,g=c.index;return{vertices:h,indices:g,size:3}}function eT(s){var p=s.coordinates,c=[].concat((0,ot.Z)(p[0]),[0,0,1,p[1][0],p[0][1],0,1,1],(0,ot.Z)(p[1]),[0,1,0],(0,ot.Z)(p[0]),[0,0,1],(0,ot.Z)(p[1]),[0,1,0,p[0][0],p[1][1],0,0,0]),h=[0,1,2,3,4,5];return{vertices:c,indices:h,size:5}}function cv(s,p){for(var c=p||30,h=s.coordinates,g=[],_=[],G=function(ft){g.push(ft,1,ft,h[0][0],h[0][1],h[1][0],h[1][1],ft,-1,ft,h[0][0],h[0][1],h[1][0],h[1][1]),ft!==c-1&&_.push.apply(_,(0,ot.Z)([0,1,2,1,3,2].map(function(Et){return ft*2+Et})))},Q=0;Q<c;Q++)G(Q);return{vertices:g,indices:_,size:7}}function rT(s){var p=s.coordinates;p.length===2&&p.push(0);var c=s.size,h=Jg(-1,1),g=Jg(1,1),_=Jg(-1,-1),G=Jg(1,-1),Q=[].concat((0,ot.Z)(p),(0,ot.Z)(h),(0,ot.Z)(p),(0,ot.Z)(_),(0,ot.Z)(p),(0,ot.Z)(G),(0,ot.Z)(p),(0,ot.Z)(g)),tt=[0,1,2,3,0,2];return{vertices:Q,indices:tt,size:5}}function p2(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($y&&$y[s])return $y[s];var c=Z0[s]?Z0[s]():Z0.cylinder(),h=n2([c],p);return $y[s]=h,h}function qg(s,p){for(var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=new Float32Array(s.length/c*3),_,G,Q,tt=vec3.create(),ft=vec3.create(),Et=vec3.create(),Bt=0,se=p.length;Bt<se;Bt+=3){_=p[Bt+0]*3,G=p[Bt+1]*3,Q=p[Bt+2]*3;var xe=[s[_],s[_+1]],De=[s[G],s[G+1]],Xe=[s[Q],s[Q+1]];h&&(xe=lngLatToMeters(xe),De=lngLatToMeters(De),Xe=lngLatToMeters(Xe));var Qe=xe,br=_slicedToArray(Qe,2),Wr=br[0],sn=br[1],xn=vec3.fromValues(Wr,sn,s[_+2]),Rn=De,Bn=_slicedToArray(Rn,2),Qn=Bn[0],di=Bn[1],ta=vec3.fromValues(Qn,di,s[G+2]),Ca=Xe,Fi=_slicedToArray(Ca,2),ja=Fi[0],ro=Fi[1],Bo=vec3.fromValues(ja,ro,s[Q+2]);vec3.sub(tt,Bo,ta),vec3.sub(ft,xn,ta),vec3.cross(Et,tt,ft),g[_]+=tt[0],g[_+1]+=tt[1],g[_+2]+=tt[2],g[G]+=tt[0],g[G+1]+=tt[1],g[G+2]+=tt[2],g[Q]+=tt[0],g[Q+1]+=tt[1],g[Q+2]+=tt[2]}return nT(g),g}function nT(s){for(var p=0,c=s.length;p<c;p+=3){var h=vec3.fromValues(s[p],s[p+1],s[p+2]),g=vec3.create();vec3.normalize(g,h),s.set(g,p)}}function iT(s){var p=s[0][0],c=s[0][s[0].length-1];return p[0]===c[0]&&p[1]===c[1]}function gx(s){var p=["cylinder","triangleColumn","hexagonColumn","squareColumn"],c=Z0[s]?Z0[s]():Z0.circle(),h=p.indexOf(s)===-1?wc([c]):KM([c]);return h}function Jg(s,p){var c=(s+1)/2,h=(p+1)/2;return[c,h]}function aT(){var s=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),p=s.positionsArr,c=s.indicesArr,h=s.normalArr;return{vertices:p,indices:c,size:5,normals:h}}function oT(){var s=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),p=s.positionsArr,c=s.indicesArr,h=s.normalArr;return{vertices:p,indices:c,size:5,normals:h}}function d2(s){var p=sT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function sT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var v2=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

uniform float u_circleSweep;
uniform float u_cityMinSize;
uniform vec3 u_circleSweepColor;
uniform float u_circleSweepSpeed;

varying float v_worldDis;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }


  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {
    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);
    gl_FragColor.rgb += r * r * u_circleSweepColor;
  }
   
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,uT=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;
uniform mat4 u_Mvp;

uniform float u_circleSweep;
uniform vec2 u_cityCenter;

varying float v_worldDis;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"


void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

   v_texCoord = a_Uv;

  if(u_circleSweep > 0.0) {
     vec2 lnglatscale = vec2(0.0);
    if(u_CoordinateSystem != COORDINATE_SYSTEM_P20_2) {
      lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);
    }
    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);
  }
 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,lT=function(s){(0,vi.Z)(c,s);var p=d2(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"cityCenter",void 0),(0,Y.Z)((0,Tt.Z)(h),"cityMinSize",void 0),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.baseColor,tt=Q===void 0?"rgb(16,16,16)":Q,ft=g.brightColor,Et=ft===void 0?"rgb(255,176,38)":ft,Bt=g.windowColor,se=Bt===void 0?"rgb(30,60,89)":Bt,xe=g.time,De=xe===void 0?0:xe,Xe=g.sweep,Qe=Xe===void 0?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:Xe;return{u_cityCenter:Qe.sweepCenter||this.cityCenter,u_cityMinSize:this.cityMinSize*Qe.sweepRadius,u_circleSweep:Qe.enable?1:0,u_circleSweepColor:as(Qe.sweepColor).slice(0,3),u_circleSweepSpeed:Qe.sweepSpeed,u_opacity:G,u_baseColor:as(tt),u_brightColor:as(Et),u_windowColor:as(se),u_time:this.layer.getLayerAnimateTime()||De}}},{key:"calCityGeo",value:function(){var g=(0,ga.Z)(this.layer.getSource().extent,4),_=g[0],G=g[1],Q=g[2],tt=g[3];if(this.mapService.version==="GAODE2.x"){this.cityCenter=this.mapService.lngLatToCoord([(Q+_)/2,(tt+G)/2]);var ft=this.mapService.lngLatToCoord([Q,tt]),Et=this.mapService.lngLatToCoord([_,G]);this.cityMinSize=Math.sqrt(Math.pow(ft[0]-Et[0],2)+Math.pow(ft[1]-Et[1],2))/4}else{var Bt=Q-_,se=tt-G;this.cityCenter=[(Q+_)/2,(tt+G)/2],this.cityMinSize=Math.sqrt(Math.pow(Bt,2)+Math.pow(se,2))/4}}},{key:"initModels",value:function(){return this.calCityGeo(),this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:uT,fragmentShader:v2,triangulation:h2})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G,Q,tt,ft){return ft}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?10:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){var ft=_.size;return[Q[3],Q[4]]}}})}}]),c}(zl);function g2(s){var p=cT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function cT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var m2=function(s){(0,vi.Z)(c,s);var p=g2(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","PolygonLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){this.layerModel=new lT(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(g){this.updateLayerConfig({time:g})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),c}(Kg);function y2(s){var p=x2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function x2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var fT=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
uniform mat4 u_Mvp;\r
varying vec4 v_color;\r
\r
uniform vec2 u_SceneCenterMKT;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  // gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807\r
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r
    gl_Position = u_Mvp * (project_pos);\r
  } else {\r
     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
    gl_Position = project_common_position_to_clipspace(project_pos);\r
  }\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,hT=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,pT=function(s){(0,vi.Z)(c,s);var p=y2(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.coverage,Q=g.angle;return{u_opacity:_||1,u_coverage:G||.9,u_angle:Q||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:fT,fragmentShader:hT,triangulation:vx,depth:{enable:!1},primitive:Zt.TRIANGLES,blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:xo.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G){var Q=_.version==="GAODE2.x"?_.originCoordinates:_.coordinates;return[Q[0],Q[1],0]}}})}}]),c}(zl);function dT(s){var p=vT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function vT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var gT=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"


void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
  // vec2 lnglat = (a_Pos.xy + offset); 
  // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  // gl_Position = project_common_position_to_clipspace(project_pos);
  // float lightWeight = calc_lighting(project_pos);
  // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 lnglat = (a_Pos.xy + offset); 
    // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));

    // float lightWeight = calc_lighting(project_pos);
    // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    // gl_Position = u_Mvp * vec4(lnglat , a_Position.z * a_Size, 1.0);
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ECF\u7EAC\u5EA6
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807
    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));

    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);
  } else {
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
    
    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
    
    gl_Position = project_common_position_to_clipspace(project_pos);
  }



  setPickingColor(a_PickingColor);
}
`,mT=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,yT=function(s){(0,vi.Z)(c,s);var p=dT(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.coverage,Q=g.angle;return{u_opacity:_||1,u_coverage:G||1,u_angle:Q||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:gT,fragmentShader:mT,triangulation:l2,depth:{enable:!0},blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size;return Array.isArray(ft)?[ft[0]]:[ft]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G,Q,tt,ft){return ft}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:xo.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G){var Q=_.version==="GAODE2.x"?_.originCoordinates:_.coordinates;return[Q[0],Q[1],0]}}})}}]),c}(zl);function xT(s,p){for(var c=[],h=[],g=[],_=s+1,G=p+1,Q=s/2,tt=p/2,ft=0;ft<G;ft++)for(var Et=ft-tt,Bt=0;Bt<_;Bt++){var se=Bt-Q;h.push(se/Q,-Et/tt,0),g.push(Bt/s),g.push(1-ft/p)}for(var xe=0;xe<p;xe++)for(var De=0;De<s;De++){var Xe=De+_*xe,Qe=De+_*(xe+1),br=De+1+_*(xe+1),Wr=De+1+_*xe;c.push(Xe,Qe,Wr),c.push(Qe,br,Wr)}return{vertices:h,indices:c,uvs:g}}var _2,mx;function b2(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function S2(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?b2(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):b2(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function _T(s){var p=bT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function bT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var ST=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,wT=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;


vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
	vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);
 
}
`,ET=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,yx=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,w2=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
}
`,CT=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,E2=(_2=(0,sa.b2)(),_2(mx=function(s){(0,vi.Z)(c,s);var p=_T(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"colorTexture",void 0),(0,Y.Z)((0,Tt.Z)(h),"heatmapFramerBuffer",void 0),(0,Y.Z)((0,Tt.Z)(h),"intensityModel",void 0),(0,Y.Z)((0,Tt.Z)(h),"colorModel",void 0),(0,Y.Z)((0,Tt.Z)(h),"shapeType",void 0),h}return(0,vn.Z)(c,[{key:"render",value:function(){var g=this,_=this.rendererService,G=_.clear,Q=_.useFramebuffer;Q(this.heatmapFramerBuffer,function(){G({color:[0,0,0,0],depth:1,stencil:0,framebuffer:g.heatmapFramerBuffer}),g.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var g,_=this.rendererService,G=_.createFramebuffer,Q=_.clear,tt=_.getViewportSize,ft=_.createTexture2D,Et=_.useFramebuffer,Bt=this.styleAttributeService.getLayerStyleAttribute("shape"),se=(Bt==null||(g=Bt.scale)===null||g===void 0?void 0:g.field)||"heatmap";this.shapeType=se,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=se==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var xe=tt(),De=xe.width,Xe=xe.height;return this.heatmapFramerBuffer=G({color:ft({width:Math.floor(De/4),height:Math.floor(Xe/4),wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE,min:Zt.LINEAR,mag:Zt.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:xo.Attribute,descriptor:{name:"a_Dir",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){return[Q[3],Q[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?1:ft;return[Et]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:w2,fragmentShader:yx,triangulation:rT,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Zt.ONE,srcAlpha:1,dstRGB:Zt.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;this.shaderModuleService.registerModule("heatmapColor",{vs:CT,fs:ET});var ft=this.shaderModuleService.getModule("heatmapColor"),Et=ft.vs,Bt=ft.fs,se=ft.uniforms,xe=this.rendererService,De=xe.createAttribute,Xe=xe.createElements,Qe=xe.createBuffer,br=xe.createModel;return br({vs:Et,fs:Bt,attributes:{a_Position:De({buffer:Qe({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:Zt.FLOAT}),size:3}),a_Uv:De({buffer:Qe({data:[0,1,1,1,0,0,1,0],type:Zt.FLOAT}),size:2})},uniforms:S2({},se),depth:{enable:!1},blend:this.getBlend(),count:6,elements:Xe({data:[0,2,1,2,3,1],type:Zt.UNSIGNED_INT,count:6}),stencil:ju(G,tt)})}},{key:"drawIntensityMode",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.intensity,Q=G===void 0?10:G,tt=g.radius,ft=tt===void 0?5:tt;this.intensityModel.draw({uniforms:{u_opacity:_||1,u_radius:ft,u_intensity:Q}})}},{key:"drawColorMode",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity;this.colorModel.draw({uniforms:{u_opacity:_||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=uh();jd(G,this.cameraService.getViewProjectionMatrixUncentered()),this.colorModel.draw({uniforms:{u_opacity:_||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:(0,ot.Z)(G)}})}},{key:"build3dHeatMap",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q,ft=this.rendererService.getViewportSize,Et=ft(),Bt=Et.width,se=Et.height,xe=xT(Bt/4,se/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:wT,fs:ST});var De=this.shaderModuleService.getModule("heatmap3dColor"),Xe=De.vs,Qe=De.fs,br=De.uniforms,Wr=this.rendererService,sn=Wr.createAttribute,xn=Wr.createElements,Rn=Wr.createBuffer,Bn=Wr.createModel;return Bn({vs:Xe,fs:Qe,attributes:{a_Position:sn({buffer:Rn({data:xe.vertices,type:Zt.FLOAT}),size:3}),a_Uv:sn({buffer:Rn({data:xe.uvs,type:Zt.FLOAT}),size:2})},primitive:Zt.TRIANGLES,uniforms:S2({},br),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:Zt.SRC_ALPHA,srcAlpha:1,dstRGB:Zt.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:xn({data:xe.indices,type:Zt.UNSIGNED_INT,count:xe.indices.length}),stencil:ju(G,tt)})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var g=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var _=this.layer.getLayerConfig(),G=_.rampColors,Q=dc(G);this.colorTexture=g({data:new Uint8Array(Q.data),width:Q.width,height:Q.height,wrapS:Zt.CLAMP_TO_EDGE,wrapT:Zt.CLAMP_TO_EDGE,min:Zt.NEAREST,mag:Zt.NEAREST,flipY:!1})}}]),c}(zl))||mx);function AT(s){var p=C2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function C2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var wk=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,MT=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
 
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));
    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));
    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,A2=function(s){(0,vi.Z)(c,s);var p=AT(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.coverage,Q=g.angle;return{u_opacity:_||1,u_coverage:G||.9,u_angle:Q||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:MT,fragmentShader:wk,triangulation:vx,depth:{enable:!1},primitive:Zt.TRIANGLES,blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:xo.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G){var Q=_.version==="GAODE2.x"?_.originCoordinates:_.coordinates;return[Q[0],Q[1],0]}}})}}]),c}(zl),TT={heatmap:E2,heatmap3d:E2,grid:pT,grid3d:yT,hexagon:A2},M2=TT;function PT(s){var p=IT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function IT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var rg=function(s){(0,vi.Z)(c,s);var p=PT(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","HeatMapLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new M2[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var g=this,_=this.getModelType();return _==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(G){return G.draw({uniforms:g.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var g,_=this.styleAttributeService.getLayerStyleAttribute("shape"),G=this.getLayerConfig(),Q=G.shape3d,tt=this.getSource(),ft=tt.data.type,Et=(_==null||(g=_.scale)===null||g===void 0?void 0:g.field)||"heatmap";return Et==="heatmap"||Et==="heatmap3d"?"heatmap":ft==="hexagon"?(Q==null?void 0:Q.indexOf(Et))===-1?"hexagon":"grid3d":ft==="grid"?(Q==null?void 0:Q.indexOf(Et))===-1?"grid":"grid3d":"heatmap"}}]),c}(Kg);function OT(s){var p=LT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function LT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var T2=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,kT=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,RT=function(s){(0,vi.Z)(c,s);var p=OT(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity;return{u_opacity:_||1,u_texture:this.texture}}},{key:"initModels",value:function(){var g=this,_=this.layer.getLayerConfig(),G=_.mask,Q=G===void 0?!1:G,tt=_.maskInside,ft=tt===void 0?!0:tt,Et=this.layer.getSource(),Bt=this.rendererService.createTexture2D;if(this.texture=Bt({height:0,width:0}),Ms){var se=this.layerService.sceneService.getSceneConfig().canvas,xe=se.createImage();xe.crossOrigin="anonymous",xe.src=Et.data.originData,xe.onload=function(){g.texture=Bt({data:xe,width:xe.width,height:xe.height}),g.layerService.updateLayerRenderList(),g.layerService.renderLayers()}}else Et.data.images.then(function(De){g.texture=Bt({data:De[0],width:De[0].width,height:De[0].height}),g.layerService.updateLayerRenderList(),g.layerService.renderLayers()});return[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:kT,fragmentShader:T2,triangulation:eT,primitive:Zt.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:ju(Q,ft)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){return[Q[3],Q[4]]}}})}}]),c}(zl),DT={image:RT},BT=DT;function FT(s){var p=P2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function P2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var I2=function(s){(0,vi.Z)(c,s);var p=FT(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","ImageLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new BT[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var g=this.getModelType(),_={image:{}};return _[g]}},{key:"getModelType",value:function(){return"image"}}]),c}(Kg);function O2(s){var p=NT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function NT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var zT=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }
  
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = styleMappingMat[3].g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_aimate.x == Animate) {
      time = u_time / u_aimate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = styleMappingMat[3].a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_aimate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_aimate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
  // gl_FragColor = filterColor(gl_FragColor);
}`,GT=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
// varying vec2 v_normal;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_thetaOffset: 0.314;
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  if(u_line_type == LineTypeDash) {
      d_distance_ratio = segmentIndex / segmentNumber;

      vec2 s = source;
      vec2 t = target;
      
      if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        s = unProjCustomCoord(source);
        t = unProjCustomCoord(target);
      }
      float total_Distance = pixelDistance(s, t) / 2.0 * PI;
      // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  
  if(u_aimate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
     styleMappingMat[3].g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,L2={solid:0,dash:1},UT=function(s){(0,vi.Z)(c,s);var p=O2(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.NEAREST,min:Zt.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.textureBlend,ft=tt===void 0?"normal":tt,Et=g.lineType,Bt=Et===void 0?"solid":Et,se=g.dashArray,xe=se===void 0?[10,5]:se,De=g.forward,Xe=De===void 0?!0:De,Qe=g.lineTexture,br=Qe===void 0?!1:Qe,Wr=g.iconStep,sn=Wr===void 0?100:Wr,xn=g.segmentNumber,Rn=xn===void 0?30:xn,Bn=g.thetaOffset,Qn=Bn===void 0?.314:Bn;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_,thetaOffset:Qn})){this.judgeStyleAttributes({opacity:_,thetaOffset:Qn});var di=this.layer.getEncodedData(),ta=this.calDataFrame(this.cellLength,di,this.cellProperties),Ca=ta.data,Fi=ta.width,ja=ta.height;this.rowCount=ja,this.dataTexture=this.cellLength>0&&Ca.length>0?this.createTexture2D({flipY:!0,data:Ca,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Fi,height:ja}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}xe.length===2&&xe.push(0,0);var ro=0,Bo=[0,0,0,0],Uu=[0,0,0,0];return G&&Q&&(Bo=as(G),Uu=as(Q),ro=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:su()(Qn)?Qn:0,u_opacity:su()(_)?_:1,u_textureBlend:ft==="normal"?0:1,segmentNumber:Rn,u_line_type:L2[Bt||"solid"],u_dash_array:xe,u_blur:.9,u_lineDir:Xe?1:-1,u_texture:this.texture,u_line_texture:br?1:0,u_icon_step:sn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ro,u_sourceColor:Bo,u_targetColor:Uu}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.segmentNumber,G=_===void 0?30:_,Q=g.mask,tt=Q===void 0?!1:Q,ft=g.maskInside,Et=ft===void 0?!0:ft;return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:GT,fragmentShader:zT,triangulation:cv,depth:{enable:!1},blend:this.getBlend(),segmentNumber:G,stencil:ju(tt,Et)})]}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){var Et=G.size,Bt=Et===void 0?1:Et;return Array.isArray(Bt)?[Bt[0]]:[Bt]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:xo.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:4,update:function(G,Q,tt,ft){return[tt[3],tt[4],tt[5],tt[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.iconService.getIconMap(),Bt=G.texture,se=Et[Bt]||{x:0,y:0},xe=se.x,De=se.y;return[xe,De]}}})}}]),c}(zl);function VT(s){var p=ZT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function ZT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var HT=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);

      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_aimate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_aimate.x == Animate) {
      time = u_time / u_aimate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_aimate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_aimate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,jT=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
// varying vec2 v_normal;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // TODO: + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // TODO: \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,XT={solid:0,dash:1},YT=function(s){(0,vi.Z)(c,s);var p=VT(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.NEAREST,min:Zt.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.textureBlend,ft=tt===void 0?"normal":tt,Et=g.lineType,Bt=Et===void 0?"solid":Et,se=g.dashArray,xe=se===void 0?[10,5]:se,De=g.lineTexture,Xe=De===void 0?!1:De,Qe=g.iconStep,br=Qe===void 0?100:Qe,Wr=g.segmentNumber,sn=Wr===void 0?30:Wr,xn=g.globalArcHeight,Rn=xn===void 0?10:xn;xe.length===2&&xe.push(0,0);var Bn=0,Qn=[0,0,0,0],di=[0,0,0,0];if(G&&Q&&(Qn=as(G),di=as(Q),Bn=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_})){this.judgeStyleAttributes({opacity:_});var ta=this.layer.getEncodedData(),Ca=this.calDataFrame(this.cellLength,ta,this.cellProperties),Fi=Ca.data,ja=Ca.width,ro=Ca.height;this.rowCount=ro,this.dataTexture=this.cellLength>0&&Fi.length>0?this.createTexture2D({flipY:!0,data:Fi,format:Zt.LUMINANCE,type:Zt.FLOAT,width:ja,height:ro}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Jb,u_global_height:Rn,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(_)?_:1,u_textureBlend:ft==="normal"?0:1,segmentNumber:sn,u_line_type:XT[Bt]||0,u_dash_array:xe,u_texture:this.texture,u_line_texture:Xe?1:0,u_icon_step:br,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Bn,u_sourceColor:Qn,u_targetColor:di}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.segmentNumber,G=_===void 0?30:_,Q=g.mask,tt=Q===void 0?!1:Q,ft=g.maskInside,Et=ft===void 0?!0:ft;return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:jT,fragmentShader:HT,triangulation:cv,blend:this.getBlend(),segmentNumber:G,stencil:ju(tt,Et)})]}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){var Et=G.size,Bt=Et===void 0?1:Et;return Array.isArray(Bt)?[Bt[0]]:[Bt]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:xo.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:4,update:function(G,Q,tt,ft){return[tt[3],tt[4],tt[5],tt[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.iconService.getIconMap(),Bt=G.texture,se=Et[Bt]||{x:0,y:0},xe=se.x,De=se.y;return[xe,De]}}})}}]),c}(zl);function WT(s){var p=KT();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function KT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var $T=`#define LineTypeSolid 0.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
// varying vec2 v_normal;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float segmentNumber;
varying float v_distance_ratio;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }
  
 
  gl_FragColor.a *= u_opacity;

  if(u_aimate.x == Animate) {
      float animateSpeed = u_time / u_aimate.y; // \u8FD0\u52A8\u901F\u5EA6
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }
}`,QT=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
// varying vec2 v_normal;

uniform float u_lineDir: 1.0;

// \u504F\u79FB\u91CF
uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = u_thetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  v_distance_ratio = segmentIndex / segmentNumber;
  
  if(u_aimate.x == Animate && u_lineDir != 1.0) {
      v_distance_ratio = 1.0 - v_distance_ratio;
  }

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
}
`,qT=function(s){(0,vi.Z)(c,s);var p=WT(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.forward,ft=tt===void 0?!0:tt,Et=g.segmentNumber,Bt=Et===void 0?30:Et,se=g.thetaOffset,xe=se===void 0?.314:se,De=0,Xe=[0,0,0,0],Qe=[0,0,0,0];return G&&Q&&(Xe=as(G),Qe=as(Q),De=1),{u_thetaOffset:xe,u_opacity:su()(_)?_:1,segmentNumber:Bt,u_blur:.9,u_lineDir:ft?1:-1,u_linearColor:De,u_sourceColor:Xe,u_targetColor:Qe}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.segmentNumber,G=_===void 0?30:_;return[this.layer.buildLayerModel({moduleName:"arc2dminiline",vertexShader:QT,fragmentShader:$T,triangulation:cv,depth:{enable:!1},blend:this.getBlend(),segmentNumber:G})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?1:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:xo.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:4,update:function(_,G,Q,tt){return[Q[3],Q[4],Q[5],Q[6]]}}})}}]),c}(zl);function JT(s){var p=tP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function tP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var eP=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0;
  float d_segmentIndex = styleMappingMat[3].g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- smoothstep(0.0, 1.0, v_distance_ratio), u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_aimate.x == Animate) {
      u = gl_FragColor.a/opacity;
    }

    float v = styleMappingMat[3].a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,rP=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
// varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*8.0;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  styleMappingMat[3].g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,nP={solid:0,dash:1},iP=function(s){(0,vi.Z)(c,s);var p=JT(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.NEAREST,min:Zt.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.textureBlend,ft=tt===void 0?"normal":tt,Et=g.lineType,Bt=Et===void 0?"solid":Et,se=g.dashArray,xe=se===void 0?[10,5]:se,De=g.lineTexture,Xe=De===void 0?!1:De,Qe=g.iconStep,br=Qe===void 0?100:Qe,Wr=g.segmentNumber,sn=Wr===void 0?30:Wr;xe.length===2&&xe.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var xn=0,Rn=[0,0,0,0],Bn=[0,0,0,0];if(G&&Q&&(Rn=as(G),Bn=as(Q),xn=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_})){this.judgeStyleAttributes({opacity:_});var Qn=this.layer.getEncodedData(),di=this.calDataFrame(this.cellLength,Qn,this.cellProperties),ta=di.data,Ca=di.width,Fi=di.height;this.rowCount=Fi,this.dataTexture=this.cellLength>0&&ta.length>0?this.createTexture2D({flipY:!0,data:ta,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Ca,height:Fi}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(_)?_:1,u_textureBlend:ft==="normal"?0:1,segmentNumber:sn,u_line_type:nP[Bt]||0,u_dash_array:xe,u_texture:this.texture,u_line_texture:Xe?1:0,u_icon_step:br,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:xn,u_sourceColor:Rn,u_targetColor:Bn}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"greatcircleline",vertexShader:rP,fragmentShader:eP,triangulation:cv,depth:{enable:!1},blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){var Et=G.size,Bt=Et===void 0?1:Et;return Array.isArray(Bt)?[Bt[0]]:[Bt]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:xo.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:4,update:function(G,Q,tt,ft){return[tt[3],tt[4],tt[5],tt[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.iconService.getIconMap(),Bt=G.texture,se=Et[Bt]||{x:0,y:0},xe=se.x,De=se.y;return[xe,De]}}})}}]),c}(zl);function aP(s){var p=oP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function oP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var sP=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying vec4 v_dash_array;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + animateSpeed);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

    float v = styleMappingMat[3].a;
    float borderWidth = min(0.5, u_borderWidth);
    // \u7ED8\u5236 border
    if(borderWidth > 0.01) {
      float borderOuterWidth = borderWidth/2.0;

      if(v >= 1.0 - borderWidth || v <= borderWidth) {
        if(v > borderWidth) {
          float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
          gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
        } else if(v <= borderWidth) {
          float linear = smoothstep(0.0, 1.0, v/borderWidth);
          gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
        }
      }

      if(v < borderOuterWidth) {
        gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
      } else if(v > 1.0 - borderOuterWidth) {
        gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
      }
    }

    gl_FragColor = filterColor(gl_FragColor);
}
`,k2=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_line_type == LineTypeDash) {
    d_distance_ratio = a_Distance / a_Total_Distance;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);

  vec2 offset = project_pixel(size.xy);

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Om={solid:0,dash:1},R2=function(s){(0,vi.Z)(c,s);var p=aP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.NEAREST,min:Zt.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.textureBlend,ft=tt===void 0?"normal":tt,Et=g.lineType,Bt=Et===void 0?"solid":Et,se=g.dashArray,xe=se===void 0?[10,5,0,0]:se,De=g.lineTexture,Xe=De===void 0?!1:De,Qe=g.iconStep,br=Qe===void 0?100:Qe,Wr=g.vertexHeightScale,sn=Wr===void 0?20:Wr,xn=g.borderWidth,Rn=xn===void 0?0:xn,Bn=g.borderColor,Qn=Bn===void 0?"#ccc":Bn;xe.length===2&&xe.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var di=0,ta=[0,0,0,0],Ca=[0,0,0,0];if(G&&Q&&(ta=as(G),Ca=as(Q),di=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_})){this.judgeStyleAttributes({opacity:_});var Fi=this.layer.getEncodedData(),ja=this.calDataFrame(this.cellLength,Fi,this.cellProperties),ro=ja.data,Bo=ja.width,Uu=ja.height;this.rowCount=Uu,this.dataTexture=this.cellLength>0&&ro.length>0?this.createTexture2D({flipY:!0,data:ro,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Bo,height:Uu}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(_)?_:1,u_textureBlend:ft==="normal"?0:1,u_line_type:Om[Bt],u_dash_array:xe,u_texture:this.texture,u_line_texture:Xe?1:0,u_icon_step:br,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:Rn,u_borderColor:as(Qn),u_linearColor:di,u_sourceColor:ta,u_targetColor:Ca,u_vertexScale:sn}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"line",vertexShader:k2,fragmentShader:sP,triangulation:f2,primitive:Zt.TRIANGLES,blend:this.getBlend(),depth:{enable:!1},stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:xo.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){return[tt[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:xo.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){return[tt[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=G.size,Bt=Et===void 0?1:Et;return Array.isArray(Bt)?[Bt[0],Bt[1]]:[Bt,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(G,Q,tt,ft,Et){return Et}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:xo.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){return[tt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.iconService.getIconMap(),Bt=G.texture,se=Et[Bt]||{x:0,y:0},xe=se.x,De=se.y;return[xe,De]}}})}}]),c}(zl);function D2(s){var p=uP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function uP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var lP=`
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;

uniform float u_borderWidth: 0.0;
uniform vec4 u_borderColor;
varying vec4 v_color;


uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,cP=`
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;


// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_vertexScale: 1.0;

#pragma include "projection"

varying vec4 v_color;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_color = a_Color;

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = a_Distance / a_Total_Distance; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  }
}
`,B2=function(s){(0,vi.Z)(c,s);var p=D2(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.vertexHeightScale,ft=tt===void 0?20:tt,Et=0,Bt=[0,0,0,0],se=[0,0,0,0];if(G&&Q&&(Bt=as(G),se=as(Q),Et=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_})){this.judgeStyleAttributes({opacity:_});var xe=this.layer.getEncodedData(),De=this.calDataFrame(this.cellLength,xe,this.cellProperties),Xe=De.data,Qe=De.width,br=De.height;this.rowCount=br,this.dataTexture=this.cellLength>0&&Xe.length>0?this.createTexture2D({flipY:!0,data:Xe,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Qe,height:br}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(_)?_:1,u_linearColor:Et,u_sourceColor:Bt,u_targetColor:se,u_vertexScale:ft}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"simpleline",vertexShader:cP,fragmentShader:lP,triangulation:QM,primitive:Zt.LINES,blend:this.getBlend(),depth:{enable:!1},stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:xo.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){return[Q[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:xo.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){return[Q[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?1:ft;return Array.isArray(Et)?[Et[0],Et[1]]:[Et,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G,Q,tt,ft){return ft}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:xo.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){return[Q[4]]}}})}}]),c}(zl);function fP(s){var p=hP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function hP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Qy=`#define LineTypeSolid 0.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;

varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;

varying vec2 v_iconMapUV;
varying float v_blur;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = styleMappingMat[3].a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + animateSpeed);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);

    
  
  
}
`,t0=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

varying vec4 v_color;
varying float v_blur;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "light"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_aimate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);

  // v_lightWeight = lightWeight;
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);
  // v_color = a_Color;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,H0=function(s){(0,vi.Z)(c,s);var p=fP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.NEAREST,min:Zt.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.sourceColor,Q=g.targetColor,tt=g.textureBlend,ft=tt===void 0?"normal":tt,Et=g.heightfixed,Bt=Et===void 0?!1:Et,se=g.lineTexture,xe=se===void 0?!1:se,De=g.iconStep,Xe=De===void 0?100:De,Qe=g.iconStepCount,br=Qe===void 0?1:Qe;this.rendererService.getDirty()&&this.texture.bind();var Wr=0,sn=[0,0,0,0],xn=[0,0,0,0];if(G&&Q&&(sn=as(G),xn=as(Q),Wr=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_})){this.judgeStyleAttributes({opacity:_});var Rn=this.layer.getEncodedData(),Bn=this.calDataFrame(this.cellLength,Rn,this.cellProperties),Qn=Bn.data,di=Bn.width,ta=Bn.height;this.rowCount=ta,this.dataTexture=this.cellLength>0&&Qn.length>0?this.createTexture2D({flipY:!0,data:Qn,format:Zt.LUMINANCE,type:Zt.FLOAT,width:di,height:ta}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_heightfixed:Number(Bt),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(_)?_:1,u_textureBlend:ft==="normal"?0:1,u_texture:this.texture,u_line_texture:xe?1:0,u_iconStepCount:br,u_icon_step:Xe,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Wr,u_sourceColor:sn,u_targetColor:xn}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"linewall",vertexShader:t0,fragmentShader:Qy,triangulation:f2,primitive:Zt.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var g=this,_=this.layer.getLayerConfig(),G=_.lineType,Q=G===void 0?"solid":G;this.styleAttributeService.registerStyleAttribute({name:"distance",type:xo.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(ft,Et,Bt,se){return[Bt[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:xo.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(ft,Et,Bt,se){return[Bt[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(ft,Et,Bt,se){var xe=ft.size,De=xe===void 0?1:xe;return Array.isArray(De)?[De[0],De[1]]:[De,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(ft,Et,Bt,se,xe){return xe}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:xo.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(ft,Et,Bt,se){return[Bt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(ft,Et,Bt,se){var xe=g.iconService.getIconMap(),De=ft.texture,Xe=xe[De]||{x:0,y:0},Qe=Xe.x,br=Xe.y;return[Qe,br]}}})}}]),c}(zl),pP={arc:UT,arcmini:qT,arc3d:YT,greatcircle:iP,wall:H0,line:R2,simple:B2},F2=pP;function N2(s){var p=dP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function dP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var z2=function(s){(0,vi.Z)(c,s);var p=N2(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","LineLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new F2[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var g=this.getModelType(),_={line:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},arcmini:{blend:"additive"},greatcircle:{blend:"additive"}};return _[g]}},{key:"getModelType",value:function(){var g,_=this.styleAttributeService.getLayerStyleAttribute("shape"),G=_==null||(g=_.scale)===null||g===void 0?void 0:g.field;return G||"line"}}]),c}(Kg);function G2(s){var p=vP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function vP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var qy=`varying vec4 v_color;
uniform float u_opacity: 1.0;

varying float v_z;
varying float v_lightWeight;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_z);
    gl_FragColor.rgb *= v_lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_z): v_z;
  }

  // picking
  gl_FragColor = filterColor(gl_FragColor);
}
`,U2=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

varying float v_z;
varying float v_lightWeight;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_z = a_Position.z;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z) * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = u_lightEnable > 0.0 ? calc_lighting(pos): 1.0;
  v_lightWeight = lightWeight;
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }
  
  if(u_globel > 0.0) {
    // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
    //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
    float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
    float xRadian = getXRadian(a_Pos.y, r);
    float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 mx = mat4(
      1,0,0,0,  
      0,xcos,-xsin,0,  
      0,xsin,xcos,0,  
      0,0,0,1);

    //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
    float yRadian = getYRadian(a_Pos.x, a_Pos.z);
    float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 my = mat4(
      ycos,0,-ysin,0,  
      0,1,0,0,  
      ysin,0,ycos,0,  
      0,0,0,1);

    gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  }

  setPickingColor(a_PickingColor);
}
`,V2=function(s){(0,vi.Z)(c,s);var p=G2(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"raiseCount",0),(0,Y.Z)((0,Tt.Z)(h),"raiserepeat",0),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption,G=_===void 0?{enable:!1,speed:.01,repeat:!1}:_,Q=g.opacity,tt=Q===void 0?1:Q,ft=g.sourceColor,Et=g.targetColor,Bt=g.opacityLinear,se=Bt===void 0?{enable:!1,dir:"up"}:Bt,xe=g.lightEnable,De=xe===void 0?!0:xe;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:tt})){this.judgeStyleAttributes({opacity:tt});var Xe=this.layer.getEncodedData(),Qe=this.calDataFrame(this.cellLength,Xe,this.cellProperties),br=Qe.data,Wr=Qe.width,sn=Qe.height;this.rowCount=sn,this.dataTexture=this.cellLength>0&&br.length>0?this.createTexture2D({flipY:!0,data:br,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Wr,height:sn}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}var xn=0,Rn=[0,0,0,0],Bn=[0,0,0,0];if(ft&&Et&&(Rn=as(ft),Bn=as(Et),xn=1),this.raiseCount<1&&this.raiserepeat>0&&G.enable){var Qn=G.speed,di=Qn===void 0?.01:Qn,ta=G.repeat,Ca=ta===void 0?!1:ta;this.raiseCount+=di,this.raiseCount>=1&&(this.raiserepeat>1?(this.raiseCount=0,this.raiserepeat--):this.raiseCount=1)}return{u_r:G.enable&&this.raiserepeat>0?this.raiseCount:1,u_globel:this.mapService.version==="GLOBEL"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(tt)?tt:1,u_linearColor:xn,u_sourceColor:Rn,u_targetColor:Bn,u_opacitylinear:Number(se.enable),u_opacitylinear_dir:se.dir==="up"?1:0,u_lightEnable:Number(De)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.depth,G=_===void 0?!0:_,Q=g.animateOption.repeat,tt=Q===void 0?1:Q;return this.raiserepeat=tt,[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:U2,fragmentShader:qy,triangulation:l2,blend:this.getBlend(),cull:{enable:!0,face:this.mapService.version==="MAPBOX"?Zt.FRONT:Zt.BACK},depth:{enable:G}})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){var g=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(G,Q,tt,ft){var Et=G.size;if(Et){var Bt=[];return Array.isArray(Et)&&(Bt=Et.length===2?[Et[0],Et[0],Et[1]]:Et),Array.isArray(Et)||(Bt=[Et,Et,Et]),Bt}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(G,Q,tt,ft,Et){return Et}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:xo.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(G,Q){var tt=$g(G.coordinates);return g?e2([tt[0],tt[1]]):[tt[0],tt[1],0]}}})}}]),c}(zl),e0;(function(s){s["GAODE1.x"]="GAODE1.x",s["GAODE2.x"]="GAODE2.x",s.MAPBOX="MAPBOX",s.L7MAP="L7MAP",s.GLOBEL="GLOBEL"})(e0||(e0={}));function gP(s){var p=mP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function mP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Z2=`#define Animate 0.0

uniform float u_globel;
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

 
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(u_globel > 0.0) {
    // TODO: \u5730\u7403\u6A21\u5F0F\u4E0B\u907F\u514D\u591A\u4F59\u7247\u5143\u7ED8\u5236\uFF0C\u540C\u65F6\u4E5F\u80FD\u907F\u514D\u6709\u7528\u7247\u5143\u5728\u900F\u660E\u4E14\u91CD\u53E0\u7684\u60C5\u51B5\u4E0B\u65E0\u6CD5\u5199\u5165
    // \u4ED8\u51FA\u7684\u4EE3\u4EF7\u662F\u8FB9\u7F18\u4F1A\u6709\u4E00\u4E9B\u952F\u9F7F
    if(outer_df > antialiasblur + 0.018) discard;
  }
  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);

  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    
    // TODO: \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
    if(u_additive > 0.0) {
      gl_FragColor *= intensity;
    } else {
      gl_FragColor = vec4(gl_FragColor.xyz, intensity);
    }
  
    // TODO: \u4F18\u5316\u5728\u6C34\u6CE2\u7EB9\u60C5\u51B5\u4E0B\u7684\u62FE\u53D6\uFF08a == 0 \u65F6\u65E0\u6CD5\u62FE\u53D6\uFF09
    if(d < 0.7) {
      gl_FragColor.a = max(gl_FragColor.a, 0.001);
    }

    if(u_additive > 0.0) {
      gl_FragColor = filterColorAnimate(gl_FragColor);
    } else {
      gl_FragColor = filterColor(gl_FragColor);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
    
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }
}
`,yP=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_globel;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // TODO: billboard
  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
  }
  
  

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  if(u_globel > 0.0) {
    gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,H2=function(s){(0,vi.Z)(c,s);var p=gP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"meter2coord",1),(0,Y.Z)((0,Tt.Z)(h),"isMeter",!1),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.strokeOpacity,tt=Q===void 0?1:Q,ft=g.strokeWidth,Et=ft===void 0?0:ft,Bt=g.stroke,se=Bt===void 0?"rgba(0,0,0,0)":Bt,xe=g.offsets,De=xe===void 0?[0,0]:xe,Xe=g.blend;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G,strokeOpacity:tt,strokeWidth:Et,stroke:se,offsets:De})){this.judgeStyleAttributes({opacity:G,strokeOpacity:tt,strokeWidth:Et,stroke:se,offsets:De});var Qe=this.layer.getEncodedData(),br=this.calDataFrame(this.cellLength,Qe,this.cellProperties),Wr=br.data,sn=br.width,xn=br.height;this.rowCount=xn,this.dataTexture=this.cellLength>0&&Wr.length>0?this.createTexture2D({flipY:!0,data:Wr,format:Zt.LUMINANCE,type:Zt.FLOAT,width:sn,height:xn}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_isMeter:Number(this.isMeter),u_additive:Xe==="additive"?1:0,u_globel:this.mapService.version===e0.GLOBEL?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1,u_stroke_opacity:su()(tt)?tt:1,u_stroke_width:su()(Et)?Et:0,u_stroke_color:this.getStrokeColor(se),u_offsets:this.isOffsetStatic(De)?De:[0,0]}}},{key:"getAnimateUniforms",value:function(){var g=this.layer.getLayerConfig(),_=g.animateOption;return{u_aimate:this.animateOption2Array(_),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),u2)}},{key:"initModels",value:function(){var g=this.layer.getLayerConfig(),_=g.unit,G=_===void 0?"l7size":_,Q=this.mapService.version;return G==="meter"&&Q!==e0.L7MAP&&Q!==e0.GLOBEL&&Q!==e0.MAPBOX&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var g=(0,ga.Z)(this.layer.getSource().extent,4),_=g[0],G=g[1],Q=g[2],tt=g[3],ft=[(_+Q)/2,(G+tt)/2],Et=this.mapService.meterToCoord(ft,[_,G]),Bt=this.mapService.meterToCoord(ft,[Q===_?Q+.1:Q,tt===G?G+.1:tt]);this.meter2coord=(Et+Bt)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q,ft=this.mapService.version==="GLOBEL";return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:yP,fragmentShader:Z2,triangulation:ft?$M:u2,depth:{enable:ft},blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"animateOption2Array",value:function(g){return[g.enable?0:1,g.speed||1,g.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var g=this,_=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"extrude",type:xo.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(Q,tt,ft,Et){var Bt;if(_){var se=(0,ga.Z)(ft,3),xe=se[0],De=se[1],Xe=se[2],Qe=Yo.fromValues(0,0,1),br=Yo.fromValues(xe,0,Xe),Wr=xe>=0?Yo.angle(Qe,br):Math.PI*2-Yo.angle(Qe,br),sn=Math.PI*2-Math.asin(De/100),xn=uh();Dh(xn,xn,Wr),Yd(xn,xn,sn);var Rn=Yo.fromValues(1,1,0);Yo.transformMat4(Rn,Rn,xn),Yo.normalize(Rn,Rn);var Bn=Yo.fromValues(-1,1,0);Yo.transformMat4(Bn,Bn,xn),Yo.normalize(Bn,Bn);var Qn=Yo.fromValues(-1,-1,0);Yo.transformMat4(Qn,Qn,xn),Yo.normalize(Qn,Qn);var di=Yo.fromValues(1,-1,0);Yo.transformMat4(di,di,xn),Yo.normalize(di,di),Bt=[].concat((0,ot.Z)(Rn),(0,ot.Z)(Bn),(0,ot.Z)(Qn),(0,ot.Z)(di))}else Bt=[1,1,0,-1,1,0,-1,-1,0,1,-1,0];var ta=Et%4*3;return[Bt[ta],Bt[ta+1],Bt[ta+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(Q,tt,ft,Et){var Bt=Q.size,se=Bt===void 0?5:Bt;return Array.isArray(se)?[se[0]*g.meter2coord]:[se*g.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:xo.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(Q,tt,ft,Et){var Bt=Q.shape,se=Bt===void 0?2:Bt,xe=g.layer.getLayerConfig().shape2d,De=xe.indexOf(se);return[De]}}})}}]),c}(zl);function xP(s){var p=_P();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function _P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var j2=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,bP=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
    }
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,SP=function(s){(0,vi.Z)(c,s);var p=xP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity;return{u_opacity:_||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var g=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){g.updateTexture(),g.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:bP,fragmentShader:j2,triangulation:c2,primitive:Zt.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){var Et=G.size;return Array.isArray(Et)?[Et[0]]:[Et]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.fontService.mapping,Bt=G.shape,se=g.fontService.getGlyph(Bt),xe=Et[se],De=xe.x,Xe=xe.y;return[De,Xe]}}})}},{key:"updateTexture",value:function(){var g=this.rendererService.createTexture2D,_=this.fontService.canvas;this.texture=g({data:_,mag:Zt.LINEAR,min:Zt.LINEAR,width:_.width,height:_.height})}},{key:"initIconFontGlyphs",value:function(){var g=this,_=this.layer.getLayerConfig(),G=_.fontWeight,Q=G===void 0?"normal":G,tt=_.fontFamily,ft=tt===void 0?"sans-serif":tt,Et=this.layer.getEncodedData(),Bt=[];Et.forEach(function(se){var xe=se.shape,De=xe===void 0?"":xe;De=De.toString();var Xe=g.fontService.getGlyph(De);Bt.indexOf(Xe)===-1&&Bt.push(Xe)}),this.fontService.setFontOptions({characterSet:Bt,fontWeight:Q,fontFamily:ft,fontSize:48})}}]),c}(zl);function wP(s){var p=X2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function X2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var EP=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,CP=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
    }
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,Y2=function(s){(0,vi.Z)(c,s);var p=wP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"updateTexture",function(){var Q=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),h.layer.renderLayers();return}h.texture=Q({data:h.iconService.getCanvas(),mag:Zt.LINEAR,min:Zt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128,mipmap:!0})}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=g.offsets,Q=G===void 0?[0,0]:G;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:_,offsets:Q})){this.judgeStyleAttributes({opacity:_,offsets:Q});var tt=this.layer.getEncodedData(),ft=this.calDataFrame(this.cellLength,tt,this.cellProperties),Et=ft.data,Bt=ft.width,se=ft.height;this.rowCount=se,this.dataTexture=this.cellLength>0&&Et.length>0?this.createTexture2D({flipY:!0,data:Et,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Bt,height:se}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:su()(_)?_:1,u_offsets:this.isOffsetStatic(Q)?Q:[0,0]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var g,_;(g=this.texture)===null||g===void 0||g.destroy(),(_=this.dataTexture)===null||_===void 0||_.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:CP,fragmentShader:EP,triangulation:c2,primitive:Zt.POINTS,depth:{enable:!1},blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"registerBuiltinAttributes",value:function(){var g=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(G,Q,tt,ft){var Et=G.size,Bt=Et===void 0?5:Et;return Array.isArray(Bt)?[Bt[0]]:[Bt]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(G,Q,tt,ft){var Et=g.iconService.getIconMap(),Bt=G.shape,se=Et[Bt]||{x:0,y:0},xe=se.x,De=se.y;return[xe,De]}}})}}]),c}(zl);function Lm(s){var p=W2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function W2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var AP=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  float opacity = styleMappingMat[0][0];

  gl_FragColor = v_color;
  // gl_FragColor.a =gl_FragColor.a * u_opacity;
  gl_FragColor.a =gl_FragColor.a * opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,MP=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  // vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);
  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\
  // 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 offset = project_pixel((u_offsets));
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    // vec2 offset = project_pixel(u_offsets);
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function K2(s){var p=s.coordinates;return{vertices:(0,ot.Z)(p),indices:[0],size:p.length}}var xx=function(s){(0,vi.Z)(c,s);var p=Lm(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.offsets,tt=Q===void 0?[0,0]:Q;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G,offsets:tt})){this.judgeStyleAttributes({opacity:G,offsets:tt});var ft=this.layer.getEncodedData(),Et=this.calDataFrame(this.cellLength,ft,this.cellProperties),Bt=Et.data,se=Et.width,xe=Et.height;this.rowCount=xe,this.dataTexture=this.cellLength>0&&Bt.length>0?this.createTexture2D({flipY:!0,data:Bt,format:Zt.LUMINANCE,type:Zt.FLOAT,width:se,height:xe}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1,u_offsets:this.isOffsetStatic(tt)?tt:[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:MP,fragmentShader:AP,triangulation:K2,depth:{enable:!1},primitive:Zt.POINTS,blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?1:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:Cp.additive}}}]),c}(zl);function TP(s){var p=$2();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function $2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Q2=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);

  

  
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,PP=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  // vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);
  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\
  // 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 offset = project_pixel((u_offsets));
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    // vec2 offset = project_pixel(u_offsets);
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function q2(s){var p=s.coordinates;return{vertices:(0,ot.Z)(p),indices:[0],size:p.length}}var IP=function(s){(0,vi.Z)(c,s);var p=TP(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.offsets,tt=Q===void 0?[0,0]:Q,ft=g.blend,Et=g.strokeOpacity,Bt=Et===void 0?1:Et,se=g.strokeWidth,xe=se===void 0?0:se,De=g.stroke,Xe=De===void 0?"#fff":De;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G,offsets:tt})){this.judgeStyleAttributes({opacity:G,offsets:tt});var Qe=this.layer.getEncodedData(),br=this.calDataFrame(this.cellLength,Qe,this.cellProperties),Wr=br.data,sn=br.width,xn=br.height;this.rowCount=xn,this.dataTexture=this.cellLength>0&&Wr.length>0?this.createTexture2D({flipY:!0,data:Wr,format:Zt.LUMINANCE,type:Zt.FLOAT,width:sn,height:xn}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_additive:ft==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1,u_offsets:this.isOffsetStatic(tt)?tt:[0,0],u_stroke_opacity:su()(Bt)?Bt:1,u_stroke_width:su()(xe)?xe:0,u_stroke_color:this.getStrokeColor(Xe)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;return[this.layer.buildLayerModel({moduleName:"simplepoint",vertexShader:PP,fragmentShader:Q2,triangulation:q2,depth:{enable:!1},primitive:Zt.POINTS,blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?1:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:Cp.additive}}}]),c}(zl);function OP(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=LP(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function LP(s,p){if(!!s){if(typeof s=="string")return J2(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return J2(s,p)}}function J2(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}var kP=function(){function s(p,c,h){(0,cn.Z)(this,s),(0,Y.Z)(this,"boxCells",[]),(0,Y.Z)(this,"xCellCount",void 0),(0,Y.Z)(this,"yCellCount",void 0),(0,Y.Z)(this,"boxKeys",void 0),(0,Y.Z)(this,"bboxes",void 0),(0,Y.Z)(this,"width",void 0),(0,Y.Z)(this,"height",void 0),(0,Y.Z)(this,"xScale",void 0),(0,Y.Z)(this,"yScale",void 0),(0,Y.Z)(this,"boxUid",void 0);var g=this.boxCells;this.xCellCount=Math.ceil(p/h),this.yCellCount=Math.ceil(c/h);for(var _=0;_<this.xCellCount*this.yCellCount;_++)g.push([]);this.boxKeys=[],this.bboxes=[],this.width=p,this.height=c,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/c,this.boxUid=0}return(0,vn.Z)(s,[{key:"insert",value:function(c,h,g,_,G){this.forEachCell(h,g,_,G,this.insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(G)}},{key:"query",value:function(c,h,g,_,G){return this.queryHitTest(c,h,g,_,!1,G)}},{key:"hitTest",value:function(c,h,g,_,G){return this.queryHitTest(c,h,g,_,!0,G)}},{key:"insertBoxCell",value:function(c,h,g,_,G,Q){this.boxCells[G].push(Q)}},{key:"queryHitTest",value:function(c,h,g,_,G,Q){if(g<0||c>this.width||_<0||h>this.height)return G?!1:[];var tt=[];if(c<=0&&h<=0&&this.width<=g&&this.height<=_){if(G)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)tt.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});return Q?tt.filter(Q):tt}var Et={hitTest:G,seenUids:{box:{},circle:{}}};return this.forEachCell(c,h,g,_,this.queryCell,tt,Et,Q),G?tt.length>0:tt}},{key:"queryCell",value:function(c,h,g,_,G,Q,tt,ft){var Et=tt.seenUids,Bt=this.boxCells[G];if(Bt!==null){var se=this.bboxes,xe=OP(Bt),De;try{for(xe.s();!(De=xe.n()).done;){var Xe=De.value;if(!Et.box[Xe]){Et.box[Xe]=!0;var Qe=Xe*4;if(c<=se[Qe+2]&&h<=se[Qe+3]&&g>=se[Qe+0]&&_>=se[Qe+1]&&(!ft||ft(this.boxKeys[Xe]))){if(tt.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[Xe],x1:se[Qe],y1:se[Qe+1],x2:se[Qe+2],y2:se[Qe+3]})}}}}catch(br){xe.e(br)}finally{xe.f()}}return!1}},{key:"forEachCell",value:function(c,h,g,_,G,Q,tt,ft){for(var Et=this.convertToXCellCoord(c),Bt=this.convertToYCellCoord(h),se=this.convertToXCellCoord(g),xe=this.convertToYCellCoord(_),De=Et;De<=se;De++)for(var Xe=Bt;Xe<=xe;Xe++){var Qe=this.xCellCount*Xe+De;if(G.call(this,c,h,g,_,Qe,Q,tt,ft))return}}},{key:"convertToXCellCoord",value:function(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}},{key:"convertToYCellCoord",value:function(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}}]),s}(),RP=kP,_x=function(){function s(p,c){(0,cn.Z)(this,s),(0,Y.Z)(this,"width",void 0),(0,Y.Z)(this,"height",void 0),(0,Y.Z)(this,"grid",void 0),(0,Y.Z)(this,"viewportPadding",100),(0,Y.Z)(this,"screenRightBoundary",void 0),(0,Y.Z)(this,"screenBottomBoundary",void 0),(0,Y.Z)(this,"gridRightBoundary",void 0),(0,Y.Z)(this,"gridBottomBoundary",void 0),this.width=p,this.height=c,this.viewportPadding=Math.max(p,c),this.grid=new RP(p+this.viewportPadding,c+this.viewportPadding,25),this.screenRightBoundary=p+this.viewportPadding,this.screenBottomBoundary=c+this.viewportPadding,this.gridRightBoundary=p+2*this.viewportPadding,this.gridBottomBoundary=c+2*this.viewportPadding}return(0,vn.Z)(s,[{key:"placeCollisionBox",value:function(c){var h=c.x1+c.anchorPointX+this.viewportPadding,g=c.y1+c.anchorPointY+this.viewportPadding,_=c.x2+c.anchorPointX+this.viewportPadding,G=c.y2+c.anchorPointY+this.viewportPadding;return!this.isInsideGrid(h,g,_,G)||this.grid.hitTest(h,g,_,G)?{box:[]}:{box:[h,g,_,G]}}},{key:"insertCollisionBox",value:function(c,h){var g={featureIndex:h};this.grid.insert(g,c[0],c[1],c[2],c[3])}},{key:"project",value:function(c,h,g){var _=lh(h,g,0,1),G=Bs(),Q=Us.apply(T,(0,ot.Z)(c));return _a(G,_,Q),{x:(G[0]/G[3]+1)/2*this.width+this.viewportPadding,y:(-G[1]/G[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(c,h,g,_){return g>=0&&c<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}}]),s}();function _d(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=bx(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function bx(s,p){if(!!s){if(typeof s=="string")return DP(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return DP(s,p)}}function DP(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function km(s){var p=.5,c=.5;switch(s){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0;break;default:p=.5}switch(s){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0;break;default:c=.5}return{horizontalAlign:p,verticalAlign:c}}function Jy(s,p,c,h,g){if(!!g){var _=s[h],G=_.glyph;if(G)for(var Q=p[G].advance*_.scale,tt=(s[h].x+Q)*g,ft=c;ft<=h;ft++)s[ft].x-=tt}}function Sx(s,p,c,h,g,_,G){var Q=(p-c)*g,tt=(-h*G+.5)*_,ft=_d(s),Et;try{for(ft.s();!(Et=ft.n()).done;){var Bt=Et.value;Bt.x+=Q,Bt.y+=tt}}catch(se){ft.e(se)}finally{ft.f()}}function tS(s,p,c,h,g,_,G){var Q=-8,tt=0,ft=Q,Et=0,Bt=s.positionedGlyphs,se=_==="right"?1:_==="left"?0:.5,xe=Bt.length;c.forEach(function(Wr){if(Wr.split("").forEach(function(xn){var Rn=p[xn],Bn=0;Rn&&(Bt.push({glyph:xn,x:tt,y:ft+Bn,vertical:!1,scale:1,metrics:Rn}),tt+=Rn.advance+G)}),Bt.length!==xe){var sn=tt-G;Et=Math.max(sn,Et),Jy(Bt,p,xe,Bt.length-1,se)}tt=0,ft-=h+5});var De=km(g),Xe=De.horizontalAlign,Qe=De.verticalAlign;Sx(Bt,se,Xe,Qe,Et,h,c.length);var br=ft-Q;s.top+=-Qe*br,s.bottom=s.top-br,s.left+=-Xe*Et,s.right=s.left+Et}function eS(s,p,c,h,g,_,G){var Q=-8,tt=0,ft=Q,Et=0,Bt=s.positionedGlyphs,se=_==="right"?1:_==="left"?0:.5,xe=Bt.length;c.forEach(function(Wr){var sn=p[Wr],xn=0;if(sn&&(Bt.push({glyph:Wr,x:tt,y:ft+xn,vertical:!1,scale:1,metrics:sn}),tt+=sn.advance+G),Bt.length!==xe){var Rn=tt-G;Et=Math.max(Rn,Et),Jy(Bt,p,xe,Bt.length-1,se)}tt=0,ft-=h+5});var De=km(g),Xe=De.horizontalAlign,Qe=De.verticalAlign;Sx(Bt,se,Xe,Qe,Et,h,c.length);var br=ft-Q;s.top+=-Qe*br,s.bottom=s.top-br,s.left+=-Xe*Et,s.right=s.left+Et}function BP(s,p,c,h,g,_){var G=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],Q=arguments.length>7?arguments[7]:void 0,tt=s.split(`
`),ft=[],Et={positionedGlyphs:ft,top:G[1],bottom:G[1],left:G[0],right:G[0],lineCount:tt.length,text:s};return Q?eS(Et,p,tt,c,h,g,_):tS(Et,p,tt,c,h,g,_),ft.length?Et:!1}function FP(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],c=arguments.length>2?arguments[2]:void 0,h=s.positionedGlyphs,g=h===void 0?[]:h,_=[],G=_d(g),Q;try{for(G.s();!(Q=G.n()).done;){var tt=Q.value,ft=tt.metrics,Et=4,Bt=ft.advance*tt.scale/2,se=c?[tt.x+Bt,tt.y]:[0,0],xe=c?[0,0]:[tt.x+Bt+p[0],tt.y+p[1]],De=(0-Et)*tt.scale-Bt+xe[0],Xe=(0-Et)*tt.scale+xe[1],Qe=De+ft.width*tt.scale,br=Xe+ft.height*tt.scale,Wr={x:De,y:Xe},sn={x:Qe,y:Xe},xn={x:De,y:br},Rn={x:Qe,y:br};_.push({tl:Wr,tr:sn,bl:xn,br:Rn,tex:ft,glyphOffset:se})}}catch(Bn){G.e(Bn)}finally{G.f()}return _}function NP(s,p){var c=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=zP(s))||p&&s&&typeof s.length=="number"){c&&(s=c);var h=0,g=function(){};return{s:g,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(ft){throw ft},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,G=!1,Q;return{s:function(){c=c.call(s)},n:function(){var ft=c.next();return _=ft.done,ft},e:function(ft){G=!0,Q=ft},f:function(){try{!_&&c.return!=null&&c.return()}finally{if(G)throw Q}}}}function zP(s,p){if(!!s){if(typeof s=="string")return rS(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return rS(s,p)}}function rS(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function nS(s){var p=t1();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function t1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var iS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ex=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function aS(s){var p=this,c=s.id,h=[],g=[];if(!p.glyphInfoMap||!p.glyphInfoMap[c])return{vertices:[],indices:[],size:7};var _=p.glyphInfoMap[c].centroid,G=_.length===2?[_[0],_[1],0]:_;return p.glyphInfoMap[c].glyphQuads.forEach(function(Q,tt){h.push.apply(h,(0,ot.Z)(G).concat([Q.tex.x,Q.tex.y+Q.tex.height,Q.tl.x,Q.tl.y],(0,ot.Z)(G),[Q.tex.x+Q.tex.width,Q.tex.y+Q.tex.height,Q.tr.x,Q.tr.y],(0,ot.Z)(G),[Q.tex.x+Q.tex.width,Q.tex.y,Q.br.x,Q.br.y],(0,ot.Z)(G),[Q.tex.x,Q.tex.y,Q.bl.x,Q.bl.y])),g.push(0+tt*4,1+tt*4,2+tt*4,2+tt*4,3+tt*4,0+tt*4)}),{vertices:h,indices:g,size:7}}var GP=function(s){(0,vi.Z)(c,s);var p=nS(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"glyphInfo",void 0),(0,Y.Z)((0,Tt.Z)(h),"glyphInfoMap",{}),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"currentZoom",-1),(0,Y.Z)((0,Tt.Z)(h),"extent",void 0),(0,Y.Z)((0,Tt.Z)(h),"textureHeight",0),(0,Y.Z)((0,Tt.Z)(h),"textCount",0),(0,Y.Z)((0,Tt.Z)(h),"preTextStyle",{}),(0,Y.Z)((0,Tt.Z)(h),"buildModels",function(){var Q=h.layer.getLayerConfig(),tt=Q.mask,ft=tt===void 0?!1:tt,Et=Q.maskInside,Bt=Et===void 0?!0:Et;return h.initGlyph(),h.updateTexture(),h.filterGlyphs(),h.reBuildModel(),[h.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ex,fragmentShader:iS,triangulation:aS.bind((0,Tt.Z)(h)),depth:{enable:!1},blend:h.getBlend(),stencil:ju(ft,Bt)})]}),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.stroke,tt=Q===void 0?"#fff":Q,ft=g.strokeWidth,Et=ft===void 0?0:ft,Bt=g.textAnchor,se=Bt===void 0?"center":Bt,xe=g.textAllowOverlap,De=xe===void 0?!1:xe,Xe=g.halo,Qe=Xe===void 0?.5:Xe,br=g.gamma,Wr=br===void 0?2:br,sn=this.fontService,xn=sn.canvas,Rn=sn.mapping;if(Object.keys(Rn).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(Rn).length),this.preTextStyle={textAnchor:se,textAllowOverlap:De},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G,strokeWidth:Et,stroke:tt})){this.judgeStyleAttributes({opacity:G,strokeWidth:Et,stroke:tt});var Bn=this.layer.getEncodedData(),Qn=this.calDataFrame(this.cellLength,Bn,this.cellProperties),di=Qn.data,ta=Qn.width,Ca=Qn.height;this.rowCount=Ca,this.dataTexture=this.cellLength>0&&di.length>0?this.createTexture2D({flipY:!0,data:di,format:Zt.LUMINANCE,type:Zt.FLOAT,width:ta,height:Ca}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1,u_stroke_width:su()(Et)?Et:0,u_stroke_color:this.getStrokeColor(tt),u_sdf_map:this.texture,u_halo_blur:Qe,u_gamma_scale:Wr,u_sdf_map_size:[xn.width,xn.height]}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var g=this.layer.getLayerConfig(),_=g.textAnchor,G=_===void 0?"center":_,Q=g.textAllowOverlap,tt=Q===void 0?!0:Q;return this.preTextStyle={textAnchor:G,textAllowOverlap:tt},this.buildModels()}},{key:"needUpdate",value:function(){var g=this.layer.getLayerConfig(),_=g.textAllowOverlap,G=_===void 0?!1:_,Q=this.mapService.getZoom(),tt=this.mapService.getBounds(),ft=za(this.extent,tt);return!G&&(Math.abs(this.currentZoom-Q)>1||!ft)||G!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy(),this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:xo.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.rotate,Et=ft===void 0?0:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:xo.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){return[Q[5],Q[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?12:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:xo.Attribute,descriptor:{name:"a_tex",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){return[Q[3],Q[4]]}}})}},{key:"textExtent",value:function(){var g=this.mapService.getBounds();return Wa(g,.5)}},{key:"initTextFont",value:function(){var g=this.layer.getLayerConfig(),_=g.fontWeight,G=_===void 0?"400":_,Q=g.fontFamily,tt=Q===void 0?"sans-serif":Q,ft=this.layer.getEncodedData(),Et=[];ft.forEach(function(Bt){var se=Bt.shape,xe=se===void 0?"":se;xe=xe.toString();var De=NP(xe),Xe;try{for(De.s();!(Xe=De.n()).done;){var Qe=Xe.value;Et.indexOf(Qe)===-1&&Et.push(Qe)}}catch(br){De.e(br)}finally{De.f()}}),this.fontService.setFontOptions({characterSet:Et,fontWeight:G,fontFamily:tt,iconfont:!1})}},{key:"initIconFontTex",value:function(){var g=this.layer.getLayerConfig(),_=g.fontWeight,G=_===void 0?"400":_,Q=g.fontFamily,tt=Q===void 0?"sans-serif":Q,ft=this.layer.getEncodedData(),Et=[];ft.forEach(function(Bt){var se=Bt.shape,xe=se===void 0?"":se;xe="".concat(xe),Et.indexOf(xe)===-1&&Et.push(xe)}),this.fontService.setFontOptions({characterSet:Et,fontWeight:G,fontFamily:tt,iconfont:!0})}},{key:"generateGlyphLayout",value:function(g){var _=this,G=this.fontService.mapping,Q=this.layer.getLayerConfig(),tt=Q.spacing,ft=tt===void 0?2:tt,Et=Q.textAnchor,Bt=Et===void 0?"center":Et,se=this.layer.getEncodedData();this.glyphInfo=se.map(function(xe){var De=xe.shape,Xe=De===void 0?"":De,Qe=xe.id,br=xe.size,Wr=br===void 0?1:br,sn=xe.textOffset,xn=sn===void 0?[0,0]:sn,Rn=BP(Xe.toString(),G,Wr,Bt,"left",ft,xn,g),Bn=FP(Rn,xn,!1);return xe.shaping=Rn,xe.glyphQuads=Bn,xe.centroid=$g(xe.coordinates),xe.originCentroid=xe.version==="GAODE2.x"?$g(xe.originCoordinates):xe.originCentroid=xe.centroid,_.glyphInfoMap[Qe]={shaping:Rn,glyphQuads:Bn,centroid:$g(xe.coordinates)},xe})}},{key:"filterGlyphs",value:function(){var g=this,_=this.layer.getLayerConfig(),G=_.padding,Q=G===void 0?[4,4]:G,tt=_.textAllowOverlap,ft=tt===void 0?!1:tt;if(!ft){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var Et=this.rendererService.getViewportSize(),Bt=Et.width,se=Et.height,xe=new _x(Bt,se),De=this.glyphInfo.filter(function(Xe){var Qe=Xe.shaping,br=Xe.id,Wr=br===void 0?0:br,sn=Xe.version==="GAODE2.x"?Xe.originCentroid:Xe.centroid,xn=Xe.size,Rn=xn/24,Bn=g.mapService.lngLatToContainer(sn),Qn=xe.placeCollisionBox({x1:Qe.left*Rn-Q[0],x2:Qe.right*Rn+Q[0],y1:Qe.top*Rn-Q[1],y2:Qe.bottom*Rn+Q[1],anchorPointX:Bn.x,anchorPointY:Bn.y}),di=Qn.box;return di&&di.length?(xe.insertCollisionBox(di,Wr),!0):!1});De.forEach(function(Xe){g.glyphInfoMap[Xe.id]=Xe})}}},{key:"initGlyph",value:function(){var g=this.layer.getLayerConfig(),_=g.iconfont,G=_===void 0?!1:_;G?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(G)}},{key:"updateTexture",value:function(){var g=this.rendererService.createTexture2D,_=this.fontService.canvas;this.textureHeight=_.height,this.texture&&this.texture.destroy(),this.texture=g({data:_,mag:Zt.LINEAR,min:Zt.LINEAR,width:_.width,height:_.height})}},{key:"reBuildModel",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q;this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ex,fragmentShader:iS,triangulation:aS.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:ju(G,tt)})]}}]),c}(zl),UP={fill:H2,image:Y2,normal:xx,simplePoint:IP,extrude:V2,text:GP,icon:SP},Ek=UP;function oS(s){var p=Cx();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function Cx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var VP=function(s){(0,vi.Z)(c,s);var p=oS(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","PointLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new Ek[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var g=this.getModelType(),_={normal:{blend:"additive"},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return _[g]}},{key:"getModelType",value:function(){var g=this.getEncodedData(),_=this.getLayerConfig(),G=_.shape2d,Q=_.shape3d,tt=this.iconService.getIconMap(),ft=g.find(function(Bt){return Bt.hasOwnProperty("shape")});if(ft){var Et=ft.shape;return Et==="dot"?"normal":Et==="simple"?"simplePoint":(G==null?void 0:G.indexOf(Et))!==-1?"fill":(Q==null?void 0:Q.indexOf(Et))!==-1?"extrude":tt.hasOwnProperty(Et)?"image":this.fontService.getGlyph(Et)!==""?"icon":"text"}else return"normal"}}]),c}(Kg);function sS(s){var p=uS();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function uS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var lS=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  // gl_FragColor.a *= u_opacity;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ZP=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"
varying float v_lightWeight;

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  // gl_FragColor.a *= u_opacity;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorWithLight(gl_FragColor, v_lightWeight);
}
`,cS=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

varying float v_lightWeight;

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  v_lightWeight = lightWeight;
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,Ax=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,fS=function(s){(0,vi.Z)(c,s);var p=sS(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G})){this.judgeStyleAttributes({opacity:G});var Q=this.layer.getEncodedData(),tt=this.calDataFrame(this.cellLength,Q,this.cellProperties),ft=tt.data,Et=tt.width,Bt=tt.height;this.rowCount=Bt,this.dataTexture=this.cellLength>0&&ft.length>0?this.createTexture2D({flipY:!0,data:ft,format:Zt.LUMINANCE,type:Zt.FLOAT,width:Et,height:Bt}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.pickLight,G=_===void 0?!1:_,Q=g.mask,tt=Q===void 0?!1:Q,ft=g.maskInside,Et=ft===void 0?!0:ft;return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:G?cS:Ax,fragmentShader:G?ZP:lS,triangulation:h2,stencil:ju(tt,Et)})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:xo.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(_,G,Q,tt,ft){return ft}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:xo.Attribute,descriptor:{name:"a_Size",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(_,G,Q,tt){var ft=_.size,Et=ft===void 0?10:ft;return Array.isArray(Et)?[Et[0]]:[Et]}}})}}]),c}(zl);function hS(s){var p=HP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function HP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var pS=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,dS=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;


void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,jP=`attribute vec4 a_Color;
attribute vec3 a_Position;



uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}`,XP=`attribute vec4 a_Color;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,YP=function(s){(0,vi.Z)(c,s);var p=hS(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.opacityLinear,tt=Q===void 0?{enable:!1,dir:"in"}:Q;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:G})){this.judgeStyleAttributes({opacity:G});var ft=this.layer.getEncodedData(),Et=this.calDataFrame(this.cellLength,ft,this.cellProperties),Bt=Et.data,se=Et.width,xe=Et.height;this.rowCount=xe,this.dataTexture=this.cellLength>0&&Bt.length>0?this.createTexture2D({flipY:!0,data:Bt,format:Zt.LUMINANCE,type:Zt.FLOAT,width:se,height:xe}):this.createTexture2D({flipY:!0,data:[1],format:Zt.LUMINANCE,type:Zt.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:su()(G)?G:1,u_opacitylinear:Number(tt.enable),u_dir:tt.dir==="in"?1:0}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var g=this.layer.getLayerConfig(),_=g.opacityLinear,G=_===void 0?{enable:!1,dir:"in"}:_,Q=g.mask,tt=Q===void 0?!1:Q,ft=g.maskInside,Et=ft===void 0?!0:ft;return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:G.enable?jP:XP,fragmentShader:G.enable?dS:pS,triangulation:G.enable?JM:qM,blend:this.getBlend(),depth:{enable:!1},stencil:ju(tt,Et)})]}},{key:"clearModels",value:function(){var g;(g=this.dataTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){var g=this.layer.getLayerConfig(),_=g.opacityLinear,G=_===void 0?{enable:!1,dir:"in"}:_;G.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:xo.Attribute,descriptor:{name:"a_linear",buffer:{usage:Zt.STATIC_DRAW,data:[],type:Zt.FLOAT},size:3,update:function(tt,ft,Et,Bt,se){return[Et[3],Et[4],Et[5]]}}})}}]),c}(zl),vS={fill:YP,line:R2,extrude:fS,text:GP,point_fill:H2,point_image:Y2,point_normal:xx,point_extrude:V2},gS=vS;function WP(s){var p=mS();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function mS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var yS=function(s){(0,vi.Z)(c,s);var p=WP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","PolygonLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new gS[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var g,_=this.styleAttributeService.getLayerStyleAttribute("shape"),G=_==null||(g=_.scale)===null||g===void 0?void 0:g.field;return G==="fill"?"fill":G==="extrude"?"extrude":G==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var g=this.getEncodedData(),_=this.getLayerConfig(),G=_.shape2d,Q=_.shape3d,tt=this.iconService.getIconMap(),ft=g.find(function(Bt){return Bt.hasOwnProperty("shape")});if(ft){var Et=ft.shape;return Et==="dot"?"point_normal":(G==null?void 0:G.indexOf(Et))!==-1?"point_fill":(Q==null?void 0:Q.indexOf(Et))!==-1?"point_extrude":tt.hasOwnProperty(Et)?"point_image":"text"}else return"fill"}}]),c}(Kg);function xS(s){var p=KP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function KP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var $P=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,_S=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Mx=function(s){(0,vi.Z)(c,s);var p=xS(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"texture",void 0),(0,Y.Z)((0,Tt.Z)(h),"colorTexture",void 0),h}return(0,vn.Z)(c,[{key:"getUninforms",value:function(){var g=this.layer.getLayerConfig(),_=g.opacity,G=_===void 0?1:_,Q=g.clampLow,tt=Q===void 0?!0:Q,ft=g.clampHigh,Et=ft===void 0?!0:ft,Bt=g.noDataValue,se=Bt===void 0?-9999999:Bt,xe=g.domain,De=xe===void 0?[0,1]:xe;return this.updateColorTexure(),{u_opacity:G||1,u_texture:this.texture,u_domain:De,u_clampLow:tt,u_clampHigh:typeof Et!="undefined"?Et:tt,u_noDataValue:se,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var g=this.layer.getLayerConfig(),_=g.mask,G=_===void 0?!1:_,Q=g.maskInside,tt=Q===void 0?!0:Q,ft=this.layer.getSource(),Et=this.rendererService.createTexture2D,Bt=ft.data.dataArray[0];this.texture=Et({data:Bt.data,width:Bt.width,height:Bt.height,format:Zt.LUMINANCE,type:Zt.FLOAT});var se=this.layer.getLayerConfig(),xe=se.rampColors,De=dc(xe);return this.colorTexture=Et({data:De.data,width:De.width,height:De.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:_S,fragmentShader:$P,triangulation:eT,primitive:Zt.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:ju(G,tt)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:xo.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:2,update:function(_,G,Q,tt){return[Q[3],Q[4]]}}})}},{key:"updateColorTexure",value:function(){var g=this.rendererService.createTexture2D,_=this.layer.getLayerConfig(),G=_.rampColors,Q=dc(G);this.colorTexture=g({data:Q.data,width:Q.width,height:Q.height,flipY:!1})}}]),c}(zl),QP={raster:Mx,raster3d:Mx},bS=QP;function qP(s){var p=JP();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function JP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var tI=function(s){(0,vi.Z)(c,s);var p=qP(c);function c(){var h;(0,cn.Z)(this,c);for(var g=arguments.length,_=new Array(g),G=0;G<g;G++)_[G]=arguments[G];return h=p.call.apply(p,[this].concat(_)),(0,Y.Z)((0,Tt.Z)(h),"type","RasterLayer"),h}return(0,vn.Z)(c,[{key:"buildModels",value:function(){var g=this.getModelType();this.layerModel=new bS[g](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var g=this.getModelType(),_={raster:{},raster3d:{}};return _[g]}},{key:"getModelType",value:function(){return"raster"}}]),c}(Kg),SS,wS,ES,CS,AS,Rm,MS,TS,PS;function IS(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function eI(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?IS(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):IS(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var rI=(SS=(0,sa.b2)(),wS=(0,sa.f3)(Vn.IGlobalConfigService),ES=(0,sa.f3)(Vn.IMapService),CS=(0,sa.f3)(Vn.IFontService),SS(AS=(Rm=function(){function s(){(0,cn.Z)(this,s),Xi(this,"configService",MS,this),Xi(this,"mapService",TS,this),Xi(this,"fontService",PS,this)}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=this,_=h.styleAttributeService;c.hooks.init.tap("DataMappingPlugin",function(){g.generateMaping(c,{styleAttributeService:_})}),c.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return c.dataState.dataMappingNeedUpdate=!1,g.generateMaping(c,{styleAttributeService:_}),!0}),c.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!c.layerModelNeedUpdate){var G=c.getBottomColor(),Q=_.getLayerStyleAttributes()||[],tt=_.getLayerStyleAttribute("filter"),ft=c.getSource().data.dataArray,Et=Q.filter(function(se){return se.needRemapping}),Bt=ft;tt!=null&&tt.needRemapping&&tt!==null&&tt!==void 0&&tt.scale&&(Bt=ft.filter(function(se){return g.applyAttributeMapping(tt,se,G)[0]})),Et.length&&(tt!=null&&tt.needRemapping?(c.setEncodedData(g.mapping(Q,Bt,void 0,G)),tt.needRemapping=!1):c.setEncodedData(g.mapping(Et,Bt,c.getEncodedData(),G)),c.emit("remapping",null))}})}},{key:"generateMaping",value:function(c,h){var g=this,_=h.styleAttributeService,G=c.getBottomColor(),Q=_.getLayerStyleAttributes()||[],tt=_.getLayerStyleAttribute("filter"),ft=c.getSource().data.dataArray,Et=ft;tt!=null&&tt.scale&&(Et=ft.filter(function(Bt){return g.applyAttributeMapping(tt,Bt,G)[0]})),c.setEncodedData(this.mapping(Q,Et,void 0,G))}},{key:"mapping",value:function(c,h,g,_){var G=this,Q=h.map(function(tt,ft){var Et=g?g[ft]:{},Bt=eI({id:tt._id,coordinates:tt.coordinates},Et);return c.filter(function(se){return se.scale!==void 0}).forEach(function(se){var xe=G.applyAttributeMapping(se,tt,_);se.needRemapping=!1,se.name==="color"&&(xe=xe.map(function(De){return as(De)})),Bt[se.name]=Array.isArray(xe)&&xe.length===1?xe[0]:xe,se.name==="shape"&&(Bt.shape=G.fontService.getIconFontKey(Bt[se.name]))}),Bt});return Q.length>0&&this.mapService.version==="GAODE2.x"&&(typeof Q[0].coordinates[0]=="number"?Q.filter(function(tt){return!tt.originCoordinates}).map(function(tt){tt.version="GAODE2.x",tt.originCoordinates=At()(tt.coordinates),tt.coordinates=G.mapService.lngLatToCoord(tt.coordinates)}):Q.filter(function(tt){return!tt.originCoordinates}).map(function(tt){tt.version="GAODE2.x",tt.originCoordinates=At()(tt.coordinates),tt.coordinates=G.mapService.lngLatToCoords(tt.coordinates)})),Q}},{key:"applyAttributeMapping",value:function(c,h,g){var _;if(!c.scale)return[];var G=(c==null||(_=c.scale)===null||_===void 0?void 0:_.scalers)||[],Q=[];G.forEach(function(ft){var Et,Bt=ft.field;(h.hasOwnProperty(Bt)||((Et=c.scale)===null||Et===void 0?void 0:Et.type)==="variable")&&Q.push(h[Bt])});var tt=c.mapping?c.mapping(Q):[];return c.name==="color"&&!Vc(tt[0])?[g]:tt}}]),s}(),MS=ya(Rm.prototype,"configService",[wS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TS=ya(Rm.prototype,"mapService",[ES],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PS=ya(Rm.prototype,"fontService",[CS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rm))||AS),Tx,OS,LS=(Tx=(0,sa.b2)(),Tx(OS=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"mapService",void 0)}return(0,vn.Z)(s,[{key:"apply",value:function(c){var h=this;this.mapService=c.getContainer().get(Vn.IMapService),c.hooks.init.tap("DataSourcePlugin",function(){var g=c.getSource();if(!g){var _=c.sourceOption||{data:Av,options:p0},G=_.data,Q=_.options;c.setSource(new rm(G,Q))}h.updateClusterData(c)}),c.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var g=h.updateClusterData(c),_=c.dataState.dataSourceNeedUpdate;return c.dataState.dataSourceNeedUpdate=!1,g||_})}},{key:"updateClusterData",value:function(c){var h=c.getSource(),g=h.cluster,_=h.clusterOptions,G=_.zoom,Q=G===void 0?0:G,tt=_.maxZoom,ft=tt===void 0?16:tt,Et=this.mapService.getZoom()-1,Bt=c.dataState.dataSourceNeedUpdate;return g&&(Bt||Math.abs(c.clusterZoom-Et)>=1)?(Q!==Math.floor(Et)&&h.updateClusterData(Math.floor(Et)),c.clusterZoom=Et,!0):!1}}]),s}())||OS);function Dm(s,p){return s<p?-1:s>p?1:s>=p?0:NaN}function kS(s){return s.length===1&&(s=RS(s)),{left:function(p,c,h,g){for(h==null&&(h=0),g==null&&(g=p.length);h<g;){var _=h+g>>>1;s(p[_],c)<0?h=_+1:g=_}return h},right:function(p,c,h,g){for(h==null&&(h=0),g==null&&(g=p.length);h<g;){var _=h+g>>>1;s(p[_],c)>0?g=_:h=_+1}return h}}}function RS(s){return function(p,c){return Dm(s(p),c)}}var DS=kS(Dm),nI=DS.right,BS=DS.left,e1=nI;function iI(s,p){var c=s.length,h=-1,g,_,G;if(p==null){for(;++h<c;)if((g=s[h])!=null&&g>=g)for(_=G=g;++h<c;)(g=s[h])!=null&&(_>g&&(_=g),G<g&&(G=g))}else for(;++h<c;)if((g=p(s[h],h,s))!=null&&g>=g)for(_=G=g;++h<c;)(g=p(s[h],h,s))!=null&&(_>g&&(_=g),G<g&&(G=g));return[_,G]}var FS=Array.prototype,Ck=FS.slice,aI=FS.map,Px=Math.sqrt(50),Ix=Math.sqrt(10),Ox=Math.sqrt(2);function NS(s,p,c){var h,g=-1,_,G,Q;if(p=+p,s=+s,c=+c,s===p&&c>0)return[s];if((h=p<s)&&(_=s,s=p,p=_),(Q=r1(s,p,c))===0||!isFinite(Q))return[];if(Q>0)for(s=Math.ceil(s/Q),p=Math.floor(p/Q),G=new Array(_=Math.ceil(p-s+1));++g<_;)G[g]=(s+g)*Q;else for(s=Math.floor(s*Q),p=Math.ceil(p*Q),G=new Array(_=Math.ceil(s-p+1));++g<_;)G[g]=(s-g)/Q;return h&&G.reverse(),G}function r1(s,p,c){var h=(p-s)/Math.max(0,c),g=Math.floor(Math.log(h)/Math.LN10),_=h/Math.pow(10,g);return g>=0?(_>=Px?10:_>=Ix?5:_>=Ox?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(_>=Px?10:_>=Ix?5:_>=Ox?2:1)}function Lx(s,p,c){var h=Math.abs(p-s)/Math.max(0,c),g=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),_=h/g;return _>=Px?g*=10:_>=Ix?g*=5:_>=Ox&&(g*=2),p<s?-g:g}function PB(){var s=identity,p=extent,c=sturges;function h(g){var _,G=g.length,Q,tt=new Array(G);for(_=0;_<G;++_)tt[_]=s(g[_],_,g);var ft=p(tt),Et=ft[0],Bt=ft[1],se=c(tt,Et,Bt);Array.isArray(se)||(se=tickStep(Et,Bt,se),se=range(Math.ceil(Et/se)*se,Bt,se));for(var xe=se.length;se[0]<=Et;)se.shift(),--xe;for(;se[xe-1]>Bt;)se.pop(),--xe;var De=new Array(xe+1),Xe;for(_=0;_<=xe;++_)Xe=De[_]=[],Xe.x0=_>0?se[_-1]:Et,Xe.x1=_<xe?se[_]:Bt;for(_=0;_<G;++_)Q=tt[_],Et<=Q&&Q<=Bt&&De[bisect(se,Q,0,xe)].push(g[_]);return De}return h.value=function(g){return arguments.length?(s=typeof g=="function"?g:constant(g),h):s},h.domain=function(g){return arguments.length?(p=typeof g=="function"?g:constant([g[0],g[1]]),h):p},h.thresholds=function(g){return arguments.length?(c=typeof g=="function"?g:Array.isArray(g)?constant(slice.call(g)):constant(g),h):c},h}function Ak(s,p,c){return s=map.call(s,number).sort(ascending),Math.ceil((c-p)/(2*(quantile(s,.75)-quantile(s,.25))*Math.pow(s.length,-1/3)))}function Mk(s){return s===null?NaN:+s}function zS(s,p,c){if(c==null&&(c=Mk),!!(h=s.length)){if((p=+p)<=0||h<2)return+c(s[0],0,s);if(p>=1)return+c(s[h-1],h-1,s);var h,g=(h-1)*p,_=Math.floor(g),G=+c(s[_],_,s),Q=+c(s[_+1],_+1,s);return G+(Q-G)*(g-_)}}var gh="$";function n1(){}n1.prototype=kx.prototype={constructor:n1,has:function(s){return gh+s in this},get:function(s){return this[gh+s]},set:function(s,p){return this[gh+s]=p,this},remove:function(s){var p=gh+s;return p in this&&delete this[p]},clear:function(){for(var s in this)s[0]===gh&&delete this[s]},keys:function(){var s=[];for(var p in this)p[0]===gh&&s.push(p.slice(1));return s},values:function(){var s=[];for(var p in this)p[0]===gh&&s.push(this[p]);return s},entries:function(){var s=[];for(var p in this)p[0]===gh&&s.push({key:p.slice(1),value:this[p]});return s},size:function(){var s=0;for(var p in this)p[0]===gh&&++s;return s},empty:function(){for(var s in this)if(s[0]===gh)return!1;return!0},each:function(s){for(var p in this)p[0]===gh&&s(this[p],p.slice(1),this)}};function kx(s,p){var c=new n1;if(s instanceof n1)s.each(function(Q,tt){c.set(tt,Q)});else if(Array.isArray(s)){var h=-1,g=s.length,_;if(p==null)for(;++h<g;)c.set(h,s[h]);else for(;++h<g;)c.set(p(_=s[h],h,s),_)}else if(s)for(var G in s)c.set(G,s[G]);return c}var i1=kx;function oI(){var s=[],p=[],c,h,g;function _(Q,tt,ft,Et){if(tt>=s.length)return c!=null&&Q.sort(c),h!=null?h(Q):Q;for(var Bt=-1,se=Q.length,xe=s[tt++],De,Xe,Qe=map(),br,Wr=ft();++Bt<se;)(br=Qe.get(De=xe(Xe=Q[Bt])+""))?br.push(Xe):Qe.set(De,[Xe]);return Qe.each(function(sn,xn){Et(Wr,xn,_(sn,tt,ft,Et))}),Wr}function G(Q,tt){if(++tt>s.length)return Q;var ft,Et=p[tt-1];return h!=null&&tt>=s.length?ft=Q.entries():(ft=[],Q.each(function(Bt,se){ft.push({key:se,values:G(Bt,tt)})})),Et!=null?ft.sort(function(Bt,se){return Et(Bt.key,se.key)}):ft}return g={object:function(Q){return _(Q,0,sI,GS)},map:function(Q){return _(Q,0,US,VS)},entries:function(Q){return G(_(Q,0,US,VS),0)},key:function(Q){return s.push(Q),g},sortKeys:function(Q){return p[s.length-1]=Q,g},sortValues:function(Q){return c=Q,g},rollup:function(Q){return h=Q,g}}}function sI(){return{}}function GS(s,p,c){s[p]=c}function US(){return map()}function VS(s,p,c){s.set(p,c)}function a1(){}var r0=i1.prototype;a1.prototype=uI.prototype={constructor:a1,has:r0.has,add:function(s){return s+="",this[gh+s]=s,this},remove:r0.remove,clear:r0.clear,values:r0.keys,size:r0.size,empty:r0.empty,each:r0.each};function uI(s,p){var c=new a1;if(s instanceof a1)s.each(function(_){c.add(_)});else if(s){var h=-1,g=s.length;if(p==null)for(;++h<g;)c.add(s[h]);else for(;++h<g;)c.add(p(s[h],h,s))}return c}var Tk=null,ZS=Array.prototype,Bm=ZS.map,fv=ZS.slice;function hv(s,p){switch(arguments.length){case 0:break;case 1:this.range(s);break;default:this.range(p).domain(s);break}return this}function Pk(s,p){switch(arguments.length){case 0:break;case 1:this.interpolator(s);break;default:this.interpolator(p).domain(s);break}return this}var HS={name:"implicit"};function o1(){var s=i1(),p=[],c=[],h=HS;function g(_){var G=_+"",Q=s.get(G);if(!Q){if(h!==HS)return h;s.set(G,Q=p.push(_))}return c[(Q-1)%c.length]}return g.domain=function(_){if(!arguments.length)return p.slice();p=[],s=i1();for(var G=-1,Q=_.length,tt,ft;++G<Q;)s.has(ft=(tt=_[G])+"")||s.set(ft,p.push(tt));return g},g.range=function(_){return arguments.length?(c=fv.call(_),g):c.slice()},g.unknown=function(_){return arguments.length?(h=_,g):h},g.copy=function(){return o1(p,c).unknown(h)},hv.apply(g,arguments),g}function jS(){var s=ordinal().unknown(void 0),p=s.domain,c=s.range,h=[0,1],g,_,G=!1,Q=0,tt=0,ft=.5;delete s.unknown;function Et(){var Bt=p().length,se=h[1]<h[0],xe=h[se-0],De=h[1-se];g=(De-xe)/Math.max(1,Bt-Q+tt*2),G&&(g=Math.floor(g)),xe+=(De-xe-g*(Bt-Q))*ft,_=g*(1-Q),G&&(xe=Math.round(xe),_=Math.round(_));var Xe=sequence(Bt).map(function(Qe){return xe+g*Qe});return c(se?Xe.reverse():Xe)}return s.domain=function(Bt){return arguments.length?(p(Bt),Et()):p()},s.range=function(Bt){return arguments.length?(h=[+Bt[0],+Bt[1]],Et()):h.slice()},s.rangeRound=function(Bt){return h=[+Bt[0],+Bt[1]],G=!0,Et()},s.bandwidth=function(){return _},s.step=function(){return g},s.round=function(Bt){return arguments.length?(G=!!Bt,Et()):G},s.padding=function(Bt){return arguments.length?(Q=Math.min(1,tt=+Bt),Et()):Q},s.paddingInner=function(Bt){return arguments.length?(Q=Math.min(1,Bt),Et()):Q},s.paddingOuter=function(Bt){return arguments.length?(tt=+Bt,Et()):tt},s.align=function(Bt){return arguments.length?(ft=Math.max(0,Math.min(1,Bt)),Et()):ft},s.copy=function(){return jS(p(),h).round(G).paddingInner(Q).paddingOuter(tt).align(ft)},initRange.apply(Et(),arguments)}function XS(s){var p=s.copy;return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=function(){return XS(p())},s}function YS(){return XS(jS.apply(null,arguments).paddingInner(1))}var lI=S(26257),cI=S(73626);function WS(s,p){return s=+s,p=+p,function(c){return Math.round(s*(1-c)+p*c)}}function j0(s){return function(){return s}}function Rx(s){return+s}var Dx=[0,1];function Yh(s){return s}function Fm(s,p){return(p-=s=+s)?function(c){return(c-s)/p}:j0(isNaN(p)?NaN:.5)}function KS(s){var p=s[0],c=s[s.length-1],h;return p>c&&(h=p,p=c,c=h),function(g){return Math.max(p,Math.min(c,g))}}function $S(s,p,c){var h=s[0],g=s[1],_=p[0],G=p[1];return g<h?(h=Fm(g,h),_=c(G,_)):(h=Fm(h,g),_=c(_,G)),function(Q){return _(h(Q))}}function QS(s,p,c){var h=Math.min(s.length,p.length)-1,g=new Array(h),_=new Array(h),G=-1;for(s[h]<s[0]&&(s=s.slice().reverse(),p=p.slice().reverse());++G<h;)g[G]=Fm(s[G],s[G+1]),_[G]=c(p[G],p[G+1]);return function(Q){var tt=e1(s,Q,1,h)-1;return _[tt](g[tt](Q))}}function s1(s,p){return p.domain(s.domain()).range(s.range()).interpolate(s.interpolate()).clamp(s.clamp()).unknown(s.unknown())}function Bx(){var s=Dx,p=Dx,c=lI.Z,h,g,_,G=Yh,Q,tt,ft;function Et(){return Q=Math.min(s.length,p.length)>2?QS:$S,tt=ft=null,Bt}function Bt(se){return isNaN(se=+se)?_:(tt||(tt=Q(s.map(h),p,c)))(h(G(se)))}return Bt.invert=function(se){return G(g((ft||(ft=Q(p,s.map(h),cI.Z)))(se)))},Bt.domain=function(se){return arguments.length?(s=Bm.call(se,Rx),G===Yh||(G=KS(s)),Et()):s.slice()},Bt.range=function(se){return arguments.length?(p=fv.call(se),Et()):p.slice()},Bt.rangeRound=function(se){return p=fv.call(se),c=WS,Et()},Bt.clamp=function(se){return arguments.length?(G=se?KS(s):Yh,Bt):G!==Yh},Bt.interpolate=function(se){return arguments.length?(c=se,Et()):c},Bt.unknown=function(se){return arguments.length?(_=se,Bt):_},function(se,xe){return h=se,g=xe,Et()}}function qS(s,p){return Bx()(s,p)}var fI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fx(s){if(!(p=fI.exec(s)))throw new Error("invalid format: "+s);var p;return new Nx({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}Fx.prototype=Nx.prototype;function Nx(s){this.fill=s.fill===void 0?" ":s.fill+"",this.align=s.align===void 0?">":s.align+"",this.sign=s.sign===void 0?"-":s.sign+"",this.symbol=s.symbol===void 0?"":s.symbol+"",this.zero=!!s.zero,this.width=s.width===void 0?void 0:+s.width,this.comma=!!s.comma,this.precision=s.precision===void 0?void 0:+s.precision,this.trim=!!s.trim,this.type=s.type===void 0?"":s.type+""}Nx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ik(s){return Math.abs(s=Math.round(s))>=1e21?s.toLocaleString("en").replace(/,/g,""):s.toString(10)}function Nm(s,p){if((c=(s=p?s.toExponential(p-1):s.toExponential()).indexOf("e"))<0)return null;var c,h=s.slice(0,c);return[h.length>1?h[0]+h.slice(2):h,+s.slice(c+1)]}function pv(s){return s=Nm(Math.abs(s)),s?s[1]:NaN}function hI(s,p){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pv(p)/3)))*3-pv(Math.abs(s)))}function JS(s,p){return function(c,h){for(var g=c.length,_=[],G=0,Q=s[0],tt=0;g>0&&Q>0&&(tt+Q+1>h&&(Q=Math.max(1,h-tt)),_.push(c.substring(g-=Q,g+Q)),!((tt+=Q+1)>h));)Q=s[G=(G+1)%s.length];return _.reverse().join(p)}}function zx(s){return function(p){return p.replace(/[0-9]/g,function(c){return s[+c]})}}function pI(s){t:for(var p=s.length,c=1,h=-1,g;c<p;++c)switch(s[c]){case".":h=g=c;break;case"0":h===0&&(h=c),g=c;break;default:if(!+s[c])break t;h>0&&(h=0);break}return h>0?s.slice(0,h)+s.slice(g+1):s}var tw;function dI(s,p){var c=Nm(s,p);if(!c)return s+"";var h=c[0],g=c[1],_=g-(tw=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,G=h.length;return _===G?h:_>G?h+new Array(_-G+1).join("0"):_>0?h.slice(0,_)+"."+h.slice(_):"0."+new Array(1-_).join("0")+Nm(s,Math.max(0,p+_-1))[0]}function Gx(s,p){var c=Nm(s,p);if(!c)return s+"";var h=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+h:h.length>g+1?h.slice(0,g+1)+"."+h.slice(g+1):h+new Array(g-h.length+2).join("0")}var Ux={"%":function(s,p){return(s*100).toFixed(p)},b:function(s){return Math.round(s).toString(2)},c:function(s){return s+""},d:Ik,e:function(s,p){return s.toExponential(p)},f:function(s,p){return s.toFixed(p)},g:function(s,p){return s.toPrecision(p)},o:function(s){return Math.round(s).toString(8)},p:function(s,p){return Gx(s*100,p)},r:Gx,s:dI,X:function(s){return Math.round(s).toString(16).toUpperCase()},x:function(s){return Math.round(s).toString(16)}};function ew(s){return s}var Vx=Array.prototype.map,rw=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function nw(s){var p=s.grouping===void 0||s.thousands===void 0?ew:JS(Vx.call(s.grouping,Number),s.thousands+""),c=s.currency===void 0?"":s.currency[0]+"",h=s.currency===void 0?"":s.currency[1]+"",g=s.decimal===void 0?".":s.decimal+"",_=s.numerals===void 0?ew:zx(Vx.call(s.numerals,String)),G=s.percent===void 0?"%":s.percent+"",Q=s.minus===void 0?"-":s.minus+"",tt=s.nan===void 0?"NaN":s.nan+"";function ft(Bt){Bt=Fx(Bt);var se=Bt.fill,xe=Bt.align,De=Bt.sign,Xe=Bt.symbol,Qe=Bt.zero,br=Bt.width,Wr=Bt.comma,sn=Bt.precision,xn=Bt.trim,Rn=Bt.type;Rn==="n"?(Wr=!0,Rn="g"):Ux[Rn]||(sn===void 0&&(sn=12),xn=!0,Rn="g"),(Qe||se==="0"&&xe==="=")&&(Qe=!0,se="0",xe="=");var Bn=Xe==="$"?c:Xe==="#"&&/[boxX]/.test(Rn)?"0"+Rn.toLowerCase():"",Qn=Xe==="$"?h:/[%p]/.test(Rn)?G:"",di=Ux[Rn],ta=/[defgprs%]/.test(Rn);sn=sn===void 0?6:/[gprs]/.test(Rn)?Math.max(1,Math.min(21,sn)):Math.max(0,Math.min(20,sn));function Ca(Fi){var ja=Bn,ro=Qn,Bo,Uu,ic;if(Rn==="c")ro=di(Fi)+ro,Fi="";else{Fi=+Fi;var xf=Fi<0||1/Fi<0;if(Fi=isNaN(Fi)?tt:di(Math.abs(Fi),sn),xn&&(Fi=pI(Fi)),xf&&+Fi==0&&De!=="+"&&(xf=!1),ja=(xf?De==="("?De:Q:De==="-"||De==="("?"":De)+ja,ro=(Rn==="s"?rw[8+tw/3]:"")+ro+(xf&&De==="("?")":""),ta){for(Bo=-1,Uu=Fi.length;++Bo<Uu;)if(ic=Fi.charCodeAt(Bo),48>ic||ic>57){ro=(ic===46?g+Fi.slice(Bo+1):Fi.slice(Bo))+ro,Fi=Fi.slice(0,Bo);break}}}Wr&&!Qe&&(Fi=p(Fi,Infinity));var Tp=ja.length+Fi.length+ro.length,yh=Tp<br?new Array(br-Tp+1).join(se):"";switch(Wr&&Qe&&(Fi=p(yh+Fi,yh.length?br-ro.length:Infinity),yh=""),xe){case"<":Fi=ja+Fi+ro+yh;break;case"=":Fi=ja+yh+Fi+ro;break;case"^":Fi=yh.slice(0,Tp=yh.length>>1)+ja+Fi+ro+yh.slice(Tp);break;default:Fi=yh+ja+Fi+ro;break}return _(Fi)}return Ca.toString=function(){return Bt+""},Ca}function Et(Bt,se){var xe=ft((Bt=Fx(Bt),Bt.type="f",Bt)),De=Math.max(-8,Math.min(8,Math.floor(pv(se)/3)))*3,Xe=Math.pow(10,-De),Qe=rw[8+De/3];return function(br){return xe(Xe*br)+Qe}}return{format:ft,formatPrefix:Et}}var u1,Zx,Hx;iw({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function iw(s){return u1=nw(s),Zx=u1.format,Hx=u1.formatPrefix,u1}function aw(s,p){return s=Math.abs(s),p=Math.abs(p)-s,Math.max(0,pv(p)-pv(s))+1}function vI(s){return Math.max(0,-pv(Math.abs(s)))}function ow(s,p,c,h){var g=Lx(s,p,c),_;switch(h=Fx(h==null?",f":h),h.type){case"s":{var G=Math.max(Math.abs(s),Math.abs(p));return h.precision==null&&!isNaN(_=hI(g,G))&&(h.precision=_),Hx(h,G)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(_=aw(g,Math.max(Math.abs(s),Math.abs(p))))&&(h.precision=_-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(_=vI(g))&&(h.precision=_-(h.type==="%")*2);break}}return Zx(h)}function l1(s){var p=s.domain;return s.ticks=function(c){var h=p();return NS(h[0],h[h.length-1],c==null?10:c)},s.tickFormat=function(c,h){var g=p();return ow(g[0],g[g.length-1],c==null?10:c,h)},s.nice=function(c){c==null&&(c=10);var h=p(),g=0,_=h.length-1,G=h[g],Q=h[_],tt;return Q<G&&(tt=G,G=Q,Q=tt,tt=g,g=_,_=tt),tt=r1(G,Q,c),tt>0?(G=Math.floor(G/tt)*tt,Q=Math.ceil(Q/tt)*tt,tt=r1(G,Q,c)):tt<0&&(G=Math.ceil(G*tt)/tt,Q=Math.floor(Q*tt)/tt,tt=r1(G,Q,c)),tt>0?(h[g]=Math.floor(G/tt)*tt,h[_]=Math.ceil(Q/tt)*tt,p(h)):tt<0&&(h[g]=Math.ceil(G*tt)/tt,h[_]=Math.floor(Q*tt)/tt,p(h)),s},s}function sw(){var s=qS(Yh,Yh);return s.copy=function(){return s1(s,sw())},hv.apply(s,arguments),l1(s)}function zm(s){var p;function c(h){return isNaN(h=+h)?p:h}return c.invert=c,c.domain=c.range=function(h){return arguments.length?(s=Bm.call(h,Rx),c):s.slice()},c.unknown=function(h){return arguments.length?(p=h,c):p},c.copy=function(){return zm(s).unknown(p)},s=arguments.length?Bm.call(s,Rx):[0,1],l1(c)}function gI(s,p){s=s.slice();var c=0,h=s.length-1,g=s[c],_=s[h],G;return _<g&&(G=c,c=h,h=G,G=g,g=_,_=G),s[c]=p.floor(g),s[h]=p.ceil(_),s}function uw(s){return Math.log(s)}function lw(s){return Math.exp(s)}function Ok(s){return-Math.log(-s)}function mI(s){return-Math.exp(-s)}function yI(s){return isFinite(s)?+("1e"+s):s<0?0:s}function xI(s){return s===10?yI:s===Math.E?Math.exp:function(p){return Math.pow(s,p)}}function Lk(s){return s===Math.E?Math.log:s===10&&Math.log10||s===2&&Math.log2||(s=Math.log(s),function(p){return Math.log(p)/s})}function cw(s){return function(p){return-s(-p)}}function _I(s){var p=s(uw,lw),c=p.domain,h=10,g,_;function G(){return g=Lk(h),_=xI(h),c()[0]<0?(g=cw(g),_=cw(_),s(Ok,mI)):s(uw,lw),p}return p.base=function(Q){return arguments.length?(h=+Q,G()):h},p.domain=function(Q){return arguments.length?(c(Q),G()):c()},p.ticks=function(Q){var tt=c(),ft=tt[0],Et=tt[tt.length-1],Bt;(Bt=Et<ft)&&(se=ft,ft=Et,Et=se);var se=g(ft),xe=g(Et),De,Xe,Qe,br=Q==null?10:+Q,Wr=[];if(!(h%1)&&xe-se<br){if(se=Math.round(se)-1,xe=Math.round(xe)+1,ft>0){for(;se<xe;++se)for(Xe=1,De=_(se);Xe<h;++Xe)if(Qe=De*Xe,!(Qe<ft)){if(Qe>Et)break;Wr.push(Qe)}}else for(;se<xe;++se)for(Xe=h-1,De=_(se);Xe>=1;--Xe)if(Qe=De*Xe,!(Qe<ft)){if(Qe>Et)break;Wr.push(Qe)}}else Wr=NS(se,xe,Math.min(xe-se,br)).map(_);return Bt?Wr.reverse():Wr},p.tickFormat=function(Q,tt){if(tt==null&&(tt=h===10?".0e":","),typeof tt!="function"&&(tt=Zx(tt)),Q===Infinity)return tt;Q==null&&(Q=10);var ft=Math.max(1,h*Q/p.ticks().length);return function(Et){var Bt=Et/_(Math.round(g(Et)));return Bt*h<h-.5&&(Bt*=h),Bt<=ft?tt(Et):""}},p.nice=function(){return c(gI(c(),{floor:function(Q){return _(Math.floor(g(Q)))},ceil:function(Q){return _(Math.ceil(g(Q)))}}))},p}function fw(){var s=_I(Bx()).domain([1,10]);return s.copy=function(){return s1(s,fw()).base(s.base())},hv.apply(s,arguments),s}function c1(s){return function(p){return Math.sign(p)*Math.log1p(Math.abs(p/s))}}function bI(s){return function(p){return Math.sign(p)*Math.expm1(Math.abs(p))*s}}function SI(s){var p=1,c=s(c1(p),bI(p));return c.constant=function(h){return arguments.length?s(c1(p=+h),bI(p)):p},linearish(c)}function wI(){var s=SI(transformer());return s.copy=function(){return copy(s,wI()).constant(s.constant())},initRange.apply(s,arguments)}function EI(s){return function(p){return p<0?-Math.pow(-p,s):Math.pow(p,s)}}function CI(s){return s<0?-Math.sqrt(-s):Math.sqrt(s)}function AI(s){return s<0?-s*s:s*s}function kk(s){var p=s(Yh,Yh),c=1;function h(){return c===1?s(Yh,Yh):c===.5?s(CI,AI):s(EI(c),EI(1/c))}return p.exponent=function(g){return arguments.length?(c=+g,h()):c},l1(p)}function jx(){var s=kk(Bx());return s.copy=function(){return s1(s,jx()).exponent(s.exponent())},hv.apply(s,arguments),s}function Rk(){return jx.apply(null,arguments).exponent(.5)}function Xx(){var s=[],p=[],c=[],h;function g(){var G=0,Q=Math.max(1,p.length);for(c=new Array(Q-1);++G<Q;)c[G-1]=zS(s,G/Q);return _}function _(G){return isNaN(G=+G)?h:p[e1(c,G)]}return _.invertExtent=function(G){var Q=p.indexOf(G);return Q<0?[NaN,NaN]:[Q>0?c[Q-1]:s[0],Q<c.length?c[Q]:s[s.length-1]]},_.domain=function(G){if(!arguments.length)return s.slice();s=[];for(var Q=0,tt=G.length,ft;Q<tt;++Q)ft=G[Q],ft!=null&&!isNaN(ft=+ft)&&s.push(ft);return s.sort(Dm),g()},_.range=function(G){return arguments.length?(p=fv.call(G),g()):p.slice()},_.unknown=function(G){return arguments.length?(h=G,_):h},_.quantiles=function(){return c.slice()},_.copy=function(){return Xx().domain(s).range(p).unknown(h)},hv.apply(_,arguments)}function hw(){var s=0,p=1,c=1,h=[.5],g=[0,1],_;function G(tt){return tt<=tt?g[e1(h,tt,0,c)]:_}function Q(){var tt=-1;for(h=new Array(c);++tt<c;)h[tt]=((tt+1)*p-(tt-c)*s)/(c+1);return G}return G.domain=function(tt){return arguments.length?(s=+tt[0],p=+tt[1],Q()):[s,p]},G.range=function(tt){return arguments.length?(c=(g=fv.call(tt)).length-1,Q()):g.slice()},G.invertExtent=function(tt){var ft=g.indexOf(tt);return ft<0?[NaN,NaN]:ft<1?[s,h[0]]:ft>=c?[h[c-1],p]:[h[ft-1],h[ft]]},G.unknown=function(tt){return arguments.length&&(_=tt),G},G.thresholds=function(){return h.slice()},G.copy=function(){return hw().domain([s,p]).range(g).unknown(_)},hv.apply(l1(G),arguments)}function pw(){var s=[.5],p=[0,1],c,h=1;function g(_){return _<=_?p[e1(s,_,0,h)]:c}return g.domain=function(_){return arguments.length?(s=fv.call(_),h=Math.min(s.length,p.length-1),g):s.slice()},g.range=function(_){return arguments.length?(p=fv.call(_),h=Math.min(s.length,p.length-1),g):p.slice()},g.invertExtent=function(_){var G=p.indexOf(_);return[s[G-1],s[G]]},g.unknown=function(_){return arguments.length?(c=_,g):c},g.copy=function(){return pw().domain(s).range(p).unknown(c)},hv.apply(g,arguments)}var Gm=new Date,Yx=new Date;function Gf(s,p,c,h){function g(_){return s(_=arguments.length===0?new Date:new Date(+_)),_}return g.floor=function(_){return s(_=new Date(+_)),_},g.ceil=function(_){return s(_=new Date(_-1)),p(_,1),s(_),_},g.round=function(_){var G=g(_),Q=g.ceil(_);return _-G<Q-_?G:Q},g.offset=function(_,G){return p(_=new Date(+_),G==null?1:Math.floor(G)),_},g.range=function(_,G,Q){var tt=[],ft;if(_=g.ceil(_),Q=Q==null?1:Math.floor(Q),!(_<G)||!(Q>0))return tt;do tt.push(ft=new Date(+_)),p(_,Q),s(_);while(ft<_&&_<G);return tt},g.filter=function(_){return Gf(function(G){if(G>=G)for(;s(G),!_(G);)G.setTime(G-1)},function(G,Q){if(G>=G)if(Q<0)for(;++Q<=0;)for(;p(G,-1),!_(G););else for(;--Q>=0;)for(;p(G,1),!_(G););})},c&&(g.count=function(_,G){return Gm.setTime(+_),Yx.setTime(+G),s(Gm),s(Yx),Math.floor(c(Gm,Yx))},g.every=function(_){return _=Math.floor(_),!isFinite(_)||!(_>0)?null:_>1?g.filter(h?function(G){return h(G)%_==0}:function(G){return g.count(0,G)%_==0}):g}),g}var Wx=Gf(function(s){s.setMonth(0,1),s.setHours(0,0,0,0)},function(s,p){s.setFullYear(s.getFullYear()+p)},function(s,p){return p.getFullYear()-s.getFullYear()},function(s){return s.getFullYear()});Wx.every=function(s){return!isFinite(s=Math.floor(s))||!(s>0)?null:Gf(function(p){p.setFullYear(Math.floor(p.getFullYear()/s)*s),p.setMonth(0,1),p.setHours(0,0,0,0)},function(p,c){p.setFullYear(p.getFullYear()+c*s)})};var n0=Wx,MI=Wx.range,dw=Gf(function(s){s.setDate(1),s.setHours(0,0,0,0)},function(s,p){s.setMonth(s.getMonth()+p)},function(s,p){return p.getMonth()-s.getMonth()+(p.getFullYear()-s.getFullYear())*12},function(s){return s.getMonth()}),TI=dw,Dk=dw.range,f1=1e3,ng=6e4,vw=36e5,gw=864e5,Kx=6048e5;function ig(s){return Gf(function(p){p.setDate(p.getDate()-(p.getDay()+7-s)%7),p.setHours(0,0,0,0)},function(p,c){p.setDate(p.getDate()+c*7)},function(p,c){return(c-p-(c.getTimezoneOffset()-p.getTimezoneOffset())*ng)/Kx})}var $x=ig(0),Um=ig(1),PI=ig(2),II=ig(3),bd=ig(4),OI=ig(5),LI=ig(6),Bk=$x.range,Qx=Um.range,kI=PI.range,Fk=II.range,Nk=bd.range,zk=OI.range,Gk=LI.range,mw=Gf(function(s){s.setHours(0,0,0,0)},function(s,p){s.setDate(s.getDate()+p)},function(s,p){return(p-s-(p.getTimezoneOffset()-s.getTimezoneOffset())*ng)/gw},function(s){return s.getDate()-1}),qx=mw,Uk=mw.range,Jx=Gf(function(s){s.setTime(s-s.getMilliseconds()-s.getSeconds()*f1-s.getMinutes()*ng)},function(s,p){s.setTime(+s+p*vw)},function(s,p){return(p-s)/vw},function(s){return s.getHours()}),RI=Jx,Vk=Jx.range,t_=Gf(function(s){s.setTime(s-s.getMilliseconds()-s.getSeconds()*f1)},function(s,p){s.setTime(+s+p*ng)},function(s,p){return(p-s)/ng},function(s){return s.getMinutes()}),h1=t_,e_=t_.range,r_=Gf(function(s){s.setTime(s-s.getMilliseconds())},function(s,p){s.setTime(+s+p*f1)},function(s,p){return(p-s)/f1},function(s){return s.getUTCSeconds()}),DI=r_,Zk=r_.range,Vm=Gf(function(){},function(s,p){s.setTime(+s+p)},function(s,p){return p-s});Vm.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?Gf(function(p){p.setTime(Math.floor(p/s)*s)},function(p,c){p.setTime(+p+c*s)},function(p,c){return(c-p)/s}):Vm};var BI=Vm,Hk=Vm.range;function i0(s){return Gf(function(p){p.setUTCDate(p.getUTCDate()-(p.getUTCDay()+7-s)%7),p.setUTCHours(0,0,0,0)},function(p,c){p.setUTCDate(p.getUTCDate()+c*7)},function(p,c){return(c-p)/Kx})}var yw=i0(0),Zm=i0(1),FI=i0(2),NI=i0(3),a0=i0(4),zI=i0(5),GI=i0(6),xw=yw.range,Hm=Zm.range,jk=FI.range,_w=NI.range,Xk=a0.range,Yk=zI.range,Wk=GI.range,bw=Gf(function(s){s.setUTCHours(0,0,0,0)},function(s,p){s.setUTCDate(s.getUTCDate()+p)},function(s,p){return(p-s)/gw},function(s){return s.getUTCDate()-1}),Sw=bw,Kk=bw.range,n_=Gf(function(s){s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},function(s,p){s.setUTCFullYear(s.getUTCFullYear()+p)},function(s,p){return p.getUTCFullYear()-s.getUTCFullYear()},function(s){return s.getUTCFullYear()});n_.every=function(s){return!isFinite(s=Math.floor(s))||!(s>0)?null:Gf(function(p){p.setUTCFullYear(Math.floor(p.getUTCFullYear()/s)*s),p.setUTCMonth(0,1),p.setUTCHours(0,0,0,0)},function(p,c){p.setUTCFullYear(p.getUTCFullYear()+c*s)})};var jm=n_,$k=n_.range;function p1(s){if(0<=s.y&&s.y<100){var p=new Date(-1,s.m,s.d,s.H,s.M,s.S,s.L);return p.setFullYear(s.y),p}return new Date(s.y,s.m,s.d,s.H,s.M,s.S,s.L)}function Xm(s){if(0<=s.y&&s.y<100){var p=new Date(Date.UTC(-1,s.m,s.d,s.H,s.M,s.S,s.L));return p.setUTCFullYear(s.y),p}return new Date(Date.UTC(s.y,s.m,s.d,s.H,s.M,s.S,s.L))}function Ym(s,p,c){return{y:s,m:p,d:c,H:0,M:0,S:0,L:0}}function ww(s){var p=s.dateTime,c=s.date,h=s.time,g=s.periods,_=s.days,G=s.shortDays,Q=s.months,tt=s.shortMonths,ft=Wm(g),Et=X0(g),Bt=Wm(_),se=X0(_),xe=Wm(G),De=X0(G),Xe=Wm(Q),Qe=X0(Q),br=Wm(tt),Wr=X0(tt),sn={a:xf,A:Tp,b:yh,B:o5,c:null,d:Rw,e:Rw,f:eO,g:uO,G:cO,H:qI,I:JI,j:tO,L:Dw,m:rO,M:Bw,p:OC,q:s5,Q:Ww,s:u_,S:nO,u:iO,U:Fw,V:aO,w:oO,W:zw,x:null,X:null,y:sO,Y:lO,Z:fO,"%":s_},xn={a:u5,A:l5,b:LC,B:c5,c:null,d:Gw,e:Gw,f:pO,g:Xw,G:_O,H:hO,I:Uw,j:Vw,L:v1,m:dO,M:vO,p:f5,q:h5,Q:Ww,s:u_,S:gO,u:mO,U:Zw,V:yO,w:jw,W:o_,x:null,X:null,y:xO,Y:Yw,Z:bO,"%":s_},Rn={a:Ca,A:Fi,b:ja,B:ro,c:Bo,d:Ow,e:Ow,f:WI,g:Pw,G:Tw,H:a_,I:a_,j:Lw,L:kw,m:jI,M:XI,p:ta,q:Iw,Q:$I,s:QI,S:YI,u:d1,U:VI,V:ZI,w:Aw,W:Mw,x:Uu,X:ic,y:Pw,Y:Tw,Z:HI,"%":KI};sn.x=Bn(c,sn),sn.X=Bn(h,sn),sn.c=Bn(p,sn),xn.x=Bn(c,xn),xn.X=Bn(h,xn),xn.c=Bn(p,xn);function Bn(Oo,uu){return function(Tu){var Ia=[],Uf=-1,bl=0,Wh=Oo.length,Kh,sg,kC;for(Tu instanceof Date||(Tu=new Date(+Tu));++Uf<Wh;)Oo.charCodeAt(Uf)===37&&(Ia.push(Oo.slice(bl,Uf)),(sg=Ew[Kh=Oo.charAt(++Uf)])!=null?Kh=Oo.charAt(++Uf):sg=Kh==="e"?" ":"0",(kC=uu[Kh])&&(Kh=kC(Tu,sg)),Ia.push(Kh),bl=Uf+1);return Ia.push(Oo.slice(bl,Uf)),Ia.join("")}}function Qn(Oo,uu){return function(Tu){var Ia=Ym(1900,void 0,1),Uf=di(Ia,Oo,Tu+="",0),bl,Wh;if(Uf!=Tu.length)return null;if("Q"in Ia)return new Date(Ia.Q);if("s"in Ia)return new Date(Ia.s*1e3+("L"in Ia?Ia.L:0));if(uu&&!("Z"in Ia)&&(Ia.Z=0),"p"in Ia&&(Ia.H=Ia.H%12+Ia.p*12),Ia.m===void 0&&(Ia.m="q"in Ia?Ia.q:0),"V"in Ia){if(Ia.V<1||Ia.V>53)return null;"w"in Ia||(Ia.w=1),"Z"in Ia?(bl=Xm(Ym(Ia.y,0,1)),Wh=bl.getUTCDay(),bl=Wh>4||Wh===0?Zm.ceil(bl):Zm(bl),bl=Sw.offset(bl,(Ia.V-1)*7),Ia.y=bl.getUTCFullYear(),Ia.m=bl.getUTCMonth(),Ia.d=bl.getUTCDate()+(Ia.w+6)%7):(bl=p1(Ym(Ia.y,0,1)),Wh=bl.getDay(),bl=Wh>4||Wh===0?Um.ceil(bl):Um(bl),bl=qx.offset(bl,(Ia.V-1)*7),Ia.y=bl.getFullYear(),Ia.m=bl.getMonth(),Ia.d=bl.getDate()+(Ia.w+6)%7)}else("W"in Ia||"U"in Ia)&&("w"in Ia||(Ia.w="u"in Ia?Ia.u%7:"W"in Ia?1:0),Wh="Z"in Ia?Xm(Ym(Ia.y,0,1)).getUTCDay():p1(Ym(Ia.y,0,1)).getDay(),Ia.m=0,Ia.d="W"in Ia?(Ia.w+6)%7+Ia.W*7-(Wh+5)%7:Ia.w+Ia.U*7-(Wh+6)%7);return"Z"in Ia?(Ia.H+=Ia.Z/100|0,Ia.M+=Ia.Z%100,Xm(Ia)):p1(Ia)}}function di(Oo,uu,Tu,Ia){for(var Uf=0,bl=uu.length,Wh=Tu.length,Kh,sg;Uf<bl;){if(Ia>=Wh)return-1;if(Kh=uu.charCodeAt(Uf++),Kh===37){if(Kh=uu.charAt(Uf++),sg=Rn[Kh in Ew?uu.charAt(Uf++):Kh],!sg||(Ia=sg(Oo,Tu,Ia))<0)return-1}else if(Kh!=Tu.charCodeAt(Ia++))return-1}return Ia}function ta(Oo,uu,Tu){var Ia=ft.exec(uu.slice(Tu));return Ia?(Oo.p=Et[Ia[0].toLowerCase()],Tu+Ia[0].length):-1}function Ca(Oo,uu,Tu){var Ia=xe.exec(uu.slice(Tu));return Ia?(Oo.w=De[Ia[0].toLowerCase()],Tu+Ia[0].length):-1}function Fi(Oo,uu,Tu){var Ia=Bt.exec(uu.slice(Tu));return Ia?(Oo.w=se[Ia[0].toLowerCase()],Tu+Ia[0].length):-1}function ja(Oo,uu,Tu){var Ia=br.exec(uu.slice(Tu));return Ia?(Oo.m=Wr[Ia[0].toLowerCase()],Tu+Ia[0].length):-1}function ro(Oo,uu,Tu){var Ia=Xe.exec(uu.slice(Tu));return Ia?(Oo.m=Qe[Ia[0].toLowerCase()],Tu+Ia[0].length):-1}function Bo(Oo,uu,Tu){return di(Oo,p,uu,Tu)}function Uu(Oo,uu,Tu){return di(Oo,c,uu,Tu)}function ic(Oo,uu,Tu){return di(Oo,h,uu,Tu)}function xf(Oo){return G[Oo.getDay()]}function Tp(Oo){return _[Oo.getDay()]}function yh(Oo){return tt[Oo.getMonth()]}function o5(Oo){return Q[Oo.getMonth()]}function OC(Oo){return g[+(Oo.getHours()>=12)]}function s5(Oo){return 1+~~(Oo.getMonth()/3)}function u5(Oo){return G[Oo.getUTCDay()]}function l5(Oo){return _[Oo.getUTCDay()]}function LC(Oo){return tt[Oo.getUTCMonth()]}function c5(Oo){return Q[Oo.getUTCMonth()]}function f5(Oo){return g[+(Oo.getUTCHours()>=12)]}function h5(Oo){return 1+~~(Oo.getUTCMonth()/3)}return{format:function(Oo){var uu=Bn(Oo+="",sn);return uu.toString=function(){return Oo},uu},parse:function(Oo){var uu=Qn(Oo+="",!1);return uu.toString=function(){return Oo},uu},utcFormat:function(Oo){var uu=Bn(Oo+="",xn);return uu.toString=function(){return Oo},uu},utcParse:function(Oo){var uu=Qn(Oo+="",!0);return uu.toString=function(){return Oo},uu}}}var Ew={"-":"",_:" ","0":"0"},Yc=/^\s*\d+/,Cw=/^%/,UI=/[\\^$*+?|[\]().{}]/g;function Mu(s,p,c){var h=s<0?"-":"",g=(h?-s:s)+"",_=g.length;return h+(_<c?new Array(c-_+1).join(p)+g:g)}function i_(s){return s.replace(UI,"\\$&")}function Wm(s){return new RegExp("^(?:"+s.map(i_).join("|")+")","i")}function X0(s){for(var p={},c=-1,h=s.length;++c<h;)p[s[c].toLowerCase()]=c;return p}function Aw(s,p,c){var h=Yc.exec(p.slice(c,c+1));return h?(s.w=+h[0],c+h[0].length):-1}function d1(s,p,c){var h=Yc.exec(p.slice(c,c+1));return h?(s.u=+h[0],c+h[0].length):-1}function VI(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.U=+h[0],c+h[0].length):-1}function ZI(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.V=+h[0],c+h[0].length):-1}function Mw(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.W=+h[0],c+h[0].length):-1}function Tw(s,p,c){var h=Yc.exec(p.slice(c,c+4));return h?(s.y=+h[0],c+h[0].length):-1}function Pw(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.y=+h[0]+(+h[0]>68?1900:2e3),c+h[0].length):-1}function HI(s,p,c){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(p.slice(c,c+6));return h?(s.Z=h[1]?0:-(h[2]+(h[3]||"00")),c+h[0].length):-1}function Iw(s,p,c){var h=Yc.exec(p.slice(c,c+1));return h?(s.q=h[0]*3-3,c+h[0].length):-1}function jI(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.m=h[0]-1,c+h[0].length):-1}function Ow(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.d=+h[0],c+h[0].length):-1}function Lw(s,p,c){var h=Yc.exec(p.slice(c,c+3));return h?(s.m=0,s.d=+h[0],c+h[0].length):-1}function a_(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.H=+h[0],c+h[0].length):-1}function XI(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.M=+h[0],c+h[0].length):-1}function YI(s,p,c){var h=Yc.exec(p.slice(c,c+2));return h?(s.S=+h[0],c+h[0].length):-1}function kw(s,p,c){var h=Yc.exec(p.slice(c,c+3));return h?(s.L=+h[0],c+h[0].length):-1}function WI(s,p,c){var h=Yc.exec(p.slice(c,c+6));return h?(s.L=Math.floor(h[0]/1e3),c+h[0].length):-1}function KI(s,p,c){var h=Cw.exec(p.slice(c,c+1));return h?c+h[0].length:-1}function $I(s,p,c){var h=Yc.exec(p.slice(c));return h?(s.Q=+h[0],c+h[0].length):-1}function QI(s,p,c){var h=Yc.exec(p.slice(c));return h?(s.s=+h[0],c+h[0].length):-1}function Rw(s,p){return Mu(s.getDate(),p,2)}function qI(s,p){return Mu(s.getHours(),p,2)}function JI(s,p){return Mu(s.getHours()%12||12,p,2)}function tO(s,p){return Mu(1+qx.count(n0(s),s),p,3)}function Dw(s,p){return Mu(s.getMilliseconds(),p,3)}function eO(s,p){return Dw(s,p)+"000"}function rO(s,p){return Mu(s.getMonth()+1,p,2)}function Bw(s,p){return Mu(s.getMinutes(),p,2)}function nO(s,p){return Mu(s.getSeconds(),p,2)}function iO(s){var p=s.getDay();return p===0?7:p}function Fw(s,p){return Mu($x.count(n0(s)-1,s),p,2)}function Nw(s){var p=s.getDay();return p>=4||p===0?bd(s):bd.ceil(s)}function aO(s,p){return s=Nw(s),Mu(bd.count(n0(s),s)+(n0(s).getDay()===4),p,2)}function oO(s){return s.getDay()}function zw(s,p){return Mu(Um.count(n0(s)-1,s),p,2)}function sO(s,p){return Mu(s.getFullYear()%100,p,2)}function uO(s,p){return s=Nw(s),Mu(s.getFullYear()%100,p,2)}function lO(s,p){return Mu(s.getFullYear()%1e4,p,4)}function cO(s,p){var c=s.getDay();return s=c>=4||c===0?bd(s):bd.ceil(s),Mu(s.getFullYear()%1e4,p,4)}function fO(s){var p=s.getTimezoneOffset();return(p>0?"-":(p*=-1,"+"))+Mu(p/60|0,"0",2)+Mu(p%60,"0",2)}function Gw(s,p){return Mu(s.getUTCDate(),p,2)}function hO(s,p){return Mu(s.getUTCHours(),p,2)}function Uw(s,p){return Mu(s.getUTCHours()%12||12,p,2)}function Vw(s,p){return Mu(1+Sw.count(jm(s),s),p,3)}function v1(s,p){return Mu(s.getUTCMilliseconds(),p,3)}function pO(s,p){return v1(s,p)+"000"}function dO(s,p){return Mu(s.getUTCMonth()+1,p,2)}function vO(s,p){return Mu(s.getUTCMinutes(),p,2)}function gO(s,p){return Mu(s.getUTCSeconds(),p,2)}function mO(s){var p=s.getUTCDay();return p===0?7:p}function Zw(s,p){return Mu(yw.count(jm(s)-1,s),p,2)}function Hw(s){var p=s.getUTCDay();return p>=4||p===0?a0(s):a0.ceil(s)}function yO(s,p){return s=Hw(s),Mu(a0.count(jm(s),s)+(jm(s).getUTCDay()===4),p,2)}function jw(s){return s.getUTCDay()}function o_(s,p){return Mu(Zm.count(jm(s)-1,s),p,2)}function xO(s,p){return Mu(s.getUTCFullYear()%100,p,2)}function Xw(s,p){return s=Hw(s),Mu(s.getUTCFullYear()%100,p,2)}function Yw(s,p){return Mu(s.getUTCFullYear()%1e4,p,4)}function _O(s,p){var c=s.getUTCDay();return s=c>=4||c===0?a0(s):a0.ceil(s),Mu(s.getUTCFullYear()%1e4,p,4)}function bO(){return"+0000"}function s_(){return"%"}function Ww(s){return+s}function u_(s){return Math.floor(+s/1e3)}var Y0,SO,Qk,wO,EO;CO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CO(s){return Y0=ww(s),SO=Y0.format,Qk=Y0.parse,wO=Y0.utcFormat,EO=Y0.utcParse,Y0}var Km=1e3,$m=Km*60,Qm=$m*60,qm=Qm*24,AO=qm*7,Kw=qm*30,l_=qm*365;function $w(s){return new Date(s)}function Qw(s){return s instanceof Date?+s:+new Date(+s)}function qw(s,p,c,h,g,_,G,Q,tt){var ft=qS(Yh,Yh),Et=ft.invert,Bt=ft.domain,se=tt(".%L"),xe=tt(":%S"),De=tt("%I:%M"),Xe=tt("%I %p"),Qe=tt("%a %d"),br=tt("%b %d"),Wr=tt("%B"),sn=tt("%Y"),xn=[[G,1,Km],[G,5,5*Km],[G,15,15*Km],[G,30,30*Km],[_,1,$m],[_,5,5*$m],[_,15,15*$m],[_,30,30*$m],[g,1,Qm],[g,3,3*Qm],[g,6,6*Qm],[g,12,12*Qm],[h,1,qm],[h,2,2*qm],[c,1,AO],[p,1,Kw],[p,3,3*Kw],[s,1,l_]];function Rn(Qn){return(G(Qn)<Qn?se:_(Qn)<Qn?xe:g(Qn)<Qn?De:h(Qn)<Qn?Xe:p(Qn)<Qn?c(Qn)<Qn?Qe:br:s(Qn)<Qn?Wr:sn)(Qn)}function Bn(Qn,di,ta,Ca){if(Qn==null&&(Qn=10),typeof Qn=="number"){var Fi=Math.abs(ta-di)/Qn,ja=kS(function(ro){return ro[2]}).right(xn,Fi);ja===xn.length?(Ca=Lx(di/l_,ta/l_,Qn),Qn=s):ja?(ja=xn[Fi/xn[ja-1][2]<xn[ja][2]/Fi?ja-1:ja],Ca=ja[1],Qn=ja[0]):(Ca=Math.max(Lx(di,ta,Qn),1),Qn=Q)}return Ca==null?Qn:Qn.every(Ca)}return ft.invert=function(Qn){return new Date(Et(Qn))},ft.domain=function(Qn){return arguments.length?Bt(Bm.call(Qn,Qw)):Bt().map($w)},ft.ticks=function(Qn,di){var ta=Bt(),Ca=ta[0],Fi=ta[ta.length-1],ja=Fi<Ca,ro;return ja&&(ro=Ca,Ca=Fi,Fi=ro),ro=Bn(Qn,Ca,Fi,di),ro=ro?ro.range(Ca,Fi+1):[],ja?ro.reverse():ro},ft.tickFormat=function(Qn,di){return di==null?Rn:tt(di)},ft.nice=function(Qn,di){var ta=Bt();return(Qn=Bn(Qn,ta[0],ta[ta.length-1],di))?Bt(gI(ta,Qn)):ft},ft.copy=function(){return s1(ft,qw(s,p,c,h,g,_,G,Q,tt))},ft}function Jw(){return hv.apply(qw(n0,TI,$x,qx,RI,h1,DI,BI,SO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qk(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function g1(){var s=0,p=1,c,h,g,_,G=identity,Q=!1,tt;function ft(Et){return isNaN(Et=+Et)?tt:G(g===0?.5:(Et=(_(Et)-c)*g,Q?Math.max(0,Math.min(1,Et)):Et))}return ft.domain=function(Et){return arguments.length?(c=_(s=+Et[0]),h=_(p=+Et[1]),g=c===h?0:1/(h-c),ft):[s,p]},ft.clamp=function(Et){return arguments.length?(Q=!!Et,ft):Q},ft.interpolator=function(Et){return arguments.length?(G=Et,ft):G},ft.unknown=function(Et){return arguments.length?(tt=Et,ft):tt},function(Et){return _=Et,c=Et(s),h=Et(p),g=c===h?0:1/(h-c),ft}}function Jm(s,p){return p.domain(s.domain()).interpolator(s.interpolator()).clamp(s.clamp()).unknown(s.unknown())}function MO(){var s=linearish(g1()(identity));return s.copy=function(){return Jm(s,MO())},initInterpolator.apply(s,arguments)}function Jk(){var s=loggish(g1()).domain([1,10]);return s.copy=function(){return Jm(s,Jk()).base(s.base())},initInterpolator.apply(s,arguments)}function TO(){var s=symlogish(g1());return s.copy=function(){return Jm(s,TO()).constant(s.constant())},initInterpolator.apply(s,arguments)}function tE(){var s=powish(g1());return s.copy=function(){return Jm(s,tE()).exponent(s.exponent())},initInterpolator.apply(s,arguments)}function t3(){return tE.apply(null,arguments).exponent(.5)}function PO(){var s=[],p=identity;function c(h){if(!isNaN(h=+h))return p((bisect(s,h)-1)/(s.length-1))}return c.domain=function(h){if(!arguments.length)return s.slice();s=[];for(var g=0,_=h.length,G;g<_;++g)G=h[g],G!=null&&!isNaN(G=+G)&&s.push(G);return s.sort(ascending),c},c.interpolator=function(h){return arguments.length?(p=h,c):p},c.copy=function(){return PO(p).domain(s)},initInterpolator.apply(c,arguments)}function m1(){var s=0,p=.5,c=1,h,g,_,G,Q,tt=identity,ft,Et=!1,Bt;function se(xe){return isNaN(xe=+xe)?Bt:(xe=.5+((xe=+ft(xe))-g)*(xe<g?G:Q),tt(Et?Math.max(0,Math.min(1,xe)):xe))}return se.domain=function(xe){return arguments.length?(h=ft(s=+xe[0]),g=ft(p=+xe[1]),_=ft(c=+xe[2]),G=h===g?0:.5/(g-h),Q=g===_?0:.5/(_-g),se):[s,p,c]},se.clamp=function(xe){return arguments.length?(Et=!!xe,se):Et},se.interpolator=function(xe){return arguments.length?(tt=xe,se):tt},se.unknown=function(xe){return arguments.length?(Bt=xe,se):Bt},function(xe){return ft=xe,h=xe(s),g=xe(p),_=xe(c),G=h===g?0:.5/(g-h),Q=g===_?0:.5/(_-g),se}}function mh(){var s=linearish(m1()(identity));return s.copy=function(){return copy(s,mh())},initInterpolator.apply(s,arguments)}function c_(){var s=loggish(m1()).domain([.1,1,10]);return s.copy=function(){return copy(s,c_()).base(s.base())},initInterpolator.apply(s,arguments)}function y1(){var s=symlogish(m1());return s.copy=function(){return copy(s,y1()).constant(s.constant())},initInterpolator.apply(s,arguments)}function f_(){var s=powish(m1());return s.copy=function(){return copy(s,f_()).exponent(s.exponent())},initInterpolator.apply(s,arguments)}function e3(){return f_.apply(null,arguments).exponent(.5)}var $p,h_,eE,rE,dv,nE,IO=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,OO=($p={},(0,Y.Z)($p,_c.LINEAR,sw),(0,Y.Z)($p,_c.POWER,jx),(0,Y.Z)($p,_c.LOG,fw),(0,Y.Z)($p,_c.IDENTITY,zm),(0,Y.Z)($p,_c.TIME,Jw),(0,Y.Z)($p,_c.QUANTILE,Xx),(0,Y.Z)($p,_c.QUANTIZE,hw),(0,Y.Z)($p,_c.THRESHOLD,pw),(0,Y.Z)($p,_c.CAT,o1),$p),LO=(h_=(0,sa.b2)(),eE=(0,sa.f3)(Vn.IGlobalConfigService),h_(rE=(dv=function(){function s(){(0,cn.Z)(this,s),Xi(this,"configService",nE,this),(0,Y.Z)(this,"scaleCache",{}),(0,Y.Z)(this,"scaleOptions",{})}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=this,_=h.styleAttributeService;c.hooks.init.tap("FeatureScalePlugin",function(){g.scaleOptions=c.getScaleOptions();var G=_.getLayerStyleAttributes(),Q=c.getSource().data.dataArray;Q.length!==0&&g.caculateScalesForAttributes(G||[],Q)}),c.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){g.scaleOptions=c.getScaleOptions();var G=_.getLayerStyleAttributes(),Q=c.getSource().data.dataArray;return g.caculateScalesForAttributes(G||[],Q),c.layerModelNeedUpdate=!0,!0}),c.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!c.layerModelNeedUpdate){g.scaleOptions=c.getScaleOptions();var G=_.getLayerStyleAttributes();if(G){var Q=c.getSource().data.dataArray;if(Q.length===0)return;var tt=G.filter(function(ft){return ft.needRescale});tt.length&&g.caculateScalesForAttributes(tt,Q)}}})}},{key:"isNumber",value:function(c){return!isNaN(parseFloat(c))&&isFinite(c)}},{key:"caculateScalesForAttributes",value:function(c,h){var g=this;this.scaleCache={},c.forEach(function(_){if(_.scale){var G=_.scale,Q=_.name;G.names=g.parseFields(_.scale.field||[]);var tt=[];G.names.forEach(function(ft){tt.push(g.getOrCreateScale(ft,_,h))}),tt.some(function(ft){return ft.type===Yv.VARIABLE})?(G.type=Yv.VARIABLE,tt.forEach(function(ft){if(!G.callback){var Et;if(G.values&&G.values!=="text"){var Bt;if(((Bt=ft.option)===null||Bt===void 0?void 0:Bt.type)==="linear"&&G.values.length>2){var se=ft.scale.ticks(G.values.length);Q==="color"&&ft.scale.domain(se)}ft.scale.range(G.values)}else((Et=ft.option)===null||Et===void 0?void 0:Et.type)==="cat"&&ft.scale.range(ft.option.domain)}})):(G.type=Yv.CONSTANT,G.defaultValues=tt.map(function(ft,Et){return ft.scale(G.names[Et])})),G.scalers=tt.map(function(ft){return{field:ft.field,func:ft.scale,option:ft.option}}),_.needRescale=!1}})}},{key:"getOrCreateScale",value:function(c,h,g){var _,G=[c,h.name].join("_"),Q=(_=h.scale)===null||_===void 0?void 0:_.values,tt=this.createScale(c,h.name,Q,g);return tt}},{key:"parseFields",value:function(c){return Array.isArray(c)?c:C()(c)?c.split("*"):[c]}},{key:"createScale",value:function(c,h,g,_){var G,Q,tt=this.scaleOptions[h]&&((G=this.scaleOptions[h])===null||G===void 0?void 0:G.field)===c?this.scaleOptions[h]:this.scaleOptions[c],ft={field:c,scale:void 0,type:Yv.VARIABLE,option:tt};if(!_||!_.length)return tt&&tt.type?ft.scale=this.createDefaultScale(tt):(ft.scale=o1([c]),ft.type=Yv.CONSTANT),ft;var Et=(Q=_.find(function(xe){return!bu()(xe[c])}))===null||Q===void 0?void 0:Q[c];if(this.isNumber(c)||bu()(Et)&&!tt)ft.scale=o1([c]),ft.type=Yv.CONSTANT;else{var Bt=tt&&tt.type||this.getDefaultType(Et);g==="text"&&(Bt=_c.CAT);var se=this.createDefaultScaleConfig(Bt,c,_);Object.assign(se,tt),ft.scale=this.createDefaultScale(se),ft.option=se}return ft}},{key:"getDefaultType",value:function(c){var h=_c.LINEAR;return typeof c=="string"&&(h=IO.test(c)?_c.TIME:_c.CAT),h}},{key:"createDefaultScaleConfig",value:function(c,h,g){var _={type:c},G=(g==null?void 0:g.map(function(Q){return Q[h]}))||[];return c!==_c.CAT&&c!==_c.QUANTILE?_.domain=iI(G):c===_c.CAT?_.domain=bp()(G):c===_c.QUANTILE&&(_.domain=G),_}},{key:"createDefaultScale",value:function(c){var h=c.type,g=c.domain,_=OO[h]();return g&&_.domain(g),_}}]),s}(),nE=ya(dv.prototype,"configService",[eE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv))||rE),iE,aE,oE,sE,x1,uE,lE;function p_(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function cE(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?p_(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):p_(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var kO=(iE=(0,sa.b2)(),aE=(0,sa.f3)(Vn.ICameraService),oE=(0,sa.f3)(Vn.IRendererService),iE(sE=(x1=function(){function s(){(0,cn.Z)(this,s),Xi(this,"cameraService",uE,this),Xi(this,"rendererService",lE,this)}return(0,vn.Z)(s,[{key:"apply",value:function(c){c.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){c.models.forEach(function(h){h.addUniforms(cE({},c.layerModel.getAnimateUniforms()))})})}}]),s}(),uE=ya(x1.prototype,"cameraService",[aE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lE=ya(x1.prototype,"rendererService",[oE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x1))||sE),d_,fE,RO=(d_=(0,sa.b2)(),d_(fE=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c){c.hooks.init.tap("LayerModelPlugin",function(){c.prepareBuildModel(),c.buildModels(),c.styleNeedUpdate=!1}),c.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return c.prepareBuildModel(),c.clearModels(),c.buildModels(),c.layerModelNeedUpdate=!1,!1})}}]),s}())||fE),hE,pE,dE=(hE=(0,sa.b2)(),hE(pE=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c){c.hooks.afterInit.tap("LayerStylePlugin",function(){c.updateLayerConfig({});var h=c.getLayerConfig(),g=h.autoFit,_=h.fitBoundsOptions;g&&setTimeout(function(){c.fitBounds(_)},100)})}}]),s}())||pE),vE,gE,mE=["type"];function yE(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function ty(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?yE(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):yE(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var xE={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},DO={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},BO={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},FO={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},r3=null;function NO(s){var p={u_DirectionalLights:new Array(3).fill(ty({},BO)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(ty({},FO)),u_NumOfSpotLights:0};return(!s||!s.length)&&(s=[DO]),s.forEach(function(c,h){var g=c.type,_=g===void 0?"directional":g,G=(0,_u.Z)(c,mE),Q=xE[_].lights,tt=xE[_].num,ft=p[tt];p[Q][ft]=ty(ty({},p[Q][ft]),G),p[tt]++}),p}var zO=(vE=(0,sa.b2)(),vE(gE=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c){c.hooks.beforeRender.tap("LightingPlugin",function(){var h=c.getLayerConfig(),g=h.enableLighting;g&&c.models.forEach(function(_){return _.addUniforms(ty({},NO()))})})}}]),s}())||gE),_E,bE,_1={NONE:0,ENCODE:1,HIGHLIGHT:2},GO=(_E=(0,sa.b2)(),_E(bE=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=h.rendererService,_=h.styleAttributeService;c.hooks.init.tap("PixelPickingPlugin",function(){var G=c.getLayerConfig(),Q=G.enablePicking;_.registerStyleAttribute({name:"pickingColor",type:xo.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:Zt.FLOAT},size:3,update:function(ft,Et){var Bt=ft.id;return Q?pc(Bt):[0,0,0]}}})}),c.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var G=c.getLayerConfig(),Q=G.enablePicking;Q&&c.isVisible()&&c.models.forEach(function(tt){return tt.addUniforms({u_PickingStage:_1.ENCODE})})}),c.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var G=c.getLayerConfig(),Q=G.enablePicking;Q&&c.isVisible()&&c.models.forEach(function(tt){return tt.addUniforms({u_PickingStage:_1.HIGHLIGHT})})}),c.hooks.beforeHighlight.tap("PixelPickingPlugin",function(G){var Q=c.getLayerConfig(),tt=Q.highlightColor,ft=Q.activeMix,Et=ft===void 0?0:ft,Bt=Q.enableSelect,se=typeof tt=="string"?as(tt):tt||[1,0,0,1],xe=c.getLayerConfig(),De=xe.selectColor,Xe=typeof De=="string"?as(De):De||[1,0,0,1];c.updateLayerConfig({pickedFeatureID:gu(new Uint8Array(G))});var Qe=c.getCurrentSelectedId();c.models.forEach(function(br){return br.addUniforms({u_PickingStage:_1.HIGHLIGHT,u_PickingColor:G,u_HighlightColor:se.map(function(Wr){return Wr*255}),u_activeMix:Et,u_CurrentSelectedId:Qe?pc(c.getCurrentSelectedId()):[0,0,0],u_SelectColor:Xe.map(function(Wr){return Wr*255}),u_EnableSelect:+(Bt||!1)})})}),c.hooks.beforeSelect.tap("PixelPickingPlugin",function(G){var Q=c.getLayerConfig(),tt=Q.selectColor,ft=Q.selectMix,Et=ft===void 0?0:ft,Bt=typeof tt=="string"?as(tt):tt||[1,0,0,1];c.updateLayerConfig({pickedFeatureID:gu(new Uint8Array(G))}),c.models.forEach(function(se){return se.addUniforms({u_PickingStage:_1.HIGHLIGHT,u_PickingColor:G,u_HighlightColor:Bt.map(function(xe){return xe*255}),u_activeMix:Et,u_CurrentSelectedId:G,u_SelectColor:Bt.map(function(xe){return xe*255}),u_EnableSelect:1})})})}}]),s}())||bE),v_,SE,UO=(v_=(0,sa.b2)(),v_(SE=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=this,_=h.styleAttributeService;c.hooks.init.tap("RegisterStyleAttributePlugin",function(){g.registerBuiltinAttributes(_)})}},{key:"registerBuiltinAttributes",value:function(c){c.registerStyleAttribute({name:"position",type:xo.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:Zt.FLOAT},size:3,update:function(g,_,G){return G.length===2?[G[0],G[1],0]:[G[0],G[1],G[2]]}}}),c.registerStyleAttribute({name:"filter",type:xo.Attribute,descriptor:{name:"filter",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(g,_){var G=g.filter;return G?[1]:[0]}}}),c.registerStyleAttribute({name:"color",type:xo.Attribute,descriptor:{name:"a_Color",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:4,update:function(g,_){var G=g.color;return!G||!G.length?[1,1,1,1]:G}}}),c.registerStyleAttribute({name:"vertexId",type:xo.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:Zt.DYNAMIC_DRAW,data:[],type:Zt.FLOAT},size:1,update:function(g,_,G,Q){return[_]}}})}}]),s}())||SE),g_,o0,s0,m_,VO,u0,W0,wE,K0,EE,ZO,HO=(g_=(0,sa.b2)(),o0=(0,sa.f3)(Vn.ICameraService),s0=(0,sa.f3)(Vn.ICoordinateSystemService),m_=(0,sa.f3)(Vn.IRendererService),VO=(0,sa.f3)(Vn.IMapService),g_(u0=(W0=function(){function s(){(0,cn.Z)(this,s),Xi(this,"cameraService",wE,this),Xi(this,"coordinateSystemService",K0,this),Xi(this,"rendererService",EE,this),Xi(this,"mapService",ZO,this)}return(0,vn.Z)(s,[{key:"apply",value:function(c){var h=this,g=this.mapService.version,_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G=[0,0];c.hooks.beforeRender.tap("ShaderUniformPlugin",function(){h.coordinateSystemService.refresh(),g==="GAODE2.x"&&(_=h.mapService.map.customCoords.getMVPMatrix(),G=h.mapService.getCustomCoordCenter());var Q=h.rendererService.getViewportSize(),tt=Q.width,ft=Q.height;c.models.forEach(function(Et){var Bt;Et.addUniforms((Bt={},(0,Y.Z)(Bt,Hg.ProjectionMatrix,h.cameraService.getProjectionMatrix()),(0,Y.Z)(Bt,Hg.ViewMatrix,h.cameraService.getViewMatrix()),(0,Y.Z)(Bt,Hg.ViewProjectionMatrix,h.cameraService.getViewProjectionMatrix()),(0,Y.Z)(Bt,Hg.Zoom,h.cameraService.getZoom()),(0,Y.Z)(Bt,Hg.ZoomScale,h.cameraService.getZoomScale()),(0,Y.Z)(Bt,Hg.FocalDistance,h.cameraService.getFocalDistance()),(0,Y.Z)(Bt,Hg.CameraPosition,h.cameraService.getCameraPosition()),(0,Y.Z)(Bt,fh.CoordinateSystem,h.coordinateSystemService.getCoordinateSystem()),(0,Y.Z)(Bt,fh.ViewportCenter,h.coordinateSystemService.getViewportCenter()),(0,Y.Z)(Bt,fh.ViewportCenterProjection,h.coordinateSystemService.getViewportCenterProjection()),(0,Y.Z)(Bt,fh.PixelsPerDegree,h.coordinateSystemService.getPixelsPerDegree()),(0,Y.Z)(Bt,fh.PixelsPerDegree2,h.coordinateSystemService.getPixelsPerDegree2()),(0,Y.Z)(Bt,fh.PixelsPerMeter,h.coordinateSystemService.getPixelsPerMeter()),(0,Y.Z)(Bt,fh.Mvp,_),(0,Y.Z)(Bt,"u_SceneCenterMKT",G),(0,Y.Z)(Bt,"u_ViewportSize",[tt,ft]),(0,Y.Z)(Bt,"u_ModelMatrix",h.cameraService.getModelMatrix()),(0,Y.Z)(Bt,"u_DevicePixelRatio",Ds.devicePixelRatio),(0,Y.Z)(Bt,"u_PickingBuffer",c.getLayerConfig().pickingBuffer||0),(0,Y.Z)(Bt,"u_shaderPick",Number(c.getShaderPickStat())),Bt))})})}}]),s}(),wE=ya(W0.prototype,"cameraService",[o0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K0=ya(W0.prototype,"coordinateSystemService",[s0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EE=ya(W0.prototype,"rendererService",[m_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZO=ya(W0.prototype,"mapService",[VO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W0))||u0),CE,y_,jO=(CE=(0,sa.b2)(),CE(y_=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c){c.hooks.beforeRender.tap("UpdateModelPlugin",function(){c.layerModel&&c.layerModel.needUpdate()})}}]),s}())||y_),ey,x_,XO=(ey=(0,sa.b2)(),ey(x_=function(){function s(){(0,cn.Z)(this,s)}return(0,vn.Z)(s,[{key:"apply",value:function(c,h){var g=this,_=h.styleAttributeService;c.hooks.init.tap("UpdateStyleAttributePlugin",function(){g.initStyleAttribute(c,{styleAttributeService:_})}),c.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){c.layerModelNeedUpdate||g.updateStyleAtrribute(c,{styleAttributeService:_})})}},{key:"updateStyleAtrribute",value:function(c,h){var g=h.styleAttributeService,_=g.getLayerStyleAttributes()||[],G=g.getLayerStyleAttribute("filter"),Q=g.getLayerStyleAttribute("shape");if(G&&G.needRegenerateVertices){c.layerModelNeedUpdate=!0,_.forEach(function(tt){return tt.needRegenerateVertices=!1});return}_.filter(function(tt){return tt.needRegenerateVertices}).forEach(function(tt){g.updateAttributeByFeatureRange(tt.name,c.getEncodedData(),tt.featureRange.startIndex,tt.featureRange.endIndex),tt.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(c,h){var g=h.styleAttributeService,_=g.getLayerStyleAttributes()||[];_.filter(function(G){return G.needRegenerateVertices}).forEach(function(G){g.updateAttributeByFeatureRange(G.name,c.getEncodedData(),G.featureRange.startIndex,G.featureRange.endIndex),G.needRegenerateVertices=!1})}}]),s}())||x_);vh.bind(Vn.ILayerPlugin).to(LS).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(UO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(LO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(rI).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(dE).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(XO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(jO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(Hb).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(HO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(kO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(zO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(GO).inRequestScope(),vh.bind(Vn.ILayerPlugin).to(RO).inRequestScope();var n3="2.7.3";function AE(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function i3(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?AE(Object(c),!0).forEach(function(h){ME(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):AE(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function ME(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function a3(s,p){return $O(s)||KO(s,p)||WO(s,p)||YO()}function YO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WO(s,p){if(!!s){if(typeof s=="string")return __(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return __(s,p)}}function __(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function KO(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function $O(s){if(Array.isArray(s))return s}var QO=null,TE=null,PE,b1,b_;function IE(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function OE(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?IE(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):IE(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}var LE=(PE=zy(Vn.IGlobalConfigService),b1=function(){function s(p){(0,cn.Z)(this,s),Xi(this,"configService",b_,this),(0,Y.Z)(this,"config",void 0),this.config=p}return(0,vn.Z)(s,[{key:"setContainer",value:function(c,h,g,_){c.bind(Vn.MapConfig).toConstantValue(OE(OE({},this.config),{},{id:h,canvas:g,hasBaseMap:_})),c.bind(Vn.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),s}(),b_=ya(b1.prototype,"configService",[PE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b1),kE=S(6158),ry=S.n(kE);function ny(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function iy(s,p){var c=_a([],p,s);return Tr(c,c,1/c[3]),c}function o3(s,p){var c=s%p;return c<0?p+c:c}function ag(s,p,c){return c*p+(1-c)*s}function $0(s,p){if(!s)throw new Error(p||"viewport-mercator-project: assertion failed.")}var Sd=Math.PI,qO=Sd/4,og=Sd/180,JO=180/Sd,RE=512,DE=4003e4,s3=1.5;function tL(s){return Math.pow(2,s)}function u3(s){return Math.log2(s)}function S_(s,p){var c=(0,ga.Z)(s,2),h=c[0],g=c[1];$0(Number.isFinite(h)&&Number.isFinite(p)),$0(Number.isFinite(g)&&g>=-90&&g<=90,"invalid latitude"),p*=RE;var _=h*og,G=g*og,Q=p*(_+Sd)/(2*Sd),tt=p*(Sd-Math.log(Math.tan(qO+G*.5)))/(2*Sd);return[Q,tt]}function BE(s,p){var c=(0,ga.Z)(s,2),h=c[0],g=c[1];p*=RE;var _=h/p*(2*Sd)-Sd,G=2*(Math.atan(Math.exp(Sd-g/p*(2*Sd)))-qO);return[_*JO,G*JO]}function IB(s){var p=s.latitude;assert(Number.isFinite(p));var c=Math.cos(p*og);return u3(DE*c)-9}function eL(s){var p=s.latitude,c=s.longitude,h=s.zoom,g=s.scale,_=s.highPrecision,G=_===void 0?!1:_;g=g!==void 0?g:tL(h),$0(Number.isFinite(p)&&Number.isFinite(c)&&Number.isFinite(g));var Q={},tt=RE*g,ft=Math.cos(p*og),Et=tt/360,Bt=Et/ft,se=tt/DE/ft;if(Q.pixelsPerMeter=[se,-se,se],Q.metersPerPixel=[1/se,-1/se,1/se],Q.pixelsPerDegree=[Et,-Bt,se],Q.degreesPerPixel=[1/Et,-1/Bt,1/se],G){var xe=og*Math.tan(p*og)/ft,De=Et*xe/2,Xe=tt/DE*xe,Qe=Xe/Bt*se;Q.pixelsPerDegree2=[0,-De,Xe],Q.pixelsPerMeter2=[Qe,0,Qe]}return Q}function OB(s,p){var c=_slicedToArray(s,3),h=c[0],g=c[1],_=c[2],G=_slicedToArray(p,3),Q=G[0],tt=G[1],ft=G[2],Et=1,Bt=eL({longitude:h,latitude:g,scale:Et,highPrecision:!0}),se=Bt.pixelsPerMeter,xe=Bt.pixelsPerMeter2,De=S_(s,Et);De[0]+=Q*(se[0]+xe[0]*tt),De[1]+=tt*(se[1]+xe[1]*tt);var Xe=BE(De,Et),Qe=(_||0)+(ft||0);return Number.isFinite(_)||Number.isFinite(ft)?[Xe[0],Xe[1],Qe]:Xe}function l3(s){var p=s.height,c=s.pitch,h=s.bearing,g=s.altitude,_=s.center,G=_===void 0?null:_,Q=s.flipY,tt=Q===void 0?!1:Q,ft=ny();return Xd(ft,ft,[0,0,-g]),Up(ft,ft,[1,1,1/p]),Yd(ft,ft,-c*og),gl(ft,ft,h*og),tt&&Up(ft,ft,[1,-1,1]),G&&Xd(ft,ft,Yo.negate([],G)),ft}function c3(s){var p=s.width,c=s.height,h=s.altitude,g=h===void 0?s3:h,_=s.pitch,G=_===void 0?0:_,Q=s.nearZMultiplier,tt=Q===void 0?1:Q,ft=s.farZMultiplier,Et=ft===void 0?1:ft,Bt=G*og,se=Math.atan(.5/g),xe=Math.sin(se)*g/Math.sin(Math.PI/2-Bt-se),De=Math.cos(Math.PI/2-Bt)*xe+g;return{fov:2*Math.atan(c/2/g),aspect:p/c,focalDistance:g,near:tt,far:De*Et}}function f3(s){var p=s.width,c=s.height,h=s.pitch,g=s.altitude,_=s.nearZMultiplier,G=s.farZMultiplier,Q=c3({width:p,height:c,altitude:g,pitch:h,nearZMultiplier:_,farZMultiplier:G}),tt=Q.fov,ft=Q.aspect,Et=Q.near,Bt=Q.far,se=xi([],tt,ft,Et,Bt);return se}function rL(s,p){var c=(0,ga.Z)(s,3),h=c[0],g=c[1],_=c[2],G=_===void 0?0:_;return $0(Number.isFinite(h)&&Number.isFinite(g)&&Number.isFinite(G)),iy(p,[h,g,G,1])}function ay(s,p){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=(0,ga.Z)(s,3),g=h[0],_=h[1],G=h[2];if($0(Number.isFinite(g)&&Number.isFinite(_),"invalid pixel coordinate"),Number.isFinite(G)){var Q=iy(p,[g,_,G,1]);return Q}var tt=iy(p,[g,_,0,1]),ft=iy(p,[g,_,1,1]),Et=tt[2],Bt=ft[2],se=Et===Bt?0:((c||0)-Et)/(Bt-Et);return Vo.lerp([],tt,ft,se)}var FE=ny(),NE=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=p.width,h=p.height,g=p.viewMatrix,_=g===void 0?FE:g,G=p.projectionMatrix,Q=G===void 0?FE:G;(0,cn.Z)(this,s),this.width=c||1,this.height=h||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=_,this.projectionMatrix=Q;var tt=ny();kf(tt,tt,this.projectionMatrix),kf(tt,tt,this.viewMatrix),this.viewProjectionMatrix=tt;var ft=ny();Up(ft,ft,[this.width/2,-this.height/2,1]),Xd(ft,ft,[1,-1,0]),kf(ft,ft,this.viewProjectionMatrix);var Et=jd(ny(),ft);if(!Et)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=ft,this.pixelUnprojectionMatrix=Et,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,vn.Z)(s,[{key:"equals",value:function(c){return c instanceof s?c.width===this.width&&c.height===this.height&&Xn(c.projectionMatrix,this.projectionMatrix)&&Xn(c.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=h.topLeft,_=g===void 0?!0:g,G=this.projectPosition(c),Q=rL(G,this.pixelProjectionMatrix),tt=(0,ga.Z)(Q,2),ft=tt[0],Et=tt[1],Bt=_?Et:this.height-Et;return c.length===2?[ft,Bt]:[ft,Bt,Q[2]]}},{key:"unproject",value:function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=h.topLeft,_=g===void 0?!0:g,G=h.targetZ,Q=(0,ga.Z)(c,3),tt=Q[0],ft=Q[1],Et=Q[2],Bt=_?ft:this.height-ft,se=G&&G*this.pixelsPerMeter,xe=ay([tt,Bt,Et],this.pixelUnprojectionMatrix,se),De=this.unprojectPosition(xe),Xe=(0,ga.Z)(De,3),Qe=Xe[0],br=Xe[1],Wr=Xe[2];return Number.isFinite(Et)?[Qe,br,Wr]:Number.isFinite(G)?[Qe,br,G]:[Qe,br]}},{key:"projectPosition",value:function(c){var h=this.projectFlat(c),g=(0,ga.Z)(h,2),_=g[0],G=g[1],Q=(c[2]||0)*this.pixelsPerMeter;return[_,G,Q]}},{key:"unprojectPosition",value:function(c){var h=this.unprojectFlat(c),g=(0,ga.Z)(h,2),_=g[0],G=g[1],Q=(c[2]||0)/this.pixelsPerMeter;return[_,G,Q]}},{key:"projectFlat",value:function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return c}},{key:"unprojectFlat",value:function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return c}}]),s}();function nL(s){var p=s.width,c=s.height,h=s.bounds,g=s.minExtent,_=g===void 0?0:g,G=s.maxZoom,Q=G===void 0?24:G,tt=s.padding,ft=tt===void 0?0:tt,Et=s.offset,Bt=Et===void 0?[0,0]:Et,se=(0,ga.Z)(h,2),xe=(0,ga.Z)(se[0],2),De=xe[0],Xe=xe[1],Qe=(0,ga.Z)(se[1],2),br=Qe[0],Wr=Qe[1];if(Number.isFinite(ft)){var sn=ft;ft={top:sn,bottom:sn,left:sn,right:sn}}else $0(Number.isFinite(ft.top)&&Number.isFinite(ft.bottom)&&Number.isFinite(ft.left)&&Number.isFinite(ft.right));var xn=new zE({width:p,height:c,longitude:0,latitude:0,zoom:0}),Rn=xn.project([De,Wr]),Bn=xn.project([br,Xe]),Qn=[Math.max(Math.abs(Bn[0]-Rn[0]),_),Math.max(Math.abs(Bn[1]-Rn[1]),_)],di=[p-ft.left-ft.right-Math.abs(Bt[0])*2,c-ft.top-ft.bottom-Math.abs(Bt[1])*2];$0(di[0]>0&&di[1]>0);var ta=di[0]/Qn[0],Ca=di[1]/Qn[1],Fi=(ft.right-ft.left)/2/ta,ja=(ft.bottom-ft.top)/2/Ca,ro=[(Bn[0]+Rn[0])/2+Fi,(Bn[1]+Rn[1])/2+ja],Bo=xn.unproject(ro),Uu=xn.zoom+Math.log2(Math.abs(Math.min(ta,Ca)));return{longitude:Bo[0],latitude:Bo[1],zoom:Math.min(Uu,Q)}}var zE=function(s){(0,vi.Z)(p,s);function p(){var c,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=h.width,_=h.height,G=h.latitude,Q=G===void 0?0:G,tt=h.longitude,ft=tt===void 0?0:tt,Et=h.zoom,Bt=Et===void 0?0:Et,se=h.pitch,xe=se===void 0?0:se,De=h.bearing,Xe=De===void 0?0:De,Qe=h.altitude,br=Qe===void 0?1.5:Qe,Wr=h.nearZMultiplier,sn=h.farZMultiplier;(0,cn.Z)(this,p),g=g||1,_=_||1;var xn=tL(Bt);br=Math.max(.75,br);var Rn=S_([ft,Q],xn);Rn[2]=0;var Bn=f3({width:g,height:_,pitch:xe,bearing:Xe,altitude:br,nearZMultiplier:Wr||1/_,farZMultiplier:sn||1.01}),Qn=l3({height:_,center:Rn,pitch:xe,bearing:Xe,altitude:br,flipY:!0});return c=(0,pa.Z)(this,(0,An.Z)(p).call(this,{width:g,height:_,viewMatrix:Qn,projectionMatrix:Bn})),c.latitude=Q,c.longitude=ft,c.zoom=Bt,c.pitch=xe,c.bearing=Xe,c.altitude=br,c.scale=xn,c.center=Rn,c.pixelsPerMeter=eL((0,Tt.Z)((0,Tt.Z)(c))).pixelsPerMeter[2],Object.freeze((0,Tt.Z)((0,Tt.Z)(c))),c}return(0,vn.Z)(p,[{key:"projectFlat",value:function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return S_(h,g)}},{key:"unprojectFlat",value:function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return BE(h,g)}},{key:"getMapCenterByLngLatPosition",value:function(h){var g=h.lngLat,_=h.pos,G=ay(_,this.pixelUnprojectionMatrix),Q=S_(g,this.scale),tt=Vo.add([],Q,Vo.negate([],G)),ft=Vo.add([],this.center,tt);return BE(ft,this.scale)}},{key:"getLocationAtPoint",value:function(h){var g=h.lngLat,_=h.pos;return this.getMapCenterByLngLatPosition({lngLat:g,pos:_})}},{key:"fitBounds",value:function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=this.width,G=this.height,Q=nL(Object.assign({width:_,height:G,bounds:h},g)),tt=Q.longitude,ft=Q.latitude,Et=Q.zoom;return new p({width:_,height:G,longitude:tt,latitude:ft,zoom:Et})}}]),p}(NE),iL=function(){function s(){(0,cn.Z)(this,s),(0,Y.Z)(this,"viewport",void 0)}return(0,vn.Z)(s,[{key:"syncWithMapCamera",value:function(c){var h=c.center,g=c.zoom,_=c.pitch,G=c.bearing,Q=c.viewportHeight,tt=c.viewportWidth;this.viewport=new zE({width:tt,height:Q,longitude:h&&h[0],latitude:h&&h[1],zoom:g,pitch:_,bearing:G})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(c,h){return this.viewport.projectFlat(c,h)}}]),s}(),GE={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},UE=["id","attributionControl","style","token","rotation","mapInstance"],w_,E_,VE,C_,ZE,HE,Q0,A_,jE,XE,M_;function YE(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function aL(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?YE(Object(c),!0).forEach(function(h){(0,Y.Z)(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):YE(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function oL(s,p){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",h=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||h)&&(p||(p=document),!!p)){var g=p.head||p.getElementsByTagName("head")[0];if(!g){g=p.createElement("head");var _=p.body||p.getElementsByTagName("body")[0];_?_.parentNode.insertBefore(g,_):p.documentElement.appendChild(g)}var G=p.createElement("style");return G.type="text/css",G.styleSheet?G.styleSheet.cssText=s:G.appendChild(p.createTextNode(s)),g.appendChild(G),G}}oL(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ry();var WE={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},KE=0,sL=12,$E="pk.eyJ1IjoibHp4dWUiLCJhIjoiY2tvaWZuM2s4MWZuYjJ1dHI5ZGduYTlrdiJ9.DQCfMRbZzx0VSwecQ69McA",QE=(w_=(0,sa.b2)(),E_=(0,sa.f3)(Vn.MapConfig),VE=(0,sa.f3)(Vn.IGlobalConfigService),C_=(0,sa.f3)(Vn.ICoordinateSystemService),ZE=(0,sa.f3)(Vn.IEventEmitter),w_(HE=(Q0=function(){function s(){var p=this;(0,cn.Z)(this,s),(0,Y.Z)(this,"version",e0.MAPBOX),(0,Y.Z)(this,"map",void 0),(0,Y.Z)(this,"dragging",!1),(0,Y.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Xi(this,"config",A_,this),Xi(this,"configService",jE,this),Xi(this,"coordinateSystemService",XE,this),Xi(this,"eventEmitter",M_,this),(0,Y.Z)(this,"viewport",void 0),(0,Y.Z)(this,"markerContainer",void 0),(0,Y.Z)(this,"cameraChangedCallback",void 0),(0,Y.Z)(this,"$mapContainer",void 0),(0,Y.Z)(this,"handleCameraChanged",function(){var c=p.map.getCenter().wrap(),h=c.lat,g=c.lng;p.emit("mapchange"),p.viewport.syncWithMapCamera({bearing:p.map.getBearing(),center:[g,h],viewportHeight:p.map.transform.height,pitch:p.map.getPitch(),viewportWidth:p.map.transform.width,zoom:p.map.getZoom(),cameraHeight:0});var _=p.config.offsetZoom,G=_===void 0?sL:_;p.viewport.getZoom()>G?p.coordinateSystemService.setCoordinateSystem(Eu.LNGLAT_OFFSET):p.coordinateSystemService.setCoordinateSystem(Eu.LNGLAT),p.cameraChangedCallback(p.viewport)})}return(0,vn.Z)(s,[{key:"setBgColor",value:function(c){this.bgColor=c}},{key:"addMarkerContainer",value:function(){var c=this.map.getCanvasContainer();this.markerContainer=lu("div","l7-marker-container",c),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(c,h){sM.indexOf(c)!==-1?this.eventEmitter.on(c,h):this.map.on(WE[c]||c,h)}},{key:"off",value:function(c,h){this.map.off(WE[c]||c,h)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var c=this.map.transform;return[c.width,c.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(c){return this.map.setZoom(c)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(c){this.map.setCenter(c)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(c){this.map.setBearing(c)}},{key:"zoomIn",value:function(c,h){this.map.zoomIn(c,h)}},{key:"zoomOut",value:function(c,h){this.map.zoomOut(c,h)}},{key:"setPitch",value:function(c){return this.map.setPitch(c)}},{key:"panTo",value:function(c){this.map.panTo(c)}},{key:"panBy",value:function(c,h){this.panTo([c,h])}},{key:"fitBounds",value:function(c,h){this.map.fitBounds(c,h)}},{key:"setMaxZoom",value:function(c){this.map.setMaxZoom(c)}},{key:"setMinZoom",value:function(c){this.map.setMinZoom(c)}},{key:"setMapStatus",value:function(c){c.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),c.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),c.dragEnable===!1&&this.map.dragPan.disable(),c.dragEnable===!0&&this.map.dragPan.enable(),c.rotateEnable===!1&&this.map.dragRotate.disable(),c.rotateEnable===!0&&this.map.dragRotate.enable(),c.keyboardEnable===!1&&this.map.keyboard.disable(),c.keyboardEnable===!0&&this.map.keyboard.enable(),c.zoomEnable===!1&&this.map.scrollZoom.disable(),c.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(c,h){this.map.flyTo({zoom:c,center:h})}},{key:"setMapStyle",value:function(c){this.map.setStyle(this.getMapStyle(c))}},{key:"pixelToLngLat",value:function(c){return this.map.unproject(c)}},{key:"lngLatToPixel",value:function(c){return this.map.project(c)}},{key:"containerToLngLat",value:function(c){return this.map.unproject(c)}},{key:"lngLatToContainer",value:function(c){return this.map.project(c)}},{key:"lngLatToCoord",value:function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},g=this.lngLatToMercator(c,0),_=g.x,G=g.y;return[_-h.x,G-h.y]}},{key:"lngLatToMercator",value:function(c,h){var g=window.mapboxgl.MercatorCoordinate.fromLngLat(c,h),_=g.x,G=_===void 0?0:_,Q=g.y,tt=Q===void 0?0:Q,ft=g.z,Et=ft===void 0?0:ft;return{x:G,y:tt,z:Et}}},{key:"getModelMatrix",value:function(c,h,g){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],G=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},Q=window.mapboxgl.MercatorCoordinate.fromLngLat(c,h),tt=Q.meterInMercatorCoordinateUnits(),ft=uh();return Xd(ft,ft,Yo.fromValues(Q.x-G.x,Q.y-G.y,Q.z||0-G.z)),Up(ft,ft,Yo.fromValues(tt*_[0],-tt*_[1],tt*_[2])),Yd(ft,ft,g[0]),Dh(ft,ft,g[1]),gl(ft,ft,g[2]),ft}},{key:"init",value:function(){var p=(0,Mt.Z)(ge().mark(function h(){var g=this,_,G,Q,tt,ft,Et,Bt,se,xe,De,Xe,Qe,br;return ge().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:_=this.config,G=_.id,Q=G===void 0?"map":G,tt=_.attributionControl,ft=tt===void 0?!1:tt,Et=_.style,Bt=Et===void 0?"light":Et,se=_.token,xe=se===void 0?$E:se,De=_.rotation,Xe=De===void 0?0:De,Qe=_.mapInstance,br=(0,_u.Z)(_,UE),this.viewport=new iL,!Qe&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),xe===$E&&Bt!=="blank"&&!window.mapboxgl.accessToken&&!Qe&&console.warn(this.configService.getSceneWarninfo("MapToken")),!Qe&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=xe),Qe?(this.map=Qe,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(Q),this.map=new window.mapboxgl.Map(aL({container:this.$mapContainer,style:this.getMapStyle(Bt),attributionControl:ft,bearing:Xe},br))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.map.on("dragstart",function(){return g.dragging=!0,""}),this.map.on("dragend",function(){return g.dragging=!1,""}),this.handleCameraChanged();case 11:case"end":return sn.stop()}},h,this)}));function c(){return p.apply(this,arguments)}return c}()},{key:"destroy",value:function(){var c,h;(c=this.$mapContainer)===null||c===void 0||(h=c.parentNode)===null||h===void 0||h.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(c){for(var h,g=arguments.length,_=new Array(g>1?g-1:0),G=1;G<g;G++)_[G-1]=arguments[G];(h=this.eventEmitter).emit.apply(h,[c].concat(_))}},{key:"once",value:function(c){for(var h,g=arguments.length,_=new Array(g>1?g-1:0),G=1;G<g;G++)_[G-1]=arguments[G];(h=this.eventEmitter).once.apply(h,[c].concat(_))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(c,h){var g=new(ry()).LngLat(c[0],c[1]),_=new(ry()).LngLat(h[0],h[1]),G=g.distanceTo(_),Q=ry().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),tt=ry().MercatorCoordinate.fromLngLat({lng:h[0],lat:h[1]}),ft=Q.x,Et=Q.y,Bt=tt.x,se=tt.y,xe=Math.sqrt(Math.pow(ft-Bt,2)+Math.pow(Et-se,2))*4194304*2;return xe/G}},{key:"exportMap",value:function(c){var h=this.map.getCanvas(),g=c==="jpg"?h==null?void 0:h.toDataURL("image/jpeg"):h==null?void 0:h.toDataURL("image/png");return g}},{key:"onCameraChanged",value:function(c){this.cameraChangedCallback=c}},{key:"creatAmapContainer",value:function(c){var h=c;typeof c=="string"&&(h=document.getElementById(c));var g=document.createElement("div");return g.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,g.id="l7_mapbox_div"+KE++,h.appendChild(g),g}},{key:"getMapStyle",value:function(c){return typeof c!="string"?c:GE[c]?GE[c]:c}}]),s}(),A_=ya(Q0.prototype,"config",[E_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jE=ya(Q0.prototype,"configService",[VE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XE=ya(Q0.prototype,"coordinateSystemService",[C_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M_=ya(Q0.prototype,"eventEmitter",[ZE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q0))||HE);function uL(s){var p=lL();return function(){var h=(0,An.Z)(s),g;if(p){var _=(0,An.Z)(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return(0,pa.Z)(this,g)}}function lL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function qE(s,p){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",h=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||h)&&(p||(p=document),!!p)){var g=p.head||p.getElementsByTagName("head")[0];if(!g){g=p.createElement("head");var _=p.body||p.getElementsByTagName("body")[0];_?_.parentNode.insertBefore(g,_):p.documentElement.appendChild(g)}var G=p.createElement("style");return G.type="text/css",G.styleSheet?G.styleSheet.cssText=s:G.appendChild(p.createTextNode(s)),g.appendChild(G),G}}qE(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var cL=function(s){(0,vi.Z)(c,s);var p=uL(c);function c(){return(0,cn.Z)(this,c),p.apply(this,arguments)}return(0,vn.Z)(c,[{key:"getServiceConstructor",value:function(){return QE}}]),c}(LE);function JE(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function T_(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?JE(Object(c),!0).forEach(function(h){fL(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):JE(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function fL(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function hL(s,p){return P_(s)||rC(s,p)||pL(s,p)||tC()}function tC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pL(s,p){if(!!s){if(typeof s=="string")return eC(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return eC(s,p)}}function eC(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function rC(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function P_(s){if(Array.isArray(s))return s}var dL=j.memo(function(s){var p=s.style,c=s.className,h=s.map,g=s.option,_=s.onSceneLoaded,G=(0,j.createRef)(),Q=(0,j.useState)(),tt=hL(Q,2),ft=tt[0],Et=tt[1];return(0,j.useEffect)(function(){var Bt=new qc(T_(T_({id:G.current},g),{},{map:new cL(h)}));return Bt.on("loaded",function(){Et(Bt),_&&_(Bt)}),function(){Bt.destroy()}},[]),(0,j.useEffect)(function(){ft&&h.style&&ft.setMapStyle(h.style)},[JSON.stringify(h.style)]),(0,j.useEffect)(function(){ft&&h.zoom&&ft.setZoom(h.zoom)},[h.zoom]),(0,j.useEffect)(function(){ft&&h.center&&ft.setCenter(h.center)},[JSON.stringify(h.center)]),(0,j.useEffect)(function(){ft&&h.pitch!==void 0&&ft.setPitch(h.pitch||0)},[h.pitch]),(0,j.useEffect)(function(){ft&&h.rotation&&ft.setRotation(h.rotation)},[h.rotation]),j.createElement(y.Provider,{value:ft},(0,j.createElement)("div",{ref:G,style:p,className:c},ft&&s.children))}),nC=dL;function I_(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function vL(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?I_(Object(c),!0).forEach(function(h){iC(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):I_(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function iC(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function h3(s,p){return sC(s)||mL(s,p)||aC(s,p)||gL()}function gL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aC(s,p){if(!!s){if(typeof s=="string")return oC(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return oC(s,p)}}function oC(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function mL(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function sC(s){if(Array.isArray(s))return s}var yL=null,uC=null;function lC(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function xL(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?lC(Object(c),!0).forEach(function(h){_L(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):lC(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function _L(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function p3(s,p){return pC(s)||bL(s,p)||fC(s,p)||cC()}function cC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fC(s,p){if(!!s){if(typeof s=="string")return hC(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return hC(s,p)}}function hC(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function bL(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function pC(s){if(Array.isArray(s))return s}var d3=null,v3=null;function SL(s,p){return EL(s)||gC(s,p)||wL(s,p)||dC()}function dC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wL(s,p){if(!!s){if(typeof s=="string")return vC(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return vC(s,p)}}function vC(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function gC(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function EL(s){if(Array.isArray(s))return s}var LB=null,g3=null;function mC(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function m3(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?mC(Object(c),!0).forEach(function(h){oy(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):mC(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function oy(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function y3(s,p){if(s==null)return{};var c=CL(s,p),h,g;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);for(g=0;g<_.length;g++)h=_[g],!(p.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,h)||(c[h]=s[h]))}return c}function CL(s,p){if(s==null)return{};var c={},h=Object.keys(s),g,_;for(_=0;_<h.length;_++)g=h[_],!(p.indexOf(g)>=0)&&(c[g]=s[g]);return c}var yC=null,O_=S(73935);function xC(s,p){return ML(s)||S1(s,p)||Ts(s,p)||AL()}function AL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(s,p){if(!!s){if(typeof s=="string")return _C(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _C(s,p)}}function _C(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function S1(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function ML(s){if(Array.isArray(s))return s}var L_=j.useEffect,bC=j.useState,TL=/\B([A-Z])/g,k_=function(p){return p.replace(TL,"-$1").toLowerCase()};function x3(s){var p=s.className,c=s.style,h=s.children,g=s.position,_=bC(),G=xC(_,2),Q=G[0],tt=G[1],ft=useSceneValue(),Et=bC(function(){return document.createElement("div")}),Bt=xC(Et,1),se=Bt[0];return L_(function(){var xe=new Control({position:g});return xe.onAdd=function(){if(p&&(se.className=p),c){var De=Object.keys(c).map(function(Xe){return"".concat(k_(Xe),":").concat(c[Xe])}).join(";");se.style.cssText=De}return se},xe.onRemove=function(){},tt(xe),ft.addControl(xe),function(){ft.removeControl(xe)}},[]),L_(function(){Q&&Q.setPosition(g||"bottomleft")},[g]),createPortal(h,se)}var SC=(0,j.createContext)({});function _3(){return useContext(SC)}var wd=S(96486),R_=j.useEffect,PL=j.memo(function(p){var c=p.layer,h=p.active;return c.active(h.option),null},wd.isEqual),xs=j.useEffect,b3=j.memo(function(p){var c=p.layer,h=p.animate;return c.animate(h),null},wd.isEqual),S3=j.useEffect,IL=j.memo(function(p){var c=p.layer,h=p.color;return h.field?c.color(h.field,h.values):c.color(h.values),null},wd.isEqual),wC=j.memo(function(p){var c=p.layer,h=p.filter;return h.field&&c.filter(h.field,h.values),null},wd.isEqual),OL=j.memo(function(p){var c=p.layer,h=p.scale;return c.scale(h.values),null},wd.isEqual),w3=j.useEffect,LL=j.memo(function(p){var c=p.layer,h=p.select;return c.select(h.option),null},wd.isEqual),EC=j.memo(function(p){var c=p.layer,h=p.shape;return h.field?c.shape(h.field,h.values):c.shape(h.values),null},wd.isEqual),kL=j.memo(function(p){var c=p.layer,h=p.size;return h.field?c.size(h.field,h.values):c.size(h.values),null},wd.isEqual),RL=["data"];function DL(s,p){if(s==null)return{};var c=CC(s,p),h,g;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);for(g=0;g<_.length;g++)h=_[g],!(p.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,h)||(c[h]=s[h]))}return c}function CC(s,p){if(s==null)return{};var c={},h=Object.keys(s),g,_;for(_=0;_<h.length;_++)g=h[_],!(p.indexOf(g)>=0)&&(c[g]=s[g]);return c}var BL=j.memo(function(p){var c=p.layer,h=p.source,g=h.data,_=DL(h,RL);return c.inited?c.setData(g,_):c.source(g,_),_.autoFit&&c.fitBounds(_&&_.fitBoundsOptions),null},wd.isEqual),E3=j.useEffect,FL=j.memo(function(p){var c=p.layer,h=p.style;return c.style(h),null},wd.isEqual);function AC(s,p){return UL(s)||GL(s,p)||zL(s,p)||NL()}function NL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zL(s,p){if(!!s){if(typeof s=="string")return MC(s,p);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return MC(s,p)}}function MC(s,p){(p==null||p>s.length)&&(p=s.length);for(var c=0,h=new Array(p);c<p;c++)h[c]=s[c];return h}function GL(s,p){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var h=[],g=!0,_=!1,G,Q;try{for(c=c.call(s);!(g=(G=c.next()).done)&&(h.push(G.value),!(p&&h.length===p));g=!0);}catch(tt){_=!0,Q=tt}finally{try{!g&&c.return!=null&&c.return()}finally{if(_)throw Q}}return h}}function UL(s){if(Array.isArray(s))return s}var sy=j.useEffect,VL=j.useState;function TC(s,p){var c=p.source,h=p.color,g=p.shape,_=p.style,G=p.size,Q=p.scale,tt=p.active,ft=p.select,Et=p.filter,Bt=p.animate,se=p.options,xe=p.onLayerLoaded,De=U(),Xe=VL(function(){var Wr;switch(s){case"polygonLayer":Wr=new yS(se);break;case"lineLayer":Wr=new z2(se);break;case"pointLayer":Wr=new VP(se);break;case"heatmapLayer":Wr=new rg(se);break;case"rasterLayer":Wr=new tI(se);break;case"imageLayer":Wr=new I2(se);break;case"citybuildingLayer":Wr=new m2(se);break;default:Wr=new yS(se)}return Wr.on("inited",function(){xe&&xe(Wr,De)}),Wr}),Qe=AC(Xe,1),br=Qe[0];return sy(function(){return De.addLayer(br),function(){De.removeLayer(br)}},[]),sy(function(){br.inited&&se&&br.updateLayerConfig(se)},[se==null?void 0:se.minZoom,se==null?void 0:se.maxZoom,se==null?void 0:se.visible]),sy(function(){br.inited&&(se==null?void 0:se.zIndex)&&br.setIndex(se.zIndex)},[se==null?void 0:se.zIndex]),sy(function(){br.inited&&(se==null?void 0:se.blend)&&br.setBlend(se.blend)},[se==null?void 0:se.blend]),sy(function(){De.render()}),j.createElement(SC.Provider,{value:br},j.createElement(BL,{layer:br,source:c}),Q&&j.createElement(OL,{layer:br,scale:Q}),h&&j.createElement(IL,{layer:br,color:h}),G&&j.createElement(kL,{layer:br,size:G}),g&&j.createElement(EC,{layer:br,shape:g}),_&&j.createElement(FL,{layer:br,style:_}),tt&&j.createElement(PL,{layer:br,active:tt}),ft&&j.createElement(LL,{layer:br,select:ft}),Et&&j.createElement(wC,{layer:br,filter:Et}),Bt&&j.createElement(b3,{layer:br,animate:Bt}),p.children)}var C3=null,ZL=j.memo(function(p){return TC("lineLayer",p)}),A3=null,HL=null,M3=null,T3=null,P3=null,jL=j.useEffect,I3=null,O3=null;function w1(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w1=function(c){return typeof c}:w1=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},w1(s)}function D_(s,p){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);p&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,h)}return c}function E1(s){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?D_(Object(c),!0).forEach(function(h){XL(s,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):D_(Object(c)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(c,h))})}return s}function XL(s,p,c){return p in s?Object.defineProperty(s,p,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[p]=c,s}function YL(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function B_(s,p){for(var c=0;c<p.length;c++){var h=p[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}function WL(s,p,c){return p&&B_(s.prototype,p),c&&B_(s,c),s}function KL(s,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(p&&p.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),p&&F_(s,p)}function F_(s,p){return F_=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h},F_(s,p)}function PC(s){var p=qL();return function(){var h=C1(s),g;if(p){var _=C1(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return $L(this,g)}}function $L(s,p){if(p&&(w1(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QL(s)}function QL(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function qL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function C1(s){return C1=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},C1(s)}var L3=function(s){KL(c,s);var p=PC(c);function c(h){var g;return YL(this,c),g=p.call(this,h),g.el=void 0,g.scene=void 0,g.popup=void 0,g.el=document.createElement("div"),g}return WL(c,[{key:"componentDidMount",value:function(){var g,_=this.props,G=_.lnglat,Q=_.children,tt=_.option,ft=_.lngLat,Et=new kb(E1(E1({},tt),{},{stopPropagation:(g=this.props.option)===null||g===void 0?void 0:g.stopPropagation}));G&&Et.setLnglat(G),ft&&Et.setLnglat(ft),Q&&Et.setDOMContent(this.el),this.popup=Et,this.scene.addPopup(Et)}},{key:"componentDidUpdate",value:function(g){var _,G,Q,tt,ft,Et,Bt=Array.isArray(g.lnglat)?g.lnglat:[g==null||(_=g.lnglat)===null||_===void 0?void 0:_.lng,g==null||(G=g.lnglat)===null||G===void 0?void 0:G.lat],se=Array.isArray(this.props.lnglat)?this.props.lnglat:[(Q=this.props)===null||Q===void 0||(tt=Q.lnglat)===null||tt===void 0?void 0:tt.lng,(ft=this.props)===null||ft===void 0||(Et=ft.lnglat)===null||Et===void 0?void 0:Et.lat],xe=Bt.toString()!==se.toString();if(xe){var De;this.popup.remove(),this.popup=new kb(E1(E1({},this.props.option),{},{stopPropagation:(De=this.props.option)===null||De===void 0?void 0:De.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var g=this;return j.createElement(y.Consumer,{},function(_){return _&&(g.scene=_),(0,O_.createPortal)(g.props.children,g.el)})}}]),c}(j.PureComponent);function A1(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A1=function(c){return typeof c}:A1=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},A1(s)}function JL(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function N_(s,p){for(var c=0;c<p.length;c++){var h=p[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}function t5(s,p,c){return p&&N_(s.prototype,p),c&&N_(s,c),s}function e5(s,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(p&&p.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),p&&z_(s,p)}function z_(s,p){return z_=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h},z_(s,p)}function IC(s){var p=i5();return function(){var h=uy(s),g;if(p){var _=uy(this).constructor;g=Reflect.construct(h,arguments,_)}else g=h.apply(this,arguments);return r5(this,g)}}function r5(s,p){if(p&&(A1(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n5(s)}function n5(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function i5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function uy(s){return uy=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},uy(s)}var k3=function(s){e5(c,s);var p=IC(c);function c(h){var g;return JL(this,c),g=p.call(this,h),g.el=void 0,g.scene=void 0,g.marker=void 0,g.el=document.createElement("div"),g}return t5(c,[{key:"componentDidMount",value:function(){var g=this.props,_=g.lnglat,G=g.children,Q=g.option,tt=g.onMarkerLoaded,ft=new Mb(Q);_&&ft.setLnglat(_),G&&ft.setElement(this.el),this.marker=ft,tt&&tt(ft),this.scene.addMarker(ft)}},{key:"componentDidUpdate",value:function(g){var _,G=(g==null?void 0:g.lnglat.toString())!==((_=this.props)===null||_===void 0?void 0:_.lnglat.toString());G&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var g=this;return j.createElement(y.Consumer,{},function(_){return _&&(g.scene=_),(0,O_.createPortal)(g.props.children,g.el)})}}]),c}(j.PureComponent),R3=j.useEffect,D3=null,a5=null,B3=j.useEffect,F3=null},31506:function(Vt,P,S){"use strict";S.r(P),S.d(P,{leftTranslate:function(){return y},leftRotate:function(){return U},leftScale:function(){return F},transform:function(){return R},direction:function(){return N},angleTo:function(){return A},vertical:function(){return D}});var T=S(35600),j=S(31437);function y(M,O,k){var V=[0,0,0,0,0,0,0,0,0];return T.fromTranslation(V,k),T.multiply(M,V,O)}function U(M,O,k){var V=[0,0,0,0,0,0,0,0,0];return T.fromRotation(V,k),T.multiply(M,V,O)}function F(M,O,k){var V=[0,0,0,0,0,0,0,0,0];return T.fromScaling(V,k),T.multiply(M,V,O)}function B(M,O,k){return T.multiply(M,k,O)}function R(M,O){for(var k=M?[].concat(M):[1,0,0,0,1,0,0,0,1],V=0,X=O.length;V<X;V++){var K=O[V];switch(K[0]){case"t":y(k,k,[K[1],K[2]]);break;case"s":F(k,k,[K[1],K[2]]);break;case"r":U(k,k,K[1]);break;case"m":B(k,k,K[1]);break;default:break}}return k}function N(M,O){return M[0]*O[1]-O[0]*M[1]}function A(M,O,k){var V=j.angle(M,O),X=N(M,O)>=0;return k?X?Math.PI*2-V:V:X?V:Math.PI*2-V}function D(M,O,k){return k?(M[0]=O[1],M[1]=-1*O[0]):(M[0]=-1*O[1],M[1]=O[0]),M}},43567:function(Vt,P,S){"use strict";S.r(P),S.d(P,{mat3:function(){return T},vec2:function(){return j},vec3:function(){return y},ext:function(){return U}});var T=S(35600),j=S(31437),y=S(77160),U=S(31506)},57350:function(Vt,P,S){"use strict";S.r(P),S.d(P,{catmullRom2Bezier:function(){return A},fillPath:function(){return k},fillPathByDiff:function(){return K},formatPath:function(){return _t},getArcParams:function(){return Qr},getLineIntersect:function(){return la},isPointInPolygon:function(){return jn},isPolygonsIntersect:function(){return Ui},parsePath:function(){return F},parsePathArray:function(){return ve},parsePathString:function(){return Gt},path2Absolute:function(){return it},path2Curve:function(){return Ht},path2Segments:function(){return yn},pathIntersection:function(){return Nt},reactPath:function(){return yt}});var T=S(49242),j=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,y=/[^\s\,]+/ig;function U(Ue){var We=Ue||[];if((0,T.isArray)(We))return We;if((0,T.isString)(We))return We=We.match(j),(0,T.each)(We,function(fr,Ar){if(fr=fr.match(y),fr[0].length>1){var qr=fr[0].charAt(0);fr.splice(1,0,fr[0].substr(1)),fr[0]=qr}(0,T.each)(fr,function(nn,an){isNaN(nn)||(fr[an]=+nn)}),We[Ar]=fr}),We}var F=U,B=S(31437);function R(Ue,We,fr,Ar){var qr=[],nn=!!Ar,an,le,fe,Me,Te,Ze,or;if(nn){fe=Ar[0],Me=Ar[1];for(var lr=0,Be=Ue.length;lr<Be;lr+=1){var tr=Ue[lr];fe=B.min([0,0],fe,tr),Me=B.max([0,0],Me,tr)}}for(var lr=0,Mr=Ue.length;lr<Mr;lr+=1){var tr=Ue[lr];if(lr===0&&!fr)or=tr;else if(lr===Mr-1&&!fr)Ze=tr,qr.push(or),qr.push(Ze);else{var Xr=[lr?lr-1:Mr-1,lr-1][fr?0:1];an=Ue[Xr],le=Ue[fr?(lr+1)%Mr:lr+1];var Zr=[0,0];Zr=B.sub(Zr,le,an),Zr=B.scale(Zr,Zr,We);var tn=B.distance(tr,an),_n=B.distance(tr,le),$n=tn+_n;$n!==0&&(tn/=$n,_n/=$n);var si=B.scale([0,0],Zr,-tn),Jr=B.scale([0,0],Zr,_n);Ze=B.add([0,0],tr,si),Te=B.add([0,0],tr,Jr),Te=B.min([0,0],Te,B.max([0,0],le,tr)),Te=B.max([0,0],Te,B.min([0,0],le,tr)),si=B.sub([0,0],Te,tr),si=B.scale([0,0],si,-tn/_n),Ze=B.add([0,0],tr,si),Ze=B.min([0,0],Ze,B.max([0,0],an,tr)),Ze=B.max([0,0],Ze,B.min([0,0],an,tr)),Jr=B.sub([0,0],tr,Ze),Jr=B.scale([0,0],Jr,_n/tn),Te=B.add([0,0],tr,Jr),nn&&(Ze=B.max([0,0],Ze,fe),Ze=B.min([0,0],Ze,Me),Te=B.max([0,0],Te,fe),Te=B.min([0,0],Te,Me)),qr.push(or),qr.push(Ze),or=Te}}return fr&&qr.push(qr.shift()),qr}function N(Ue,We,fr){We===void 0&&(We=!1),fr===void 0&&(fr=[[0,0],[1,1]]);for(var Ar=!!We,qr=[],nn=0,an=Ue.length;nn<an;nn+=2)qr.push([Ue[nn],Ue[nn+1]]);for(var le=R(qr,.4,Ar,fr),fe=qr.length,Me=[],Te,Ze,or,nn=0;nn<fe-1;nn+=1)Te=le[nn*2],Ze=le[nn*2+1],or=qr[nn+1],Me.push(["C",Te[0],Te[1],Ze[0],Ze[1],or[0],or[1]]);return Ar&&(Te=le[fe],Ze=le[fe+1],or=qr[0],Me.push(["C",Te[0],Te[1],Ze[0],Ze[1],or[0],or[1]])),Me}var A=N;function D(Ue,We){var fr=[],Ar=[];function qr(nn,an){if(nn.length===1)fr.push(nn[0]),Ar.push(nn[0]);else{for(var le=[],fe=0;fe<nn.length-1;fe++)fe===0&&fr.push(nn[0]),fe===nn.length-2&&Ar.push(nn[fe+1]),le[fe]=[(1-an)*nn[fe][0]+an*nn[fe+1][0],(1-an)*nn[fe][1]+an*nn[fe+1][1]];qr(le,an)}}return Ue.length&&qr(Ue,We),{left:fr,right:Ar.reverse()}}function M(Ue,We,fr){var Ar=[[Ue[1],Ue[2]]];fr=fr||2;var qr=[];We[0]==="A"?(Ar.push(We[6]),Ar.push(We[7])):We[0]==="C"?(Ar.push([We[1],We[2]]),Ar.push([We[3],We[4]]),Ar.push([We[5],We[6]])):We[0]==="S"||We[0]==="Q"?(Ar.push([We[1],We[2]]),Ar.push([We[3],We[4]])):Ar.push([We[1],We[2]]);for(var nn=Ar,an=1/fr,le=0;le<fr-1;le++){var fe=an/(1-an*le),Me=D(nn,fe);qr.push(Me.left),nn=Me.right}qr.push(nn);var Te=qr.map(function(Ze){var or=[];return Ze.length===4&&(or.push("C"),or=or.concat(Ze[2])),Ze.length>=3&&(Ze.length===3&&or.push("Q"),or=or.concat(Ze[1])),Ze.length===2&&or.push("L"),or=or.concat(Ze[Ze.length-1]),or});return Te}function O(Ue,We,fr){if(fr===1)return[[].concat(Ue)];var Ar=[];if(We[0]==="L"||We[0]==="C"||We[0]==="Q")Ar=Ar.concat(M(Ue,We,fr));else{var qr=[].concat(Ue);qr[0]==="M"&&(qr[0]="L");for(var nn=0;nn<=fr-1;nn++)Ar.push(qr)}return Ar}function k(Ue,We){if(Ue.length===1)return Ue;var fr=Ue.length-1,Ar=We.length-1,qr=fr/Ar,nn=[];if(Ue.length===1&&Ue[0][0]==="M"){for(var an=0;an<Ar-fr;an++)Ue.push(Ue[0]);return Ue}for(var an=0;an<Ar;an++){var le=Math.floor(qr*an);nn[le]=(nn[le]||0)+1}var fe=nn.reduce(function(Me,Te,Ze){return Ze===fr?Me.concat(Ue[fr]):Me.concat(O(Ue[Ze],Ue[Ze+1],Te))},[]);return fe.unshift(Ue[0]),(We[Ar]==="Z"||We[Ar]==="z")&&fe.push("Z"),fe}function V(Ue,We,fr){var Ar=null,qr=fr;return We<qr&&(qr=We,Ar="add"),Ue<qr&&(qr=Ue,Ar="del"),{type:Ar,min:qr}}var X=function(Ue,We){var fr=Ue.length,Ar=We.length,qr,nn,an=0;if(fr===0||Ar===0)return null;for(var le=[],fe=0;fe<=fr;fe++)le[fe]=[],le[fe][0]={min:fe};for(var Me=0;Me<=Ar;Me++)le[0][Me]={min:Me};for(var fe=1;fe<=fr;fe++){qr=Ue[fe-1];for(var Me=1;Me<=Ar;Me++){nn=We[Me-1],(0,T.isEqual)(qr,nn)?an=0:an=1;var Te=le[fe-1][Me].min+1,Ze=le[fe][Me-1].min+1,or=le[fe-1][Me-1].min+an;le[fe][Me]=V(Te,Ze,or)}}return le};function K(Ue,We){var fr=X(Ue,We),Ar=Ue.length,qr=We.length,nn=[],an=1,le=1;if(fr[Ar][qr]!==Ar){for(var fe=1;fe<=Ar;fe++){var Me=fr[fe][fe].min;le=fe;for(var Te=an;Te<=qr;Te++)fr[fe][Te].min<Me&&(Me=fr[fe][Te].min,le=Te);an=le,fr[fe][an].type&&nn.push({index:fe-1,type:fr[fe][an].type})}for(var fe=nn.length-1;fe>=0;fe--)an=nn[fe].index,nn[fe].type==="add"?Ue.splice(an,0,[].concat(Ue[an])):Ue.splice(an,1)}if(Ar=Ue.length,Ar<qr)for(var fe=0;fe<qr-Ar;fe++)Ue[Ar-1][0]==="z"||Ue[Ar-1][0]==="Z"?Ue.splice(Ar-2,0,Ue[Ar-2]):Ue.push(Ue[Ar-1]);return Ue}function q(Ue){var We=[];switch(Ue[0]){case"M":We.push([Ue[1],Ue[2]]);break;case"L":We.push([Ue[1],Ue[2]]);break;case"A":We.push([Ue[6],Ue[7]]);break;case"Q":We.push([Ue[3],Ue[4]]),We.push([Ue[1],Ue[2]]);break;case"T":We.push([Ue[1],Ue[2]]);break;case"C":We.push([Ue[5],Ue[6]]),We.push([Ue[1],Ue[2]]),We.push([Ue[3],Ue[4]]);break;case"S":We.push([Ue[3],Ue[4]]),We.push([Ue[1],Ue[2]]);break;case"H":We.push([Ue[1],Ue[1]]);break;case"V":We.push([Ue[1],Ue[1]]);break;default:}return We}function ct(Ue,We,fr){for(var Ar=[].concat(Ue),qr,nn=1/(fr+1),an=q(We)[0],le=1;le<=fr;le++)nn*=le,qr=Math.floor(Ue.length*nn),qr===0?Ar.unshift([an[0]*nn+Ue[qr][0]*(1-nn),an[1]*nn+Ue[qr][1]*(1-nn)]):Ar.splice(qr,0,[an[0]*nn+Ue[qr][0]*(1-nn),an[1]*nn+Ue[qr][1]*(1-nn)]);return Ar}function _t(Ue,We){if(Ue.length<=1)return Ue;for(var fr,Ar=0;Ar<We.length;Ar++)if(Ue[Ar][0]!==We[Ar][0])switch(fr=q(Ue[Ar]),We[Ar][0]){case"M":Ue[Ar]=["M"].concat(fr[0]);break;case"L":Ue[Ar]=["L"].concat(fr[0]);break;case"A":Ue[Ar]=[].concat(We[Ar]),Ue[Ar][6]=fr[0][0],Ue[Ar][7]=fr[0][1];break;case"Q":if(fr.length<2)if(Ar>0)fr=ct(fr,Ue[Ar-1],1);else{Ue[Ar]=We[Ar];break}Ue[Ar]=["Q"].concat(fr.reduce(function(qr,nn){return qr.concat(nn)},[]));break;case"T":Ue[Ar]=["T"].concat(fr[0]);break;case"C":if(fr.length<3)if(Ar>0)fr=ct(fr,Ue[Ar-1],2);else{Ue[Ar]=We[Ar];break}Ue[Ar]=["C"].concat(fr.reduce(function(qr,nn){return qr.concat(nn)},[]));break;case"S":if(fr.length<2)if(Ar>0)fr=ct(fr,Ue[Ar-1],1);else{Ue[Ar]=We[Ar];break}Ue[Ar]=["S"].concat(fr.reduce(function(qr,nn){return qr.concat(nn)},[]));break;default:Ue[Ar]=We[Ar]}return Ue}function yt(Ue,We,fr,Ar,qr){return qr?[["M",+Ue+ +qr,We],["l",fr-qr*2,0],["a",qr,qr,0,0,1,qr,qr],["l",0,Ar-qr*2],["a",qr,qr,0,0,1,-qr,qr],["l",qr*2-fr,0],["a",qr,qr,0,0,1,-qr,-qr],["l",0,qr*2-Ar],["a",qr,qr,0,0,1,qr,-qr],["z"]]:[["M",Ue,We],["l",fr,0],["l",0,Ar],["l",-fr,0],["z"]]}var lt=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Lt=new RegExp("([a-z])["+lt+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+lt+"]*,?["+lt+"]*)+)","ig"),wt=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+lt+"]*,?["+lt+"]*","ig");function Gt(Ue){if(!Ue)return null;if((0,T.isArray)(Ue))return Ue;var We={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},fr=[];return String(Ue).replace(Lt,function(Ar,qr,nn){var an=[],le=qr.toLowerCase();if(nn.replace(wt,function(fe,Me){Me&&an.push(+Me)}),le==="m"&&an.length>2&&(fr.push([qr].concat(an.splice(0,2))),le="l",qr=qr==="m"?"l":"L"),le==="o"&&an.length===1&&fr.push([qr,an[0]]),le==="r")fr.push([qr].concat(an));else for(;an.length>=We[le]&&(fr.push([qr].concat(an.splice(0,We[le]))),!!We[le]););return""}),fr}var re=/[a-z]/;function Qt(Ue,We){return[We[0]+(We[0]-Ue[0]),We[1]+(We[1]-Ue[1])]}function it(Ue){var We=Gt(Ue);if(!We||!We.length)return[["M",0,0]];for(var fr=!1,Ar=0;Ar<We.length;Ar++){var qr=We[Ar][0];if(re.test(qr)||["V","H","T","S"].indexOf(qr)>=0){fr=!0;break}}if(!fr)return We;var nn=[],an=0,le=0,fe=0,Me=0,Te=0,Ze,or,lr=We[0];(lr[0]==="M"||lr[0]==="m")&&(an=+lr[1],le=+lr[2],fe=an,Me=le,Te++,nn[0]=["M",an,le]);for(var Ar=Te,Be=We.length;Ar<Be;Ar++){var tr=We[Ar],Mr=nn[Ar-1],Xr=[],qr=tr[0],Zr=qr.toUpperCase();if(qr!==Zr)switch(Xr[0]=Zr,Zr){case"A":Xr[1]=tr[1],Xr[2]=tr[2],Xr[3]=tr[3],Xr[4]=tr[4],Xr[5]=tr[5],Xr[6]=+tr[6]+an,Xr[7]=+tr[7]+le;break;case"V":Xr[1]=+tr[1]+le;break;case"H":Xr[1]=+tr[1]+an;break;case"M":fe=+tr[1]+an,Me=+tr[2]+le,Xr[1]=fe,Xr[2]=Me;break;default:for(var tn=1,_n=tr.length;tn<_n;tn++)Xr[tn]=+tr[tn]+(tn%2?an:le)}else Xr=We[Ar];switch(Zr){case"Z":an=+fe,le=+Me;break;case"H":an=Xr[1],Xr=["L",an,le];break;case"V":le=Xr[1],Xr=["L",an,le];break;case"T":an=Xr[1],le=Xr[2];var $n=Qt([Mr[1],Mr[2]],[Mr[3],Mr[4]]);Xr=["Q",$n[0],$n[1],an,le];break;case"S":an=Xr[Xr.length-2],le=Xr[Xr.length-1];var si=Mr.length,Jr=Qt([Mr[si-4],Mr[si-3]],[Mr[si-2],Mr[si-1]]);Xr=["C",Jr[0],Jr[1],Xr[1],Xr[2],an,le];break;case"M":fe=Xr[Xr.length-2],Me=Xr[Xr.length-1];break;default:an=Xr[Xr.length-2],le=Xr[Xr.length-1]}nn.push(Xr)}return nn}var dt=Math.PI*2,gt=function(Ue,We,fr,Ar,qr,nn,an){var le=Ue.x,fe=Ue.y;le*=We,fe*=fr;var Me=Ar*le-qr*fe,Te=qr*le+Ar*fe;return{x:Me+nn,y:Te+an}},vt=function(Ue,We){var fr=We===1.5707963267948966?.551915024494:We===-1.5707963267948966?-.551915024494:4/3*Math.tan(We/4),Ar=Math.cos(Ue),qr=Math.sin(Ue),nn=Math.cos(Ue+We),an=Math.sin(Ue+We);return[{x:Ar-qr*fr,y:qr+Ar*fr},{x:nn+an*fr,y:an-nn*fr},{x:nn,y:an}]},Y=function(Ue,We,fr,Ar){var qr=Ue*Ar-We*fr<0?-1:1,nn=Ue*fr+We*Ar;return nn>1&&(nn=1),nn<-1&&(nn=-1),qr*Math.acos(nn)},ot=function(Ue,We,fr,Ar,qr,nn,an,le,fe,Me,Te,Ze){var or=Math.pow(qr,2),lr=Math.pow(nn,2),Be=Math.pow(Te,2),tr=Math.pow(Ze,2),Mr=or*lr-or*tr-lr*Be;Mr<0&&(Mr=0),Mr/=or*tr+lr*Be,Mr=Math.sqrt(Mr)*(an===le?-1:1);var Xr=Mr*qr/nn*Ze,Zr=Mr*-nn/qr*Te,tn=Me*Xr-fe*Zr+(Ue+fr)/2,_n=fe*Xr+Me*Zr+(We+Ar)/2,$n=(Te-Xr)/qr,si=(Ze-Zr)/nn,Jr=(-Te-Xr)/qr,Si=(-Ze-Zr)/nn,Jn=Y(1,0,$n,si),yi=Y($n,si,Jr,Si);return le===0&&yi>0&&(yi-=dt),le===1&&yi<0&&(yi+=dt),[tn,_n,Jn,yi]},nt=function(Ue){var We=Ue.px,fr=Ue.py,Ar=Ue.cx,qr=Ue.cy,nn=Ue.rx,an=Ue.ry,le=Ue.xAxisRotation,fe=le===void 0?0:le,Me=Ue.largeArcFlag,Te=Me===void 0?0:Me,Ze=Ue.sweepFlag,or=Ze===void 0?0:Ze,lr=[];if(nn===0||an===0)return[{x1:0,y1:0,x2:0,y2:0,x:Ar,y:qr}];var Be=Math.sin(fe*dt/360),tr=Math.cos(fe*dt/360),Mr=tr*(We-Ar)/2+Be*(fr-qr)/2,Xr=-Be*(We-Ar)/2+tr*(fr-qr)/2;if(Mr===0&&Xr===0)return[{x1:0,y1:0,x2:0,y2:0,x:Ar,y:qr}];nn=Math.abs(nn),an=Math.abs(an);var Zr=Math.pow(Mr,2)/Math.pow(nn,2)+Math.pow(Xr,2)/Math.pow(an,2);Zr>1&&(nn*=Math.sqrt(Zr),an*=Math.sqrt(Zr));var tn=ot(We,fr,Ar,qr,nn,an,Te,or,Be,tr,Mr,Xr),_n=tn[0],$n=tn[1],si=tn[2],Jr=tn[3],Si=Math.abs(Jr)/(dt/4);Math.abs(1-Si)<1e-7&&(Si=1);var Jn=Math.max(Math.ceil(Si),1);Jr/=Jn;for(var yi=0;yi<Jn;yi++)lr.push(vt(si,Jr)),si+=Jr;return lr.map(function(Ka){var ki=gt(Ka[0],nn,an,tr,Be,_n,$n),ga=ki.x,ko=ki.y,Ci=gt(Ka[1],nn,an,tr,Be,_n,$n),po=Ci.x,oo=Ci.y,cn=gt(Ka[2],nn,an,tr,Be,_n,$n),vn=cn.x,Wo=cn.y;return{x1:ga,y1:ko,x2:po,y2:oo,x:vn,y:Wo}})};function rt(Ue,We,fr,Ar,qr,nn,an,le,fe){var Me=nt({px:Ue,py:We,cx:le,cy:fe,rx:fr,ry:Ar,xAxisRotation:qr,largeArcFlag:nn,sweepFlag:an});return Me.reduce(function(Te,Ze){var or=Ze.x1,lr=Ze.y1,Be=Ze.x2,tr=Ze.y2,Mr=Ze.x,Xr=Ze.y;return Te.push(or,lr,Be,tr,Mr,Xr),Te},[])}function st(Ue,We,fr,Ar,qr,nn){var an=1/3,le=2/3;return[an*Ue+le*fr,an*We+le*Ar,an*qr+le*fr,an*nn+le*Ar,qr,nn]}function d(Ue,We,fr,Ar){return[Ue,We,fr,Ar,fr,Ar]}function It(Ue,We){"TQ".indexOf(Ue[0])<0&&(We.qx=null,We.qy=null);var fr=Ue.slice(1),Ar=fr[0],qr=fr[1];switch(Ue[0]){case"M":return We.x=Ar,We.y=qr,Ue;case"A":return["C"].concat(rt.apply(0,[We.x1,We.y1].concat(Ue.slice(1))));case"Q":return We.qx=Ar,We.qy=qr,["C"].concat(st.apply(0,[We.x1,We.y1].concat(Ue.slice(1))));case"L":return["C"].concat(d(We.x1,We.y1,Ue[1],Ue[2]));case"H":return["C"].concat(d(We.x1,We.y1,Ue[1],We.y1));case"V":return["C"].concat(d(We.x1,We.y1,We.x1,Ue[1]));case"Z":return["C"].concat(d(We.x1,We.y1,We.x,We.y));default:}return Ue}function Ht(Ue,We){We===void 0&&(We=!1);for(var fr=it(Ue),Ar={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},qr=[],nn="",an=fr.length,le,fe,Me=[],Te=0;Te<an;Te+=1)fr[Te]&&(nn=fr[Te][0]),qr[Te]=nn,fr[Te]=It(fr[Te],Ar),kt(fr,qr,Te),an=fr.length,nn==="Z"&&Me.push(Te),le=fr[Te],fe=le.length,Ar.x1=+le[fe-2],Ar.y1=+le[fe-1],Ar.x2=+le[fe-4]||Ar.x1,Ar.y2=+le[fe-3]||Ar.y1;return We?[fr,Me]:fr}function kt(Ue,We,fr){if(Ue[fr].length>7){Ue[fr].shift();for(var Ar=Ue[fr],qr=fr;Ar.length;)We[fr]="A",Ue.splice(qr+=1,0,["C"].concat(Ar.splice(0,6)));Ue.splice(fr,1)}}var Xt=function(Ue,We,fr,Ar,qr){var nn=-3*We+9*fr-9*Ar+3*qr,an=Ue*nn+6*We-12*fr+6*Ar;return Ue*an-3*We+3*fr},Kt=function(Ue,We,fr,Ar,qr,nn,an,le,fe){fe===null&&(fe=1),fe=fe>1?1:fe<0?0:fe;for(var Me=fe/2,Te=12,Ze=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],or=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],lr=0,Be=0;Be<Te;Be++){var tr=Me*Ze[Be]+Me,Mr=Xt(tr,Ue,fr,qr,an),Xr=Xt(tr,We,Ar,nn,le),Zr=Mr*Mr+Xr*Xr;lr+=or[Be]*Math.sqrt(Zr)}return Me*lr},Jt=function(Ue,We,fr,Ar,qr,nn,an,le){for(var fe=[],Me=[[],[]],Te,Ze,or,lr,Be=0;Be<2;++Be){if(Be===0?(Ze=6*Ue-12*fr+6*qr,Te=-3*Ue+9*fr-9*qr+3*an,or=3*fr-3*Ue):(Ze=6*We-12*Ar+6*nn,Te=-3*We+9*Ar-9*nn+3*le,or=3*Ar-3*We),Math.abs(Te)<1e-12){if(Math.abs(Ze)<1e-12)continue;lr=-or/Ze,lr>0&&lr<1&&fe.push(lr);continue}var tr=Ze*Ze-4*or*Te,Mr=Math.sqrt(tr);if(!(tr<0)){var Xr=(-Ze+Mr)/(2*Te);Xr>0&&Xr<1&&fe.push(Xr);var Zr=(-Ze-Mr)/(2*Te);Zr>0&&Zr<1&&fe.push(Zr)}}for(var tn=fe.length,_n=tn,$n;tn--;)lr=fe[tn],$n=1-lr,Me[0][tn]=$n*$n*$n*Ue+3*$n*$n*lr*fr+3*$n*lr*lr*qr+lr*lr*lr*an,Me[1][tn]=$n*$n*$n*We+3*$n*$n*lr*Ar+3*$n*lr*lr*nn+lr*lr*lr*le;return Me[0][_n]=Ue,Me[1][_n]=We,Me[0][_n+1]=an,Me[1][_n+1]=le,Me[0].length=Me[1].length=_n+2,{min:{x:Math.min.apply(0,Me[0]),y:Math.min.apply(0,Me[1])},max:{x:Math.max.apply(0,Me[0]),y:Math.max.apply(0,Me[1])}}},ue=function(Ue,We,fr,Ar,qr,nn,an,le){if(!(Math.max(Ue,fr)<Math.min(qr,an)||Math.min(Ue,fr)>Math.max(qr,an)||Math.max(We,Ar)<Math.min(nn,le)||Math.min(We,Ar)>Math.max(nn,le))){var fe=(Ue*Ar-We*fr)*(qr-an)-(Ue-fr)*(qr*le-nn*an),Me=(Ue*Ar-We*fr)*(nn-le)-(We-Ar)*(qr*le-nn*an),Te=(Ue-fr)*(nn-le)-(We-Ar)*(qr-an);if(!!Te){var Ze=fe/Te,or=Me/Te,lr=+Ze.toFixed(2),Be=+or.toFixed(2);if(!(lr<+Math.min(Ue,fr).toFixed(2)||lr>+Math.max(Ue,fr).toFixed(2)||lr<+Math.min(qr,an).toFixed(2)||lr>+Math.max(qr,an).toFixed(2)||Be<+Math.min(We,Ar).toFixed(2)||Be>+Math.max(We,Ar).toFixed(2)||Be<+Math.min(nn,le).toFixed(2)||Be>+Math.max(nn,le).toFixed(2)))return{x:Ze,y:or}}}},ce=function(Ue,We,fr){return We>=Ue.x&&We<=Ue.x+Ue.width&&fr>=Ue.y&&fr<=Ue.y+Ue.height},$t=function(Ue,We,fr,Ar){return Ue===null&&(Ue=We=fr=Ar=0),We===null&&(We=Ue.y,fr=Ue.width,Ar=Ue.height,Ue=Ue.x),{x:Ue,y:We,width:fr,w:fr,height:Ar,h:Ar,x2:Ue+fr,y2:We+Ar,cx:Ue+fr/2,cy:We+Ar/2,r1:Math.min(fr,Ar)/2,r2:Math.max(fr,Ar)/2,r0:Math.sqrt(fr*fr+Ar*Ar)/2,path:yt(Ue,We,fr,Ar),vb:[Ue,We,fr,Ar].join(" ")}},Ut=function(Ue,We){return Ue=$t(Ue),We=$t(We),ce(We,Ue.x,Ue.y)||ce(We,Ue.x2,Ue.y)||ce(We,Ue.x,Ue.y2)||ce(We,Ue.x2,Ue.y2)||ce(Ue,We.x,We.y)||ce(Ue,We.x2,We.y)||ce(Ue,We.x,We.y2)||ce(Ue,We.x2,We.y2)||(Ue.x<We.x2&&Ue.x>We.x||We.x<Ue.x2&&We.x>Ue.x)&&(Ue.y<We.y2&&Ue.y>We.y||We.y<Ue.y2&&We.y>Ue.y)},Rt=function(Ue,We,fr,Ar,qr,nn,an,le){(0,T.isArray)(Ue)||(Ue=[Ue,We,fr,Ar,qr,nn,an,le]);var fe=Jt.apply(null,Ue);return $t(fe.min.x,fe.min.y,fe.max.x-fe.min.x,fe.max.y-fe.min.y)},Pt=function(Ue,We,fr,Ar,qr,nn,an,le,fe){var Me=1-fe,Te=Math.pow(Me,3),Ze=Math.pow(Me,2),or=fe*fe,lr=or*fe,Be=Te*Ue+Ze*3*fe*fr+Me*3*fe*fe*qr+lr*an,tr=Te*We+Ze*3*fe*Ar+Me*3*fe*fe*nn+lr*le,Mr=Ue+2*fe*(fr-Ue)+or*(qr-2*fr+Ue),Xr=We+2*fe*(Ar-We)+or*(nn-2*Ar+We),Zr=fr+2*fe*(qr-fr)+or*(an-2*qr+fr),tn=Ar+2*fe*(nn-Ar)+or*(le-2*nn+Ar),_n=Me*Ue+fe*fr,$n=Me*We+fe*Ar,si=Me*qr+fe*an,Jr=Me*nn+fe*le,Si=90-Math.atan2(Mr-Zr,Xr-tn)*180/Math.PI;return{x:Be,y:tr,m:{x:Mr,y:Xr},n:{x:Zr,y:tn},start:{x:_n,y:$n},end:{x:si,y:Jr},alpha:Si}},Yt=function(Ue,We,fr){var Ar=Rt(Ue),qr=Rt(We);if(!Ut(Ar,qr))return fr?0:[];for(var nn=Kt.apply(0,Ue),an=Kt.apply(0,We),le=~~(nn/8),fe=~~(an/8),Me=[],Te=[],Ze={},or=fr?0:[],lr=0;lr<le+1;lr++){var Be=Pt.apply(0,Ue.concat(lr/le));Me.push({x:Be.x,y:Be.y,t:lr/le})}for(var lr=0;lr<fe+1;lr++){var Be=Pt.apply(0,We.concat(lr/fe));Te.push({x:Be.x,y:Be.y,t:lr/fe})}for(var lr=0;lr<le;lr++)for(var tr=0;tr<fe;tr++){var Mr=Me[lr],Xr=Me[lr+1],Zr=Te[tr],tn=Te[tr+1],_n=Math.abs(Xr.x-Mr.x)<.001?"y":"x",$n=Math.abs(tn.x-Zr.x)<.001?"y":"x",si=ue(Mr.x,Mr.y,Xr.x,Xr.y,Zr.x,Zr.y,tn.x,tn.y);if(si){if(Ze[si.x.toFixed(4)]===si.y.toFixed(4))continue;Ze[si.x.toFixed(4)]=si.y.toFixed(4);var Jr=Mr.t+Math.abs((si[_n]-Mr[_n])/(Xr[_n]-Mr[_n]))*(Xr.t-Mr.t),Si=Zr.t+Math.abs((si[$n]-Zr[$n])/(tn[$n]-Zr[$n]))*(tn.t-Zr.t);Jr>=0&&Jr<=1&&Si>=0&&Si<=1&&(fr?or++:or.push({x:si.x,y:si.y,t1:Jr,t2:Si}))}}return or},Dt=function(Ue,We,fr){Ue=Ht(Ue),We=Ht(We);for(var Ar,qr,nn,an,le,fe,Me,Te,Ze,or,lr=fr?0:[],Be=0,tr=Ue.length;Be<tr;Be++){var Mr=Ue[Be];if(Mr[0]==="M")Ar=le=Mr[1],qr=fe=Mr[2];else{Mr[0]==="C"?(Ze=[Ar,qr].concat(Mr.slice(1)),Ar=Ze[6],qr=Ze[7]):(Ze=[Ar,qr,Ar,qr,le,fe,le,fe],Ar=le,qr=fe);for(var Xr=0,Zr=We.length;Xr<Zr;Xr++){var tn=We[Xr];if(tn[0]==="M")nn=Me=tn[1],an=Te=tn[2];else{tn[0]==="C"?(or=[nn,an].concat(tn.slice(1)),nn=or[6],an=or[7]):(or=[nn,an,nn,an,Me,Te,Me,Te],nn=Me,an=Te);var _n=Yt(Ze,or,fr);if(fr)lr+=_n;else{for(var $n=0,si=_n.length;$n<si;$n++)_n[$n].segment1=Be,_n[$n].segment2=Xr,_n[$n].bez1=Ze,_n[$n].bez2=or;lr=lr.concat(_n)}}}}}return lr};function Nt(Ue,We){return Dt(Ue,We)}var ne=/,?([a-z]),?/gi;function ve(Ue){return Ue.join(",").replace(ne,"$1")}function Re(Ue){return Math.sqrt(Ue[0]*Ue[0]+Ue[1]*Ue[1])}function je(Ue,We){return Re(Ue)*Re(We)?(Ue[0]*We[0]+Ue[1]*We[1])/(Re(Ue)*Re(We)):1}function Cr(Ue,We){return(Ue[0]*We[1]<Ue[1]*We[0]?-1:1)*Math.acos(je(Ue,We))}function $r(Ue,We){return Ue[0]===We[0]&&Ue[1]===We[1]}function Qr(Ue,We){var fr=We[1],Ar=We[2],qr=(0,T.mod)((0,T.toRadian)(We[3]),Math.PI*2),nn=We[4],an=We[5],le=Ue[0],fe=Ue[1],Me=We[6],Te=We[7],Ze=Math.cos(qr)*(le-Me)/2+Math.sin(qr)*(fe-Te)/2,or=-1*Math.sin(qr)*(le-Me)/2+Math.cos(qr)*(fe-Te)/2,lr=Ze*Ze/(fr*fr)+or*or/(Ar*Ar);lr>1&&(fr*=Math.sqrt(lr),Ar*=Math.sqrt(lr));var Be=fr*fr*(or*or)+Ar*Ar*(Ze*Ze),tr=Be?Math.sqrt((fr*fr*(Ar*Ar)-Be)/Be):1;nn===an&&(tr*=-1),isNaN(tr)&&(tr=0);var Mr=Ar?tr*fr*or/Ar:0,Xr=fr?tr*-Ar*Ze/fr:0,Zr=(le+Me)/2+Math.cos(qr)*Mr-Math.sin(qr)*Xr,tn=(fe+Te)/2+Math.sin(qr)*Mr+Math.cos(qr)*Xr,_n=[(Ze-Mr)/fr,(or-Xr)/Ar],$n=[(-1*Ze-Mr)/fr,(-1*or-Xr)/Ar],si=Cr([1,0],_n),Jr=Cr(_n,$n);return je(_n,$n)<=-1&&(Jr=Math.PI),je(_n,$n)>=1&&(Jr=0),an===0&&Jr>0&&(Jr=Jr-2*Math.PI),an===1&&Jr<0&&(Jr=Jr+2*Math.PI),{cx:Zr,cy:tn,rx:$r(Ue,[Me,Te])?0:fr,ry:$r(Ue,[Me,Te])?0:Ar,startAngle:si,endAngle:si+Jr,xRotation:qr,arcFlag:nn,sweepFlag:an}}function Ee(Ue,We){return[We[0]+(We[0]-Ue[0]),We[1]+(We[1]-Ue[1])]}function yn(Ue){Ue=F(Ue);for(var We=[],fr=null,Ar=null,qr=null,nn=0,an=Ue.length,le=0;le<an;le++){var fe=Ue[le];Ar=Ue[le+1];var Me=fe[0],Te={command:Me,prePoint:fr,params:fe,startTangent:null,endTangent:null};switch(Me){case"M":qr=[fe[1],fe[2]],nn=le;break;case"A":var Ze=Qr(fr,fe);Te.arcParams=Ze;break;default:break}if(Me==="Z")fr=qr,Ar=Ue[nn+1];else{var or=fe.length;fr=[fe[or-2],fe[or-1]]}Ar&&Ar[0]==="Z"&&(Ar=Ue[nn],We[nn]&&(We[nn].prePoint=fr)),Te.currentPoint=fr,We[nn]&&$r(fr,We[nn].currentPoint)&&(We[nn].prePoint=Te.prePoint);var lr=Ar?[Ar[Ar.length-2],Ar[Ar.length-1]]:null;Te.nextPoint=lr;var Be=Te.prePoint;if(["L","H","V"].includes(Me))Te.startTangent=[Be[0]-fr[0],Be[1]-fr[1]],Te.endTangent=[fr[0]-Be[0],fr[1]-Be[1]];else if(Me==="Q"){var tr=[fe[1],fe[2]];Te.startTangent=[Be[0]-tr[0],Be[1]-tr[1]],Te.endTangent=[fr[0]-tr[0],fr[1]-tr[1]]}else if(Me==="T"){var Mr=We[le-1],tr=Ee(Mr.currentPoint,Be);Mr.command==="Q"?(Te.command="Q",Te.startTangent=[Be[0]-tr[0],Be[1]-tr[1]],Te.endTangent=[fr[0]-tr[0],fr[1]-tr[1]]):(Te.command="TL",Te.startTangent=[Be[0]-fr[0],Be[1]-fr[1]],Te.endTangent=[fr[0]-Be[0],fr[1]-Be[1]])}else if(Me==="C"){var Xr=[fe[1],fe[2]],Zr=[fe[3],fe[4]];Te.startTangent=[Be[0]-Xr[0],Be[1]-Xr[1]],Te.endTangent=[fr[0]-Zr[0],fr[1]-Zr[1]],Te.startTangent[0]===0&&Te.startTangent[1]===0&&(Te.startTangent=[Xr[0]-Zr[0],Xr[1]-Zr[1]]),Te.endTangent[0]===0&&Te.endTangent[1]===0&&(Te.endTangent=[Zr[0]-Xr[0],Zr[1]-Xr[1]])}else if(Me==="S"){var Mr=We[le-1],Xr=Ee(Mr.currentPoint,Be),Zr=[fe[1],fe[2]];Mr.command==="C"?(Te.command="C",Te.startTangent=[Be[0]-Xr[0],Be[1]-Xr[1]],Te.endTangent=[fr[0]-Zr[0],fr[1]-Zr[1]]):(Te.command="SQ",Te.startTangent=[Be[0]-Zr[0],Be[1]-Zr[1]],Te.endTangent=[fr[0]-Zr[0],fr[1]-Zr[1]])}else if(Me==="A"){var tn=.001,_n=Te.arcParams||{},$n=_n.cx,si=$n===void 0?0:$n,Jr=_n.cy,Si=Jr===void 0?0:Jr,Jn=_n.rx,yi=Jn===void 0?0:Jn,Ka=_n.ry,ki=Ka===void 0?0:Ka,ga=_n.sweepFlag,ko=ga===void 0?0:ga,Ci=_n.startAngle,po=Ci===void 0?0:Ci,oo=_n.endAngle,cn=oo===void 0?0:oo;ko===0&&(tn*=-1);var vn=yi*Math.cos(po-tn)+si,Wo=ki*Math.sin(po-tn)+Si;Te.startTangent=[vn-qr[0],Wo-qr[1]];var mo=yi*Math.cos(po+cn+tn)+si,fo=ki*Math.sin(po+cn-tn)+Si;Te.endTangent=[Be[0]-mo,Be[1]-fo]}We.push(Te)}return We}var ui=function(Ue,We,fr){return Ue>=We&&Ue<=fr};function la(Ue,We,fr,Ar){var qr=.001,nn={x:fr.x-Ue.x,y:fr.y-Ue.y},an={x:We.x-Ue.x,y:We.y-Ue.y},le={x:Ar.x-fr.x,y:Ar.y-fr.y},fe=an.x*le.y-an.y*le.x,Me=fe*fe,Te=an.x*an.x+an.y*an.y,Ze=le.x*le.x+le.y*le.y,or=null;if(Me>qr*Te*Ze){var lr=(nn.x*le.y-nn.y*le.x)/fe,Be=(nn.x*an.y-nn.y*an.x)/fe;ui(lr,0,1)&&ui(Be,0,1)&&(or={x:Ue.x+lr*an.x,y:Ue.y+lr*an.y})}return or}var Or=1e-6;function ln(Ue){return Math.abs(Ue)<Or?0:Ue<0?-1:1}function Kn(Ue,We,fr){return(fr[0]-Ue[0])*(We[1]-Ue[1])==(We[0]-Ue[0])*(fr[1]-Ue[1])&&Math.min(Ue[0],We[0])<=fr[0]&&fr[0]<=Math.max(Ue[0],We[0])&&Math.min(Ue[1],We[1])<=fr[1]&&fr[1]<=Math.max(Ue[1],We[1])}function jn(Ue,We,fr){var Ar=!1,qr=Ue.length;if(qr<=2)return!1;for(var nn=0;nn<qr;nn++){var an=Ue[nn],le=Ue[(nn+1)%qr];if(Kn(an,le,[We,fr]))return!0;ln(an[1]-fr)>0!=ln(le[1]-fr)>0&&ln(We-(fr-an[1])*(an[0]-le[0])/(an[1]-le[1])-an[0])<0&&(Ar=!Ar)}return Ar}function wi(Ue){for(var We=[],fr=Ue.length,Ar=0;Ar<fr-1;Ar++){var qr=Ue[Ar],nn=Ue[Ar+1];We.push({from:{x:qr[0],y:qr[1]},to:{x:nn[0],y:nn[1]}})}if(We.length>1){var an=Ue[0],le=Ue[fr-1];We.push({from:{x:le[0],y:le[1]},to:{x:an[0],y:an[1]}})}return We}function Sa(Ue,We){var fr=!1;return(0,T.each)(Ue,function(Ar){if(la(Ar.from,Ar.to,We.from,We.to))return fr=!0,!1}),fr}function to(Ue){var We=Ue.map(function(Ar){return Ar[0]}),fr=Ue.map(function(Ar){return Ar[1]});return{minX:Math.min.apply(null,We),maxX:Math.max.apply(null,We),minY:Math.min.apply(null,fr),maxY:Math.max.apply(null,fr)}}function qa(Ue,We){return!(We.minX>Ue.maxX||We.maxX<Ue.minX||We.minY>Ue.maxY||We.maxY<Ue.minY)}function Ui(Ue,We){if(Ue.length<2||We.length<2)return!1;var fr=to(Ue),Ar=to(We);if(!qa(fr,Ar))return!1;var qr=!1;if((0,T.each)(We,function(fe){if(jn(Ue,fe[0],fe[1]))return qr=!0,!1}),qr||((0,T.each)(Ue,function(fe){if(jn(We,fe[0],fe[1]))return qr=!0,!1}),qr))return!0;var nn=wi(Ue),an=wi(We),le=!1;return(0,T.each)(an,function(fe){if(Sa(nn,fe))return le=!0,!1}),le}},84023:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.isSamePoint=void 0;var T=S(49242);function j(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])}function y(R,N){return j(R)*j(N)?(R[0]*N[0]+R[1]*N[1])/(j(R)*j(N)):1}function U(R,N){return(R[0]*N[1]<R[1]*N[0]?-1:1)*Math.acos(y(R,N))}function F(R,N){return R[0]===N[0]&&R[1]===N[1]}P.isSamePoint=F;function B(R,N){var A=N[1],D=N[2],M=(0,T.mod)((0,T.toRadian)(N[3]),Math.PI*2),O=N[4],k=N[5],V=R[0],X=R[1],K=N[6],q=N[7],ct=Math.cos(M)*(V-K)/2+Math.sin(M)*(X-q)/2,_t=-1*Math.sin(M)*(V-K)/2+Math.cos(M)*(X-q)/2,yt=ct*ct/(A*A)+_t*_t/(D*D);yt>1&&(A*=Math.sqrt(yt),D*=Math.sqrt(yt));var lt=A*A*(_t*_t)+D*D*(ct*ct),Lt=lt?Math.sqrt((A*A*(D*D)-lt)/lt):1;O===k&&(Lt*=-1),isNaN(Lt)&&(Lt=0);var wt=D?Lt*A*_t/D:0,Gt=A?Lt*-D*ct/A:0,re=(V+K)/2+Math.cos(M)*wt-Math.sin(M)*Gt,Qt=(X+q)/2+Math.sin(M)*wt+Math.cos(M)*Gt,it=[(ct-wt)/A,(_t-Gt)/D],dt=[(-1*ct-wt)/A,(-1*_t-Gt)/D],gt=U([1,0],it),vt=U(it,dt);return y(it,dt)<=-1&&(vt=Math.PI),y(it,dt)>=1&&(vt=0),k===0&&vt>0&&(vt=vt-2*Math.PI),k===1&&vt<0&&(vt=vt+2*Math.PI),{cx:re,cy:Qt,rx:F(R,[K,q])?0:A,ry:F(R,[K,q])?0:D,startAngle:gt,endAngle:gt+vt,xRotation:M,arcFlag:O,sweepFlag:k}}P.default=B},21528:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(j,y,U){return j>=y&&j<=U};function T(j,y,U,F){var B=.001,R={x:U.x-j.x,y:U.y-j.y},N={x:y.x-j.x,y:y.y-j.y},A={x:F.x-U.x,y:F.y-U.y},D=N.x*A.y-N.y*A.x,M=D*D,O=N.x*N.x+N.y*N.y,k=A.x*A.x+A.y*A.y,V=null;if(M>B*O*k){var X=(R.x*A.y-R.y*A.x)/D,K=(R.x*N.y-R.y*N.x)/D;S(X,0,1)&&S(K,0,1)&&(V={x:j.x+X*N.x,y:j.y+X*N.y})}return V}P.default=T},70146:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66957),j=S(21528),y=S(49242);function U(A){for(var D=[],M=A.length,O=0;O<M-1;O++){var k=A[O],V=A[O+1];D.push({from:{x:k[0],y:k[1]},to:{x:V[0],y:V[1]}})}if(D.length>1){var X=A[0],K=A[M-1];D.push({from:{x:K[0],y:K[1]},to:{x:X[0],y:X[1]}})}return D}function F(A,D){var M=!1;return(0,y.each)(A,function(O){if((0,j.default)(O.from,O.to,D.from,D.to))return M=!0,!1}),M}function B(A){var D=A.map(function(O){return O[0]}),M=A.map(function(O){return O[1]});return{minX:Math.min.apply(null,D),maxX:Math.max.apply(null,D),minY:Math.min.apply(null,M),maxY:Math.max.apply(null,M)}}function R(A,D){return!(D.minX>A.maxX||D.maxX<A.minX||D.minY>A.maxY||D.maxY<A.minY)}function N(A,D){if(A.length<2||D.length<2)return!1;var M=B(A),O=B(D);if(!R(M,O))return!1;var k=!1;if((0,y.each)(D,function(q){if((0,T.default)(A,q[0],q[1]))return k=!0,!1}),k||((0,y.each)(A,function(q){if((0,T.default)(D,q[0],q[1]))return k=!0,!1}),k))return!0;var V=U(A),X=U(D),K=!1;return(0,y.each)(X,function(q){if(F(V,q))return K=!0,!1}),K}P.default=N},28498:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,y=new RegExp("([a-z])["+j+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+j+"]*,?["+j+"]*)+)","ig"),U=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+j+"]*,?["+j+"]*","ig");function F(B){if(!B)return null;if((0,T.isArray)(B))return B;var R={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},N=[];return String(B).replace(y,function(A,D,M){var O=[],k=D.toLowerCase();if(M.replace(U,function(V,X){X&&O.push(+X)}),k==="m"&&O.length>2&&(N.push([D].concat(O.splice(0,2))),k="l",D=D==="m"?"l":"L"),k==="o"&&O.length===1&&N.push([D,O[0]]),k==="r")N.push([D].concat(O));else for(;O.length>=R[k]&&(N.push([D].concat(O.splice(0,R[k]))),!!R[k]););return""}),N}P.default=F},80315:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(49242),j=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,y=/[^\s\,]+/ig;function U(F){var B=F||[];if((0,T.isArray)(B))return B;if((0,T.isString)(B))return B=B.match(j),(0,T.each)(B,function(R,N){if(R=R.match(y),R[0].length>1){var A=R[0].charAt(0);R.splice(1,0,R[0].substr(1)),R[0]=A}(0,T.each)(R,function(D,M){isNaN(D)||(R[M]=+D)}),B[N]=R}),B}P.default=U},74479:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(28498),y=/[a-z]/;function U(B,R){return[R[0]+(R[0]-B[0]),R[1]+(R[1]-B[1])]}function F(B){var R=(0,j.default)(B);if(!R||!R.length)return[["M",0,0]];for(var N=!1,A=0;A<R.length;A++){var D=R[A][0];if(y.test(D)||["V","H","T","S"].indexOf(D)>=0){N=!0;break}}if(!N)return R;var M=[],O=0,k=0,V=0,X=0,K=0,q,ct,_t=R[0];(_t[0]==="M"||_t[0]==="m")&&(O=+_t[1],k=+_t[2],V=O,X=k,K++,M[0]=["M",O,k]);for(var A=K,yt=R.length;A<yt;A++){var lt=R[A],Lt=M[A-1],wt=[],D=lt[0],Gt=D.toUpperCase();if(D!==Gt)switch(wt[0]=Gt,Gt){case"A":wt[1]=lt[1],wt[2]=lt[2],wt[3]=lt[3],wt[4]=lt[4],wt[5]=lt[5],wt[6]=+lt[6]+O,wt[7]=+lt[7]+k;break;case"V":wt[1]=+lt[1]+k;break;case"H":wt[1]=+lt[1]+O;break;case"M":V=+lt[1]+O,X=+lt[2]+k,wt[1]=V,wt[2]=X;break;default:for(var re=1,Qt=lt.length;re<Qt;re++)wt[re]=+lt[re]+(re%2?O:k)}else wt=R[A];switch(Gt){case"Z":O=+V,k=+X;break;case"H":O=wt[1],wt=["L",O,k];break;case"V":k=wt[1],wt=["L",O,k];break;case"T":O=wt[1],k=wt[2];var it=U([Lt[1],Lt[2]],[Lt[3],Lt[4]]);wt=["Q",it[0],it[1],O,k];break;case"S":O=wt[wt.length-2],k=wt[wt.length-1];var dt=Lt.length,gt=U([Lt[dt-4],Lt[dt-3]],[Lt[dt-2],Lt[dt-1]]);wt=["C",gt[0],gt[1],wt[1],wt[2],O,k];break;case"M":V=wt[wt.length-2],X=wt[wt.length-1];break;default:O=wt[wt.length-2],k=wt[wt.length-1]}M.push(wt)}return M}P.Z=F},49274:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(84023),j=S(84023),y=S(80315);function U(B,R){return[R[0]+(R[0]-B[0]),R[1]+(R[1]-B[1])]}function F(B){B=(0,y.default)(B);for(var R=[],N=null,A=null,D=null,M=0,O=B.length,k=0;k<O;k++){var V=B[k];A=B[k+1];var X=V[0],K={command:X,prePoint:N,params:V,startTangent:null,endTangent:null};switch(X){case"M":D=[V[1],V[2]],M=k;break;case"A":var q=(0,T.default)(N,V);K.arcParams=q;break;default:break}if(X==="Z")N=D,A=B[M+1];else{var ct=V.length;N=[V[ct-2],V[ct-1]]}A&&A[0]==="Z"&&(A=B[M],R[M]&&(R[M].prePoint=N)),K.currentPoint=N,R[M]&&(0,j.isSamePoint)(N,R[M].currentPoint)&&(R[M].prePoint=K.prePoint);var _t=A?[A[A.length-2],A[A.length-1]]:null;K.nextPoint=_t;var yt=K.prePoint;if(["L","H","V"].includes(X))K.startTangent=[yt[0]-N[0],yt[1]-N[1]],K.endTangent=[N[0]-yt[0],N[1]-yt[1]];else if(X==="Q"){var lt=[V[1],V[2]];K.startTangent=[yt[0]-lt[0],yt[1]-lt[1]],K.endTangent=[N[0]-lt[0],N[1]-lt[1]]}else if(X==="T"){var Lt=R[k-1],lt=U(Lt.currentPoint,yt);Lt.command==="Q"?(K.command="Q",K.startTangent=[yt[0]-lt[0],yt[1]-lt[1]],K.endTangent=[N[0]-lt[0],N[1]-lt[1]]):(K.command="TL",K.startTangent=[yt[0]-N[0],yt[1]-N[1]],K.endTangent=[N[0]-yt[0],N[1]-yt[1]])}else if(X==="C"){var wt=[V[1],V[2]],Gt=[V[3],V[4]];K.startTangent=[yt[0]-wt[0],yt[1]-wt[1]],K.endTangent=[N[0]-Gt[0],N[1]-Gt[1]],K.startTangent[0]===0&&K.startTangent[1]===0&&(K.startTangent=[wt[0]-Gt[0],wt[1]-Gt[1]]),K.endTangent[0]===0&&K.endTangent[1]===0&&(K.endTangent=[Gt[0]-wt[0],Gt[1]-wt[1]])}else if(X==="S"){var Lt=R[k-1],wt=U(Lt.currentPoint,yt),Gt=[V[1],V[2]];Lt.command==="C"?(K.command="C",K.startTangent=[yt[0]-wt[0],yt[1]-wt[1]],K.endTangent=[N[0]-Gt[0],N[1]-Gt[1]]):(K.command="SQ",K.startTangent=[yt[0]-Gt[0],yt[1]-Gt[1]],K.endTangent=[N[0]-Gt[0],N[1]-Gt[1]])}else if(X==="A"){var re=.001,Qt=K.arcParams||{},it=Qt.cx,dt=it===void 0?0:it,gt=Qt.cy,vt=gt===void 0?0:gt,Y=Qt.rx,ot=Y===void 0?0:Y,nt=Qt.ry,rt=nt===void 0?0:nt,st=Qt.sweepFlag,d=st===void 0?0:st,It=Qt.startAngle,Ht=It===void 0?0:It,kt=Qt.endAngle,Xt=kt===void 0?0:kt;d===0&&(re*=-1);var Kt=ot*Math.cos(Ht-re)+dt,Jt=rt*Math.sin(Ht-re)+vt;K.startTangent=[Kt-D[0],Jt-D[1]];var ue=ot*Math.cos(Ht+Xt+re)+dt,ce=rt*Math.sin(Ht+Xt-re)+vt;K.endTangent=[yt[0]-ue,yt[1]-ce]}R.push(K)}return R}P.default=F},66957:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=1e-6;function T(U){return Math.abs(U)<S?0:U<0?-1:1}function j(U,F,B){return(B[0]-U[0])*(F[1]-U[1])==(F[0]-U[0])*(B[1]-U[1])&&Math.min(U[0],F[0])<=B[0]&&B[0]<=Math.max(U[0],F[0])&&Math.min(U[1],F[1])<=B[1]&&B[1]<=Math.max(U[1],F[1])}function y(U,F,B){var R=!1,N=U.length;if(N<=2)return!1;for(var A=0;A<N;A++){var D=U[A],M=U[(A+1)%N];if(j(D,M,[F,B]))return!0;T(D[1]-B)>0!=T(M[1]-B)>0&&T(F-(B-D[1])*(D[0]-M[0])/(D[1]-M[1])-D[0])<0&&(R=!R)}return R}P.default=y},2443:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Category:function(){return rt},Identity:function(){return We},Linear:function(){return ve},Log:function(){return yn},Pow:function(){return la},Quantile:function(){return Sa},Quantize:function(){return jn},Scale:function(){return B},Time:function(){return ln},TimeCat:function(){return Yt},getScale:function(){return qa},getTickMethod:function(){return y},registerScale:function(){return Ui},registerTickMethod:function(){return U}});var T=S(49242),j={};function y(zt){return j[zt]}function U(zt,Wt){j[zt]=Wt}var F=function(){function zt(Wt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Wt,this.initCfg(),this.init()}return zt.prototype.translate=function(Wt){return Wt},zt.prototype.change=function(Wt){(0,T.assign)(this.__cfg__,Wt),this.init()},zt.prototype.clone=function(){return this.constructor(this.__cfg__)},zt.prototype.getTicks=function(){var Wt=this;return(0,T.map)(this.ticks,function(de,Se){return(0,T.isObject)(de)?de:{text:Wt.getText(de,Se),tickValue:de,value:Wt.scale(de)}})},zt.prototype.getText=function(Wt,de){var Se=this.formatter,Ae=Se?Se(Wt,de):Wt;return(0,T.isNil)(Ae)||!(0,T.isFunction)(Ae.toString)?"":Ae.toString()},zt.prototype.getConfig=function(Wt){return this.__cfg__[Wt]},zt.prototype.init=function(){(0,T.assign)(this,this.__cfg__),this.setDomain(),(0,T.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},zt.prototype.initCfg=function(){},zt.prototype.setDomain=function(){},zt.prototype.calculateTicks=function(){var Wt=this.tickMethod,de=[];if((0,T.isString)(Wt)){var Se=y(Wt);if(!Se)throw new Error("There is no method to to calculate ticks!");de=Se(this)}else(0,T.isFunction)(Wt)&&(de=Wt(this));return de},zt.prototype.rangeMin=function(){return this.range[0]},zt.prototype.rangeMax=function(){return this.range[1]},zt.prototype.calcPercent=function(Wt,de,Se){return(0,T.isNumber)(Wt)?(Wt-de)/(Se-de):NaN},zt.prototype.calcValue=function(Wt,de,Se){return de+Wt*(Se-de)},zt}(),B=F;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R=function(zt,Wt){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,Se){de.__proto__=Se}||function(de,Se){for(var Ae in Se)Object.prototype.hasOwnProperty.call(Se,Ae)&&(de[Ae]=Se[Ae])},R(zt,Wt)};function N(zt,Wt){if(typeof Wt!="function"&&Wt!==null)throw new TypeError("Class extends value "+String(Wt)+" is not a constructor or null");R(zt,Wt);function de(){this.constructor=zt}zt.prototype=Wt===null?Object.create(Wt):(de.prototype=Wt.prototype,new de)}var A=function(){return A=Object.assign||function(Wt){for(var de,Se=1,Ae=arguments.length;Se<Ae;Se++){de=arguments[Se];for(var He in de)Object.prototype.hasOwnProperty.call(de,He)&&(Wt[He]=de[He])}return Wt},A.apply(this,arguments)};function D(zt,Wt){var de={};for(var Se in zt)Object.prototype.hasOwnProperty.call(zt,Se)&&Wt.indexOf(Se)<0&&(de[Se]=zt[Se]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ae=0,Se=Object.getOwnPropertySymbols(zt);Ae<Se.length;Ae++)Wt.indexOf(Se[Ae])<0&&Object.prototype.propertyIsEnumerable.call(zt,Se[Ae])&&(de[Se[Ae]]=zt[Se[Ae]]);return de}function M(zt,Wt,de,Se){var Ae=arguments.length,He=Ae<3?Wt:Se===null?Se=Object.getOwnPropertyDescriptor(Wt,de):Se,_r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")He=Reflect.decorate(zt,Wt,de,Se);else for(var Lr=zt.length-1;Lr>=0;Lr--)(_r=zt[Lr])&&(He=(Ae<3?_r(He):Ae>3?_r(Wt,de,He):_r(Wt,de))||He);return Ae>3&&He&&Object.defineProperty(Wt,de,He),He}function O(zt,Wt){return function(de,Se){Wt(de,Se,zt)}}function k(zt,Wt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(zt,Wt)}function V(zt,Wt,de,Se){function Ae(He){return He instanceof de?He:new de(function(_r){_r(He)})}return new(de||(de=Promise))(function(He,_r){function Lr(Fr){try{Kr(Se.next(Fr))}catch(pi){_r(pi)}}function wn(Fr){try{Kr(Se.throw(Fr))}catch(pi){_r(pi)}}function Kr(Fr){Fr.done?He(Fr.value):Ae(Fr.value).then(Lr,wn)}Kr((Se=Se.apply(zt,Wt||[])).next())})}function X(zt,Wt){var de={label:0,sent:function(){if(He[0]&1)throw He[1];return He[1]},trys:[],ops:[]},Se,Ae,He,_r;return _r={next:Lr(0),throw:Lr(1),return:Lr(2)},typeof Symbol=="function"&&(_r[Symbol.iterator]=function(){return this}),_r;function Lr(Kr){return function(Fr){return wn([Kr,Fr])}}function wn(Kr){if(Se)throw new TypeError("Generator is already executing.");for(;de;)try{if(Se=1,Ae&&(He=Kr[0]&2?Ae.return:Kr[0]?Ae.throw||((He=Ae.return)&&He.call(Ae),0):Ae.next)&&!(He=He.call(Ae,Kr[1])).done)return He;switch(Ae=0,He&&(Kr=[Kr[0]&2,He.value]),Kr[0]){case 0:case 1:He=Kr;break;case 4:return de.label++,{value:Kr[1],done:!1};case 5:de.label++,Ae=Kr[1],Kr=[0];continue;case 7:Kr=de.ops.pop(),de.trys.pop();continue;default:if(He=de.trys,!(He=He.length>0&&He[He.length-1])&&(Kr[0]===6||Kr[0]===2)){de=0;continue}if(Kr[0]===3&&(!He||Kr[1]>He[0]&&Kr[1]<He[3])){de.label=Kr[1];break}if(Kr[0]===6&&de.label<He[1]){de.label=He[1],He=Kr;break}if(He&&de.label<He[2]){de.label=He[2],de.ops.push(Kr);break}He[2]&&de.ops.pop(),de.trys.pop();continue}Kr=Wt.call(zt,de)}catch(Fr){Kr=[6,Fr],Ae=0}finally{Se=He=0}if(Kr[0]&5)throw Kr[1];return{value:Kr[0]?Kr[1]:void 0,done:!0}}}var K=Object.create?function(zt,Wt,de,Se){Se===void 0&&(Se=de),Object.defineProperty(zt,Se,{enumerable:!0,get:function(){return Wt[de]}})}:function(zt,Wt,de,Se){Se===void 0&&(Se=de),zt[Se]=Wt[de]};function q(zt,Wt){for(var de in zt)de!=="default"&&!Object.prototype.hasOwnProperty.call(Wt,de)&&K(Wt,zt,de)}function ct(zt){var Wt=typeof Symbol=="function"&&Symbol.iterator,de=Wt&&zt[Wt],Se=0;if(de)return de.call(zt);if(zt&&typeof zt.length=="number")return{next:function(){return zt&&Se>=zt.length&&(zt=void 0),{value:zt&&zt[Se++],done:!zt}}};throw new TypeError(Wt?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(zt,Wt){var de=typeof Symbol=="function"&&zt[Symbol.iterator];if(!de)return zt;var Se=de.call(zt),Ae,He=[],_r;try{for(;(Wt===void 0||Wt-- >0)&&!(Ae=Se.next()).done;)He.push(Ae.value)}catch(Lr){_r={error:Lr}}finally{try{Ae&&!Ae.done&&(de=Se.return)&&de.call(Se)}finally{if(_r)throw _r.error}}return He}function yt(){for(var zt=[],Wt=0;Wt<arguments.length;Wt++)zt=zt.concat(_t(arguments[Wt]));return zt}function lt(){for(var zt=0,Wt=0,de=arguments.length;Wt<de;Wt++)zt+=arguments[Wt].length;for(var Se=Array(zt),Ae=0,Wt=0;Wt<de;Wt++)for(var He=arguments[Wt],_r=0,Lr=He.length;_r<Lr;_r++,Ae++)Se[Ae]=He[_r];return Se}function Lt(zt,Wt,de){if(de||arguments.length===2)for(var Se=0,Ae=Wt.length,He;Se<Ae;Se++)(He||!(Se in Wt))&&(He||(He=Array.prototype.slice.call(Wt,0,Se)),He[Se]=Wt[Se]);return zt.concat(He||Array.prototype.slice.call(Wt))}function wt(zt){return this instanceof wt?(this.v=zt,this):new wt(zt)}function Gt(zt,Wt,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se=de.apply(zt,Wt||[]),Ae,He=[];return Ae={},_r("next"),_r("throw"),_r("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function _r(Pi){Se[Pi]&&(Ae[Pi]=function(ca){return new Promise(function(va,ji){He.push([Pi,ca,va,ji])>1||Lr(Pi,ca)})})}function Lr(Pi,ca){try{wn(Se[Pi](ca))}catch(va){pi(He[0][3],va)}}function wn(Pi){Pi.value instanceof wt?Promise.resolve(Pi.value.v).then(Kr,Fr):pi(He[0][2],Pi)}function Kr(Pi){Lr("next",Pi)}function Fr(Pi){Lr("throw",Pi)}function pi(Pi,ca){Pi(ca),He.shift(),He.length&&Lr(He[0][0],He[0][1])}}function re(zt){var Wt,de;return Wt={},Se("next"),Se("throw",function(Ae){throw Ae}),Se("return"),Wt[Symbol.iterator]=function(){return this},Wt;function Se(Ae,He){Wt[Ae]=zt[Ae]?function(_r){return(de=!de)?{value:wt(zt[Ae](_r)),done:Ae==="return"}:He?He(_r):_r}:He}}function Qt(zt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Wt=zt[Symbol.asyncIterator],de;return Wt?Wt.call(zt):(zt=typeof ct=="function"?ct(zt):zt[Symbol.iterator](),de={},Se("next"),Se("throw"),Se("return"),de[Symbol.asyncIterator]=function(){return this},de);function Se(He){de[He]=zt[He]&&function(_r){return new Promise(function(Lr,wn){_r=zt[He](_r),Ae(Lr,wn,_r.done,_r.value)})}}function Ae(He,_r,Lr,wn){Promise.resolve(wn).then(function(Kr){He({value:Kr,done:Lr})},_r)}}function it(zt,Wt){return Object.defineProperty?Object.defineProperty(zt,"raw",{value:Wt}):zt.raw=Wt,zt}var dt=Object.create?function(zt,Wt){Object.defineProperty(zt,"default",{enumerable:!0,value:Wt})}:function(zt,Wt){zt.default=Wt};function gt(zt){if(zt&&zt.__esModule)return zt;var Wt={};if(zt!=null)for(var de in zt)de!=="default"&&Object.prototype.hasOwnProperty.call(zt,de)&&K(Wt,zt,de);return dt(Wt,zt),Wt}function vt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Y(zt,Wt,de,Se){if(de==="a"&&!Se)throw new TypeError("Private accessor was defined without a getter");if(typeof Wt=="function"?zt!==Wt||!Se:!Wt.has(zt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return de==="m"?Se:de==="a"?Se.call(zt):Se?Se.value:Wt.get(zt)}function ot(zt,Wt,de,Se,Ae){if(Se==="m")throw new TypeError("Private method is not writable");if(Se==="a"&&!Ae)throw new TypeError("Private accessor was defined without a setter");if(typeof Wt=="function"?zt!==Wt||!Ae:!Wt.has(zt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Se==="a"?Ae.call(zt,de):Ae?Ae.value=de:Wt.set(zt,de),de}var nt=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="cat",de.isCategory=!0,de}return Wt.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var de=0;de<this.values.length;de++)this.translateIndexMap.set(this.values[de],de)}},Wt.prototype.translate=function(de){this.buildIndexMap();var Se=this.translateIndexMap.get(de);return Se===void 0&&(Se=(0,T.isNumber)(de)?de:NaN),Se},Wt.prototype.scale=function(de){var Se=this.translate(de),Ae=this.calcPercent(Se,this.min,this.max);return this.calcValue(Ae,this.rangeMin(),this.rangeMax())},Wt.prototype.invert=function(de){var Se=this.max-this.min,Ae=this.calcPercent(de,this.rangeMin(),this.rangeMax()),He=Math.round(Se*Ae)+this.min;return He<this.min||He>this.max?NaN:this.values[He]},Wt.prototype.getText=function(de){for(var Se=[],Ae=1;Ae<arguments.length;Ae++)Se[Ae-1]=arguments[Ae];var He=de;return(0,T.isNumber)(de)&&!this.values.includes(de)&&(He=this.values[He]),zt.prototype.getText.apply(this,Lt([He],Se,!1))},Wt.prototype.initCfg=function(){this.tickMethod="cat"},Wt.prototype.setDomain=function(){if((0,T.isNil)(this.getConfig("min"))&&(this.min=0),(0,T.isNil)(this.getConfig("max"))){var de=this.values.length;this.max=de>1?de-1:de}this.translateIndexMap&&(this.translateIndexMap=void 0)},Wt}(B),rt=nt,st=S(19432);function d(zt){return function(Wt,de,Se,Ae){for(var He=(0,T.isNil)(Se)?0:Se,_r=(0,T.isNil)(Ae)?Wt.length:Ae;He<_r;){var Lr=He+_r>>>1;zt(Wt[Lr])>de?_r=Lr:He=Lr+1}return He}}var It="format";function Ht(zt,Wt){var de=st[It]||st.default[It];return de(zt,Wt)}function kt(zt){return(0,T.isString)(zt)&&(zt.indexOf("T")>0?zt=new Date(zt).getTime():zt=new Date(zt.replace(/-/gi,"/")).getTime()),(0,T.isDate)(zt)&&(zt=zt.getTime()),zt}var Xt=1e3,Kt=60*Xt,Jt=60*Kt,ue=24*Jt,ce=ue*31,$t=ue*365,Ut=[["HH:mm:ss",Xt],["HH:mm:ss",Xt*10],["HH:mm:ss",Xt*30],["HH:mm",Kt],["HH:mm",Kt*10],["HH:mm",Kt*30],["HH",Jt],["HH",Jt*6],["HH",Jt*12],["YYYY-MM-DD",ue],["YYYY-MM-DD",ue*4],["YYYY-WW",ue*7],["YYYY-MM",ce],["YYYY-MM",ce*4],["YYYY-MM",ce*6],["YYYY",ue*380]];function Rt(zt,Wt,de){var Se=(Wt-zt)/de,Ae=d(function(_r){return _r[1]})(Ut,Se)-1,He=Ut[Ae];return Ae<0?He=Ut[0]:Ae>=Ut.length&&(He=(0,T.last)(Ut)),He}var Pt=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="timeCat",de}return Wt.prototype.translate=function(de){de=kt(de);var Se=this.values.indexOf(de);return Se===-1&&((0,T.isNumber)(de)&&de<this.values.length?Se=de:Se=NaN),Se},Wt.prototype.getText=function(de,Se){var Ae=this.translate(de);if(Ae>-1){var He=this.values[Ae],_r=this.formatter;return He=_r?_r(He,Se):Ht(He,this.mask),He}return de},Wt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Wt.prototype.setDomain=function(){var de=this.values;(0,T.each)(de,function(Se,Ae){de[Ae]=kt(Se)}),de.sort(function(Se,Ae){return Se-Ae}),zt.prototype.setDomain.call(this)},Wt}(rt),Yt=Pt,Dt=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.isContinuous=!0,de}return Wt.prototype.scale=function(de){if((0,T.isNil)(de))return NaN;var Se=this.rangeMin(),Ae=this.rangeMax(),He=this.max,_r=this.min;if(He===_r)return Se;var Lr=this.getScalePercent(de);return Se+Lr*(Ae-Se)},Wt.prototype.init=function(){zt.prototype.init.call(this);var de=this.ticks,Se=(0,T.head)(de),Ae=(0,T.last)(de);Se<this.min&&(this.min=Se),Ae>this.max&&(this.max=Ae),(0,T.isNil)(this.minLimit)||(this.min=Se),(0,T.isNil)(this.maxLimit)||(this.max=Ae)},Wt.prototype.setDomain=function(){var de=(0,T.getRange)(this.values),Se=de.min,Ae=de.max;(0,T.isNil)(this.min)&&(this.min=Se),(0,T.isNil)(this.max)&&(this.max=Ae),this.min>this.max&&(this.min=Se,this.max=Ae)},Wt.prototype.calculateTicks=function(){var de=this,Se=zt.prototype.calculateTicks.call(this);return this.nice||(Se=(0,T.filter)(Se,function(Ae){return Ae>=de.min&&Ae<=de.max})),Se},Wt.prototype.getScalePercent=function(de){var Se=this.max,Ae=this.min;return(de-Ae)/(Se-Ae)},Wt.prototype.getInvertPercent=function(de){return(de-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Wt}(B),Nt=Dt,ne=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="linear",de.isLinear=!0,de}return Wt.prototype.invert=function(de){var Se=this.getInvertPercent(de);return this.min+Se*(this.max-this.min)},Wt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Wt}(Nt),ve=ne;function Re(zt,Wt){var de=Math.E,Se;return Wt>=0?Se=Math.pow(de,Math.log(Wt)/zt):Se=Math.pow(de,Math.log(-Wt)/zt)*-1,Se}function je(zt,Wt){return zt===1?1:Math.log(Wt)/Math.log(zt)}function Cr(zt,Wt,de){(0,T.isNil)(de)&&(de=Math.max.apply(null,zt));var Se=de;return(0,T.each)(zt,function(Ae){Ae>0&&Ae<Se&&(Se=Ae)}),Se===de&&(Se=de/Wt),Se>1&&(Se=1),Se}function $r(zt){var Wt=zt.toString().split(/[eE]/),de=(Wt[0].split(".")[1]||"").length-+(Wt[1]||0);return de>0?de:0}function Qr(zt,Wt){var de=$r(zt),Se=$r(Wt),Ae=Math.pow(10,Math.max(de,Se));return(zt*Ae+Wt*Ae)/Ae}var Ee=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="log",de}return Wt.prototype.invert=function(de){var Se=this.base,Ae=je(Se,this.max),He=this.rangeMin(),_r=this.rangeMax()-He,Lr,wn=this.positiveMin;if(wn){if(de===0)return 0;Lr=je(Se,wn/Se);var Kr=1/(Ae-Lr)*_r;if(de<Kr)return de/Kr*wn}else Lr=je(Se,this.min);var Fr=(de-He)/_r,pi=Fr*(Ae-Lr)+Lr;return Math.pow(Se,pi)},Wt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Wt.prototype.setDomain=function(){zt.prototype.setDomain.call(this);var de=this.min;if(de<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");de===0&&(this.positiveMin=Cr(this.values,this.base,this.max))},Wt.prototype.getScalePercent=function(de){var Se=this.max,Ae=this.min;if(Se===Ae||de<=0)return 0;var He=this.base,_r=this.positiveMin;_r&&(Ae=_r*1/He);var Lr;return de<_r?Lr=de/_r/(je(He,Se)-je(He,Ae)):Lr=(je(He,de)-je(He,Ae))/(je(He,Se)-je(He,Ae)),Lr},Wt}(Nt),yn=Ee,ui=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="pow",de}return Wt.prototype.invert=function(de){var Se=this.getInvertPercent(de),Ae=this.exponent,He=Re(Ae,this.max),_r=Re(Ae,this.min),Lr=Se*(He-_r)+_r,wn=Lr>=0?1:-1;return Math.pow(Lr,Ae)*wn},Wt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Wt.prototype.getScalePercent=function(de){var Se=this.max,Ae=this.min;if(Se===Ae)return 0;var He=this.exponent,_r=(Re(He,de)-Re(He,Ae))/(Re(He,Se)-Re(He,Ae));return _r},Wt}(Nt),la=ui,Or=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="time",de}return Wt.prototype.getText=function(de,Se){var Ae=this.translate(de),He=this.formatter;return He?He(Ae,Se):Ht(Ae,this.mask)},Wt.prototype.scale=function(de){var Se=de;return((0,T.isString)(Se)||(0,T.isDate)(Se))&&(Se=this.translate(Se)),zt.prototype.scale.call(this,Se)},Wt.prototype.translate=function(de){return kt(de)},Wt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Wt.prototype.setDomain=function(){var de=this.values,Se=this.getConfig("min"),Ae=this.getConfig("max");if((!(0,T.isNil)(Se)||!(0,T.isNumber)(Se))&&(this.min=this.translate(this.min)),(!(0,T.isNil)(Ae)||!(0,T.isNumber)(Ae))&&(this.max=this.translate(this.max)),de&&de.length){var He=[],_r=Infinity,Lr=_r,wn=0;(0,T.each)(de,function(Kr){var Fr=kt(Kr);if(isNaN(Fr))throw new TypeError("Invalid Time: "+Kr+" in time scale!");_r>Fr?(Lr=_r,_r=Fr):Lr>Fr&&(Lr=Fr),wn<Fr&&(wn=Fr),He.push(Fr)}),de.length>1&&(this.minTickInterval=Lr-_r),(0,T.isNil)(Se)&&(this.min=_r),(0,T.isNil)(Ae)&&(this.max=wn)}},Wt}(ve),ln=Or,Kn=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="quantize",de}return Wt.prototype.invert=function(de){var Se=this.ticks,Ae=Se.length,He=this.getInvertPercent(de),_r=Math.floor(He*(Ae-1));if(_r>=Ae-1)return(0,T.last)(Se);if(_r<0)return(0,T.head)(Se);var Lr=Se[_r],wn=Se[_r+1],Kr=_r/(Ae-1),Fr=(_r+1)/(Ae-1);return Lr+(He-Kr)/(Fr-Kr)*(wn-Lr)},Wt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Wt.prototype.calculateTicks=function(){var de=zt.prototype.calculateTicks.call(this);return this.nice||((0,T.last)(de)!==this.max&&de.push(this.max),(0,T.head)(de)!==this.min&&de.unshift(this.min)),de},Wt.prototype.getScalePercent=function(de){var Se=this.ticks;if(de<(0,T.head)(Se))return 0;if(de>(0,T.last)(Se))return 1;var Ae=0;return(0,T.each)(Se,function(He,_r){if(de>=He)Ae=_r;else return!1}),Ae/(Se.length-1)},Wt}(Nt),jn=Kn,wi=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="quantile",de}return Wt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Wt}(jn),Sa=wi,to={};function qa(zt){return to[zt]}function Ui(zt,Wt){if(qa(zt))throw new Error("type '"+zt+"' existed.");to[zt]=Wt}var Ue=function(zt){N(Wt,zt);function Wt(){var de=zt!==null&&zt.apply(this,arguments)||this;return de.type="identity",de.isIdentity=!0,de}return Wt.prototype.calculateTicks=function(){return this.values},Wt.prototype.scale=function(de){return this.values[0]!==de&&(0,T.isNumber)(de)?de:this.range[0]},Wt.prototype.invert=function(de){var Se=this.range;return de<Se[0]||de>Se[1]?NaN:this.values[0]},Wt}(B),We=Ue;function fr(zt){return Math.abs(zt)<1e-15?zt:parseFloat(zt.toFixed(15))}var Ar=[1,5,2,2.5,4,3],qr=null,nn=Number.EPSILON*100;function an(zt,Wt){return(zt%Wt+Wt)%Wt}function le(zt){return Math.round(zt*1e12)/1e12}function fe(zt,Wt,de,Se,Ae,He){var _r=(0,T.size)(Wt),Lr=(0,T.indexOf)(Wt,zt),wn=0,Kr=an(Se,He);return(Kr<nn||He-Kr<nn)&&Se<=0&&Ae>=0&&(wn=1),1-Lr/(_r-1)-de+wn}function Me(zt,Wt,de){var Se=(0,T.size)(Wt),Ae=(0,T.indexOf)(Wt,zt),He=1;return 1-Ae/(Se-1)-de+He}function Te(zt,Wt,de,Se,Ae,He){var _r=(zt-1)/(He-Ae),Lr=(Wt-1)/(Math.max(He,Se)-Math.min(de,Ae));return 2-Math.max(_r/Lr,Lr/_r)}function Ze(zt,Wt){return zt>=Wt?2-(zt-1)/(Wt-1):1}function or(zt,Wt,de,Se){var Ae=Wt-zt;return 1-.5*(Math.pow(Wt-Se,2)+Math.pow(zt-de,2))/Math.pow(.1*Ae,2)}function lr(zt,Wt,de){var Se=Wt-zt;if(de>Se){var Ae=(de-Se)/2;return 1-Math.pow(Ae,2)/Math.pow(.1*Se,2)}return 1}function Be(){return 1}function tr(zt,Wt,de,Se,Ae,He){de===void 0&&(de=5),Se===void 0&&(Se=!0),Ae===void 0&&(Ae=Ar),He===void 0&&(He=[.25,.2,.5,.05]);var _r=de<0?0:Math.round(de);if(Number.isNaN(zt)||Number.isNaN(Wt)||typeof zt!="number"||typeof Wt!="number"||!_r)return{min:0,max:0,ticks:[]};if(Wt-zt<1e-15||_r===1)return{min:zt,max:Wt,ticks:[zt]};for(var Lr={score:-2,lmin:0,lmax:0,lstep:0},wn=1;wn<Infinity;){for(var Kr=0;Kr<Ae.length;Kr+=1){var Fr=Ae[Kr],pi=Me(Fr,Ae,wn);if(He[0]*pi+He[1]+He[2]+He[3]<Lr.score){wn=Infinity;break}for(var Pi=2;Pi<Infinity;){var ca=Ze(Pi,_r);if(He[0]*pi+He[1]+He[2]*ca+He[3]<Lr.score)break;for(var va=(Wt-zt)/(Pi+1)/wn/Fr,ji=Math.ceil(Math.log10(va));ji<Infinity;){var ai=wn*Fr*Math.pow(10,ji),Fe=lr(zt,Wt,ai*(Pi-1));if(He[0]*pi+He[1]*Fe+He[2]*ca+He[3]<Lr.score)break;var er=Math.floor(Wt/ai)*wn-(Pi-1)*wn,Ir=Math.ceil(zt/ai)*wn;if(er<=Ir)for(var hn=Ir-er,ci=0;ci<=hn;ci+=1){var wa=er+ci,no=wa*(ai/wn),ls=no+ai*(Pi-1),Jo=ai,ps=fe(Fr,Ae,wn,no,ls,Jo),Ks=or(zt,Wt,no,ls),Fo=Te(Pi,_r,zt,Wt,no,ls),Vs=Be(),$s=He[0]*ps+He[1]*Ks+He[2]*Fo+He[3]*Vs;$s>Lr.score&&(!Se||no<=zt&&ls>=Wt)&&(Lr.lmin=no,Lr.lmax=ls,Lr.lstep=Jo,Lr.score=$s)}ji+=1}Pi+=1}}wn+=1}var zs=fr(Lr.lmax),Ou=fr(Lr.lmin),au=fr(Lr.lstep),Vu=Math.floor(le((zs-Ou)/au))+1,ou=new Array(Vu);ou[0]=fr(Ou);for(var Kr=1;Kr<Vu;Kr++)ou[Kr]=fr(ou[Kr-1]+au);return{min:Math.min(zt,(0,T.head)(ou)),max:Math.max(Wt,(0,T.last)(ou)),ticks:ou}}function Mr(zt){var Wt=zt.values,de=zt.tickInterval,Se=zt.tickCount,Ae=Wt;if((0,T.isNumber)(de))return(0,T.filter)(Ae,function(Kr,Fr){return Fr%de==0});var He=zt.min,_r=zt.max;if((0,T.isNil)(He)&&(He=0),(0,T.isNil)(_r)&&(_r=Wt.length-1),(0,T.isNumber)(Se)&&Se<_r-He){var Lr=tr(He,_r,Se,!1,[1,2,5,3,4,7,6,8,9]).ticks,wn=(0,T.filter)(Lr,function(Kr){return Kr>=He&&Kr<=_r});return wn.map(function(Kr){return Wt[Kr]})}return Wt.slice(He,_r+1)}function Xr(zt){var Wt=zt.min,de=zt.max,Se=zt.nice,Ae=zt.tickCount,He=new si;return He.domain([Wt,de]),Se&&He.nice(Ae),He.ticks(Ae)}var Zr=5,tn=Math.sqrt(50),_n=Math.sqrt(10),$n=Math.sqrt(2),si=function(){function zt(){this._domain=[0,1]}return zt.prototype.domain=function(Wt){return Wt?(this._domain=Array.from(Wt,Number),this):this._domain.slice()},zt.prototype.nice=function(Wt){var de,Se;Wt===void 0&&(Wt=Zr);var Ae=this._domain.slice(),He=0,_r=this._domain.length-1,Lr=this._domain[He],wn=this._domain[_r],Kr;return wn<Lr&&(de=[wn,Lr],Lr=de[0],wn=de[1],Se=[_r,He],He=Se[0],_r=Se[1]),Kr=Si(Lr,wn,Wt),Kr>0?(Lr=Math.floor(Lr/Kr)*Kr,wn=Math.ceil(wn/Kr)*Kr,Kr=Si(Lr,wn,Wt)):Kr<0&&(Lr=Math.ceil(Lr*Kr)/Kr,wn=Math.floor(wn*Kr)/Kr,Kr=Si(Lr,wn,Wt)),Kr>0?(Ae[He]=Math.floor(Lr/Kr)*Kr,Ae[_r]=Math.ceil(wn/Kr)*Kr,this.domain(Ae)):Kr<0&&(Ae[He]=Math.ceil(Lr*Kr)/Kr,Ae[_r]=Math.floor(wn*Kr)/Kr,this.domain(Ae)),this},zt.prototype.ticks=function(Wt){return Wt===void 0&&(Wt=Zr),Jr(this._domain[0],this._domain[this._domain.length-1],Wt||Zr)},zt}();function Jr(zt,Wt,de){var Se,Ae=-1,He,_r,Lr;if(Wt=+Wt,zt=+zt,de=+de,zt===Wt&&de>0)return[zt];if((Se=Wt<zt)&&(He=zt,zt=Wt,Wt=He),(Lr=Si(zt,Wt,de))===0||!isFinite(Lr))return[];if(Lr>0)for(zt=Math.ceil(zt/Lr),Wt=Math.floor(Wt/Lr),_r=new Array(He=Math.ceil(Wt-zt+1));++Ae<He;)_r[Ae]=(zt+Ae)*Lr;else for(zt=Math.floor(zt*Lr),Wt=Math.ceil(Wt*Lr),_r=new Array(He=Math.ceil(zt-Wt+1));++Ae<He;)_r[Ae]=(zt-Ae)/Lr;return Se&&_r.reverse(),_r}function Si(zt,Wt,de){var Se=(Wt-zt)/Math.max(0,de),Ae=Math.floor(Math.log(Se)/Math.LN10),He=Se/Math.pow(10,Ae);return Ae>=0?(He>=tn?10:He>=_n?5:He>=$n?2:1)*Math.pow(10,Ae):-Math.pow(10,-Ae)/(He>=tn?10:He>=_n?5:He>=$n?2:1)}function Jn(zt,Wt,de){var Se;return de==="ceil"?Se=Math.ceil(zt/Wt):de==="floor"?Se=Math.floor(zt/Wt):Se=Math.round(zt/Wt),Se*Wt}function yi(zt,Wt,de){var Se=Jn(zt,de,"floor"),Ae=Jn(Wt,de,"ceil");Se=(0,T.fixedBase)(Se,de),Ae=(0,T.fixedBase)(Ae,de);for(var He=[],_r=Se;_r<=Ae;_r=_r+de){var Lr=(0,T.fixedBase)(_r,de);He.push(Lr)}return{min:Se,max:Ae,ticks:He}}function Ka(zt,Wt,de){var Se,Ae=zt.minLimit,He=zt.maxLimit,_r=zt.min,Lr=zt.max,wn=zt.tickCount,Kr=wn===void 0?5:wn,Fr=(0,T.isNil)(Ae)?(0,T.isNil)(Wt)?_r:Wt:Ae,pi=(0,T.isNil)(He)?(0,T.isNil)(de)?Lr:de:He;if(Fr>pi&&(Se=[Fr,pi],pi=Se[0],Fr=Se[1]),Kr<=2)return[Fr,pi];for(var Pi=(pi-Fr)/(Kr-1),ca=[],va=0;va<Kr;va++)ca.push(Fr+Pi*va);return ca}function ki(zt){var Wt=zt.min,de=zt.max,Se=zt.tickInterval,Ae=zt.minLimit,He=zt.maxLimit,_r=Xr(zt);return!(0,T.isNil)(Ae)||!(0,T.isNil)(He)?Ka(zt,(0,T.head)(_r),(0,T.last)(_r)):Se?yi(Wt,de,Se).ticks:_r}function ga(zt){var Wt=zt.min,de=zt.max,Se=zt.tickCount,Ae=zt.nice,He=zt.tickInterval,_r=zt.minLimit,Lr=zt.maxLimit,wn=tr(Wt,de,Se,Ae).ticks;return!(0,T.isNil)(_r)||!(0,T.isNil)(Lr)?Ka(zt,(0,T.head)(wn),(0,T.last)(wn)):He?yi(Wt,de,He).ticks:wn}function ko(zt){var Wt=zt.base,de=zt.tickCount,Se=zt.min,Ae=zt.max,He=zt.values,_r,Lr=je(Wt,Ae);if(Se>0)_r=Math.floor(je(Wt,Se));else{var wn=Cr(He,Wt,Ae);_r=Math.floor(je(Wt,wn))}for(var Kr=Lr-_r,Fr=Math.ceil(Kr/de),pi=[],Pi=_r;Pi<Lr+Fr;Pi=Pi+Fr)pi.push(Math.pow(Wt,Pi));return Se<=0&&pi.unshift(0),pi}function Ci(zt,Wt,de){if(de===void 0&&(de=5),zt===Wt)return{max:Wt,min:zt,ticks:[zt]};var Se=de<0?0:Math.round(de);if(Se===0)return{max:Wt,min:zt,ticks:[]};var Ae=1.5,He=.5+1.5*Ae,_r=Wt-zt,Lr=_r/Se,wn=Math.pow(10,Math.floor(Math.log10(Lr))),Kr=wn;2*wn-Lr<Ae*(Lr-Kr)&&(Kr=2*wn,5*wn-Lr<He*(Lr-Kr)&&(Kr=5*wn,10*wn-Lr<Ae*(Lr-Kr)&&(Kr=10*wn)));for(var Fr=Math.ceil(Wt/Kr),pi=Math.floor(zt/Kr),Pi=Math.max(Fr*Kr,Wt),ca=Math.min(pi*Kr,zt),va=Math.floor((Pi-ca)/Kr)+1,ji=new Array(va),ai=0;ai<va;ai++)ji[ai]=fr(ca+ai*Kr);return{min:ca,max:Pi,ticks:ji}}function po(zt){var Wt=zt.exponent,de=zt.tickCount,Se=Math.ceil(Re(Wt,zt.max)),Ae=Math.floor(Re(Wt,zt.min)),He=Ci(Ae,Se,de).ticks;return He.map(function(_r){var Lr=_r>=0?1:-1;return Math.pow(_r,Wt)*Lr})}function oo(zt,Wt){var de=zt.length*Wt;return Wt===1?zt[zt.length-1]:Wt===0?zt[0]:de%1!=0?zt[Math.ceil(de)-1]:zt.length%2==0?(zt[de-1]+zt[de])/2:zt[de]}function cn(zt){var Wt=zt.tickCount,de=zt.values;if(!de||!de.length)return[];for(var Se=de.slice().sort(function(Lr,wn){return Lr-wn}),Ae=[],He=0;He<Wt;He++){var _r=He/(Wt-1);Ae.push(oo(Se,_r))}return Ae}function vn(zt){var Wt=zt.min,de=zt.max,Se=zt.tickCount,Ae=zt.tickInterval,He=zt.minLimit,_r=zt.maxLimit,Lr=Ci(Wt,de,Se).ticks;return!(0,T.isNil)(He)||!(0,T.isNil)(_r)?Ka(zt,(0,T.head)(Lr),(0,T.last)(Lr)):Ae?yi(Wt,de,Ae).ticks:Lr}function Wo(zt){var Wt=zt.min,de=zt.max,Se=zt.minTickInterval,Ae=zt.tickInterval,He=zt.tickCount;if(Ae)He=Math.ceil((de-Wt)/Ae);else{Ae=Rt(Wt,de,He)[1];var _r=(de-Wt)/Ae,Lr=_r/He;Lr>1&&(Ae=Ae*Math.ceil(Lr)),Se&&Ae<Se&&(Ae=Se)}for(var wn=[],Kr=Wt;Kr<de+Ae;Kr+=Ae)wn.push(Kr);return wn}function mo(zt){var Wt=Mr(zt),de=(0,T.last)(zt.values);return de!==(0,T.last)(Wt)&&Wt.push(de),Wt}function fo(zt){return new Date(zt).getFullYear()}function Po(zt){return new Date(zt,0,1).getTime()}function vi(zt){return new Date(zt).getMonth()}function pa(zt,Wt){var de=fo(zt),Se=fo(Wt),Ae=vi(zt),He=vi(Wt);return(Se-de)*12+(He-Ae)%12}function An(zt,Wt){return new Date(zt,Wt,1).getTime()}function Pe(zt,Wt){return Math.ceil((Wt-zt)/ue)}function Tt(zt,Wt){return Math.ceil((Wt-zt)/Jt)}function ae(zt,Wt){return Math.ceil((Wt-zt)/(60*1e3))}function he(zt){var Wt=zt.min,de=zt.max,Se=zt.minTickInterval,Ae=zt.tickCount,He=zt.tickInterval,_r=[];He||(He=(de-Wt)/Ae,Se&&He<Se&&(He=Se));var Lr=fo(Wt);if(He>$t)for(var wn=fo(de),Kr=Math.ceil(He/$t),Fr=Lr;Fr<=wn+Kr;Fr=Fr+Kr)_r.push(Po(Fr));else if(He>ce)for(var pi=Math.ceil(He/ce),Pi=vi(Wt),ca=pa(Wt,de),Fr=0;Fr<=ca+pi;Fr=Fr+pi)_r.push(An(Lr,Fr+Pi));else if(He>ue)for(var va=new Date(Wt),ji=va.getFullYear(),ai=va.getMonth(),Fe=va.getDate(),er=Math.ceil(He/ue),Ir=Pe(Wt,de),Fr=0;Fr<Ir+er;Fr=Fr+er)_r.push(new Date(ji,ai,Fe+Fr).getTime());else if(He>Jt)for(var va=new Date(Wt),ji=va.getFullYear(),ai=va.getMonth(),er=va.getDate(),hn=va.getHours(),ci=Math.ceil(He/Jt),wa=Tt(Wt,de),Fr=0;Fr<=wa+ci;Fr=Fr+ci)_r.push(new Date(ji,ai,er,hn+Fr).getTime());else if(He>Kt)for(var no=ae(Wt,de),ls=Math.ceil(He/Kt),Fr=0;Fr<=no+ls;Fr=Fr+ls)_r.push(Wt+Fr*Kt);else{var Jo=He;Jo<Xt&&(Jo=Xt);for(var ps=Math.floor(Wt/Xt)*Xt,Ks=Math.ceil((de-Wt)/Xt),Fo=Math.ceil(Jo/Xt),Fr=0;Fr<Ks+Fo;Fr=Fr+Fo)_r.push(ps+Fr*Xt)}return _r.length>=512&&console.warn("Notice: current ticks length("+_r.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+He+") is too small, increase the value to solve the problem!"),_r}U("cat",Mr),U("time-cat",mo),U("wilkinson-extended",ga),U("r-pretty",vn),U("time",Wo),U("time-pretty",he),U("log",ko),U("pow",po),U("quantile",cn),U("d3-linear",ki),Ui("cat",rt),Ui("category",rt),Ui("identity",We),Ui("linear",ve),Ui("log",yn),Ui("pow",la),Ui("time",ln),Ui("timeCat",Yt),Ui("quantize",jn),Ui("quantile",Sa)},49242:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Cache:function(){return Aa},assign:function(){return Gl},augment:function(){return Wu},clamp:function(){return lr},clearAnimationFrame:function(){return Ko},clone:function(){return Ql},contains:function(){return U},debounce:function(){return Nc},deepMix:function(){return ke},difference:function(){return N},each:function(){return ct},endsWith:function(){return Kn},every:function(){return wi},extend:function(){return Gr},filter:function(){return B},find:function(){return dt},findIndex:function(){return vt},firstValue:function(){return ot},fixedBase:function(){return tr},flatten:function(){return rt},flattenDeep:function(){return d},forIn:function(){return Pe},get:function(){return pt},getEllipsisText:function(){return ts},getRange:function(){return Xt},getType:function(){return ji},getWrapBehavior:function(){return qr},group:function(){return fr},groupBy:function(){return Ue},groupToMap:function(){return We},has:function(){return Tt},hasKey:function(){return ae},hasValue:function(){return Wt},head:function(){return yn},identity:function(){return ri},includes:function(){return U},indexOf:function(){return dn},isArguments:function(){return Fe},isArray:function(){return X},isArrayLike:function(){return j},isBoolean:function(){return Ir},isDate:function(){return ci},isDecimal:function(){return tn},isElement:function(){return ou},isEmpty:function(){return Fa},isEqual:function(){return Wi},isEqualWith:function(){return rs},isError:function(){return no},isEven:function(){return $n},isFinite:function(){return ls},isFunction:function(){return O},isInteger:function(){return Jr},isMatch:function(){return Lt},isNegative:function(){return Jn},isNil:function(){return V},isNull:function(){return ps},isNumber:function(){return Xr},isNumberEqual:function(){return Ka},isObject:function(){return K},isObjectLike:function(){return Gt},isOdd:function(){return ga},isPlainObject:function(){return Qt},isPositive:function(){return Ci},isPrototype:function(){return Vs},isRegExp:function(){return zs},isString:function(){return ve},isType:function(){return M},isUndefined:function(){return au},keys:function(){return yt},last:function(){return ui},lowerCase:function(){return Ae},lowerFirst:function(){return _r},map:function(){return Cs},mapValues:function(){return pe},max:function(){return It},maxBy:function(){return po},measureTextWidth:function(){return Ra},memoize:function(){return J},min:function(){return Ht},minBy:function(){return oo},mix:function(){return Gl},mod:function(){return vn},noop:function(){return bn},number2color:function(){return Me},omit:function(){return Ne},parseRadius:function(){return Ze},pick:function(){return ye},pull:function(){return $t},pullAt:function(){return Pt},reduce:function(){return Dt},remove:function(){return ne},requestAnimationFrame:function(){return ds},set:function(){return Ot},size:function(){return qn},some:function(){return to},sortBy:function(){return je},startsWith:function(){return Or},substitute:function(){return wn},throttle:function(){return Ye},toArray:function(){return hr},toDegree:function(){return fo},toInteger:function(){return Po},toRadian:function(){return An},toString:function(){return de},union:function(){return Qr},uniq:function(){return Cr},uniqueId:function(){return Hr},upperCase:function(){return Fr},upperFirst:function(){return Pi},values:function(){return zt},valuesOfKey:function(){return Ee},wrapBehavior:function(){return an}});var T=function(Le){return Le!==null&&typeof Le!="function"&&isFinite(Le.length)},j=T,y=function(Le,gr){return j(Le)?Le.indexOf(gr)>-1:!1},U=y,F=function(Le,gr){if(!j(Le))return Le;for(var Dr=[],on=0;on<Le.length;on++){var Yn=Le[on];gr(Yn,on)&&Dr.push(Yn)}return Dr},B=F,R=function(Le,gr){return gr===void 0&&(gr=[]),B(Le,function(Dr){return!U(gr,Dr)})},N=R,A={}.toString,D=function(Le,gr){return A.call(Le)==="[object "+gr+"]"},M=D,O=function(Le){return M(Le,"Function")},k=function(Le){return Le==null},V=k,X=function(Le){return Array.isArray?Array.isArray(Le):M(Le,"Array")},K=function(Le){var gr=typeof Le;return Le!==null&&gr==="object"||gr==="function"};function q(Le,gr){if(!!Le){var Dr;if(X(Le))for(var on=0,Yn=Le.length;on<Yn&&(Dr=gr(Le[on],on),Dr!==!1);on++);else if(K(Le)){for(var ia in Le)if(Le.hasOwnProperty(ia)&&(Dr=gr(Le[ia],ia),Dr===!1))break}}}var ct=q,_t=Object.keys?function(Le){return Object.keys(Le)}:function(Le){var gr=[];return ct(Le,function(Dr,on){O(Le)&&on==="prototype"||gr.push(on)}),gr},yt=_t;function lt(Le,gr){var Dr=yt(gr),on=Dr.length;if(V(Le))return!on;for(var Yn=0;Yn<on;Yn+=1){var ia=Dr[Yn];if(gr[ia]!==Le[ia]||!(ia in Le))return!1}return!0}var Lt=lt,wt=function(Le){return typeof Le=="object"&&Le!==null},Gt=wt,re=function(Le){if(!Gt(Le)||!M(Le,"Object"))return!1;if(Object.getPrototypeOf(Le)===null)return!0;for(var gr=Le;Object.getPrototypeOf(gr)!==null;)gr=Object.getPrototypeOf(gr);return Object.getPrototypeOf(Le)===gr},Qt=re;function it(Le,gr){if(!X(Le))return null;var Dr;if(O(gr)&&(Dr=gr),Qt(gr)&&(Dr=function(Yn){return Lt(Yn,gr)}),Dr){for(var on=0;on<Le.length;on+=1)if(Dr(Le[on]))return Le[on]}return null}var dt=it;function gt(Le,gr,Dr){Dr===void 0&&(Dr=0);for(var on=Dr;on<Le.length;on++)if(gr(Le[on],on))return on;return-1}var vt=gt,Y=function(Le,gr){for(var Dr=null,on=0;on<Le.length;on++){var Yn=Le[on],ia=Yn[gr];if(!V(ia)){X(ia)?Dr=ia[0]:Dr=ia;break}}return Dr},ot=Y,nt=function(Le){if(!X(Le))return[];for(var gr=[],Dr=0;Dr<Le.length;Dr++)gr=gr.concat(Le[Dr]);return gr},rt=nt,st=function(Le,gr){if(gr===void 0&&(gr=[]),!X(Le))gr.push(Le);else for(var Dr=0;Dr<Le.length;Dr+=1)st(Le[Dr],gr);return gr},d=st,It=function(Le){if(!!X(Le))return Le.reduce(function(gr,Dr){return Math.max(gr,Dr)},Le[0])},Ht=function(Le){if(!!X(Le))return Le.reduce(function(gr,Dr){return Math.min(gr,Dr)},Le[0])},kt=function(Le){var gr=Le.filter(function(vo){return!isNaN(vo)});if(!gr.length)return{min:0,max:0};if(X(Le[0])){for(var Dr=[],on=0;on<Le.length;on++)Dr=Dr.concat(Le[on]);gr=Dr}var Yn=It(gr),ia=Ht(gr);return{min:ia,max:Yn}},Xt=kt,Kt=Array.prototype,Jt=Kt.splice,ue=Kt.indexOf,ce=function(Le){for(var gr=[],Dr=1;Dr<arguments.length;Dr++)gr[Dr-1]=arguments[Dr];for(var on=0;on<gr.length;on++)for(var Yn=gr[on],ia=-1;(ia=ue.call(Le,Yn))>-1;)Jt.call(Le,ia,1);return Le},$t=ce,Ut=Array.prototype.splice,Rt=function(gr,Dr){if(!j(gr))return[];for(var on=gr?Dr.length:0,Yn=on-1;on--;){var ia=void 0,vo=Dr[on];(on===Yn||vo!==ia)&&(ia=vo,Ut.call(gr,vo,1))}return gr},Pt=Rt,Yt=function(Le,gr,Dr){if(!X(Le)&&!Qt(Le))return Le;var on=Dr;return ct(Le,function(Yn,ia){on=gr(on,Yn,ia)}),on},Dt=Yt,Nt=function(Le,gr){var Dr=[];if(!j(Le))return Dr;for(var on=-1,Yn=[],ia=Le.length;++on<ia;){var vo=Le[on];gr(vo,on,Le)&&(Dr.push(vo),Yn.push(on))}return Pt(Le,Yn),Dr},ne=Nt,ve=function(Le){return M(Le,"String")};function Re(Le,gr){var Dr;if(O(gr))Dr=function(Yn,ia){return gr(Yn)-gr(ia)};else{var on=[];ve(gr)?on.push(gr):X(gr)&&(on=gr),Dr=function(Yn,ia){for(var vo=0;vo<on.length;vo+=1){var As=on[vo];if(Yn[As]>ia[As])return 1;if(Yn[As]<ia[As])return-1}return 0}}return Le.sort(Dr),Le}var je=Re;function Cr(Le,gr){gr===void 0&&(gr=new Map);var Dr=[];if(Array.isArray(Le))for(var on=0,Yn=Le.length;on<Yn;on++){var ia=Le[on];gr.has(ia)||(Dr.push(ia),gr.set(ia,!0))}return Dr}var $r=function(){for(var Le=[],gr=0;gr<arguments.length;gr++)Le[gr]=arguments[gr];return Cr([].concat.apply([],Le))},Qr=$r,Ee=function(Le,gr){for(var Dr=[],on={},Yn=0;Yn<Le.length;Yn++){var ia=Le[Yn],vo=ia[gr];if(!V(vo)){X(vo)||(vo=[vo]);for(var As=0;As<vo.length;As++){var Bu=vo[As];on[Bu]||(Dr.push(Bu),on[Bu]=!0)}}}return Dr};function yn(Le){if(j(Le))return Le[0]}function ui(Le){if(j(Le)){var gr=Le;return gr[gr.length-1]}}function la(Le,gr){return X(Le)||ve(Le)?Le[0]===gr:!1}var Or=la;function ln(Le,gr){return X(Le)||ve(Le)?Le[Le.length-1]===gr:!1}var Kn=ln,jn=function(Le,gr){for(var Dr=0;Dr<Le.length;Dr++)if(!gr(Le[Dr],Dr))return!1;return!0},wi=jn,Sa=function(Le,gr){for(var Dr=0;Dr<Le.length;Dr++)if(gr(Le[Dr],Dr))return!0;return!1},to=Sa,qa=Object.prototype.hasOwnProperty;function Ui(Le,gr){if(!gr||!X(Le))return{};for(var Dr={},on=O(gr)?gr:function(As){return As[gr]},Yn,ia=0;ia<Le.length;ia++){var vo=Le[ia];Yn=on(vo),qa.call(Dr,Yn)?Dr[Yn].push(vo):Dr[Yn]=[vo]}return Dr}var Ue=Ui;function We(Le,gr){if(!gr)return{0:Le};if(!O(gr)){var Dr=X(gr)?gr:gr.replace(/\s+/g,"").split("*");gr=function(on){for(var Yn="_",ia=0,vo=Dr.length;ia<vo;ia++)Yn+=on[Dr[ia]]&&on[Dr[ia]].toString();return Yn}}return Ue(Le,gr)}var fr=function(Le,gr){if(!gr)return[Le];var Dr=We(Le,gr),on=[];for(var Yn in Dr)on.push(Dr[Yn]);return on};function Ar(Le,gr){return Le["_wrap_"+gr]}var qr=Ar;function nn(Le,gr){if(Le["_wrap_"+gr])return Le["_wrap_"+gr];var Dr=function(on){Le[gr](on)};return Le["_wrap_"+gr]=Dr,Dr}var an=nn,le={};function fe(Le){var gr=le[Le];if(!gr){for(var Dr=Le.toString(16),on=Dr.length;on<6;on++)Dr="0"+Dr;gr="#"+Dr,le[Le]=gr}return gr}var Me=fe;function Te(Le){var gr=0,Dr=0,on=0,Yn=0;return X(Le)?Le.length===1?gr=Dr=on=Yn=Le[0]:Le.length===2?(gr=on=Le[0],Dr=Yn=Le[1]):Le.length===3?(gr=Le[0],Dr=Yn=Le[1],on=Le[2]):(gr=Le[0],Dr=Le[1],on=Le[2],Yn=Le[3]):gr=Dr=on=Yn=Le,{r1:gr,r2:Dr,r3:on,r4:Yn}}var Ze=Te,or=function(Le,gr,Dr){return Le<gr?gr:Le>Dr?Dr:Le},lr=or,Be=function(Le,gr){var Dr=gr.toString(),on=Dr.indexOf(".");if(on===-1)return Math.round(Le);var Yn=Dr.substr(on+1).length;return Yn>20&&(Yn=20),parseFloat(Le.toFixed(Yn))},tr=Be,Mr=function(Le){return M(Le,"Number")},Xr=Mr,Zr=function(Le){return Xr(Le)&&Le%1!=0},tn=Zr,_n=function(Le){return Xr(Le)&&Le%2==0},$n=_n,si=Number.isInteger?Number.isInteger:function(Le){return Xr(Le)&&Le%1==0},Jr=si,Si=function(Le){return Xr(Le)&&Le<0},Jn=Si,yi=1e-5;function Ka(Le,gr,Dr){return Dr===void 0&&(Dr=yi),Math.abs(Le-gr)<Dr}var ki=function(Le){return Xr(Le)&&Le%2!=0},ga=ki,ko=function(Le){return Xr(Le)&&Le>0},Ci=ko,po=function(Le,gr){if(!!X(Le)){for(var Dr,on=-Infinity,Yn=0;Yn<Le.length;Yn++){var ia=Le[Yn],vo=O(gr)?gr(ia):ia[gr];vo>on&&(Dr=ia,on=vo)}return Dr}},oo=function(Le,gr){if(!!X(Le)){for(var Dr,on=Infinity,Yn=0;Yn<Le.length;Yn++){var ia=Le[Yn],vo=O(gr)?gr(ia):ia[gr];vo<on&&(Dr=ia,on=vo)}return Dr}},cn=function(Le,gr){return(Le%gr+gr)%gr},vn=cn,Wo=180/Math.PI,mo=function(Le){return Wo*Le},fo=mo,Po=parseInt,vi=Math.PI/180,pa=function(Le){return vi*Le},An=pa,Pe=ct,Tt=function(Le,gr){return Le.hasOwnProperty(gr)},ae=Tt,he=Object.values?function(Le){return Object.values(Le)}:function(Le){var gr=[];return ct(Le,function(Dr,on){O(Le)&&on==="prototype"||gr.push(Dr)}),gr},zt=he,Wt=function(Le,gr){return U(zt(Le),gr)},de=function(Le){return V(Le)?"":Le.toString()},Se=function(Le){return de(Le).toLowerCase()},Ae=Se,He=function(Le){var gr=de(Le);return gr.charAt(0).toLowerCase()+gr.substring(1)},_r=He;function Lr(Le,gr){return!Le||!gr?Le:Le.replace(/\\?\{([^{}]+)\}/g,function(Dr,on){return Dr.charAt(0)==="\\"?Dr.slice(1):gr[on]===void 0?"":gr[on]})}var wn=Lr,Kr=function(Le){return de(Le).toUpperCase()},Fr=Kr,pi=function(Le){var gr=de(Le);return gr.charAt(0).toUpperCase()+gr.substring(1)},Pi=pi,ca={}.toString,va=function(Le){return ca.call(Le).replace(/^\[object /,"").replace(/]$/,"")},ji=va,ai=function(Le){return M(Le,"Arguments")},Fe=ai,er=function(Le){return M(Le,"Boolean")},Ir=er,hn=function(Le){return M(Le,"Date")},ci=hn,wa=function(Le){return M(Le,"Error")},no=wa;function ls(Le){return Xr(Le)&&isFinite(Le)}var Jo=function(Le){return Le===null},ps=Jo,Ks=Object.prototype,Fo=function(Le){var gr=Le&&Le.constructor,Dr=typeof gr=="function"&&gr.prototype||Ks;return Le===Dr},Vs=Fo,$s=function(Le){return M(Le,"RegExp")},zs=$s,Ou=function(Le){return Le===void 0},au=Ou,Vu=function(Le){return Le instanceof Element||Le instanceof HTMLDocument},ou=Vu;function ds(Le){var gr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Dr){return setTimeout(Dr,16)};return gr(Le)}function Ko(Le){var gr=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;gr(Le)}function Lu(Le,gr){for(var Dr in gr)gr.hasOwnProperty(Dr)&&Dr!=="constructor"&&gr[Dr]!==void 0&&(Le[Dr]=gr[Dr])}function Gl(Le,gr,Dr,on){return gr&&Lu(Le,gr),Dr&&Lu(Le,Dr),on&&Lu(Le,on),Le}var Du=function(){for(var Le=[],gr=0;gr<arguments.length;gr++)Le[gr]=arguments[gr];for(var Dr=Le[0],on=1;on<Le.length;on++){var Yn=Le[on];O(Yn)&&(Yn=Yn.prototype),Gl(Dr.prototype,Yn)}},Wu=Du,Ul=function(Le){if(typeof Le!="object"||Le===null)return Le;var gr;if(X(Le)){gr=[];for(var Dr=0,on=Le.length;Dr<on;Dr++)typeof Le[Dr]=="object"&&Le[Dr]!=null?gr[Dr]=Ul(Le[Dr]):gr[Dr]=Le[Dr]}else{gr={};for(var Yn in Le)typeof Le[Yn]=="object"&&Le[Yn]!=null?gr[Yn]=Ul(Le[Yn]):gr[Yn]=Le[Yn]}return gr},Ql=Ul;function Ku(Le,gr,Dr){var on;return function(){var Yn=this,ia=arguments,vo=function(){on=null,Dr||Le.apply(Yn,ia)},As=Dr&&!on;clearTimeout(on),on=setTimeout(vo,gr),As&&Le.apply(Yn,ia)}}var Nc=Ku,J=function(Le,gr){if(!O(Le))throw new TypeError("Expected a function");var Dr=function(){for(var on=[],Yn=0;Yn<arguments.length;Yn++)on[Yn]=arguments[Yn];var ia=gr?gr.apply(this,on):on[0],vo=Dr.cache;if(vo.has(ia))return vo.get(ia);var As=Le.apply(this,on);return vo.set(ia,As),As};return Dr.cache=new Map,Dr},Ct=5;function me(Le,gr,Dr,on){Dr=Dr||0,on=on||Ct;for(var Yn in gr)if(gr.hasOwnProperty(Yn)){var ia=gr[Yn];ia!==null&&Qt(ia)?(Qt(Le[Yn])||(Le[Yn]={}),Dr<on?me(Le[Yn],ia,Dr+1,on):Le[Yn]=gr[Yn]):X(ia)?(Le[Yn]=[],Le[Yn]=Le[Yn].concat(ia)):ia!==void 0&&(Le[Yn]=ia)}}var jt=function(Le){for(var gr=[],Dr=1;Dr<arguments.length;Dr++)gr[Dr-1]=arguments[Dr];for(var on=0;on<gr.length;on+=1)me(Le,gr[on]);return Le},ke=jt,ir=function(Le,gr,Dr,on){O(gr)||(Dr=gr,gr=Le,Le=function(){});var Yn=Object.create?function(vo,As){return Object.create(vo,{constructor:{value:As}})}:function(vo,As){function Bu(){}Bu.prototype=vo;var Cl=new Bu;return Cl.constructor=As,Cl},ia=Yn(gr.prototype,Le);return Le.prototype=Gl(ia,Le.prototype),Le.superclass=Yn(gr.prototype,gr),Gl(ia,Dr),Gl(Le,on),Le},Gr=ir,pn=function(Le,gr){if(!j(Le))return-1;var Dr=Array.prototype.indexOf;if(Dr)return Dr.call(Le,gr);for(var on=-1,Yn=0;Yn<Le.length;Yn++)if(Le[Yn]===gr){on=Yn;break}return on},dn=pn,ti=Object.prototype.hasOwnProperty;function Nn(Le){if(V(Le))return!0;if(j(Le))return!Le.length;var gr=ji(Le);if(gr==="Map"||gr==="Set")return!Le.size;if(Vs(Le))return!Object.keys(Le).length;for(var Dr in Le)if(ti.call(Le,Dr))return!1;return!0}var Fa=Nn,Xa=function(Le,gr){if(Le===gr)return!0;if(!Le||!gr||ve(Le)||ve(gr))return!1;if(j(Le)||j(gr)){if(Le.length!==gr.length)return!1;for(var Dr=!0,on=0;on<Le.length&&(Dr=Xa(Le[on],gr[on]),!!Dr);on++);return Dr}if(Gt(Le)||Gt(gr)){var Yn=Object.keys(Le),ia=Object.keys(gr);if(Yn.length!==ia.length)return!1;for(var Dr=!0,on=0;on<Yn.length&&(Dr=Xa(Le[Yn[on]],gr[Yn[on]]),!!Dr);on++);return Dr}return!1},Wi=Xa,rs=function(Le,gr,Dr){return O(Dr)?!!Dr(Le,gr):Wi(Le,gr)},io=function(Le,gr){if(!j(Le))return Le;for(var Dr=[],on=0;on<Le.length;on++){var Yn=Le[on];Dr.push(gr(Yn,on))}return Dr},Cs=io,Ve=function(Le){return Le},pe=function(Le,gr){gr===void 0&&(gr=Ve);var Dr={};return K(Le)&&!V(Le)&&Object.keys(Le).forEach(function(on){Dr[on]=gr(Le[on],on)}),Dr},pt=function(Le,gr,Dr){for(var on=0,Yn=ve(gr)?gr.split("."):gr;Le&&on<Yn.length;)Le=Le[Yn[on++]];return Le===void 0||on<Yn.length?Dr:Le},Ot=function(Le,gr,Dr){var on=Le,Yn=ve(gr)?gr.split("."):gr;return Yn.forEach(function(ia,vo){vo<Yn.length-1?(K(on[ia])||(on[ia]=Xr(Yn[vo+1])?[]:{}),on=on[ia]):on[ia]=Dr}),Le},ee=Object.prototype.hasOwnProperty,ye=function(Le,gr){if(Le===null||!Qt(Le))return{};var Dr={};return ct(gr,function(on){ee.call(Le,on)&&(Dr[on]=Le[on])}),Dr},Ne=function(Le,gr){return Dt(Le,function(Dr,on,Yn){return gr.includes(Yn)||(Dr[Yn]=on),Dr},{})},Ye=function(Le,gr,Dr){var on,Yn,ia,vo,As=0;Dr||(Dr={});var Bu=function(){As=Dr.leading===!1?0:Date.now(),on=null,vo=Le.apply(Yn,ia),on||(Yn=ia=null)},Cl=function(){var Al=Date.now();!As&&Dr.leading===!1&&(As=Al);var zc=gr-(Al-As);return Yn=this,ia=arguments,zc<=0||zc>gr?(on&&(clearTimeout(on),on=null),As=Al,vo=Le.apply(Yn,ia),on||(Yn=ia=null)):!on&&Dr.trailing!==!1&&(on=setTimeout(Bu,zc)),vo};return Cl.cancel=function(){clearTimeout(on),As=0,on=Yn=ia=null},Cl},hr=function(Le){return j(Le)?Array.prototype.slice.call(Le):[]},Er={},Hr=function(Le){return Le=Le||"g",Er[Le]?Er[Le]+=1:Er[Le]=1,Le+Er[Le]},bn=function(){},ri=function(Le){return Le};function qn(Le){return V(Le)?0:j(Le)?Le.length:Object.keys(Le).length}var da=S(37067),Ya,Ra=J(function(Le,gr){gr===void 0&&(gr={});var Dr=gr.fontSize,on=gr.fontFamily,Yn=gr.fontWeight,ia=gr.fontStyle,vo=gr.fontVariant;return Ya||(Ya=document.createElement("canvas").getContext("2d")),Ya.font=[ia,vo,Yn,Dr+"px",on].join(" "),Ya.measureText(ve(Le)?Le:"").width},function(Le,gr){return gr===void 0&&(gr={}),(0,da.__spreadArrays)([Le],zt(gr)).join("")}),ts=function(Le,gr,Dr,on){on===void 0&&(on="...");var Yn=16,ia=Ra(on,Dr),vo=ve(Le)?Le:de(Le),As=gr,Bu=[],Cl,Al;if(Ra(Le,Dr)<=gr)return Le;for(;Cl=vo.substr(0,Yn),Al=Ra(Cl,Dr),!(Al+ia>As&&Al>As);)if(Bu.push(Cl),As-=Al,vo=vo.substr(Yn),!vo)return Bu.join("");for(;Cl=vo.substr(0,1),Al=Ra(Cl,Dr),!(Al+ia>As);)if(Bu.push(Cl),As-=Al,vo=vo.substr(1),!vo)return Bu.join("");return""+Bu.join("")+on},$o=function(){function Le(){this.map={}}return Le.prototype.has=function(gr){return this.map[gr]!==void 0},Le.prototype.get=function(gr,Dr){var on=this.map[gr];return on===void 0?Dr:on},Le.prototype.set=function(gr,Dr){this.map[gr]=Dr},Le.prototype.clear=function(){this.map={}},Le.prototype.delete=function(gr){delete this.map[gr]},Le.prototype.size=function(){return Object.keys(this.map).length},Le}(),Aa=$o},99581:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66974),j=S(46812),y=function(){for(var U=[],F=0;F<arguments.length;F++)U[F]=arguments[F];for(var B=U[0],R=1;R<U.length;R++){var N=U[R];j.default(N)&&(N=N.prototype),T.default(B.prototype,N)}};P.default=y},68039:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(){function T(){this.map={}}return T.prototype.has=function(j){return this.map[j]!==void 0},T.prototype.get=function(j,y){var U=this.map[j];return U===void 0?y:U},T.prototype.set=function(j,y){this.map[j]=y},T.prototype.clear=function(){this.map={}},T.prototype.delete=function(j){delete this.map[j]},T.prototype.size=function(){return Object.keys(this.map).length},T}();P.default=S},37339:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T,j,y){return T<j?j:T>y?y:T};P.default=S},35755:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T){var j=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;j(T)}P.default=S},8289:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=function(y){if(typeof y!="object"||y===null)return y;var U;if(T.default(y)){U=[];for(var F=0,B=y.length;F<B;F++)typeof y[F]=="object"&&y[F]!=null?U[F]=j(y[F]):U[F]=y[F]}else{U={};for(var R in y)typeof y[R]=="object"&&y[R]!=null?U[R]=j(y[R]):U[R]=y[R]}return U};P.default=j},75349:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=function(y,U){return T.default(y)?y.indexOf(U)>-1:!1};P.default=j},79663:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j,y){var U;return function(){var F=this,B=arguments,R=function(){U=null,y||T.apply(F,B)},N=y&&!U;clearTimeout(U),U=setTimeout(R,j),N&&T.apply(F,B)}}P.default=S},90497:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(15907),y=5;function U(B,R,N,A){N=N||0,A=A||y;for(var D in R)if(R.hasOwnProperty(D)){var M=R[D];M!==null&&j.default(M)?(j.default(B[D])||(B[D]={}),N<A?U(B[D],M,N+1,A):B[D]=R[D]):T.default(M)?(B[D]=[],B[D]=B[D].concat(M)):M!==void 0&&(B[D]=M)}}var F=function(B){for(var R=[],N=1;N<arguments.length;N++)R[N-1]=arguments[N];for(var A=0;A<R.length;A+=1)U(B,R[A]);return B};P.default=F},25430:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(40007),j=S(75349),y=function(U,F){return F===void 0&&(F=[]),T.default(U,function(B){return!j.default(F,B)})};P.default=y},27154:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(33643);function y(U,F){if(!!U){var B;if(T.default(U))for(var R=0,N=U.length;R<N&&(B=F(U[R],R),B!==!1);R++);else if(j.default(U)){for(var A in U)if(U.hasOwnProperty(A)&&(B=F(U[A],A),B===!1))break}}}P.default=y},61846:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(21830);function y(U,F){return T.default(U)||j.default(U)?U[U.length-1]===F:!1}P.default=y},8153:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T,j){for(var y=0;y<T.length;y++)if(!j(T[y],y))return!1;return!0};P.default=S},13829:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66974),j=S(46812),y=function(U,F,B,R){j.default(F)||(B=F,F=U,U=function(){});var N=Object.create?function(D,M){return Object.create(D,{constructor:{value:M}})}:function(D,M){function O(){}O.prototype=D;var k=new O;return k.constructor=M,k},A=N(F.prototype,U);return U.prototype=T.default(A,U.prototype),U.superclass=N(F.prototype,F),T.default(A,B),T.default(U,R),U};P.default=y},40007:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=function(y,U){if(!T.default(y))return y;for(var F=[],B=0;B<y.length;B++){var R=y[B];U(R,B)&&F.push(R)}return F};P.default=j},90871:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j,y){y===void 0&&(y=0);for(var U=y;U<T.length;U++)if(j(T[U],U))return U;return-1}P.default=S},32114:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(46812),j=S(20253),y=S(66631),U=S(15907);function F(B,R){if(!y.default(B))return null;var N;if(T.default(R)&&(N=R),U.default(R)&&(N=function(D){return j.default(D,R)}),N){for(var A=0;A<B.length;A+=1)if(N(B[A]))return B[A]}return null}P.default=F},84521:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890),j=S(66631),y=function(U,F){for(var B=null,R=0;R<U.length;R++){var N=U[R],A=N[F];if(!T.default(A)){j.default(A)?B=A[0]:B=A;break}}return B};P.default=y},14266:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T,j){var y=j.toString(),U=y.indexOf(".");if(U===-1)return Math.round(T);var F=y.substr(U+1).length;return F>20&&(F=20),parseFloat(T.toFixed(F))};P.default=S},61917:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=function(y,U){if(U===void 0&&(U=[]),!T.default(y))U.push(y);else for(var F=0;F<y.length;F+=1)j(y[F],U);return U};P.default=j},30267:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=function(y){if(!T.default(y))return[];for(var U=[],F=0;F<y.length;F++)U=U.concat(y[F]);return U};P.default=j},8361:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(27154);P.default=T.default},65616:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(21830),j=S(78127),y=S(13754);P.default=function(U,F,B,R){R===void 0&&(R="...");var N=16,A=y.default(R,B),D=T.default(U)?U:j.default(U),M=F,O=[],k,V;if(y.default(U,B)<=F)return U;for(;k=D.substr(0,N),V=y.default(k,B),!(V+A>M&&V>M);)if(O.push(k),M-=V,D=D.substr(N),!D)return O.join("");for(;k=D.substr(0,1),V=y.default(k,B),!(V+A>M);)if(O.push(k),M-=V,D=D.substr(1),!D)return O.join("");return""+O.join("")+R}},83236:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(14705),y=S(45356),U=function(F){var B=F.filter(function(M){return!isNaN(M)});if(!B.length)return{min:0,max:0};if(T.default(F[0])){for(var R=[],N=0;N<F.length;N++)R=R.concat(F[N]);B=R}var A=j.default(B),D=y.default(B);return{min:D,max:A}};P.default=U},89175:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S={}.toString,T=function(j){return S.call(j).replace(/^\[object /,"").replace(/]$/,"")};P.default=T},71668:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j){return T["_wrap_"+j]}P.default=S},58070:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(21830);P.default=function(j,y,U){for(var F=0,B=T.default(y)?y.split("."):y;j&&F<B.length;)j=j[B[F++]];return j===void 0||F<B.length?U:j}},54544:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(46812),y=Object.prototype.hasOwnProperty;function U(F,B){if(!B||!T.default(F))return{};for(var R={},N=j.default(B)?B:function(O){return O[B]},A,D=0;D<F.length;D++){var M=F[D];A=N(M),y.call(R,A)?R[A].push(M):R[A]=[M]}return R}P.default=U},64725:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(46812),y=S(54544);function U(F,B){if(!B)return{0:F};if(!j.default(B)){var R=T.default(B)?B:B.replace(/\s+/g,"").split("*");B=function(N){for(var A="_",D=0,M=R.length;D<M;D++)A+=N[R[D]]&&N[R[D]].toString();return A}}return y.default(F,B)}P.default=U},93597:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(64725);P.default=function(j,y){if(!y)return[j];var U=T.default(j,y),F=[];for(var B in U)F.push(U[B]);return F}},53138:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(57921);P.default=T.default},99969:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(75349),j=S(91161);P.default=function(y,U){return T.default(j.default(y),U)}},57921:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(S,T){return S.hasOwnProperty(T)}},41169:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102);function j(y){if(T.default(y))return y[0]}P.default=j},80870:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(S){return S}},40035:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=function(y,U){if(!T.default(y))return-1;var F=Array.prototype.indexOf;if(F)return F.call(y,U);for(var B=-1,R=0;R<y.length;R++)if(y[R]===U){B=R;break}return B};P.default=j},50229:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(75349);T={enumerable:!0,get:function(){return j.default}},T={enumerable:!0,get:function(){return j.default}};var y=S(25430);T={enumerable:!0,get:function(){return y.default}};var U=S(32114);T={enumerable:!0,get:function(){return U.default}};var F=S(90871);T={enumerable:!0,get:function(){return F.default}};var B=S(84521);T={enumerable:!0,get:function(){return B.default}};var R=S(30267);T={enumerable:!0,get:function(){return R.default}};var N=S(61917);T={enumerable:!0,get:function(){return N.default}};var A=S(83236);T={enumerable:!0,get:function(){return A.default}};var D=S(5220);T={enumerable:!0,get:function(){return D.default}};var M=S(50779);T={enumerable:!0,get:function(){return M.default}};var O=S(13847);T={enumerable:!0,get:function(){return O.default}};var k=S(89757);T={enumerable:!0,get:function(){return k.default}};var V=S(27599);T={enumerable:!0,get:function(){return V.default}};var X=S(58632);T={enumerable:!0,get:function(){return X.default}};var K=S(12619);T={enumerable:!0,get:function(){return K.default}};var q=S(29208);T={enumerable:!0,get:function(){return q.default}};var ct=S(41169);T={enumerable:!0,get:function(){return ct.default}};var _t=S(95145);T={enumerable:!0,get:function(){return _t.default}};var yt=S(680);T={enumerable:!0,get:function(){return yt.default}};var lt=S(61846);T={enumerable:!0,get:function(){return lt.default}};var Lt=S(40007);T={enumerable:!0,get:function(){return Lt.default}};var wt=S(8153);T={enumerable:!0,get:function(){return wt.default}};var Gt=S(58175);T={enumerable:!0,get:function(){return Gt.default}};var re=S(93597);T={enumerable:!0,get:function(){return re.default}};var Qt=S(54544);T={enumerable:!0,get:function(){return Qt.default}};var it=S(64725);T={enumerable:!0,get:function(){return it.default}};var dt=S(71668);T={enumerable:!0,get:function(){return dt.default}};var gt=S(61262);Object.defineProperty(P,"Ko",{enumerable:!0,get:function(){return gt.default}});var vt=S(45145);T={enumerable:!0,get:function(){return vt.default}};var Y=S(85418);T={enumerable:!0,get:function(){return Y.default}};var ot=S(37339);T={enumerable:!0,get:function(){return ot.default}};var nt=S(14266);T={enumerable:!0,get:function(){return nt.default}};var rt=S(51008);T={enumerable:!0,get:function(){return rt.default}};var st=S(45420);T={enumerable:!0,get:function(){return st.default}};var d=S(68221);T={enumerable:!0,get:function(){return d.default}};var It=S(58706);T={enumerable:!0,get:function(){return It.default}};var Ht=S(39984);T={enumerable:!0,get:function(){return Ht.default}};var kt=S(32705);T={enumerable:!0,get:function(){return kt.default}};var Xt=S(75732);T={enumerable:!0,get:function(){return Xt.default}};var Kt=S(14705);T={enumerable:!0,get:function(){return Kt.default}};var Jt=S(38935);T={enumerable:!0,get:function(){return Jt.default}};var ue=S(45356);T={enumerable:!0,get:function(){return ue.default}};var ce=S(89857);T={enumerable:!0,get:function(){return ce.default}};var $t=S(5253);T={enumerable:!0,get:function(){return $t.default}};var Ut=S(2119);T={enumerable:!0,get:function(){return Ut.default}};var Rt=S(23196);T={enumerable:!0,get:function(){return Rt.default}};var Pt=S(9217);T={enumerable:!0,get:function(){return Pt.default}};var Yt=S(8361);T={enumerable:!0,get:function(){return Yt.default}};var Dt=S(57921);T={enumerable:!0,get:function(){return Dt.default}};var Nt=S(53138);T={enumerable:!0,get:function(){return Nt.default}};var ne=S(99969);T={enumerable:!0,get:function(){return ne.default}};var ve=S(85050);T={enumerable:!0,get:function(){return ve.default}};var Re=S(20253);T={enumerable:!0,get:function(){return Re.default}};var je=S(91161);T={enumerable:!0,get:function(){return je.default}};var Cr=S(88362);T={enumerable:!0,get:function(){return Cr.default}};var $r=S(56095);T={enumerable:!0,get:function(){return $r.default}};var Qr=S(35541);T={enumerable:!0,get:function(){return Qr.default}};var Ee=S(72660);T={enumerable:!0,get:function(){return Ee.default}};var yn=S(85260);T={enumerable:!0,get:function(){return yn.default}};var ui=S(89175);T={enumerable:!0,get:function(){return ui.default}};var la=S(55039);T={enumerable:!0,get:function(){return la.default}};var Or=S(66631);T={enumerable:!0,get:function(){return Or.default}};var ln=S(48102);T={enumerable:!0,get:function(){return ln.default}};var Kn=S(25873);T={enumerable:!0,get:function(){return Kn.default}};var jn=S(79396);T={enumerable:!0,get:function(){return jn.default}};var wi=S(56418);T={enumerable:!0,get:function(){return wi.default}};var Sa=S(46812);T={enumerable:!0,get:function(){return Sa.default}};var to=S(73420);T={enumerable:!0,get:function(){return to.default}};var qa=S(73890);T={enumerable:!0,get:function(){return qa.default}};var Ui=S(85497);T={enumerable:!0,get:function(){return Ui.default}};var Ue=S(16185);T={enumerable:!0,get:function(){return Ue.default}};var We=S(33643);T={enumerable:!0,get:function(){return We.default}};var fr=S(70441);T={enumerable:!0,get:function(){return fr.default}};var Ar=S(15907);T={enumerable:!0,get:function(){return Ar.default}};var qr=S(26296);T={enumerable:!0,get:function(){return qr.default}};var nn=S(7877);T={enumerable:!0,get:function(){return nn.default}};var an=S(21830);Object.defineProperty(P,"HD",{enumerable:!0,get:function(){return an.default}});var le=S(44235);T={enumerable:!0,get:function(){return le.default}};var fe=S(25523);T={enumerable:!0,get:function(){return fe.default}};var Me=S(58417);T={enumerable:!0,get:function(){return Me.default}};var Te=S(98229);T={enumerable:!0,get:function(){return Te.default}};var Ze=S(35755);T={enumerable:!0,get:function(){return Ze.default}};var or=S(99581);T={enumerable:!0,get:function(){return or.default}};var lr=S(8289);Object.defineProperty(P,"d9",{enumerable:!0,get:function(){return lr.default}});var Be=S(79663);T={enumerable:!0,get:function(){return Be.default}};var tr=S(99834);T={enumerable:!0,get:function(){return tr.default}};var Mr=S(90497);Object.defineProperty(P,"b$",{enumerable:!0,get:function(){return Mr.default}});var Xr=S(27154);Object.defineProperty(P,"S6",{enumerable:!0,get:function(){return Xr.default}});var Zr=S(13829);T={enumerable:!0,get:function(){return Zr.default}};var tn=S(40035);T={enumerable:!0,get:function(){return tn.default}};var _n=S(64029);T={enumerable:!0,get:function(){return _n.default}};var $n=S(212);T={enumerable:!0,get:function(){return $n.default}};var si=S(18112);T={enumerable:!0,get:function(){return si.default}};var Jr=S(92693);T={enumerable:!0,get:function(){return Jr.default}};var Si=S(53497);T={enumerable:!0,get:function(){return Si.default}};var Jn=S(66974);T={enumerable:!0,get:function(){return Jn.default}},T={enumerable:!0,get:function(){return Jn.default}};var yi=S(58070);T={enumerable:!0,get:function(){return yi.default}};var Ka=S(64119);T={enumerable:!0,get:function(){return Ka.default}};var ki=S(24263);T={enumerable:!0,get:function(){return ki.default}};var ga=S(14179);T={enumerable:!0,get:function(){return ga.default}};var ko=S(60979);T={enumerable:!0,get:function(){return ko.default}};var Ci=S(66668);T={enumerable:!0,get:function(){return Ci.default}};var po=S(78127);T={enumerable:!0,get:function(){return po.default}};var oo=S(67250);T={enumerable:!0,get:function(){return oo.default}};var cn=S(26851);T={enumerable:!0,get:function(){return cn.default}};var vn=S(80870);T={enumerable:!0,get:function(){return vn.default}};var Wo=S(30597);T={enumerable:!0,get:function(){return Wo.default}};var mo=S(13754);T={enumerable:!0,get:function(){return mo.default}};var fo=S(65616);T={enumerable:!0,get:function(){return fo.default}};var Po=S(68039);T={enumerable:!0,get:function(){return Po.default}}},55039:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"Arguments")};P.default=j},48102:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return T!==null&&typeof T!="function"&&isFinite(T.length)};P.default=S},66631:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235);P.default=function(j){return Array.isArray?Array.isArray(j):T.default(j,"Array")}},25873:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"Boolean")};P.default=j},79396:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"Date")};P.default=j},51008:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=function(y){return T.default(y)&&y%1!=0};P.default=j},58417:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return T instanceof Element||T instanceof HTMLDocument};P.default=S},64029:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890),j=S(48102),y=S(89175),U=S(26296),F=Object.prototype.hasOwnProperty;function B(R){if(T.default(R))return!0;if(j.default(R))return!R.length;var N=y.default(R);if(N==="Map"||N==="Set")return!R.size;if(U.default(R))return!Object.keys(R).length;for(var A in R)if(F.call(R,A))return!1;return!0}P.default=B},18112:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(46812),j=S(212);P.default=function(y,U,F){return T.default(F)?!!F(y,U):j.default(y,U)}},212:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(70441),j=S(48102),y=S(21830),U=function(F,B){if(F===B)return!0;if(!F||!B||y.default(F)||y.default(B))return!1;if(j.default(F)||j.default(B)){if(F.length!==B.length)return!1;for(var R=!0,N=0;N<F.length&&(R=U(F[N],B[N]),!!R);N++);return R}if(T.default(F)||T.default(B)){var A=Object.keys(F),D=Object.keys(B);if(A.length!==D.length)return!1;for(var R=!0,N=0;N<A.length&&(R=U(F[A[N]],B[A[N]]),!!R);N++);return R}return!1};P.default=U},56418:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"Error")};P.default=j},45420:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=function(y){return T.default(y)&&y%2==0};P.default=j},73420:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185);function j(y){return T.default(y)&&isFinite(y)}P.default=j},46812:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235);P.default=function(j){return T.default(j,"Function")}},68221:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=Number.isInteger?Number.isInteger:function(y){return T.default(y)&&y%1==0};P.default=j},20253:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890),j=S(85050);function y(U,F){var B=j.default(F),R=B.length;if(T.default(U))return!R;for(var N=0;N<R;N+=1){var A=B[N];if(F[A]!==U[A]||!(A in U))return!1}return!0}P.default=y},58706:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=function(y){return T.default(y)&&y<0};P.default=j},73890:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return T==null};P.default=S},85497:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return T===null};P.default=S},39984:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=1e-5;function T(j,y,U){return U===void 0&&(U=S),Math.abs(j-y)<U}P.default=T},16185:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"Number")};P.default=j},70441:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return typeof T=="object"&&T!==null};P.default=S},33643:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(S){var T=typeof S;return S!==null&&T==="object"||T==="function"}},32705:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=function(y){return T.default(y)&&y%2!=0};P.default=j},15907:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(70441),j=S(44235),y=function(U){if(!T.default(U)||!j.default(U,"Object"))return!1;if(Object.getPrototypeOf(U)===null)return!0;for(var F=U;Object.getPrototypeOf(F)!==null;)F=Object.getPrototypeOf(F);return Object.getPrototypeOf(U)===F};P.default=y},75732:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(16185),j=function(y){return T.default(y)&&y>0};P.default=j},26296:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=Object.prototype,T=function(j){var y=j&&j.constructor,U=typeof y=="function"&&y.prototype||S;return j===U};P.default=T},7877:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235),j=function(y){return T.default(y,"RegExp")};P.default=j},21830:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(44235);P.default=function(j){return T.default(j,"String")}},44235:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S={}.toString,T=function(j,y){return S.call(j)==="[object "+y+"]"};P.default=T},25523:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T){return T===void 0};P.default=S},85050:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(27154),j=S(46812),y=Object.keys?function(U){return Object.keys(U)}:function(U){var F=[];return T.default(U,function(B,R){j.default(U)&&R==="prototype"||F.push(R)}),F};P.default=y},95145:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102);function j(y){if(T.default(y)){var U=y;return U[U.length-1]}}P.default=j},88362:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(78127),j=function(y){return T.default(y).toLowerCase()};P.default=j},56095:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(78127),j=function(y){var U=T.default(y);return U.charAt(0).toLowerCase()+U.substring(1)};P.default=j},53497:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890),j=S(33643),y=function(U){return U};P.default=function(U,F){F===void 0&&(F=y);var B={};return j.default(U)&&!T.default(U)&&Object.keys(U).forEach(function(R){B[R]=F(U[R],R)}),B}},92693:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=function(y,U){if(!T.default(y))return y;for(var F=[],B=0;B<y.length;B++){var R=y[B];F.push(U(R,B))}return F};P.default=j},38935:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(46812);P.default=function(y,U){if(!!T.default(y)){for(var F,B=-Infinity,R=0;R<y.length;R++){var N=y[R],A=j.default(U)?U(N):N[U];A>B&&(F=N,B=A)}return F}}},14705:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631);P.default=function(j){if(!!T.default(j))return j.reduce(function(y,U){return Math.max(y,U)},j[0])}},13754:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(37067),j=S(91161),y=S(99834),U=S(21830),F;P.default=y.default(function(B,R){R===void 0&&(R={});var N=R.fontSize,A=R.fontFamily,D=R.fontWeight,M=R.fontStyle,O=R.fontVariant;return F||(F=document.createElement("canvas").getContext("2d")),F.font=[M,O,D,N+"px",A].join(" "),F.measureText(U.default(B)?B:"").width},function(B,R){return R===void 0&&(R={}),T.__spreadArrays([B],j.default(R)).join("")})},99834:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(46812);P.default=function(j,y){if(!T.default(j))throw new TypeError("Expected a function");var U=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];var R=y?y.apply(this,F):F[0],N=U.cache;if(N.has(R))return N.get(R);var A=j.apply(this,F);return N.set(R,A),A};return U.cache=new Map,U}},89857:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(46812);P.default=function(y,U){if(!!T.default(y)){for(var F,B=Infinity,R=0;R<y.length;R++){var N=y[R],A=j.default(U)?U(N):N[U];A<B&&(F=N,B=A)}return F}}},45356:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631);P.default=function(j){if(!!T.default(j))return j.reduce(function(y,U){return Math.min(y,U)},j[0])}},66974:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(j,y){for(var U in y)y.hasOwnProperty(U)&&U!=="constructor"&&y[U]!==void 0&&(j[U]=y[U])}function T(j,y,U,F){return y&&S(j,y),U&&S(j,U),F&&S(j,F),j}P.default=T},5253:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T,j){return(T%j+j)%j};P.default=S},26851:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(){}},45145:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S={};function T(j){var y=S[j];if(!y){for(var U=j.toString(16),F=U.length;F<6;F++)U="0"+U;y="#"+U,S[j]=y}return y}P.default=T},14179:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(13847);P.default=function(j,y){return T.default(j,function(U,F,B){return y.includes(B)||(U[B]=F),U},{})}},85418:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631);function j(y){var U=0,F=0,B=0,R=0;return T.default(y)?y.length===1?U=F=B=R=y[0]:y.length===2?(U=B=y[0],F=R=y[1]):y.length===3?(U=y[0],F=R=y[1],B=y[2]):(U=y[0],F=y[1],B=y[2],R=y[3]):U=F=B=R=y,{r1:U,r2:F,r3:B,r4:R}}P.default=j},24263:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(27154),j=S(15907),y=Object.prototype.hasOwnProperty;P.default=function(U,F){if(U===null||!j.default(U))return{};var B={};return T.default(F,function(R){y.call(U,R)&&(B[R]=U[R])}),B}},50779:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=Array.prototype.splice,y=function(F,B){if(!T.default(F))return[];for(var R=F?B.length:0,N=R-1;R--;){var A=void 0,D=B[R];(R===N||D!==A)&&(A=D,j.call(F,D,1))}return F};P.default=y},5220:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=Array.prototype,T=S.splice,j=S.indexOf,y=function(U){for(var F=[],B=1;B<arguments.length;B++)F[B-1]=arguments[B];for(var R=0;R<F.length;R++)for(var N=F[R],A=-1;(A=j.call(U,N))>-1;)T.call(U,A,1);return U};P.default=y},13847:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(27154),j=S(66631),y=S(15907),U=function(F,B,R){if(!j.default(F)&&!y.default(F))return F;var N=R;return T.default(F,function(A,D){N=B(N,A,D)}),N};P.default=U},89757:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102),j=S(50779),y=function(U,F){var B=[];if(!T.default(U))return B;for(var R=-1,N=[],A=U.length;++R<A;){var D=U[R];F(D,R,U)&&(B.push(D),N.push(R))}return j.default(U,N),B};P.default=y},98229:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T){var j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(y){return setTimeout(y,16)};return j(T)}P.default=S},64119:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(33643),j=S(21830),y=S(16185);P.default=function(U,F,B){var R=U,N=j.default(F)?F.split("."):F;return N.forEach(function(A,D){D<N.length-1?(T.default(R[A])||(R[A]=y.default(N[D+1])?[]:{}),R=R[A]):R[A]=B}),U}},30597:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890),j=S(48102);function y(U){return T.default(U)?0:j.default(U)?U.length:Object.keys(U).length}P.default=y},58175:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=function(T,j){for(var y=0;y<T.length;y++)if(j(T[y],y))return!0;return!1};P.default=S},27599:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(21830),y=S(46812);function U(F,B){var R;if(y.default(B))R=function(A,D){return B(A)-B(D)};else{var N=[];j.default(B)?N.push(B):T.default(B)&&(N=B),R=function(A,D){for(var M=0;M<N.length;M+=1){var O=N[M];if(A[O]>D[O])return 1;if(A[O]<D[O])return-1}return 0}}return F.sort(R),F}P.default=U},680:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(21830);function y(U,F){return T.default(U)||j.default(U)?U[0]===F:!1}P.default=y},35541:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j){return!T||!j?T:T.replace(/\\?\{([^{}]+)\}/g,function(y,U){return y.charAt(0)==="\\"?y.slice(1):j[U]===void 0?"":j[U]})}P.default=S},60979:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(S,T,j){var y,U,F,B,R=0;j||(j={});var N=function(){R=j.leading===!1?0:Date.now(),y=null,B=S.apply(U,F),y||(U=F=null)},A=function(){var D=Date.now();!R&&j.leading===!1&&(R=D);var M=T-(D-R);return U=this,F=arguments,M<=0||M>T?(y&&(clearTimeout(y),y=null),R=D,B=S.apply(U,F),y||(U=F=null)):!y&&j.trailing!==!1&&(y=setTimeout(N,M)),B};return A.cancel=function(){clearTimeout(y),R=0,y=U=F=null},A}},66668:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(48102);P.default=function(j){return T.default(j)?Array.prototype.slice.call(j):[]}},2119:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=180/Math.PI,T=function(j){return S*j};P.default=T},23196:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=parseInt},9217:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=Math.PI/180,T=function(j){return S*j};P.default=T},78127:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(73890);P.default=function(j){return T.default(j)?"":j.toString()}},58632:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(12619),j=function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];return T.default([].concat.apply([],y))};P.default=j},12619:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j){j===void 0&&(j=new Map);var y=[];if(Array.isArray(T))for(var U=0,F=T.length;U<F;U++){var B=T[U];j.has(B)||(y.push(B),j.set(B,!0))}return y}P.default=S},67250:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S={};P.default=function(T){return T=T||"g",S[T]?S[T]+=1:S[T]=1,T+S[T]}},72660:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(78127),j=function(y){return T.default(y).toUpperCase()};P.default=j},85260:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(78127),j=function(y){var U=T.default(y);return U.charAt(0).toUpperCase()+U.substring(1)};P.default=j},29208:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(66631),j=S(73890);P.default=function(y,U){for(var F=[],B={},R=0;R<y.length;R++){var N=y[R],A=N[U];if(!j.default(A)){T.default(A)||(A=[A]);for(var D=0;D<A.length;D++){var M=A[D];B[M]||(F.push(M),B[M]=!0)}}}return F}},91161:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var T=S(27154),j=S(46812),y=Object.values?function(U){return Object.values(U)}:function(U){var F=[];return T.default(U,function(B,R){j.default(U)&&R==="prototype"||F.push(B)}),F};P.default=y},61262:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});function S(T,j){if(T["_wrap_"+j])return T["_wrap_"+j];var y=function(U){T[j](U)};return T["_wrap_"+j]=y,y}P.default=S},37067:function(Vt,P,S){"use strict";S.r(P),S.d(P,{__extends:function(){return j},__assign:function(){return y},__rest:function(){return U},__decorate:function(){return F},__param:function(){return B},__metadata:function(){return R},__awaiter:function(){return N},__generator:function(){return A},__createBinding:function(){return D},__exportStar:function(){return M},__values:function(){return O},__read:function(){return k},__spread:function(){return V},__spreadArrays:function(){return X},__spreadArray:function(){return K},__await:function(){return q},__asyncGenerator:function(){return ct},__asyncDelegator:function(){return _t},__asyncValues:function(){return yt},__makeTemplateObject:function(){return lt},__importStar:function(){return wt},__importDefault:function(){return Gt},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return Qt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(it,dt){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var Y in vt)Object.prototype.hasOwnProperty.call(vt,Y)&&(gt[Y]=vt[Y])},T(it,dt)};function j(it,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");T(it,dt);function gt(){this.constructor=it}it.prototype=dt===null?Object.create(dt):(gt.prototype=dt.prototype,new gt)}var y=function(){return y=Object.assign||function(dt){for(var gt,vt=1,Y=arguments.length;vt<Y;vt++){gt=arguments[vt];for(var ot in gt)Object.prototype.hasOwnProperty.call(gt,ot)&&(dt[ot]=gt[ot])}return dt},y.apply(this,arguments)};function U(it,dt){var gt={};for(var vt in it)Object.prototype.hasOwnProperty.call(it,vt)&&dt.indexOf(vt)<0&&(gt[vt]=it[vt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,vt=Object.getOwnPropertySymbols(it);Y<vt.length;Y++)dt.indexOf(vt[Y])<0&&Object.prototype.propertyIsEnumerable.call(it,vt[Y])&&(gt[vt[Y]]=it[vt[Y]]);return gt}function F(it,dt,gt,vt){var Y=arguments.length,ot=Y<3?dt:vt===null?vt=Object.getOwnPropertyDescriptor(dt,gt):vt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,dt,gt,vt);else for(var rt=it.length-1;rt>=0;rt--)(nt=it[rt])&&(ot=(Y<3?nt(ot):Y>3?nt(dt,gt,ot):nt(dt,gt))||ot);return Y>3&&ot&&Object.defineProperty(dt,gt,ot),ot}function B(it,dt){return function(gt,vt){dt(gt,vt,it)}}function R(it,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,dt)}function N(it,dt,gt,vt){function Y(ot){return ot instanceof gt?ot:new gt(function(nt){nt(ot)})}return new(gt||(gt=Promise))(function(ot,nt){function rt(It){try{d(vt.next(It))}catch(Ht){nt(Ht)}}function st(It){try{d(vt.throw(It))}catch(Ht){nt(Ht)}}function d(It){It.done?ot(It.value):Y(It.value).then(rt,st)}d((vt=vt.apply(it,dt||[])).next())})}function A(it,dt){var gt={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},vt,Y,ot,nt;return nt={next:rt(0),throw:rt(1),return:rt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function rt(d){return function(It){return st([d,It])}}function st(d){if(vt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(vt=1,Y&&(ot=d[0]&2?Y.return:d[0]?Y.throw||((ot=Y.return)&&ot.call(Y),0):Y.next)&&!(ot=ot.call(Y,d[1])).done)return ot;switch(Y=0,ot&&(d=[d[0]&2,ot.value]),d[0]){case 0:case 1:ot=d;break;case 4:return gt.label++,{value:d[1],done:!1};case 5:gt.label++,Y=d[1],d=[0];continue;case 7:d=gt.ops.pop(),gt.trys.pop();continue;default:if(ot=gt.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(d[0]===6||d[0]===2)){gt=0;continue}if(d[0]===3&&(!ot||d[1]>ot[0]&&d[1]<ot[3])){gt.label=d[1];break}if(d[0]===6&&gt.label<ot[1]){gt.label=ot[1],ot=d;break}if(ot&&gt.label<ot[2]){gt.label=ot[2],gt.ops.push(d);break}ot[2]&&gt.ops.pop(),gt.trys.pop();continue}d=dt.call(it,gt)}catch(It){d=[6,It],Y=0}finally{vt=ot=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var D=Object.create?function(it,dt,gt,vt){vt===void 0&&(vt=gt),Object.defineProperty(it,vt,{enumerable:!0,get:function(){return dt[gt]}})}:function(it,dt,gt,vt){vt===void 0&&(vt=gt),it[vt]=dt[gt]};function M(it,dt){for(var gt in it)gt!=="default"&&!Object.prototype.hasOwnProperty.call(dt,gt)&&D(dt,it,gt)}function O(it){var dt=typeof Symbol=="function"&&Symbol.iterator,gt=dt&&it[dt],vt=0;if(gt)return gt.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&vt>=it.length&&(it=void 0),{value:it&&it[vt++],done:!it}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(it,dt){var gt=typeof Symbol=="function"&&it[Symbol.iterator];if(!gt)return it;var vt=gt.call(it),Y,ot=[],nt;try{for(;(dt===void 0||dt-- >0)&&!(Y=vt.next()).done;)ot.push(Y.value)}catch(rt){nt={error:rt}}finally{try{Y&&!Y.done&&(gt=vt.return)&&gt.call(vt)}finally{if(nt)throw nt.error}}return ot}function V(){for(var it=[],dt=0;dt<arguments.length;dt++)it=it.concat(k(arguments[dt]));return it}function X(){for(var it=0,dt=0,gt=arguments.length;dt<gt;dt++)it+=arguments[dt].length;for(var vt=Array(it),Y=0,dt=0;dt<gt;dt++)for(var ot=arguments[dt],nt=0,rt=ot.length;nt<rt;nt++,Y++)vt[Y]=ot[nt];return vt}function K(it,dt,gt){if(gt||arguments.length===2)for(var vt=0,Y=dt.length,ot;vt<Y;vt++)(ot||!(vt in dt))&&(ot||(ot=Array.prototype.slice.call(dt,0,vt)),ot[vt]=dt[vt]);return it.concat(ot||Array.prototype.slice.call(dt))}function q(it){return this instanceof q?(this.v=it,this):new q(it)}function ct(it,dt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=gt.apply(it,dt||[]),Y,ot=[];return Y={},nt("next"),nt("throw"),nt("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function nt(kt){vt[kt]&&(Y[kt]=function(Xt){return new Promise(function(Kt,Jt){ot.push([kt,Xt,Kt,Jt])>1||rt(kt,Xt)})})}function rt(kt,Xt){try{st(vt[kt](Xt))}catch(Kt){Ht(ot[0][3],Kt)}}function st(kt){kt.value instanceof q?Promise.resolve(kt.value.v).then(d,It):Ht(ot[0][2],kt)}function d(kt){rt("next",kt)}function It(kt){rt("throw",kt)}function Ht(kt,Xt){kt(Xt),ot.shift(),ot.length&&rt(ot[0][0],ot[0][1])}}function _t(it){var dt,gt;return dt={},vt("next"),vt("throw",function(Y){throw Y}),vt("return"),dt[Symbol.iterator]=function(){return this},dt;function vt(Y,ot){dt[Y]=it[Y]?function(nt){return(gt=!gt)?{value:q(it[Y](nt)),done:Y==="return"}:ot?ot(nt):nt}:ot}}function yt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it[Symbol.asyncIterator],gt;return dt?dt.call(it):(it=typeof O=="function"?O(it):it[Symbol.iterator](),gt={},vt("next"),vt("throw"),vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function vt(ot){gt[ot]=it[ot]&&function(nt){return new Promise(function(rt,st){nt=it[ot](nt),Y(rt,st,nt.done,nt.value)})}}function Y(ot,nt,rt,st){Promise.resolve(st).then(function(d){ot({value:d,done:rt})},nt)}}function lt(it,dt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:dt}):it.raw=dt,it}var Lt=Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt};function wt(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var gt in it)gt!=="default"&&Object.prototype.hasOwnProperty.call(it,gt)&&D(dt,it,gt);return Lt(dt,it),dt}function Gt(it){return it&&it.__esModule?it:{default:it}}function re(it,dt,gt,vt){if(gt==="a"&&!vt)throw new TypeError("Private accessor was defined without a getter");if(typeof dt=="function"?it!==dt||!vt:!dt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?vt:gt==="a"?vt.call(it):vt?vt.value:dt.get(it)}function Qt(it,dt,gt,vt,Y){if(vt==="m")throw new TypeError("Private method is not writable");if(vt==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof dt=="function"?it!==dt||!Y:!dt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return vt==="a"?Y.call(it,gt):Y?Y.value=gt:dt.set(it,gt),gt}},31795:function(Vt,P,S){var T=S(75752);Vt.exports.geometry=j,Vt.exports.ring=U;function j(B){var R=0,N;switch(B.type){case"Polygon":return y(B.coordinates);case"MultiPolygon":for(N=0;N<B.coordinates.length;N++)R+=y(B.coordinates[N]);return R;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(N=0;N<B.geometries.length;N++)R+=j(B.geometries[N]);return R}}function y(B){var R=0;if(B&&B.length>0){R+=Math.abs(U(B[0]));for(var N=1;N<B.length;N++)R-=Math.abs(U(B[N]))}return R}function U(B){var R,N,A,D,M,O,k,V=0,X=B.length;if(X>2){for(k=0;k<X;k++)k===X-2?(D=X-2,M=X-1,O=0):k===X-1?(D=X-1,M=0,O=1):(D=k,M=k+1,O=k+2),R=B[D],N=B[M],A=B[O],V+=(F(A[0])-F(R[0]))*Math.sin(F(N[1]));V=V*T.RADIUS*T.RADIUS/2}return V}function F(B){return B*Math.PI/180}},38163:function(Vt,P,S){var T=S(31795);Vt.exports=j;function j(N,A){switch(N&&N.type||null){case"FeatureCollection":return N.features=N.features.map(y(j,A)),N;case"GeometryCollection":return N.geometries=N.geometries.map(y(j,A)),N;case"Feature":return N.geometry=j(N.geometry,A),N;case"Polygon":case"MultiPolygon":return U(N,A);default:return N}}function y(N,A){return function(D){return N(D,A)}}function U(N,A){return N.type==="Polygon"?N.coordinates=F(N.coordinates,A):N.type==="MultiPolygon"&&(N.coordinates=N.coordinates.map(y(F,A))),N}function F(N,A){A=!!A,N[0]=B(N[0],A);for(var D=1;D<N.length;D++)N[D]=B(N[D],!A);return N}function B(N,A){return R(N)===A?N:N.reverse()}function R(N){return T.ring(N)>=0}},53645:function(){},18067:function(){},81903:function(){},60153:function(Vt,P,S){"use strict";S.r(P),S.d(P,{__extends:function(){return j},__assign:function(){return y},__rest:function(){return U},__decorate:function(){return F},__param:function(){return B},__metadata:function(){return R},__awaiter:function(){return N},__generator:function(){return A},__createBinding:function(){return D},__exportStar:function(){return M},__values:function(){return O},__read:function(){return k},__spread:function(){return V},__spreadArrays:function(){return X},__await:function(){return K},__asyncGenerator:function(){return q},__asyncDelegator:function(){return ct},__asyncValues:function(){return _t},__makeTemplateObject:function(){return yt},__importStar:function(){return lt},__importDefault:function(){return Lt},__classPrivateFieldGet:function(){return wt},__classPrivateFieldSet:function(){return Gt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(Qt,it){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,gt){dt.__proto__=gt}||function(dt,gt){for(var vt in gt)gt.hasOwnProperty(vt)&&(dt[vt]=gt[vt])},T(Qt,it)};function j(re,Qt){T(re,Qt);function it(){this.constructor=re}re.prototype=Qt===null?Object.create(Qt):(it.prototype=Qt.prototype,new it)}var y=function(){return y=Object.assign||function(it){for(var dt,gt=1,vt=arguments.length;gt<vt;gt++){dt=arguments[gt];for(var Y in dt)Object.prototype.hasOwnProperty.call(dt,Y)&&(it[Y]=dt[Y])}return it},y.apply(this,arguments)};function U(re,Qt){var it={};for(var dt in re)Object.prototype.hasOwnProperty.call(re,dt)&&Qt.indexOf(dt)<0&&(it[dt]=re[dt]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var gt=0,dt=Object.getOwnPropertySymbols(re);gt<dt.length;gt++)Qt.indexOf(dt[gt])<0&&Object.prototype.propertyIsEnumerable.call(re,dt[gt])&&(it[dt[gt]]=re[dt[gt]]);return it}function F(re,Qt,it,dt){var gt=arguments.length,vt=gt<3?Qt:dt===null?dt=Object.getOwnPropertyDescriptor(Qt,it):dt,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(re,Qt,it,dt);else for(var ot=re.length-1;ot>=0;ot--)(Y=re[ot])&&(vt=(gt<3?Y(vt):gt>3?Y(Qt,it,vt):Y(Qt,it))||vt);return gt>3&&vt&&Object.defineProperty(Qt,it,vt),vt}function B(re,Qt){return function(it,dt){Qt(it,dt,re)}}function R(re,Qt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(re,Qt)}function N(re,Qt,it,dt){function gt(vt){return vt instanceof it?vt:new it(function(Y){Y(vt)})}return new(it||(it=Promise))(function(vt,Y){function ot(st){try{rt(dt.next(st))}catch(d){Y(d)}}function nt(st){try{rt(dt.throw(st))}catch(d){Y(d)}}function rt(st){st.done?vt(st.value):gt(st.value).then(ot,nt)}rt((dt=dt.apply(re,Qt||[])).next())})}function A(re,Qt){var it={label:0,sent:function(){if(vt[0]&1)throw vt[1];return vt[1]},trys:[],ops:[]},dt,gt,vt,Y;return Y={next:ot(0),throw:ot(1),return:ot(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function ot(rt){return function(st){return nt([rt,st])}}function nt(rt){if(dt)throw new TypeError("Generator is already executing.");for(;it;)try{if(dt=1,gt&&(vt=rt[0]&2?gt.return:rt[0]?gt.throw||((vt=gt.return)&&vt.call(gt),0):gt.next)&&!(vt=vt.call(gt,rt[1])).done)return vt;switch(gt=0,vt&&(rt=[rt[0]&2,vt.value]),rt[0]){case 0:case 1:vt=rt;break;case 4:return it.label++,{value:rt[1],done:!1};case 5:it.label++,gt=rt[1],rt=[0];continue;case 7:rt=it.ops.pop(),it.trys.pop();continue;default:if(vt=it.trys,!(vt=vt.length>0&&vt[vt.length-1])&&(rt[0]===6||rt[0]===2)){it=0;continue}if(rt[0]===3&&(!vt||rt[1]>vt[0]&&rt[1]<vt[3])){it.label=rt[1];break}if(rt[0]===6&&it.label<vt[1]){it.label=vt[1],vt=rt;break}if(vt&&it.label<vt[2]){it.label=vt[2],it.ops.push(rt);break}vt[2]&&it.ops.pop(),it.trys.pop();continue}rt=Qt.call(re,it)}catch(st){rt=[6,st],gt=0}finally{dt=vt=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}}function D(re,Qt,it,dt){dt===void 0&&(dt=it),re[dt]=Qt[it]}function M(re,Qt){for(var it in re)it!=="default"&&!Qt.hasOwnProperty(it)&&(Qt[it]=re[it])}function O(re){var Qt=typeof Symbol=="function"&&Symbol.iterator,it=Qt&&re[Qt],dt=0;if(it)return it.call(re);if(re&&typeof re.length=="number")return{next:function(){return re&&dt>=re.length&&(re=void 0),{value:re&&re[dt++],done:!re}}};throw new TypeError(Qt?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(re,Qt){var it=typeof Symbol=="function"&&re[Symbol.iterator];if(!it)return re;var dt=it.call(re),gt,vt=[],Y;try{for(;(Qt===void 0||Qt-- >0)&&!(gt=dt.next()).done;)vt.push(gt.value)}catch(ot){Y={error:ot}}finally{try{gt&&!gt.done&&(it=dt.return)&&it.call(dt)}finally{if(Y)throw Y.error}}return vt}function V(){for(var re=[],Qt=0;Qt<arguments.length;Qt++)re=re.concat(k(arguments[Qt]));return re}function X(){for(var re=0,Qt=0,it=arguments.length;Qt<it;Qt++)re+=arguments[Qt].length;for(var dt=Array(re),gt=0,Qt=0;Qt<it;Qt++)for(var vt=arguments[Qt],Y=0,ot=vt.length;Y<ot;Y++,gt++)dt[gt]=vt[Y];return dt}function K(re){return this instanceof K?(this.v=re,this):new K(re)}function q(re,Qt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=it.apply(re,Qt||[]),gt,vt=[];return gt={},Y("next"),Y("throw"),Y("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function Y(It){dt[It]&&(gt[It]=function(Ht){return new Promise(function(kt,Xt){vt.push([It,Ht,kt,Xt])>1||ot(It,Ht)})})}function ot(It,Ht){try{nt(dt[It](Ht))}catch(kt){d(vt[0][3],kt)}}function nt(It){It.value instanceof K?Promise.resolve(It.value.v).then(rt,st):d(vt[0][2],It)}function rt(It){ot("next",It)}function st(It){ot("throw",It)}function d(It,Ht){It(Ht),vt.shift(),vt.length&&ot(vt[0][0],vt[0][1])}}function ct(re){var Qt,it;return Qt={},dt("next"),dt("throw",function(gt){throw gt}),dt("return"),Qt[Symbol.iterator]=function(){return this},Qt;function dt(gt,vt){Qt[gt]=re[gt]?function(Y){return(it=!it)?{value:K(re[gt](Y)),done:gt==="return"}:vt?vt(Y):Y}:vt}}function _t(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qt=re[Symbol.asyncIterator],it;return Qt?Qt.call(re):(re=typeof O=="function"?O(re):re[Symbol.iterator](),it={},dt("next"),dt("throw"),dt("return"),it[Symbol.asyncIterator]=function(){return this},it);function dt(vt){it[vt]=re[vt]&&function(Y){return new Promise(function(ot,nt){Y=re[vt](Y),gt(ot,nt,Y.done,Y.value)})}}function gt(vt,Y,ot,nt){Promise.resolve(nt).then(function(rt){vt({value:rt,done:ot})},Y)}}function yt(re,Qt){return Object.defineProperty?Object.defineProperty(re,"raw",{value:Qt}):re.raw=Qt,re}function lt(re){if(re&&re.__esModule)return re;var Qt={};if(re!=null)for(var it in re)Object.hasOwnProperty.call(re,it)&&(Qt[it]=re[it]);return Qt.default=re,Qt}function Lt(re){return re&&re.__esModule?re:{default:re}}function wt(re,Qt){if(!Qt.has(re))throw new TypeError("attempted to get private field on non-instance");return Qt.get(re)}function Gt(re,Qt,it){if(!Qt.has(re))throw new TypeError("attempted to set private field on non-instance");return Qt.set(re,it),it}},33860:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return Y}});var T=S(96156),j=S(22122),y=S(90484),U=S(67294),F=S(94184),B=S.n(F),R=function(nt){var rt=nt.prefixCls,st=nt.className,d=nt.width,It=nt.style;return U.createElement("h3",{className:B()(rt,st),style:(0,j.Z)({width:d},It)})},N=R,A=S(85061),D=function(nt){var rt=function(Kt){var Jt=nt.width,ue=nt.rows,ce=ue===void 0?2:ue;if(Array.isArray(Jt))return Jt[Kt];if(ce-1===Kt)return Jt},st=nt.prefixCls,d=nt.className,It=nt.style,Ht=nt.rows,kt=(0,A.Z)(Array(Ht)).map(function(Xt,Kt){return U.createElement("li",{key:Kt,style:{width:rt(Kt)}})});return U.createElement("ul",{className:B()(st,d),style:It},kt)},M=D,O=S(86032),k=function(nt){var rt,st,d=nt.prefixCls,It=nt.className,Ht=nt.style,kt=nt.size,Xt=nt.shape,Kt=B()((rt={},(0,T.Z)(rt,"".concat(d,"-lg"),kt==="large"),(0,T.Z)(rt,"".concat(d,"-sm"),kt==="small"),rt)),Jt=B()((st={},(0,T.Z)(st,"".concat(d,"-circle"),Xt==="circle"),(0,T.Z)(st,"".concat(d,"-square"),Xt==="square"),(0,T.Z)(st,"".concat(d,"-round"),Xt==="round"),st)),ue=typeof kt=="number"?{width:kt,height:kt,lineHeight:"".concat(kt,"px")}:{};return U.createElement("span",{className:B()(d,Kt,Jt,It),style:(0,j.Z)((0,j.Z)({},ue),Ht)})},V=k,X=S(98423),K=function(nt){var rt=function(d){var It=d.getPrefixCls,Ht=nt.prefixCls,kt=nt.className,Xt=nt.active,Kt=It("skeleton",Ht),Jt=(0,X.Z)(nt,["prefixCls","className"]),ue=B()(Kt,"".concat(Kt,"-element"),(0,T.Z)({},"".concat(Kt,"-active"),Xt),kt);return U.createElement("div",{className:ue},U.createElement(V,(0,j.Z)({prefixCls:"".concat(Kt,"-avatar")},Jt)))};return U.createElement(O.C,null,rt)};K.defaultProps={size:"default",shape:"circle"};var q=K,ct=function(nt){var rt=function(d){var It,Ht=d.getPrefixCls,kt=nt.prefixCls,Xt=nt.className,Kt=nt.active,Jt=nt.block,ue=Jt===void 0?!1:Jt,ce=Ht("skeleton",kt),$t=(0,X.Z)(nt,["prefixCls"]),Ut=B()(ce,"".concat(ce,"-element"),(It={},(0,T.Z)(It,"".concat(ce,"-active"),Kt),(0,T.Z)(It,"".concat(ce,"-block"),ue),It),Xt);return U.createElement("div",{className:Ut},U.createElement(V,(0,j.Z)({prefixCls:"".concat(ce,"-button")},$t)))};return U.createElement(O.C,null,rt)};ct.defaultProps={size:"default"};var _t=ct,yt=function(nt){var rt=function(d){var It=d.getPrefixCls,Ht=nt.prefixCls,kt=nt.className,Xt=nt.active,Kt=It("skeleton",Ht),Jt=(0,X.Z)(nt,["prefixCls"]),ue=B()(Kt,"".concat(Kt,"-element"),(0,T.Z)({},"".concat(Kt,"-active"),Xt),kt);return U.createElement("div",{className:ue},U.createElement(V,(0,j.Z)({prefixCls:"".concat(Kt,"-input")},Jt)))};return U.createElement(O.C,null,rt)};yt.defaultProps={size:"default"};var lt=yt,Lt="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",wt=function(nt){var rt=function(d){var It=d.getPrefixCls,Ht=nt.prefixCls,kt=nt.className,Xt=nt.style,Kt=It("skeleton",Ht),Jt=B()(Kt,"".concat(Kt,"-element"),kt);return U.createElement("div",{className:Jt},U.createElement("div",{className:B()("".concat(Kt,"-image"),kt),style:Xt},U.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(Kt,"-image-svg")},U.createElement("path",{d:Lt,className:"".concat(Kt,"-image-path")}))))};return U.createElement(O.C,null,rt)},Gt=wt;function re(ot){return ot&&(0,y.Z)(ot)==="object"?ot:{}}function Qt(ot,nt){return ot&&!nt?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function it(ot,nt){return!ot&&nt?{width:"38%"}:ot&&nt?{width:"50%"}:{}}function dt(ot,nt){var rt={};return(!ot||!nt)&&(rt.width="61%"),!ot&&nt?rt.rows=3:rt.rows=2,rt}var gt=function(nt){var rt=function(d){var It=d.getPrefixCls,Ht=d.direction,kt=nt.prefixCls,Xt=nt.loading,Kt=nt.className,Jt=nt.style,ue=nt.children,ce=nt.avatar,$t=nt.title,Ut=nt.paragraph,Rt=nt.active,Pt=nt.round,Yt=It("skeleton",kt);if(Xt||!("loading"in nt)){var Dt,Nt=!!ce,ne=!!$t,ve=!!Ut,Re;if(Nt){var je=(0,j.Z)((0,j.Z)({prefixCls:"".concat(Yt,"-avatar")},Qt(ne,ve)),re(ce));Re=U.createElement("div",{className:"".concat(Yt,"-header")},U.createElement(V,je))}var Cr;if(ne||ve){var $r;if(ne){var Qr=(0,j.Z)((0,j.Z)({prefixCls:"".concat(Yt,"-title")},it(Nt,ve)),re($t));$r=U.createElement(N,Qr)}var Ee;if(ve){var yn=(0,j.Z)((0,j.Z)({prefixCls:"".concat(Yt,"-paragraph")},dt(Nt,ne)),re(Ut));Ee=U.createElement(M,yn)}Cr=U.createElement("div",{className:"".concat(Yt,"-content")},$r,Ee)}var ui=B()(Yt,(Dt={},(0,T.Z)(Dt,"".concat(Yt,"-with-avatar"),Nt),(0,T.Z)(Dt,"".concat(Yt,"-active"),Rt),(0,T.Z)(Dt,"".concat(Yt,"-rtl"),Ht==="rtl"),(0,T.Z)(Dt,"".concat(Yt,"-round"),Pt),Dt),Kt);return U.createElement("div",{className:ui,style:Jt},Re,Cr)}return ue};return U.createElement(O.C,null,rt)};gt.defaultProps={avatar:!1,title:!0,paragraph:!0},gt.Button=_t,gt.Avatar=q,gt.Input=lt,gt.Image=Gt;var vt=gt,Y=vt},71748:function(Vt,P,S){"use strict";var T=S(38663),j=S.n(T),y=S(18067),U=S.n(y)},7277:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return vt}});var T=S(96156),j=S(22122),y=S(67294),U=S(94184),F=S.n(U),B=S(86032),R=S(33860),N=S(11726),A=S.n(N),D=function(ot){var nt=ot.value,rt=ot.formatter,st=ot.precision,d=ot.decimalSeparator,It=ot.groupSeparator,Ht=It===void 0?"":It,kt=ot.prefixCls,Xt;if(typeof rt=="function")Xt=rt(nt);else{var Kt=String(nt),Jt=Kt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Jt||Kt==="-")Xt=Kt;else{var ue=Jt[1],ce=Jt[2]||"0",$t=Jt[4]||"";ce=ce.replace(/\B(?=(\d{3})+(?!\d))/g,Ht),typeof st=="number"&&($t=A()($t,st,"0").slice(0,st)),$t&&($t="".concat(d).concat($t)),Xt=[y.createElement("span",{key:"int",className:"".concat(kt,"-content-value-int")},ue,ce),$t&&y.createElement("span",{key:"decimal",className:"".concat(kt,"-content-value-decimal")},$t)]}}return y.createElement("span",{className:"".concat(kt,"-content-value")},Xt)},M=D,O=function(ot){var nt=ot.prefixCls,rt=ot.className,st=ot.style,d=ot.valueStyle,It=ot.value,Ht=It===void 0?0:It,kt=ot.title,Xt=ot.valueRender,Kt=ot.prefix,Jt=ot.suffix,ue=ot.loading,ce=ot.direction,$t=ot.onMouseEnter,Ut=ot.onMouseLeave,Rt=y.createElement(M,(0,j.Z)({},ot,{value:Ht})),Pt=F()(nt,(0,T.Z)({},"".concat(nt,"-rtl"),ce==="rtl"),rt);return y.createElement("div",{className:Pt,style:st,onMouseEnter:$t,onMouseLeave:Ut},kt&&y.createElement("div",{className:"".concat(nt,"-title")},kt),y.createElement(R.Z,{paragraph:!1,loading:ue},y.createElement("div",{style:d,className:"".concat(nt,"-content")},Kt&&y.createElement("span",{className:"".concat(nt,"-content-prefix")},Kt),Xt?Xt(Rt):Rt,Jt&&y.createElement("span",{className:"".concat(nt,"-content-suffix")},Jt))))};O.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var k=(0,B.PG)({prefixCls:"statistic"})(O),V=k,X=S(6610),K=S(5991),q=S(10379),ct=S(60446),_t=S(28481),yt=S(32475),lt=S.n(yt),Lt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function wt(Y,ot){var nt=Y,rt=/\[[^\]]*]/g,st=(ot.match(rt)||[]).map(function(kt){return kt.slice(1,-1)}),d=ot.replace(rt,"[]"),It=Lt.reduce(function(kt,Xt){var Kt=(0,_t.Z)(Xt,2),Jt=Kt[0],ue=Kt[1];if(kt.indexOf(Jt)!==-1){var ce=Math.floor(nt/ue);return nt-=ce*ue,kt.replace(new RegExp("".concat(Jt,"+"),"g"),function($t){var Ut=$t.length;return lt()(ce.toString(),Ut,"0")})}return kt},d),Ht=0;return It.replace(rt,function(){var kt=st[Ht];return Ht+=1,kt})}function Gt(Y,ot){var nt=ot.format,rt=nt===void 0?"":nt,st=new Date(Y).getTime(),d=Date.now(),It=Math.max(st-d,0);return wt(It,rt)}var re=S(96159),Qt=1e3/30;function it(Y){return new Date(Y).getTime()}var dt=function(Y){(0,q.Z)(nt,Y);var ot=(0,ct.Z)(nt);function nt(){var rt;return(0,X.Z)(this,nt),rt=ot.apply(this,arguments),rt.syncTimer=function(){var st=rt.props.value,d=it(st);d>=Date.now()?rt.startTimer():rt.stopTimer()},rt.startTimer=function(){if(!rt.countdownId){var st=rt.props,d=st.onChange,It=st.value,Ht=it(It);rt.countdownId=window.setInterval(function(){rt.forceUpdate(),d&&Ht>Date.now()&&d(Ht-Date.now())},Qt)}},rt.stopTimer=function(){var st=rt.props,d=st.onFinish,It=st.value;if(rt.countdownId){clearInterval(rt.countdownId),rt.countdownId=void 0;var Ht=it(It);d&&Ht<Date.now()&&d()}},rt.formatCountdown=function(st,d){var It=rt.props.format;return Gt(st,(0,j.Z)((0,j.Z)({},d),{format:It}))},rt.valueRender=function(st){return(0,re.Tm)(st,{title:void 0})},rt}return(0,K.Z)(nt,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return y.createElement(V,(0,j.Z)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),nt}(y.Component);dt.defaultProps={format:"HH:mm:ss"};var gt=dt;V.Countdown=gt;var vt=V},95300:function(Vt,P,S){"use strict";var T=S(38663),j=S.n(T),y=S(81903),U=S.n(y),F=S(71748)},8874:function(Vt){"use strict";Vt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Vt,P,S){var T=S(8874),j=S(86851),y=Object.hasOwnProperty,U={};for(var F in T)y.call(T,F)&&(U[T[F]]=F);var B=Vt.exports={to:{},get:{}};B.get=function(A){var D=A.substring(0,3).toLowerCase(),M,O;switch(D){case"hsl":M=B.get.hsl(A),O="hsl";break;case"hwb":M=B.get.hwb(A),O="hwb";break;default:M=B.get.rgb(A),O="rgb";break}return M?{model:O,value:M}:null},B.get.rgb=function(A){if(!A)return null;var D=/^#([a-f0-9]{3,4})$/i,M=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,O=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,k=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,V=/^(\w+)$/,X=[0,0,0,1],K,q,ct;if(K=A.match(M)){for(ct=K[2],K=K[1],q=0;q<3;q++){var _t=q*2;X[q]=parseInt(K.slice(_t,_t+2),16)}ct&&(X[3]=parseInt(ct,16)/255)}else if(K=A.match(D)){for(K=K[1],ct=K[3],q=0;q<3;q++)X[q]=parseInt(K[q]+K[q],16);ct&&(X[3]=parseInt(ct+ct,16)/255)}else if(K=A.match(O)){for(q=0;q<3;q++)X[q]=parseInt(K[q+1],0);K[4]&&(K[5]?X[3]=parseFloat(K[4])*.01:X[3]=parseFloat(K[4]))}else if(K=A.match(k)){for(q=0;q<3;q++)X[q]=Math.round(parseFloat(K[q+1])*2.55);K[4]&&(K[5]?X[3]=parseFloat(K[4])*.01:X[3]=parseFloat(K[4]))}else return(K=A.match(V))?K[1]==="transparent"?[0,0,0,0]:y.call(T,K[1])?(X=T[K[1]],X[3]=1,X):null:null;for(q=0;q<3;q++)X[q]=R(X[q],0,255);return X[3]=R(X[3],0,1),X},B.get.hsl=function(A){if(!A)return null;var D=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,M=A.match(D);if(M){var O=parseFloat(M[4]),k=(parseFloat(M[1])%360+360)%360,V=R(parseFloat(M[2]),0,100),X=R(parseFloat(M[3]),0,100),K=R(isNaN(O)?1:O,0,1);return[k,V,X,K]}return null},B.get.hwb=function(A){if(!A)return null;var D=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,M=A.match(D);if(M){var O=parseFloat(M[4]),k=(parseFloat(M[1])%360+360)%360,V=R(parseFloat(M[2]),0,100),X=R(parseFloat(M[3]),0,100),K=R(isNaN(O)?1:O,0,1);return[k,V,X,K]}return null},B.to.hex=function(){var A=j(arguments);return"#"+N(A[0])+N(A[1])+N(A[2])+(A[3]<1?N(Math.round(A[3]*255)):"")},B.to.rgb=function(){var A=j(arguments);return A.length<4||A[3]===1?"rgb("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+")":"rgba("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+", "+A[3]+")"},B.to.rgb.percent=function(){var A=j(arguments),D=Math.round(A[0]/255*100),M=Math.round(A[1]/255*100),O=Math.round(A[2]/255*100);return A.length<4||A[3]===1?"rgb("+D+"%, "+M+"%, "+O+"%)":"rgba("+D+"%, "+M+"%, "+O+"%, "+A[3]+")"},B.to.hsl=function(){var A=j(arguments);return A.length<4||A[3]===1?"hsl("+A[0]+", "+A[1]+"%, "+A[2]+"%)":"hsla("+A[0]+", "+A[1]+"%, "+A[2]+"%, "+A[3]+")"},B.to.hwb=function(){var A=j(arguments),D="";return A.length>=4&&A[3]!==1&&(D=", "+A[3]),"hwb("+A[0]+", "+A[1]+"%, "+A[2]+"%"+D+")"},B.to.keyword=function(A){return U[A.slice(0,3)]};function R(A,D,M){return Math.min(Math.max(D,A),M)}function N(A){var D=Math.round(A).toString(16).toUpperCase();return D.length<2?"0"+D:D}},6767:function(Vt,P,S){"use strict";var T=S(19818),j=S(80978),y=[].slice,U=["keyword","gray","hex"],F={};Object.keys(j).forEach(function(V){F[y.call(j[V].labels).sort().join("")]=V});var B={};function R(V,X){if(!(this instanceof R))return new R(V,X);if(X&&X in U&&(X=null),X&&!(X in j))throw new Error("Unknown model: "+X);var K,q;if(V==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(V instanceof R)this.model=V.model,this.color=V.color.slice(),this.valpha=V.valpha;else if(typeof V=="string"){var ct=T.get(V);if(ct===null)throw new Error("Unable to parse color from string: "+V);this.model=ct.model,q=j[this.model].channels,this.color=ct.value.slice(0,q),this.valpha=typeof ct.value[q]=="number"?ct.value[q]:1}else if(V.length){this.model=X||"rgb",q=j[this.model].channels;var _t=y.call(V,0,q);this.color=k(_t,q),this.valpha=typeof V[q]=="number"?V[q]:1}else if(typeof V=="number")V&=16777215,this.model="rgb",this.color=[V>>16&255,V>>8&255,V&255],this.valpha=1;else{this.valpha=1;var yt=Object.keys(V);"alpha"in V&&(yt.splice(yt.indexOf("alpha"),1),this.valpha=typeof V.alpha=="number"?V.alpha:0);var lt=yt.sort().join("");if(!(lt in F))throw new Error("Unable to parse color from object: "+JSON.stringify(V));this.model=F[lt];var Lt=j[this.model].labels,wt=[];for(K=0;K<Lt.length;K++)wt.push(V[Lt[K]]);this.color=k(wt)}if(B[this.model])for(q=j[this.model].channels,K=0;K<q;K++){var Gt=B[this.model][K];Gt&&(this.color[K]=Gt(this.color[K]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}R.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(V){var X=this.model in T.to?this:this.rgb();X=X.round(typeof V=="number"?V:1);var K=X.valpha===1?X.color:X.color.concat(this.valpha);return T.to[X.model](K)},percentString:function(V){var X=this.rgb().round(typeof V=="number"?V:1),K=X.valpha===1?X.color:X.color.concat(this.valpha);return T.to.rgb.percent(K)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var V={},X=j[this.model].channels,K=j[this.model].labels,q=0;q<X;q++)V[K[q]]=this.color[q];return this.valpha!==1&&(V.alpha=this.valpha),V},unitArray:function(){var V=this.rgb().color;return V[0]/=255,V[1]/=255,V[2]/=255,this.valpha!==1&&V.push(this.valpha),V},unitObject:function(){var V=this.rgb().object();return V.r/=255,V.g/=255,V.b/=255,this.valpha!==1&&(V.alpha=this.valpha),V},round:function(V){return V=Math.max(V||0,0),new R(this.color.map(A(V)).concat(this.valpha),this.model)},alpha:function(V){return arguments.length?new R(this.color.concat(Math.max(0,Math.min(1,V))),this.model):this.valpha},red:D("rgb",0,M(255)),green:D("rgb",1,M(255)),blue:D("rgb",2,M(255)),hue:D(["hsl","hsv","hsl","hwb","hcg"],0,function(V){return(V%360+360)%360}),saturationl:D("hsl",1,M(100)),lightness:D("hsl",2,M(100)),saturationv:D("hsv",1,M(100)),value:D("hsv",2,M(100)),chroma:D("hcg",1,M(100)),gray:D("hcg",2,M(100)),white:D("hwb",1,M(100)),wblack:D("hwb",2,M(100)),cyan:D("cmyk",0,M(100)),magenta:D("cmyk",1,M(100)),yellow:D("cmyk",2,M(100)),black:D("cmyk",3,M(100)),x:D("xyz",0,M(100)),y:D("xyz",1,M(100)),z:D("xyz",2,M(100)),l:D("lab",0,M(100)),a:D("lab",1),b:D("lab",2),keyword:function(V){return arguments.length?new R(V):j[this.model].keyword(this.color)},hex:function(V){return arguments.length?new R(V):T.to.hex(this.rgb().round().color)},rgbNumber:function(){var V=this.rgb().color;return(V[0]&255)<<16|(V[1]&255)<<8|V[2]&255},luminosity:function(){for(var V=this.rgb().color,X=[],K=0;K<V.length;K++){var q=V[K]/255;X[K]=q<=.03928?q/12.92:Math.pow((q+.055)/1.055,2.4)}return .2126*X[0]+.7152*X[1]+.0722*X[2]},contrast:function(V){var X=this.luminosity(),K=V.luminosity();return X>K?(X+.05)/(K+.05):(K+.05)/(X+.05)},level:function(V){var X=this.contrast(V);return X>=7.1?"AAA":X>=4.5?"AA":""},isDark:function(){var V=this.rgb().color,X=(V[0]*299+V[1]*587+V[2]*114)/1e3;return X<128},isLight:function(){return!this.isDark()},negate:function(){for(var V=this.rgb(),X=0;X<3;X++)V.color[X]=255-V.color[X];return V},lighten:function(V){var X=this.hsl();return X.color[2]+=X.color[2]*V,X},darken:function(V){var X=this.hsl();return X.color[2]-=X.color[2]*V,X},saturate:function(V){var X=this.hsl();return X.color[1]+=X.color[1]*V,X},desaturate:function(V){var X=this.hsl();return X.color[1]-=X.color[1]*V,X},whiten:function(V){var X=this.hwb();return X.color[1]+=X.color[1]*V,X},blacken:function(V){var X=this.hwb();return X.color[2]+=X.color[2]*V,X},grayscale:function(){var V=this.rgb().color,X=V[0]*.3+V[1]*.59+V[2]*.11;return R.rgb(X,X,X)},fade:function(V){return this.alpha(this.valpha-this.valpha*V)},opaquer:function(V){return this.alpha(this.valpha+this.valpha*V)},rotate:function(V){var X=this.hsl(),K=X.color[0];return K=(K+V)%360,K=K<0?360+K:K,X.color[0]=K,X},mix:function(V,X){if(!V||!V.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof V);var K=V.rgb(),q=this.rgb(),ct=X===void 0?.5:X,_t=2*ct-1,yt=K.alpha()-q.alpha(),lt=((_t*yt==-1?_t:(_t+yt)/(1+_t*yt))+1)/2,Lt=1-lt;return R.rgb(lt*K.red()+Lt*q.red(),lt*K.green()+Lt*q.green(),lt*K.blue()+Lt*q.blue(),K.alpha()*ct+q.alpha()*(1-ct))}},Object.keys(j).forEach(function(V){if(U.indexOf(V)===-1){var X=j[V].channels;R.prototype[V]=function(){if(this.model===V)return new R(this);if(arguments.length)return new R(arguments,V);var K=typeof arguments[X]=="number"?X:this.valpha;return new R(O(j[this.model][V].raw(this.color)).concat(K),V)},R[V]=function(K){return typeof K=="number"&&(K=k(y.call(arguments),X)),new R(K,V)}}});function N(V,X){return Number(V.toFixed(X))}function A(V){return function(X){return N(X,V)}}function D(V,X,K){return V=Array.isArray(V)?V:[V],V.forEach(function(q){(B[q]||(B[q]=[]))[X]=K}),V=V[0],function(q){var ct;return arguments.length?(K&&(q=K(q)),ct=this[V](),ct.color[X]=q,ct):(ct=this[V]().color[X],K&&(ct=K(ct)),ct)}}function M(V){return function(X){return Math.max(0,Math.min(V,X))}}function O(V){return Array.isArray(V)?V:[V]}function k(V,X){for(var K=0;K<X;K++)typeof V[K]!="number"&&(V[K]=0);return V}Vt.exports=R},12956:function(Vt,P,S){var T=S(58900),j={};for(var y in T)T.hasOwnProperty(y)&&(j[T[y]]=y);var U=Vt.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var F in U)if(U.hasOwnProperty(F)){if(!("channels"in U[F]))throw new Error("missing channels property: "+F);if(!("labels"in U[F]))throw new Error("missing channel labels property: "+F);if(U[F].labels.length!==U[F].channels)throw new Error("channel and label counts mismatch: "+F);var B=U[F].channels,R=U[F].labels;delete U[F].channels,delete U[F].labels,Object.defineProperty(U[F],"channels",{value:B}),Object.defineProperty(U[F],"labels",{value:R})}U.rgb.hsl=function(A){var D=A[0]/255,M=A[1]/255,O=A[2]/255,k=Math.min(D,M,O),V=Math.max(D,M,O),X=V-k,K,q,ct;return V===k?K=0:D===V?K=(M-O)/X:M===V?K=2+(O-D)/X:O===V&&(K=4+(D-M)/X),K=Math.min(K*60,360),K<0&&(K+=360),ct=(k+V)/2,V===k?q=0:ct<=.5?q=X/(V+k):q=X/(2-V-k),[K,q*100,ct*100]},U.rgb.hsv=function(A){var D,M,O,k,V,X=A[0]/255,K=A[1]/255,q=A[2]/255,ct=Math.max(X,K,q),_t=ct-Math.min(X,K,q),yt=function(lt){return(ct-lt)/6/_t+1/2};return _t===0?k=V=0:(V=_t/ct,D=yt(X),M=yt(K),O=yt(q),X===ct?k=O-M:K===ct?k=1/3+D-O:q===ct&&(k=2/3+M-D),k<0?k+=1:k>1&&(k-=1)),[k*360,V*100,ct*100]},U.rgb.hwb=function(A){var D=A[0],M=A[1],O=A[2],k=U.rgb.hsl(A)[0],V=1/255*Math.min(D,Math.min(M,O));return O=1-1/255*Math.max(D,Math.max(M,O)),[k,V*100,O*100]},U.rgb.cmyk=function(A){var D=A[0]/255,M=A[1]/255,O=A[2]/255,k,V,X,K;return K=Math.min(1-D,1-M,1-O),k=(1-D-K)/(1-K)||0,V=(1-M-K)/(1-K)||0,X=(1-O-K)/(1-K)||0,[k*100,V*100,X*100,K*100]};function N(A,D){return Math.pow(A[0]-D[0],2)+Math.pow(A[1]-D[1],2)+Math.pow(A[2]-D[2],2)}U.rgb.keyword=function(A){var D=j[A];if(D)return D;var M=Infinity,O;for(var k in T)if(T.hasOwnProperty(k)){var V=T[k],X=N(A,V);X<M&&(M=X,O=k)}return O},U.keyword.rgb=function(A){return T[A]},U.rgb.xyz=function(A){var D=A[0]/255,M=A[1]/255,O=A[2]/255;D=D>.04045?Math.pow((D+.055)/1.055,2.4):D/12.92,M=M>.04045?Math.pow((M+.055)/1.055,2.4):M/12.92,O=O>.04045?Math.pow((O+.055)/1.055,2.4):O/12.92;var k=D*.4124+M*.3576+O*.1805,V=D*.2126+M*.7152+O*.0722,X=D*.0193+M*.1192+O*.9505;return[k*100,V*100,X*100]},U.rgb.lab=function(A){var D=U.rgb.xyz(A),M=D[0],O=D[1],k=D[2],V,X,K;return M/=95.047,O/=100,k/=108.883,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,O=O>.008856?Math.pow(O,1/3):7.787*O+16/116,k=k>.008856?Math.pow(k,1/3):7.787*k+16/116,V=116*O-16,X=500*(M-O),K=200*(O-k),[V,X,K]},U.hsl.rgb=function(A){var D=A[0]/360,M=A[1]/100,O=A[2]/100,k,V,X,K,q;if(M===0)return q=O*255,[q,q,q];O<.5?V=O*(1+M):V=O+M-O*M,k=2*O-V,K=[0,0,0];for(var ct=0;ct<3;ct++)X=D+1/3*-(ct-1),X<0&&X++,X>1&&X--,6*X<1?q=k+(V-k)*6*X:2*X<1?q=V:3*X<2?q=k+(V-k)*(2/3-X)*6:q=k,K[ct]=q*255;return K},U.hsl.hsv=function(A){var D=A[0],M=A[1]/100,O=A[2]/100,k=M,V=Math.max(O,.01),X,K;return O*=2,M*=O<=1?O:2-O,k*=V<=1?V:2-V,K=(O+M)/2,X=O===0?2*k/(V+k):2*M/(O+M),[D,X*100,K*100]},U.hsv.rgb=function(A){var D=A[0]/60,M=A[1]/100,O=A[2]/100,k=Math.floor(D)%6,V=D-Math.floor(D),X=255*O*(1-M),K=255*O*(1-M*V),q=255*O*(1-M*(1-V));switch(O*=255,k){case 0:return[O,q,X];case 1:return[K,O,X];case 2:return[X,O,q];case 3:return[X,K,O];case 4:return[q,X,O];case 5:return[O,X,K]}},U.hsv.hsl=function(A){var D=A[0],M=A[1]/100,O=A[2]/100,k=Math.max(O,.01),V,X,K;return K=(2-M)*O,V=(2-M)*k,X=M*k,X/=V<=1?V:2-V,X=X||0,K/=2,[D,X*100,K*100]},U.hwb.rgb=function(A){var D=A[0]/360,M=A[1]/100,O=A[2]/100,k=M+O,V,X,K,q;k>1&&(M/=k,O/=k),V=Math.floor(6*D),X=1-O,K=6*D-V,(V&1)!=0&&(K=1-K),q=M+K*(X-M);var ct,_t,yt;switch(V){default:case 6:case 0:ct=X,_t=q,yt=M;break;case 1:ct=q,_t=X,yt=M;break;case 2:ct=M,_t=X,yt=q;break;case 3:ct=M,_t=q,yt=X;break;case 4:ct=q,_t=M,yt=X;break;case 5:ct=X,_t=M,yt=q;break}return[ct*255,_t*255,yt*255]},U.cmyk.rgb=function(A){var D=A[0]/100,M=A[1]/100,O=A[2]/100,k=A[3]/100,V,X,K;return V=1-Math.min(1,D*(1-k)+k),X=1-Math.min(1,M*(1-k)+k),K=1-Math.min(1,O*(1-k)+k),[V*255,X*255,K*255]},U.xyz.rgb=function(A){var D=A[0]/100,M=A[1]/100,O=A[2]/100,k,V,X;return k=D*3.2406+M*-1.5372+O*-.4986,V=D*-.9689+M*1.8758+O*.0415,X=D*.0557+M*-.204+O*1.057,k=k>.0031308?1.055*Math.pow(k,1/2.4)-.055:k*12.92,V=V>.0031308?1.055*Math.pow(V,1/2.4)-.055:V*12.92,X=X>.0031308?1.055*Math.pow(X,1/2.4)-.055:X*12.92,k=Math.min(Math.max(0,k),1),V=Math.min(Math.max(0,V),1),X=Math.min(Math.max(0,X),1),[k*255,V*255,X*255]},U.xyz.lab=function(A){var D=A[0],M=A[1],O=A[2],k,V,X;return D/=95.047,M/=100,O/=108.883,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,O=O>.008856?Math.pow(O,1/3):7.787*O+16/116,k=116*M-16,V=500*(D-M),X=200*(M-O),[k,V,X]},U.lab.xyz=function(A){var D=A[0],M=A[1],O=A[2],k,V,X;V=(D+16)/116,k=M/500+V,X=V-O/200;var K=Math.pow(V,3),q=Math.pow(k,3),ct=Math.pow(X,3);return V=K>.008856?K:(V-16/116)/7.787,k=q>.008856?q:(k-16/116)/7.787,X=ct>.008856?ct:(X-16/116)/7.787,k*=95.047,V*=100,X*=108.883,[k,V,X]},U.lab.lch=function(A){var D=A[0],M=A[1],O=A[2],k,V,X;return k=Math.atan2(O,M),V=k*360/2/Math.PI,V<0&&(V+=360),X=Math.sqrt(M*M+O*O),[D,X,V]},U.lch.lab=function(A){var D=A[0],M=A[1],O=A[2],k,V,X;return X=O/360*2*Math.PI,k=M*Math.cos(X),V=M*Math.sin(X),[D,k,V]},U.rgb.ansi16=function(A){var D=A[0],M=A[1],O=A[2],k=1 in arguments?arguments[1]:U.rgb.hsv(A)[2];if(k=Math.round(k/50),k===0)return 30;var V=30+(Math.round(O/255)<<2|Math.round(M/255)<<1|Math.round(D/255));return k===2&&(V+=60),V},U.hsv.ansi16=function(A){return U.rgb.ansi16(U.hsv.rgb(A),A[2])},U.rgb.ansi256=function(A){var D=A[0],M=A[1],O=A[2];if(D===M&&M===O)return D<8?16:D>248?231:Math.round((D-8)/247*24)+232;var k=16+36*Math.round(D/255*5)+6*Math.round(M/255*5)+Math.round(O/255*5);return k},U.ansi16.rgb=function(A){var D=A%10;if(D===0||D===7)return A>50&&(D+=3.5),D=D/10.5*255,[D,D,D];var M=(~~(A>50)+1)*.5,O=(D&1)*M*255,k=(D>>1&1)*M*255,V=(D>>2&1)*M*255;return[O,k,V]},U.ansi256.rgb=function(A){if(A>=232){var D=(A-232)*10+8;return[D,D,D]}A-=16;var M,O=Math.floor(A/36)/5*255,k=Math.floor((M=A%36)/6)/5*255,V=M%6/5*255;return[O,k,V]},U.rgb.hex=function(A){var D=((Math.round(A[0])&255)<<16)+((Math.round(A[1])&255)<<8)+(Math.round(A[2])&255),M=D.toString(16).toUpperCase();return"000000".substring(M.length)+M},U.hex.rgb=function(A){var D=A.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!D)return[0,0,0];var M=D[0];D[0].length===3&&(M=M.split("").map(function(K){return K+K}).join(""));var O=parseInt(M,16),k=O>>16&255,V=O>>8&255,X=O&255;return[k,V,X]},U.rgb.hcg=function(A){var D=A[0]/255,M=A[1]/255,O=A[2]/255,k=Math.max(Math.max(D,M),O),V=Math.min(Math.min(D,M),O),X=k-V,K,q;return X<1?K=V/(1-X):K=0,X<=0?q=0:k===D?q=(M-O)/X%6:k===M?q=2+(O-D)/X:q=4+(D-M)/X+4,q/=6,q%=1,[q*360,X*100,K*100]},U.hsl.hcg=function(A){var D=A[1]/100,M=A[2]/100,O=1,k=0;return M<.5?O=2*D*M:O=2*D*(1-M),O<1&&(k=(M-.5*O)/(1-O)),[A[0],O*100,k*100]},U.hsv.hcg=function(A){var D=A[1]/100,M=A[2]/100,O=D*M,k=0;return O<1&&(k=(M-O)/(1-O)),[A[0],O*100,k*100]},U.hcg.rgb=function(A){var D=A[0]/360,M=A[1]/100,O=A[2]/100;if(M===0)return[O*255,O*255,O*255];var k=[0,0,0],V=D%1*6,X=V%1,K=1-X,q=0;switch(Math.floor(V)){case 0:k[0]=1,k[1]=X,k[2]=0;break;case 1:k[0]=K,k[1]=1,k[2]=0;break;case 2:k[0]=0,k[1]=1,k[2]=X;break;case 3:k[0]=0,k[1]=K,k[2]=1;break;case 4:k[0]=X,k[1]=0,k[2]=1;break;default:k[0]=1,k[1]=0,k[2]=K}return q=(1-M)*O,[(M*k[0]+q)*255,(M*k[1]+q)*255,(M*k[2]+q)*255]},U.hcg.hsv=function(A){var D=A[1]/100,M=A[2]/100,O=D+M*(1-D),k=0;return O>0&&(k=D/O),[A[0],k*100,O*100]},U.hcg.hsl=function(A){var D=A[1]/100,M=A[2]/100,O=M*(1-D)+.5*D,k=0;return O>0&&O<.5?k=D/(2*O):O>=.5&&O<1&&(k=D/(2*(1-O))),[A[0],k*100,O*100]},U.hcg.hwb=function(A){var D=A[1]/100,M=A[2]/100,O=D+M*(1-D);return[A[0],(O-D)*100,(1-O)*100]},U.hwb.hcg=function(A){var D=A[1]/100,M=A[2]/100,O=1-M,k=O-D,V=0;return k<1&&(V=(O-k)/(1-k)),[A[0],k*100,V*100]},U.apple.rgb=function(A){return[A[0]/65535*255,A[1]/65535*255,A[2]/65535*255]},U.rgb.apple=function(A){return[A[0]/255*65535,A[1]/255*65535,A[2]/255*65535]},U.gray.rgb=function(A){return[A[0]/100*255,A[0]/100*255,A[0]/100*255]},U.gray.hsl=U.gray.hsv=function(A){return[0,0,A[0]]},U.gray.hwb=function(A){return[0,100,A[0]]},U.gray.cmyk=function(A){return[0,0,0,A[0]]},U.gray.lab=function(A){return[A[0],0,0]},U.gray.hex=function(A){var D=Math.round(A[0]/100*255)&255,M=(D<<16)+(D<<8)+D,O=M.toString(16).toUpperCase();return"000000".substring(O.length)+O},U.rgb.gray=function(A){var D=(A[0]+A[1]+A[2])/3;return[D/255*100]}},80978:function(Vt,P,S){var T=S(12956),j=S(87774),y={},U=Object.keys(T);function F(R){var N=function(A){return A==null?A:(arguments.length>1&&(A=Array.prototype.slice.call(arguments)),R(A))};return"conversion"in R&&(N.conversion=R.conversion),N}function B(R){var N=function(A){if(A==null)return A;arguments.length>1&&(A=Array.prototype.slice.call(arguments));var D=R(A);if(typeof D=="object")for(var M=D.length,O=0;O<M;O++)D[O]=Math.round(D[O]);return D};return"conversion"in R&&(N.conversion=R.conversion),N}U.forEach(function(R){y[R]={},Object.defineProperty(y[R],"channels",{value:T[R].channels}),Object.defineProperty(y[R],"labels",{value:T[R].labels});var N=j(R),A=Object.keys(N);A.forEach(function(D){var M=N[D];y[R][D]=B(M),y[R][D].raw=F(M)})}),Vt.exports=y},87774:function(Vt,P,S){var T=S(12956);function j(){for(var B={},R=Object.keys(T),N=R.length,A=0;A<N;A++)B[R[A]]={distance:-1,parent:null};return B}function y(B){var R=j(),N=[B];for(R[B].distance=0;N.length;)for(var A=N.pop(),D=Object.keys(T[A]),M=D.length,O=0;O<M;O++){var k=D[O],V=R[k];V.distance===-1&&(V.distance=R[A].distance+1,V.parent=A,N.unshift(k))}return R}function U(B,R){return function(N){return R(B(N))}}function F(B,R){for(var N=[R[B].parent,B],A=T[R[B].parent][B],D=R[B].parent;R[D].parent;)N.unshift(R[D].parent),A=U(T[R[D].parent][D],A),D=R[D].parent;return A.conversion=N,A}Vt.exports=function(B){for(var R=y(B),N={},A=Object.keys(R),D=A.length,M=0;M<D;M++){var O=A[M],k=R[O];k.parent!==null&&(N[O]=F(O,R))}return N}},58900:function(Vt){"use strict";Vt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},2650:function(Vt,P,S){"use strict";S.d(P,{ZP:function(){return yt},B8:function(){return Gt}});function T(rt,st,d){rt.prototype=st.prototype=d,d.constructor=rt}function j(rt,st){var d=Object.create(rt.prototype);for(var It in st)d[It]=st[It];return d}function y(){}var U=.7,F=1/U,B="\\s*([+-]?\\d+)\\s*",R="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A=/^#([0-9a-f]{3,8})$/,D=new RegExp("^rgb\\("+[B,B,B]+"\\)$"),M=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),O=new RegExp("^rgba\\("+[B,B,B,R]+"\\)$"),k=new RegExp("^rgba\\("+[N,N,N,R]+"\\)$"),V=new RegExp("^hsl\\("+[R,N,N]+"\\)$"),X=new RegExp("^hsla\\("+[R,N,N,R]+"\\)$"),K={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T(y,yt,{copy:function(rt){return Object.assign(new this.constructor,this,rt)},displayable:function(){return this.rgb().displayable()},hex:q,formatHex:q,formatHsl:ct,formatRgb:_t,toString:_t});function q(){return this.rgb().formatHex()}function ct(){return vt(this).formatHsl()}function _t(){return this.rgb().formatRgb()}function yt(rt){var st,d;return rt=(rt+"").trim().toLowerCase(),(st=A.exec(rt))?(d=st[1].length,st=parseInt(st[1],16),d===6?lt(st):d===3?new re(st>>8&15|st>>4&240,st>>4&15|st&240,(st&15)<<4|st&15,1):d===8?Lt(st>>24&255,st>>16&255,st>>8&255,(st&255)/255):d===4?Lt(st>>12&15|st>>8&240,st>>8&15|st>>4&240,st>>4&15|st&240,((st&15)<<4|st&15)/255):null):(st=D.exec(rt))?new re(st[1],st[2],st[3],1):(st=M.exec(rt))?new re(st[1]*255/100,st[2]*255/100,st[3]*255/100,1):(st=O.exec(rt))?Lt(st[1],st[2],st[3],st[4]):(st=k.exec(rt))?Lt(st[1]*255/100,st[2]*255/100,st[3]*255/100,st[4]):(st=V.exec(rt))?gt(st[1],st[2]/100,st[3]/100,1):(st=X.exec(rt))?gt(st[1],st[2]/100,st[3]/100,st[4]):K.hasOwnProperty(rt)?lt(K[rt]):rt==="transparent"?new re(NaN,NaN,NaN,0):null}function lt(rt){return new re(rt>>16&255,rt>>8&255,rt&255,1)}function Lt(rt,st,d,It){return It<=0&&(rt=st=d=NaN),new re(rt,st,d,It)}function wt(rt){return rt instanceof y||(rt=yt(rt)),rt?(rt=rt.rgb(),new re(rt.r,rt.g,rt.b,rt.opacity)):new re}function Gt(rt,st,d,It){return arguments.length===1?wt(rt):new re(rt,st,d,It==null?1:It)}function re(rt,st,d,It){this.r=+rt,this.g=+st,this.b=+d,this.opacity=+It}T(re,Gt,j(y,{brighter:function(rt){return rt=rt==null?F:Math.pow(F,rt),new re(this.r*rt,this.g*rt,this.b*rt,this.opacity)},darker:function(rt){return rt=rt==null?U:Math.pow(U,rt),new re(this.r*rt,this.g*rt,this.b*rt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatRgb:it,toString:it}));function Qt(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)}function it(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(rt===1?")":", "+rt+")")}function dt(rt){return rt=Math.max(0,Math.min(255,Math.round(rt)||0)),(rt<16?"0":"")+rt.toString(16)}function gt(rt,st,d,It){return It<=0?rt=st=d=NaN:d<=0||d>=1?rt=st=NaN:st<=0&&(rt=NaN),new ot(rt,st,d,It)}function vt(rt){if(rt instanceof ot)return new ot(rt.h,rt.s,rt.l,rt.opacity);if(rt instanceof y||(rt=yt(rt)),!rt)return new ot;if(rt instanceof ot)return rt;rt=rt.rgb();var st=rt.r/255,d=rt.g/255,It=rt.b/255,Ht=Math.min(st,d,It),kt=Math.max(st,d,It),Xt=NaN,Kt=kt-Ht,Jt=(kt+Ht)/2;return Kt?(st===kt?Xt=(d-It)/Kt+(d<It)*6:d===kt?Xt=(It-st)/Kt+2:Xt=(st-d)/Kt+4,Kt/=Jt<.5?kt+Ht:2-kt-Ht,Xt*=60):Kt=Jt>0&&Jt<1?0:Xt,new ot(Xt,Kt,Jt,rt.opacity)}function Y(rt,st,d,It){return arguments.length===1?vt(rt):new ot(rt,st,d,It==null?1:It)}function ot(rt,st,d,It){this.h=+rt,this.s=+st,this.l=+d,this.opacity=+It}T(ot,Y,j(y,{brighter:function(rt){return rt=rt==null?F:Math.pow(F,rt),new ot(this.h,this.s,this.l*rt,this.opacity)},darker:function(rt){return rt=rt==null?U:Math.pow(U,rt),new ot(this.h,this.s,this.l*rt,this.opacity)},rgb:function(){var rt=this.h%360+(this.h<0)*360,st=isNaN(rt)||isNaN(this.s)?0:this.s,d=this.l,It=d+(d<.5?d:1-d)*st,Ht=2*d-It;return new re(nt(rt>=240?rt-240:rt+120,Ht,It),nt(rt,Ht,It),nt(rt<120?rt+240:rt-120,Ht,It),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(rt===1?")":", "+rt+")")}}));function nt(rt,st,d){return(rt<60?st+(d-st)*rt/60:rt<180?d:rt<240?st+(d-st)*(240-rt)/60:st)*255}},68716:function(Vt,P,S){"use strict";S.d(P,{yD:function(){return T},_e:function(){return j},tw:function(){return y}});function T(U){return U*U*U}function j(U){return--U*U*U+1}function y(U){return((U*=2)<=1?U*U*U:(U-=2)*U*U+2)/2}},13681:function(Vt,P,S){"use strict";S.r(P),S.d(P,{easeBack:function(){return Ht},easeBackIn:function(){return d},easeBackInOut:function(){return Ht},easeBackOut:function(){return It},easeBounce:function(){return nt},easeBounceIn:function(){return ot},easeBounceInOut:function(){return rt},easeBounceOut:function(){return nt},easeCircle:function(){return lt},easeCircleIn:function(){return _t},easeCircleInOut:function(){return lt},easeCircleOut:function(){return yt},easeCubic:function(){return F.tw},easeCubicIn:function(){return F.yD},easeCubicInOut:function(){return F.tw},easeCubicOut:function(){return F._e},easeElastic:function(){return ue},easeElasticIn:function(){return Jt},easeElasticInOut:function(){return ce},easeElasticOut:function(){return ue},easeExp:function(){return ct},easeExpIn:function(){return K},easeExpInOut:function(){return ct},easeExpOut:function(){return q},easeLinear:function(){return T},easePoly:function(){return A},easePolyIn:function(){return R},easePolyInOut:function(){return A},easePolyOut:function(){return N},easeQuad:function(){return U},easeQuadIn:function(){return j},easeQuadInOut:function(){return U},easeQuadOut:function(){return y},easeSin:function(){return V},easeSinIn:function(){return O},easeSinInOut:function(){return V},easeSinOut:function(){return k}});function T($t){return+$t}function j($t){return $t*$t}function y($t){return $t*(2-$t)}function U($t){return(($t*=2)<=1?$t*$t:--$t*(2-$t)+1)/2}var F=S(68716),B=3,R=function $t(Ut){Ut=+Ut;function Rt(Pt){return Math.pow(Pt,Ut)}return Rt.exponent=$t,Rt}(B),N=function $t(Ut){Ut=+Ut;function Rt(Pt){return 1-Math.pow(1-Pt,Ut)}return Rt.exponent=$t,Rt}(B),A=function $t(Ut){Ut=+Ut;function Rt(Pt){return((Pt*=2)<=1?Math.pow(Pt,Ut):2-Math.pow(2-Pt,Ut))/2}return Rt.exponent=$t,Rt}(B),D=Math.PI,M=D/2;function O($t){return+$t==1?1:1-Math.cos($t*M)}function k($t){return Math.sin($t*M)}function V($t){return(1-Math.cos(D*$t))/2}function X($t){return(Math.pow(2,-10*$t)-.0009765625)*1.0009775171065494}function K($t){return X(1-+$t)}function q($t){return 1-X($t)}function ct($t){return(($t*=2)<=1?X(1-$t):2-X($t-1))/2}function _t($t){return 1-Math.sqrt(1-$t*$t)}function yt($t){return Math.sqrt(1- --$t*$t)}function lt($t){return(($t*=2)<=1?1-Math.sqrt(1-$t*$t):Math.sqrt(1-($t-=2)*$t)+1)/2}var Lt=4/11,wt=6/11,Gt=8/11,re=3/4,Qt=9/11,it=10/11,dt=15/16,gt=21/22,vt=63/64,Y=1/Lt/Lt;function ot($t){return 1-nt(1-$t)}function nt($t){return($t=+$t)<Lt?Y*$t*$t:$t<Gt?Y*($t-=wt)*$t+re:$t<it?Y*($t-=Qt)*$t+dt:Y*($t-=gt)*$t+vt}function rt($t){return(($t*=2)<=1?1-nt(1-$t):nt($t-1)+1)/2}var st=1.70158,d=function $t(Ut){Ut=+Ut;function Rt(Pt){return(Pt=+Pt)*Pt*(Ut*(Pt-1)+Pt)}return Rt.overshoot=$t,Rt}(st),It=function $t(Ut){Ut=+Ut;function Rt(Pt){return--Pt*Pt*((Pt+1)*Ut+Pt)+1}return Rt.overshoot=$t,Rt}(st),Ht=function $t(Ut){Ut=+Ut;function Rt(Pt){return((Pt*=2)<1?Pt*Pt*((Ut+1)*Pt-Ut):(Pt-=2)*Pt*((Ut+1)*Pt+Ut)+2)/2}return Rt.overshoot=$t,Rt}(st),kt=2*Math.PI,Xt=1,Kt=.3,Jt=function $t(Ut,Rt){var Pt=Math.asin(1/(Ut=Math.max(1,Ut)))*(Rt/=kt);function Yt(Dt){return Ut*X(- --Dt)*Math.sin((Pt-Dt)/Rt)}return Yt.amplitude=function(Dt){return $t(Dt,Rt*kt)},Yt.period=function(Dt){return $t(Ut,Dt)},Yt}(Xt,Kt),ue=function $t(Ut,Rt){var Pt=Math.asin(1/(Ut=Math.max(1,Ut)))*(Rt/=kt);function Yt(Dt){return 1-Ut*X(Dt=+Dt)*Math.sin((Dt+Pt)/Rt)}return Yt.amplitude=function(Dt){return $t(Dt,Rt*kt)},Yt.period=function(Dt){return $t(Ut,Dt)},Yt}(Xt,Kt),ce=function $t(Ut,Rt){var Pt=Math.asin(1/(Ut=Math.max(1,Ut)))*(Rt/=kt);function Yt(Dt){return((Dt=Dt*2-1)<0?Ut*X(-Dt)*Math.sin((Pt-Dt)/Rt):2-Ut*X(Dt)*Math.sin((Pt+Dt)/Rt))/2}return Yt.amplitude=function(Dt){return $t(Dt,Rt*kt)},Yt.period=function(Dt){return $t(Ut,Dt)},Yt}(Xt,Kt)},88122:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return y},M:function(){return U}});var T=S(26257),j=S(67896);function y(F,B){return((0,j.v)(B)?j.Z:U)(F,B)}function U(F,B){var R=B?B.length:0,N=F?Math.min(R,F.length):0,A=new Array(N),D=new Array(R),M;for(M=0;M<N;++M)A[M]=(0,T.Z)(F[M],B[M]);for(;M<R;++M)D[M]=B[M];return function(O){for(M=0;M<N;++M)D[M]=A[M](O);return D}}},73626:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return T}});function T(j,y){return j=+j,y=+y,function(U){return j*(1-U)+y*U}}},67896:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return T},v:function(){return j}});function T(y,U){U||(U=[]);var F=y?Math.min(U.length,y.length):0,B=U.slice(),R;return function(N){for(R=0;R<F;++R)B[R]=y[R]*(1-N)+U[R]*N;return B}}function j(y){return ArrayBuffer.isView(y)&&!(y instanceof DataView)}},26257:function(Vt,P,S){"use strict";S.d(P,{Z:function(){return re}});var T=S(2650);function j(Qt,it,dt,gt,vt){var Y=Qt*Qt,ot=Y*Qt;return((1-3*Qt+3*Y-ot)*it+(4-6*Y+3*ot)*dt+(1+3*Qt+3*Y-3*ot)*gt+ot*vt)/6}function y(Qt){var it=Qt.length-1;return function(dt){var gt=dt<=0?dt=0:dt>=1?(dt=1,it-1):Math.floor(dt*it),vt=Qt[gt],Y=Qt[gt+1],ot=gt>0?Qt[gt-1]:2*vt-Y,nt=gt<it-1?Qt[gt+2]:2*Y-vt;return j((dt-gt/it)*it,ot,vt,Y,nt)}}function U(Qt){var it=Qt.length;return function(dt){var gt=Math.floor(((dt%=1)<0?++dt:dt)*it),vt=Qt[(gt+it-1)%it],Y=Qt[gt%it],ot=Qt[(gt+1)%it],nt=Qt[(gt+2)%it];return j((dt-gt/it)*it,vt,Y,ot,nt)}}function F(Qt){return function(){return Qt}}function B(Qt,it){return function(dt){return Qt+dt*it}}function R(Qt,it,dt){return Qt=Math.pow(Qt,dt),it=Math.pow(it,dt)-Qt,dt=1/dt,function(gt){return Math.pow(Qt+gt*it,dt)}}function N(Qt,it){var dt=it-Qt;return dt?B(Qt,dt>180||dt<-180?dt-360*Math.round(dt/360):dt):constant(isNaN(Qt)?it:Qt)}function A(Qt){return(Qt=+Qt)==1?D:function(it,dt){return dt-it?R(it,dt,Qt):F(isNaN(it)?dt:it)}}function D(Qt,it){var dt=it-Qt;return dt?B(Qt,dt):F(isNaN(Qt)?it:Qt)}var M=function Qt(it){var dt=A(it);function gt(vt,Y){var ot=dt((vt=(0,T.B8)(vt)).r,(Y=(0,T.B8)(Y)).r),nt=dt(vt.g,Y.g),rt=dt(vt.b,Y.b),st=D(vt.opacity,Y.opacity);return function(d){return vt.r=ot(d),vt.g=nt(d),vt.b=rt(d),vt.opacity=st(d),vt+""}}return gt.gamma=Qt,gt}(1);function O(Qt){return function(it){var dt=it.length,gt=new Array(dt),vt=new Array(dt),Y=new Array(dt),ot,nt;for(ot=0;ot<dt;++ot)nt=(0,T.B8)(it[ot]),gt[ot]=nt.r||0,vt[ot]=nt.g||0,Y[ot]=nt.b||0;return gt=Qt(gt),vt=Qt(vt),Y=Qt(Y),nt.opacity=1,function(rt){return nt.r=gt(rt),nt.g=vt(rt),nt.b=Y(rt),nt+""}}}var k=O(y),V=O(U),X=S(88122);function K(Qt,it){var dt=new Date;return Qt=+Qt,it=+it,function(gt){return dt.setTime(Qt*(1-gt)+it*gt),dt}}var q=S(73626);function ct(Qt,it){var dt={},gt={},vt;(Qt===null||typeof Qt!="object")&&(Qt={}),(it===null||typeof it!="object")&&(it={});for(vt in it)vt in Qt?dt[vt]=re(Qt[vt],it[vt]):gt[vt]=it[vt];return function(Y){for(vt in dt)gt[vt]=dt[vt](Y);return gt}}var _t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yt=new RegExp(_t.source,"g");function lt(Qt){return function(){return Qt}}function Lt(Qt){return function(it){return Qt(it)+""}}function wt(Qt,it){var dt=_t.lastIndex=yt.lastIndex=0,gt,vt,Y,ot=-1,nt=[],rt=[];for(Qt=Qt+"",it=it+"";(gt=_t.exec(Qt))&&(vt=yt.exec(it));)(Y=vt.index)>dt&&(Y=it.slice(dt,Y),nt[ot]?nt[ot]+=Y:nt[++ot]=Y),(gt=gt[0])===(vt=vt[0])?nt[ot]?nt[ot]+=vt:nt[++ot]=vt:(nt[++ot]=null,rt.push({i:ot,x:(0,q.Z)(gt,vt)})),dt=yt.lastIndex;return dt<it.length&&(Y=it.slice(dt),nt[ot]?nt[ot]+=Y:nt[++ot]=Y),nt.length<2?rt[0]?Lt(rt[0].x):lt(it):(it=rt.length,function(st){for(var d=0,It;d<it;++d)nt[(It=rt[d]).i]=It.x(st);return nt.join("")})}var Gt=S(67896);function re(Qt,it){var dt=typeof it,gt;return it==null||dt==="boolean"?F(it):(dt==="number"?q.Z:dt==="string"?(gt=(0,T.ZP)(it))?(it=gt,M):wt:it instanceof T.ZP?M:it instanceof Date?K:(0,Gt.v)(it)?Gt.Z:Array.isArray(it)?X.M:typeof it.valueOf!="function"&&typeof it.toString!="function"||isNaN(it)?ct:q.Z)(Qt,it)}},56645:function(Vt,P){(function(S,T){T(P)})(this,function(S){"use strict";function T(it,dt){return j(it)||y(it,dt)||U()}function j(it){if(Array.isArray(it))return it}function y(it,dt){var gt=[],vt=!0,Y=!1,ot=void 0;try{for(var nt=it[Symbol.iterator](),rt;!(vt=(rt=nt.next()).done)&&(gt.push(rt.value),!(dt&&gt.length===dt));vt=!0);}catch(st){Y=!0,ot=st}finally{try{!vt&&nt.return!=null&&nt.return()}finally{if(Y)throw ot}}return gt}function U(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function F(it,dt,gt,vt){it=it.filter(function(Kt,Jt){var ue=dt(Kt,Jt),ce=gt(Kt,Jt);return ue!=null&&isFinite(ue)&&ce!=null&&isFinite(ce)}),vt&&it.sort(function(Kt,Jt){return dt(Kt)-dt(Jt)});for(var Y=it.length,ot=new Float64Array(Y),nt=new Float64Array(Y),rt=0,st=0,d,It,Ht,kt=0;kt<Y;)Ht=it[kt],ot[kt]=d=+dt(Ht,kt,it),nt[kt]=It=+gt(Ht,kt,it),++kt,rt+=(d-rt)/kt,st+=(It-st)/kt;for(var Xt=0;Xt<Y;++Xt)ot[Xt]-=rt,nt[Xt]-=st;return[ot,nt,rt,st]}function B(it,dt,gt,vt){for(var Y=0,ot=0,nt=it.length;ot<nt;ot++){var rt=it[ot],st=+dt(rt,ot,it),d=+gt(rt,ot,it);st!=null&&isFinite(st)&&d!=null&&isFinite(d)&&vt(st,d,Y++)}}function R(it,dt,gt,vt,Y){var ot=0,nt=0;return B(it,dt,gt,function(rt,st){var d=st-Y(rt),It=st-vt;ot+=d*d,nt+=It*It}),1-ot/nt}function N(it){return Math.atan2(it[1][1]-it[0][1],it[1][0]-it[0][0])*180/Math.PI}function A(it){return[(it[0][0]+it[1][0])/2,(it[0][1]+it[1][1])/2]}function D(it,dt,gt){for(var vt=Math.log(dt-it)*Math.LOG10E+1|0,Y=1*Math.pow(10,-vt/2-1),ot=1e4,nt=[st(it),st(dt)],rt=0;d(nt)&&rt<ot;);return nt;function st(It){return[It,gt(It)]}function d(It){rt++;for(var Ht=It.length,kt=!1,Xt=0;Xt<Ht-1;Xt++){var Kt=It[Xt],Jt=It[Xt+1],ue=A([Kt,Jt]),ce=st(ue[0]),$t=N([Kt,ue]),Ut=N([Kt,ce]),Rt=Math.abs($t-Ut);Rt>Y&&(It.splice(Xt+1,0,ce),kt=!0)}return kt}}function M(it,dt,gt,vt){var Y=vt-it*it,ot=Math.abs(Y)<1e-24?0:(gt-it*dt)/Y,nt=dt-ot*it;return[nt,ot]}function O(){var it=function(ot){return ot[0]},dt=function(ot){return ot[1]},gt;function vt(Y){var ot=0,nt=0,rt=0,st=0,d=0,It=0,Ht=gt?+gt[0]:Infinity,kt=gt?+gt[1]:-Infinity;B(Y,it,dt,function(Ut,Rt){var Pt=Math.log(Rt),Yt=Ut*Rt;++ot,nt+=(Rt-nt)/ot,st+=(Yt-st)/ot,It+=(Ut*Yt-It)/ot,rt+=(Rt*Pt-rt)/ot,d+=(Yt*Pt-d)/ot,gt||(Ut<Ht&&(Ht=Ut),Ut>kt&&(kt=Ut))});var Xt=M(st/nt,rt/nt,d/nt,It/nt),Kt=T(Xt,2),Jt=Kt[0],ue=Kt[1];Jt=Math.exp(Jt);var ce=function(Rt){return Jt*Math.exp(ue*Rt)},$t=D(Ht,kt,ce);return $t.a=Jt,$t.b=ue,$t.predict=ce,$t.rSquared=R(Y,it,dt,nt,ce),$t}return vt.domain=function(Y){return arguments.length?(gt=Y,vt):gt},vt.x=function(Y){return arguments.length?(it=Y,vt):it},vt.y=function(Y){return arguments.length?(dt=Y,vt):dt},vt}function k(){var it=function(ot){return ot[0]},dt=function(ot){return ot[1]},gt;function vt(Y){var ot=0,nt=0,rt=0,st=0,d=0,It=gt?+gt[0]:Infinity,Ht=gt?+gt[1]:-Infinity;B(Y,it,dt,function($t,Ut){++ot,nt+=($t-nt)/ot,rt+=(Ut-rt)/ot,st+=($t*Ut-st)/ot,d+=($t*$t-d)/ot,gt||($t<It&&(It=$t),$t>Ht&&(Ht=$t))});var kt=M(nt,rt,st,d),Xt=T(kt,2),Kt=Xt[0],Jt=Xt[1],ue=function(Ut){return Jt*Ut+Kt},ce=[[It,ue(It)],[Ht,ue(Ht)]];return ce.a=Jt,ce.b=Kt,ce.predict=ue,ce.rSquared=R(Y,it,dt,rt,ue),ce}return vt.domain=function(Y){return arguments.length?(gt=Y,vt):gt},vt.x=function(Y){return arguments.length?(it=Y,vt):it},vt.y=function(Y){return arguments.length?(dt=Y,vt):dt},vt}function V(it){it.sort(function(gt,vt){return gt-vt});var dt=it.length/2;return dt%1==0?(it[dt-1]+it[dt])/2:it[Math.floor(dt)]}var X=2,K=1e-12;function q(){var it=function(ot){return ot[0]},dt=function(ot){return ot[1]},gt=.3;function vt(Y){for(var ot=F(Y,it,dt,!0),nt=T(ot,4),rt=nt[0],st=nt[1],d=nt[2],It=nt[3],Ht=rt.length,kt=Math.max(2,~~(gt*Ht)),Xt=new Float64Array(Ht),Kt=new Float64Array(Ht),Jt=new Float64Array(Ht).fill(1),ue=-1;++ue<=X;){for(var ce=[0,kt-1],$t=0;$t<Ht;++$t){for(var Ut=rt[$t],Rt=ce[0],Pt=ce[1],Yt=Ut-rt[Rt]>rt[Pt]-Ut?Rt:Pt,Dt=0,Nt=0,ne=0,ve=0,Re=0,je=1/Math.abs(rt[Yt]-Ut||1),Cr=Rt;Cr<=Pt;++Cr){var $r=rt[Cr],Qr=st[Cr],Ee=ct(Math.abs(Ut-$r)*je)*Jt[Cr],yn=$r*Ee;Dt+=Ee,Nt+=yn,ne+=Qr*Ee,ve+=Qr*yn,Re+=$r*yn}var ui=M(Nt/Dt,ne/Dt,ve/Dt,Re/Dt),la=T(ui,2),Or=la[0],ln=la[1];Xt[$t]=Or+ln*Ut,Kt[$t]=Math.abs(st[$t]-Xt[$t]),_t(rt,$t+1,ce)}if(ue===X)break;var Kn=V(Kt);if(Math.abs(Kn)<K)break;for(var jn=0,wi,Sa;jn<Ht;++jn)wi=Kt[jn]/(6*Kn),Jt[jn]=wi>=1?K:(Sa=1-wi*wi)*Sa}return yt(rt,Xt,d,It)}return vt.bandwidth=function(Y){return arguments.length?(gt=Y,vt):gt},vt.x=function(Y){return arguments.length?(it=Y,vt):it},vt.y=function(Y){return arguments.length?(dt=Y,vt):dt},vt}function ct(it){return(it=1-it*it*it)*it*it}function _t(it,dt,gt){var vt=it[dt],Y=gt[0],ot=gt[1]+1;if(!(ot>=it.length))for(;dt>Y&&it[ot]-vt<=vt-it[Y];)gt[0]=++Y,gt[1]=ot,++ot}function yt(it,dt,gt,vt){for(var Y=it.length,ot=[],nt=0,rt=0,st=[],d;nt<Y;++nt)d=it[nt]+gt,st[0]===d?st[1]+=(dt[nt]-st[1])/++rt:(rt=0,st[1]+=vt,st=[d,dt[nt]],ot.push(st));return st[1]+=vt,ot}function lt(){var it=function(nt){return nt[0]},dt=function(nt){return nt[1]},gt=Math.E,vt;function Y(ot){var nt=0,rt=0,st=0,d=0,It=0,Ht=vt?+vt[0]:Infinity,kt=vt?+vt[1]:-Infinity,Xt=Math.log(gt);B(ot,it,dt,function(Rt,Pt){var Yt=Math.log(Rt)/Xt;++nt,rt+=(Yt-rt)/nt,st+=(Pt-st)/nt,d+=(Yt*Pt-d)/nt,It+=(Yt*Yt-It)/nt,vt||(Rt<Ht&&(Ht=Rt),Rt>kt&&(kt=Rt))});var Kt=M(rt,st,d,It),Jt=T(Kt,2),ue=Jt[0],ce=Jt[1],$t=function(Pt){return ce*Math.log(Pt)/Xt+ue},Ut=D(Ht,kt,$t);return Ut.a=ce,Ut.b=ue,Ut.predict=$t,Ut.rSquared=R(ot,it,dt,st,$t),Ut}return Y.domain=function(ot){return arguments.length?(vt=ot,Y):vt},Y.x=function(ot){return arguments.length?(it=ot,Y):it},Y.y=function(ot){return arguments.length?(dt=ot,Y):dt},Y.base=function(ot){return arguments.length?(gt=ot,Y):gt},Y}function Lt(){var it=function(ot){return ot[0]},dt=function(ot){return ot[1]},gt;function vt(Y){var ot=F(Y,it,dt),nt=T(ot,4),rt=nt[0],st=nt[1],d=nt[2],It=nt[3],Ht=rt.length,kt=0,Xt=0,Kt=0,Jt=0,ue=0,ce,$t,Ut,Rt;for(ce=0;ce<Ht;)$t=rt[ce],Ut=st[ce++],Rt=$t*$t,kt+=(Rt-kt)/ce,Xt+=(Rt*$t-Xt)/ce,Kt+=(Rt*Rt-Kt)/ce,Jt+=($t*Ut-Jt)/ce,ue+=(Rt*Ut-ue)/ce;var Pt=0,Yt=0,Dt=gt?+gt[0]:Infinity,Nt=gt?+gt[1]:-Infinity;B(Y,it,dt,function(Ee,yn){Yt++,Pt+=(yn-Pt)/Yt,gt||(Ee<Dt&&(Dt=Ee),Ee>Nt&&(Nt=Ee))});var ne=Kt-kt*kt,ve=kt*ne-Xt*Xt,Re=(ue*kt-Jt*Xt)/ve,je=(Jt*ne-ue*Xt)/ve,Cr=-Re*kt,$r=function(yn){return yn=yn-d,Re*yn*yn+je*yn+Cr+It},Qr=D(Dt,Nt,$r);return Qr.a=Re,Qr.b=je-2*Re*d,Qr.c=Cr-je*d+Re*d*d+It,Qr.predict=$r,Qr.rSquared=R(Y,it,dt,Pt,$r),Qr}return vt.domain=function(Y){return arguments.length?(gt=Y,vt):gt},vt.x=function(Y){return arguments.length?(it=Y,vt):it},vt.y=function(Y){return arguments.length?(dt=Y,vt):dt},vt}function wt(){var it=function(nt){return nt[0]},dt=function(nt){return nt[1]},gt=3,vt;function Y(ot){if(gt===1){var nt=k().x(it).y(dt).domain(vt)(ot);return nt.coefficients=[nt.b,nt.a],delete nt.a,delete nt.b,nt}if(gt===2){var rt=Lt().x(it).y(dt).domain(vt)(ot);return rt.coefficients=[rt.c,rt.b,rt.a],delete rt.a,delete rt.b,delete rt.c,rt}var st=F(ot,it,dt),d=T(st,4),It=d[0],Ht=d[1],kt=d[2],Xt=d[3],Kt=It.length,Jt=[],ue=[],ce=gt+1,$t=0,Ut=0,Rt=vt?+vt[0]:Infinity,Pt=vt?+vt[1]:-Infinity;B(ot,it,dt,function($r,Qr){++Ut,$t+=(Qr-$t)/Ut,vt||($r<Rt&&(Rt=$r),$r>Pt&&(Pt=$r))});var Yt,Dt,Nt,ne,ve;for(Yt=0;Yt<ce;++Yt){for(Nt=0,ne=0;Nt<Kt;++Nt)ne+=Math.pow(It[Nt],Yt)*Ht[Nt];for(Jt.push(ne),ve=new Float64Array(ce),Dt=0;Dt<ce;++Dt){for(Nt=0,ne=0;Nt<Kt;++Nt)ne+=Math.pow(It[Nt],Yt+Dt);ve[Dt]=ne}ue.push(ve)}ue.push(Jt);var Re=re(ue),je=function(Qr){Qr-=kt;var Ee=Xt+Re[0]+Re[1]*Qr+Re[2]*Qr*Qr;for(Yt=3;Yt<ce;++Yt)Ee+=Re[Yt]*Math.pow(Qr,Yt);return Ee},Cr=D(Rt,Pt,je);return Cr.coefficients=Gt(ce,Re,-kt,Xt),Cr.predict=je,Cr.rSquared=R(ot,it,dt,$t,je),Cr}return Y.domain=function(ot){return arguments.length?(vt=ot,Y):vt},Y.x=function(ot){return arguments.length?(it=ot,Y):it},Y.y=function(ot){return arguments.length?(dt=ot,Y):dt},Y.order=function(ot){return arguments.length?(gt=ot,Y):gt},Y}function Gt(it,dt,gt,vt){var Y=Array(it),ot,nt,rt,st;for(ot=0;ot<it;++ot)Y[ot]=0;for(ot=it-1;ot>=0;--ot)for(rt=dt[ot],st=1,Y[ot]+=rt,nt=1;nt<=ot;++nt)st*=(ot+1-nt)/nt,Y[ot-nt]+=rt*Math.pow(gt,nt)*st;return Y[0]+=vt,Y}function re(it){var dt=it.length-1,gt=[],vt,Y,ot,nt,rt;for(vt=0;vt<dt;++vt){for(nt=vt,Y=vt+1;Y<dt;++Y)Math.abs(it[vt][Y])>Math.abs(it[vt][nt])&&(nt=Y);for(ot=vt;ot<dt+1;++ot)rt=it[ot][vt],it[ot][vt]=it[ot][nt],it[ot][nt]=rt;for(Y=vt+1;Y<dt;++Y)for(ot=dt;ot>=vt;ot--)it[ot][Y]-=it[ot][vt]*it[vt][Y]/it[vt][vt]}for(Y=dt-1;Y>=0;--Y){for(rt=0,ot=Y+1;ot<dt;++ot)rt+=it[ot][Y]*gt[ot];gt[Y]=(it[dt][Y]-rt)/it[Y][Y]}return gt}function Qt(){var it=function(ot){return ot[0]},dt=function(ot){return ot[1]},gt;function vt(Y){var ot=0,nt=0,rt=0,st=0,d=0,It=0,Ht=gt?+gt[0]:Infinity,kt=gt?+gt[1]:-Infinity;B(Y,it,dt,function(Ut,Rt){var Pt=Math.log(Ut),Yt=Math.log(Rt);++ot,nt+=(Pt-nt)/ot,rt+=(Yt-rt)/ot,st+=(Pt*Yt-st)/ot,d+=(Pt*Pt-d)/ot,It+=(Rt-It)/ot,gt||(Ut<Ht&&(Ht=Ut),Ut>kt&&(kt=Ut))});var Xt=M(nt,rt,st,d),Kt=T(Xt,2),Jt=Kt[0],ue=Kt[1];Jt=Math.exp(Jt);var ce=function(Rt){return Jt*Math.pow(Rt,ue)},$t=D(Ht,kt,ce);return $t.a=Jt,$t.b=ue,$t.predict=ce,$t.rSquared=R(Y,it,dt,It,ce),$t}return vt.domain=function(Y){return arguments.length?(gt=Y,vt):gt},vt.x=function(Y){return arguments.length?(it=Y,vt):it},vt.y=function(Y){return arguments.length?(dt=Y,vt):dt},vt}S.regressionExp=O,S.regressionLinear=k,S.regressionLoess=q,S.regressionLog=lt,S.regressionPoly=wt,S.regressionPow=Qt,S.regressionQuad=Lt,Object.defineProperty(S,"__esModule",{value:!0})})},35374:function(Vt,P,S){"use strict";S.d(P,{HT:function(){return X}});var T=0,j=0,y=0,U=1e3,F,B,R=0,N=0,A=0,D=typeof performance=="object"&&performance.now?performance:Date,M=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(lt){setTimeout(lt,17)};function O(){return N||(M(k),N=D.now()+A)}function k(){N=0}function V(){this._call=this._time=this._next=null}V.prototype=X.prototype={constructor:V,restart:function(lt,Lt,wt){if(typeof lt!="function")throw new TypeError("callback is not a function");wt=(wt==null?O():+wt)+(Lt==null?0:+Lt),!this._next&&B!==this&&(B?B._next=this:F=this,B=this),this._call=lt,this._time=wt,yt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,yt())}};function X(lt,Lt,wt){var Gt=new V;return Gt.restart(lt,Lt,wt),Gt}function K(){O(),++T;for(var lt=F,Lt;lt;)(Lt=N-lt._time)>=0&&lt._call.call(null,Lt),lt=lt._next;--T}function q(){N=(R=D.now())+A,T=j=0;try{K()}finally{T=0,_t(),N=0}}function ct(){var lt=D.now(),Lt=lt-R;Lt>U&&(A-=Lt,R=lt)}function _t(){for(var lt,Lt=F,wt,Gt=Infinity;Lt;)Lt._call?(Gt>Lt._time&&(Gt=Lt._time),lt=Lt,Lt=Lt._next):(wt=Lt._next,Lt._next=null,Lt=lt?lt._next=wt:F=wt);B=lt,yt(Gt)}function yt(lt){if(!T){j&&(j=clearTimeout(j));var Lt=lt-N;Lt>24?(lt<Infinity&&(j=setTimeout(q,lt-D.now()-A)),y&&(y=clearInterval(y))):(y||(R=D.now(),y=setInterval(ct,U)),T=1,M(q))}}},70681:function(Vt,P,S){Vt.exports={graphlib:S(70574),layout:S(98123),debug:S(27570),util:{time:S(11138).time,notime:S(11138).notime},version:S(88177)}},92188:function(Vt,P,S){"use strict";var T=S(38436),j=S(74079);Vt.exports={run:y,undo:F};function y(B){var R=B.graph().acyclicer==="greedy"?j(B,N(B)):U(B);T.forEach(R,function(A){var D=B.edge(A);B.removeEdge(A),D.forwardName=A.name,D.reversed=!0,B.setEdge(A.w,A.v,D,T.uniqueId("rev"))});function N(A){return function(D){return A.edge(D).weight}}}function U(B){var R=[],N={},A={};function D(M){T.has(A,M)||(A[M]=!0,N[M]=!0,T.forEach(B.outEdges(M),function(O){T.has(N,O.w)?R.push(O):D(O.w)}),delete N[M])}return T.forEach(B.nodes(),D),R}function F(B){T.forEach(B.edges(),function(R){var N=B.edge(R);if(N.reversed){B.removeEdge(R);var A=N.forwardName;delete N.reversed,delete N.forwardName,B.setEdge(R.w,R.v,N,A)}})}},61133:function(Vt,P,S){var T=S(38436),j=S(11138);Vt.exports=y;function y(F){function B(R){var N=F.children(R),A=F.node(R);if(N.length&&T.forEach(N,B),T.has(A,"minRank")){A.borderLeft=[],A.borderRight=[];for(var D=A.minRank,M=A.maxRank+1;D<M;++D)U(F,"borderLeft","_bl",R,A,D),U(F,"borderRight","_br",R,A,D)}}T.forEach(F.children(),B)}function U(F,B,R,N,A,D){var M={width:0,height:0,rank:D,borderType:B},O=A[B][D-1],k=j.addDummyNode(F,"border",M,R);A[B][D]=k,F.setParent(k,N),O&&F.setEdge(O,k,{weight:1})}},53258:function(Vt,P,S){"use strict";var T=S(38436);Vt.exports={adjust:j,undo:y};function j(D){var M=D.graph().rankdir.toLowerCase();(M==="lr"||M==="rl")&&U(D)}function y(D){var M=D.graph().rankdir.toLowerCase();(M==="bt"||M==="rl")&&B(D),(M==="lr"||M==="rl")&&(N(D),U(D))}function U(D){T.forEach(D.nodes(),function(M){F(D.node(M))}),T.forEach(D.edges(),function(M){F(D.edge(M))})}function F(D){var M=D.width;D.width=D.height,D.height=M}function B(D){T.forEach(D.nodes(),function(M){R(D.node(M))}),T.forEach(D.edges(),function(M){var O=D.edge(M);T.forEach(O.points,R),T.has(O,"y")&&R(O)})}function R(D){D.y=-D.y}function N(D){T.forEach(D.nodes(),function(M){A(D.node(M))}),T.forEach(D.edges(),function(M){var O=D.edge(M);T.forEach(O.points,A),T.has(O,"x")&&A(O)})}function A(D){var M=D.x;D.x=D.y,D.y=M}},77822:function(Vt){Vt.exports=P;function P(){var j={};j._next=j._prev=j,this._sentinel=j}P.prototype.dequeue=function(){var j=this._sentinel,y=j._prev;if(y!==j)return S(y),y},P.prototype.enqueue=function(j){var y=this._sentinel;j._prev&&j._next&&S(j),j._next=y._next,y._next._prev=j,y._next=j,j._prev=y},P.prototype.toString=function(){for(var j=[],y=this._sentinel,U=y._prev;U!==y;)j.push(JSON.stringify(U,T)),U=U._prev;return"["+j.join(", ")+"]"};function S(j){j._prev._next=j._next,j._next._prev=j._prev,delete j._next,delete j._prev}function T(j,y){if(j!=="_next"&&j!=="_prev")return y}},27570:function(Vt,P,S){var T=S(38436),j=S(11138),y=S(70574).Graph;Vt.exports={debugOrdering:U};function U(F){var B=j.buildLayerMatrix(F),R=new y({compound:!0,multigraph:!0}).setGraph({});return T.forEach(F.nodes(),function(N){R.setNode(N,{label:N}),R.setParent(N,"layer"+F.node(N).rank)}),T.forEach(F.edges(),function(N){R.setEdge(N.v,N.w,{},N.name)}),T.forEach(B,function(N,A){var D="layer"+A;R.setNode(D,{rank:"same"}),T.reduce(N,function(M,O){return R.setEdge(M,O,{style:"invis"}),O})}),R}},70574:function(Vt,P,S){var T;try{T=S(28282)}catch(j){}T||(T=window.graphlib),Vt.exports=T},74079:function(Vt,P,S){var T=S(38436),j=S(70574).Graph,y=S(77822);Vt.exports=F;var U=T.constant(1);function F(D,M){if(D.nodeCount()<=1)return[];var O=N(D,M||U),k=B(O.graph,O.buckets,O.zeroIdx);return T.flatten(T.map(k,function(V){return D.outEdges(V.v,V.w)}),!0)}function B(D,M,O){for(var k=[],V=M[M.length-1],X=M[0],K;D.nodeCount();){for(;K=X.dequeue();)R(D,M,O,K);for(;K=V.dequeue();)R(D,M,O,K);if(D.nodeCount()){for(var q=M.length-2;q>0;--q)if(K=M[q].dequeue(),K){k=k.concat(R(D,M,O,K,!0));break}}}return k}function R(D,M,O,k,V){var X=V?[]:void 0;return T.forEach(D.inEdges(k.v),function(K){var q=D.edge(K),ct=D.node(K.v);V&&X.push({v:K.v,w:K.w}),ct.out-=q,A(M,O,ct)}),T.forEach(D.outEdges(k.v),function(K){var q=D.edge(K),ct=K.w,_t=D.node(ct);_t.in-=q,A(M,O,_t)}),D.removeNode(k.v),X}function N(D,M){var O=new j,k=0,V=0;T.forEach(D.nodes(),function(q){O.setNode(q,{v:q,in:0,out:0})}),T.forEach(D.edges(),function(q){var ct=O.edge(q.v,q.w)||0,_t=M(q),yt=ct+_t;O.setEdge(q.v,q.w,yt),V=Math.max(V,O.node(q.v).out+=_t),k=Math.max(k,O.node(q.w).in+=_t)});var X=T.range(V+k+3).map(function(){return new y}),K=k+1;return T.forEach(O.nodes(),function(q){A(X,K,O.node(q))}),{graph:O,buckets:X,zeroIdx:K}}function A(D,M,O){O.out?O.in?D[O.out-O.in+M].enqueue(O):D[D.length-1].enqueue(O):D[0].enqueue(O)}},98123:function(Vt,P,S){"use strict";var T=S(38436),j=S(92188),y=S(45995),U=S(78093),F=S(11138).normalizeRanks,B=S(24219),R=S(11138).removeEmptyRanks,N=S(72981),A=S(61133),D=S(53258),M=S(53408),O=S(17873),k=S(11138),V=S(70574).Graph;Vt.exports=X;function X(Kt,Jt){var ue=Jt&&Jt.debugTiming?k.time:k.notime;ue("layout",function(){var ce=ue("  buildLayoutGraph",function(){return Qt(Kt)});ue("  runLayout",function(){K(ce,ue)}),ue("  updateInputGraph",function(){q(Kt,ce)})})}function K(Kt,Jt){Jt("    makeSpaceForEdgeLabels",function(){it(Kt)}),Jt("    removeSelfEdges",function(){d(Kt)}),Jt("    acyclic",function(){j.run(Kt)}),Jt("    nestingGraph.run",function(){N.run(Kt)}),Jt("    rank",function(){U(k.asNonCompoundGraph(Kt))}),Jt("    injectEdgeLabelProxies",function(){dt(Kt)}),Jt("    removeEmptyRanks",function(){R(Kt)}),Jt("    nestingGraph.cleanup",function(){N.cleanup(Kt)}),Jt("    normalizeRanks",function(){F(Kt)}),Jt("    assignRankMinMax",function(){gt(Kt)}),Jt("    removeEdgeLabelProxies",function(){vt(Kt)}),Jt("    normalize.run",function(){y.run(Kt)}),Jt("    parentDummyChains",function(){B(Kt)}),Jt("    addBorderSegments",function(){A(Kt)}),Jt("    order",function(){M(Kt)}),Jt("    insertSelfEdges",function(){It(Kt)}),Jt("    adjustCoordinateSystem",function(){D.adjust(Kt)}),Jt("    position",function(){O(Kt)}),Jt("    positionSelfEdges",function(){Ht(Kt)}),Jt("    removeBorderNodes",function(){st(Kt)}),Jt("    normalize.undo",function(){y.undo(Kt)}),Jt("    fixupEdgeLabelCoords",function(){nt(Kt)}),Jt("    undoCoordinateSystem",function(){D.undo(Kt)}),Jt("    translateGraph",function(){Y(Kt)}),Jt("    assignNodeIntersects",function(){ot(Kt)}),Jt("    reversePoints",function(){rt(Kt)}),Jt("    acyclic.undo",function(){j.undo(Kt)})}function q(Kt,Jt){T.forEach(Kt.nodes(),function(ue){var ce=Kt.node(ue),$t=Jt.node(ue);ce&&(ce.x=$t.x,ce.y=$t.y,Jt.children(ue).length&&(ce.width=$t.width,ce.height=$t.height))}),T.forEach(Kt.edges(),function(ue){var ce=Kt.edge(ue),$t=Jt.edge(ue);ce.points=$t.points,T.has($t,"x")&&(ce.x=$t.x,ce.y=$t.y)}),Kt.graph().width=Jt.graph().width,Kt.graph().height=Jt.graph().height}var ct=["nodesep","edgesep","ranksep","marginx","marginy"],_t={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yt=["acyclicer","ranker","rankdir","align"],lt=["width","height"],Lt={width:0,height:0},wt=["minlen","weight","width","height","labeloffset"],Gt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},re=["labelpos"];function Qt(Kt){var Jt=new V({multigraph:!0,compound:!0}),ue=Xt(Kt.graph());return Jt.setGraph(T.merge({},_t,kt(ue,ct),T.pick(ue,yt))),T.forEach(Kt.nodes(),function(ce){var $t=Xt(Kt.node(ce));Jt.setNode(ce,T.defaults(kt($t,lt),Lt)),Jt.setParent(ce,Kt.parent(ce))}),T.forEach(Kt.edges(),function(ce){var $t=Xt(Kt.edge(ce));Jt.setEdge(ce,T.merge({},Gt,kt($t,wt),T.pick($t,re)))}),Jt}function it(Kt){var Jt=Kt.graph();Jt.ranksep/=2,T.forEach(Kt.edges(),function(ue){var ce=Kt.edge(ue);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(Jt.rankdir==="TB"||Jt.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})}function dt(Kt){T.forEach(Kt.edges(),function(Jt){var ue=Kt.edge(Jt);if(ue.width&&ue.height){var ce=Kt.node(Jt.v),$t=Kt.node(Jt.w),Ut={rank:($t.rank-ce.rank)/2+ce.rank,e:Jt};k.addDummyNode(Kt,"edge-proxy",Ut,"_ep")}})}function gt(Kt){var Jt=0;T.forEach(Kt.nodes(),function(ue){var ce=Kt.node(ue);ce.borderTop&&(ce.minRank=Kt.node(ce.borderTop).rank,ce.maxRank=Kt.node(ce.borderBottom).rank,Jt=T.max(Jt,ce.maxRank))}),Kt.graph().maxRank=Jt}function vt(Kt){T.forEach(Kt.nodes(),function(Jt){var ue=Kt.node(Jt);ue.dummy==="edge-proxy"&&(Kt.edge(ue.e).labelRank=ue.rank,Kt.removeNode(Jt))})}function Y(Kt){var Jt=Number.POSITIVE_INFINITY,ue=0,ce=Number.POSITIVE_INFINITY,$t=0,Ut=Kt.graph(),Rt=Ut.marginx||0,Pt=Ut.marginy||0;function Yt(Dt){var Nt=Dt.x,ne=Dt.y,ve=Dt.width,Re=Dt.height;Jt=Math.min(Jt,Nt-ve/2),ue=Math.max(ue,Nt+ve/2),ce=Math.min(ce,ne-Re/2),$t=Math.max($t,ne+Re/2)}T.forEach(Kt.nodes(),function(Dt){Yt(Kt.node(Dt))}),T.forEach(Kt.edges(),function(Dt){var Nt=Kt.edge(Dt);T.has(Nt,"x")&&Yt(Nt)}),Jt-=Rt,ce-=Pt,T.forEach(Kt.nodes(),function(Dt){var Nt=Kt.node(Dt);Nt.x-=Jt,Nt.y-=ce}),T.forEach(Kt.edges(),function(Dt){var Nt=Kt.edge(Dt);T.forEach(Nt.points,function(ne){ne.x-=Jt,ne.y-=ce}),T.has(Nt,"x")&&(Nt.x-=Jt),T.has(Nt,"y")&&(Nt.y-=ce)}),Ut.width=ue-Jt+Rt,Ut.height=$t-ce+Pt}function ot(Kt){T.forEach(Kt.edges(),function(Jt){var ue=Kt.edge(Jt),ce=Kt.node(Jt.v),$t=Kt.node(Jt.w),Ut,Rt;ue.points?(Ut=ue.points[0],Rt=ue.points[ue.points.length-1]):(ue.points=[],Ut=$t,Rt=ce),ue.points.unshift(k.intersectRect(ce,Ut)),ue.points.push(k.intersectRect($t,Rt))})}function nt(Kt){T.forEach(Kt.edges(),function(Jt){var ue=Kt.edge(Jt);if(T.has(ue,"x"))switch((ue.labelpos==="l"||ue.labelpos==="r")&&(ue.width-=ue.labeloffset),ue.labelpos){case"l":ue.x-=ue.width/2+ue.labeloffset;break;case"r":ue.x+=ue.width/2+ue.labeloffset;break}})}function rt(Kt){T.forEach(Kt.edges(),function(Jt){var ue=Kt.edge(Jt);ue.reversed&&ue.points.reverse()})}function st(Kt){T.forEach(Kt.nodes(),function(Jt){if(Kt.children(Jt).length){var ue=Kt.node(Jt),ce=Kt.node(ue.borderTop),$t=Kt.node(ue.borderBottom),Ut=Kt.node(T.last(ue.borderLeft)),Rt=Kt.node(T.last(ue.borderRight));ue.width=Math.abs(Rt.x-Ut.x),ue.height=Math.abs($t.y-ce.y),ue.x=Ut.x+ue.width/2,ue.y=ce.y+ue.height/2}}),T.forEach(Kt.nodes(),function(Jt){Kt.node(Jt).dummy==="border"&&Kt.removeNode(Jt)})}function d(Kt){T.forEach(Kt.edges(),function(Jt){if(Jt.v===Jt.w){var ue=Kt.node(Jt.v);ue.selfEdges||(ue.selfEdges=[]),ue.selfEdges.push({e:Jt,label:Kt.edge(Jt)}),Kt.removeEdge(Jt)}})}function It(Kt){var Jt=k.buildLayerMatrix(Kt);T.forEach(Jt,function(ue){var ce=0;T.forEach(ue,function($t,Ut){var Rt=Kt.node($t);Rt.order=Ut+ce,T.forEach(Rt.selfEdges,function(Pt){k.addDummyNode(Kt,"selfedge",{width:Pt.label.width,height:Pt.label.height,rank:Rt.rank,order:Ut+ ++ce,e:Pt.e,label:Pt.label},"_se")}),delete Rt.selfEdges})})}function Ht(Kt){T.forEach(Kt.nodes(),function(Jt){var ue=Kt.node(Jt);if(ue.dummy==="selfedge"){var ce=Kt.node(ue.e.v),$t=ce.x+ce.width/2,Ut=ce.y,Rt=ue.x-$t,Pt=ce.height/2;Kt.setEdge(ue.e,ue.label),Kt.removeNode(Jt),ue.label.points=[{x:$t+2*Rt/3,y:Ut-Pt},{x:$t+5*Rt/6,y:Ut-Pt},{x:$t+Rt,y:Ut},{x:$t+5*Rt/6,y:Ut+Pt},{x:$t+2*Rt/3,y:Ut+Pt}],ue.label.x=ue.x,ue.label.y=ue.y}})}function kt(Kt,Jt){return T.mapValues(T.pick(Kt,Jt),Number)}function Xt(Kt){var Jt={};return T.forEach(Kt,function(ue,ce){Jt[ce.toLowerCase()]=ue}),Jt}},38436:function(Vt,P,S){var T;try{T={cloneDeep:S(50361),constant:S(75703),defaults:S(91747),each:S(66073),filter:S(63105),find:S(13311),flatten:S(85564),forEach:S(84486),forIn:S(62620),has:S(18721),isUndefined:S(52353),last:S(10928),map:S(35161),mapValues:S(66604),max:S(6162),merge:S(82492),min:S(53632),minBy:S(22762),now:S(7771),pick:S(78718),range:S(96026),reduce:S(54061),sortBy:S(89734),uniqueId:S(73955),values:S(52628),zipObject:S(7287)}}catch(j){}T||(T=window._),Vt.exports=T},72981:function(Vt,P,S){var T=S(38436),j=S(11138);Vt.exports={run:y,cleanup:R};function y(N){var A=j.addDummyNode(N,"root",{},"_root"),D=F(N),M=T.max(T.values(D))-1,O=2*M+1;N.graph().nestingRoot=A,T.forEach(N.edges(),function(V){N.edge(V).minlen*=O});var k=B(N)+1;T.forEach(N.children(),function(V){U(N,A,O,k,M,D,V)}),N.graph().nodeRankFactor=O}function U(N,A,D,M,O,k,V){var X=N.children(V);if(!X.length){V!==A&&N.setEdge(A,V,{weight:0,minlen:D});return}var K=j.addBorderNode(N,"_bt"),q=j.addBorderNode(N,"_bb"),ct=N.node(V);N.setParent(K,V),ct.borderTop=K,N.setParent(q,V),ct.borderBottom=q,T.forEach(X,function(_t){U(N,A,D,M,O,k,_t);var yt=N.node(_t),lt=yt.borderTop?yt.borderTop:_t,Lt=yt.borderBottom?yt.borderBottom:_t,wt=yt.borderTop?M:2*M,Gt=lt!==Lt?1:O-k[V]+1;N.setEdge(K,lt,{weight:wt,minlen:Gt,nestingEdge:!0}),N.setEdge(Lt,q,{weight:wt,minlen:Gt,nestingEdge:!0})}),N.parent(V)||N.setEdge(A,K,{weight:0,minlen:O+k[V]})}function F(N){var A={};function D(M,O){var k=N.children(M);k&&k.length&&T.forEach(k,function(V){D(V,O+1)}),A[M]=O}return T.forEach(N.children(),function(M){D(M,1)}),A}function B(N){return T.reduce(N.edges(),function(A,D){return A+N.edge(D).weight},0)}function R(N){var A=N.graph();N.removeNode(A.nestingRoot),delete A.nestingRoot,T.forEach(N.edges(),function(D){var M=N.edge(D);M.nestingEdge&&N.removeEdge(D)})}},45995:function(Vt,P,S){"use strict";var T=S(38436),j=S(11138);Vt.exports={run:y,undo:F};function y(B){B.graph().dummyChains=[],T.forEach(B.edges(),function(R){U(B,R)})}function U(B,R){var N=R.v,A=B.node(N).rank,D=R.w,M=B.node(D).rank,O=R.name,k=B.edge(R),V=k.labelRank;if(M!==A+1){B.removeEdge(R);var X,K,q;for(q=0,++A;A<M;++q,++A)k.points=[],K={width:0,height:0,edgeLabel:k,edgeObj:R,rank:A},X=j.addDummyNode(B,"edge",K,"_d"),A===V&&(K.width=k.width,K.height=k.height,K.dummy="edge-label",K.labelpos=k.labelpos),B.setEdge(N,X,{weight:k.weight},O),q===0&&B.graph().dummyChains.push(X),N=X;B.setEdge(N,D,{weight:k.weight},O)}}function F(B){T.forEach(B.graph().dummyChains,function(R){var N=B.node(R),A=N.edgeLabel,D;for(B.setEdge(N.edgeObj,A);N.dummy;)D=B.successors(R)[0],B.removeNode(R),A.points.push({x:N.x,y:N.y}),N.dummy==="edge-label"&&(A.x=N.x,A.y=N.y,A.width=N.width,A.height=N.height),R=D,N=B.node(R)})}},55093:function(Vt,P,S){var T=S(38436);Vt.exports=j;function j(y,U,F){var B={},R;T.forEach(F,function(N){for(var A=y.parent(N),D,M;A;){if(D=y.parent(A),D?(M=B[D],B[D]=A):(M=R,R=A),M&&M!==A){U.setEdge(M,A);return}A=D}})}},35439:function(Vt,P,S){var T=S(38436);Vt.exports=j;function j(y,U){return T.map(U,function(F){var B=y.inEdges(F);if(B.length){var R=T.reduce(B,function(N,A){var D=y.edge(A),M=y.node(A.v);return{sum:N.sum+D.weight*M.order,weight:N.weight+D.weight}},{sum:0,weight:0});return{v:F,barycenter:R.sum/R.weight,weight:R.weight}}else return{v:F}})}},23128:function(Vt,P,S){var T=S(38436),j=S(70574).Graph;Vt.exports=y;function y(F,B,R){var N=U(F),A=new j({compound:!0}).setGraph({root:N}).setDefaultNodeLabel(function(D){return F.node(D)});return T.forEach(F.nodes(),function(D){var M=F.node(D),O=F.parent(D);(M.rank===B||M.minRank<=B&&B<=M.maxRank)&&(A.setNode(D),A.setParent(D,O||N),T.forEach(F[R](D),function(k){var V=k.v===D?k.w:k.v,X=A.edge(V,D),K=T.isUndefined(X)?0:X.weight;A.setEdge(V,D,{weight:F.edge(k).weight+K})}),T.has(M,"minRank")&&A.setNode(D,{borderLeft:M.borderLeft[B],borderRight:M.borderRight[B]}))}),A}function U(F){for(var B;F.hasNode(B=T.uniqueId("_root")););return B}},56630:function(Vt,P,S){"use strict";var T=S(38436);Vt.exports=j;function j(U,F){for(var B=0,R=1;R<F.length;++R)B+=y(U,F[R-1],F[R]);return B}function y(U,F,B){for(var R=T.zipObject(B,T.map(B,function(k,V){return V})),N=T.flatten(T.map(F,function(k){return T.sortBy(T.map(U.outEdges(k),function(V){return{pos:R[V.w],weight:U.edge(V).weight}}),"pos")}),!0),A=1;A<B.length;)A<<=1;var D=2*A-1;A-=1;var M=T.map(new Array(D),function(){return 0}),O=0;return T.forEach(N.forEach(function(k){var V=k.pos+A;M[V]+=k.weight;for(var X=0;V>0;)V%2&&(X+=M[V+1]),V=V-1>>1,M[V]+=k.weight;O+=k.weight*X})),O}},53408:function(Vt,P,S){"use strict";var T=S(38436),j=S(2588),y=S(56630),U=S(61026),F=S(23128),B=S(55093),R=S(70574).Graph,N=S(11138);Vt.exports=A;function A(k){var V=N.maxRank(k),X=D(k,T.range(1,V+1),"inEdges"),K=D(k,T.range(V-1,-1,-1),"outEdges"),q=j(k);O(k,q);for(var ct=Number.POSITIVE_INFINITY,_t,yt=0,lt=0;lt<4;++yt,++lt){M(yt%2?X:K,yt%4>=2),q=N.buildLayerMatrix(k);var Lt=y(k,q);Lt<ct&&(lt=0,_t=T.cloneDeep(q),ct=Lt)}O(k,_t)}function D(k,V,X){return T.map(V,function(K){return F(k,K,X)})}function M(k,V){var X=new R;T.forEach(k,function(K){var q=K.graph().root,ct=U(K,q,X,V);T.forEach(ct.vs,function(_t,yt){K.node(_t).order=yt}),B(K,X,ct.vs)})}function O(k,V){T.forEach(V,function(X){T.forEach(X,function(K,q){k.node(K).order=q})})}},2588:function(Vt,P,S){"use strict";var T=S(38436);Vt.exports=j;function j(y){var U={},F=T.filter(y.nodes(),function(D){return!y.children(D).length}),B=T.max(T.map(F,function(D){return y.node(D).rank})),R=T.map(T.range(B+1),function(){return[]});function N(D){if(!T.has(U,D)){U[D]=!0;var M=y.node(D);R[M.rank].push(D),T.forEach(y.successors(D),N)}}var A=T.sortBy(F,function(D){return y.node(D).rank});return T.forEach(A,N),R}},83678:function(Vt,P,S){"use strict";var T=S(38436);Vt.exports=j;function j(F,B){var R={};T.forEach(F,function(A,D){var M=R[A.v]={indegree:0,in:[],out:[],vs:[A.v],i:D};T.isUndefined(A.barycenter)||(M.barycenter=A.barycenter,M.weight=A.weight)}),T.forEach(B.edges(),function(A){var D=R[A.v],M=R[A.w];!T.isUndefined(D)&&!T.isUndefined(M)&&(M.indegree++,D.out.push(R[A.w]))});var N=T.filter(R,function(A){return!A.indegree});return y(N)}function y(F){var B=[];function R(D){return function(M){M.merged||(T.isUndefined(M.barycenter)||T.isUndefined(D.barycenter)||M.barycenter>=D.barycenter)&&U(D,M)}}function N(D){return function(M){M.in.push(D),--M.indegree==0&&F.push(M)}}for(;F.length;){var A=F.pop();B.push(A),T.forEach(A.in.reverse(),R(A)),T.forEach(A.out,N(A))}return T.map(T.filter(B,function(D){return!D.merged}),function(D){return T.pick(D,["vs","i","barycenter","weight"])})}function U(F,B){var R=0,N=0;F.weight&&(R+=F.barycenter*F.weight,N+=F.weight),B.weight&&(R+=B.barycenter*B.weight,N+=B.weight),F.vs=B.vs.concat(F.vs),F.barycenter=R/N,F.weight=N,F.i=Math.min(B.i,F.i),B.merged=!0}},61026:function(Vt,P,S){var T=S(38436),j=S(35439),y=S(83678),U=S(87304);Vt.exports=F;function F(N,A,D,M){var O=N.children(A),k=N.node(A),V=k?k.borderLeft:void 0,X=k?k.borderRight:void 0,K={};V&&(O=T.filter(O,function(Lt){return Lt!==V&&Lt!==X}));var q=j(N,O);T.forEach(q,function(Lt){if(N.children(Lt.v).length){var wt=F(N,Lt.v,D,M);K[Lt.v]=wt,T.has(wt,"barycenter")&&R(Lt,wt)}});var ct=y(q,D);B(ct,K);var _t=U(ct,M);if(V&&(_t.vs=T.flatten([V,_t.vs,X],!0),N.predecessors(V).length)){var yt=N.node(N.predecessors(V)[0]),lt=N.node(N.predecessors(X)[0]);T.has(_t,"barycenter")||(_t.barycenter=0,_t.weight=0),_t.barycenter=(_t.barycenter*_t.weight+yt.order+lt.order)/(_t.weight+2),_t.weight+=2}return _t}function B(N,A){T.forEach(N,function(D){D.vs=T.flatten(D.vs.map(function(M){return A[M]?A[M].vs:M}),!0)})}function R(N,A){T.isUndefined(N.barycenter)?(N.barycenter=A.barycenter,N.weight=A.weight):(N.barycenter=(N.barycenter*N.weight+A.barycenter*A.weight)/(N.weight+A.weight),N.weight+=A.weight)}},87304:function(Vt,P,S){var T=S(38436),j=S(11138);Vt.exports=y;function y(B,R){var N=j.partition(B,function(K){return T.has(K,"barycenter")}),A=N.lhs,D=T.sortBy(N.rhs,function(K){return-K.i}),M=[],O=0,k=0,V=0;A.sort(F(!!R)),V=U(M,D,V),T.forEach(A,function(K){V+=K.vs.length,M.push(K.vs),O+=K.barycenter*K.weight,k+=K.weight,V=U(M,D,V)});var X={vs:T.flatten(M,!0)};return k&&(X.barycenter=O/k,X.weight=k),X}function U(B,R,N){for(var A;R.length&&(A=T.last(R)).i<=N;)R.pop(),B.push(A.vs),N++;return N}function F(B){return function(R,N){return R.barycenter<N.barycenter?-1:R.barycenter>N.barycenter?1:B?N.i-R.i:R.i-N.i}}},24219:function(Vt,P,S){var T=S(38436);Vt.exports=j;function j(F){var B=U(F);T.forEach(F.graph().dummyChains,function(R){for(var N=F.node(R),A=N.edgeObj,D=y(F,B,A.v,A.w),M=D.path,O=D.lca,k=0,V=M[k],X=!0;R!==A.w;){if(N=F.node(R),X){for(;(V=M[k])!==O&&F.node(V).maxRank<N.rank;)k++;V===O&&(X=!1)}if(!X){for(;k<M.length-1&&F.node(V=M[k+1]).minRank<=N.rank;)k++;V=M[k]}F.setParent(R,V),R=F.successors(R)[0]}})}function y(F,B,R,N){var A=[],D=[],M=Math.min(B[R].low,B[N].low),O=Math.max(B[R].lim,B[N].lim),k,V;k=R;do k=F.parent(k),A.push(k);while(k&&(B[k].low>M||O>B[k].lim));for(V=k,k=N;(k=F.parent(k))!==V;)D.push(k);return{path:A.concat(D.reverse()),lca:V}}function U(F){var B={},R=0;function N(A){var D=R;T.forEach(F.children(A),N),B[A]={low:D,lim:R++}}return T.forEach(F.children(),N),B}},3573:function(Vt,P,S){"use strict";var T=S(38436),j=S(70574).Graph,y=S(11138);Vt.exports={positionX:X,findType1Conflicts:U,findType2Conflicts:F,addConflict:R,hasConflict:N,verticalAlignment:A,horizontalCompaction:D,alignCoordinates:k,findSmallestWidthAlignment:O,balance:V};function U(ct,_t){var yt={};function lt(Lt,wt){var Gt=0,re=0,Qt=Lt.length,it=T.last(wt);return T.forEach(wt,function(dt,gt){var vt=B(ct,dt),Y=vt?ct.node(vt).order:Qt;(vt||dt===it)&&(T.forEach(wt.slice(re,gt+1),function(ot){T.forEach(ct.predecessors(ot),function(nt){var rt=ct.node(nt),st=rt.order;(st<Gt||Y<st)&&!(rt.dummy&&ct.node(ot).dummy)&&R(yt,nt,ot)})}),re=gt+1,Gt=Y)}),wt}return T.reduce(_t,lt),yt}function F(ct,_t){var yt={};function lt(wt,Gt,re,Qt,it){var dt;T.forEach(T.range(Gt,re),function(gt){dt=wt[gt],ct.node(dt).dummy&&T.forEach(ct.predecessors(dt),function(vt){var Y=ct.node(vt);Y.dummy&&(Y.order<Qt||Y.order>it)&&R(yt,vt,dt)})})}function Lt(wt,Gt){var re=-1,Qt,it=0;return T.forEach(Gt,function(dt,gt){if(ct.node(dt).dummy==="border"){var vt=ct.predecessors(dt);vt.length&&(Qt=ct.node(vt[0]).order,lt(Gt,it,gt,re,Qt),it=gt,re=Qt)}lt(Gt,it,Gt.length,Qt,wt.length)}),Gt}return T.reduce(_t,Lt),yt}function B(ct,_t){if(ct.node(_t).dummy)return T.find(ct.predecessors(_t),function(yt){return ct.node(yt).dummy})}function R(ct,_t,yt){if(_t>yt){var lt=_t;_t=yt,yt=lt}var Lt=ct[_t];Lt||(ct[_t]=Lt={}),Lt[yt]=!0}function N(ct,_t,yt){if(_t>yt){var lt=_t;_t=yt,yt=lt}return T.has(ct[_t],yt)}function A(ct,_t,yt,lt){var Lt={},wt={},Gt={};return T.forEach(_t,function(re){T.forEach(re,function(Qt,it){Lt[Qt]=Qt,wt[Qt]=Qt,Gt[Qt]=it})}),T.forEach(_t,function(re){var Qt=-1;T.forEach(re,function(it){var dt=lt(it);if(dt.length){dt=T.sortBy(dt,function(nt){return Gt[nt]});for(var gt=(dt.length-1)/2,vt=Math.floor(gt),Y=Math.ceil(gt);vt<=Y;++vt){var ot=dt[vt];wt[it]===it&&Qt<Gt[ot]&&!N(yt,it,ot)&&(wt[ot]=it,wt[it]=Lt[it]=Lt[ot],Qt=Gt[ot])}}})}),{root:Lt,align:wt}}function D(ct,_t,yt,lt,Lt){var wt={},Gt=M(ct,_t,yt,Lt),re=Lt?"borderLeft":"borderRight";function Qt(gt,vt){for(var Y=Gt.nodes(),ot=Y.pop(),nt={};ot;)nt[ot]?gt(ot):(nt[ot]=!0,Y.push(ot),Y=Y.concat(vt(ot))),ot=Y.pop()}function it(gt){wt[gt]=Gt.inEdges(gt).reduce(function(vt,Y){return Math.max(vt,wt[Y.v]+Gt.edge(Y))},0)}function dt(gt){var vt=Gt.outEdges(gt).reduce(function(ot,nt){return Math.min(ot,wt[nt.w]-Gt.edge(nt))},Number.POSITIVE_INFINITY),Y=ct.node(gt);vt!==Number.POSITIVE_INFINITY&&Y.borderType!==re&&(wt[gt]=Math.max(wt[gt],vt))}return Qt(it,Gt.predecessors.bind(Gt)),Qt(dt,Gt.successors.bind(Gt)),T.forEach(lt,function(gt){wt[gt]=wt[yt[gt]]}),wt}function M(ct,_t,yt,lt){var Lt=new j,wt=ct.graph(),Gt=K(wt.nodesep,wt.edgesep,lt);return T.forEach(_t,function(re){var Qt;T.forEach(re,function(it){var dt=yt[it];if(Lt.setNode(dt),Qt){var gt=yt[Qt],vt=Lt.edge(gt,dt);Lt.setEdge(gt,dt,Math.max(Gt(ct,it,Qt),vt||0))}Qt=it})}),Lt}function O(ct,_t){return T.minBy(T.values(_t),function(yt){var lt=Number.NEGATIVE_INFINITY,Lt=Number.POSITIVE_INFINITY;return T.forIn(yt,function(wt,Gt){var re=q(ct,Gt)/2;lt=Math.max(wt+re,lt),Lt=Math.min(wt-re,Lt)}),lt-Lt})}function k(ct,_t){var yt=T.values(_t),lt=T.min(yt),Lt=T.max(yt);T.forEach(["u","d"],function(wt){T.forEach(["l","r"],function(Gt){var re=wt+Gt,Qt=ct[re],it;if(Qt!==_t){var dt=T.values(Qt);it=Gt==="l"?lt-T.min(dt):Lt-T.max(dt),it&&(ct[re]=T.mapValues(Qt,function(gt){return gt+it}))}})})}function V(ct,_t){return T.mapValues(ct.ul,function(yt,lt){if(_t)return ct[_t.toLowerCase()][lt];var Lt=T.sortBy(T.map(ct,lt));return(Lt[1]+Lt[2])/2})}function X(ct){var _t=y.buildLayerMatrix(ct),yt=T.merge(U(ct,_t),F(ct,_t)),lt={},Lt;T.forEach(["u","d"],function(Gt){Lt=Gt==="u"?_t:T.values(_t).reverse(),T.forEach(["l","r"],function(re){re==="r"&&(Lt=T.map(Lt,function(gt){return T.values(gt).reverse()}));var Qt=(Gt==="u"?ct.predecessors:ct.successors).bind(ct),it=A(ct,Lt,yt,Qt),dt=D(ct,Lt,it.root,it.align,re==="r");re==="r"&&(dt=T.mapValues(dt,function(gt){return-gt})),lt[Gt+re]=dt})});var wt=O(ct,lt);return k(lt,wt),V(lt,ct.graph().align)}function K(ct,_t,yt){return function(lt,Lt,wt){var Gt=lt.node(Lt),re=lt.node(wt),Qt=0,it;if(Qt+=Gt.width/2,T.has(Gt,"labelpos"))switch(Gt.labelpos.toLowerCase()){case"l":it=-Gt.width/2;break;case"r":it=Gt.width/2;break}if(it&&(Qt+=yt?it:-it),it=0,Qt+=(Gt.dummy?_t:ct)/2,Qt+=(re.dummy?_t:ct)/2,Qt+=re.width/2,T.has(re,"labelpos"))switch(re.labelpos.toLowerCase()){case"l":it=re.width/2;break;case"r":it=-re.width/2;break}return it&&(Qt+=yt?it:-it),it=0,Qt}}function q(ct,_t){return ct.node(_t).width}},17873:function(Vt,P,S){"use strict";var T=S(38436),j=S(11138),y=S(3573).positionX;Vt.exports=U;function U(B){B=j.asNonCompoundGraph(B),F(B),T.forEach(y(B),function(R,N){B.node(N).x=R})}function F(B){var R=j.buildLayerMatrix(B),N=B.graph().ranksep,A=0;T.forEach(R,function(D){var M=T.max(T.map(D,function(O){return B.node(O).height}));T.forEach(D,function(O){B.node(O).y=A+M/2}),A+=M+N})}},20300:function(Vt,P,S){"use strict";var T=S(38436),j=S(70574).Graph,y=S(76681).slack;Vt.exports=U;function U(N){var A=new j({directed:!1}),D=N.nodes()[0],M=N.nodeCount();A.setNode(D,{});for(var O,k;F(A,N)<M;)O=B(A,N),k=A.hasNode(O.v)?y(N,O):-y(N,O),R(A,N,k);return A}function F(N,A){function D(M){T.forEach(A.nodeEdges(M),function(O){var k=O.v,V=M===k?O.w:k;!N.hasNode(V)&&!y(A,O)&&(N.setNode(V,{}),N.setEdge(M,V,{}),D(V))})}return T.forEach(N.nodes(),D),N.nodeCount()}function B(N,A){return T.minBy(A.edges(),function(D){if(N.hasNode(D.v)!==N.hasNode(D.w))return y(A,D)})}function R(N,A,D){T.forEach(N.nodes(),function(M){A.node(M).rank+=D})}},78093:function(Vt,P,S){"use strict";var T=S(76681),j=T.longestPath,y=S(20300),U=S(42472);Vt.exports=F;function F(A){switch(A.graph().ranker){case"network-simplex":N(A);break;case"tight-tree":R(A);break;case"longest-path":B(A);break;default:N(A)}}var B=j;function R(A){j(A),y(A)}function N(A){U(A)}},42472:function(Vt,P,S){"use strict";var T=S(38436),j=S(20300),y=S(76681).slack,U=S(76681).longestPath,F=S(70574).alg.preorder,B=S(70574).alg.postorder,R=S(11138).simplify;Vt.exports=N,N.initLowLimValues=O,N.initCutValues=A,N.calcCutValue=M,N.leaveEdge=V,N.enterEdge=X,N.exchangeEdges=K;function N(yt){yt=R(yt),U(yt);var lt=j(yt);O(lt),A(lt,yt);for(var Lt,wt;Lt=V(lt);)wt=X(lt,yt,Lt),K(lt,yt,Lt,wt)}function A(yt,lt){var Lt=B(yt,yt.nodes());Lt=Lt.slice(0,Lt.length-1),T.forEach(Lt,function(wt){D(yt,lt,wt)})}function D(yt,lt,Lt){var wt=yt.node(Lt),Gt=wt.parent;yt.edge(Lt,Gt).cutvalue=M(yt,lt,Lt)}function M(yt,lt,Lt){var wt=yt.node(Lt),Gt=wt.parent,re=!0,Qt=lt.edge(Lt,Gt),it=0;return Qt||(re=!1,Qt=lt.edge(Gt,Lt)),it=Qt.weight,T.forEach(lt.nodeEdges(Lt),function(dt){var gt=dt.v===Lt,vt=gt?dt.w:dt.v;if(vt!==Gt){var Y=gt===re,ot=lt.edge(dt).weight;if(it+=Y?ot:-ot,ct(yt,Lt,vt)){var nt=yt.edge(Lt,vt).cutvalue;it+=Y?-nt:nt}}}),it}function O(yt,lt){arguments.length<2&&(lt=yt.nodes()[0]),k(yt,{},1,lt)}function k(yt,lt,Lt,wt,Gt){var re=Lt,Qt=yt.node(wt);return lt[wt]=!0,T.forEach(yt.neighbors(wt),function(it){T.has(lt,it)||(Lt=k(yt,lt,Lt,it,wt))}),Qt.low=re,Qt.lim=Lt++,Gt?Qt.parent=Gt:delete Qt.parent,Lt}function V(yt){return T.find(yt.edges(),function(lt){return yt.edge(lt).cutvalue<0})}function X(yt,lt,Lt){var wt=Lt.v,Gt=Lt.w;lt.hasEdge(wt,Gt)||(wt=Lt.w,Gt=Lt.v);var re=yt.node(wt),Qt=yt.node(Gt),it=re,dt=!1;re.lim>Qt.lim&&(it=Qt,dt=!0);var gt=T.filter(lt.edges(),function(vt){return dt===_t(yt,yt.node(vt.v),it)&&dt!==_t(yt,yt.node(vt.w),it)});return T.minBy(gt,function(vt){return y(lt,vt)})}function K(yt,lt,Lt,wt){var Gt=Lt.v,re=Lt.w;yt.removeEdge(Gt,re),yt.setEdge(wt.v,wt.w,{}),O(yt),A(yt,lt),q(yt,lt)}function q(yt,lt){var Lt=T.find(yt.nodes(),function(Gt){return!lt.node(Gt).parent}),wt=F(yt,Lt);wt=wt.slice(1),T.forEach(wt,function(Gt){var re=yt.node(Gt).parent,Qt=lt.edge(Gt,re),it=!1;Qt||(Qt=lt.edge(re,Gt),it=!0),lt.node(Gt).rank=lt.node(re).rank+(it?Qt.minlen:-Qt.minlen)})}function ct(yt,lt,Lt){return yt.hasEdge(lt,Lt)}function _t(yt,lt,Lt){return Lt.low<=lt.lim&&lt.lim<=Lt.lim}},76681:function(Vt,P,S){"use strict";var T=S(38436);Vt.exports={longestPath:j,slack:y};function j(U){var F={};function B(R){var N=U.node(R);if(T.has(F,R))return N.rank;F[R]=!0;var A=T.min(T.map(U.outEdges(R),function(D){return B(D.w)-U.edge(D).minlen}));return(A===Number.POSITIVE_INFINITY||A===void 0||A===null)&&(A=0),N.rank=A}T.forEach(U.sources(),B)}function y(U,F){return U.node(F.w).rank-U.node(F.v).rank-U.edge(F).minlen}},11138:function(Vt,P,S){"use strict";var T=S(38436),j=S(70574).Graph;Vt.exports={addDummyNode:y,simplify:U,asNonCompoundGraph:F,successorWeights:B,predecessorWeights:R,intersectRect:N,buildLayerMatrix:A,normalizeRanks:D,removeEmptyRanks:M,addBorderNode:O,maxRank:k,partition:V,time:X,notime:K};function y(q,ct,_t,yt){var lt;do lt=T.uniqueId(yt);while(q.hasNode(lt));return _t.dummy=ct,q.setNode(lt,_t),lt}function U(q){var ct=new j().setGraph(q.graph());return T.forEach(q.nodes(),function(_t){ct.setNode(_t,q.node(_t))}),T.forEach(q.edges(),function(_t){var yt=ct.edge(_t.v,_t.w)||{weight:0,minlen:1},lt=q.edge(_t);ct.setEdge(_t.v,_t.w,{weight:yt.weight+lt.weight,minlen:Math.max(yt.minlen,lt.minlen)})}),ct}function F(q){var ct=new j({multigraph:q.isMultigraph()}).setGraph(q.graph());return T.forEach(q.nodes(),function(_t){q.children(_t).length||ct.setNode(_t,q.node(_t))}),T.forEach(q.edges(),function(_t){ct.setEdge(_t,q.edge(_t))}),ct}function B(q){var ct=T.map(q.nodes(),function(_t){var yt={};return T.forEach(q.outEdges(_t),function(lt){yt[lt.w]=(yt[lt.w]||0)+q.edge(lt).weight}),yt});return T.zipObject(q.nodes(),ct)}function R(q){var ct=T.map(q.nodes(),function(_t){var yt={};return T.forEach(q.inEdges(_t),function(lt){yt[lt.v]=(yt[lt.v]||0)+q.edge(lt).weight}),yt});return T.zipObject(q.nodes(),ct)}function N(q,ct){var _t=q.x,yt=q.y,lt=ct.x-_t,Lt=ct.y-yt,wt=q.width/2,Gt=q.height/2;if(!lt&&!Lt)throw new Error("Not possible to find intersection inside of the rectangle");var re,Qt;return Math.abs(Lt)*wt>Math.abs(lt)*Gt?(Lt<0&&(Gt=-Gt),re=Gt*lt/Lt,Qt=Gt):(lt<0&&(wt=-wt),re=wt,Qt=wt*Lt/lt),{x:_t+re,y:yt+Qt}}function A(q){var ct=T.map(T.range(k(q)+1),function(){return[]});return T.forEach(q.nodes(),function(_t){var yt=q.node(_t),lt=yt.rank;T.isUndefined(lt)||(ct[lt][yt.order]=_t)}),ct}function D(q){var ct=T.min(T.map(q.nodes(),function(_t){return q.node(_t).rank}));T.forEach(q.nodes(),function(_t){var yt=q.node(_t);T.has(yt,"rank")&&(yt.rank-=ct)})}function M(q){var ct=T.min(T.map(q.nodes(),function(Lt){return q.node(Lt).rank})),_t=[];T.forEach(q.nodes(),function(Lt){var wt=q.node(Lt).rank-ct;_t[wt]||(_t[wt]=[]),_t[wt].push(Lt)});var yt=0,lt=q.graph().nodeRankFactor;T.forEach(_t,function(Lt,wt){T.isUndefined(Lt)&&wt%lt!=0?--yt:yt&&T.forEach(Lt,function(Gt){q.node(Gt).rank+=yt})})}function O(q,ct,_t,yt){var lt={width:0,height:0};return arguments.length>=4&&(lt.rank=_t,lt.order=yt),y(q,"border",lt,ct)}function k(q){return T.max(T.map(q.nodes(),function(ct){var _t=q.node(ct).rank;if(!T.isUndefined(_t))return _t}))}function V(q,ct){var _t={lhs:[],rhs:[]};return T.forEach(q,function(yt){ct(yt)?_t.lhs.push(yt):_t.rhs.push(yt)}),_t}function X(q,ct){var _t=T.now();try{return ct()}finally{console.log(q+" time: "+(T.now()-_t)+"ms")}}function K(q,ct){return ct()}},88177:function(Vt){Vt.exports="0.8.5"},43631:function(Vt,P,S){"use strict";S.r(P),S.d(P,{BrowserInfo:function(){return y},NodeInfo:function(){return U},SearchBotDeviceInfo:function(){return F},BotInfo:function(){return B},ReactNativeInfo:function(){return R},detect:function(){return k},browserName:function(){return X},parseUserAgent:function(){return K},detectOS:function(){return q},getNodeVersion:function(){return ct}});var T=S(34155),j=function(yt,lt,Lt){if(Lt||arguments.length===2)for(var wt=0,Gt=lt.length,re;wt<Gt;wt++)(re||!(wt in lt))&&(re||(re=Array.prototype.slice.call(lt,0,wt)),re[wt]=lt[wt]);return yt.concat(re||Array.prototype.slice.call(lt))},y=function(){function yt(lt,Lt,wt){this.name=lt,this.version=Lt,this.os=wt,this.type="browser"}return yt}(),U=function(){function yt(lt){this.version=lt,this.type="node",this.name="node",this.os=T.platform}return yt}(),F=function(){function yt(lt,Lt,wt,Gt){this.name=lt,this.version=Lt,this.os=wt,this.bot=Gt,this.type="bot-device"}return yt}(),B=function(){function yt(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return yt}(),R=function(){function yt(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return yt}(),N=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,A=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,D=3,M=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",N]],O=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function k(yt){return yt?K(yt):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new R:typeof navigator!="undefined"?K(navigator.userAgent):ct()}function V(yt){return yt!==""&&M.reduce(function(lt,Lt){var wt=Lt[0],Gt=Lt[1];if(lt)return lt;var re=Gt.exec(yt);return!!re&&[wt,re]},!1)}function X(yt){var lt=V(yt);return lt?lt[0]:null}function K(yt){var lt=V(yt);if(!lt)return null;var Lt=lt[0],wt=lt[1];if(Lt==="searchbot")return new B;var Gt=wt[1]&&wt[1].split(".").join("_").split("_").slice(0,3);Gt?Gt.length<D&&(Gt=j(j([],Gt,!0),_t(D-Gt.length),!0)):Gt=[];var re=Gt.join("."),Qt=q(yt),it=A.exec(yt);return it&&it[1]?new F(Lt,re,Qt,it[1]):new y(Lt,re,Qt)}function q(yt){for(var lt=0,Lt=O.length;lt<Lt;lt++){var wt=O[lt],Gt=wt[0],re=wt[1],Qt=re.exec(yt);if(Qt)return Gt}return null}function ct(){var yt=typeof T!="undefined"&&T.version;return yt?new U(T.version.slice(1)):null}function _t(yt){for(var lt=[],Lt=0;Lt<yt;Lt++)lt.push("0");return lt}},9187:function(Vt){"use strict";Vt.exports=P,Vt.exports.default=P;function P(Y,ot,nt){nt=nt||2;var rt=ot&&ot.length,st=rt?ot[0]*nt:Y.length,d=S(Y,0,st,nt,!0),It=[];if(!d||d.next===d.prev)return It;var Ht,kt,Xt,Kt,Jt,ue,ce;if(rt&&(d=R(Y,ot,d,nt)),Y.length>80*nt){Ht=Xt=Y[0],kt=Kt=Y[1];for(var $t=nt;$t<st;$t+=nt)Jt=Y[$t],ue=Y[$t+1],Jt<Ht&&(Ht=Jt),ue<kt&&(kt=ue),Jt>Xt&&(Xt=Jt),ue>Kt&&(Kt=ue);ce=Math.max(Xt-Ht,Kt-kt),ce=ce!==0?1/ce:0}return j(d,It,nt,Ht,kt,ce),It}function S(Y,ot,nt,rt,st){var d,It;if(st===vt(Y,ot,nt,rt)>0)for(d=ot;d<nt;d+=rt)It=it(d,Y[d],Y[d+1],It);else for(d=nt-rt;d>=ot;d-=rt)It=it(d,Y[d],Y[d+1],It);return It&&_t(It,It.next)&&(dt(It),It=It.next),It}function T(Y,ot){if(!Y)return Y;ot||(ot=Y);var nt=Y,rt;do if(rt=!1,!nt.steiner&&(_t(nt,nt.next)||ct(nt.prev,nt,nt.next)===0)){if(dt(nt),nt=ot=nt.prev,nt===nt.next)break;rt=!0}else nt=nt.next;while(rt||nt!==ot);return ot}function j(Y,ot,nt,rt,st,d,It){if(!!Y){!It&&d&&O(Y,rt,st,d);for(var Ht=Y,kt,Xt;Y.prev!==Y.next;){if(kt=Y.prev,Xt=Y.next,d?U(Y,rt,st,d):y(Y)){ot.push(kt.i/nt),ot.push(Y.i/nt),ot.push(Xt.i/nt),dt(Y),Y=Xt.next,Ht=Xt.next;continue}if(Y=Xt,Y===Ht){It?It===1?(Y=F(T(Y),ot,nt),j(Y,ot,nt,rt,st,d,2)):It===2&&B(Y,ot,nt,rt,st,d):j(T(Y),ot,nt,rt,st,d,1);break}}}}function y(Y){var ot=Y.prev,nt=Y,rt=Y.next;if(ct(ot,nt,rt)>=0)return!1;for(var st=Y.next.next;st!==Y.prev;){if(K(ot.x,ot.y,nt.x,nt.y,rt.x,rt.y,st.x,st.y)&&ct(st.prev,st,st.next)>=0)return!1;st=st.next}return!0}function U(Y,ot,nt,rt){var st=Y.prev,d=Y,It=Y.next;if(ct(st,d,It)>=0)return!1;for(var Ht=st.x<d.x?st.x<It.x?st.x:It.x:d.x<It.x?d.x:It.x,kt=st.y<d.y?st.y<It.y?st.y:It.y:d.y<It.y?d.y:It.y,Xt=st.x>d.x?st.x>It.x?st.x:It.x:d.x>It.x?d.x:It.x,Kt=st.y>d.y?st.y>It.y?st.y:It.y:d.y>It.y?d.y:It.y,Jt=V(Ht,kt,ot,nt,rt),ue=V(Xt,Kt,ot,nt,rt),ce=Y.prevZ,$t=Y.nextZ;ce&&ce.z>=Jt&&$t&&$t.z<=ue;){if(ce!==Y.prev&&ce!==Y.next&&K(st.x,st.y,d.x,d.y,It.x,It.y,ce.x,ce.y)&&ct(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,$t!==Y.prev&&$t!==Y.next&&K(st.x,st.y,d.x,d.y,It.x,It.y,$t.x,$t.y)&&ct($t.prev,$t,$t.next)>=0))return!1;$t=$t.nextZ}for(;ce&&ce.z>=Jt;){if(ce!==Y.prev&&ce!==Y.next&&K(st.x,st.y,d.x,d.y,It.x,It.y,ce.x,ce.y)&&ct(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;$t&&$t.z<=ue;){if($t!==Y.prev&&$t!==Y.next&&K(st.x,st.y,d.x,d.y,It.x,It.y,$t.x,$t.y)&&ct($t.prev,$t,$t.next)>=0)return!1;$t=$t.nextZ}return!0}function F(Y,ot,nt){var rt=Y;do{var st=rt.prev,d=rt.next.next;!_t(st,d)&&yt(st,rt,rt.next,d)&&Gt(st,d)&&Gt(d,st)&&(ot.push(st.i/nt),ot.push(rt.i/nt),ot.push(d.i/nt),dt(rt),dt(rt.next),rt=Y=d),rt=rt.next}while(rt!==Y);return T(rt)}function B(Y,ot,nt,rt,st,d){var It=Y;do{for(var Ht=It.next.next;Ht!==It.prev;){if(It.i!==Ht.i&&q(It,Ht)){var kt=Qt(It,Ht);It=T(It,It.next),kt=T(kt,kt.next),j(It,ot,nt,rt,st,d),j(kt,ot,nt,rt,st,d);return}Ht=Ht.next}It=It.next}while(It!==Y)}function R(Y,ot,nt,rt){var st=[],d,It,Ht,kt,Xt;for(d=0,It=ot.length;d<It;d++)Ht=ot[d]*rt,kt=d<It-1?ot[d+1]*rt:Y.length,Xt=S(Y,Ht,kt,rt,!1),Xt===Xt.next&&(Xt.steiner=!0),st.push(X(Xt));for(st.sort(N),d=0;d<st.length;d++)nt=A(st[d],nt),nt=T(nt,nt.next);return nt}function N(Y,ot){return Y.x-ot.x}function A(Y,ot){var nt=D(Y,ot);if(!nt)return ot;var rt=Qt(nt,Y),st=T(nt,nt.next);return T(rt,rt.next),ot===nt?st:ot}function D(Y,ot){var nt=ot,rt=Y.x,st=Y.y,d=-Infinity,It;do{if(st<=nt.y&&st>=nt.next.y&&nt.next.y!==nt.y){var Ht=nt.x+(st-nt.y)*(nt.next.x-nt.x)/(nt.next.y-nt.y);if(Ht<=rt&&Ht>d){if(d=Ht,Ht===rt){if(st===nt.y)return nt;if(st===nt.next.y)return nt.next}It=nt.x<nt.next.x?nt:nt.next}}nt=nt.next}while(nt!==ot);if(!It)return null;if(rt===d)return It;var kt=It,Xt=It.x,Kt=It.y,Jt=Infinity,ue;nt=It;do rt>=nt.x&&nt.x>=Xt&&rt!==nt.x&&K(st<Kt?rt:d,st,Xt,Kt,st<Kt?d:rt,st,nt.x,nt.y)&&(ue=Math.abs(st-nt.y)/(rt-nt.x),Gt(nt,Y)&&(ue<Jt||ue===Jt&&(nt.x>It.x||nt.x===It.x&&M(It,nt)))&&(It=nt,Jt=ue)),nt=nt.next;while(nt!==kt);return It}function M(Y,ot){return ct(Y.prev,Y,ot.prev)<0&&ct(ot.next,Y,Y.next)<0}function O(Y,ot,nt,rt){var st=Y;do st.z===null&&(st.z=V(st.x,st.y,ot,nt,rt)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==Y);st.prevZ.nextZ=null,st.prevZ=null,k(st)}function k(Y){var ot,nt,rt,st,d,It,Ht,kt,Xt=1;do{for(nt=Y,Y=null,d=null,It=0;nt;){for(It++,rt=nt,Ht=0,ot=0;ot<Xt&&(Ht++,rt=rt.nextZ,!!rt);ot++);for(kt=Xt;Ht>0||kt>0&&rt;)Ht!==0&&(kt===0||!rt||nt.z<=rt.z)?(st=nt,nt=nt.nextZ,Ht--):(st=rt,rt=rt.nextZ,kt--),d?d.nextZ=st:Y=st,st.prevZ=d,d=st;nt=rt}d.nextZ=null,Xt*=2}while(It>1);return Y}function V(Y,ot,nt,rt,st){return Y=32767*(Y-nt)*st,ot=32767*(ot-rt)*st,Y=(Y|Y<<8)&16711935,Y=(Y|Y<<4)&252645135,Y=(Y|Y<<2)&858993459,Y=(Y|Y<<1)&1431655765,ot=(ot|ot<<8)&16711935,ot=(ot|ot<<4)&252645135,ot=(ot|ot<<2)&858993459,ot=(ot|ot<<1)&1431655765,Y|ot<<1}function X(Y){var ot=Y,nt=Y;do(ot.x<nt.x||ot.x===nt.x&&ot.y<nt.y)&&(nt=ot),ot=ot.next;while(ot!==Y);return nt}function K(Y,ot,nt,rt,st,d,It,Ht){return(st-It)*(ot-Ht)-(Y-It)*(d-Ht)>=0&&(Y-It)*(rt-Ht)-(nt-It)*(ot-Ht)>=0&&(nt-It)*(d-Ht)-(st-It)*(rt-Ht)>=0}function q(Y,ot){return Y.next.i!==ot.i&&Y.prev.i!==ot.i&&!wt(Y,ot)&&(Gt(Y,ot)&&Gt(ot,Y)&&re(Y,ot)&&(ct(Y.prev,Y,ot.prev)||ct(Y,ot.prev,ot))||_t(Y,ot)&&ct(Y.prev,Y,Y.next)>0&&ct(ot.prev,ot,ot.next)>0)}function ct(Y,ot,nt){return(ot.y-Y.y)*(nt.x-ot.x)-(ot.x-Y.x)*(nt.y-ot.y)}function _t(Y,ot){return Y.x===ot.x&&Y.y===ot.y}function yt(Y,ot,nt,rt){var st=Lt(ct(Y,ot,nt)),d=Lt(ct(Y,ot,rt)),It=Lt(ct(nt,rt,Y)),Ht=Lt(ct(nt,rt,ot));return!!(st!==d&&It!==Ht||st===0&&lt(Y,nt,ot)||d===0&&lt(Y,rt,ot)||It===0&&lt(nt,Y,rt)||Ht===0&&lt(nt,ot,rt))}function lt(Y,ot,nt){return ot.x<=Math.max(Y.x,nt.x)&&ot.x>=Math.min(Y.x,nt.x)&&ot.y<=Math.max(Y.y,nt.y)&&ot.y>=Math.min(Y.y,nt.y)}function Lt(Y){return Y>0?1:Y<0?-1:0}function wt(Y,ot){var nt=Y;do{if(nt.i!==Y.i&&nt.next.i!==Y.i&&nt.i!==ot.i&&nt.next.i!==ot.i&&yt(nt,nt.next,Y,ot))return!0;nt=nt.next}while(nt!==Y);return!1}function Gt(Y,ot){return ct(Y.prev,Y,Y.next)<0?ct(Y,ot,Y.next)>=0&&ct(Y,Y.prev,ot)>=0:ct(Y,ot,Y.prev)<0||ct(Y,Y.next,ot)<0}function re(Y,ot){var nt=Y,rt=!1,st=(Y.x+ot.x)/2,d=(Y.y+ot.y)/2;do nt.y>d!=nt.next.y>d&&nt.next.y!==nt.y&&st<(nt.next.x-nt.x)*(d-nt.y)/(nt.next.y-nt.y)+nt.x&&(rt=!rt),nt=nt.next;while(nt!==Y);return rt}function Qt(Y,ot){var nt=new gt(Y.i,Y.x,Y.y),rt=new gt(ot.i,ot.x,ot.y),st=Y.next,d=ot.prev;return Y.next=ot,ot.prev=Y,nt.next=st,st.prev=nt,rt.next=nt,nt.prev=rt,d.next=rt,rt.prev=d,rt}function it(Y,ot,nt,rt){var st=new gt(Y,ot,nt);return rt?(st.next=rt.next,st.prev=rt,rt.next.prev=st,rt.next=st):(st.prev=st,st.next=st),st}function dt(Y){Y.next.prev=Y.prev,Y.prev.next=Y.next,Y.prevZ&&(Y.prevZ.nextZ=Y.nextZ),Y.nextZ&&(Y.nextZ.prevZ=Y.prevZ)}function gt(Y,ot,nt){this.i=Y,this.x=ot,this.y=nt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}P.deviation=function(Y,ot,nt,rt){var st=ot&&ot.length,d=st?ot[0]*nt:Y.length,It=Math.abs(vt(Y,0,d,nt));if(st)for(var Ht=0,kt=ot.length;Ht<kt;Ht++){var Xt=ot[Ht]*nt,Kt=Ht<kt-1?ot[Ht+1]*nt:Y.length;It-=Math.abs(vt(Y,Xt,Kt,nt))}var Jt=0;for(Ht=0;Ht<rt.length;Ht+=3){var ue=rt[Ht]*nt,ce=rt[Ht+1]*nt,$t=rt[Ht+2]*nt;Jt+=Math.abs((Y[ue]-Y[$t])*(Y[ce+1]-Y[ue+1])-(Y[ue]-Y[ce])*(Y[$t+1]-Y[ue+1]))}return It===0&&Jt===0?0:Math.abs((Jt-It)/It)};function vt(Y,ot,nt,rt){for(var st=0,d=ot,It=nt-rt;d<nt;d+=rt)st+=(Y[It]-Y[d])*(Y[d+1]+Y[It+1]),It=d;return st}P.flatten=function(Y){for(var ot=Y[0][0].length,nt={vertices:[],holes:[],dimensions:ot},rt=0,st=0;st<Y.length;st++){for(var d=0;d<Y[st].length;d++)for(var It=0;It<ot;It++)nt.vertices.push(Y[st][d][It]);st>0&&(rt+=Y[st-1].length,nt.holes.push(rt))}return nt}},67709:function(Vt){function P(T){var j=T.target||T.srcElement;j.__resizeRAF__&&cancelAnimationFrame(j.__resizeRAF__),j.__resizeRAF__=requestAnimationFrame(function(){var y=j.__resizeTrigger__,U=y&&y.__resizeListeners__;U&&U.forEach(function(F){F.call(y,T)})})}var S=function(j,y){var U=this,F=U.document,B,R=F.attachEvent;typeof navigator!="undefined"&&(B=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function N(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",P)}if(!j.__resizeListeners__)if(j.__resizeListeners__=[],R)j.__resizeTrigger__=j,j.attachEvent("onresize",P);else{getComputedStyle(j).position==="static"&&(j.style.position="relative");var A=j.__resizeTrigger__=F.createElement("object");A.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),A.setAttribute("class","resize-sensor"),A.setAttribute("tabindex","-1"),A.setAttribute("title",""),A.__resizeElement__=j,A.onload=N,A.type="text/html",B&&j.appendChild(A),A.data="about:blank",B||j.appendChild(A)}j.__resizeListeners__.push(y)};Vt.exports=typeof window=="undefined"?S:S.bind(window),Vt.exports.unbind=function(T,j){var y=document.attachEvent,U=T.__resizeListeners__||[];if(j){var F=U.indexOf(j);F!==-1&&U.splice(F,1)}else U=T.__resizeListeners__=[];if(!U.length){if(y)T.detachEvent("onresize",P);else if(T.__resizeTrigger__){var B=T.__resizeTrigger__.contentDocument,R=B&&B.defaultView;R&&(R.removeEventListener("resize",P),delete R.__resizeTrigger__),T.__resizeTrigger__=!T.removeChild(T.__resizeTrigger__)}delete T.__resizeListeners__}}},26729:function(Vt){"use strict";var P=Object.prototype.hasOwnProperty,S="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(S=!1));function j(B,R,N){this.fn=B,this.context=R,this.once=N||!1}function y(B,R,N,A,D){if(typeof N!="function")throw new TypeError("The listener must be a function");var M=new j(N,A||B,D),O=S?S+R:R;return B._events[O]?B._events[O].fn?B._events[O]=[B._events[O],M]:B._events[O].push(M):(B._events[O]=M,B._eventsCount++),B}function U(B,R){--B._eventsCount==0?B._events=new T:delete B._events[R]}function F(){this._events=new T,this._eventsCount=0}F.prototype.eventNames=function(){var R=[],N,A;if(this._eventsCount===0)return R;for(A in N=this._events)P.call(N,A)&&R.push(S?A.slice(1):A);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(N)):R},F.prototype.listeners=function(R){var N=S?S+R:R,A=this._events[N];if(!A)return[];if(A.fn)return[A.fn];for(var D=0,M=A.length,O=new Array(M);D<M;D++)O[D]=A[D].fn;return O},F.prototype.listenerCount=function(R){var N=S?S+R:R,A=this._events[N];return A?A.fn?1:A.length:0},F.prototype.emit=function(R,N,A,D,M,O){var k=S?S+R:R;if(!this._events[k])return!1;var V=this._events[k],X=arguments.length,K,q;if(V.fn){switch(V.once&&this.removeListener(R,V.fn,void 0,!0),X){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,N),!0;case 3:return V.fn.call(V.context,N,A),!0;case 4:return V.fn.call(V.context,N,A,D),!0;case 5:return V.fn.call(V.context,N,A,D,M),!0;case 6:return V.fn.call(V.context,N,A,D,M,O),!0}for(q=1,K=new Array(X-1);q<X;q++)K[q-1]=arguments[q];V.fn.apply(V.context,K)}else{var ct=V.length,_t;for(q=0;q<ct;q++)switch(V[q].once&&this.removeListener(R,V[q].fn,void 0,!0),X){case 1:V[q].fn.call(V[q].context);break;case 2:V[q].fn.call(V[q].context,N);break;case 3:V[q].fn.call(V[q].context,N,A);break;case 4:V[q].fn.call(V[q].context,N,A,D);break;default:if(!K)for(_t=1,K=new Array(X-1);_t<X;_t++)K[_t-1]=arguments[_t];V[q].fn.apply(V[q].context,K)}}return!0},F.prototype.on=function(R,N,A){return y(this,R,N,A,!1)},F.prototype.once=function(R,N,A){return y(this,R,N,A,!0)},F.prototype.removeListener=function(R,N,A,D){var M=S?S+R:R;if(!this._events[M])return this;if(!N)return U(this,M),this;var O=this._events[M];if(O.fn)O.fn===N&&(!D||O.once)&&(!A||O.context===A)&&U(this,M);else{for(var k=0,V=[],X=O.length;k<X;k++)(O[k].fn!==N||D&&!O[k].once||A&&O[k].context!==A)&&V.push(O[k]);V.length?this._events[M]=V.length===1?V[0]:V:U(this,M)}return this},F.prototype.removeAllListeners=function(R){var N;return R?(N=S?S+R:R,this._events[N]&&U(this,N)):(this._events=new T,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=S,F.EventEmitter=F,Vt.exports=F},19432:function(Vt,P,S){"use strict";S.r(P),S.d(P,{assign:function(){return D},format:function(){return gt},parse:function(){return vt},defaultI18n:function(){return X},setGlobalDateI18n:function(){return q},setGlobalDateMasks:function(){return dt}});var T=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,j="[1-9]\\d?",y="\\d\\d",U="\\d{3}",F="\\d{4}",B="[^\\s]+",R=/\[([^]*?)\]/gm;function N(ot,nt){for(var rt=[],st=0,d=ot.length;st<d;st++)rt.push(ot[st].substr(0,nt));return rt}var A=function(ot){return function(nt,rt){var st=rt[ot].map(function(It){return It.toLowerCase()}),d=st.indexOf(nt.toLowerCase());return d>-1?d:null}};function D(ot){for(var nt=[],rt=1;rt<arguments.length;rt++)nt[rt-1]=arguments[rt];for(var st=0,d=nt;st<d.length;st++){var It=d[st];for(var Ht in It)ot[Ht]=It[Ht]}return ot}var M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],O=["January","February","March","April","May","June","July","August","September","October","November","December"],k=N(O,3),V=N(M,3),X={dayNamesShort:V,dayNames:M,monthNamesShort:k,monthNames:O,amPm:["am","pm"],DoFn:function(ot){return ot+["th","st","nd","rd"][ot%10>3?0:(ot-ot%10!=10?1:0)*ot%10]}},K=D({},X),q=function(ot){return K=D(K,ot)},ct=function(ot){return ot.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},_t=function(ot,nt){for(nt===void 0&&(nt=2),ot=String(ot);ot.length<nt;)ot="0"+ot;return ot},yt={D:function(ot){return String(ot.getDate())},DD:function(ot){return _t(ot.getDate())},Do:function(ot,nt){return nt.DoFn(ot.getDate())},d:function(ot){return String(ot.getDay())},dd:function(ot){return _t(ot.getDay())},ddd:function(ot,nt){return nt.dayNamesShort[ot.getDay()]},dddd:function(ot,nt){return nt.dayNames[ot.getDay()]},M:function(ot){return String(ot.getMonth()+1)},MM:function(ot){return _t(ot.getMonth()+1)},MMM:function(ot,nt){return nt.monthNamesShort[ot.getMonth()]},MMMM:function(ot,nt){return nt.monthNames[ot.getMonth()]},YY:function(ot){return _t(String(ot.getFullYear()),4).substr(2)},YYYY:function(ot){return _t(ot.getFullYear(),4)},h:function(ot){return String(ot.getHours()%12||12)},hh:function(ot){return _t(ot.getHours()%12||12)},H:function(ot){return String(ot.getHours())},HH:function(ot){return _t(ot.getHours())},m:function(ot){return String(ot.getMinutes())},mm:function(ot){return _t(ot.getMinutes())},s:function(ot){return String(ot.getSeconds())},ss:function(ot){return _t(ot.getSeconds())},S:function(ot){return String(Math.round(ot.getMilliseconds()/100))},SS:function(ot){return _t(Math.round(ot.getMilliseconds()/10),2)},SSS:function(ot){return _t(ot.getMilliseconds(),3)},a:function(ot,nt){return ot.getHours()<12?nt.amPm[0]:nt.amPm[1]},A:function(ot,nt){return ot.getHours()<12?nt.amPm[0].toUpperCase():nt.amPm[1].toUpperCase()},ZZ:function(ot){var nt=ot.getTimezoneOffset();return(nt>0?"-":"+")+_t(Math.floor(Math.abs(nt)/60)*100+Math.abs(nt)%60,4)},Z:function(ot){var nt=ot.getTimezoneOffset();return(nt>0?"-":"+")+_t(Math.floor(Math.abs(nt)/60),2)+":"+_t(Math.abs(nt)%60,2)}},lt=function(ot){return+ot-1},Lt=[null,j],wt=[null,B],Gt=["isPm",B,function(ot,nt){var rt=ot.toLowerCase();return rt===nt.amPm[0]?0:rt===nt.amPm[1]?1:null}],re=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(ot){var nt=(ot+"").match(/([+-]|\d\d)/gi);if(nt){var rt=+nt[1]*60+parseInt(nt[2],10);return nt[0]==="+"?rt:-rt}return 0}],Qt={D:["day",j],DD:["day",y],Do:["day",j+B,function(ot){return parseInt(ot,10)}],M:["month",j,lt],MM:["month",y,lt],YY:["year",y,function(ot){var nt=new Date,rt=+(""+nt.getFullYear()).substr(0,2);return+(""+(+ot>68?rt-1:rt)+ot)}],h:["hour",j,void 0,"isPm"],hh:["hour",y,void 0,"isPm"],H:["hour",j],HH:["hour",y],m:["minute",j],mm:["minute",y],s:["second",j],ss:["second",y],YYYY:["year",F],S:["millisecond","\\d",function(ot){return+ot*100}],SS:["millisecond",y,function(ot){return+ot*10}],SSS:["millisecond",U],d:Lt,dd:Lt,ddd:wt,dddd:wt,MMM:["month",B,A("monthNamesShort")],MMMM:["month",B,A("monthNames")],a:Gt,A:Gt,ZZ:re,Z:re},it={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},dt=function(ot){return D(it,ot)},gt=function(ot,nt,rt){if(nt===void 0&&(nt=it.default),rt===void 0&&(rt={}),typeof ot=="number"&&(ot=new Date(ot)),Object.prototype.toString.call(ot)!=="[object Date]"||isNaN(ot.getTime()))throw new Error("Invalid Date pass to format");nt=it[nt]||nt;var st=[];nt=nt.replace(R,function(It,Ht){return st.push(Ht),"@@@"});var d=D(D({},K),rt);return nt=nt.replace(T,function(It){return yt[It](ot,d)}),nt.replace(/@@@/g,function(){return st.shift()})};function vt(ot,nt,rt){if(rt===void 0&&(rt={}),typeof nt!="string")throw new Error("Invalid format in fecha parse");if(nt=it[nt]||nt,ot.length>1e3)return null;var st=new Date,d={year:st.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},It=[],Ht=[],kt=nt.replace(R,function(ne,ve){return Ht.push(ct(ve)),"@@@"}),Xt={},Kt={};kt=ct(kt).replace(T,function(ne){var ve=Qt[ne],Re=ve[0],je=ve[1],Cr=ve[3];if(Xt[Re])throw new Error("Invalid format. "+Re+" specified twice in format");return Xt[Re]=!0,Cr&&(Kt[Cr]=!0),It.push(ve),"("+je+")"}),Object.keys(Kt).forEach(function(ne){if(!Xt[ne])throw new Error("Invalid format. "+ne+" is required in specified format")}),kt=kt.replace(/@@@/g,function(){return Ht.shift()});var Jt=ot.match(new RegExp(kt,"i"));if(!Jt)return null;for(var ue=D(D({},K),rt),ce=1;ce<Jt.length;ce++){var $t=It[ce-1],Ut=$t[0],Rt=$t[2],Pt=Rt?Rt(Jt[ce],ue):+Jt[ce];if(Pt==null)return null;d[Ut]=Pt}d.isPm===1&&d.hour!=null&&+d.hour!=12?d.hour=+d.hour+12:d.isPm===0&&+d.hour==12&&(d.hour=0);for(var Yt=new Date(d.year,d.month,d.day,d.hour,d.minute,d.second,d.millisecond),Dt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],ce=0,Nt=Dt.length;ce<Nt;ce++)if(Xt[Dt[ce][0]]&&d[Dt[ce][0]]!==Yt[Dt[ce][1]]())return null;return d.timezoneOffset==null?Yt:new Date(Date.UTC(d.year,d.month,d.day,d.hour,d.minute-d.timezoneOffset,d.second,d.millisecond))}var Y={format:gt,parse:vt,defaultI18n:X,setGlobalDateI18n:q,setGlobalDateMasks:dt};P.default=Y},49685:function(Vt,P,S){"use strict";S.d(P,{Ib:function(){return T},WT:function(){return j},FD:function(){return y}});var T=1e-6,j=typeof Float32Array!="undefined"?Float32Array:Array,y=Math.random;function U(N){j=N}var F=Math.PI/180;function B(N){return N*F}function R(N,A){return Math.abs(N-A)<=T*Math.max(1,Math.abs(N),Math.abs(A))}Math.hypot||(Math.hypot=function(){for(var N=0,A=arguments.length;A--;)N+=arguments[A]*arguments[A];return Math.sqrt(N)})},35600:function(Vt,P,S){"use strict";S.r(P),S.d(P,{create:function(){return j},fromMat4:function(){return y},clone:function(){return U},copy:function(){return F},fromValues:function(){return B},set:function(){return R},identity:function(){return N},transpose:function(){return A},invert:function(){return D},adjoint:function(){return M},determinant:function(){return O},multiply:function(){return k},translate:function(){return V},rotate:function(){return X},scale:function(){return K},fromTranslation:function(){return q},fromRotation:function(){return ct},fromScaling:function(){return _t},fromMat2d:function(){return yt},fromQuat:function(){return lt},normalFromMat4:function(){return Lt},projection:function(){return wt},str:function(){return Gt},frob:function(){return re},add:function(){return Qt},subtract:function(){return it},multiplyScalar:function(){return dt},multiplyScalarAndAdd:function(){return gt},exactEquals:function(){return vt},equals:function(){return Y},mul:function(){return ot},sub:function(){return nt}});var T=S(49685);function j(){var rt=new T.WT(9);return T.WT!=Float32Array&&(rt[1]=0,rt[2]=0,rt[3]=0,rt[5]=0,rt[6]=0,rt[7]=0),rt[0]=1,rt[4]=1,rt[8]=1,rt}function y(rt,st){return rt[0]=st[0],rt[1]=st[1],rt[2]=st[2],rt[3]=st[4],rt[4]=st[5],rt[5]=st[6],rt[6]=st[8],rt[7]=st[9],rt[8]=st[10],rt}function U(rt){var st=new T.WT(9);return st[0]=rt[0],st[1]=rt[1],st[2]=rt[2],st[3]=rt[3],st[4]=rt[4],st[5]=rt[5],st[6]=rt[6],st[7]=rt[7],st[8]=rt[8],st}function F(rt,st){return rt[0]=st[0],rt[1]=st[1],rt[2]=st[2],rt[3]=st[3],rt[4]=st[4],rt[5]=st[5],rt[6]=st[6],rt[7]=st[7],rt[8]=st[8],rt}function B(rt,st,d,It,Ht,kt,Xt,Kt,Jt){var ue=new T.WT(9);return ue[0]=rt,ue[1]=st,ue[2]=d,ue[3]=It,ue[4]=Ht,ue[5]=kt,ue[6]=Xt,ue[7]=Kt,ue[8]=Jt,ue}function R(rt,st,d,It,Ht,kt,Xt,Kt,Jt,ue){return rt[0]=st,rt[1]=d,rt[2]=It,rt[3]=Ht,rt[4]=kt,rt[5]=Xt,rt[6]=Kt,rt[7]=Jt,rt[8]=ue,rt}function N(rt){return rt[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=1,rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function A(rt,st){if(rt===st){var d=st[1],It=st[2],Ht=st[5];rt[1]=st[3],rt[2]=st[6],rt[3]=d,rt[5]=st[7],rt[6]=It,rt[7]=Ht}else rt[0]=st[0],rt[1]=st[3],rt[2]=st[6],rt[3]=st[1],rt[4]=st[4],rt[5]=st[7],rt[6]=st[2],rt[7]=st[5],rt[8]=st[8];return rt}function D(rt,st){var d=st[0],It=st[1],Ht=st[2],kt=st[3],Xt=st[4],Kt=st[5],Jt=st[6],ue=st[7],ce=st[8],$t=ce*Xt-Kt*ue,Ut=-ce*kt+Kt*Jt,Rt=ue*kt-Xt*Jt,Pt=d*$t+It*Ut+Ht*Rt;return Pt?(Pt=1/Pt,rt[0]=$t*Pt,rt[1]=(-ce*It+Ht*ue)*Pt,rt[2]=(Kt*It-Ht*Xt)*Pt,rt[3]=Ut*Pt,rt[4]=(ce*d-Ht*Jt)*Pt,rt[5]=(-Kt*d+Ht*kt)*Pt,rt[6]=Rt*Pt,rt[7]=(-ue*d+It*Jt)*Pt,rt[8]=(Xt*d-It*kt)*Pt,rt):null}function M(rt,st){var d=st[0],It=st[1],Ht=st[2],kt=st[3],Xt=st[4],Kt=st[5],Jt=st[6],ue=st[7],ce=st[8];return rt[0]=Xt*ce-Kt*ue,rt[1]=Ht*ue-It*ce,rt[2]=It*Kt-Ht*Xt,rt[3]=Kt*Jt-kt*ce,rt[4]=d*ce-Ht*Jt,rt[5]=Ht*kt-d*Kt,rt[6]=kt*ue-Xt*Jt,rt[7]=It*Jt-d*ue,rt[8]=d*Xt-It*kt,rt}function O(rt){var st=rt[0],d=rt[1],It=rt[2],Ht=rt[3],kt=rt[4],Xt=rt[5],Kt=rt[6],Jt=rt[7],ue=rt[8];return st*(ue*kt-Xt*Jt)+d*(-ue*Ht+Xt*Kt)+It*(Jt*Ht-kt*Kt)}function k(rt,st,d){var It=st[0],Ht=st[1],kt=st[2],Xt=st[3],Kt=st[4],Jt=st[5],ue=st[6],ce=st[7],$t=st[8],Ut=d[0],Rt=d[1],Pt=d[2],Yt=d[3],Dt=d[4],Nt=d[5],ne=d[6],ve=d[7],Re=d[8];return rt[0]=Ut*It+Rt*Xt+Pt*ue,rt[1]=Ut*Ht+Rt*Kt+Pt*ce,rt[2]=Ut*kt+Rt*Jt+Pt*$t,rt[3]=Yt*It+Dt*Xt+Nt*ue,rt[4]=Yt*Ht+Dt*Kt+Nt*ce,rt[5]=Yt*kt+Dt*Jt+Nt*$t,rt[6]=ne*It+ve*Xt+Re*ue,rt[7]=ne*Ht+ve*Kt+Re*ce,rt[8]=ne*kt+ve*Jt+Re*$t,rt}function V(rt,st,d){var It=st[0],Ht=st[1],kt=st[2],Xt=st[3],Kt=st[4],Jt=st[5],ue=st[6],ce=st[7],$t=st[8],Ut=d[0],Rt=d[1];return rt[0]=It,rt[1]=Ht,rt[2]=kt,rt[3]=Xt,rt[4]=Kt,rt[5]=Jt,rt[6]=Ut*It+Rt*Xt+ue,rt[7]=Ut*Ht+Rt*Kt+ce,rt[8]=Ut*kt+Rt*Jt+$t,rt}function X(rt,st,d){var It=st[0],Ht=st[1],kt=st[2],Xt=st[3],Kt=st[4],Jt=st[5],ue=st[6],ce=st[7],$t=st[8],Ut=Math.sin(d),Rt=Math.cos(d);return rt[0]=Rt*It+Ut*Xt,rt[1]=Rt*Ht+Ut*Kt,rt[2]=Rt*kt+Ut*Jt,rt[3]=Rt*Xt-Ut*It,rt[4]=Rt*Kt-Ut*Ht,rt[5]=Rt*Jt-Ut*kt,rt[6]=ue,rt[7]=ce,rt[8]=$t,rt}function K(rt,st,d){var It=d[0],Ht=d[1];return rt[0]=It*st[0],rt[1]=It*st[1],rt[2]=It*st[2],rt[3]=Ht*st[3],rt[4]=Ht*st[4],rt[5]=Ht*st[5],rt[6]=st[6],rt[7]=st[7],rt[8]=st[8],rt}function q(rt,st){return rt[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=1,rt[5]=0,rt[6]=st[0],rt[7]=st[1],rt[8]=1,rt}function ct(rt,st){var d=Math.sin(st),It=Math.cos(st);return rt[0]=It,rt[1]=d,rt[2]=0,rt[3]=-d,rt[4]=It,rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function _t(rt,st){return rt[0]=st[0],rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=st[1],rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function yt(rt,st){return rt[0]=st[0],rt[1]=st[1],rt[2]=0,rt[3]=st[2],rt[4]=st[3],rt[5]=0,rt[6]=st[4],rt[7]=st[5],rt[8]=1,rt}function lt(rt,st){var d=st[0],It=st[1],Ht=st[2],kt=st[3],Xt=d+d,Kt=It+It,Jt=Ht+Ht,ue=d*Xt,ce=It*Xt,$t=It*Kt,Ut=Ht*Xt,Rt=Ht*Kt,Pt=Ht*Jt,Yt=kt*Xt,Dt=kt*Kt,Nt=kt*Jt;return rt[0]=1-$t-Pt,rt[3]=ce-Nt,rt[6]=Ut+Dt,rt[1]=ce+Nt,rt[4]=1-ue-Pt,rt[7]=Rt-Yt,rt[2]=Ut-Dt,rt[5]=Rt+Yt,rt[8]=1-ue-$t,rt}function Lt(rt,st){var d=st[0],It=st[1],Ht=st[2],kt=st[3],Xt=st[4],Kt=st[5],Jt=st[6],ue=st[7],ce=st[8],$t=st[9],Ut=st[10],Rt=st[11],Pt=st[12],Yt=st[13],Dt=st[14],Nt=st[15],ne=d*Kt-It*Xt,ve=d*Jt-Ht*Xt,Re=d*ue-kt*Xt,je=It*Jt-Ht*Kt,Cr=It*ue-kt*Kt,$r=Ht*ue-kt*Jt,Qr=ce*Yt-$t*Pt,Ee=ce*Dt-Ut*Pt,yn=ce*Nt-Rt*Pt,ui=$t*Dt-Ut*Yt,la=$t*Nt-Rt*Yt,Or=Ut*Nt-Rt*Dt,ln=ne*Or-ve*la+Re*ui+je*yn-Cr*Ee+$r*Qr;return ln?(ln=1/ln,rt[0]=(Kt*Or-Jt*la+ue*ui)*ln,rt[1]=(Jt*yn-Xt*Or-ue*Ee)*ln,rt[2]=(Xt*la-Kt*yn+ue*Qr)*ln,rt[3]=(Ht*la-It*Or-kt*ui)*ln,rt[4]=(d*Or-Ht*yn+kt*Ee)*ln,rt[5]=(It*yn-d*la-kt*Qr)*ln,rt[6]=(Yt*$r-Dt*Cr+Nt*je)*ln,rt[7]=(Dt*Re-Pt*$r-Nt*ve)*ln,rt[8]=(Pt*Cr-Yt*Re+Nt*ne)*ln,rt):null}function wt(rt,st,d){return rt[0]=2/st,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=-2/d,rt[5]=0,rt[6]=-1,rt[7]=1,rt[8]=1,rt}function Gt(rt){return"mat3("+rt[0]+", "+rt[1]+", "+rt[2]+", "+rt[3]+", "+rt[4]+", "+rt[5]+", "+rt[6]+", "+rt[7]+", "+rt[8]+")"}function re(rt){return Math.hypot(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5],rt[6],rt[7],rt[8])}function Qt(rt,st,d){return rt[0]=st[0]+d[0],rt[1]=st[1]+d[1],rt[2]=st[2]+d[2],rt[3]=st[3]+d[3],rt[4]=st[4]+d[4],rt[5]=st[5]+d[5],rt[6]=st[6]+d[6],rt[7]=st[7]+d[7],rt[8]=st[8]+d[8],rt}function it(rt,st,d){return rt[0]=st[0]-d[0],rt[1]=st[1]-d[1],rt[2]=st[2]-d[2],rt[3]=st[3]-d[3],rt[4]=st[4]-d[4],rt[5]=st[5]-d[5],rt[6]=st[6]-d[6],rt[7]=st[7]-d[7],rt[8]=st[8]-d[8],rt}function dt(rt,st,d){return rt[0]=st[0]*d,rt[1]=st[1]*d,rt[2]=st[2]*d,rt[3]=st[3]*d,rt[4]=st[4]*d,rt[5]=st[5]*d,rt[6]=st[6]*d,rt[7]=st[7]*d,rt[8]=st[8]*d,rt}function gt(rt,st,d,It){return rt[0]=st[0]+d[0]*It,rt[1]=st[1]+d[1]*It,rt[2]=st[2]+d[2]*It,rt[3]=st[3]+d[3]*It,rt[4]=st[4]+d[4]*It,rt[5]=st[5]+d[5]*It,rt[6]=st[6]+d[6]*It,rt[7]=st[7]+d[7]*It,rt[8]=st[8]+d[8]*It,rt}function vt(rt,st){return rt[0]===st[0]&&rt[1]===st[1]&&rt[2]===st[2]&&rt[3]===st[3]&&rt[4]===st[4]&&rt[5]===st[5]&&rt[6]===st[6]&&rt[7]===st[7]&&rt[8]===st[8]}function Y(rt,st){var d=rt[0],It=rt[1],Ht=rt[2],kt=rt[3],Xt=rt[4],Kt=rt[5],Jt=rt[6],ue=rt[7],ce=rt[8],$t=st[0],Ut=st[1],Rt=st[2],Pt=st[3],Yt=st[4],Dt=st[5],Nt=st[6],ne=st[7],ve=st[8];return Math.abs(d-$t)<=T.Ib*Math.max(1,Math.abs(d),Math.abs($t))&&Math.abs(It-Ut)<=T.Ib*Math.max(1,Math.abs(It),Math.abs(Ut))&&Math.abs(Ht-Rt)<=T.Ib*Math.max(1,Math.abs(Ht),Math.abs(Rt))&&Math.abs(kt-Pt)<=T.Ib*Math.max(1,Math.abs(kt),Math.abs(Pt))&&Math.abs(Xt-Yt)<=T.Ib*Math.max(1,Math.abs(Xt),Math.abs(Yt))&&Math.abs(Kt-Dt)<=T.Ib*Math.max(1,Math.abs(Kt),Math.abs(Dt))&&Math.abs(Jt-Nt)<=T.Ib*Math.max(1,Math.abs(Jt),Math.abs(Nt))&&Math.abs(ue-ne)<=T.Ib*Math.max(1,Math.abs(ue),Math.abs(ne))&&Math.abs(ce-ve)<=T.Ib*Math.max(1,Math.abs(ce),Math.abs(ve))}var ot=k,nt=it},31437:function(Vt,P,S){"use strict";S.r(P),S.d(P,{create:function(){return j},clone:function(){return y},fromValues:function(){return U},copy:function(){return F},set:function(){return B},add:function(){return R},subtract:function(){return N},multiply:function(){return A},divide:function(){return D},ceil:function(){return M},floor:function(){return O},min:function(){return k},max:function(){return V},round:function(){return X},scale:function(){return K},scaleAndAdd:function(){return q},distance:function(){return ct},squaredDistance:function(){return _t},length:function(){return yt},squaredLength:function(){return lt},negate:function(){return Lt},inverse:function(){return wt},normalize:function(){return Gt},dot:function(){return re},cross:function(){return Qt},lerp:function(){return it},random:function(){return dt},transformMat2:function(){return gt},transformMat2d:function(){return vt},transformMat3:function(){return Y},transformMat4:function(){return ot},rotate:function(){return nt},angle:function(){return rt},zero:function(){return st},str:function(){return d},exactEquals:function(){return It},equals:function(){return Ht},len:function(){return kt},sub:function(){return Xt},mul:function(){return Kt},div:function(){return Jt},dist:function(){return ue},sqrDist:function(){return ce},sqrLen:function(){return $t},forEach:function(){return Ut}});var T=S(49685);function j(){var Rt=new T.WT(2);return T.WT!=Float32Array&&(Rt[0]=0,Rt[1]=0),Rt}function y(Rt){var Pt=new T.WT(2);return Pt[0]=Rt[0],Pt[1]=Rt[1],Pt}function U(Rt,Pt){var Yt=new T.WT(2);return Yt[0]=Rt,Yt[1]=Pt,Yt}function F(Rt,Pt){return Rt[0]=Pt[0],Rt[1]=Pt[1],Rt}function B(Rt,Pt,Yt){return Rt[0]=Pt,Rt[1]=Yt,Rt}function R(Rt,Pt,Yt){return Rt[0]=Pt[0]+Yt[0],Rt[1]=Pt[1]+Yt[1],Rt}function N(Rt,Pt,Yt){return Rt[0]=Pt[0]-Yt[0],Rt[1]=Pt[1]-Yt[1],Rt}function A(Rt,Pt,Yt){return Rt[0]=Pt[0]*Yt[0],Rt[1]=Pt[1]*Yt[1],Rt}function D(Rt,Pt,Yt){return Rt[0]=Pt[0]/Yt[0],Rt[1]=Pt[1]/Yt[1],Rt}function M(Rt,Pt){return Rt[0]=Math.ceil(Pt[0]),Rt[1]=Math.ceil(Pt[1]),Rt}function O(Rt,Pt){return Rt[0]=Math.floor(Pt[0]),Rt[1]=Math.floor(Pt[1]),Rt}function k(Rt,Pt,Yt){return Rt[0]=Math.min(Pt[0],Yt[0]),Rt[1]=Math.min(Pt[1],Yt[1]),Rt}function V(Rt,Pt,Yt){return Rt[0]=Math.max(Pt[0],Yt[0]),Rt[1]=Math.max(Pt[1],Yt[1]),Rt}function X(Rt,Pt){return Rt[0]=Math.round(Pt[0]),Rt[1]=Math.round(Pt[1]),Rt}function K(Rt,Pt,Yt){return Rt[0]=Pt[0]*Yt,Rt[1]=Pt[1]*Yt,Rt}function q(Rt,Pt,Yt,Dt){return Rt[0]=Pt[0]+Yt[0]*Dt,Rt[1]=Pt[1]+Yt[1]*Dt,Rt}function ct(Rt,Pt){var Yt=Pt[0]-Rt[0],Dt=Pt[1]-Rt[1];return Math.hypot(Yt,Dt)}function _t(Rt,Pt){var Yt=Pt[0]-Rt[0],Dt=Pt[1]-Rt[1];return Yt*Yt+Dt*Dt}function yt(Rt){var Pt=Rt[0],Yt=Rt[1];return Math.hypot(Pt,Yt)}function lt(Rt){var Pt=Rt[0],Yt=Rt[1];return Pt*Pt+Yt*Yt}function Lt(Rt,Pt){return Rt[0]=-Pt[0],Rt[1]=-Pt[1],Rt}function wt(Rt,Pt){return Rt[0]=1/Pt[0],Rt[1]=1/Pt[1],Rt}function Gt(Rt,Pt){var Yt=Pt[0],Dt=Pt[1],Nt=Yt*Yt+Dt*Dt;return Nt>0&&(Nt=1/Math.sqrt(Nt)),Rt[0]=Pt[0]*Nt,Rt[1]=Pt[1]*Nt,Rt}function re(Rt,Pt){return Rt[0]*Pt[0]+Rt[1]*Pt[1]}function Qt(Rt,Pt,Yt){var Dt=Pt[0]*Yt[1]-Pt[1]*Yt[0];return Rt[0]=Rt[1]=0,Rt[2]=Dt,Rt}function it(Rt,Pt,Yt,Dt){var Nt=Pt[0],ne=Pt[1];return Rt[0]=Nt+Dt*(Yt[0]-Nt),Rt[1]=ne+Dt*(Yt[1]-ne),Rt}function dt(Rt,Pt){Pt=Pt||1;var Yt=T.FD()*2*Math.PI;return Rt[0]=Math.cos(Yt)*Pt,Rt[1]=Math.sin(Yt)*Pt,Rt}function gt(Rt,Pt,Yt){var Dt=Pt[0],Nt=Pt[1];return Rt[0]=Yt[0]*Dt+Yt[2]*Nt,Rt[1]=Yt[1]*Dt+Yt[3]*Nt,Rt}function vt(Rt,Pt,Yt){var Dt=Pt[0],Nt=Pt[1];return Rt[0]=Yt[0]*Dt+Yt[2]*Nt+Yt[4],Rt[1]=Yt[1]*Dt+Yt[3]*Nt+Yt[5],Rt}function Y(Rt,Pt,Yt){var Dt=Pt[0],Nt=Pt[1];return Rt[0]=Yt[0]*Dt+Yt[3]*Nt+Yt[6],Rt[1]=Yt[1]*Dt+Yt[4]*Nt+Yt[7],Rt}function ot(Rt,Pt,Yt){var Dt=Pt[0],Nt=Pt[1];return Rt[0]=Yt[0]*Dt+Yt[4]*Nt+Yt[12],Rt[1]=Yt[1]*Dt+Yt[5]*Nt+Yt[13],Rt}function nt(Rt,Pt,Yt,Dt){var Nt=Pt[0]-Yt[0],ne=Pt[1]-Yt[1],ve=Math.sin(Dt),Re=Math.cos(Dt);return Rt[0]=Nt*Re-ne*ve+Yt[0],Rt[1]=Nt*ve+ne*Re+Yt[1],Rt}function rt(Rt,Pt){var Yt=Rt[0],Dt=Rt[1],Nt=Pt[0],ne=Pt[1],ve=Math.sqrt(Yt*Yt+Dt*Dt)*Math.sqrt(Nt*Nt+ne*ne),Re=ve&&(Yt*Nt+Dt*ne)/ve;return Math.acos(Math.min(Math.max(Re,-1),1))}function st(Rt){return Rt[0]=0,Rt[1]=0,Rt}function d(Rt){return"vec2("+Rt[0]+", "+Rt[1]+")"}function It(Rt,Pt){return Rt[0]===Pt[0]&&Rt[1]===Pt[1]}function Ht(Rt,Pt){var Yt=Rt[0],Dt=Rt[1],Nt=Pt[0],ne=Pt[1];return Math.abs(Yt-Nt)<=T.Ib*Math.max(1,Math.abs(Yt),Math.abs(Nt))&&Math.abs(Dt-ne)<=T.Ib*Math.max(1,Math.abs(Dt),Math.abs(ne))}var kt=yt,Xt=N,Kt=A,Jt=D,ue=ct,ce=_t,$t=lt,Ut=function(){var Rt=j();return function(Pt,Yt,Dt,Nt,ne,ve){var Re,je;for(Yt||(Yt=2),Dt||(Dt=0),Nt?je=Math.min(Nt*Yt+Dt,Pt.length):je=Pt.length,Re=Dt;Re<je;Re+=Yt)Rt[0]=Pt[Re],Rt[1]=Pt[Re+1],ne(Rt,Rt,ve),Pt[Re]=Rt[0],Pt[Re+1]=Rt[1];return Pt}}()},77160:function(Vt,P,S){"use strict";S.r(P),S.d(P,{create:function(){return j},clone:function(){return y},length:function(){return U},fromValues:function(){return F},copy:function(){return B},set:function(){return R},add:function(){return N},subtract:function(){return A},multiply:function(){return D},divide:function(){return M},ceil:function(){return O},floor:function(){return k},min:function(){return V},max:function(){return X},round:function(){return K},scale:function(){return q},scaleAndAdd:function(){return ct},distance:function(){return _t},squaredDistance:function(){return yt},squaredLength:function(){return lt},negate:function(){return Lt},inverse:function(){return wt},normalize:function(){return Gt},dot:function(){return re},cross:function(){return Qt},lerp:function(){return it},hermite:function(){return dt},bezier:function(){return gt},random:function(){return vt},transformMat4:function(){return Y},transformMat3:function(){return ot},transformQuat:function(){return nt},rotateX:function(){return rt},rotateY:function(){return st},rotateZ:function(){return d},angle:function(){return It},zero:function(){return Ht},str:function(){return kt},exactEquals:function(){return Xt},equals:function(){return Kt},sub:function(){return Jt},mul:function(){return ue},div:function(){return ce},dist:function(){return $t},sqrDist:function(){return Ut},len:function(){return Rt},sqrLen:function(){return Pt},forEach:function(){return Yt}});var T=S(49685);function j(){var Dt=new T.WT(3);return T.WT!=Float32Array&&(Dt[0]=0,Dt[1]=0,Dt[2]=0),Dt}function y(Dt){var Nt=new T.WT(3);return Nt[0]=Dt[0],Nt[1]=Dt[1],Nt[2]=Dt[2],Nt}function U(Dt){var Nt=Dt[0],ne=Dt[1],ve=Dt[2];return Math.hypot(Nt,ne,ve)}function F(Dt,Nt,ne){var ve=new T.WT(3);return ve[0]=Dt,ve[1]=Nt,ve[2]=ne,ve}function B(Dt,Nt){return Dt[0]=Nt[0],Dt[1]=Nt[1],Dt[2]=Nt[2],Dt}function R(Dt,Nt,ne,ve){return Dt[0]=Nt,Dt[1]=ne,Dt[2]=ve,Dt}function N(Dt,Nt,ne){return Dt[0]=Nt[0]+ne[0],Dt[1]=Nt[1]+ne[1],Dt[2]=Nt[2]+ne[2],Dt}function A(Dt,Nt,ne){return Dt[0]=Nt[0]-ne[0],Dt[1]=Nt[1]-ne[1],Dt[2]=Nt[2]-ne[2],Dt}function D(Dt,Nt,ne){return Dt[0]=Nt[0]*ne[0],Dt[1]=Nt[1]*ne[1],Dt[2]=Nt[2]*ne[2],Dt}function M(Dt,Nt,ne){return Dt[0]=Nt[0]/ne[0],Dt[1]=Nt[1]/ne[1],Dt[2]=Nt[2]/ne[2],Dt}function O(Dt,Nt){return Dt[0]=Math.ceil(Nt[0]),Dt[1]=Math.ceil(Nt[1]),Dt[2]=Math.ceil(Nt[2]),Dt}function k(Dt,Nt){return Dt[0]=Math.floor(Nt[0]),Dt[1]=Math.floor(Nt[1]),Dt[2]=Math.floor(Nt[2]),Dt}function V(Dt,Nt,ne){return Dt[0]=Math.min(Nt[0],ne[0]),Dt[1]=Math.min(Nt[1],ne[1]),Dt[2]=Math.min(Nt[2],ne[2]),Dt}function X(Dt,Nt,ne){return Dt[0]=Math.max(Nt[0],ne[0]),Dt[1]=Math.max(Nt[1],ne[1]),Dt[2]=Math.max(Nt[2],ne[2]),Dt}function K(Dt,Nt){return Dt[0]=Math.round(Nt[0]),Dt[1]=Math.round(Nt[1]),Dt[2]=Math.round(Nt[2]),Dt}function q(Dt,Nt,ne){return Dt[0]=Nt[0]*ne,Dt[1]=Nt[1]*ne,Dt[2]=Nt[2]*ne,Dt}function ct(Dt,Nt,ne,ve){return Dt[0]=Nt[0]+ne[0]*ve,Dt[1]=Nt[1]+ne[1]*ve,Dt[2]=Nt[2]+ne[2]*ve,Dt}function _t(Dt,Nt){var ne=Nt[0]-Dt[0],ve=Nt[1]-Dt[1],Re=Nt[2]-Dt[2];return Math.hypot(ne,ve,Re)}function yt(Dt,Nt){var ne=Nt[0]-Dt[0],ve=Nt[1]-Dt[1],Re=Nt[2]-Dt[2];return ne*ne+ve*ve+Re*Re}function lt(Dt){var Nt=Dt[0],ne=Dt[1],ve=Dt[2];return Nt*Nt+ne*ne+ve*ve}function Lt(Dt,Nt){return Dt[0]=-Nt[0],Dt[1]=-Nt[1],Dt[2]=-Nt[2],Dt}function wt(Dt,Nt){return Dt[0]=1/Nt[0],Dt[1]=1/Nt[1],Dt[2]=1/Nt[2],Dt}function Gt(Dt,Nt){var ne=Nt[0],ve=Nt[1],Re=Nt[2],je=ne*ne+ve*ve+Re*Re;return je>0&&(je=1/Math.sqrt(je)),Dt[0]=Nt[0]*je,Dt[1]=Nt[1]*je,Dt[2]=Nt[2]*je,Dt}function re(Dt,Nt){return Dt[0]*Nt[0]+Dt[1]*Nt[1]+Dt[2]*Nt[2]}function Qt(Dt,Nt,ne){var ve=Nt[0],Re=Nt[1],je=Nt[2],Cr=ne[0],$r=ne[1],Qr=ne[2];return Dt[0]=Re*Qr-je*$r,Dt[1]=je*Cr-ve*Qr,Dt[2]=ve*$r-Re*Cr,Dt}function it(Dt,Nt,ne,ve){var Re=Nt[0],je=Nt[1],Cr=Nt[2];return Dt[0]=Re+ve*(ne[0]-Re),Dt[1]=je+ve*(ne[1]-je),Dt[2]=Cr+ve*(ne[2]-Cr),Dt}function dt(Dt,Nt,ne,ve,Re,je){var Cr=je*je,$r=Cr*(2*je-3)+1,Qr=Cr*(je-2)+je,Ee=Cr*(je-1),yn=Cr*(3-2*je);return Dt[0]=Nt[0]*$r+ne[0]*Qr+ve[0]*Ee+Re[0]*yn,Dt[1]=Nt[1]*$r+ne[1]*Qr+ve[1]*Ee+Re[1]*yn,Dt[2]=Nt[2]*$r+ne[2]*Qr+ve[2]*Ee+Re[2]*yn,Dt}function gt(Dt,Nt,ne,ve,Re,je){var Cr=1-je,$r=Cr*Cr,Qr=je*je,Ee=$r*Cr,yn=3*je*$r,ui=3*Qr*Cr,la=Qr*je;return Dt[0]=Nt[0]*Ee+ne[0]*yn+ve[0]*ui+Re[0]*la,Dt[1]=Nt[1]*Ee+ne[1]*yn+ve[1]*ui+Re[1]*la,Dt[2]=Nt[2]*Ee+ne[2]*yn+ve[2]*ui+Re[2]*la,Dt}function vt(Dt,Nt){Nt=Nt||1;var ne=T.FD()*2*Math.PI,ve=T.FD()*2-1,Re=Math.sqrt(1-ve*ve)*Nt;return Dt[0]=Math.cos(ne)*Re,Dt[1]=Math.sin(ne)*Re,Dt[2]=ve*Nt,Dt}function Y(Dt,Nt,ne){var ve=Nt[0],Re=Nt[1],je=Nt[2],Cr=ne[3]*ve+ne[7]*Re+ne[11]*je+ne[15];return Cr=Cr||1,Dt[0]=(ne[0]*ve+ne[4]*Re+ne[8]*je+ne[12])/Cr,Dt[1]=(ne[1]*ve+ne[5]*Re+ne[9]*je+ne[13])/Cr,Dt[2]=(ne[2]*ve+ne[6]*Re+ne[10]*je+ne[14])/Cr,Dt}function ot(Dt,Nt,ne){var ve=Nt[0],Re=Nt[1],je=Nt[2];return Dt[0]=ve*ne[0]+Re*ne[3]+je*ne[6],Dt[1]=ve*ne[1]+Re*ne[4]+je*ne[7],Dt[2]=ve*ne[2]+Re*ne[5]+je*ne[8],Dt}function nt(Dt,Nt,ne){var ve=ne[0],Re=ne[1],je=ne[2],Cr=ne[3],$r=Nt[0],Qr=Nt[1],Ee=Nt[2],yn=Re*Ee-je*Qr,ui=je*$r-ve*Ee,la=ve*Qr-Re*$r,Or=Re*la-je*ui,ln=je*yn-ve*la,Kn=ve*ui-Re*yn,jn=Cr*2;return yn*=jn,ui*=jn,la*=jn,Or*=2,ln*=2,Kn*=2,Dt[0]=$r+yn+Or,Dt[1]=Qr+ui+ln,Dt[2]=Ee+la+Kn,Dt}function rt(Dt,Nt,ne,ve){var Re=[],je=[];return Re[0]=Nt[0]-ne[0],Re[1]=Nt[1]-ne[1],Re[2]=Nt[2]-ne[2],je[0]=Re[0],je[1]=Re[1]*Math.cos(ve)-Re[2]*Math.sin(ve),je[2]=Re[1]*Math.sin(ve)+Re[2]*Math.cos(ve),Dt[0]=je[0]+ne[0],Dt[1]=je[1]+ne[1],Dt[2]=je[2]+ne[2],Dt}function st(Dt,Nt,ne,ve){var Re=[],je=[];return Re[0]=Nt[0]-ne[0],Re[1]=Nt[1]-ne[1],Re[2]=Nt[2]-ne[2],je[0]=Re[2]*Math.sin(ve)+Re[0]*Math.cos(ve),je[1]=Re[1],je[2]=Re[2]*Math.cos(ve)-Re[0]*Math.sin(ve),Dt[0]=je[0]+ne[0],Dt[1]=je[1]+ne[1],Dt[2]=je[2]+ne[2],Dt}function d(Dt,Nt,ne,ve){var Re=[],je=[];return Re[0]=Nt[0]-ne[0],Re[1]=Nt[1]-ne[1],Re[2]=Nt[2]-ne[2],je[0]=Re[0]*Math.cos(ve)-Re[1]*Math.sin(ve),je[1]=Re[0]*Math.sin(ve)+Re[1]*Math.cos(ve),je[2]=Re[2],Dt[0]=je[0]+ne[0],Dt[1]=je[1]+ne[1],Dt[2]=je[2]+ne[2],Dt}function It(Dt,Nt){var ne=Dt[0],ve=Dt[1],Re=Dt[2],je=Nt[0],Cr=Nt[1],$r=Nt[2],Qr=Math.sqrt(ne*ne+ve*ve+Re*Re),Ee=Math.sqrt(je*je+Cr*Cr+$r*$r),yn=Qr*Ee,ui=yn&&re(Dt,Nt)/yn;return Math.acos(Math.min(Math.max(ui,-1),1))}function Ht(Dt){return Dt[0]=0,Dt[1]=0,Dt[2]=0,Dt}function kt(Dt){return"vec3("+Dt[0]+", "+Dt[1]+", "+Dt[2]+")"}function Xt(Dt,Nt){return Dt[0]===Nt[0]&&Dt[1]===Nt[1]&&Dt[2]===Nt[2]}function Kt(Dt,Nt){var ne=Dt[0],ve=Dt[1],Re=Dt[2],je=Nt[0],Cr=Nt[1],$r=Nt[2];return Math.abs(ne-je)<=T.Ib*Math.max(1,Math.abs(ne),Math.abs(je))&&Math.abs(ve-Cr)<=T.Ib*Math.max(1,Math.abs(ve),Math.abs(Cr))&&Math.abs(Re-$r)<=T.Ib*Math.max(1,Math.abs(Re),Math.abs($r))}var Jt=A,ue=D,ce=M,$t=_t,Ut=yt,Rt=U,Pt=lt,Yt=function(){var Dt=j();return function(Nt,ne,ve,Re,je,Cr){var $r,Qr;for(ne||(ne=3),ve||(ve=0),Re?Qr=Math.min(Re*ne+ve,Nt.length):Qr=Nt.length,$r=ve;$r<Qr;$r+=ne)Dt[0]=Nt[$r],Dt[1]=Nt[$r+1],Dt[2]=Nt[$r+2],je(Dt,Dt,Cr),Nt[$r]=Dt[0],Nt[$r+1]=Dt[1],Nt[$r+2]=Dt[2];return Nt}}()},28282:function(Vt,P,S){var T=S(82354);Vt.exports={Graph:T.Graph,json:S(28974),alg:S(12440),version:T.version}},2842:function(Vt,P,S){var T=S(89126);Vt.exports=j;function j(y){var U={},F=[],B;function R(N){T.has(U,N)||(U[N]=!0,B.push(N),T.each(y.successors(N),R),T.each(y.predecessors(N),R))}return T.each(y.nodes(),function(N){B=[],R(N),B.length&&F.push(B)}),F}},53984:function(Vt,P,S){var T=S(89126);Vt.exports=j;function j(U,F,B){T.isArray(F)||(F=[F]);var R=(U.isDirected()?U.successors:U.neighbors).bind(U),N=[],A={};return T.each(F,function(D){if(!U.hasNode(D))throw new Error("Graph does not have node: "+D);y(U,D,B==="post",A,R,N)}),N}function y(U,F,B,R,N,A){T.has(R,F)||(R[F]=!0,B||A.push(F),T.each(N(F),function(D){y(U,D,B,R,N,A)}),B&&A.push(F))}},84847:function(Vt,P,S){var T=S(63763),j=S(89126);Vt.exports=y;function y(U,F,B){return j.transform(U.nodes(),function(R,N){R[N]=T(U,N,F,B)},{})}},63763:function(Vt,P,S){var T=S(89126),j=S(75639);Vt.exports=U;var y=T.constant(1);function U(B,R,N,A){return F(B,String(R),N||y,A||function(D){return B.outEdges(D)})}function F(B,R,N,A){var D={},M=new j,O,k,V=function(X){var K=X.v!==O?X.v:X.w,q=D[K],ct=N(X),_t=k.distance+ct;if(ct<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+X+" Weight: "+ct);_t<q.distance&&(q.distance=_t,q.predecessor=O,M.decrease(K,_t))};for(B.nodes().forEach(function(X){var K=X===R?0:Number.POSITIVE_INFINITY;D[X]={distance:K},M.add(X,K)});M.size()>0&&(O=M.removeMin(),k=D[O],k.distance!==Number.POSITIVE_INFINITY);)A(O).forEach(V);return D}},9096:function(Vt,P,S){var T=S(89126),j=S(5023);Vt.exports=y;function y(U){return T.filter(j(U),function(F){return F.length>1||F.length===1&&U.hasEdge(F[0],F[0])})}},38924:function(Vt,P,S){var T=S(89126);Vt.exports=y;var j=T.constant(1);function y(F,B,R){return U(F,B||j,R||function(N){return F.outEdges(N)})}function U(F,B,R){var N={},A=F.nodes();return A.forEach(function(D){N[D]={},N[D][D]={distance:0},A.forEach(function(M){D!==M&&(N[D][M]={distance:Number.POSITIVE_INFINITY})}),R(D).forEach(function(M){var O=M.v===D?M.w:M.v,k=B(M);N[D][O]={distance:k,predecessor:D}})}),A.forEach(function(D){var M=N[D];A.forEach(function(O){var k=N[O];A.forEach(function(V){var X=k[D],K=M[V],q=k[V],ct=X.distance+K.distance;ct<q.distance&&(q.distance=ct,q.predecessor=K.predecessor)})})}),N}},12440:function(Vt,P,S){Vt.exports={components:S(2842),dijkstra:S(63763),dijkstraAll:S(84847),findCycles:S(9096),floydWarshall:S(38924),isAcyclic:S(62707),postorder:S(58828),preorder:S(92648),prim:S(80514),tarjan:S(5023),topsort:S(2166)}},62707:function(Vt,P,S){var T=S(2166);Vt.exports=j;function j(y){try{T(y)}catch(U){if(U instanceof T.CycleException)return!1;throw U}return!0}},58828:function(Vt,P,S){var T=S(53984);Vt.exports=j;function j(y,U){return T(y,U,"post")}},92648:function(Vt,P,S){var T=S(53984);Vt.exports=j;function j(y,U){return T(y,U,"pre")}},80514:function(Vt,P,S){var T=S(89126),j=S(30771),y=S(75639);Vt.exports=U;function U(F,B){var R=new j,N={},A=new y,D;function M(k){var V=k.v===D?k.w:k.v,X=A.priority(V);if(X!==void 0){var K=B(k);K<X&&(N[V]=D,A.decrease(V,K))}}if(F.nodeCount()===0)return R;T.each(F.nodes(),function(k){A.add(k,Number.POSITIVE_INFINITY),R.setNode(k)}),A.decrease(F.nodes()[0],0);for(var O=!1;A.size()>0;){if(D=A.removeMin(),T.has(N,D))R.setEdge(D,N[D]);else{if(O)throw new Error("Input graph is not connected: "+F);O=!0}F.nodeEdges(D).forEach(M)}return R}},5023:function(Vt,P,S){var T=S(89126);Vt.exports=j;function j(y){var U=0,F=[],B={},R=[];function N(A){var D=B[A]={onStack:!0,lowlink:U,index:U++};if(F.push(A),y.successors(A).forEach(function(k){T.has(B,k)?B[k].onStack&&(D.lowlink=Math.min(D.lowlink,B[k].index)):(N(k),D.lowlink=Math.min(D.lowlink,B[k].lowlink))}),D.lowlink===D.index){var M=[],O;do O=F.pop(),B[O].onStack=!1,M.push(O);while(A!==O);R.push(M)}}return y.nodes().forEach(function(A){T.has(B,A)||N(A)}),R}},2166:function(Vt,P,S){var T=S(89126);Vt.exports=j,j.CycleException=y;function j(U){var F={},B={},R=[];function N(A){if(T.has(B,A))throw new y;T.has(F,A)||(B[A]=!0,F[A]=!0,T.each(U.predecessors(A),N),delete B[A],R.push(A))}if(T.each(U.sinks(),N),T.size(F)!==U.nodeCount())throw new y;return R}function y(){}y.prototype=new Error},75639:function(Vt,P,S){var T=S(89126);Vt.exports=j;function j(){this._arr=[],this._keyIndices={}}j.prototype.size=function(){return this._arr.length},j.prototype.keys=function(){return this._arr.map(function(y){return y.key})},j.prototype.has=function(y){return T.has(this._keyIndices,y)},j.prototype.priority=function(y){var U=this._keyIndices[y];if(U!==void 0)return this._arr[U].priority},j.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},j.prototype.add=function(y,U){var F=this._keyIndices;if(y=String(y),!T.has(F,y)){var B=this._arr,R=B.length;return F[y]=R,B.push({key:y,priority:U}),this._decrease(R),!0}return!1},j.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var y=this._arr.pop();return delete this._keyIndices[y.key],this._heapify(0),y.key},j.prototype.decrease=function(y,U){var F=this._keyIndices[y];if(U>this._arr[F].priority)throw new Error("New priority is greater than current priority. Key: "+y+" Old: "+this._arr[F].priority+" New: "+U);this._arr[F].priority=U,this._decrease(F)},j.prototype._heapify=function(y){var U=this._arr,F=2*y,B=F+1,R=y;F<U.length&&(R=U[F].priority<U[R].priority?F:R,B<U.length&&(R=U[B].priority<U[R].priority?B:R),R!==y&&(this._swap(y,R),this._heapify(R)))},j.prototype._decrease=function(y){for(var U=this._arr,F=U[y].priority,B;y!==0&&(B=y>>1,!(U[B].priority<F));)this._swap(y,B),y=B},j.prototype._swap=function(y,U){var F=this._arr,B=this._keyIndices,R=F[y],N=F[U];F[y]=N,F[U]=R,B[N.key]=y,B[R.key]=U}},30771:function(Vt,P,S){"use strict";var T=S(89126);Vt.exports=F;var j="\0",y="\0",U="";function F(M){this._isDirected=T.has(M,"directed")?M.directed:!0,this._isMultigraph=T.has(M,"multigraph")?M.multigraph:!1,this._isCompound=T.has(M,"compound")?M.compound:!1,this._label=void 0,this._defaultNodeLabelFn=T.constant(void 0),this._defaultEdgeLabelFn=T.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[y]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}F.prototype._nodeCount=0,F.prototype._edgeCount=0,F.prototype.isDirected=function(){return this._isDirected},F.prototype.isMultigraph=function(){return this._isMultigraph},F.prototype.isCompound=function(){return this._isCompound},F.prototype.setGraph=function(M){return this._label=M,this},F.prototype.graph=function(){return this._label},F.prototype.setDefaultNodeLabel=function(M){return T.isFunction(M)||(M=T.constant(M)),this._defaultNodeLabelFn=M,this},F.prototype.nodeCount=function(){return this._nodeCount},F.prototype.nodes=function(){return T.keys(this._nodes)},F.prototype.sources=function(){var M=this;return T.filter(this.nodes(),function(O){return T.isEmpty(M._in[O])})},F.prototype.sinks=function(){var M=this;return T.filter(this.nodes(),function(O){return T.isEmpty(M._out[O])})},F.prototype.setNodes=function(M,O){var k=arguments,V=this;return T.each(M,function(X){k.length>1?V.setNode(X,O):V.setNode(X)}),this},F.prototype.setNode=function(M,O){return T.has(this._nodes,M)?(arguments.length>1&&(this._nodes[M]=O),this):(this._nodes[M]=arguments.length>1?O:this._defaultNodeLabelFn(M),this._isCompound&&(this._parent[M]=y,this._children[M]={},this._children[y][M]=!0),this._in[M]={},this._preds[M]={},this._out[M]={},this._sucs[M]={},++this._nodeCount,this)},F.prototype.node=function(M){return this._nodes[M]},F.prototype.hasNode=function(M){return T.has(this._nodes,M)},F.prototype.removeNode=function(M){var O=this;if(T.has(this._nodes,M)){var k=function(V){O.removeEdge(O._edgeObjs[V])};delete this._nodes[M],this._isCompound&&(this._removeFromParentsChildList(M),delete this._parent[M],T.each(this.children(M),function(V){O.setParent(V)}),delete this._children[M]),T.each(T.keys(this._in[M]),k),delete this._in[M],delete this._preds[M],T.each(T.keys(this._out[M]),k),delete this._out[M],delete this._sucs[M],--this._nodeCount}return this},F.prototype.setParent=function(M,O){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(T.isUndefined(O))O=y;else{O+="";for(var k=O;!T.isUndefined(k);k=this.parent(k))if(k===M)throw new Error("Setting "+O+" as parent of "+M+" would create a cycle");this.setNode(O)}return this.setNode(M),this._removeFromParentsChildList(M),this._parent[M]=O,this._children[O][M]=!0,this},F.prototype._removeFromParentsChildList=function(M){delete this._children[this._parent[M]][M]},F.prototype.parent=function(M){if(this._isCompound){var O=this._parent[M];if(O!==y)return O}},F.prototype.children=function(M){if(T.isUndefined(M)&&(M=y),this._isCompound){var O=this._children[M];if(O)return T.keys(O)}else{if(M===y)return this.nodes();if(this.hasNode(M))return[]}},F.prototype.predecessors=function(M){var O=this._preds[M];if(O)return T.keys(O)},F.prototype.successors=function(M){var O=this._sucs[M];if(O)return T.keys(O)},F.prototype.neighbors=function(M){var O=this.predecessors(M);if(O)return T.union(O,this.successors(M))},F.prototype.isLeaf=function(M){var O;return this.isDirected()?O=this.successors(M):O=this.neighbors(M),O.length===0},F.prototype.filterNodes=function(M){var O=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});O.setGraph(this.graph());var k=this;T.each(this._nodes,function(K,q){M(q)&&O.setNode(q,K)}),T.each(this._edgeObjs,function(K){O.hasNode(K.v)&&O.hasNode(K.w)&&O.setEdge(K,k.edge(K))});var V={};function X(K){var q=k.parent(K);return q===void 0||O.hasNode(q)?(V[K]=q,q):q in V?V[q]:X(q)}return this._isCompound&&T.each(O.nodes(),function(K){O.setParent(K,X(K))}),O},F.prototype.setDefaultEdgeLabel=function(M){return T.isFunction(M)||(M=T.constant(M)),this._defaultEdgeLabelFn=M,this},F.prototype.edgeCount=function(){return this._edgeCount},F.prototype.edges=function(){return T.values(this._edgeObjs)},F.prototype.setPath=function(M,O){var k=this,V=arguments;return T.reduce(M,function(X,K){return V.length>1?k.setEdge(X,K,O):k.setEdge(X,K),K}),this},F.prototype.setEdge=function(){var M,O,k,V,X=!1,K=arguments[0];typeof K=="object"&&K!==null&&"v"in K?(M=K.v,O=K.w,k=K.name,arguments.length===2&&(V=arguments[1],X=!0)):(M=K,O=arguments[1],k=arguments[3],arguments.length>2&&(V=arguments[2],X=!0)),M=""+M,O=""+O,T.isUndefined(k)||(k=""+k);var q=N(this._isDirected,M,O,k);if(T.has(this._edgeLabels,q))return X&&(this._edgeLabels[q]=V),this;if(!T.isUndefined(k)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(M),this.setNode(O),this._edgeLabels[q]=X?V:this._defaultEdgeLabelFn(M,O,k);var ct=A(this._isDirected,M,O,k);return M=ct.v,O=ct.w,Object.freeze(ct),this._edgeObjs[q]=ct,B(this._preds[O],M),B(this._sucs[M],O),this._in[O][q]=ct,this._out[M][q]=ct,this._edgeCount++,this},F.prototype.edge=function(M,O,k){var V=arguments.length===1?D(this._isDirected,arguments[0]):N(this._isDirected,M,O,k);return this._edgeLabels[V]},F.prototype.hasEdge=function(M,O,k){var V=arguments.length===1?D(this._isDirected,arguments[0]):N(this._isDirected,M,O,k);return T.has(this._edgeLabels,V)},F.prototype.removeEdge=function(M,O,k){var V=arguments.length===1?D(this._isDirected,arguments[0]):N(this._isDirected,M,O,k),X=this._edgeObjs[V];return X&&(M=X.v,O=X.w,delete this._edgeLabels[V],delete this._edgeObjs[V],R(this._preds[O],M),R(this._sucs[M],O),delete this._in[O][V],delete this._out[M][V],this._edgeCount--),this},F.prototype.inEdges=function(M,O){var k=this._in[M];if(k){var V=T.values(k);return O?T.filter(V,function(X){return X.v===O}):V}},F.prototype.outEdges=function(M,O){var k=this._out[M];if(k){var V=T.values(k);return O?T.filter(V,function(X){return X.w===O}):V}},F.prototype.nodeEdges=function(M,O){var k=this.inEdges(M,O);if(k)return k.concat(this.outEdges(M,O))};function B(M,O){M[O]?M[O]++:M[O]=1}function R(M,O){--M[O]||delete M[O]}function N(M,O,k,V){var X=""+O,K=""+k;if(!M&&X>K){var q=X;X=K,K=q}return X+U+K+U+(T.isUndefined(V)?j:V)}function A(M,O,k,V){var X=""+O,K=""+k;if(!M&&X>K){var q=X;X=K,K=q}var ct={v:X,w:K};return V&&(ct.name=V),ct}function D(M,O){return N(M,O.v,O.w,O.name)}},82354:function(Vt,P,S){Vt.exports={Graph:S(30771),version:S(49631)}},28974:function(Vt,P,S){var T=S(89126),j=S(30771);Vt.exports={write:y,read:B};function y(R){var N={options:{directed:R.isDirected(),multigraph:R.isMultigraph(),compound:R.isCompound()},nodes:U(R),edges:F(R)};return T.isUndefined(R.graph())||(N.value=T.clone(R.graph())),N}function U(R){return T.map(R.nodes(),function(N){var A=R.node(N),D=R.parent(N),M={v:N};return T.isUndefined(A)||(M.value=A),T.isUndefined(D)||(M.parent=D),M})}function F(R){return T.map(R.edges(),function(N){var A=R.edge(N),D={v:N.v,w:N.w};return T.isUndefined(N.name)||(D.name=N.name),T.isUndefined(A)||(D.value=A),D})}function B(R){var N=new j(R.options).setGraph(R.value);return T.each(R.nodes,function(A){N.setNode(A.v,A.value),A.parent&&N.setParent(A.v,A.parent)}),T.each(R.edges,function(A){N.setEdge({v:A.v,w:A.w,name:A.name},A.value)}),N}},89126:function(Vt,P,S){var T;try{T={clone:S(66678),constant:S(75703),each:S(66073),filter:S(63105),has:S(18721),isArray:S(1469),isEmpty:S(41609),isFunction:S(23560),isUndefined:S(52353),keys:S(3674),map:S(35161),reduce:S(54061),size:S(84238),transform:S(68718),union:S(93386),values:S(52628)}}catch(j){}T||(T=window._),Vt.exports=T},49631:function(Vt){Vt.exports="2.1.8"},38186:function(Vt){var P=[],S=[],T="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function j(U,F){if(F=F||{},U===void 0)throw new Error(T);var B=F.prepend===!0?"prepend":"append",R=F.container!==void 0?F.container:document.querySelector("head"),N=P.indexOf(R);N===-1&&(N=P.push(R)-1,S[N]={});var A;return S[N]!==void 0&&S[N][B]!==void 0?A=S[N][B]:(A=S[N][B]=y(),B==="prepend"?R.insertBefore(A,R.childNodes[0]):R.appendChild(A)),U.charCodeAt(0)===65279&&(U=U.substr(1,U.length)),A.styleSheet?A.styleSheet.cssText+=U:A.textContent+=U,A}function y(){var U=document.createElement("style");return U.setAttribute("type","text/css"),U}Vt.exports=j,Vt.exports.insertCss=j},7375:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var S=Symbol.for("INJECTION");function T(B,R,N,A){function D(){return A&&!Reflect.hasMetadata(S,this,R)&&Reflect.defineMetadata(S,N(),this,R),Reflect.hasMetadata(S,this,R)?Reflect.getMetadata(S,this,R):N()}function M(O){Reflect.defineMetadata(S,O,this,R)}Object.defineProperty(B,R,{configurable:!0,enumerable:!0,get:D,set:M})}function j(B,R){return function(N){return function(A,D){var M=function(){return B.get(N)};T(A,D,M,R)}}}P.makePropertyInjectDecorator=j;function y(B,R){return function(N,A){return function(D,M){var O=function(){return B.getNamed(N,A)};T(D,M,O,R)}}}P.makePropertyInjectNamedDecorator=y;function U(B,R){return function(N,A,D){return function(M,O){var k=function(){return B.getTagged(N,A,D)};T(M,O,k,R)}}}P.makePropertyInjectTaggedDecorator=U;function F(B,R){return function(N){return function(A,D){var M=function(){return B.getAll(N)};T(A,D,M,R)}}}P.makePropertyMultiInjectDecorator=F},84879:function(Vt,P,S){"use strict";var T;T={value:!0};var j=S(7375);function y(U,F){F===void 0&&(F=!0);var B=j.makePropertyInjectDecorator(U,F),R=j.makePropertyInjectNamedDecorator(U,F),N=j.makePropertyInjectTaggedDecorator(U,F),A=j.makePropertyMultiInjectDecorator(U,F);return{lazyInject:B,lazyInjectNamed:R,lazyInjectTagged:N,lazyMultiInject:A}}P.Z=y},99934:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.tagProperty=P.tagParameter=P.decorate=void 0;var T=S(16674),j=S(6867);function y(A,D,M,O){var k=j.TAGGED;F(k,A,D,O,M)}P.tagParameter=y;function U(A,D,M){var O=j.TAGGED_PROP;F(O,A.constructor,D,M)}P.tagProperty=U;function F(A,D,M,O,k){var V={},X=typeof k=="number",K=k!==void 0&&X?k.toString():M;if(X&&M!==void 0)throw new Error(T.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(A,D)&&(V=Reflect.getMetadata(A,D));var q=V[K];if(!Array.isArray(q))q=[];else for(var ct=0,_t=q;ct<_t.length;ct++){var yt=_t[ct];if(yt.key===O.key)throw new Error(T.DUPLICATED_METADATA+" "+yt.key.toString())}q.push(O),V[K]=q,Reflect.defineMetadata(A,V,D)}function B(A,D){Reflect.decorate(A,D)}function R(A,D){return function(M,O){D(M,O,A)}}function N(A,D,M){typeof M=="number"?B([R(M,A)],D):typeof M=="string"?Reflect.decorate([A],D,M):B([A],D)}P.decorate=N},5744:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.inject=P.LazyServiceIdentifer=void 0;var T=S(16674),j=S(6867),y=S(47738),U=S(99934),F=function(){function R(N){this._cb=N}return R.prototype.unwrap=function(){return this._cb()},R}();P.LazyServiceIdentifer=F;function B(R){return function(N,A,D){if(R===void 0)throw new Error(T.UNDEFINED_INJECT_ANNOTATION(N.name));var M=new y.Metadata(j.INJECT_TAG,R);typeof D=="number"?U.tagParameter(N,A,D,M):U.tagProperty(N,A,M)}}P.inject=B},64315:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.injectable=void 0;var T=S(16674),j=S(6867);function y(){return function(U){if(Reflect.hasOwnMetadata(j.PARAM_TYPES,U))throw new Error(T.DUPLICATED_INJECTABLE_DECORATOR);var F=Reflect.getMetadata(j.DESIGN_PARAM_TYPES,U)||[];return Reflect.defineMetadata(j.PARAM_TYPES,F,U),U}}P.injectable=y},71693:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.multiInject=void 0;var T=S(6867),j=S(47738),y=S(99934);function U(F){return function(B,R,N){var A=new j.Metadata(T.MULTI_INJECT_TAG,F);typeof N=="number"?y.tagParameter(B,R,N,A):y.tagProperty(B,R,A)}}P.multiInject=U},38085:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.named=void 0;var T=S(6867),j=S(47738),y=S(99934);function U(F){return function(B,R,N){var A=new j.Metadata(T.NAMED_TAG,F);typeof N=="number"?y.tagParameter(B,R,N,A):y.tagProperty(B,R,A)}}P.named=U},6515:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.optional=void 0;var T=S(6867),j=S(47738),y=S(99934);function U(){return function(F,B,R){var N=new j.Metadata(T.OPTIONAL_TAG,!0);typeof R=="number"?y.tagParameter(F,B,R,N):y.tagProperty(F,B,N)}}P.optional=U},7014:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.postConstruct=void 0;var T=S(16674),j=S(6867),y=S(47738);function U(){return function(F,B,R){var N=new y.Metadata(j.POST_CONSTRUCT,B);if(Reflect.hasOwnMetadata(j.POST_CONSTRUCT,F.constructor))throw new Error(T.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(j.POST_CONSTRUCT,N,F.constructor)}}P.postConstruct=U},32052:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.tagged=void 0;var T=S(47738),j=S(99934);function y(U,F){return function(B,R,N){var A=new T.Metadata(U,F);typeof N=="number"?j.tagParameter(B,R,N,A):j.tagProperty(B,R,A)}}P.tagged=y},55638:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.targetName=void 0;var T=S(6867),j=S(47738),y=S(99934);function U(F){return function(B,R,N){var A=new j.Metadata(T.NAME_TAG,F);y.tagParameter(B,R,N,A)}}P.targetName=U},86757:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.unmanaged=void 0;var T=S(6867),j=S(47738),y=S(99934);function U(){return function(F,B,R){var N=new j.Metadata(T.UNMANAGED_TAG,!0);y.tagParameter(F,B,R,N)}}P.unmanaged=U},44290:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Binding=void 0;var T=S(28421),j=S(37791),y=function(){function U(F,B){this.id=j.id(),this.activated=!1,this.serviceIdentifier=F,this.scope=B,this.type=T.BindingTypeEnum.Invalid,this.constraint=function(R){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return U.prototype.clone=function(){var F=new U(this.serviceIdentifier,this.scope);return F.activated=F.scope===T.BindingScopeEnum.Singleton?this.activated:!1,F.implementationType=this.implementationType,F.dynamicValue=this.dynamicValue,F.scope=this.scope,F.type=this.type,F.factory=this.factory,F.provider=this.provider,F.constraint=this.constraint,F.onActivation=this.onActivation,F.cache=this.cache,F},U}();P.Binding=y},23184:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingCount=void 0;var S={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};P.BindingCount=S},16674:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.STACK_OVERFLOW=P.CIRCULAR_DEPENDENCY_IN_FACTORY=P.POST_CONSTRUCT_ERROR=P.MULTIPLE_POST_CONSTRUCT_METHODS=P.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=P.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=P.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=P.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=P.ARGUMENTS_LENGTH_MISMATCH=P.INVALID_DECORATOR_OPERATION=P.INVALID_TO_SELF_VALUE=P.INVALID_FUNCTION_BINDING=P.INVALID_MIDDLEWARE_RETURN=P.NO_MORE_SNAPSHOTS_AVAILABLE=P.INVALID_BINDING_TYPE=P.NOT_IMPLEMENTED=P.CIRCULAR_DEPENDENCY=P.UNDEFINED_INJECT_ANNOTATION=P.MISSING_INJECT_ANNOTATION=P.MISSING_INJECTABLE_ANNOTATION=P.NOT_REGISTERED=P.CANNOT_UNBIND=P.AMBIGUOUS_MATCH=P.KEY_NOT_FOUND=P.NULL_ARGUMENT=P.DUPLICATED_METADATA=P.DUPLICATED_INJECTABLE_DECORATOR=void 0,P.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",P.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",P.NULL_ARGUMENT="NULL argument",P.KEY_NOT_FOUND="Key Not Found",P.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",P.CANNOT_UNBIND="Could not unbind serviceIdentifier:",P.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",P.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",P.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var S=function(U){return"@inject called with undefined this could mean that the class "+U+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};P.UNDEFINED_INJECT_ANNOTATION=S,P.CIRCULAR_DEPENDENCY="Circular dependency found:",P.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",P.INVALID_BINDING_TYPE="Invalid binding type:",P.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",P.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",P.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",P.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",P.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var T=function(){for(var U=[],F=0;F<arguments.length;F++)U[F]=arguments[F];return"The number of constructor arguments in the derived class "+(U[0]+" must be >= than the number of constructor arguments of its base class.")};P.ARGUMENTS_LENGTH_MISMATCH=T,P.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",P.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",P.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",P.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",P.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var j=function(){for(var U=[],F=0;F<arguments.length;F++)U[F]=arguments[F];return"@postConstruct error in class "+U[0]+": "+U[1]};P.POST_CONSTRUCT_ERROR=j;var y=function(){for(var U=[],F=0;F<arguments.length;F++)U[F]=arguments[F];return"It looks like there is a circular dependency "+("in one of the '"+U[0]+"' bindings. Please investigate bindings with")+("service identifier '"+U[1]+"'.")};P.CIRCULAR_DEPENDENCY_IN_FACTORY=y,P.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TargetTypeEnum=P.BindingTypeEnum=P.BindingScopeEnum=void 0;var S={Request:"Request",Singleton:"Singleton",Transient:"Transient"};P.BindingScopeEnum=S;var T={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};P.BindingTypeEnum=T;var j={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};P.TargetTypeEnum=j},6867:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.NON_CUSTOM_TAG_KEYS=P.POST_CONSTRUCT=P.DESIGN_PARAM_TYPES=P.PARAM_TYPES=P.TAGGED_PROP=P.TAGGED=P.MULTI_INJECT_TAG=P.INJECT_TAG=P.OPTIONAL_TAG=P.UNMANAGED_TAG=P.NAME_TAG=P.NAMED_TAG=void 0,P.NAMED_TAG="named",P.NAME_TAG="name",P.UNMANAGED_TAG="unmanaged",P.OPTIONAL_TAG="optional",P.INJECT_TAG="inject",P.MULTI_INJECT_TAG="multi_inject",P.TAGGED="inversify:tagged",P.TAGGED_PROP="inversify:tagged_props",P.PARAM_TYPES="inversify:paramtypes",P.DESIGN_PARAM_TYPES="design:paramtypes",P.POST_CONSTRUCT="post_construct";function S(){return[P.INJECT_TAG,P.MULTI_INJECT_TAG,P.NAME_TAG,P.UNMANAGED_TAG,P.NAMED_TAG,P.OPTIONAL_TAG]}P.NON_CUSTOM_TAG_KEYS=S()},51389:function(Vt,P,S){"use strict";var T=this&&this.__awaiter||function(q,ct,_t,yt){function lt(Lt){return Lt instanceof _t?Lt:new _t(function(wt){wt(Lt)})}return new(_t||(_t=Promise))(function(Lt,wt){function Gt(it){try{Qt(yt.next(it))}catch(dt){wt(dt)}}function re(it){try{Qt(yt.throw(it))}catch(dt){wt(dt)}}function Qt(it){it.done?Lt(it.value):lt(it.value).then(Gt,re)}Qt((yt=yt.apply(q,ct||[])).next())})},j=this&&this.__generator||function(q,ct){var _t={label:0,sent:function(){if(Lt[0]&1)throw Lt[1];return Lt[1]},trys:[],ops:[]},yt,lt,Lt,wt;return wt={next:Gt(0),throw:Gt(1),return:Gt(2)},typeof Symbol=="function"&&(wt[Symbol.iterator]=function(){return this}),wt;function Gt(Qt){return function(it){return re([Qt,it])}}function re(Qt){if(yt)throw new TypeError("Generator is already executing.");for(;_t;)try{if(yt=1,lt&&(Lt=Qt[0]&2?lt.return:Qt[0]?lt.throw||((Lt=lt.return)&&Lt.call(lt),0):lt.next)&&!(Lt=Lt.call(lt,Qt[1])).done)return Lt;switch(lt=0,Lt&&(Qt=[Qt[0]&2,Lt.value]),Qt[0]){case 0:case 1:Lt=Qt;break;case 4:return _t.label++,{value:Qt[1],done:!1};case 5:_t.label++,lt=Qt[1],Qt=[0];continue;case 7:Qt=_t.ops.pop(),_t.trys.pop();continue;default:if(Lt=_t.trys,!(Lt=Lt.length>0&&Lt[Lt.length-1])&&(Qt[0]===6||Qt[0]===2)){_t=0;continue}if(Qt[0]===3&&(!Lt||Qt[1]>Lt[0]&&Qt[1]<Lt[3])){_t.label=Qt[1];break}if(Qt[0]===6&&_t.label<Lt[1]){_t.label=Lt[1],Lt=Qt;break}if(Lt&&_t.label<Lt[2]){_t.label=Lt[2],_t.ops.push(Qt);break}Lt[2]&&_t.ops.pop(),_t.trys.pop();continue}Qt=ct.call(q,_t)}catch(it){Qt=[6,it],lt=0}finally{yt=Lt=0}if(Qt[0]&5)throw Qt[1];return{value:Qt[0]?Qt[1]:void 0,done:!0}}},y=this&&this.__spreadArray||function(q,ct){for(var _t=0,yt=ct.length,lt=q.length;_t<yt;_t++,lt++)q[lt]=ct[_t];return q};Object.defineProperty(P,"__esModule",{value:!0}),P.Container=void 0;var U=S(44290),F=S(16674),B=S(28421),R=S(6867),N=S(51377),A=S(86311),D=S(31927),M=S(51860),O=S(37791),k=S(55800),V=S(85700),X=S(80175),K=function(){function q(ct){this._appliedMiddleware=[];var _t=ct||{};if(typeof _t!="object")throw new Error(""+F.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(_t.defaultScope===void 0)_t.defaultScope=B.BindingScopeEnum.Transient;else if(_t.defaultScope!==B.BindingScopeEnum.Singleton&&_t.defaultScope!==B.BindingScopeEnum.Transient&&_t.defaultScope!==B.BindingScopeEnum.Request)throw new Error(""+F.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(_t.autoBindInjectable===void 0)_t.autoBindInjectable=!1;else if(typeof _t.autoBindInjectable!="boolean")throw new Error(""+F.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(_t.skipBaseClassChecks===void 0)_t.skipBaseClassChecks=!1;else if(typeof _t.skipBaseClassChecks!="boolean")throw new Error(""+F.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:_t.autoBindInjectable,defaultScope:_t.defaultScope,skipBaseClassChecks:_t.skipBaseClassChecks},this.id=O.id(),this._bindingDictionary=new X.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new N.MetadataReader}return q.merge=function(ct,_t){for(var yt=[],lt=2;lt<arguments.length;lt++)yt[lt-2]=arguments[lt];var Lt=new q,wt=y([ct,_t],yt).map(function(Qt){return A.getBindingDictionary(Qt)}),Gt=A.getBindingDictionary(Lt);function re(Qt,it){Qt.traverse(function(dt,gt){gt.forEach(function(vt){it.add(vt.serviceIdentifier,vt.clone())})})}return wt.forEach(function(Qt){re(Qt,Gt)}),Lt},q.prototype.load=function(){for(var ct=[],_t=0;_t<arguments.length;_t++)ct[_t]=arguments[_t];for(var yt=this._getContainerModuleHelpersFactory(),lt=0,Lt=ct;lt<Lt.length;lt++){var wt=Lt[lt],Gt=yt(wt.id);wt.registry(Gt.bindFunction,Gt.unbindFunction,Gt.isboundFunction,Gt.rebindFunction)}},q.prototype.loadAsync=function(){for(var ct=[],_t=0;_t<arguments.length;_t++)ct[_t]=arguments[_t];return T(this,void 0,void 0,function(){var yt,lt,Lt,wt,Gt;return j(this,function(re){switch(re.label){case 0:yt=this._getContainerModuleHelpersFactory(),lt=0,Lt=ct,re.label=1;case 1:return lt<Lt.length?(wt=Lt[lt],Gt=yt(wt.id),[4,wt.registry(Gt.bindFunction,Gt.unbindFunction,Gt.isboundFunction,Gt.rebindFunction)]):[3,4];case 2:re.sent(),re.label=3;case 3:return lt++,[3,1];case 4:return[2]}})})},q.prototype.unload=function(){for(var ct=this,_t=[],yt=0;yt<arguments.length;yt++)_t[yt]=arguments[yt];var lt=function(Lt){return function(wt){return wt.moduleId===Lt}};_t.forEach(function(Lt){var wt=lt(Lt.id);ct._bindingDictionary.removeByCondition(wt)})},q.prototype.bind=function(ct){var _t=this.options.defaultScope||B.BindingScopeEnum.Transient,yt=new U.Binding(ct,_t);return this._bindingDictionary.add(ct,yt),new M.BindingToSyntax(yt)},q.prototype.rebind=function(ct){return this.unbind(ct),this.bind(ct)},q.prototype.unbind=function(ct){try{this._bindingDictionary.remove(ct)}catch(_t){throw new Error(F.CANNOT_UNBIND+" "+k.getServiceIdentifierAsString(ct))}},q.prototype.unbindAll=function(){this._bindingDictionary=new X.Lookup},q.prototype.isBound=function(ct){var _t=this._bindingDictionary.hasKey(ct);return!_t&&this.parent&&(_t=this.parent.isBound(ct)),_t},q.prototype.isBoundNamed=function(ct,_t){return this.isBoundTagged(ct,R.NAMED_TAG,_t)},q.prototype.isBoundTagged=function(ct,_t,yt){var lt=!1;if(this._bindingDictionary.hasKey(ct)){var Lt=this._bindingDictionary.get(ct),wt=A.createMockRequest(this,ct,_t,yt);lt=Lt.some(function(Gt){return Gt.constraint(wt)})}return!lt&&this.parent&&(lt=this.parent.isBoundTagged(ct,_t,yt)),lt},q.prototype.snapshot=function(){this._snapshots.push(V.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},q.prototype.restore=function(){var ct=this._snapshots.pop();if(ct===void 0)throw new Error(F.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=ct.bindings,this._middleware=ct.middleware},q.prototype.createChild=function(ct){var _t=new q(ct||this.options);return _t.parent=this,_t},q.prototype.applyMiddleware=function(){for(var ct=[],_t=0;_t<arguments.length;_t++)ct[_t]=arguments[_t];this._appliedMiddleware=this._appliedMiddleware.concat(ct);var yt=this._middleware?this._middleware:this._planAndResolve();this._middleware=ct.reduce(function(lt,Lt){return Lt(lt)},yt)},q.prototype.applyCustomMetadataReader=function(ct){this._metadataReader=ct},q.prototype.get=function(ct){return this._get(!1,!1,B.TargetTypeEnum.Variable,ct)},q.prototype.getTagged=function(ct,_t,yt){return this._get(!1,!1,B.TargetTypeEnum.Variable,ct,_t,yt)},q.prototype.getNamed=function(ct,_t){return this.getTagged(ct,R.NAMED_TAG,_t)},q.prototype.getAll=function(ct){return this._get(!0,!0,B.TargetTypeEnum.Variable,ct)},q.prototype.getAllTagged=function(ct,_t,yt){return this._get(!1,!0,B.TargetTypeEnum.Variable,ct,_t,yt)},q.prototype.getAllNamed=function(ct,_t){return this.getAllTagged(ct,R.NAMED_TAG,_t)},q.prototype.resolve=function(ct){var _t=this.createChild();return _t.bind(ct).toSelf(),this._appliedMiddleware.forEach(function(yt){_t.applyMiddleware(yt)}),_t.get(ct)},q.prototype._getContainerModuleHelpersFactory=function(){var ct=this,_t=function(Gt,re){Gt._binding.moduleId=re},yt=function(Gt){return function(re){var Qt=ct.bind.bind(ct),it=Qt(re);return _t(it,Gt),it}},lt=function(Gt){return function(re){var Qt=ct.unbind.bind(ct);Qt(re)}},Lt=function(Gt){return function(re){var Qt=ct.isBound.bind(ct);return Qt(re)}},wt=function(Gt){return function(re){var Qt=ct.rebind.bind(ct),it=Qt(re);return _t(it,Gt),it}};return function(Gt){return{bindFunction:yt(Gt),isboundFunction:Lt(Gt),rebindFunction:wt(Gt),unbindFunction:lt(Gt)}}},q.prototype._get=function(ct,_t,yt,lt,Lt,wt){var Gt=null,re={avoidConstraints:ct,contextInterceptor:function(Qt){return Qt},isMultiInject:_t,key:Lt,serviceIdentifier:lt,targetType:yt,value:wt};if(this._middleware){if(Gt=this._middleware(re),Gt==null)throw new Error(F.INVALID_MIDDLEWARE_RETURN)}else Gt=this._planAndResolve()(re);return Gt},q.prototype._planAndResolve=function(){var ct=this;return function(_t){var yt=A.plan(ct._metadataReader,ct,_t.isMultiInject,_t.targetType,_t.serviceIdentifier,_t.key,_t.value,_t.avoidConstraints);yt=_t.contextInterceptor(yt);var lt=D.resolve(yt);return lt}},q}();P.Container=K},33244:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AsyncContainerModule=P.ContainerModule=void 0;var T=S(37791),j=function(){function U(F){this.id=T.id(),this.registry=F}return U}();P.ContainerModule=j;var y=function(){function U(F){this.id=T.id(),this.registry=F}return U}();P.AsyncContainerModule=y},85700:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ContainerSnapshot=void 0;var S=function(){function T(){}return T.of=function(j,y){var U=new T;return U.bindings=j,U.middleware=y,U},T}();P.ContainerSnapshot=S},80175:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Lookup=void 0;var T=S(16674),j=function(){function y(){this._map=new Map}return y.prototype.getMap=function(){return this._map},y.prototype.add=function(U,F){if(U==null)throw new Error(T.NULL_ARGUMENT);if(F==null)throw new Error(T.NULL_ARGUMENT);var B=this._map.get(U);B!==void 0?(B.push(F),this._map.set(U,B)):this._map.set(U,[F])},y.prototype.get=function(U){if(U==null)throw new Error(T.NULL_ARGUMENT);var F=this._map.get(U);if(F!==void 0)return F;throw new Error(T.KEY_NOT_FOUND)},y.prototype.remove=function(U){if(U==null)throw new Error(T.NULL_ARGUMENT);if(!this._map.delete(U))throw new Error(T.KEY_NOT_FOUND)},y.prototype.removeByCondition=function(U){var F=this;this._map.forEach(function(B,R){var N=B.filter(function(A){return!U(A)});N.length>0?F._map.set(R,N):F._map.delete(R)})},y.prototype.hasKey=function(U){if(U==null)throw new Error(T.NULL_ARGUMENT);return this._map.has(U)},y.prototype.clone=function(){var U=new y;return this._map.forEach(function(F,B){F.forEach(function(R){return U.add(B,R.clone())})}),U},y.prototype.traverse=function(U){this._map.forEach(function(F,B){U(B,F)})},y}();P.Lookup=j},86700:function(Vt,P,S){"use strict";var T;T={value:!0},T=T=T=T=T=T=P.GW=T=T=P.zY=T=T=T=T=T=P.f3=T=T=P.b2=T=T=T=T=T=P.W2=T=void 0;var j=S(6867);T=j;var y=S(51389);Object.defineProperty(P,"W2",{enumerable:!0,get:function(){return y.Container}});var U=S(28421);T={enumerable:!0,get:function(){return U.BindingScopeEnum}},T={enumerable:!0,get:function(){return U.BindingTypeEnum}},T={enumerable:!0,get:function(){return U.TargetTypeEnum}};var F=S(33244);T={enumerable:!0,get:function(){return F.AsyncContainerModule}},T={enumerable:!0,get:function(){return F.ContainerModule}};var B=S(64315);Object.defineProperty(P,"b2",{enumerable:!0,get:function(){return B.injectable}});var R=S(32052);T={enumerable:!0,get:function(){return R.tagged}};var N=S(38085);T={enumerable:!0,get:function(){return N.named}};var A=S(5744);Object.defineProperty(P,"f3",{enumerable:!0,get:function(){return A.inject}}),T={enumerable:!0,get:function(){return A.LazyServiceIdentifer}};var D=S(6515);T={enumerable:!0,get:function(){return D.optional}};var M=S(86757);T={enumerable:!0,get:function(){return M.unmanaged}};var O=S(71693);T={enumerable:!0,get:function(){return O.multiInject}};var k=S(55638);T={enumerable:!0,get:function(){return k.targetName}};var V=S(7014);Object.defineProperty(P,"zY",{enumerable:!0,get:function(){return V.postConstruct}});var X=S(51377);T={enumerable:!0,get:function(){return X.MetadataReader}};var K=S(37791);T={enumerable:!0,get:function(){return K.id}};var q=S(99934);Object.defineProperty(P,"GW",{enumerable:!0,get:function(){return q.decorate}});var ct=S(80758);T={enumerable:!0,get:function(){return ct.traverseAncerstors}},T={enumerable:!0,get:function(){return ct.taggedConstraint}},T={enumerable:!0,get:function(){return ct.namedConstraint}},T={enumerable:!0,get:function(){return ct.typeConstraint}};var _t=S(55800);T={enumerable:!0,get:function(){return _t.getServiceIdentifierAsString}};var yt=S(70600);T={enumerable:!0,get:function(){return yt.multiBindToService}}},95228:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Context=void 0;var T=S(37791),j=function(){function y(U){this.id=T.id(),this.container=U}return y.prototype.addPlan=function(U){this.plan=U},y.prototype.setCurrentRequest=function(U){this.currentRequest=U},y}();P.Context=j},47738:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Metadata=void 0;var T=S(6867),j=function(){function y(U,F){this.key=U,this.value=F}return y.prototype.toString=function(){return this.key===T.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},y}();P.Metadata=j},51377:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.MetadataReader=void 0;var T=S(6867),j=function(){function y(){}return y.prototype.getConstructorMetadata=function(U){var F=Reflect.getMetadata(T.PARAM_TYPES,U),B=Reflect.getMetadata(T.TAGGED,U);return{compilerGeneratedMetadata:F,userGeneratedMetadata:B||{}}},y.prototype.getPropertiesMetadata=function(U){var F=Reflect.getMetadata(T.TAGGED_PROP,U)||[];return F},y}();P.MetadataReader=j},55314:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Plan=void 0;var S=function(){function T(j,y){this.parentContext=j,this.rootRequest=y}return T}();P.Plan=S},86311:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getBindingDictionary=P.createMockRequest=P.plan=void 0;var T=S(23184),j=S(16674),y=S(28421),U=S(6867),F=S(85265),B=S(55800),R=S(95228),N=S(47738),A=S(55314),D=S(6e3),M=S(6748),O=S(18924);function k(lt){return lt._bindingDictionary}P.getBindingDictionary=k;function V(lt,Lt,wt,Gt,re,Qt){var it=lt?U.MULTI_INJECT_TAG:U.INJECT_TAG,dt=new N.Metadata(it,wt),gt=new O.Target(Lt,Gt,wt,dt);if(re!==void 0){var vt=new N.Metadata(re,Qt);gt.metadata.push(vt)}return gt}function X(lt,Lt,wt,Gt,re){var Qt=ct(wt.container,re.serviceIdentifier),it=[];return Qt.length===T.BindingCount.NoBindingsAvailable&&wt.container.options.autoBindInjectable&&typeof re.serviceIdentifier=="function"&&lt.getConstructorMetadata(re.serviceIdentifier).compilerGeneratedMetadata&&(wt.container.bind(re.serviceIdentifier).toSelf(),Qt=ct(wt.container,re.serviceIdentifier)),Lt?it=Qt:it=Qt.filter(function(dt){var gt=new M.Request(dt.serviceIdentifier,wt,Gt,dt,re);return dt.constraint(gt)}),K(re.serviceIdentifier,it,re,wt.container),it}function K(lt,Lt,wt,Gt){switch(Lt.length){case T.BindingCount.NoBindingsAvailable:if(wt.isOptional())return Lt;var re=B.getServiceIdentifierAsString(lt),Qt=j.NOT_REGISTERED;throw Qt+=B.listMetadataForTarget(re,wt),Qt+=B.listRegisteredBindingsForServiceIdentifier(Gt,re,ct),new Error(Qt);case T.BindingCount.OnlyOneBindingAvailable:if(!wt.isArray())return Lt;case T.BindingCount.MultipleBindingsAvailable:default:if(wt.isArray())return Lt;var re=B.getServiceIdentifierAsString(lt),Qt=j.AMBIGUOUS_MATCH+" "+re;throw Qt+=B.listRegisteredBindingsForServiceIdentifier(Gt,re,ct),new Error(Qt)}}function q(lt,Lt,wt,Gt,re,Qt){var it,dt;if(re===null){it=X(lt,Lt,Gt,null,Qt),dt=new M.Request(wt,Gt,null,it,Qt);var gt=new A.Plan(Gt,dt);Gt.addPlan(gt)}else it=X(lt,Lt,Gt,re,Qt),dt=re.addChildRequest(Qt.serviceIdentifier,it,Qt);it.forEach(function(vt){var Y=null;if(Qt.isArray())Y=dt.addChildRequest(vt.serviceIdentifier,vt,Qt);else{if(vt.cache)return;Y=dt}if(vt.type===y.BindingTypeEnum.Instance&&vt.implementationType!==null){var ot=D.getDependencies(lt,vt.implementationType);if(!Gt.container.options.skipBaseClassChecks){var nt=D.getBaseClassDependencyCount(lt,vt.implementationType);if(ot.length<nt){var rt=j.ARGUMENTS_LENGTH_MISMATCH(D.getFunctionName(vt.implementationType));throw new Error(rt)}}ot.forEach(function(st){q(lt,!1,st.serviceIdentifier,Gt,Y,st)})}})}function ct(lt,Lt){var wt=[],Gt=k(lt);return Gt.hasKey(Lt)?wt=Gt.get(Lt):lt.parent!==null&&(wt=ct(lt.parent,Lt)),wt}function _t(lt,Lt,wt,Gt,re,Qt,it,dt){dt===void 0&&(dt=!1);var gt=new R.Context(Lt),vt=V(wt,Gt,re,"",Qt,it);try{return q(lt,dt,re,gt,null,vt),gt}catch(Y){throw F.isStackOverflowExeption(Y)&&gt.plan&&B.circularDependencyToException(gt.plan.rootRequest),Y}}P.plan=_t;function yt(lt,Lt,wt,Gt){var re=new O.Target(y.TargetTypeEnum.Variable,"",Lt,new N.Metadata(wt,Gt)),Qt=new R.Context(lt),it=new M.Request(Lt,Qt,null,[],re);return it}P.createMockRequest=yt},88460:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.QueryableString=void 0;var S=function(){function T(j){this.str=j}return T.prototype.startsWith=function(j){return this.str.indexOf(j)===0},T.prototype.endsWith=function(j){var y="",U=j.split("").reverse().join("");return y=this.str.split("").reverse().join(""),this.startsWith.call({str:y},U)},T.prototype.contains=function(j){return this.str.indexOf(j)!==-1},T.prototype.equals=function(j){return this.str===j},T.prototype.value=function(){return this.str},T}();P.QueryableString=S},6e3:function(Vt,P,S){"use strict";var T=this&&this.__spreadArray||function(X,K){for(var q=0,ct=K.length,_t=X.length;q<ct;q++,_t++)X[_t]=K[q];return X};Object.defineProperty(P,"__esModule",{value:!0}),P.getFunctionName=P.getBaseClassDependencyCount=P.getDependencies=void 0;var j=S(5744),y=S(16674),U=S(28421),F=S(6867),B=S(55800);Object.defineProperty(P,"getFunctionName",{enumerable:!0,get:function(){return B.getFunctionName}});var R=S(18924);function N(X,K){var q=B.getFunctionName(K),ct=A(X,q,K,!1);return ct}P.getDependencies=N;function A(X,K,q,ct){var _t=X.getConstructorMetadata(q),yt=_t.compilerGeneratedMetadata;if(yt===void 0){var lt=y.MISSING_INJECTABLE_ANNOTATION+" "+K+".";throw new Error(lt)}var Lt=_t.userGeneratedMetadata,wt=Object.keys(Lt),Gt=q.length===0&&wt.length>0,re=wt.length>q.length,Qt=Gt||re?wt.length:q.length,it=M(ct,K,yt,Lt,Qt),dt=O(X,q),gt=T(T([],it),dt);return gt}function D(X,K,q,ct,_t){var yt=_t[X.toString()]||[],lt=V(yt),Lt=lt.unmanaged!==!0,wt=ct[X],Gt=lt.inject||lt.multiInject;if(wt=Gt||wt,wt instanceof j.LazyServiceIdentifer&&(wt=wt.unwrap()),Lt){var re=wt===Object,Qt=wt===Function,it=wt===void 0,dt=re||Qt||it;if(!K&&dt){var gt=y.MISSING_INJECT_ANNOTATION+" argument "+X+" in class "+q+".";throw new Error(gt)}var vt=new R.Target(U.TargetTypeEnum.ConstructorArgument,lt.targetName,wt);return vt.metadata=yt,vt}return null}function M(X,K,q,ct,_t){for(var yt=[],lt=0;lt<_t;lt++){var Lt=lt,wt=D(Lt,X,K,q,ct);wt!==null&&yt.push(wt)}return yt}function O(X,K){for(var q=X.getPropertiesMetadata(K),ct=[],_t=Object.keys(q),yt=0,lt=_t;yt<lt.length;yt++){var Lt=lt[yt],wt=q[Lt],Gt=V(q[Lt]),re=Gt.targetName||Lt,Qt=Gt.inject||Gt.multiInject,it=new R.Target(U.TargetTypeEnum.ClassProperty,re,Qt);it.metadata=wt,ct.push(it)}var dt=Object.getPrototypeOf(K.prototype).constructor;if(dt!==Object){var gt=O(X,dt);ct=T(T([],ct),gt)}return ct}function k(X,K){var q=Object.getPrototypeOf(K.prototype).constructor;if(q!==Object){var ct=B.getFunctionName(q),_t=A(X,ct,q,!0),yt=_t.map(function(wt){return wt.metadata.filter(function(Gt){return Gt.key===F.UNMANAGED_TAG})}),lt=[].concat.apply([],yt).length,Lt=_t.length-lt;return Lt>0?Lt:k(X,q)}else return 0}P.getBaseClassDependencyCount=k;function V(X){var K={};return X.forEach(function(q){K[q.key.toString()]=q.value}),{inject:K[F.INJECT_TAG],multiInject:K[F.MULTI_INJECT_TAG],targetName:K[F.NAME_TAG],unmanaged:K[F.UNMANAGED_TAG]}}},6748:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Request=void 0;var T=S(37791),j=function(){function y(U,F,B,R,N){this.id=T.id(),this.serviceIdentifier=U,this.parentContext=F,this.parentRequest=B,this.target=N,this.childRequests=[],this.bindings=Array.isArray(R)?R:[R],this.requestScope=B===null?new Map:null}return y.prototype.addChildRequest=function(U,F,B){var R=new y(U,this.parentContext,this,F,B);return this.childRequests.push(R),R},y}();P.Request=j},18924:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Target=void 0;var T=S(6867),j=S(37791),y=S(47738),U=S(88460),F=function(){function B(R,N,A,D){this.id=j.id(),this.type=R,this.serviceIdentifier=A,this.name=new U.QueryableString(N||""),this.metadata=new Array;var M=null;typeof D=="string"?M=new y.Metadata(T.NAMED_TAG,D):D instanceof y.Metadata&&(M=D),M!==null&&this.metadata.push(M)}return B.prototype.hasTag=function(R){for(var N=0,A=this.metadata;N<A.length;N++){var D=A[N];if(D.key===R)return!0}return!1},B.prototype.isArray=function(){return this.hasTag(T.MULTI_INJECT_TAG)},B.prototype.matchesArray=function(R){return this.matchesTag(T.MULTI_INJECT_TAG)(R)},B.prototype.isNamed=function(){return this.hasTag(T.NAMED_TAG)},B.prototype.isTagged=function(){return this.metadata.some(function(R){return T.NON_CUSTOM_TAG_KEYS.every(function(N){return R.key!==N})})},B.prototype.isOptional=function(){return this.matchesTag(T.OPTIONAL_TAG)(!0)},B.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(R){return R.key===T.NAMED_TAG})[0]:null},B.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(R){return T.NON_CUSTOM_TAG_KEYS.every(function(N){return R.key!==N})}):null},B.prototype.matchesNamedTag=function(R){return this.matchesTag(T.NAMED_TAG)(R)},B.prototype.matchesTag=function(R){var N=this;return function(A){for(var D=0,M=N.metadata;D<M.length;D++){var O=M[D];if(O.key===R&&O.value===A)return!0}return!1}},B}();P.Target=F},52279:function(Vt,P,S){"use strict";var T=this&&this.__spreadArray||function(A,D){for(var M=0,O=D.length,k=A.length;M<O;M++,k++)A[k]=D[M];return A};Object.defineProperty(P,"__esModule",{value:!0}),P.resolveInstance=void 0;var j=S(16674),y=S(28421),U=S(6867);function F(A,D,M){var O=D.filter(function(V){return V.target!==null&&V.target.type===y.TargetTypeEnum.ClassProperty}),k=O.map(M);return O.forEach(function(V,X){var K="";K=V.target.name.value();var q=k[X];A[K]=q}),A}function B(A,D){return new(A.bind.apply(A,T([void 0],D)))}function R(A,D){if(Reflect.hasMetadata(U.POST_CONSTRUCT,A)){var M=Reflect.getMetadata(U.POST_CONSTRUCT,A);try{D[M.value]()}catch(O){throw new Error(j.POST_CONSTRUCT_ERROR(A.name,O.message))}}}function N(A,D,M){var O=null;if(D.length>0){var k=D.filter(function(X){return X.target!==null&&X.target.type===y.TargetTypeEnum.ConstructorArgument}),V=k.map(M);O=B(A,V),O=F(O,D,M)}else O=new A;return R(A,O),O}P.resolveInstance=N},31927:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.resolve=void 0;var T=S(16674),j=S(28421),y=S(85265),U=S(55800),F=S(52279),B=function(A,D,M){try{return M()}catch(O){throw y.isStackOverflowExeption(O)?new Error(T.CIRCULAR_DEPENDENCY_IN_FACTORY(A,D.toString())):O}},R=function(A){return function(D){D.parentContext.setCurrentRequest(D);var M=D.bindings,O=D.childRequests,k=D.target&&D.target.isArray(),V=!D.parentRequest||!D.parentRequest.target||!D.target||!D.parentRequest.target.matchesArray(D.target.serviceIdentifier);if(k&&V)return O.map(function(yt){var lt=R(A);return lt(yt)});var X=null;if(D.target.isOptional()&&M.length===0)return;var K=M[0],q=K.scope===j.BindingScopeEnum.Singleton,ct=K.scope===j.BindingScopeEnum.Request;if(q&&K.activated)return K.cache;if(ct&&A!==null&&A.has(K.id))return A.get(K.id);if(K.type===j.BindingTypeEnum.ConstantValue)X=K.cache,K.activated=!0;else if(K.type===j.BindingTypeEnum.Function)X=K.cache,K.activated=!0;else if(K.type===j.BindingTypeEnum.Constructor)X=K.implementationType;else if(K.type===j.BindingTypeEnum.DynamicValue&&K.dynamicValue!==null)X=B("toDynamicValue",K.serviceIdentifier,function(){return K.dynamicValue(D.parentContext)});else if(K.type===j.BindingTypeEnum.Factory&&K.factory!==null)X=B("toFactory",K.serviceIdentifier,function(){return K.factory(D.parentContext)});else if(K.type===j.BindingTypeEnum.Provider&&K.provider!==null)X=B("toProvider",K.serviceIdentifier,function(){return K.provider(D.parentContext)});else if(K.type===j.BindingTypeEnum.Instance&&K.implementationType!==null)X=F.resolveInstance(K.implementationType,O,R(A));else{var _t=U.getServiceIdentifierAsString(D.serviceIdentifier);throw new Error(T.INVALID_BINDING_TYPE+" "+_t)}return typeof K.onActivation=="function"&&(X=K.onActivation(D.parentContext,X)),q&&(K.cache=X,K.activated=!0),ct&&A!==null&&!A.has(K.id)&&A.set(K.id,X),X}};function N(A){var D=R(A.plan.rootRequest.requestScope);return D(A.plan.rootRequest)}P.resolve=N},83366:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingInSyntax=void 0;var T=S(28421),j=S(71325),y=function(){function U(F){this._binding=F}return U.prototype.inRequestScope=function(){return this._binding.scope=T.BindingScopeEnum.Request,new j.BindingWhenOnSyntax(this._binding)},U.prototype.inSingletonScope=function(){return this._binding.scope=T.BindingScopeEnum.Singleton,new j.BindingWhenOnSyntax(this._binding)},U.prototype.inTransientScope=function(){return this._binding.scope=T.BindingScopeEnum.Transient,new j.BindingWhenOnSyntax(this._binding)},U}();P.BindingInSyntax=y},99812:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingInWhenOnSyntax=void 0;var T=S(83366),j=S(51811),y=S(98370),U=function(){function F(B){this._binding=B,this._bindingWhenSyntax=new y.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new j.BindingOnSyntax(this._binding),this._bindingInSyntax=new T.BindingInSyntax(B)}return F.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},F.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},F.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},F.prototype.when=function(B){return this._bindingWhenSyntax.when(B)},F.prototype.whenTargetNamed=function(B){return this._bindingWhenSyntax.whenTargetNamed(B)},F.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},F.prototype.whenTargetTagged=function(B,R){return this._bindingWhenSyntax.whenTargetTagged(B,R)},F.prototype.whenInjectedInto=function(B){return this._bindingWhenSyntax.whenInjectedInto(B)},F.prototype.whenParentNamed=function(B){return this._bindingWhenSyntax.whenParentNamed(B)},F.prototype.whenParentTagged=function(B,R){return this._bindingWhenSyntax.whenParentTagged(B,R)},F.prototype.whenAnyAncestorIs=function(B){return this._bindingWhenSyntax.whenAnyAncestorIs(B)},F.prototype.whenNoAncestorIs=function(B){return this._bindingWhenSyntax.whenNoAncestorIs(B)},F.prototype.whenAnyAncestorNamed=function(B){return this._bindingWhenSyntax.whenAnyAncestorNamed(B)},F.prototype.whenAnyAncestorTagged=function(B,R){return this._bindingWhenSyntax.whenAnyAncestorTagged(B,R)},F.prototype.whenNoAncestorNamed=function(B){return this._bindingWhenSyntax.whenNoAncestorNamed(B)},F.prototype.whenNoAncestorTagged=function(B,R){return this._bindingWhenSyntax.whenNoAncestorTagged(B,R)},F.prototype.whenAnyAncestorMatches=function(B){return this._bindingWhenSyntax.whenAnyAncestorMatches(B)},F.prototype.whenNoAncestorMatches=function(B){return this._bindingWhenSyntax.whenNoAncestorMatches(B)},F.prototype.onActivation=function(B){return this._bindingOnSyntax.onActivation(B)},F}();P.BindingInWhenOnSyntax=U},51811:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingOnSyntax=void 0;var T=S(98370),j=function(){function y(U){this._binding=U}return y.prototype.onActivation=function(U){return this._binding.onActivation=U,new T.BindingWhenSyntax(this._binding)},y}();P.BindingOnSyntax=j},51860:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingToSyntax=void 0;var T=S(16674),j=S(28421),y=S(99812),U=S(71325),F=function(){function B(R){this._binding=R}return B.prototype.to=function(R){return this._binding.type=j.BindingTypeEnum.Instance,this._binding.implementationType=R,new y.BindingInWhenOnSyntax(this._binding)},B.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+T.INVALID_TO_SELF_VALUE);var R=this._binding.serviceIdentifier;return this.to(R)},B.prototype.toConstantValue=function(R){return this._binding.type=j.BindingTypeEnum.ConstantValue,this._binding.cache=R,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=j.BindingScopeEnum.Singleton,new U.BindingWhenOnSyntax(this._binding)},B.prototype.toDynamicValue=function(R){return this._binding.type=j.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=R,this._binding.implementationType=null,new y.BindingInWhenOnSyntax(this._binding)},B.prototype.toConstructor=function(R){return this._binding.type=j.BindingTypeEnum.Constructor,this._binding.implementationType=R,this._binding.scope=j.BindingScopeEnum.Singleton,new U.BindingWhenOnSyntax(this._binding)},B.prototype.toFactory=function(R){return this._binding.type=j.BindingTypeEnum.Factory,this._binding.factory=R,this._binding.scope=j.BindingScopeEnum.Singleton,new U.BindingWhenOnSyntax(this._binding)},B.prototype.toFunction=function(R){if(typeof R!="function")throw new Error(T.INVALID_FUNCTION_BINDING);var N=this.toConstantValue(R);return this._binding.type=j.BindingTypeEnum.Function,this._binding.scope=j.BindingScopeEnum.Singleton,N},B.prototype.toAutoFactory=function(R){return this._binding.type=j.BindingTypeEnum.Factory,this._binding.factory=function(N){var A=function(){return N.container.get(R)};return A},this._binding.scope=j.BindingScopeEnum.Singleton,new U.BindingWhenOnSyntax(this._binding)},B.prototype.toProvider=function(R){return this._binding.type=j.BindingTypeEnum.Provider,this._binding.provider=R,this._binding.scope=j.BindingScopeEnum.Singleton,new U.BindingWhenOnSyntax(this._binding)},B.prototype.toService=function(R){this.toDynamicValue(function(N){return N.container.get(R)})},B}();P.BindingToSyntax=F},71325:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingWhenOnSyntax=void 0;var T=S(51811),j=S(98370),y=function(){function U(F){this._binding=F,this._bindingWhenSyntax=new j.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new T.BindingOnSyntax(this._binding)}return U.prototype.when=function(F){return this._bindingWhenSyntax.when(F)},U.prototype.whenTargetNamed=function(F){return this._bindingWhenSyntax.whenTargetNamed(F)},U.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},U.prototype.whenTargetTagged=function(F,B){return this._bindingWhenSyntax.whenTargetTagged(F,B)},U.prototype.whenInjectedInto=function(F){return this._bindingWhenSyntax.whenInjectedInto(F)},U.prototype.whenParentNamed=function(F){return this._bindingWhenSyntax.whenParentNamed(F)},U.prototype.whenParentTagged=function(F,B){return this._bindingWhenSyntax.whenParentTagged(F,B)},U.prototype.whenAnyAncestorIs=function(F){return this._bindingWhenSyntax.whenAnyAncestorIs(F)},U.prototype.whenNoAncestorIs=function(F){return this._bindingWhenSyntax.whenNoAncestorIs(F)},U.prototype.whenAnyAncestorNamed=function(F){return this._bindingWhenSyntax.whenAnyAncestorNamed(F)},U.prototype.whenAnyAncestorTagged=function(F,B){return this._bindingWhenSyntax.whenAnyAncestorTagged(F,B)},U.prototype.whenNoAncestorNamed=function(F){return this._bindingWhenSyntax.whenNoAncestorNamed(F)},U.prototype.whenNoAncestorTagged=function(F,B){return this._bindingWhenSyntax.whenNoAncestorTagged(F,B)},U.prototype.whenAnyAncestorMatches=function(F){return this._bindingWhenSyntax.whenAnyAncestorMatches(F)},U.prototype.whenNoAncestorMatches=function(F){return this._bindingWhenSyntax.whenNoAncestorMatches(F)},U.prototype.onActivation=function(F){return this._bindingOnSyntax.onActivation(F)},U}();P.BindingWhenOnSyntax=y},98370:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingWhenSyntax=void 0;var T=S(51811),j=S(80758),y=function(){function U(F){this._binding=F}return U.prototype.when=function(F){return this._binding.constraint=F,new T.BindingOnSyntax(this._binding)},U.prototype.whenTargetNamed=function(F){return this._binding.constraint=j.namedConstraint(F),new T.BindingOnSyntax(this._binding)},U.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(F){var B=F.target!==null&&!F.target.isNamed()&&!F.target.isTagged();return B},new T.BindingOnSyntax(this._binding)},U.prototype.whenTargetTagged=function(F,B){return this._binding.constraint=j.taggedConstraint(F)(B),new T.BindingOnSyntax(this._binding)},U.prototype.whenInjectedInto=function(F){return this._binding.constraint=function(B){return j.typeConstraint(F)(B.parentRequest)},new T.BindingOnSyntax(this._binding)},U.prototype.whenParentNamed=function(F){return this._binding.constraint=function(B){return j.namedConstraint(F)(B.parentRequest)},new T.BindingOnSyntax(this._binding)},U.prototype.whenParentTagged=function(F,B){return this._binding.constraint=function(R){return j.taggedConstraint(F)(B)(R.parentRequest)},new T.BindingOnSyntax(this._binding)},U.prototype.whenAnyAncestorIs=function(F){return this._binding.constraint=function(B){return j.traverseAncerstors(B,j.typeConstraint(F))},new T.BindingOnSyntax(this._binding)},U.prototype.whenNoAncestorIs=function(F){return this._binding.constraint=function(B){return!j.traverseAncerstors(B,j.typeConstraint(F))},new T.BindingOnSyntax(this._binding)},U.prototype.whenAnyAncestorNamed=function(F){return this._binding.constraint=function(B){return j.traverseAncerstors(B,j.namedConstraint(F))},new T.BindingOnSyntax(this._binding)},U.prototype.whenNoAncestorNamed=function(F){return this._binding.constraint=function(B){return!j.traverseAncerstors(B,j.namedConstraint(F))},new T.BindingOnSyntax(this._binding)},U.prototype.whenAnyAncestorTagged=function(F,B){return this._binding.constraint=function(R){return j.traverseAncerstors(R,j.taggedConstraint(F)(B))},new T.BindingOnSyntax(this._binding)},U.prototype.whenNoAncestorTagged=function(F,B){return this._binding.constraint=function(R){return!j.traverseAncerstors(R,j.taggedConstraint(F)(B))},new T.BindingOnSyntax(this._binding)},U.prototype.whenAnyAncestorMatches=function(F){return this._binding.constraint=function(B){return j.traverseAncerstors(B,F)},new T.BindingOnSyntax(this._binding)},U.prototype.whenNoAncestorMatches=function(F){return this._binding.constraint=function(B){return!j.traverseAncerstors(B,F)},new T.BindingOnSyntax(this._binding)},U}();P.BindingWhenSyntax=y},80758:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.typeConstraint=P.namedConstraint=P.taggedConstraint=P.traverseAncerstors=void 0;var T=S(6867),j=S(47738),y=function(R,N){var A=R.parentRequest;return A!==null?N(A)?!0:y(A,N):!1};P.traverseAncerstors=y;var U=function(R){return function(N){var A=function(D){return D!==null&&D.target!==null&&D.target.matchesTag(R)(N)};return A.metaData=new j.Metadata(R,N),A}};P.taggedConstraint=U;var F=U(T.NAMED_TAG);P.namedConstraint=F;var B=function(R){return function(N){var A=null;if(N!==null)if(A=N.bindings[0],typeof R=="string"){var D=A.serviceIdentifier;return D===R}else{var M=N.bindings[0].implementationType;return R===M}return!1}};P.typeConstraint=B},70600:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.multiBindToService=void 0;var S=function(T){return function(j){return function(){for(var y=[],U=0;U<arguments.length;U++)y[U]=arguments[U];return y.forEach(function(F){return T.bind(F).toService(j)})}}};P.multiBindToService=S},85265:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.isStackOverflowExeption=void 0;var T=S(16674);function j(y){return y instanceof RangeError||y.message===T.STACK_OVERFLOW}P.isStackOverflowExeption=j},37791:function(Vt,P){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.id=void 0;var S=0;function T(){return S++}P.id=T},55800:function(Vt,P,S){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.circularDependencyToException=P.listMetadataForTarget=P.listRegisteredBindingsForServiceIdentifier=P.getServiceIdentifierAsString=P.getFunctionName=void 0;var T=S(16674);function j(A){if(typeof A=="function"){var D=A;return D.name}else{if(typeof A=="symbol")return A.toString();var D=A;return D}}P.getServiceIdentifierAsString=j;function y(A,D,M){var O="",k=M(A,D);return k.length!==0&&(O=`
Registered bindings:`,k.forEach(function(V){var X="Object";V.implementationType!==null&&(X=N(V.implementationType)),O=O+`
 `+X,V.constraint.metaData&&(O=O+" - "+V.constraint.metaData)})),O}P.listRegisteredBindingsForServiceIdentifier=y;function U(A,D){return A.parentRequest===null?!1:A.parentRequest.serviceIdentifier===D?!0:U(A.parentRequest,D)}function F(A){function D(O,k){k===void 0&&(k=[]);var V=j(O.serviceIdentifier);return k.push(V),O.parentRequest!==null?D(O.parentRequest,k):k}var M=D(A);return M.reverse().join(" --> ")}function B(A){A.childRequests.forEach(function(D){if(U(D,D.serviceIdentifier)){var M=F(D);throw new Error(T.CIRCULAR_DEPENDENCY+" "+M)}else B(D)})}P.circularDependencyToException=B;function R(A,D){if(D.isTagged()||D.isNamed()){var M="",O=D.getNamedTag(),k=D.getCustomTags();return O!==null&&(M+=O.toString()+`
`),k!==null&&k.forEach(function(V){M+=V.toString()+`
`})," "+A+`
 `+A+" - "+M}else return" "+A}P.listMetadataForTarget=R;function N(A){if(A.name)return A.name;var D=A.toString(),M=D.match(/^function\s*([^\s(]+)/);return M?M[1]:"Anonymous function: "+D}P.getFunctionName=N},31745:function(Vt){"use strict";Vt.exports=S,Vt.exports.default=S;var P=1e20;function S(F,B,R,N,A,D){this.fontSize=F||24,this.buffer=B===void 0?3:B,this.cutoff=N||.25,this.fontFamily=A||"sans-serif",this.fontWeight=D||"normal",this.radius=R||8;var M=this.size=this.fontSize+this.buffer*2,O=M+this.buffer*2,k=typeof my!="undefined"&&!!my&&typeof my.showToast=="function";k?this.canvas=my.createOffscreenCanvas(M,M,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=M),this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,k?this.middle=Math.round(M/2*1):this.middle=Math.round(M/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(F,B,R,N,A,D,M){D.fill(P,0,B*R),M.fill(0,0,B*R);for(var O=(B-N)/2,k=0;k<A;k++)for(var V=0;V<N;V++){var X=(k+O)*B+V+O,K=F.data[4*(k*N+V)+3]/255;if(K===1)D[X]=0,M[X]=P;else if(K===0)D[X]=P,M[X]=0;else{var q=Math.max(0,.5-K),ct=Math.max(0,K-.5);D[X]=q*q,M[X]=ct*ct}}}function j(F,B,R,N,A,D,M){for(var O=0;O<B*R;O++){var k=Math.sqrt(N[O])-Math.sqrt(A[O]);F[O]=Math.round(255-255*(k/D+M))}}S.prototype._draw=function(F,B){var R=this.ctx.measureText(F),N=R.width,A=2*this.buffer,D,M,O,k,V,X,K,q;B&&this.useMetrics?(V=Math.floor(R.actualBoundingBoxAscent),q=this.buffer+Math.ceil(R.actualBoundingBoxAscent),X=this.buffer,K=this.buffer,M=Math.min(this.size,Math.ceil(R.actualBoundingBoxRight-R.actualBoundingBoxLeft)),k=Math.min(this.size-X,Math.ceil(R.actualBoundingBoxAscent+R.actualBoundingBoxDescent)),D=M+A,O=k+A,this.ctx.textBaseline="alphabetic"):(D=M=this.size,O=k=this.size,V=19*this.fontSize/24,X=K=0,q=this.middle,this.ctx.textBaseline="middle");var ct;M&&k&&(this.ctx.clearRect(K,X,M,k),this.ctx.fillText(F,this.buffer,q),ct=this.ctx.getImageData(K,X,M,k));var _t=new Uint8ClampedArray(D*O);return T(ct,D,O,M,k,this.gridOuter,this.gridInner),y(this.gridOuter,D,O,this.f,this.v,this.z),y(this.gridInner,D,O,this.f,this.v,this.z),j(_t,D,O,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_t,metrics:{width:M,height:k,sdfWidth:D,sdfHeight:O,top:V,left:0,advance:N}}},S.prototype.draw=function(F){return this._draw(F,!1).data},S.prototype.drawWithMetrics=function(F){return this._draw(F,!0)};function y(F,B,R,N,A,D){for(var M=0;M<B;M++)U(F,M,B,R,N,A,D);for(var O=0;O<R;O++)U(F,O*B,1,B,N,A,D)}function U(F,B,R,N,A,D,M){var O,k,V,X;for(D[0]=0,M[0]=-P,M[1]=P,O=0;O<N;O++)A[O]=F[B+O*R];for(O=1,k=0,V=0;O<N;O++){do X=D[k],V=(A[O]-A[X]+O*O-X*X)/(O-X)/2;while(V<=M[k]&&--k>-1);k++,D[k]=O,M[k]=V,M[k+1]=P}for(O=0,k=0;O<N;O++){for(;M[k+1]<O;)k++;X=D[k],F[B+O*R]=A[X]+(O-X)*(O-X)}}},81336:function(Vt,P,S){"use strict";S.r(P),S.d(P,{Function:function(){return Ku},Interpreter:function(){return Ko},default:function(){return Nc},evaluate:function(){return Ql},vm:function(){return T}});var T={};S.r(T),S.d(T,{Script:function(){return Ul},compileFunction:function(){return Gl},createContext:function(){return Lu},runInContext:function(){return Du},runInNewContext:function(){return Wu}});var j={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},y="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",U={5:y,"5module":y+" export import",6:y+" const class extends export import super"},F=/^in(stanceof)?$/,B="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",R="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",N=new RegExp("["+B+"]"),A=new RegExp("["+B+R+"]");B=R=null;var D=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],M=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function O(J,Ct){for(var me=65536,jt=0;jt<Ct.length;jt+=2){if(me+=Ct[jt],me>J)return!1;if(me+=Ct[jt+1],me>=J)return!0}}function k(J,Ct){return J<65?J===36:J<91?!0:J<97?J===95:J<123?!0:J<=65535?J>=170&&N.test(String.fromCharCode(J)):Ct===!1?!1:O(J,D)}function V(J,Ct){return J<48?J===36:J<58?!0:J<65?!1:J<91?!0:J<97?J===95:J<123?!0:J<=65535?J>=170&&A.test(String.fromCharCode(J)):Ct===!1?!1:O(J,D)||O(J,M)}var X=function(Ct,me){me===void 0&&(me={}),this.label=Ct,this.keyword=me.keyword,this.beforeExpr=!!me.beforeExpr,this.startsExpr=!!me.startsExpr,this.isLoop=!!me.isLoop,this.isAssign=!!me.isAssign,this.prefix=!!me.prefix,this.postfix=!!me.postfix,this.binop=me.binop||null,this.updateContext=null};function K(J,Ct){return new X(J,{beforeExpr:!0,binop:Ct})}var q={beforeExpr:!0},ct={startsExpr:!0},_t={};function yt(J,Ct){return Ct===void 0&&(Ct={}),Ct.keyword=J,_t[J]=new X(J,Ct)}var lt={num:new X("num",ct),regexp:new X("regexp",ct),string:new X("string",ct),name:new X("name",ct),eof:new X("eof"),bracketL:new X("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new X("]"),braceL:new X("{",{beforeExpr:!0,startsExpr:!0}),braceR:new X("}"),parenL:new X("(",{beforeExpr:!0,startsExpr:!0}),parenR:new X(")"),comma:new X(",",q),semi:new X(";",q),colon:new X(":",q),dot:new X("."),question:new X("?",q),questionDot:new X("?."),arrow:new X("=>",q),template:new X("template"),invalidTemplate:new X("invalidTemplate"),ellipsis:new X("...",q),backQuote:new X("`",ct),dollarBraceL:new X("${",{beforeExpr:!0,startsExpr:!0}),eq:new X("=",{beforeExpr:!0,isAssign:!0}),assign:new X("_=",{beforeExpr:!0,isAssign:!0}),incDec:new X("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new X("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:K("||",1),logicalAND:K("&&",2),bitwiseOR:K("|",3),bitwiseXOR:K("^",4),bitwiseAND:K("&",5),equality:K("==/!=/===/!==",6),relational:K("</>/<=/>=",7),bitShift:K("<</>>/>>>",8),plusMin:new X("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:K("%",10),star:K("*",10),slash:K("/",10),starstar:new X("**",{beforeExpr:!0}),coalesce:K("??",1),_break:yt("break"),_case:yt("case",q),_catch:yt("catch"),_continue:yt("continue"),_debugger:yt("debugger"),_default:yt("default",q),_do:yt("do",{isLoop:!0,beforeExpr:!0}),_else:yt("else",q),_finally:yt("finally"),_for:yt("for",{isLoop:!0}),_function:yt("function",ct),_if:yt("if"),_return:yt("return",q),_switch:yt("switch"),_throw:yt("throw",q),_try:yt("try"),_var:yt("var"),_const:yt("const"),_while:yt("while",{isLoop:!0}),_with:yt("with"),_new:yt("new",{beforeExpr:!0,startsExpr:!0}),_this:yt("this",ct),_super:yt("super",ct),_class:yt("class",ct),_extends:yt("extends",q),_export:yt("export"),_import:yt("import",ct),_null:yt("null",ct),_true:yt("true",ct),_false:yt("false",ct),_in:yt("in",{beforeExpr:!0,binop:7}),_instanceof:yt("instanceof",{beforeExpr:!0,binop:7}),_typeof:yt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:yt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:yt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Lt=/\r\n?|\n|\u2028|\u2029/,wt=new RegExp(Lt.source,"g");function Gt(J,Ct){return J===10||J===13||!Ct&&(J===8232||J===8233)}var re=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Qt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,it=Object.prototype,dt=it.hasOwnProperty,gt=it.toString;function vt(J,Ct){return dt.call(J,Ct)}var Y=Array.isArray||function(J){return gt.call(J)==="[object Array]"};function ot(J){return new RegExp("^(?:"+J.replace(/ /g,"|")+")$")}var nt=function(Ct,me){this.line=Ct,this.column=me};nt.prototype.offset=function(Ct){return new nt(this.line,this.column+Ct)};var rt=function(Ct,me,jt){this.start=me,this.end=jt,Ct.sourceFile!==null&&(this.source=Ct.sourceFile)};function st(J,Ct){for(var me=1,jt=0;;){wt.lastIndex=jt;var ke=wt.exec(J);if(ke&&ke.index<Ct)++me,jt=ke.index+ke[0].length;else return new nt(me,Ct-jt)}}var d={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function It(J){var Ct={};for(var me in d)Ct[me]=J&&vt(J,me)?J[me]:d[me];if(Ct.ecmaVersion>=2015&&(Ct.ecmaVersion-=2009),Ct.allowReserved==null&&(Ct.allowReserved=Ct.ecmaVersion<5),Y(Ct.onToken)){var jt=Ct.onToken;Ct.onToken=function(ke){return jt.push(ke)}}return Y(Ct.onComment)&&(Ct.onComment=Ht(Ct,Ct.onComment)),Ct}function Ht(J,Ct){return function(me,jt,ke,ir,Gr,pn){var dn={type:me?"Block":"Line",value:jt,start:ke,end:ir};J.locations&&(dn.loc=new rt(this,Gr,pn)),J.ranges&&(dn.range=[ke,ir]),Ct.push(dn)}}var kt=1,Xt=2,Kt=kt|Xt,Jt=4,ue=8,ce=16,$t=32,Ut=64,Rt=128;function Pt(J,Ct){return Xt|(J?Jt:0)|(Ct?ue:0)}var Yt=0,Dt=1,Nt=2,ne=3,ve=4,Re=5,je=function(Ct,me,jt){this.options=Ct=It(Ct),this.sourceFile=Ct.sourceFile,this.keywords=ot(U[Ct.ecmaVersion>=6?6:Ct.sourceType==="module"?"5module":5]);var ke="";if(Ct.allowReserved!==!0){for(var ir=Ct.ecmaVersion;!(ke=j[ir]);ir--);Ct.sourceType==="module"&&(ke+=" await")}this.reservedWords=ot(ke);var Gr=(ke?ke+" ":"")+j.strict;this.reservedWordsStrict=ot(Gr),this.reservedWordsStrictBind=ot(Gr+" "+j.strictBind),this.input=String(me),this.containsEsc=!1,jt?(this.pos=jt,this.lineStart=this.input.lastIndexOf(`
`,jt-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Lt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=lt.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=Ct.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&Ct.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(kt),this.regexpState=null},Cr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};je.prototype.parse=function(){var Ct=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(Ct)},Cr.inFunction.get=function(){return(this.currentVarScope().flags&Xt)>0},Cr.inGenerator.get=function(){return(this.currentVarScope().flags&ue)>0},Cr.inAsync.get=function(){return(this.currentVarScope().flags&Jt)>0},Cr.allowSuper.get=function(){return(this.currentThisScope().flags&Ut)>0},Cr.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Rt)>0},Cr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},je.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Xt)>0},je.extend=function(){for(var Ct=[],me=arguments.length;me--;)Ct[me]=arguments[me];for(var jt=this,ke=0;ke<Ct.length;ke++)jt=Ct[ke](jt);return jt},je.parse=function(Ct,me){return new this(me,Ct).parse()},je.parseExpressionAt=function(Ct,me,jt){var ke=new this(jt,Ct,me);return ke.nextToken(),ke.parseExpression()},je.tokenizer=function(Ct,me){return new this(me,Ct)},Object.defineProperties(je.prototype,Cr);var $r=je.prototype,Qr=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;$r.strictDirective=function(J){for(;;){Qt.lastIndex=J,J+=Qt.exec(this.input)[0].length;var Ct=Qr.exec(this.input.slice(J));if(!Ct)return!1;if((Ct[1]||Ct[2])==="use strict"){Qt.lastIndex=J+Ct[0].length;var me=Qt.exec(this.input),jt=me.index+me[0].length,ke=this.input.charAt(jt);return ke===";"||ke==="}"||Lt.test(me[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ke)||ke==="!"&&this.input.charAt(jt+1)==="=")}J+=Ct[0].length,Qt.lastIndex=J,J+=Qt.exec(this.input)[0].length,this.input[J]===";"&&J++}},$r.eat=function(J){return this.type===J?(this.next(),!0):!1},$r.isContextual=function(J){return this.type===lt.name&&this.value===J&&!this.containsEsc},$r.eatContextual=function(J){return this.isContextual(J)?(this.next(),!0):!1},$r.expectContextual=function(J){this.eatContextual(J)||this.unexpected()},$r.canInsertSemicolon=function(){return this.type===lt.eof||this.type===lt.braceR||Lt.test(this.input.slice(this.lastTokEnd,this.start))},$r.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},$r.semicolon=function(){!this.eat(lt.semi)&&!this.insertSemicolon()&&this.unexpected()},$r.afterTrailingComma=function(J,Ct){if(this.type===J)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),Ct||this.next(),!0},$r.expect=function(J){this.eat(J)||this.unexpected()},$r.unexpected=function(J){this.raise(J!=null?J:this.start,"Unexpected token")};function Ee(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}$r.checkPatternErrors=function(J,Ct){if(!!J){J.trailingComma>-1&&this.raiseRecoverable(J.trailingComma,"Comma is not permitted after the rest element");var me=Ct?J.parenthesizedAssign:J.parenthesizedBind;me>-1&&this.raiseRecoverable(me,"Parenthesized pattern")}},$r.checkExpressionErrors=function(J,Ct){if(!J)return!1;var me=J.shorthandAssign,jt=J.doubleProto;if(!Ct)return me>=0||jt>=0;me>=0&&this.raise(me,"Shorthand property assignments are valid only in destructuring patterns"),jt>=0&&this.raiseRecoverable(jt,"Redefinition of __proto__ property")},$r.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},$r.isSimpleAssignTarget=function(J){return J.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(J.expression):J.type==="Identifier"||J.type==="MemberExpression"};var yn=je.prototype;yn.parseTopLevel=function(J){var Ct={};for(J.body||(J.body=[]);this.type!==lt.eof;){var me=this.parseStatement(null,!0,Ct);J.body.push(me)}if(this.inModule)for(var jt=0,ke=Object.keys(this.undefinedExports);jt<ke.length;jt+=1){var ir=ke[jt];this.raiseRecoverable(this.undefinedExports[ir].start,"Export '"+ir+"' is not defined")}return this.adaptDirectivePrologue(J.body),this.next(),J.sourceType=this.options.sourceType,this.finishNode(J,"Program")};var ui={kind:"loop"},la={kind:"switch"};yn.isLet=function(J){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Qt.lastIndex=this.pos;var Ct=Qt.exec(this.input),me=this.pos+Ct[0].length,jt=this.input.charCodeAt(me);if(jt===91)return!0;if(J)return!1;if(jt===123)return!0;if(k(jt,!0)){for(var ke=me+1;V(this.input.charCodeAt(ke),!0);)++ke;var ir=this.input.slice(me,ke);if(!F.test(ir))return!0}return!1},yn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Qt.lastIndex=this.pos;var J=Qt.exec(this.input),Ct=this.pos+J[0].length;return!Lt.test(this.input.slice(this.pos,Ct))&&this.input.slice(Ct,Ct+8)==="function"&&(Ct+8===this.input.length||!V(this.input.charAt(Ct+8)))},yn.parseStatement=function(J,Ct,me){var jt=this.type,ke=this.startNode(),ir;switch(this.isLet(J)&&(jt=lt._var,ir="let"),jt){case lt._break:case lt._continue:return this.parseBreakContinueStatement(ke,jt.keyword);case lt._debugger:return this.parseDebuggerStatement(ke);case lt._do:return this.parseDoStatement(ke);case lt._for:return this.parseForStatement(ke);case lt._function:return J&&(this.strict||J!=="if"&&J!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ke,!1,!J);case lt._class:return J&&this.unexpected(),this.parseClass(ke,!0);case lt._if:return this.parseIfStatement(ke);case lt._return:return this.parseReturnStatement(ke);case lt._switch:return this.parseSwitchStatement(ke);case lt._throw:return this.parseThrowStatement(ke);case lt._try:return this.parseTryStatement(ke);case lt._const:case lt._var:return ir=ir||this.value,J&&ir!=="var"&&this.unexpected(),this.parseVarStatement(ke,ir);case lt._while:return this.parseWhileStatement(ke);case lt._with:return this.parseWithStatement(ke);case lt.braceL:return this.parseBlock(!0,ke);case lt.semi:return this.parseEmptyStatement(ke);case lt._export:case lt._import:if(this.options.ecmaVersion>10&&jt===lt._import){Qt.lastIndex=this.pos;var Gr=Qt.exec(this.input),pn=this.pos+Gr[0].length,dn=this.input.charCodeAt(pn);if(dn===40||dn===46)return this.parseExpressionStatement(ke,this.parseExpression())}return this.options.allowImportExportEverywhere||(Ct||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),jt===lt._import?this.parseImport(ke):this.parseExport(ke,me);default:if(this.isAsyncFunction())return J&&this.unexpected(),this.next(),this.parseFunctionStatement(ke,!0,!J);var ti=this.value,Nn=this.parseExpression();return jt===lt.name&&Nn.type==="Identifier"&&this.eat(lt.colon)?this.parseLabeledStatement(ke,ti,Nn,J):this.parseExpressionStatement(ke,Nn)}},yn.parseBreakContinueStatement=function(J,Ct){var me=Ct==="break";this.next(),this.eat(lt.semi)||this.insertSemicolon()?J.label=null:this.type!==lt.name?this.unexpected():(J.label=this.parseIdent(),this.semicolon());for(var jt=0;jt<this.labels.length;++jt){var ke=this.labels[jt];if((J.label==null||ke.name===J.label.name)&&(ke.kind!=null&&(me||ke.kind==="loop")||J.label&&me))break}return jt===this.labels.length&&this.raise(J.start,"Unsyntactic "+Ct),this.finishNode(J,me?"BreakStatement":"ContinueStatement")},yn.parseDebuggerStatement=function(J){return this.next(),this.semicolon(),this.finishNode(J,"DebuggerStatement")},yn.parseDoStatement=function(J){return this.next(),this.labels.push(ui),J.body=this.parseStatement("do"),this.labels.pop(),this.expect(lt._while),J.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(lt.semi):this.semicolon(),this.finishNode(J,"DoWhileStatement")},yn.parseForStatement=function(J){this.next();var Ct=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ui),this.enterScope(0),this.expect(lt.parenL),this.type===lt.semi)return Ct>-1&&this.unexpected(Ct),this.parseFor(J,null);var me=this.isLet();if(this.type===lt._var||this.type===lt._const||me){var jt=this.startNode(),ke=me?"let":this.value;return this.next(),this.parseVar(jt,!0,ke),this.finishNode(jt,"VariableDeclaration"),(this.type===lt._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&jt.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===lt._in?Ct>-1&&this.unexpected(Ct):J.await=Ct>-1),this.parseForIn(J,jt)):(Ct>-1&&this.unexpected(Ct),this.parseFor(J,jt))}var ir=new Ee,Gr=this.parseExpression(!0,ir);return this.type===lt._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===lt._in?Ct>-1&&this.unexpected(Ct):J.await=Ct>-1),this.toAssignable(Gr,!1,ir),this.checkLVal(Gr),this.parseForIn(J,Gr)):(this.checkExpressionErrors(ir,!0),Ct>-1&&this.unexpected(Ct),this.parseFor(J,Gr))},yn.parseFunctionStatement=function(J,Ct,me){return this.next(),this.parseFunction(J,ln|(me?0:Kn),!1,Ct)},yn.parseIfStatement=function(J){return this.next(),J.test=this.parseParenExpression(),J.consequent=this.parseStatement("if"),J.alternate=this.eat(lt._else)?this.parseStatement("if"):null,this.finishNode(J,"IfStatement")},yn.parseReturnStatement=function(J){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(lt.semi)||this.insertSemicolon()?J.argument=null:(J.argument=this.parseExpression(),this.semicolon()),this.finishNode(J,"ReturnStatement")},yn.parseSwitchStatement=function(J){this.next(),J.discriminant=this.parseParenExpression(),J.cases=[],this.expect(lt.braceL),this.labels.push(la),this.enterScope(0);for(var Ct,me=!1;this.type!==lt.braceR;)if(this.type===lt._case||this.type===lt._default){var jt=this.type===lt._case;Ct&&this.finishNode(Ct,"SwitchCase"),J.cases.push(Ct=this.startNode()),Ct.consequent=[],this.next(),jt?Ct.test=this.parseExpression():(me&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),me=!0,Ct.test=null),this.expect(lt.colon)}else Ct||this.unexpected(),Ct.consequent.push(this.parseStatement(null));return this.exitScope(),Ct&&this.finishNode(Ct,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(J,"SwitchStatement")},yn.parseThrowStatement=function(J){return this.next(),Lt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),J.argument=this.parseExpression(),this.semicolon(),this.finishNode(J,"ThrowStatement")};var Or=[];yn.parseTryStatement=function(J){if(this.next(),J.block=this.parseBlock(),J.handler=null,this.type===lt._catch){var Ct=this.startNode();if(this.next(),this.eat(lt.parenL)){Ct.param=this.parseBindingAtom();var me=Ct.param.type==="Identifier";this.enterScope(me?$t:0),this.checkLVal(Ct.param,me?ve:Nt),this.expect(lt.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),Ct.param=null,this.enterScope(0);Ct.body=this.parseBlock(!1),this.exitScope(),J.handler=this.finishNode(Ct,"CatchClause")}return J.finalizer=this.eat(lt._finally)?this.parseBlock():null,!J.handler&&!J.finalizer&&this.raise(J.start,"Missing catch or finally clause"),this.finishNode(J,"TryStatement")},yn.parseVarStatement=function(J,Ct){return this.next(),this.parseVar(J,!1,Ct),this.semicolon(),this.finishNode(J,"VariableDeclaration")},yn.parseWhileStatement=function(J){return this.next(),J.test=this.parseParenExpression(),this.labels.push(ui),J.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(J,"WhileStatement")},yn.parseWithStatement=function(J){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),J.object=this.parseParenExpression(),J.body=this.parseStatement("with"),this.finishNode(J,"WithStatement")},yn.parseEmptyStatement=function(J){return this.next(),this.finishNode(J,"EmptyStatement")},yn.parseLabeledStatement=function(J,Ct,me,jt){for(var ke=0,ir=this.labels;ke<ir.length;ke+=1){var Gr=ir[ke];Gr.name===Ct&&this.raise(me.start,"Label '"+Ct+"' is already declared")}for(var pn=this.type.isLoop?"loop":this.type===lt._switch?"switch":null,dn=this.labels.length-1;dn>=0;dn--){var ti=this.labels[dn];if(ti.statementStart===J.start)ti.statementStart=this.start,ti.kind=pn;else break}return this.labels.push({name:Ct,kind:pn,statementStart:this.start}),J.body=this.parseStatement(jt?jt.indexOf("label")===-1?jt+"label":jt:"label"),this.labels.pop(),J.label=me,this.finishNode(J,"LabeledStatement")},yn.parseExpressionStatement=function(J,Ct){return J.expression=Ct,this.semicolon(),this.finishNode(J,"ExpressionStatement")},yn.parseBlock=function(J,Ct,me){for(J===void 0&&(J=!0),Ct===void 0&&(Ct=this.startNode()),Ct.body=[],this.expect(lt.braceL),J&&this.enterScope(0);this.type!==lt.braceR;){var jt=this.parseStatement(null);Ct.body.push(jt)}return me&&(this.strict=!1),this.next(),J&&this.exitScope(),this.finishNode(Ct,"BlockStatement")},yn.parseFor=function(J,Ct){return J.init=Ct,this.expect(lt.semi),J.test=this.type===lt.semi?null:this.parseExpression(),this.expect(lt.semi),J.update=this.type===lt.parenR?null:this.parseExpression(),this.expect(lt.parenR),J.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(J,"ForStatement")},yn.parseForIn=function(J,Ct){var me=this.type===lt._in;return this.next(),Ct.type==="VariableDeclaration"&&Ct.declarations[0].init!=null&&(!me||this.options.ecmaVersion<8||this.strict||Ct.kind!=="var"||Ct.declarations[0].id.type!=="Identifier")?this.raise(Ct.start,(me?"for-in":"for-of")+" loop variable declaration may not have an initializer"):Ct.type==="AssignmentPattern"&&this.raise(Ct.start,"Invalid left-hand side in for-loop"),J.left=Ct,J.right=me?this.parseExpression():this.parseMaybeAssign(),this.expect(lt.parenR),J.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(J,me?"ForInStatement":"ForOfStatement")},yn.parseVar=function(J,Ct,me){for(J.declarations=[],J.kind=me;;){var jt=this.startNode();if(this.parseVarId(jt,me),this.eat(lt.eq)?jt.init=this.parseMaybeAssign(Ct):me==="const"&&!(this.type===lt._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():jt.id.type!=="Identifier"&&!(Ct&&(this.type===lt._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):jt.init=null,J.declarations.push(this.finishNode(jt,"VariableDeclarator")),!this.eat(lt.comma))break}return J},yn.parseVarId=function(J,Ct){J.id=this.parseBindingAtom(),this.checkLVal(J.id,Ct==="var"?Dt:Nt,!1)};var ln=1,Kn=2,jn=4;yn.parseFunction=function(J,Ct,me,jt){this.initFunction(J),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!jt)&&(this.type===lt.star&&Ct&Kn&&this.unexpected(),J.generator=this.eat(lt.star)),this.options.ecmaVersion>=8&&(J.async=!!jt),Ct&ln&&(J.id=Ct&jn&&this.type!==lt.name?null:this.parseIdent(),J.id&&!(Ct&Kn)&&this.checkLVal(J.id,this.strict||J.generator||J.async?this.treatFunctionsAsVar?Dt:Nt:ne));var ke=this.yieldPos,ir=this.awaitPos,Gr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pt(J.async,J.generator)),Ct&ln||(J.id=this.type===lt.name?this.parseIdent():null),this.parseFunctionParams(J),this.parseFunctionBody(J,me,!1),this.yieldPos=ke,this.awaitPos=ir,this.awaitIdentPos=Gr,this.finishNode(J,Ct&ln?"FunctionDeclaration":"FunctionExpression")},yn.parseFunctionParams=function(J){this.expect(lt.parenL),J.params=this.parseBindingList(lt.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},yn.parseClass=function(J,Ct){this.next();var me=this.strict;this.strict=!0,this.parseClassId(J,Ct),this.parseClassSuper(J);var jt=this.startNode(),ke=!1;for(jt.body=[],this.expect(lt.braceL);this.type!==lt.braceR;){var ir=this.parseClassElement(J.superClass!==null);ir&&(jt.body.push(ir),ir.type==="MethodDefinition"&&ir.kind==="constructor"&&(ke&&this.raise(ir.start,"Duplicate constructor in the same class"),ke=!0))}return this.strict=me,this.next(),J.body=this.finishNode(jt,"ClassBody"),this.finishNode(J,Ct?"ClassDeclaration":"ClassExpression")},yn.parseClassElement=function(J){var Ct=this;if(this.eat(lt.semi))return null;var me=this.startNode(),jt=function(dn,ti){ti===void 0&&(ti=!1);var Nn=Ct.start,Fa=Ct.startLoc;return Ct.eatContextual(dn)?Ct.type!==lt.parenL&&(!ti||!Ct.canInsertSemicolon())?!0:(me.key&&Ct.unexpected(),me.computed=!1,me.key=Ct.startNodeAt(Nn,Fa),me.key.name=dn,Ct.finishNode(me.key,"Identifier"),!1):!1};me.kind="method",me.static=jt("static");var ke=this.eat(lt.star),ir=!1;ke||(this.options.ecmaVersion>=8&&jt("async",!0)?(ir=!0,ke=this.options.ecmaVersion>=9&&this.eat(lt.star)):jt("get")?me.kind="get":jt("set")&&(me.kind="set")),me.key||this.parsePropertyName(me);var Gr=me.key,pn=!1;return!me.computed&&!me.static&&(Gr.type==="Identifier"&&Gr.name==="constructor"||Gr.type==="Literal"&&Gr.value==="constructor")?(me.kind!=="method"&&this.raise(Gr.start,"Constructor can't have get/set modifier"),ke&&this.raise(Gr.start,"Constructor can't be a generator"),ir&&this.raise(Gr.start,"Constructor can't be an async method"),me.kind="constructor",pn=J):me.static&&Gr.type==="Identifier"&&Gr.name==="prototype"&&this.raise(Gr.start,"Classes may not have a static property named prototype"),this.parseClassMethod(me,ke,ir,pn),me.kind==="get"&&me.value.params.length!==0&&this.raiseRecoverable(me.value.start,"getter should have no params"),me.kind==="set"&&me.value.params.length!==1&&this.raiseRecoverable(me.value.start,"setter should have exactly one param"),me.kind==="set"&&me.value.params[0].type==="RestElement"&&this.raiseRecoverable(me.value.params[0].start,"Setter cannot use rest params"),me},yn.parseClassMethod=function(J,Ct,me,jt){return J.value=this.parseMethod(Ct,me,jt),this.finishNode(J,"MethodDefinition")},yn.parseClassId=function(J,Ct){this.type===lt.name?(J.id=this.parseIdent(),Ct&&this.checkLVal(J.id,Nt,!1)):(Ct===!0&&this.unexpected(),J.id=null)},yn.parseClassSuper=function(J){J.superClass=this.eat(lt._extends)?this.parseExprSubscripts():null},yn.parseExport=function(J,Ct){if(this.next(),this.eat(lt.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(J.exported=this.parseIdent(!0),this.checkExport(Ct,J.exported.name,this.lastTokStart)):J.exported=null),this.expectContextual("from"),this.type!==lt.string&&this.unexpected(),J.source=this.parseExprAtom(),this.semicolon(),this.finishNode(J,"ExportAllDeclaration");if(this.eat(lt._default)){this.checkExport(Ct,"default",this.lastTokStart);var me;if(this.type===lt._function||(me=this.isAsyncFunction())){var jt=this.startNode();this.next(),me&&this.next(),J.declaration=this.parseFunction(jt,ln|jn,!1,me)}else if(this.type===lt._class){var ke=this.startNode();J.declaration=this.parseClass(ke,"nullableID")}else J.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(J,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())J.declaration=this.parseStatement(null),J.declaration.type==="VariableDeclaration"?this.checkVariableExport(Ct,J.declaration.declarations):this.checkExport(Ct,J.declaration.id.name,J.declaration.id.start),J.specifiers=[],J.source=null;else{if(J.declaration=null,J.specifiers=this.parseExportSpecifiers(Ct),this.eatContextual("from"))this.type!==lt.string&&this.unexpected(),J.source=this.parseExprAtom();else{for(var ir=0,Gr=J.specifiers;ir<Gr.length;ir+=1){var pn=Gr[ir];this.checkUnreserved(pn.local),this.checkLocalExport(pn.local)}J.source=null}this.semicolon()}return this.finishNode(J,"ExportNamedDeclaration")},yn.checkExport=function(J,Ct,me){!J||(vt(J,Ct)&&this.raiseRecoverable(me,"Duplicate export '"+Ct+"'"),J[Ct]=!0)},yn.checkPatternExport=function(J,Ct){var me=Ct.type;if(me==="Identifier")this.checkExport(J,Ct.name,Ct.start);else if(me==="ObjectPattern")for(var jt=0,ke=Ct.properties;jt<ke.length;jt+=1){var ir=ke[jt];this.checkPatternExport(J,ir)}else if(me==="ArrayPattern")for(var Gr=0,pn=Ct.elements;Gr<pn.length;Gr+=1){var dn=pn[Gr];dn&&this.checkPatternExport(J,dn)}else me==="Property"?this.checkPatternExport(J,Ct.value):me==="AssignmentPattern"?this.checkPatternExport(J,Ct.left):me==="RestElement"?this.checkPatternExport(J,Ct.argument):me==="ParenthesizedExpression"&&this.checkPatternExport(J,Ct.expression)},yn.checkVariableExport=function(J,Ct){if(!!J)for(var me=0,jt=Ct;me<jt.length;me+=1){var ke=jt[me];this.checkPatternExport(J,ke.id)}},yn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},yn.parseExportSpecifiers=function(J){var Ct=[],me=!0;for(this.expect(lt.braceL);!this.eat(lt.braceR);){if(me)me=!1;else if(this.expect(lt.comma),this.afterTrailingComma(lt.braceR))break;var jt=this.startNode();jt.local=this.parseIdent(!0),jt.exported=this.eatContextual("as")?this.parseIdent(!0):jt.local,this.checkExport(J,jt.exported.name,jt.exported.start),Ct.push(this.finishNode(jt,"ExportSpecifier"))}return Ct},yn.parseImport=function(J){return this.next(),this.type===lt.string?(J.specifiers=Or,J.source=this.parseExprAtom()):(J.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),J.source=this.type===lt.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(J,"ImportDeclaration")},yn.parseImportSpecifiers=function(){var J=[],Ct=!0;if(this.type===lt.name){var me=this.startNode();if(me.local=this.parseIdent(),this.checkLVal(me.local,Nt),J.push(this.finishNode(me,"ImportDefaultSpecifier")),!this.eat(lt.comma))return J}if(this.type===lt.star){var jt=this.startNode();return this.next(),this.expectContextual("as"),jt.local=this.parseIdent(),this.checkLVal(jt.local,Nt),J.push(this.finishNode(jt,"ImportNamespaceSpecifier")),J}for(this.expect(lt.braceL);!this.eat(lt.braceR);){if(Ct)Ct=!1;else if(this.expect(lt.comma),this.afterTrailingComma(lt.braceR))break;var ke=this.startNode();ke.imported=this.parseIdent(!0),this.eatContextual("as")?ke.local=this.parseIdent():(this.checkUnreserved(ke.imported),ke.local=ke.imported),this.checkLVal(ke.local,Nt),J.push(this.finishNode(ke,"ImportSpecifier"))}return J},yn.adaptDirectivePrologue=function(J){for(var Ct=0;Ct<J.length&&this.isDirectiveCandidate(J[Ct]);++Ct)J[Ct].directive=J[Ct].expression.raw.slice(1,-1)},yn.isDirectiveCandidate=function(J){return J.type==="ExpressionStatement"&&J.expression.type==="Literal"&&typeof J.expression.value=="string"&&(this.input[J.start]==='"'||this.input[J.start]==="'")};var wi=je.prototype;wi.toAssignable=function(J,Ct,me){if(this.options.ecmaVersion>=6&&J)switch(J.type){case"Identifier":this.inAsync&&J.name==="await"&&this.raise(J.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":J.type="ObjectPattern",me&&this.checkPatternErrors(me,!0);for(var jt=0,ke=J.properties;jt<ke.length;jt+=1){var ir=ke[jt];this.toAssignable(ir,Ct),ir.type==="RestElement"&&(ir.argument.type==="ArrayPattern"||ir.argument.type==="ObjectPattern")&&this.raise(ir.argument.start,"Unexpected token")}break;case"Property":J.kind!=="init"&&this.raise(J.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(J.value,Ct);break;case"ArrayExpression":J.type="ArrayPattern",me&&this.checkPatternErrors(me,!0),this.toAssignableList(J.elements,Ct);break;case"SpreadElement":J.type="RestElement",this.toAssignable(J.argument,Ct),J.argument.type==="AssignmentPattern"&&this.raise(J.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":J.operator!=="="&&this.raise(J.left.end,"Only '=' operator can be used for specifying default value."),J.type="AssignmentPattern",delete J.operator,this.toAssignable(J.left,Ct);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(J.expression,Ct,me);break;case"ChainExpression":this.raiseRecoverable(J.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!Ct)break;default:this.raise(J.start,"Assigning to rvalue")}else me&&this.checkPatternErrors(me,!0);return J},wi.toAssignableList=function(J,Ct){for(var me=J.length,jt=0;jt<me;jt++){var ke=J[jt];ke&&this.toAssignable(ke,Ct)}if(me){var ir=J[me-1];this.options.ecmaVersion===6&&Ct&&ir&&ir.type==="RestElement"&&ir.argument.type!=="Identifier"&&this.unexpected(ir.argument.start)}return J},wi.parseSpread=function(J){var Ct=this.startNode();return this.next(),Ct.argument=this.parseMaybeAssign(!1,J),this.finishNode(Ct,"SpreadElement")},wi.parseRestBinding=function(){var J=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==lt.name&&this.unexpected(),J.argument=this.parseBindingAtom(),this.finishNode(J,"RestElement")},wi.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case lt.bracketL:var J=this.startNode();return this.next(),J.elements=this.parseBindingList(lt.bracketR,!0,!0),this.finishNode(J,"ArrayPattern");case lt.braceL:return this.parseObj(!0)}return this.parseIdent()},wi.parseBindingList=function(J,Ct,me){for(var jt=[],ke=!0;!this.eat(J);)if(ke?ke=!1:this.expect(lt.comma),Ct&&this.type===lt.comma)jt.push(null);else{if(me&&this.afterTrailingComma(J))break;if(this.type===lt.ellipsis){var ir=this.parseRestBinding();this.parseBindingListItem(ir),jt.push(ir),this.type===lt.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(J);break}else{var Gr=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(Gr),jt.push(Gr)}}return jt},wi.parseBindingListItem=function(J){return J},wi.parseMaybeDefault=function(J,Ct,me){if(me=me||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(lt.eq))return me;var jt=this.startNodeAt(J,Ct);return jt.left=me,jt.right=this.parseMaybeAssign(),this.finishNode(jt,"AssignmentPattern")},wi.checkLVal=function(J,Ct,me){switch(Ct===void 0&&(Ct=Yt),J.type){case"Identifier":Ct===Nt&&J.name==="let"&&this.raiseRecoverable(J.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(J.name)&&this.raiseRecoverable(J.start,(Ct?"Binding ":"Assigning to ")+J.name+" in strict mode"),me&&(vt(me,J.name)&&this.raiseRecoverable(J.start,"Argument name clash"),me[J.name]=!0),Ct!==Yt&&Ct!==Re&&this.declareName(J.name,Ct,J.start);break;case"ChainExpression":this.raiseRecoverable(J.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Ct&&this.raiseRecoverable(J.start,"Binding member expression");break;case"ObjectPattern":for(var jt=0,ke=J.properties;jt<ke.length;jt+=1){var ir=ke[jt];this.checkLVal(ir,Ct,me)}break;case"Property":this.checkLVal(J.value,Ct,me);break;case"ArrayPattern":for(var Gr=0,pn=J.elements;Gr<pn.length;Gr+=1){var dn=pn[Gr];dn&&this.checkLVal(dn,Ct,me)}break;case"AssignmentPattern":this.checkLVal(J.left,Ct,me);break;case"RestElement":this.checkLVal(J.argument,Ct,me);break;case"ParenthesizedExpression":this.checkLVal(J.expression,Ct,me);break;default:this.raise(J.start,(Ct?"Binding":"Assigning to")+" rvalue")}};var Sa=je.prototype;Sa.checkPropClash=function(J,Ct,me){if(!(this.options.ecmaVersion>=9&&J.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(J.computed||J.method||J.shorthand))){var jt=J.key,ke;switch(jt.type){case"Identifier":ke=jt.name;break;case"Literal":ke=String(jt.value);break;default:return}var ir=J.kind;if(this.options.ecmaVersion>=6){ke==="__proto__"&&ir==="init"&&(Ct.proto&&(me?me.doubleProto<0&&(me.doubleProto=jt.start):this.raiseRecoverable(jt.start,"Redefinition of __proto__ property")),Ct.proto=!0);return}ke="$"+ke;var Gr=Ct[ke];if(Gr){var pn;ir==="init"?pn=this.strict&&Gr.init||Gr.get||Gr.set:pn=Gr.init||Gr[ir],pn&&this.raiseRecoverable(jt.start,"Redefinition of property")}else Gr=Ct[ke]={init:!1,get:!1,set:!1};Gr[ir]=!0}},Sa.parseExpression=function(J,Ct){var me=this.start,jt=this.startLoc,ke=this.parseMaybeAssign(J,Ct);if(this.type===lt.comma){var ir=this.startNodeAt(me,jt);for(ir.expressions=[ke];this.eat(lt.comma);)ir.expressions.push(this.parseMaybeAssign(J,Ct));return this.finishNode(ir,"SequenceExpression")}return ke},Sa.parseMaybeAssign=function(J,Ct,me){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(J);this.exprAllowed=!1}var jt=!1,ke=-1,ir=-1;Ct?(ke=Ct.parenthesizedAssign,ir=Ct.trailingComma,Ct.parenthesizedAssign=Ct.trailingComma=-1):(Ct=new Ee,jt=!0);var Gr=this.start,pn=this.startLoc;(this.type===lt.parenL||this.type===lt.name)&&(this.potentialArrowAt=this.start);var dn=this.parseMaybeConditional(J,Ct);if(me&&(dn=me.call(this,dn,Gr,pn)),this.type.isAssign){var ti=this.startNodeAt(Gr,pn);return ti.operator=this.value,ti.left=this.type===lt.eq?this.toAssignable(dn,!1,Ct):dn,jt||(Ct.parenthesizedAssign=Ct.trailingComma=Ct.doubleProto=-1),Ct.shorthandAssign>=ti.left.start&&(Ct.shorthandAssign=-1),this.checkLVal(dn),this.next(),ti.right=this.parseMaybeAssign(J),this.finishNode(ti,"AssignmentExpression")}else jt&&this.checkExpressionErrors(Ct,!0);return ke>-1&&(Ct.parenthesizedAssign=ke),ir>-1&&(Ct.trailingComma=ir),dn},Sa.parseMaybeConditional=function(J,Ct){var me=this.start,jt=this.startLoc,ke=this.parseExprOps(J,Ct);if(this.checkExpressionErrors(Ct))return ke;if(this.eat(lt.question)){var ir=this.startNodeAt(me,jt);return ir.test=ke,ir.consequent=this.parseMaybeAssign(),this.expect(lt.colon),ir.alternate=this.parseMaybeAssign(J),this.finishNode(ir,"ConditionalExpression")}return ke},Sa.parseExprOps=function(J,Ct){var me=this.start,jt=this.startLoc,ke=this.parseMaybeUnary(Ct,!1);return this.checkExpressionErrors(Ct)||ke.start===me&&ke.type==="ArrowFunctionExpression"?ke:this.parseExprOp(ke,me,jt,-1,J)},Sa.parseExprOp=function(J,Ct,me,jt,ke){var ir=this.type.binop;if(ir!=null&&(!ke||this.type!==lt._in)&&ir>jt){var Gr=this.type===lt.logicalOR||this.type===lt.logicalAND,pn=this.type===lt.coalesce;pn&&(ir=lt.logicalAND.binop);var dn=this.value;this.next();var ti=this.start,Nn=this.startLoc,Fa=this.parseExprOp(this.parseMaybeUnary(null,!1),ti,Nn,ir,ke),Xa=this.buildBinary(Ct,me,J,Fa,dn,Gr||pn);return(Gr&&this.type===lt.coalesce||pn&&(this.type===lt.logicalOR||this.type===lt.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Xa,Ct,me,jt,ke)}return J},Sa.buildBinary=function(J,Ct,me,jt,ke,ir){var Gr=this.startNodeAt(J,Ct);return Gr.left=me,Gr.operator=ke,Gr.right=jt,this.finishNode(Gr,ir?"LogicalExpression":"BinaryExpression")},Sa.parseMaybeUnary=function(J,Ct){var me=this.start,jt=this.startLoc,ke;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))ke=this.parseAwait(),Ct=!0;else if(this.type.prefix){var ir=this.startNode(),Gr=this.type===lt.incDec;ir.operator=this.value,ir.prefix=!0,this.next(),ir.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(J,!0),Gr?this.checkLVal(ir.argument):this.strict&&ir.operator==="delete"&&ir.argument.type==="Identifier"?this.raiseRecoverable(ir.start,"Deleting local variable in strict mode"):Ct=!0,ke=this.finishNode(ir,Gr?"UpdateExpression":"UnaryExpression")}else{if(ke=this.parseExprSubscripts(J),this.checkExpressionErrors(J))return ke;for(;this.type.postfix&&!this.canInsertSemicolon();){var pn=this.startNodeAt(me,jt);pn.operator=this.value,pn.prefix=!1,pn.argument=ke,this.checkLVal(ke),this.next(),ke=this.finishNode(pn,"UpdateExpression")}}return!Ct&&this.eat(lt.starstar)?this.buildBinary(me,jt,ke,this.parseMaybeUnary(null,!1),"**",!1):ke},Sa.parseExprSubscripts=function(J){var Ct=this.start,me=this.startLoc,jt=this.parseExprAtom(J);if(jt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return jt;var ke=this.parseSubscripts(jt,Ct,me);return J&&ke.type==="MemberExpression"&&(J.parenthesizedAssign>=ke.start&&(J.parenthesizedAssign=-1),J.parenthesizedBind>=ke.start&&(J.parenthesizedBind=-1)),ke},Sa.parseSubscripts=function(J,Ct,me,jt){for(var ke=this.options.ecmaVersion>=8&&J.type==="Identifier"&&J.name==="async"&&this.lastTokEnd===J.end&&!this.canInsertSemicolon()&&J.end-J.start==5&&this.potentialArrowAt===J.start,ir=!1;;){var Gr=this.parseSubscript(J,Ct,me,jt,ke,ir);if(Gr.optional&&(ir=!0),Gr===J||Gr.type==="ArrowFunctionExpression"){if(ir){var pn=this.startNodeAt(Ct,me);pn.expression=Gr,Gr=this.finishNode(pn,"ChainExpression")}return Gr}J=Gr}},Sa.parseSubscript=function(J,Ct,me,jt,ke,ir){var Gr=this.options.ecmaVersion>=11,pn=Gr&&this.eat(lt.questionDot);jt&&pn&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var dn=this.eat(lt.bracketL);if(dn||pn&&this.type!==lt.parenL&&this.type!==lt.backQuote||this.eat(lt.dot)){var ti=this.startNodeAt(Ct,me);ti.object=J,ti.property=dn?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),ti.computed=!!dn,dn&&this.expect(lt.bracketR),Gr&&(ti.optional=pn),J=this.finishNode(ti,"MemberExpression")}else if(!jt&&this.eat(lt.parenL)){var Nn=new Ee,Fa=this.yieldPos,Xa=this.awaitPos,Wi=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var rs=this.parseExprList(lt.parenR,this.options.ecmaVersion>=8,!1,Nn);if(ke&&!pn&&!this.canInsertSemicolon()&&this.eat(lt.arrow))return this.checkPatternErrors(Nn,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Fa,this.awaitPos=Xa,this.awaitIdentPos=Wi,this.parseArrowExpression(this.startNodeAt(Ct,me),rs,!0);this.checkExpressionErrors(Nn,!0),this.yieldPos=Fa||this.yieldPos,this.awaitPos=Xa||this.awaitPos,this.awaitIdentPos=Wi||this.awaitIdentPos;var io=this.startNodeAt(Ct,me);io.callee=J,io.arguments=rs,Gr&&(io.optional=pn),J=this.finishNode(io,"CallExpression")}else if(this.type===lt.backQuote){(pn||ir)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Cs=this.startNodeAt(Ct,me);Cs.tag=J,Cs.quasi=this.parseTemplate({isTagged:!0}),J=this.finishNode(Cs,"TaggedTemplateExpression")}return J},Sa.parseExprAtom=function(J){this.type===lt.slash&&this.readRegexp();var Ct,me=this.potentialArrowAt===this.start;switch(this.type){case lt._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Ct=this.startNode(),this.next(),this.type===lt.parenL&&!this.allowDirectSuper&&this.raise(Ct.start,"super() call outside constructor of a subclass"),this.type!==lt.dot&&this.type!==lt.bracketL&&this.type!==lt.parenL&&this.unexpected(),this.finishNode(Ct,"Super");case lt._this:return Ct=this.startNode(),this.next(),this.finishNode(Ct,"ThisExpression");case lt.name:var jt=this.start,ke=this.startLoc,ir=this.containsEsc,Gr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!ir&&Gr.name==="async"&&!this.canInsertSemicolon()&&this.eat(lt._function))return this.parseFunction(this.startNodeAt(jt,ke),0,!1,!0);if(me&&!this.canInsertSemicolon()){if(this.eat(lt.arrow))return this.parseArrowExpression(this.startNodeAt(jt,ke),[Gr],!1);if(this.options.ecmaVersion>=8&&Gr.name==="async"&&this.type===lt.name&&!ir)return Gr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(lt.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(jt,ke),[Gr],!0)}return Gr;case lt.regexp:var pn=this.value;return Ct=this.parseLiteral(pn.value),Ct.regex={pattern:pn.pattern,flags:pn.flags},Ct;case lt.num:case lt.string:return this.parseLiteral(this.value);case lt._null:case lt._true:case lt._false:return Ct=this.startNode(),Ct.value=this.type===lt._null?null:this.type===lt._true,Ct.raw=this.type.keyword,this.next(),this.finishNode(Ct,"Literal");case lt.parenL:var dn=this.start,ti=this.parseParenAndDistinguishExpression(me);return J&&(J.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ti)&&(J.parenthesizedAssign=dn),J.parenthesizedBind<0&&(J.parenthesizedBind=dn)),ti;case lt.bracketL:return Ct=this.startNode(),this.next(),Ct.elements=this.parseExprList(lt.bracketR,!0,!0,J),this.finishNode(Ct,"ArrayExpression");case lt.braceL:return this.parseObj(!1,J);case lt._function:return Ct=this.startNode(),this.next(),this.parseFunction(Ct,0);case lt._class:return this.parseClass(this.startNode(),!1);case lt._new:return this.parseNew();case lt.backQuote:return this.parseTemplate();case lt._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Sa.parseExprImport=function(){var J=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var Ct=this.parseIdent(!0);switch(this.type){case lt.parenL:return this.parseDynamicImport(J);case lt.dot:return J.meta=Ct,this.parseImportMeta(J);default:this.unexpected()}},Sa.parseDynamicImport=function(J){if(this.next(),J.source=this.parseMaybeAssign(),!this.eat(lt.parenR)){var Ct=this.start;this.eat(lt.comma)&&this.eat(lt.parenR)?this.raiseRecoverable(Ct,"Trailing comma is not allowed in import()"):this.unexpected(Ct)}return this.finishNode(J,"ImportExpression")},Sa.parseImportMeta=function(J){this.next();var Ct=this.containsEsc;return J.property=this.parseIdent(!0),J.property.name!=="meta"&&this.raiseRecoverable(J.property.start,"The only valid meta property for import is 'import.meta'"),Ct&&this.raiseRecoverable(J.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(J.start,"Cannot use 'import.meta' outside a module"),this.finishNode(J,"MetaProperty")},Sa.parseLiteral=function(J){var Ct=this.startNode();return Ct.value=J,Ct.raw=this.input.slice(this.start,this.end),Ct.raw.charCodeAt(Ct.raw.length-1)===110&&(Ct.bigint=Ct.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(Ct,"Literal")},Sa.parseParenExpression=function(){this.expect(lt.parenL);var J=this.parseExpression();return this.expect(lt.parenR),J},Sa.parseParenAndDistinguishExpression=function(J){var Ct=this.start,me=this.startLoc,jt,ke=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var ir=this.start,Gr=this.startLoc,pn=[],dn=!0,ti=!1,Nn=new Ee,Fa=this.yieldPos,Xa=this.awaitPos,Wi;for(this.yieldPos=0,this.awaitPos=0;this.type!==lt.parenR;)if(dn?dn=!1:this.expect(lt.comma),ke&&this.afterTrailingComma(lt.parenR,!0)){ti=!0;break}else if(this.type===lt.ellipsis){Wi=this.start,pn.push(this.parseParenItem(this.parseRestBinding())),this.type===lt.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else pn.push(this.parseMaybeAssign(!1,Nn,this.parseParenItem));var rs=this.start,io=this.startLoc;if(this.expect(lt.parenR),J&&!this.canInsertSemicolon()&&this.eat(lt.arrow))return this.checkPatternErrors(Nn,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Fa,this.awaitPos=Xa,this.parseParenArrowList(Ct,me,pn);(!pn.length||ti)&&this.unexpected(this.lastTokStart),Wi&&this.unexpected(Wi),this.checkExpressionErrors(Nn,!0),this.yieldPos=Fa||this.yieldPos,this.awaitPos=Xa||this.awaitPos,pn.length>1?(jt=this.startNodeAt(ir,Gr),jt.expressions=pn,this.finishNodeAt(jt,"SequenceExpression",rs,io)):jt=pn[0]}else jt=this.parseParenExpression();if(this.options.preserveParens){var Cs=this.startNodeAt(Ct,me);return Cs.expression=jt,this.finishNode(Cs,"ParenthesizedExpression")}else return jt},Sa.parseParenItem=function(J){return J},Sa.parseParenArrowList=function(J,Ct,me){return this.parseArrowExpression(this.startNodeAt(J,Ct),me)};var to=[];Sa.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var J=this.startNode(),Ct=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(lt.dot)){J.meta=Ct;var me=this.containsEsc;return J.property=this.parseIdent(!0),J.property.name!=="target"&&this.raiseRecoverable(J.property.start,"The only valid meta property for new is 'new.target'"),me&&this.raiseRecoverable(J.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(J.start,"'new.target' can only be used in functions"),this.finishNode(J,"MetaProperty")}var jt=this.start,ke=this.startLoc,ir=this.type===lt._import;return J.callee=this.parseSubscripts(this.parseExprAtom(),jt,ke,!0),ir&&J.callee.type==="ImportExpression"&&this.raise(jt,"Cannot use new with import()"),this.eat(lt.parenL)?J.arguments=this.parseExprList(lt.parenR,this.options.ecmaVersion>=8,!1):J.arguments=to,this.finishNode(J,"NewExpression")},Sa.parseTemplateElement=function(J){var Ct=J.isTagged,me=this.startNode();return this.type===lt.invalidTemplate?(Ct||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),me.value={raw:this.value,cooked:null}):me.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),me.tail=this.type===lt.backQuote,this.finishNode(me,"TemplateElement")},Sa.parseTemplate=function(J){J===void 0&&(J={});var Ct=J.isTagged;Ct===void 0&&(Ct=!1);var me=this.startNode();this.next(),me.expressions=[];var jt=this.parseTemplateElement({isTagged:Ct});for(me.quasis=[jt];!jt.tail;)this.type===lt.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(lt.dollarBraceL),me.expressions.push(this.parseExpression()),this.expect(lt.braceR),me.quasis.push(jt=this.parseTemplateElement({isTagged:Ct}));return this.next(),this.finishNode(me,"TemplateLiteral")},Sa.isAsyncProp=function(J){return!J.computed&&J.key.type==="Identifier"&&J.key.name==="async"&&(this.type===lt.name||this.type===lt.num||this.type===lt.string||this.type===lt.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===lt.star)&&!Lt.test(this.input.slice(this.lastTokEnd,this.start))},Sa.parseObj=function(J,Ct){var me=this.startNode(),jt=!0,ke={};for(me.properties=[],this.next();!this.eat(lt.braceR);){if(jt)jt=!1;else if(this.expect(lt.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(lt.braceR))break;var ir=this.parseProperty(J,Ct);J||this.checkPropClash(ir,ke,Ct),me.properties.push(ir)}return this.finishNode(me,J?"ObjectPattern":"ObjectExpression")},Sa.parseProperty=function(J,Ct){var me=this.startNode(),jt,ke,ir,Gr;if(this.options.ecmaVersion>=9&&this.eat(lt.ellipsis))return J?(me.argument=this.parseIdent(!1),this.type===lt.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(me,"RestElement")):(this.type===lt.parenL&&Ct&&(Ct.parenthesizedAssign<0&&(Ct.parenthesizedAssign=this.start),Ct.parenthesizedBind<0&&(Ct.parenthesizedBind=this.start)),me.argument=this.parseMaybeAssign(!1,Ct),this.type===lt.comma&&Ct&&Ct.trailingComma<0&&(Ct.trailingComma=this.start),this.finishNode(me,"SpreadElement"));this.options.ecmaVersion>=6&&(me.method=!1,me.shorthand=!1,(J||Ct)&&(ir=this.start,Gr=this.startLoc),J||(jt=this.eat(lt.star)));var pn=this.containsEsc;return this.parsePropertyName(me),!J&&!pn&&this.options.ecmaVersion>=8&&!jt&&this.isAsyncProp(me)?(ke=!0,jt=this.options.ecmaVersion>=9&&this.eat(lt.star),this.parsePropertyName(me,Ct)):ke=!1,this.parsePropertyValue(me,J,jt,ke,ir,Gr,Ct,pn),this.finishNode(me,"Property")},Sa.parsePropertyValue=function(J,Ct,me,jt,ke,ir,Gr,pn){if((me||jt)&&this.type===lt.colon&&this.unexpected(),this.eat(lt.colon))J.value=Ct?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Gr),J.kind="init";else if(this.options.ecmaVersion>=6&&this.type===lt.parenL)Ct&&this.unexpected(),J.kind="init",J.method=!0,J.value=this.parseMethod(me,jt);else if(!Ct&&!pn&&this.options.ecmaVersion>=5&&!J.computed&&J.key.type==="Identifier"&&(J.key.name==="get"||J.key.name==="set")&&this.type!==lt.comma&&this.type!==lt.braceR&&this.type!==lt.eq){(me||jt)&&this.unexpected(),J.kind=J.key.name,this.parsePropertyName(J),J.value=this.parseMethod(!1);var dn=J.kind==="get"?0:1;if(J.value.params.length!==dn){var ti=J.value.start;J.kind==="get"?this.raiseRecoverable(ti,"getter should have no params"):this.raiseRecoverable(ti,"setter should have exactly one param")}else J.kind==="set"&&J.value.params[0].type==="RestElement"&&this.raiseRecoverable(J.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!J.computed&&J.key.type==="Identifier"?((me||jt)&&this.unexpected(),this.checkUnreserved(J.key),J.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ke),J.kind="init",Ct?J.value=this.parseMaybeDefault(ke,ir,J.key):this.type===lt.eq&&Gr?(Gr.shorthandAssign<0&&(Gr.shorthandAssign=this.start),J.value=this.parseMaybeDefault(ke,ir,J.key)):J.value=J.key,J.shorthand=!0):this.unexpected()},Sa.parsePropertyName=function(J){if(this.options.ecmaVersion>=6){if(this.eat(lt.bracketL))return J.computed=!0,J.key=this.parseMaybeAssign(),this.expect(lt.bracketR),J.key;J.computed=!1}return J.key=this.type===lt.num||this.type===lt.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Sa.initFunction=function(J){J.id=null,this.options.ecmaVersion>=6&&(J.generator=J.expression=!1),this.options.ecmaVersion>=8&&(J.async=!1)},Sa.parseMethod=function(J,Ct,me){var jt=this.startNode(),ke=this.yieldPos,ir=this.awaitPos,Gr=this.awaitIdentPos;return this.initFunction(jt),this.options.ecmaVersion>=6&&(jt.generator=J),this.options.ecmaVersion>=8&&(jt.async=!!Ct),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pt(Ct,jt.generator)|Ut|(me?Rt:0)),this.expect(lt.parenL),jt.params=this.parseBindingList(lt.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(jt,!1,!0),this.yieldPos=ke,this.awaitPos=ir,this.awaitIdentPos=Gr,this.finishNode(jt,"FunctionExpression")},Sa.parseArrowExpression=function(J,Ct,me){var jt=this.yieldPos,ke=this.awaitPos,ir=this.awaitIdentPos;return this.enterScope(Pt(me,!1)|ce),this.initFunction(J),this.options.ecmaVersion>=8&&(J.async=!!me),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,J.params=this.toAssignableList(Ct,!0),this.parseFunctionBody(J,!0,!1),this.yieldPos=jt,this.awaitPos=ke,this.awaitIdentPos=ir,this.finishNode(J,"ArrowFunctionExpression")},Sa.parseFunctionBody=function(J,Ct,me){var jt=Ct&&this.type!==lt.braceL,ke=this.strict,ir=!1;if(jt)J.body=this.parseMaybeAssign(),J.expression=!0,this.checkParams(J,!1);else{var Gr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(J.params);(!ke||Gr)&&(ir=this.strictDirective(this.end),ir&&Gr&&this.raiseRecoverable(J.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var pn=this.labels;this.labels=[],ir&&(this.strict=!0),this.checkParams(J,!ke&&!ir&&!Ct&&!me&&this.isSimpleParamList(J.params)),this.strict&&J.id&&this.checkLVal(J.id,Re),J.body=this.parseBlock(!1,void 0,ir&&!ke),J.expression=!1,this.adaptDirectivePrologue(J.body.body),this.labels=pn}this.exitScope()},Sa.isSimpleParamList=function(J){for(var Ct=0,me=J;Ct<me.length;Ct+=1){var jt=me[Ct];if(jt.type!=="Identifier")return!1}return!0},Sa.checkParams=function(J,Ct){for(var me={},jt=0,ke=J.params;jt<ke.length;jt+=1){var ir=ke[jt];this.checkLVal(ir,Dt,Ct?null:me)}},Sa.parseExprList=function(J,Ct,me,jt){for(var ke=[],ir=!0;!this.eat(J);){if(ir)ir=!1;else if(this.expect(lt.comma),Ct&&this.afterTrailingComma(J))break;var Gr=void 0;me&&this.type===lt.comma?Gr=null:this.type===lt.ellipsis?(Gr=this.parseSpread(jt),jt&&this.type===lt.comma&&jt.trailingComma<0&&(jt.trailingComma=this.start)):Gr=this.parseMaybeAssign(!1,jt),ke.push(Gr)}return ke},Sa.checkUnreserved=function(J){var Ct=J.start,me=J.end,jt=J.name;if(this.inGenerator&&jt==="yield"&&this.raiseRecoverable(Ct,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&jt==="await"&&this.raiseRecoverable(Ct,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(jt)&&this.raise(Ct,"Unexpected keyword '"+jt+"'"),!(this.options.ecmaVersion<6&&this.input.slice(Ct,me).indexOf("\\")!==-1)){var ke=this.strict?this.reservedWordsStrict:this.reservedWords;ke.test(jt)&&(!this.inAsync&&jt==="await"&&this.raiseRecoverable(Ct,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(Ct,"The keyword '"+jt+"' is reserved"))}},Sa.parseIdent=function(J,Ct){var me=this.startNode();return this.type===lt.name?me.name=this.value:this.type.keyword?(me.name=this.type.keyword,(me.name==="class"||me.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!J),this.finishNode(me,"Identifier"),J||(this.checkUnreserved(me),me.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=me.start)),me},Sa.parseYield=function(J){this.yieldPos||(this.yieldPos=this.start);var Ct=this.startNode();return this.next(),this.type===lt.semi||this.canInsertSemicolon()||this.type!==lt.star&&!this.type.startsExpr?(Ct.delegate=!1,Ct.argument=null):(Ct.delegate=this.eat(lt.star),Ct.argument=this.parseMaybeAssign(J)),this.finishNode(Ct,"YieldExpression")},Sa.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var J=this.startNode();return this.next(),J.argument=this.parseMaybeUnary(null,!1),this.finishNode(J,"AwaitExpression")};var qa=je.prototype;qa.raise=function(J,Ct){var me=st(this.input,J);Ct+=" ("+me.line+":"+me.column+")";var jt=new SyntaxError(Ct);throw jt.pos=J,jt.loc=me,jt.raisedAt=this.pos,jt},qa.raiseRecoverable=qa.raise,qa.curPosition=function(){if(this.options.locations)return new nt(this.curLine,this.pos-this.lineStart)};var Ui=je.prototype,Ue=function(Ct){this.flags=Ct,this.var=[],this.lexical=[],this.functions=[]};Ui.enterScope=function(J){this.scopeStack.push(new Ue(J))},Ui.exitScope=function(){this.scopeStack.pop()},Ui.treatFunctionsAsVarInScope=function(J){return J.flags&Xt||!this.inModule&&J.flags&kt},Ui.declareName=function(J,Ct,me){var jt=!1;if(Ct===Nt){var ke=this.currentScope();jt=ke.lexical.indexOf(J)>-1||ke.functions.indexOf(J)>-1||ke.var.indexOf(J)>-1,ke.lexical.push(J),this.inModule&&ke.flags&kt&&delete this.undefinedExports[J]}else if(Ct===ve){var ir=this.currentScope();ir.lexical.push(J)}else if(Ct===ne){var Gr=this.currentScope();this.treatFunctionsAsVar?jt=Gr.lexical.indexOf(J)>-1:jt=Gr.lexical.indexOf(J)>-1||Gr.var.indexOf(J)>-1,Gr.functions.push(J)}else for(var pn=this.scopeStack.length-1;pn>=0;--pn){var dn=this.scopeStack[pn];if(dn.lexical.indexOf(J)>-1&&!(dn.flags&$t&&dn.lexical[0]===J)||!this.treatFunctionsAsVarInScope(dn)&&dn.functions.indexOf(J)>-1){jt=!0;break}if(dn.var.push(J),this.inModule&&dn.flags&kt&&delete this.undefinedExports[J],dn.flags&Kt)break}jt&&this.raiseRecoverable(me,"Identifier '"+J+"' has already been declared")},Ui.checkLocalExport=function(J){this.scopeStack[0].lexical.indexOf(J.name)===-1&&this.scopeStack[0].var.indexOf(J.name)===-1&&(this.undefinedExports[J.name]=J)},Ui.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Ui.currentVarScope=function(){for(var J=this.scopeStack.length-1;;J--){var Ct=this.scopeStack[J];if(Ct.flags&Kt)return Ct}},Ui.currentThisScope=function(){for(var J=this.scopeStack.length-1;;J--){var Ct=this.scopeStack[J];if(Ct.flags&Kt&&!(Ct.flags&ce))return Ct}};var We=function(Ct,me,jt){this.type="",this.start=me,this.end=0,Ct.options.locations&&(this.loc=new rt(Ct,jt)),Ct.options.directSourceFile&&(this.sourceFile=Ct.options.directSourceFile),Ct.options.ranges&&(this.range=[me,0])},fr=je.prototype;fr.startNode=function(){return new We(this,this.start,this.startLoc)},fr.startNodeAt=function(J,Ct){return new We(this,J,Ct)};function Ar(J,Ct,me,jt){return J.type=Ct,J.end=me,this.options.locations&&(J.loc.end=jt),this.options.ranges&&(J.range[1]=me),J}fr.finishNode=function(J,Ct){return Ar.call(this,J,Ct,this.lastTokEnd,this.lastTokEndLoc)},fr.finishNodeAt=function(J,Ct,me,jt){return Ar.call(this,J,Ct,me,jt)};var qr=function(Ct,me,jt,ke,ir){this.token=Ct,this.isExpr=!!me,this.preserveSpace=!!jt,this.override=ke,this.generator=!!ir},nn={b_stat:new qr("{",!1),b_expr:new qr("{",!0),b_tmpl:new qr("${",!1),p_stat:new qr("(",!1),p_expr:new qr("(",!0),q_tmpl:new qr("`",!0,!0,function(J){return J.tryReadTemplateToken()}),f_stat:new qr("function",!1),f_expr:new qr("function",!0),f_expr_gen:new qr("function",!0,!1,null,!0),f_gen:new qr("function",!1,!1,null,!0)},an=je.prototype;an.initialContext=function(){return[nn.b_stat]},an.braceIsBlock=function(J){var Ct=this.curContext();return Ct===nn.f_expr||Ct===nn.f_stat?!0:J===lt.colon&&(Ct===nn.b_stat||Ct===nn.b_expr)?!Ct.isExpr:J===lt._return||J===lt.name&&this.exprAllowed?Lt.test(this.input.slice(this.lastTokEnd,this.start)):J===lt._else||J===lt.semi||J===lt.eof||J===lt.parenR||J===lt.arrow?!0:J===lt.braceL?Ct===nn.b_stat:J===lt._var||J===lt._const||J===lt.name?!1:!this.exprAllowed},an.inGeneratorContext=function(){for(var J=this.context.length-1;J>=1;J--){var Ct=this.context[J];if(Ct.token==="function")return Ct.generator}return!1},an.updateContext=function(J){var Ct,me=this.type;me.keyword&&J===lt.dot?this.exprAllowed=!1:(Ct=me.updateContext)?Ct.call(this,J):this.exprAllowed=me.beforeExpr},lt.parenR.updateContext=lt.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var J=this.context.pop();J===nn.b_stat&&this.curContext().token==="function"&&(J=this.context.pop()),this.exprAllowed=!J.isExpr},lt.braceL.updateContext=function(J){this.context.push(this.braceIsBlock(J)?nn.b_stat:nn.b_expr),this.exprAllowed=!0},lt.dollarBraceL.updateContext=function(){this.context.push(nn.b_tmpl),this.exprAllowed=!0},lt.parenL.updateContext=function(J){var Ct=J===lt._if||J===lt._for||J===lt._with||J===lt._while;this.context.push(Ct?nn.p_stat:nn.p_expr),this.exprAllowed=!0},lt.incDec.updateContext=function(){},lt._function.updateContext=lt._class.updateContext=function(J){J.beforeExpr&&J!==lt.semi&&J!==lt._else&&!(J===lt._return&&Lt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((J===lt.colon||J===lt.braceL)&&this.curContext()===nn.b_stat)?this.context.push(nn.f_expr):this.context.push(nn.f_stat),this.exprAllowed=!1},lt.backQuote.updateContext=function(){this.curContext()===nn.q_tmpl?this.context.pop():this.context.push(nn.q_tmpl),this.exprAllowed=!1},lt.star.updateContext=function(J){if(J===lt._function){var Ct=this.context.length-1;this.context[Ct]===nn.f_expr?this.context[Ct]=nn.f_expr_gen:this.context[Ct]=nn.f_gen}this.exprAllowed=!0},lt.name.updateContext=function(J){var Ct=!1;this.options.ecmaVersion>=6&&J!==lt.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(Ct=!0),this.exprAllowed=Ct};var le="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",fe=le+" Extended_Pictographic",Me=fe,Te={9:le,10:fe,11:Me},Ze="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",or="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",lr=or+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Be=lr+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",tr={9:or,10:lr,11:Be},Mr={};function Xr(J){var Ct=Mr[J]={binary:ot(Te[J]+" "+Ze),nonBinary:{General_Category:ot(Ze),Script:ot(tr[J])}};Ct.nonBinary.Script_Extensions=Ct.nonBinary.Script,Ct.nonBinary.gc=Ct.nonBinary.General_Category,Ct.nonBinary.sc=Ct.nonBinary.Script,Ct.nonBinary.scx=Ct.nonBinary.Script_Extensions}Xr(9),Xr(10),Xr(11);var Zr=je.prototype,tn=function(Ct){this.parser=Ct,this.validFlags="gim"+(Ct.options.ecmaVersion>=6?"uy":"")+(Ct.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Mr[Ct.options.ecmaVersion>=11?11:Ct.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};tn.prototype.reset=function(Ct,me,jt){var ke=jt.indexOf("u")!==-1;this.start=Ct|0,this.source=me+"",this.flags=jt,this.switchU=ke&&this.parser.options.ecmaVersion>=6,this.switchN=ke&&this.parser.options.ecmaVersion>=9},tn.prototype.raise=function(Ct){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+Ct)},tn.prototype.at=function(Ct,me){me===void 0&&(me=!1);var jt=this.source,ke=jt.length;if(Ct>=ke)return-1;var ir=jt.charCodeAt(Ct);if(!(me||this.switchU)||ir<=55295||ir>=57344||Ct+1>=ke)return ir;var Gr=jt.charCodeAt(Ct+1);return Gr>=56320&&Gr<=57343?(ir<<10)+Gr-56613888:ir},tn.prototype.nextIndex=function(Ct,me){me===void 0&&(me=!1);var jt=this.source,ke=jt.length;if(Ct>=ke)return ke;var ir=jt.charCodeAt(Ct),Gr;return!(me||this.switchU)||ir<=55295||ir>=57344||Ct+1>=ke||(Gr=jt.charCodeAt(Ct+1))<56320||Gr>57343?Ct+1:Ct+2},tn.prototype.current=function(Ct){return Ct===void 0&&(Ct=!1),this.at(this.pos,Ct)},tn.prototype.lookahead=function(Ct){return Ct===void 0&&(Ct=!1),this.at(this.nextIndex(this.pos,Ct),Ct)},tn.prototype.advance=function(Ct){Ct===void 0&&(Ct=!1),this.pos=this.nextIndex(this.pos,Ct)},tn.prototype.eat=function(Ct,me){return me===void 0&&(me=!1),this.current(me)===Ct?(this.advance(me),!0):!1};function _n(J){return J<=65535?String.fromCharCode(J):(J-=65536,String.fromCharCode((J>>10)+55296,(J&1023)+56320))}Zr.validateRegExpFlags=function(J){for(var Ct=J.validFlags,me=J.flags,jt=0;jt<me.length;jt++){var ke=me.charAt(jt);Ct.indexOf(ke)===-1&&this.raise(J.start,"Invalid regular expression flag"),me.indexOf(ke,jt+1)>-1&&this.raise(J.start,"Duplicate regular expression flag")}},Zr.validateRegExpPattern=function(J){this.regexp_pattern(J),!J.switchN&&this.options.ecmaVersion>=9&&J.groupNames.length>0&&(J.switchN=!0,this.regexp_pattern(J))},Zr.regexp_pattern=function(J){J.pos=0,J.lastIntValue=0,J.lastStringValue="",J.lastAssertionIsQuantifiable=!1,J.numCapturingParens=0,J.maxBackReference=0,J.groupNames.length=0,J.backReferenceNames.length=0,this.regexp_disjunction(J),J.pos!==J.source.length&&(J.eat(41)&&J.raise("Unmatched ')'"),(J.eat(93)||J.eat(125))&&J.raise("Lone quantifier brackets")),J.maxBackReference>J.numCapturingParens&&J.raise("Invalid escape");for(var Ct=0,me=J.backReferenceNames;Ct<me.length;Ct+=1){var jt=me[Ct];J.groupNames.indexOf(jt)===-1&&J.raise("Invalid named capture referenced")}},Zr.regexp_disjunction=function(J){for(this.regexp_alternative(J);J.eat(124);)this.regexp_alternative(J);this.regexp_eatQuantifier(J,!0)&&J.raise("Nothing to repeat"),J.eat(123)&&J.raise("Lone quantifier brackets")},Zr.regexp_alternative=function(J){for(;J.pos<J.source.length&&this.regexp_eatTerm(J););},Zr.regexp_eatTerm=function(J){return this.regexp_eatAssertion(J)?(J.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(J)&&J.switchU&&J.raise("Invalid quantifier"),!0):(J.switchU?this.regexp_eatAtom(J):this.regexp_eatExtendedAtom(J))?(this.regexp_eatQuantifier(J),!0):!1},Zr.regexp_eatAssertion=function(J){var Ct=J.pos;if(J.lastAssertionIsQuantifiable=!1,J.eat(94)||J.eat(36))return!0;if(J.eat(92)){if(J.eat(66)||J.eat(98))return!0;J.pos=Ct}if(J.eat(40)&&J.eat(63)){var me=!1;if(this.options.ecmaVersion>=9&&(me=J.eat(60)),J.eat(61)||J.eat(33))return this.regexp_disjunction(J),J.eat(41)||J.raise("Unterminated group"),J.lastAssertionIsQuantifiable=!me,!0}return J.pos=Ct,!1},Zr.regexp_eatQuantifier=function(J,Ct){return Ct===void 0&&(Ct=!1),this.regexp_eatQuantifierPrefix(J,Ct)?(J.eat(63),!0):!1},Zr.regexp_eatQuantifierPrefix=function(J,Ct){return J.eat(42)||J.eat(43)||J.eat(63)||this.regexp_eatBracedQuantifier(J,Ct)},Zr.regexp_eatBracedQuantifier=function(J,Ct){var me=J.pos;if(J.eat(123)){var jt=0,ke=-1;if(this.regexp_eatDecimalDigits(J)&&(jt=J.lastIntValue,J.eat(44)&&this.regexp_eatDecimalDigits(J)&&(ke=J.lastIntValue),J.eat(125)))return ke!==-1&&ke<jt&&!Ct&&J.raise("numbers out of order in {} quantifier"),!0;J.switchU&&!Ct&&J.raise("Incomplete quantifier"),J.pos=me}return!1},Zr.regexp_eatAtom=function(J){return this.regexp_eatPatternCharacters(J)||J.eat(46)||this.regexp_eatReverseSolidusAtomEscape(J)||this.regexp_eatCharacterClass(J)||this.regexp_eatUncapturingGroup(J)||this.regexp_eatCapturingGroup(J)},Zr.regexp_eatReverseSolidusAtomEscape=function(J){var Ct=J.pos;if(J.eat(92)){if(this.regexp_eatAtomEscape(J))return!0;J.pos=Ct}return!1},Zr.regexp_eatUncapturingGroup=function(J){var Ct=J.pos;if(J.eat(40)){if(J.eat(63)&&J.eat(58)){if(this.regexp_disjunction(J),J.eat(41))return!0;J.raise("Unterminated group")}J.pos=Ct}return!1},Zr.regexp_eatCapturingGroup=function(J){if(J.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(J):J.current()===63&&J.raise("Invalid group"),this.regexp_disjunction(J),J.eat(41))return J.numCapturingParens+=1,!0;J.raise("Unterminated group")}return!1},Zr.regexp_eatExtendedAtom=function(J){return J.eat(46)||this.regexp_eatReverseSolidusAtomEscape(J)||this.regexp_eatCharacterClass(J)||this.regexp_eatUncapturingGroup(J)||this.regexp_eatCapturingGroup(J)||this.regexp_eatInvalidBracedQuantifier(J)||this.regexp_eatExtendedPatternCharacter(J)},Zr.regexp_eatInvalidBracedQuantifier=function(J){return this.regexp_eatBracedQuantifier(J,!0)&&J.raise("Nothing to repeat"),!1},Zr.regexp_eatSyntaxCharacter=function(J){var Ct=J.current();return $n(Ct)?(J.lastIntValue=Ct,J.advance(),!0):!1};function $n(J){return J===36||J>=40&&J<=43||J===46||J===63||J>=91&&J<=94||J>=123&&J<=125}Zr.regexp_eatPatternCharacters=function(J){for(var Ct=J.pos,me=0;(me=J.current())!==-1&&!$n(me);)J.advance();return J.pos!==Ct},Zr.regexp_eatExtendedPatternCharacter=function(J){var Ct=J.current();return Ct!==-1&&Ct!==36&&!(Ct>=40&&Ct<=43)&&Ct!==46&&Ct!==63&&Ct!==91&&Ct!==94&&Ct!==124?(J.advance(),!0):!1},Zr.regexp_groupSpecifier=function(J){if(J.eat(63)){if(this.regexp_eatGroupName(J)){J.groupNames.indexOf(J.lastStringValue)!==-1&&J.raise("Duplicate capture group name"),J.groupNames.push(J.lastStringValue);return}J.raise("Invalid group")}},Zr.regexp_eatGroupName=function(J){if(J.lastStringValue="",J.eat(60)){if(this.regexp_eatRegExpIdentifierName(J)&&J.eat(62))return!0;J.raise("Invalid capture group name")}return!1},Zr.regexp_eatRegExpIdentifierName=function(J){if(J.lastStringValue="",this.regexp_eatRegExpIdentifierStart(J)){for(J.lastStringValue+=_n(J.lastIntValue);this.regexp_eatRegExpIdentifierPart(J);)J.lastStringValue+=_n(J.lastIntValue);return!0}return!1},Zr.regexp_eatRegExpIdentifierStart=function(J){var Ct=J.pos,me=this.options.ecmaVersion>=11,jt=J.current(me);return J.advance(me),jt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(J,me)&&(jt=J.lastIntValue),si(jt)?(J.lastIntValue=jt,!0):(J.pos=Ct,!1)};function si(J){return k(J,!0)||J===36||J===95}Zr.regexp_eatRegExpIdentifierPart=function(J){var Ct=J.pos,me=this.options.ecmaVersion>=11,jt=J.current(me);return J.advance(me),jt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(J,me)&&(jt=J.lastIntValue),Jr(jt)?(J.lastIntValue=jt,!0):(J.pos=Ct,!1)};function Jr(J){return V(J,!0)||J===36||J===95||J===8204||J===8205}Zr.regexp_eatAtomEscape=function(J){return this.regexp_eatBackReference(J)||this.regexp_eatCharacterClassEscape(J)||this.regexp_eatCharacterEscape(J)||J.switchN&&this.regexp_eatKGroupName(J)?!0:(J.switchU&&(J.current()===99&&J.raise("Invalid unicode escape"),J.raise("Invalid escape")),!1)},Zr.regexp_eatBackReference=function(J){var Ct=J.pos;if(this.regexp_eatDecimalEscape(J)){var me=J.lastIntValue;if(J.switchU)return me>J.maxBackReference&&(J.maxBackReference=me),!0;if(me<=J.numCapturingParens)return!0;J.pos=Ct}return!1},Zr.regexp_eatKGroupName=function(J){if(J.eat(107)){if(this.regexp_eatGroupName(J))return J.backReferenceNames.push(J.lastStringValue),!0;J.raise("Invalid named reference")}return!1},Zr.regexp_eatCharacterEscape=function(J){return this.regexp_eatControlEscape(J)||this.regexp_eatCControlLetter(J)||this.regexp_eatZero(J)||this.regexp_eatHexEscapeSequence(J)||this.regexp_eatRegExpUnicodeEscapeSequence(J,!1)||!J.switchU&&this.regexp_eatLegacyOctalEscapeSequence(J)||this.regexp_eatIdentityEscape(J)},Zr.regexp_eatCControlLetter=function(J){var Ct=J.pos;if(J.eat(99)){if(this.regexp_eatControlLetter(J))return!0;J.pos=Ct}return!1},Zr.regexp_eatZero=function(J){return J.current()===48&&!ga(J.lookahead())?(J.lastIntValue=0,J.advance(),!0):!1},Zr.regexp_eatControlEscape=function(J){var Ct=J.current();return Ct===116?(J.lastIntValue=9,J.advance(),!0):Ct===110?(J.lastIntValue=10,J.advance(),!0):Ct===118?(J.lastIntValue=11,J.advance(),!0):Ct===102?(J.lastIntValue=12,J.advance(),!0):Ct===114?(J.lastIntValue=13,J.advance(),!0):!1},Zr.regexp_eatControlLetter=function(J){var Ct=J.current();return Si(Ct)?(J.lastIntValue=Ct%32,J.advance(),!0):!1};function Si(J){return J>=65&&J<=90||J>=97&&J<=122}Zr.regexp_eatRegExpUnicodeEscapeSequence=function(J,Ct){Ct===void 0&&(Ct=!1);var me=J.pos,jt=Ct||J.switchU;if(J.eat(117)){if(this.regexp_eatFixedHexDigits(J,4)){var ke=J.lastIntValue;if(jt&&ke>=55296&&ke<=56319){var ir=J.pos;if(J.eat(92)&&J.eat(117)&&this.regexp_eatFixedHexDigits(J,4)){var Gr=J.lastIntValue;if(Gr>=56320&&Gr<=57343)return J.lastIntValue=(ke-55296)*1024+(Gr-56320)+65536,!0}J.pos=ir,J.lastIntValue=ke}return!0}if(jt&&J.eat(123)&&this.regexp_eatHexDigits(J)&&J.eat(125)&&Jn(J.lastIntValue))return!0;jt&&J.raise("Invalid unicode escape"),J.pos=me}return!1};function Jn(J){return J>=0&&J<=1114111}Zr.regexp_eatIdentityEscape=function(J){if(J.switchU)return this.regexp_eatSyntaxCharacter(J)?!0:J.eat(47)?(J.lastIntValue=47,!0):!1;var Ct=J.current();return Ct!==99&&(!J.switchN||Ct!==107)?(J.lastIntValue=Ct,J.advance(),!0):!1},Zr.regexp_eatDecimalEscape=function(J){J.lastIntValue=0;var Ct=J.current();if(Ct>=49&&Ct<=57){do J.lastIntValue=10*J.lastIntValue+(Ct-48),J.advance();while((Ct=J.current())>=48&&Ct<=57);return!0}return!1},Zr.regexp_eatCharacterClassEscape=function(J){var Ct=J.current();if(yi(Ct))return J.lastIntValue=-1,J.advance(),!0;if(J.switchU&&this.options.ecmaVersion>=9&&(Ct===80||Ct===112)){if(J.lastIntValue=-1,J.advance(),J.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(J)&&J.eat(125))return!0;J.raise("Invalid property name")}return!1};function yi(J){return J===100||J===68||J===115||J===83||J===119||J===87}Zr.regexp_eatUnicodePropertyValueExpression=function(J){var Ct=J.pos;if(this.regexp_eatUnicodePropertyName(J)&&J.eat(61)){var me=J.lastStringValue;if(this.regexp_eatUnicodePropertyValue(J)){var jt=J.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(J,me,jt),!0}}if(J.pos=Ct,this.regexp_eatLoneUnicodePropertyNameOrValue(J)){var ke=J.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(J,ke),!0}return!1},Zr.regexp_validateUnicodePropertyNameAndValue=function(J,Ct,me){vt(J.unicodeProperties.nonBinary,Ct)||J.raise("Invalid property name"),J.unicodeProperties.nonBinary[Ct].test(me)||J.raise("Invalid property value")},Zr.regexp_validateUnicodePropertyNameOrValue=function(J,Ct){J.unicodeProperties.binary.test(Ct)||J.raise("Invalid property name")},Zr.regexp_eatUnicodePropertyName=function(J){var Ct=0;for(J.lastStringValue="";Ka(Ct=J.current());)J.lastStringValue+=_n(Ct),J.advance();return J.lastStringValue!==""};function Ka(J){return Si(J)||J===95}Zr.regexp_eatUnicodePropertyValue=function(J){var Ct=0;for(J.lastStringValue="";ki(Ct=J.current());)J.lastStringValue+=_n(Ct),J.advance();return J.lastStringValue!==""};function ki(J){return Ka(J)||ga(J)}Zr.regexp_eatLoneUnicodePropertyNameOrValue=function(J){return this.regexp_eatUnicodePropertyValue(J)},Zr.regexp_eatCharacterClass=function(J){if(J.eat(91)){if(J.eat(94),this.regexp_classRanges(J),J.eat(93))return!0;J.raise("Unterminated character class")}return!1},Zr.regexp_classRanges=function(J){for(;this.regexp_eatClassAtom(J);){var Ct=J.lastIntValue;if(J.eat(45)&&this.regexp_eatClassAtom(J)){var me=J.lastIntValue;J.switchU&&(Ct===-1||me===-1)&&J.raise("Invalid character class"),Ct!==-1&&me!==-1&&Ct>me&&J.raise("Range out of order in character class")}}},Zr.regexp_eatClassAtom=function(J){var Ct=J.pos;if(J.eat(92)){if(this.regexp_eatClassEscape(J))return!0;if(J.switchU){var me=J.current();(me===99||po(me))&&J.raise("Invalid class escape"),J.raise("Invalid escape")}J.pos=Ct}var jt=J.current();return jt!==93?(J.lastIntValue=jt,J.advance(),!0):!1},Zr.regexp_eatClassEscape=function(J){var Ct=J.pos;if(J.eat(98))return J.lastIntValue=8,!0;if(J.switchU&&J.eat(45))return J.lastIntValue=45,!0;if(!J.switchU&&J.eat(99)){if(this.regexp_eatClassControlLetter(J))return!0;J.pos=Ct}return this.regexp_eatCharacterClassEscape(J)||this.regexp_eatCharacterEscape(J)},Zr.regexp_eatClassControlLetter=function(J){var Ct=J.current();return ga(Ct)||Ct===95?(J.lastIntValue=Ct%32,J.advance(),!0):!1},Zr.regexp_eatHexEscapeSequence=function(J){var Ct=J.pos;if(J.eat(120)){if(this.regexp_eatFixedHexDigits(J,2))return!0;J.switchU&&J.raise("Invalid escape"),J.pos=Ct}return!1},Zr.regexp_eatDecimalDigits=function(J){var Ct=J.pos,me=0;for(J.lastIntValue=0;ga(me=J.current());)J.lastIntValue=10*J.lastIntValue+(me-48),J.advance();return J.pos!==Ct};function ga(J){return J>=48&&J<=57}Zr.regexp_eatHexDigits=function(J){var Ct=J.pos,me=0;for(J.lastIntValue=0;ko(me=J.current());)J.lastIntValue=16*J.lastIntValue+Ci(me),J.advance();return J.pos!==Ct};function ko(J){return J>=48&&J<=57||J>=65&&J<=70||J>=97&&J<=102}function Ci(J){return J>=65&&J<=70?10+(J-65):J>=97&&J<=102?10+(J-97):J-48}Zr.regexp_eatLegacyOctalEscapeSequence=function(J){if(this.regexp_eatOctalDigit(J)){var Ct=J.lastIntValue;if(this.regexp_eatOctalDigit(J)){var me=J.lastIntValue;Ct<=3&&this.regexp_eatOctalDigit(J)?J.lastIntValue=Ct*64+me*8+J.lastIntValue:J.lastIntValue=Ct*8+me}else J.lastIntValue=Ct;return!0}return!1},Zr.regexp_eatOctalDigit=function(J){var Ct=J.current();return po(Ct)?(J.lastIntValue=Ct-48,J.advance(),!0):(J.lastIntValue=0,!1)};function po(J){return J>=48&&J<=55}Zr.regexp_eatFixedHexDigits=function(J,Ct){var me=J.pos;J.lastIntValue=0;for(var jt=0;jt<Ct;++jt){var ke=J.current();if(!ko(ke))return J.pos=me,!1;J.lastIntValue=16*J.lastIntValue+Ci(ke),J.advance()}return!0};var oo=function(Ct){this.type=Ct.type,this.value=Ct.value,this.start=Ct.start,this.end=Ct.end,Ct.options.locations&&(this.loc=new rt(Ct,Ct.startLoc,Ct.endLoc)),Ct.options.ranges&&(this.range=[Ct.start,Ct.end])},cn=je.prototype;cn.next=function(J){!J&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new oo(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},cn.getToken=function(){return this.next(),new oo(this)},typeof Symbol!="undefined"&&(cn[Symbol.iterator]=function(){var J=this;return{next:function(){var Ct=J.getToken();return{done:Ct.type===lt.eof,value:Ct}}}}),cn.curContext=function(){return this.context[this.context.length-1]},cn.nextToken=function(){var J=this.curContext();if((!J||!J.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(lt.eof);if(J.override)return J.override(this);this.readToken(this.fullCharCodeAtPos())},cn.readToken=function(J){return k(J,this.options.ecmaVersion>=6)||J===92?this.readWord():this.getTokenFromCode(J)},cn.fullCharCodeAtPos=function(){var J=this.input.charCodeAt(this.pos);if(J<=55295||J>=57344)return J;var Ct=this.input.charCodeAt(this.pos+1);return(J<<10)+Ct-56613888},cn.skipBlockComment=function(){var J=this.options.onComment&&this.curPosition(),Ct=this.pos,me=this.input.indexOf("*/",this.pos+=2);if(me===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=me+2,this.options.locations){wt.lastIndex=Ct;for(var jt;(jt=wt.exec(this.input))&&jt.index<this.pos;)++this.curLine,this.lineStart=jt.index+jt[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(Ct+2,me),Ct,this.pos,J,this.curPosition())},cn.skipLineComment=function(J){for(var Ct=this.pos,me=this.options.onComment&&this.curPosition(),jt=this.input.charCodeAt(this.pos+=J);this.pos<this.input.length&&!Gt(jt);)jt=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(Ct+J,this.pos),Ct,this.pos,me,this.curPosition())},cn.skipSpace=function(){t:for(;this.pos<this.input.length;){var J=this.input.charCodeAt(this.pos);switch(J){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(J>8&&J<14||J>=5760&&re.test(String.fromCharCode(J)))++this.pos;else break t}}},cn.finishToken=function(J,Ct){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var me=this.type;this.type=J,this.value=Ct,this.updateContext(me)},cn.readToken_dot=function(){var J=this.input.charCodeAt(this.pos+1);if(J>=48&&J<=57)return this.readNumber(!0);var Ct=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&J===46&&Ct===46?(this.pos+=3,this.finishToken(lt.ellipsis)):(++this.pos,this.finishToken(lt.dot))},cn.readToken_slash=function(){var J=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):J===61?this.finishOp(lt.assign,2):this.finishOp(lt.slash,1)},cn.readToken_mult_modulo_exp=function(J){var Ct=this.input.charCodeAt(this.pos+1),me=1,jt=J===42?lt.star:lt.modulo;return this.options.ecmaVersion>=7&&J===42&&Ct===42&&(++me,jt=lt.starstar,Ct=this.input.charCodeAt(this.pos+2)),Ct===61?this.finishOp(lt.assign,me+1):this.finishOp(jt,me)},cn.readToken_pipe_amp=function(J){var Ct=this.input.charCodeAt(this.pos+1);if(Ct===J){if(this.options.ecmaVersion>=12){var me=this.input.charCodeAt(this.pos+2);if(me===61)return this.finishOp(lt.assign,3)}return this.finishOp(J===124?lt.logicalOR:lt.logicalAND,2)}return Ct===61?this.finishOp(lt.assign,2):this.finishOp(J===124?lt.bitwiseOR:lt.bitwiseAND,1)},cn.readToken_caret=function(){var J=this.input.charCodeAt(this.pos+1);return J===61?this.finishOp(lt.assign,2):this.finishOp(lt.bitwiseXOR,1)},cn.readToken_plus_min=function(J){var Ct=this.input.charCodeAt(this.pos+1);return Ct===J?Ct===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Lt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(lt.incDec,2):Ct===61?this.finishOp(lt.assign,2):this.finishOp(lt.plusMin,1)},cn.readToken_lt_gt=function(J){var Ct=this.input.charCodeAt(this.pos+1),me=1;return Ct===J?(me=J===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+me)===61?this.finishOp(lt.assign,me+1):this.finishOp(lt.bitShift,me)):Ct===33&&J===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(Ct===61&&(me=2),this.finishOp(lt.relational,me))},cn.readToken_eq_excl=function(J){var Ct=this.input.charCodeAt(this.pos+1);return Ct===61?this.finishOp(lt.equality,this.input.charCodeAt(this.pos+2)===61?3:2):J===61&&Ct===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(lt.arrow)):this.finishOp(J===61?lt.eq:lt.prefix,1)},cn.readToken_question=function(){var J=this.options.ecmaVersion;if(J>=11){var Ct=this.input.charCodeAt(this.pos+1);if(Ct===46){var me=this.input.charCodeAt(this.pos+2);if(me<48||me>57)return this.finishOp(lt.questionDot,2)}if(Ct===63){if(J>=12){var jt=this.input.charCodeAt(this.pos+2);if(jt===61)return this.finishOp(lt.assign,3)}return this.finishOp(lt.coalesce,2)}}return this.finishOp(lt.question,1)},cn.getTokenFromCode=function(J){switch(J){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(lt.parenL);case 41:return++this.pos,this.finishToken(lt.parenR);case 59:return++this.pos,this.finishToken(lt.semi);case 44:return++this.pos,this.finishToken(lt.comma);case 91:return++this.pos,this.finishToken(lt.bracketL);case 93:return++this.pos,this.finishToken(lt.bracketR);case 123:return++this.pos,this.finishToken(lt.braceL);case 125:return++this.pos,this.finishToken(lt.braceR);case 58:return++this.pos,this.finishToken(lt.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(lt.backQuote);case 48:var Ct=this.input.charCodeAt(this.pos+1);if(Ct===120||Ct===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(Ct===111||Ct===79)return this.readRadixNumber(8);if(Ct===98||Ct===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(J);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(J);case 124:case 38:return this.readToken_pipe_amp(J);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(J);case 60:case 62:return this.readToken_lt_gt(J);case 61:case 33:return this.readToken_eq_excl(J);case 63:return this.readToken_question();case 126:return this.finishOp(lt.prefix,1)}this.raise(this.pos,"Unexpected character '"+mo(J)+"'")},cn.finishOp=function(J,Ct){var me=this.input.slice(this.pos,this.pos+Ct);return this.pos+=Ct,this.finishToken(J,me)},cn.readRegexp=function(){for(var J,Ct,me=this.pos;;){this.pos>=this.input.length&&this.raise(me,"Unterminated regular expression");var jt=this.input.charAt(this.pos);if(Lt.test(jt)&&this.raise(me,"Unterminated regular expression"),J)J=!1;else{if(jt==="[")Ct=!0;else if(jt==="]"&&Ct)Ct=!1;else if(jt==="/"&&!Ct)break;J=jt==="\\"}++this.pos}var ke=this.input.slice(me,this.pos);++this.pos;var ir=this.pos,Gr=this.readWord1();this.containsEsc&&this.unexpected(ir);var pn=this.regexpState||(this.regexpState=new tn(this));pn.reset(me,ke,Gr),this.validateRegExpFlags(pn),this.validateRegExpPattern(pn);var dn=null;try{dn=new RegExp(ke,Gr)}catch(ti){}return this.finishToken(lt.regexp,{pattern:ke,flags:Gr,value:dn})},cn.readInt=function(J,Ct,me){for(var jt=this.options.ecmaVersion>=12&&Ct===void 0,ke=me&&this.input.charCodeAt(this.pos)===48,ir=this.pos,Gr=0,pn=0,dn=0,ti=Ct==null?Infinity:Ct;dn<ti;++dn,++this.pos){var Nn=this.input.charCodeAt(this.pos),Fa=void 0;if(jt&&Nn===95){ke&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),pn===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),dn===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),pn=Nn;continue}if(Nn>=97?Fa=Nn-97+10:Nn>=65?Fa=Nn-65+10:Nn>=48&&Nn<=57?Fa=Nn-48:Fa=Infinity,Fa>=J)break;pn=Nn,Gr=Gr*J+Fa}return jt&&pn===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ir||Ct!=null&&this.pos-ir!==Ct?null:Gr};function vn(J,Ct){return Ct?parseInt(J,8):parseFloat(J.replace(/_/g,""))}function Wo(J){return typeof BigInt!="function"?null:BigInt(J.replace(/_/g,""))}cn.readRadixNumber=function(J){var Ct=this.pos;this.pos+=2;var me=this.readInt(J);return me==null&&this.raise(this.start+2,"Expected number in radix "+J),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(me=Wo(this.input.slice(Ct,this.pos)),++this.pos):k(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(lt.num,me)},cn.readNumber=function(J){var Ct=this.pos;!J&&this.readInt(10,void 0,!0)===null&&this.raise(Ct,"Invalid number");var me=this.pos-Ct>=2&&this.input.charCodeAt(Ct)===48;me&&this.strict&&this.raise(Ct,"Invalid number");var jt=this.input.charCodeAt(this.pos);if(!me&&!J&&this.options.ecmaVersion>=11&&jt===110){var ke=Wo(this.input.slice(Ct,this.pos));return++this.pos,k(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(lt.num,ke)}me&&/[89]/.test(this.input.slice(Ct,this.pos))&&(me=!1),jt===46&&!me&&(++this.pos,this.readInt(10),jt=this.input.charCodeAt(this.pos)),(jt===69||jt===101)&&!me&&(jt=this.input.charCodeAt(++this.pos),(jt===43||jt===45)&&++this.pos,this.readInt(10)===null&&this.raise(Ct,"Invalid number")),k(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ir=vn(this.input.slice(Ct,this.pos),me);return this.finishToken(lt.num,ir)},cn.readCodePoint=function(){var J=this.input.charCodeAt(this.pos),Ct;if(J===123){this.options.ecmaVersion<6&&this.unexpected();var me=++this.pos;Ct=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,Ct>1114111&&this.invalidStringToken(me,"Code point out of bounds")}else Ct=this.readHexChar(4);return Ct};function mo(J){return J<=65535?String.fromCharCode(J):(J-=65536,String.fromCharCode((J>>10)+55296,(J&1023)+56320))}cn.readString=function(J){for(var Ct="",me=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var jt=this.input.charCodeAt(this.pos);if(jt===J)break;jt===92?(Ct+=this.input.slice(me,this.pos),Ct+=this.readEscapedChar(!1),me=this.pos):(Gt(jt,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return Ct+=this.input.slice(me,this.pos++),this.finishToken(lt.string,Ct)};var fo={};cn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(J){if(J===fo)this.readInvalidTemplateToken();else throw J}this.inTemplateElement=!1},cn.invalidStringToken=function(J,Ct){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw fo;this.raise(J,Ct)},cn.readTmplToken=function(){for(var J="",Ct=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var me=this.input.charCodeAt(this.pos);if(me===96||me===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===lt.template||this.type===lt.invalidTemplate)?me===36?(this.pos+=2,this.finishToken(lt.dollarBraceL)):(++this.pos,this.finishToken(lt.backQuote)):(J+=this.input.slice(Ct,this.pos),this.finishToken(lt.template,J));if(me===92)J+=this.input.slice(Ct,this.pos),J+=this.readEscapedChar(!0),Ct=this.pos;else if(Gt(me)){switch(J+=this.input.slice(Ct,this.pos),++this.pos,me){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:J+=`
`;break;default:J+=String.fromCharCode(me);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),Ct=this.pos}else++this.pos}},cn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(lt.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},cn.readEscapedChar=function(J){var Ct=this.input.charCodeAt(++this.pos);switch(++this.pos,Ct){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return mo(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(J){var me=this.pos-1;return this.invalidStringToken(me,"Invalid escape sequence in template string"),null}default:if(Ct>=48&&Ct<=55){var jt=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ke=parseInt(jt,8);return ke>255&&(jt=jt.slice(0,-1),ke=parseInt(jt,8)),this.pos+=jt.length-1,Ct=this.input.charCodeAt(this.pos),(jt!=="0"||Ct===56||Ct===57)&&(this.strict||J)&&this.invalidStringToken(this.pos-1-jt.length,J?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ke)}return Gt(Ct)?"":String.fromCharCode(Ct)}},cn.readHexChar=function(J){var Ct=this.pos,me=this.readInt(16,J);return me===null&&this.invalidStringToken(Ct,"Bad character escape sequence"),me},cn.readWord1=function(){this.containsEsc=!1;for(var J="",Ct=!0,me=this.pos,jt=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ke=this.fullCharCodeAtPos();if(V(ke,jt))this.pos+=ke<=65535?1:2;else if(ke===92){this.containsEsc=!0,J+=this.input.slice(me,this.pos);var ir=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Gr=this.readCodePoint();(Ct?k:V)(Gr,jt)||this.invalidStringToken(ir,"Invalid Unicode escape"),J+=mo(Gr),me=this.pos}else break;Ct=!1}return J+this.input.slice(me,this.pos)},cn.readWord=function(){var J=this.readWord1(),Ct=lt.name;return this.keywords.test(J)&&(Ct=_t[J]),this.finishToken(Ct,J)};var Po="7.4.1";je.acorn={Parser:je,version:Po,defaultOptions:d,Position:nt,SourceLocation:rt,getLineInfo:st,Node:We,TokenType:X,tokTypes:lt,keywordTypes:_t,TokContext:qr,tokContexts:nn,isIdentifierChar:V,isIdentifierStart:k,Token:oo,isNewLine:Gt,lineBreak:Lt,lineBreakG:wt,nonASCIIwhitespace:re};function vi(J,Ct){return je.parse(J,Ct)}function pa(J,Ct,me){return je.parseExpressionAt(J,Ct,me)}function An(J,Ct){return je.tokenizer(J,Ct)}function Pe(J,Ct){J.prototype=Object.create(Ct.prototype),J.prototype.constructor=J,J.__proto__=Ct}function Tt(J){var Ct=typeof Map=="function"?new Map:void 0;return Tt=function(jt){if(jt===null||!zt(jt))return jt;if(typeof jt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ct!="undefined"){if(Ct.has(jt))return Ct.get(jt);Ct.set(jt,ke)}function ke(){return he(jt,arguments,de(this).constructor)}return ke.prototype=Object.create(jt.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),Wt(ke,jt)},Tt(J)}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(J){return!1}}function he(J,Ct,me){return ae()?he=Reflect.construct:he=function(ke,ir,Gr){var pn=[null];pn.push.apply(pn,ir);var dn=Function.bind.apply(ke,pn),ti=new dn;return Gr&&Wt(ti,Gr.prototype),ti},he.apply(null,arguments)}function zt(J){return Function.toString.call(J).indexOf("[native code]")!==-1}function Wt(J,Ct){return Wt=Object.setPrototypeOf||function(jt,ke){return jt.__proto__=ke,jt},Wt(J,Ct)}function de(J){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)},de(J)}var Se=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Tt(Error)),Ae=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Tt(SyntaxError)),He=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Tt(ReferenceError)),_r=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Tt(TypeError)),Lr=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Se),wn=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(Ae),Kr=function(J){Pe(Ct,J);function Ct(){return J.apply(this,arguments)||this}return Ct}(He),Fr={UnknownError:[3001,"%0",Lr],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Lr],NodeTypeSyntaxError:[1001,"Unknown node type: %0",Kr],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",Kr],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",Kr],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",Kr],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",Kr],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",Kr],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",Kr],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",Kr],ParamTypeSyntaxError:[1009,"Unknown param type: %0",Kr],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",Kr],FunctionUndefinedReferenceError:[2001,"%0 is not a function",He],VariableUndefinedReferenceError:[2002,"%0 is not defined",He],IsNotConstructor:[2003,"%0 is not a constructor",_r]};function pi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(J){return!1}}function Pi(J,Ct,me){return pi()?Pi=Reflect.construct:Pi=function(ke,ir,Gr){var pn=[null];pn.push.apply(pn,ir);var dn=Function.bind.apply(ke,pn),ti=new dn;return Gr&&ca(ti,Gr.prototype),ti},Pi.apply(null,arguments)}function ca(J,Ct){return ca=Object.setPrototypeOf||function(jt,ke){return jt.__proto__=ke,jt},ca(J,Ct)}var va="0.0.3";function ji(J,Ct){Object.defineProperty(J,"name",{value:Ct,writable:!1,enumerable:!1,configurable:!0})}var ai=Object.prototype.hasOwnProperty,Fe=Symbol("Break"),er=Symbol("Continue"),Ir=Symbol("DefaultCase"),hn=Symbol("EmptyStatementReturn"),ci=Symbol("WithScopeName"),wa=Symbol("SuperScopeName"),no=Symbol("RootScopeName"),ls=Symbol("GlobalScopeName");function Jo(J){return typeof J=="function"}var ps=function(){function J(me){this.interpreter=me}var Ct=J.prototype;return Ct.generator=function(){var jt=this.interpreter;function ke(){return this.getCurrentScope()}function ir(){return this.getGlobalScope()}function Gr(){return this.getCurrentContext()}return{getOptions:jt.getOptions.bind(jt),getCurrentScope:ke.bind(jt),getGlobalScope:ir.bind(jt),getCurrentContext:Gr.bind(jt),getExecStartTime:jt.getExecStartTime.bind(jt)}},J}();function Ks(J,Ct,me){if(me===void 0&&(me=!0),!(J instanceof ps))throw new Error("Illegal call");if(typeof Ct!="string")return Ct;if(!!Ct){var jt=J.generator(),ke=jt.getOptions(),ir={timeout:ke.timeout,_initEnv:function(){me||this.setCurrentContext(jt.getCurrentContext()),this.execStartTime=jt.getExecStartTime(),this.execEndTime=this.execStartTime}},Gr=me?jt.getGlobalScope():jt.getCurrentScope(),pn=new Ko(Gr,ir);return pn.evaluate(Ct)}}Object.defineProperty(Ks,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function Fo(J){if(!(J instanceof ps))throw new Error("Illegal call");for(var Ct=J.generator(),me=arguments.length,jt=new Array(me>1?me-1:0),ke=1;ke<me;ke++)jt[ke-1]=arguments[ke];var ir=jt.pop(),Gr=new Ko(Ct.getGlobalScope(),Ct.getOptions()),pn=`
		    (function anonymous(`+jt.join(",")+`){
		        `+ir+`
		    });
		    `;return Gr.evaluate(pn)}Object.defineProperty(Fo,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var Vs=function(Ct){this.value=Ct},$s=function(Ct){this.value=Ct},zs=function(Ct){this.value=Ct},Ou=function(Ct,me,jt){me===void 0&&(me=null),this.name=jt,this.parent=me,this.data=Ct,this.labelStack=[]};function au(){}function Vu(J,Ct){return J===void 0&&(J=null),new Ou(Object.create(null),J,Ct)}function ou(J){return Object.create(J)}var ds={NaN:NaN,Infinity:Infinity,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:Ks,Function:Fo};typeof JSON!="undefined"&&(ds.JSON=JSON),typeof Promise!="undefined"&&(ds.Promise=Promise),typeof Set!="undefined"&&(ds.Set=Set),typeof Map!="undefined"&&(ds.Map=Map),typeof Symbol!="undefined"&&(ds.Symbol=Symbol),typeof Proxy!="undefined"&&(ds.Proxy=Proxy),typeof WeakMap!="undefined"&&(ds.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(ds.WeakSet=WeakSet),typeof Reflect!="undefined"&&(ds.Reflect=Reflect);var Ko=function(){function J(me,jt){me===void 0&&(me=J.global),jt===void 0&&(jt={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:jt.ecmaVersion||J.ecmaVersion,timeout:jt.timeout||0,rootContext:jt.rootContext,globalContextInFunction:jt.globalContextInFunction===void 0?J.globalContextInFunction:jt.globalContextInFunction,_initEnv:jt._initEnv},this.context=me||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var Ct=J.prototype;return Ct.initEnvironment=function(jt){var ke;if(jt instanceof Ou)ke=jt;else{var ir=null,Gr=this.createSuperScope(jt);this.options.rootContext&&(ir=new Ou(ou(this.options.rootContext),Gr,no)),ke=new Ou(jt,ir||Gr,ls)}this.globalScope=ke,this.currentScope=this.globalScope,this.globalContext=ke.data,this.currentContext=ke.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var pn=this.options._initEnv;pn&&pn.call(this)},Ct.getExecStartTime=function(){return this.execStartTime},Ct.getExecutionTime=function(){return this.execEndTime-this.execStartTime},Ct.setExecTimeout=function(jt){jt===void 0&&(jt=0),this.options.timeout=jt},Ct.getOptions=function(){return this.options},Ct.getGlobalScope=function(){return this.globalScope},Ct.getCurrentScope=function(){return this.currentScope},Ct.getCurrentContext=function(){return this.currentContext},Ct.isInterruptThrow=function(jt){return jt instanceof Lr||jt instanceof Kr||jt instanceof wn},Ct.createSuperScope=function(jt){var ke=Object.assign({},ds),ir=Object.keys(ke);return ir.forEach(function(Gr){Gr in jt&&delete ke[Gr]}),new Ou(ke,null,wa)},Ct.setCurrentContext=function(jt){this.currentContext=jt},Ct.setCurrentScope=function(jt){this.currentScope=jt},Ct.evaluate=function(jt){jt===void 0&&(jt="");var ke;if(!!jt)return ke=vi(jt,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||J.ecmaVersion}),this.evaluateNode(ke,jt)},Ct.appendCode=function(jt){return this.evaluate(jt)},Ct.evaluateNode=function(jt,ke){var ir=this;ke===void 0&&(ke=""),this.value=void 0,this.source=ke,this.sourceList.push(ke),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Gr=this.getCurrentScope(),pn=this.getCurrentContext(),dn=Gr.labelStack.concat([]),ti=this.callStack.concat([]),Nn=function(){ir.setCurrentScope(Gr),ir.setCurrentContext(pn),Gr.labelStack=dn,ir.callStack=ti};try{var Fa=this.createClosure(jt);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),Fa()}catch(Xa){throw Xa}finally{Nn(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},Ct.createErrorMessage=function(jt,ke,ir){var Gr=jt[1].replace("%0",String(ke));return ir!==null&&(Gr+=this.getNodePosition(ir||this.lastExecNode)),Gr},Ct.createError=function(jt,ke){return new ke(jt)},Ct.createThrowError=function(jt,ke){return this.createError(jt,ke)},Ct.createInternalThrowError=function(jt,ke,ir){return this.createError(this.createErrorMessage(jt,ke,ir),jt[2])},Ct.checkTimeout=function(){if(!this.isRunning)return!1;var jt=this.options.timeout||0,ke=Date.now();return ke-this.execStartTime>jt},Ct.getNodePosition=function(jt){if(jt){var ke="";return jt.loc?" ["+jt.loc.start.line+":"+jt.loc.start.column+"]"+ke:""}return""},Ct.createClosure=function(jt){var ke=this,ir;switch(jt.type){case"BinaryExpression":ir=this.binaryExpressionHandler(jt);break;case"LogicalExpression":ir=this.logicalExpressionHandler(jt);break;case"UnaryExpression":ir=this.unaryExpressionHandler(jt);break;case"UpdateExpression":ir=this.updateExpressionHandler(jt);break;case"ObjectExpression":ir=this.objectExpressionHandler(jt);break;case"ArrayExpression":ir=this.arrayExpressionHandler(jt);break;case"CallExpression":ir=this.callExpressionHandler(jt);break;case"NewExpression":ir=this.newExpressionHandler(jt);break;case"MemberExpression":ir=this.memberExpressionHandler(jt);break;case"ThisExpression":ir=this.thisExpressionHandler(jt);break;case"SequenceExpression":ir=this.sequenceExpressionHandler(jt);break;case"Literal":ir=this.literalHandler(jt);break;case"Identifier":ir=this.identifierHandler(jt);break;case"AssignmentExpression":ir=this.assignmentExpressionHandler(jt);break;case"FunctionDeclaration":ir=this.functionDeclarationHandler(jt);break;case"VariableDeclaration":ir=this.variableDeclarationHandler(jt);break;case"BlockStatement":case"Program":ir=this.programHandler(jt);break;case"ExpressionStatement":ir=this.expressionStatementHandler(jt);break;case"EmptyStatement":ir=this.emptyStatementHandler(jt);break;case"ReturnStatement":ir=this.returnStatementHandler(jt);break;case"FunctionExpression":ir=this.functionExpressionHandler(jt);break;case"IfStatement":ir=this.ifStatementHandler(jt);break;case"ConditionalExpression":ir=this.conditionalExpressionHandler(jt);break;case"ForStatement":ir=this.forStatementHandler(jt);break;case"WhileStatement":ir=this.whileStatementHandler(jt);break;case"DoWhileStatement":ir=this.doWhileStatementHandler(jt);break;case"ForInStatement":ir=this.forInStatementHandler(jt);break;case"WithStatement":ir=this.withStatementHandler(jt);break;case"ThrowStatement":ir=this.throwStatementHandler(jt);break;case"TryStatement":ir=this.tryStatementHandler(jt);break;case"ContinueStatement":ir=this.continueStatementHandler(jt);break;case"BreakStatement":ir=this.breakStatementHandler(jt);break;case"SwitchStatement":ir=this.switchStatementHandler(jt);break;case"LabeledStatement":ir=this.labeledStatementHandler(jt);break;case"DebuggerStatement":ir=this.debuggerStatementHandler(jt);break;default:throw this.createInternalThrowError(Fr.NodeTypeSyntaxError,jt.type,jt)}return function(){var Gr=ke.options.timeout;if(Gr&&Gr>0&&ke.checkTimeout())throw ke.createInternalThrowError(Fr.ExecutionTimeOutError,Gr,null);return ke.lastExecNode=jt,ir.apply(void 0,arguments)}},Ct.binaryExpressionHandler=function(jt){var ke=this,ir=this.createClosure(jt.left),Gr=this.createClosure(jt.right);return function(){var pn=ir(),dn=Gr();switch(jt.operator){case"==":return pn==dn;case"!=":return pn!=dn;case"===":return pn===dn;case"!==":return pn!==dn;case"<":return pn<dn;case"<=":return pn<=dn;case">":return pn>dn;case">=":return pn>=dn;case"<<":return pn<<dn;case">>":return pn>>dn;case">>>":return pn>>>dn;case"+":return pn+dn;case"-":return pn-dn;case"*":return pn*dn;case"**":return Math.pow(pn,dn);case"/":return pn/dn;case"%":return pn%dn;case"|":return pn|dn;case"^":return pn^dn;case"&":return pn&dn;case"in":return pn in dn;case"instanceof":return pn instanceof dn;default:throw ke.createInternalThrowError(Fr.BinaryOperatorSyntaxError,jt.operator,jt)}}},Ct.logicalExpressionHandler=function(jt){var ke=this,ir=this.createClosure(jt.left),Gr=this.createClosure(jt.right);return function(){switch(jt.operator){case"||":return ir()||Gr();case"&&":return ir()&&Gr();default:throw ke.createInternalThrowError(Fr.LogicalOperatorSyntaxError,jt.operator,jt)}}},Ct.unaryExpressionHandler=function(jt){var ke=this;switch(jt.operator){case"delete":var ir=this.createObjectGetter(jt.argument),Gr=this.createNameGetter(jt.argument);return function(){var Nn=ir(),Fa=Gr();return delete Nn[Fa]};default:var pn;if(jt.operator==="typeof"&&jt.argument.type==="Identifier"){var dn=this.createObjectGetter(jt.argument),ti=this.createNameGetter(jt.argument);pn=function(){return dn()[ti()]}}else pn=this.createClosure(jt.argument);return function(){var Nn=pn();switch(jt.operator){case"-":return-Nn;case"+":return+Nn;case"!":return!Nn;case"~":return~Nn;case"void":return;case"typeof":return typeof Nn;default:throw ke.createInternalThrowError(Fr.UnaryOperatorSyntaxError,jt.operator,jt)}}}},Ct.updateExpressionHandler=function(jt){var ke=this,ir=this.createObjectGetter(jt.argument),Gr=this.createNameGetter(jt.argument);return function(){var pn=ir(),dn=Gr();switch(ke.assertVariable(pn,dn,jt),jt.operator){case"++":return jt.prefix?++pn[dn]:pn[dn]++;case"--":return jt.prefix?--pn[dn]:pn[dn]--;default:throw ke.createInternalThrowError(Fr.UpdateOperatorSyntaxError,jt.operator,jt)}}},Ct.objectExpressionHandler=function(jt){var ke=this,ir=[];function Gr(dn){return dn.type==="Identifier"?dn.name:dn.type==="Literal"?dn.value:this.throwError(Fr.ObjectStructureSyntaxError,dn.type,dn)}var pn=Object.create(null);return jt.properties.forEach(function(dn){var ti=dn.kind,Nn=Gr(dn.key);(!pn[Nn]||ti==="init")&&(pn[Nn]={}),pn[Nn][ti]=ke.createClosure(dn.value),ir.push({key:Nn,property:dn})}),function(){for(var dn={},ti=ir.length,Nn=0;Nn<ti;Nn++){var Fa=ir[Nn],Xa=Fa.key,Wi=pn[Xa],rs=Wi.init?Wi.init():void 0,io=Wi.get?Wi.get():function(){},Cs=Wi.set?Wi.set():function(Ot){};if("set"in Wi||"get"in Wi){var Ve={configurable:!0,enumerable:!0,get:io,set:Cs};Object.defineProperty(dn,Xa,Ve)}else{var pe=Fa.property,pt=pe.kind;pe.key.type==="Identifier"&&pe.value.type==="FunctionExpression"&&pt==="init"&&!pe.value.id&&ji(rs,pe.key.name),dn[Xa]=rs}}return dn}},Ct.arrayExpressionHandler=function(jt){var ke=this,ir=jt.elements.map(function(Gr){return Gr&&ke.createClosure(Gr)});return function(){for(var Gr=ir.length,pn=Array(Gr),dn=0;dn<Gr;dn++){var ti=ir[dn];ti&&(pn[dn]=ti())}return pn}},Ct.safeObjectGet=function(jt,ke,ir){return jt[ke]},Ct.createCallFunctionGetter=function(jt){var ke=this;switch(jt.type){case"MemberExpression":var ir=this.createClosure(jt.object),Gr=this.createMemberKeyGetter(jt),pn=this.source;return function(){var ti=ir(),Nn=Gr(),Fa=ke.safeObjectGet(ti,Nn,jt);if(!Fa||!Jo(Fa)){var Xa=pn.slice(jt.start,jt.end);throw ke.createInternalThrowError(Fr.FunctionUndefinedReferenceError,Xa,jt)}return Fa.__IS_EVAL_FUNC?function(Wi){return Fa(new ps(ke),Wi,!0)}:Fa.__IS_FUNCTION_FUNC?function(){for(var Wi=arguments.length,rs=new Array(Wi),io=0;io<Wi;io++)rs[io]=arguments[io];return Fa.apply(void 0,[new ps(ke)].concat(rs))}:Fa.bind(ti)};default:var dn=this.createClosure(jt);return function(){var ti="";jt.type==="Identifier"&&(ti=jt.name);var Nn=dn();if(!Nn||!Jo(Nn))throw ke.createInternalThrowError(Fr.FunctionUndefinedReferenceError,ti,jt);if(jt.type==="Identifier"&&Nn.__IS_EVAL_FUNC&&ti==="eval")return function(Wi){var rs=ke.getScopeFromName(ti,ke.getCurrentScope()),io=rs.name===wa||rs.name===ls||rs.name===no;return Nn(new ps(ke),Wi,!io)};if(Nn.__IS_EVAL_FUNC)return function(Wi){return Nn(new ps(ke),Wi,!0)};if(Nn.__IS_FUNCTION_FUNC)return function(){for(var Wi=arguments.length,rs=new Array(Wi),io=0;io<Wi;io++)rs[io]=arguments[io];return Nn.apply(void 0,[new ps(ke)].concat(rs))};var Fa=ke.options.globalContextInFunction;if(jt.type==="Identifier"){var Xa=ke.getIdentifierScope(jt);Xa.name===ci&&(Fa=Xa.data)}return Nn.bind(Fa)}}},Ct.callExpressionHandler=function(jt){var ke=this,ir=this.createCallFunctionGetter(jt.callee),Gr=jt.arguments.map(function(pn){return ke.createClosure(pn)});return function(){return ir().apply(void 0,Gr.map(function(pn){return pn()}))}},Ct.functionExpressionHandler=function(jt){var ke=this,ir=this,Gr=this.source,pn=this.collectDeclVars,dn=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var ti=jt.id?jt.id.name:"",Nn=jt.params.length,Fa=jt.params.map(function(io){return ke.createParamNameGetter(io)}),Xa=this.createClosure(jt.body),Wi=this.collectDeclVars,rs=this.collectDeclFuncs;return this.collectDeclVars=pn,this.collectDeclFuncs=dn,function(){var io=ir.getCurrentScope(),Cs=function Ve(){for(var pe=arguments.length,pt=new Array(pe),Ot=0;Ot<pe;Ot++)pt[Ot]=arguments[Ot];ir.callStack.push(""+ti);var ee=ir.getCurrentScope(),ye=Vu(io,"FunctionScope("+ti+")");ir.setCurrentScope(ye),ir.addDeclarationsToScope(Wi,rs,ye),ti&&(ye.data[ti]=Ve),ye.data.arguments=arguments,Fa.forEach(function(hr,Er){ye.data[hr()]=pt[Er]});var Ne=ir.getCurrentContext();ir.setCurrentContext(this);var Ye=Xa();if(ir.setCurrentContext(Ne),ir.setCurrentScope(ee),ir.callStack.pop(),Ye instanceof Vs)return Ye.value};return ji(Cs,ti),Object.defineProperty(Cs,"length",{value:Nn,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(Cs,"toString",{value:function(){return Gr.slice(jt.start,jt.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Cs,"valueOf",{value:function(){return Gr.slice(jt.start,jt.end)},writable:!0,configurable:!0,enumerable:!1}),Cs}},Ct.newExpressionHandler=function(jt){var ke=this,ir=this.source,Gr=this.createClosure(jt.callee),pn=jt.arguments.map(function(dn){return ke.createClosure(dn)});return function(){var dn=Gr();if(!Jo(dn)||dn.__IS_EVAL_FUNC){var ti=jt.callee,Nn=ir.slice(ti.start,ti.end);throw ke.createInternalThrowError(Fr.IsNotConstructor,Nn,jt)}return dn.__IS_FUNCTION_FUNC?dn.apply(void 0,[new ps(ke)].concat(pn.map(function(Fa){return Fa()}))):Pi(dn,pn.map(function(Fa){return Fa()}))}},Ct.memberExpressionHandler=function(jt){var ke=this.createClosure(jt.object),ir=this.createMemberKeyGetter(jt);return function(){var Gr=ke(),pn=ir();return Gr[pn]}},Ct.thisExpressionHandler=function(jt){var ke=this;return function(){return ke.getCurrentContext()}},Ct.sequenceExpressionHandler=function(jt){var ke=this,ir=jt.expressions.map(function(Gr){return ke.createClosure(Gr)});return function(){for(var Gr,pn=ir.length,dn=0;dn<pn;dn++){var ti=ir[dn];Gr=ti()}return Gr}},Ct.literalHandler=function(jt){return function(){return jt.regex?new RegExp(jt.regex.pattern,jt.regex.flags):jt.value}},Ct.identifierHandler=function(jt){var ke=this;return function(){var ir=ke.getCurrentScope(),Gr=ke.getScopeDataFromName(jt.name,ir);return ke.assertVariable(Gr,jt.name,jt),Gr[jt.name]}},Ct.getIdentifierScope=function(jt){var ke=this.getCurrentScope(),ir=this.getScopeFromName(jt.name,ke);return ir},Ct.assignmentExpressionHandler=function(jt){var ke=this;jt.left.type==="Identifier"&&jt.right.type==="FunctionExpression"&&!jt.right.id&&(jt.right.id={type:"Identifier",name:jt.left.name});var ir=this.createObjectGetter(jt.left),Gr=this.createNameGetter(jt.left),pn=this.createClosure(jt.right);return function(){var dn=ir(),ti=Gr(),Nn=pn();switch(jt.operator!=="="&&ke.assertVariable(dn,ti,jt),jt.operator){case"=":return dn[ti]=Nn;case"+=":return dn[ti]+=Nn;case"-=":return dn[ti]-=Nn;case"*=":return dn[ti]*=Nn;case"**=":return dn[ti]=Math.pow(dn[ti],Nn);case"/=":return dn[ti]/=Nn;case"%=":return dn[ti]%=Nn;case"<<=":return dn[ti]<<=Nn;case">>=":return dn[ti]>>=Nn;case">>>=":return dn[ti]>>>=Nn;case"&=":return dn[ti]&=Nn;case"^=":return dn[ti]^=Nn;case"|=":return dn[ti]|=Nn;default:throw ke.createInternalThrowError(Fr.AssignmentExpressionSyntaxError,jt.type,jt)}}},Ct.functionDeclarationHandler=function(jt){if(jt.id){var ke=this.functionExpressionHandler(jt);Object.defineProperty(ke,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(jt.id.name,ke)}return function(){return hn}},Ct.getVariableName=function(jt){if(jt.type==="Identifier")return jt.name;throw this.createInternalThrowError(Fr.VariableTypeSyntaxError,jt.type,jt)},Ct.variableDeclarationHandler=function(jt){for(var ke=this,ir,Gr=[],pn=0;pn<jt.declarations.length;pn++){var dn=jt.declarations[pn];this.varDeclaration(this.getVariableName(dn.id)),dn.init&&Gr.push({type:"AssignmentExpression",operator:"=",left:dn.id,right:dn.init})}return Gr.length&&(ir=this.createClosure({type:"BlockStatement",body:Gr})),function(){if(ir){var ti=ke.isVarDeclMode;ke.isVarDeclMode=!0,ir(),ke.isVarDeclMode=ti}return hn}},Ct.assertVariable=function(jt,ke,ir){if(jt===this.globalScope.data&&!(ke in jt))throw this.createInternalThrowError(Fr.VariableUndefinedReferenceError,ke,ir)},Ct.programHandler=function(jt){var ke=this,ir=jt.body.map(function(Gr){return ke.createClosure(Gr)});return function(){for(var Gr=hn,pn=0;pn<ir.length;pn++){var dn=ir[pn],ti=ke.setValue(dn());if(ti!==hn&&(Gr=ti,Gr instanceof Vs||Gr instanceof $s||Gr instanceof zs||Gr===Fe||Gr===er))break}return Gr}},Ct.expressionStatementHandler=function(jt){return this.createClosure(jt.expression)},Ct.emptyStatementHandler=function(jt){return function(){return hn}},Ct.returnStatementHandler=function(jt){var ke=jt.argument?this.createClosure(jt.argument):au;return function(){return new Vs(ke())}},Ct.ifStatementHandler=function(jt){var ke=this.createClosure(jt.test),ir=this.createClosure(jt.consequent),Gr=jt.alternate?this.createClosure(jt.alternate):function(){return hn};return function(){return ke()?ir():Gr()}},Ct.conditionalExpressionHandler=function(jt){return this.ifStatementHandler(jt)},Ct.forStatementHandler=function(jt){var ke=this,ir=au,Gr=jt.test?this.createClosure(jt.test):function(){return!0},pn=au,dn=this.createClosure(jt.body);return jt.type==="ForStatement"&&(ir=jt.init?this.createClosure(jt.init):ir,pn=jt.update?this.createClosure(jt.update):au),function(ti){var Nn,Fa=hn,Xa=jt.type==="DoWhileStatement";for(ti&&ti.type==="LabeledStatement"&&(Nn=ti.label.name),ir();Xa||Gr();pn()){Xa=!1;var Wi=ke.setValue(dn());if(!(Wi===hn||Wi===er)){if(Wi===Fe)break;if(Fa=Wi,Fa instanceof zs&&Fa.value===Nn){Fa=hn;continue}if(Fa instanceof Vs||Fa instanceof $s||Fa instanceof zs)break}}return Fa}},Ct.whileStatementHandler=function(jt){return this.forStatementHandler(jt)},Ct.doWhileStatementHandler=function(jt){return this.forStatementHandler(jt)},Ct.forInStatementHandler=function(jt){var ke=this,ir=jt.left,Gr=this.createClosure(jt.right),pn=this.createClosure(jt.body);return jt.left.type==="VariableDeclaration"&&(this.createClosure(jt.left)(),ir=jt.left.declarations[0].id),function(dn){var ti,Nn=hn,Fa;dn&&dn.type==="LabeledStatement"&&(ti=dn.label.name);var Xa=Gr();for(Fa in Xa){ke.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:ir,right:{type:"Literal",value:Fa}})();var Wi=ke.setValue(pn());if(!(Wi===hn||Wi===er)){if(Wi===Fe)break;if(Nn=Wi,Nn instanceof zs&&Nn.value===ti){Nn=hn;continue}if(Nn instanceof Vs||Nn instanceof $s||Nn instanceof zs)break}}return Nn}},Ct.withStatementHandler=function(jt){var ke=this,ir=this.createClosure(jt.object),Gr=this.createClosure(jt.body);return function(){var pn=ir(),dn=ke.getCurrentScope(),ti=new Ou(pn,dn,ci);ke.setCurrentScope(ti);var Nn=ke.setValue(Gr());return ke.setCurrentScope(dn),Nn}},Ct.throwStatementHandler=function(jt){var ke=this,ir=this.createClosure(jt.argument);return function(){throw ke.setValue(void 0),ir()}},Ct.tryStatementHandler=function(jt){var ke=this,ir=this.createClosure(jt.block),Gr=jt.handler?this.catchClauseHandler(jt.handler):null,pn=jt.finalizer?this.createClosure(jt.finalizer):null;return function(){var dn=ke.getCurrentScope(),ti=ke.getCurrentContext(),Nn=dn.labelStack.concat([]),Fa=ke.callStack.concat([]),Xa=hn,Wi,rs,io=function(){ke.setCurrentScope(dn),ke.setCurrentContext(ti),dn.labelStack=Nn,ke.callStack=Fa};try{Xa=ke.setValue(ir()),Xa instanceof Vs&&(Wi=Xa)}catch(Cs){if(io(),ke.isInterruptThrow(Cs))throw Cs;if(Gr)try{Xa=ke.setValue(Gr(Cs)),Xa instanceof Vs&&(Wi=Xa)}catch(Ve){if(io(),ke.isInterruptThrow(Ve))throw Ve;rs=Ve}}if(pn)try{Xa=pn(),Xa instanceof Vs&&(Wi=Xa)}catch(Cs){if(io(),ke.isInterruptThrow(Cs))throw Cs;rs=Cs}if(rs)throw rs;return Wi||Xa}},Ct.catchClauseHandler=function(jt){var ke=this,ir=this.createParamNameGetter(jt.param),Gr=this.createClosure(jt.body);return function(pn){var dn,ti=ke.getCurrentScope(),Nn=ti.data,Fa=ir(),Xa=ai.call(Nn,Fa),Wi=Nn[Fa];return Nn[Fa]=pn,dn=Gr(),Xa?Nn[Fa]=Wi:delete Nn[Fa],dn}},Ct.continueStatementHandler=function(jt){return function(){return jt.label?new zs(jt.label.name):er}},Ct.breakStatementHandler=function(jt){return function(){return jt.label?new $s(jt.label.name):Fe}},Ct.switchStatementHandler=function(jt){var ke=this,ir=this.createClosure(jt.discriminant),Gr=jt.cases.map(function(pn){return ke.switchCaseHandler(pn)});return function(){for(var pn=ir(),dn=!1,ti,Nn,Fa,Xa=0;Xa<Gr.length;Xa++){var Wi=Gr[Xa](),rs=Wi.testClosure();if(rs===Ir){Fa=Wi;continue}if(dn||rs===pn){if(dn=!0,Nn=ke.setValue(Wi.bodyClosure()),Nn===hn)continue;if(Nn===Fe||(ti=Nn,ti instanceof Vs||ti instanceof $s||ti instanceof zs||ti===er))break}}if(!dn&&Fa){Nn=ke.setValue(Fa.bodyClosure());var io=Nn===hn||Nn===Fe||Nn===er;io||(ti=Nn)}return ti}},Ct.switchCaseHandler=function(jt){var ke=jt.test?this.createClosure(jt.test):function(){return Ir},ir=this.createClosure({type:"BlockStatement",body:jt.consequent});return function(){return{testClosure:ke,bodyClosure:ir}}},Ct.labeledStatementHandler=function(jt){var ke=this,ir=jt.label.name,Gr=this.createClosure(jt.body);return function(){var pn,dn=ke.getCurrentScope();return dn.labelStack.push(ir),pn=Gr(jt),pn instanceof $s&&pn.value===ir&&(pn=hn),dn.labelStack.pop(),pn}},Ct.debuggerStatementHandler=function(jt){return function(){debugger;return hn}},Ct.createParamNameGetter=function(jt){if(jt.type==="Identifier")return function(){return jt.name};throw this.createInternalThrowError(Fr.ParamTypeSyntaxError,jt.type,jt)},Ct.createObjectKeyGetter=function(jt){var ke;return jt.type==="Identifier"?ke=function(){return jt.name}:ke=this.createClosure(jt),function(){return ke()}},Ct.createMemberKeyGetter=function(jt){return jt.computed?this.createClosure(jt.property):this.createObjectKeyGetter(jt.property)},Ct.createObjectGetter=function(jt){var ke=this;switch(jt.type){case"Identifier":return function(){return ke.getScopeDataFromName(jt.name,ke.getCurrentScope())};case"MemberExpression":return this.createClosure(jt.object);default:throw this.createInternalThrowError(Fr.AssignmentTypeSyntaxError,jt.type,jt)}},Ct.createNameGetter=function(jt){switch(jt.type){case"Identifier":return function(){return jt.name};case"MemberExpression":return this.createMemberKeyGetter(jt);default:throw this.createInternalThrowError(Fr.AssignmentTypeSyntaxError,jt.type,jt)}},Ct.varDeclaration=function(jt){var ke=this.collectDeclVars;ke[jt]=void 0},Ct.funcDeclaration=function(jt,ke){var ir=this.collectDeclFuncs;ir[jt]=ke},Ct.addDeclarationsToScope=function(jt,ke,ir){var Gr=ir.data;for(var pn in ke){var dn=ke[pn];Gr[pn]=dn&&dn()}for(var ti in jt)ti in Gr||(Gr[ti]=void 0)},Ct.getScopeValue=function(jt,ke){var ir=this.getScopeFromName(jt,ke);return ir.data[jt]},Ct.getScopeDataFromName=function(jt,ke){return this.getScopeFromName(jt,ke).data},Ct.getScopeFromName=function(jt,ke){var ir=ke;do if(jt in ir.data)return ir;while(ir=ir.parent);return this.globalScope},Ct.setValue=function(jt){var ke=this.callStack.length;return this.isVarDeclMode||ke||jt===hn||jt===Fe||jt===er||jt instanceof $s||jt instanceof zs||(this.value=jt instanceof Vs?jt.value:jt),jt},Ct.getValue=function(){return this.value},J}();Ko.version=va,Ko.eval=Ks,Ko.Function=Fo,Ko.ecmaVersion=5,Ko.globalContextInFunction=void 0,Ko.global=Object.create(null);function Lu(J){return J===void 0&&(J=Object.create(null)),J}function Gl(J,Ct,me){Ct===void 0&&(Ct=[]),me===void 0&&(me={});var jt=me.parsingContext,ke=me.timeout===void 0?0:me.timeout,ir=`
    (function anonymous(`+Ct.join(",")+`){
         `+J+`
    });
    `,Gr=new Ko(jt,{ecmaVersion:me.ecmaVersion,timeout:ke,rootContext:me.rootContext,globalContextInFunction:me.globalContextInFunction});return Gr.evaluate(ir)}function Du(J,Ct,me){var jt=new Ko(Ct,me);return jt.evaluate(J)}var Wu=Du,Ul=function(){function J(me){this._code=me}var Ct=J.prototype;return Ct.runInContext=function(jt){return Du(this._code,jt)},Ct.runInNewContext=function(jt){return Du(this._code,jt)},J}(),Ql=function(J,Ct,me){return Du(J,Ct,me)};function Ku(){for(var J=arguments.length,Ct=new Array(J),me=0;me<J;me++)Ct[me]=arguments[me];var jt=Ct.pop();return Gl(jt||"",Ct)}var Nc=Ql},20396:function(Vt,P,S){var T;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(j,y,U,F){"use strict";var B=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",R=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),N=B||R,A=["","webkit","Moz","MS","ms","o"],D=N?"":y.createElement("div"),M="function",O=Math.round,k=Math.abs,V=Date.now;function X(Fe,er,Ir){return setTimeout(wt(Fe,Ir),er)}function K(Fe,er,Ir){return Array.isArray(Fe)?(q(Fe,Ir[er],Ir),!0):!1}function q(Fe,er,Ir){var hn;if(!!Fe)if(Fe.forEach)Fe.forEach(er,Ir);else if(Fe.length!==F)for(hn=0;hn<Fe.length;)er.call(Ir,Fe[hn],hn,Fe),hn++;else for(hn in Fe)Fe.hasOwnProperty(hn)&&er.call(Ir,Fe[hn],hn,Fe)}function ct(Fe,er,Ir){var hn="DEPRECATED METHOD: "+er+`
`+Ir+` AT 
`;return function(){var ci=new Error("get-stack-trace"),wa=ci&&ci.stack?ci.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",no=j.console&&(j.console.warn||j.console.log);return no&&no.call(j.console,hn,wa),Fe.apply(this,arguments)}}var _t;typeof Object.assign!="function"?_t=function(er){if(er===F||er===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ir=Object(er),hn=1;hn<arguments.length;hn++){var ci=arguments[hn];if(ci!==F&&ci!==null)for(var wa in ci)ci.hasOwnProperty(wa)&&(Ir[wa]=ci[wa])}return Ir}:_t=Object.assign;var yt=ct(function(er,Ir,hn){for(var ci=Object.keys(Ir),wa=0;wa<ci.length;)(!hn||hn&&er[ci[wa]]===F)&&(er[ci[wa]]=Ir[ci[wa]]),wa++;return er},"extend","Use `assign`."),lt=ct(function(er,Ir){return yt(er,Ir,!0)},"merge","Use `assign`.");function Lt(Fe,er,Ir){var hn=er.prototype,ci;ci=Fe.prototype=Object.create(hn),ci.constructor=Fe,ci._super=hn,Ir&&_t(ci,Ir)}function wt(Fe,er){return function(){return Fe.apply(er,arguments)}}function Gt(Fe,er){return typeof Fe==M?Fe.apply(er&&er[0]||F,er):Fe}function re(Fe,er){return Fe===F?er:Fe}function Qt(Fe,er,Ir){q(vt(er),function(hn){Fe.addEventListener(hn,Ir,!1)})}function it(Fe,er,Ir){q(vt(er),function(hn){Fe.removeEventListener(hn,Ir,!1)})}function dt(Fe,er){for(;Fe;){if(Fe==er)return!0;Fe=Fe.parentNode}return!1}function gt(Fe,er){return Fe.indexOf(er)>-1}function vt(Fe){return Fe.trim().split(/\s+/g)}function Y(Fe,er,Ir){if(Fe.indexOf&&!Ir)return Fe.indexOf(er);for(var hn=0;hn<Fe.length;){if(Ir&&Fe[hn][Ir]==er||!Ir&&Fe[hn]===er)return hn;hn++}return-1}function ot(Fe){return Array.prototype.slice.call(Fe,0)}function nt(Fe,er,Ir){for(var hn=[],ci=[],wa=0;wa<Fe.length;){var no=er?Fe[wa][er]:Fe[wa];Y(ci,no)<0&&hn.push(Fe[wa]),ci[wa]=no,wa++}return Ir&&(er?hn=hn.sort(function(Jo,ps){return Jo[er]>ps[er]}):hn=hn.sort()),hn}function rt(Fe,er){for(var Ir,hn,ci=er[0].toUpperCase()+er.slice(1),wa=0;wa<A.length;){if(Ir=A[wa],hn=Ir?Ir+ci:er,hn in Fe)return hn;wa++}return F}var st=1;function d(){return st++}function It(Fe){var er=Fe.ownerDocument||Fe;return er.defaultView||er.parentWindow||j}var Ht=/mobile|tablet|ip(ad|hone|od)|android/i,kt="ontouchstart"in j,Xt=rt(j,"PointerEvent")!==F,Kt=kt&&Ht.test(navigator.userAgent),Jt="touch",ue="pen",ce="mouse",$t="kinect",Ut=25,Rt=1,Pt=2,Yt=4,Dt=8,Nt=1,ne=2,ve=4,Re=8,je=16,Cr=ne|ve,$r=Re|je,Qr=Cr|$r,Ee=["x","y"],yn=["clientX","clientY"];function ui(Fe,er){var Ir=this;this.manager=Fe,this.callback=er,this.element=Fe.element,this.target=Fe.options.inputTarget,this.domHandler=function(hn){Gt(Fe.options.enable,[Fe])&&Ir.handler(hn)},this.init()}ui.prototype={handler:function(){},init:function(){this.evEl&&Qt(this.element,this.evEl,this.domHandler),this.evTarget&&Qt(this.target,this.evTarget,this.domHandler),this.evWin&&Qt(It(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&it(this.element,this.evEl,this.domHandler),this.evTarget&&it(this.target,this.evTarget,this.domHandler),this.evWin&&it(It(this.element),this.evWin,this.domHandler)}};function la(Fe){var er,Ir=Fe.options.inputClass;return Ir?er=Ir:Xt?er=Ze:Kt?er=tn:kt?er=Jr:er=an,new er(Fe,Or)}function Or(Fe,er,Ir){var hn=Ir.pointers.length,ci=Ir.changedPointers.length,wa=er&Rt&&hn-ci==0,no=er&(Yt|Dt)&&hn-ci==0;Ir.isFirst=!!wa,Ir.isFinal=!!no,wa&&(Fe.session={}),Ir.eventType=er,ln(Fe,Ir),Fe.emit("hammer.input",Ir),Fe.recognize(Ir),Fe.session.prevInput=Ir}function ln(Fe,er){var Ir=Fe.session,hn=er.pointers,ci=hn.length;Ir.firstInput||(Ir.firstInput=wi(er)),ci>1&&!Ir.firstMultiple?Ir.firstMultiple=wi(er):ci===1&&(Ir.firstMultiple=!1);var wa=Ir.firstInput,no=Ir.firstMultiple,ls=no?no.center:wa.center,Jo=er.center=Sa(hn);er.timeStamp=V(),er.deltaTime=er.timeStamp-wa.timeStamp,er.angle=Ue(ls,Jo),er.distance=Ui(ls,Jo),Kn(Ir,er),er.offsetDirection=qa(er.deltaX,er.deltaY);var ps=to(er.deltaTime,er.deltaX,er.deltaY);er.overallVelocityX=ps.x,er.overallVelocityY=ps.y,er.overallVelocity=k(ps.x)>k(ps.y)?ps.x:ps.y,er.scale=no?fr(no.pointers,hn):1,er.rotation=no?We(no.pointers,hn):0,er.maxPointers=Ir.prevInput?er.pointers.length>Ir.prevInput.maxPointers?er.pointers.length:Ir.prevInput.maxPointers:er.pointers.length,jn(Ir,er);var Ks=Fe.element;dt(er.srcEvent.target,Ks)&&(Ks=er.srcEvent.target),er.target=Ks}function Kn(Fe,er){var Ir=er.center,hn=Fe.offsetDelta||{},ci=Fe.prevDelta||{},wa=Fe.prevInput||{};(er.eventType===Rt||wa.eventType===Yt)&&(ci=Fe.prevDelta={x:wa.deltaX||0,y:wa.deltaY||0},hn=Fe.offsetDelta={x:Ir.x,y:Ir.y}),er.deltaX=ci.x+(Ir.x-hn.x),er.deltaY=ci.y+(Ir.y-hn.y)}function jn(Fe,er){var Ir=Fe.lastInterval||er,hn=er.timeStamp-Ir.timeStamp,ci,wa,no,ls;if(er.eventType!=Dt&&(hn>Ut||Ir.velocity===F)){var Jo=er.deltaX-Ir.deltaX,ps=er.deltaY-Ir.deltaY,Ks=to(hn,Jo,ps);wa=Ks.x,no=Ks.y,ci=k(Ks.x)>k(Ks.y)?Ks.x:Ks.y,ls=qa(Jo,ps),Fe.lastInterval=er}else ci=Ir.velocity,wa=Ir.velocityX,no=Ir.velocityY,ls=Ir.direction;er.velocity=ci,er.velocityX=wa,er.velocityY=no,er.direction=ls}function wi(Fe){for(var er=[],Ir=0;Ir<Fe.pointers.length;)er[Ir]={clientX:O(Fe.pointers[Ir].clientX),clientY:O(Fe.pointers[Ir].clientY)},Ir++;return{timeStamp:V(),pointers:er,center:Sa(er),deltaX:Fe.deltaX,deltaY:Fe.deltaY}}function Sa(Fe){var er=Fe.length;if(er===1)return{x:O(Fe[0].clientX),y:O(Fe[0].clientY)};for(var Ir=0,hn=0,ci=0;ci<er;)Ir+=Fe[ci].clientX,hn+=Fe[ci].clientY,ci++;return{x:O(Ir/er),y:O(hn/er)}}function to(Fe,er,Ir){return{x:er/Fe||0,y:Ir/Fe||0}}function qa(Fe,er){return Fe===er?Nt:k(Fe)>=k(er)?Fe<0?ne:ve:er<0?Re:je}function Ui(Fe,er,Ir){Ir||(Ir=Ee);var hn=er[Ir[0]]-Fe[Ir[0]],ci=er[Ir[1]]-Fe[Ir[1]];return Math.sqrt(hn*hn+ci*ci)}function Ue(Fe,er,Ir){Ir||(Ir=Ee);var hn=er[Ir[0]]-Fe[Ir[0]],ci=er[Ir[1]]-Fe[Ir[1]];return Math.atan2(ci,hn)*180/Math.PI}function We(Fe,er){return Ue(er[1],er[0],yn)+Ue(Fe[1],Fe[0],yn)}function fr(Fe,er){return Ui(er[0],er[1],yn)/Ui(Fe[0],Fe[1],yn)}var Ar={mousedown:Rt,mousemove:Pt,mouseup:Yt},qr="mousedown",nn="mousemove mouseup";function an(){this.evEl=qr,this.evWin=nn,this.pressed=!1,ui.apply(this,arguments)}Lt(an,ui,{handler:function(er){var Ir=Ar[er.type];Ir&Rt&&er.button===0&&(this.pressed=!0),Ir&Pt&&er.which!==1&&(Ir=Yt),!!this.pressed&&(Ir&Yt&&(this.pressed=!1),this.callback(this.manager,Ir,{pointers:[er],changedPointers:[er],pointerType:ce,srcEvent:er}))}});var le={pointerdown:Rt,pointermove:Pt,pointerup:Yt,pointercancel:Dt,pointerout:Dt},fe={2:Jt,3:ue,4:ce,5:$t},Me="pointerdown",Te="pointermove pointerup pointercancel";!N&&j.MSPointerEvent&&!j.PointerEvent&&(Me="MSPointerDown",Te="MSPointerMove MSPointerUp MSPointerCancel");function Ze(){this.evEl=Me,this.evWin=Te,ui.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Lt(Ze,ui,{handler:function(er){var Ir=this.store,hn=!1,ci=er.type.toLowerCase().replace("ms",""),wa=le[ci],no=fe[er.pointerType]||er.pointerType,ls=no==Jt,Jo=Y(Ir,er.pointerId,"pointerId");wa&Rt&&(er.button===0||ls)?Jo<0&&(Ir.push(er),Jo=Ir.length-1):wa&(Yt|Dt)&&(hn=!0),!(Jo<0)&&(Ir[Jo]=er,this.callback(this.manager,wa,{pointers:Ir,changedPointers:[er],pointerType:no,srcEvent:er}),hn&&Ir.splice(Jo,1))}});var or={touchstart:Rt,touchmove:Pt,touchend:Yt,touchcancel:Dt},lr="touchstart",Be="touchstart touchmove touchend touchcancel";function tr(){this.evTarget=lr,this.evWin=Be,this.started=!1,ui.apply(this,arguments)}Lt(tr,ui,{handler:function(er){var Ir=or[er.type];if(Ir===Rt&&(this.started=!0),!!this.started){var hn=Mr.call(this,er,Ir);Ir&(Yt|Dt)&&hn[0].length-hn[1].length==0&&(this.started=!1),this.callback(this.manager,Ir,{pointers:hn[0],changedPointers:hn[1],pointerType:Jt,srcEvent:er})}}});function Mr(Fe,er){var Ir=ot(Fe.touches),hn=ot(Fe.changedTouches);return er&(Yt|Dt)&&(Ir=nt(Ir.concat(hn),"identifier",!0)),[Ir,hn]}var Xr={touchstart:Rt,touchmove:Pt,touchend:Yt,touchcancel:Dt},Zr="touchstart touchmove touchend touchcancel";function tn(){this.evTarget=Zr,this.targetIds={},ui.apply(this,arguments)}Lt(tn,ui,{handler:function(er){var Ir=Xr[er.type],hn=_n.call(this,er,Ir);!hn||this.callback(this.manager,Ir,{pointers:hn[0],changedPointers:hn[1],pointerType:Jt,srcEvent:er})}});function _n(Fe,er){var Ir=ot(Fe.touches),hn=this.targetIds;if(er&(Rt|Pt)&&Ir.length===1)return hn[Ir[0].identifier]=!0,[Ir,Ir];var ci,wa,no=ot(Fe.changedTouches),ls=[],Jo=this.target;if(wa=Ir.filter(function(ps){return dt(ps.target,Jo)}),er===Rt)for(ci=0;ci<wa.length;)hn[wa[ci].identifier]=!0,ci++;for(ci=0;ci<no.length;)hn[no[ci].identifier]&&ls.push(no[ci]),er&(Yt|Dt)&&delete hn[no[ci].identifier],ci++;if(!!ls.length)return[nt(wa.concat(ls),"identifier",!0),ls]}var $n=2500,si=25;function Jr(){ui.apply(this,arguments);var Fe=wt(this.handler,this);this.touch=new tn(this.manager,Fe),this.mouse=new an(this.manager,Fe),this.primaryTouch=null,this.lastTouches=[]}Lt(Jr,ui,{handler:function(er,Ir,hn){var ci=hn.pointerType==Jt,wa=hn.pointerType==ce;if(!(wa&&hn.sourceCapabilities&&hn.sourceCapabilities.firesTouchEvents)){if(ci)Si.call(this,Ir,hn);else if(wa&&yi.call(this,hn))return;this.callback(er,Ir,hn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Si(Fe,er){Fe&Rt?(this.primaryTouch=er.changedPointers[0].identifier,Jn.call(this,er)):Fe&(Yt|Dt)&&Jn.call(this,er)}function Jn(Fe){var er=Fe.changedPointers[0];if(er.identifier===this.primaryTouch){var Ir={x:er.clientX,y:er.clientY};this.lastTouches.push(Ir);var hn=this.lastTouches,ci=function(){var wa=hn.indexOf(Ir);wa>-1&&hn.splice(wa,1)};setTimeout(ci,$n)}}function yi(Fe){for(var er=Fe.srcEvent.clientX,Ir=Fe.srcEvent.clientY,hn=0;hn<this.lastTouches.length;hn++){var ci=this.lastTouches[hn],wa=Math.abs(er-ci.x),no=Math.abs(Ir-ci.y);if(wa<=si&&no<=si)return!0}return!1}var Ka=N?F:rt(D.style,"touchAction"),ki=Ka!==F,ga="compute",ko="auto",Ci="manipulation",po="none",oo="pan-x",cn="pan-y",vn=fo();function Wo(Fe,er){this.manager=Fe,this.set(er)}Wo.prototype={set:function(Fe){Fe==ga&&(Fe=this.compute()),ki&&this.manager.element.style&&vn[Fe]&&(this.manager.element.style[Ka]=Fe),this.actions=Fe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Fe=[];return q(this.manager.recognizers,function(er){Gt(er.options.enable,[er])&&(Fe=Fe.concat(er.getTouchAction()))}),mo(Fe.join(" "))},preventDefaults:function(Fe){var er=Fe.srcEvent,Ir=Fe.offsetDirection;if(this.manager.session.prevented){er.preventDefault();return}var hn=this.actions,ci=gt(hn,po)&&!vn[po],wa=gt(hn,cn)&&!vn[cn],no=gt(hn,oo)&&!vn[oo];if(ci){var ls=Fe.pointers.length===1,Jo=Fe.distance<2,ps=Fe.deltaTime<250;if(ls&&Jo&&ps)return}if(!(no&&wa)&&(ci||wa&&Ir&Cr||no&&Ir&$r))return this.preventSrc(er)},preventSrc:function(Fe){this.manager.session.prevented=!0,Fe.preventDefault()}};function mo(Fe){if(gt(Fe,po))return po;var er=gt(Fe,oo),Ir=gt(Fe,cn);return er&&Ir?po:er||Ir?er?oo:cn:gt(Fe,Ci)?Ci:ko}function fo(){if(!ki)return!1;var Fe={};if(N)return Fe;var er=j.CSS&&j.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ir){Fe[Ir]=er?j.CSS.supports("touch-action",Ir):!0}),Fe}var Po=1,vi=2,pa=4,An=8,Pe=An,Tt=16,ae=32;function he(Fe){this.options=_t({},this.defaults,Fe||{}),this.id=d(),this.manager=null,this.options.enable=re(this.options.enable,!0),this.state=Po,this.simultaneous={},this.requireFail=[]}he.prototype={defaults:{},set:function(Fe){return _t(this.options,Fe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Fe){if(K(Fe,"recognizeWith",this))return this;var er=this.simultaneous;return Fe=de(Fe,this),er[Fe.id]||(er[Fe.id]=Fe,Fe.recognizeWith(this)),this},dropRecognizeWith:function(Fe){return K(Fe,"dropRecognizeWith",this)?this:(Fe=de(Fe,this),delete this.simultaneous[Fe.id],this)},requireFailure:function(Fe){if(K(Fe,"requireFailure",this))return this;var er=this.requireFail;return Fe=de(Fe,this),Y(er,Fe)===-1&&(er.push(Fe),Fe.requireFailure(this)),this},dropRequireFailure:function(Fe){if(K(Fe,"dropRequireFailure",this))return this;Fe=de(Fe,this);var er=Y(this.requireFail,Fe);return er>-1&&this.requireFail.splice(er,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Fe){return!!this.simultaneous[Fe.id]},emit:function(Fe){var er=this,Ir=this.state;function hn(ci){er.manager.emit(ci,Fe)}Ir<An&&hn(er.options.event+zt(Ir)),hn(er.options.event),Fe.additionalEvent&&hn(Fe.additionalEvent),Ir>=An&&hn(er.options.event+zt(Ir))},tryEmit:function(Fe){if(this.canEmit())return this.emit(Fe);this.state=ae},canEmit:function(){for(var Fe=0;Fe<this.requireFail.length;){if(!(this.requireFail[Fe].state&(ae|Po)))return!1;Fe++}return!0},recognize:function(Fe){var er=_t({},Fe);if(!Gt(this.options.enable,[this,er])){this.reset(),this.state=ae;return}this.state&(Pe|Tt|ae)&&(this.state=Po),this.state=this.process(er),this.state&(vi|pa|An|Tt)&&this.tryEmit(er)},process:function(Fe){},getTouchAction:function(){},reset:function(){}};function zt(Fe){return Fe&Tt?"cancel":Fe&An?"end":Fe&pa?"move":Fe&vi?"start":""}function Wt(Fe){return Fe==je?"down":Fe==Re?"up":Fe==ne?"left":Fe==ve?"right":""}function de(Fe,er){var Ir=er.manager;return Ir?Ir.get(Fe):Fe}function Se(){he.apply(this,arguments)}Lt(Se,he,{defaults:{pointers:1},attrTest:function(Fe){var er=this.options.pointers;return er===0||Fe.pointers.length===er},process:function(Fe){var er=this.state,Ir=Fe.eventType,hn=er&(vi|pa),ci=this.attrTest(Fe);return hn&&(Ir&Dt||!ci)?er|Tt:hn||ci?Ir&Yt?er|An:er&vi?er|pa:vi:ae}});function Ae(){Se.apply(this,arguments),this.pX=null,this.pY=null}Lt(Ae,Se,{defaults:{event:"pan",threshold:10,pointers:1,direction:Qr},getTouchAction:function(){var Fe=this.options.direction,er=[];return Fe&Cr&&er.push(cn),Fe&$r&&er.push(oo),er},directionTest:function(Fe){var er=this.options,Ir=!0,hn=Fe.distance,ci=Fe.direction,wa=Fe.deltaX,no=Fe.deltaY;return ci&er.direction||(er.direction&Cr?(ci=wa===0?Nt:wa<0?ne:ve,Ir=wa!=this.pX,hn=Math.abs(Fe.deltaX)):(ci=no===0?Nt:no<0?Re:je,Ir=no!=this.pY,hn=Math.abs(Fe.deltaY))),Fe.direction=ci,Ir&&hn>er.threshold&&ci&er.direction},attrTest:function(Fe){return Se.prototype.attrTest.call(this,Fe)&&(this.state&vi||!(this.state&vi)&&this.directionTest(Fe))},emit:function(Fe){this.pX=Fe.deltaX,this.pY=Fe.deltaY;var er=Wt(Fe.direction);er&&(Fe.additionalEvent=this.options.event+er),this._super.emit.call(this,Fe)}});function He(){Se.apply(this,arguments)}Lt(He,Se,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[po]},attrTest:function(Fe){return this._super.attrTest.call(this,Fe)&&(Math.abs(Fe.scale-1)>this.options.threshold||this.state&vi)},emit:function(Fe){if(Fe.scale!==1){var er=Fe.scale<1?"in":"out";Fe.additionalEvent=this.options.event+er}this._super.emit.call(this,Fe)}});function _r(){he.apply(this,arguments),this._timer=null,this._input=null}Lt(_r,he,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ko]},process:function(Fe){var er=this.options,Ir=Fe.pointers.length===er.pointers,hn=Fe.distance<er.threshold,ci=Fe.deltaTime>er.time;if(this._input=Fe,!hn||!Ir||Fe.eventType&(Yt|Dt)&&!ci)this.reset();else if(Fe.eventType&Rt)this.reset(),this._timer=X(function(){this.state=Pe,this.tryEmit()},er.time,this);else if(Fe.eventType&Yt)return Pe;return ae},reset:function(){clearTimeout(this._timer)},emit:function(Fe){this.state===Pe&&(Fe&&Fe.eventType&Yt?this.manager.emit(this.options.event+"up",Fe):(this._input.timeStamp=V(),this.manager.emit(this.options.event,this._input)))}});function Lr(){Se.apply(this,arguments)}Lt(Lr,Se,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[po]},attrTest:function(Fe){return this._super.attrTest.call(this,Fe)&&(Math.abs(Fe.rotation)>this.options.threshold||this.state&vi)}});function wn(){Se.apply(this,arguments)}Lt(wn,Se,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Cr|$r,pointers:1},getTouchAction:function(){return Ae.prototype.getTouchAction.call(this)},attrTest:function(Fe){var er=this.options.direction,Ir;return er&(Cr|$r)?Ir=Fe.overallVelocity:er&Cr?Ir=Fe.overallVelocityX:er&$r&&(Ir=Fe.overallVelocityY),this._super.attrTest.call(this,Fe)&&er&Fe.offsetDirection&&Fe.distance>this.options.threshold&&Fe.maxPointers==this.options.pointers&&k(Ir)>this.options.velocity&&Fe.eventType&Yt},emit:function(Fe){var er=Wt(Fe.offsetDirection);er&&this.manager.emit(this.options.event+er,Fe),this.manager.emit(this.options.event,Fe)}});function Kr(){he.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Lt(Kr,he,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ci]},process:function(Fe){var er=this.options,Ir=Fe.pointers.length===er.pointers,hn=Fe.distance<er.threshold,ci=Fe.deltaTime<er.time;if(this.reset(),Fe.eventType&Rt&&this.count===0)return this.failTimeout();if(hn&&ci&&Ir){if(Fe.eventType!=Yt)return this.failTimeout();var wa=this.pTime?Fe.timeStamp-this.pTime<er.interval:!0,no=!this.pCenter||Ui(this.pCenter,Fe.center)<er.posThreshold;this.pTime=Fe.timeStamp,this.pCenter=Fe.center,!no||!wa?this.count=1:this.count+=1,this._input=Fe;var ls=this.count%er.taps;if(ls===0)return this.hasRequireFailures()?(this._timer=X(function(){this.state=Pe,this.tryEmit()},er.interval,this),vi):Pe}return ae},failTimeout:function(){return this._timer=X(function(){this.state=ae},this.options.interval,this),ae},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Fr(Fe,er){return er=er||{},er.recognizers=re(er.recognizers,Fr.defaults.preset),new ca(Fe,er)}Fr.VERSION="2.0.7",Fr.defaults={domEvents:!1,touchAction:ga,enable:!0,inputTarget:null,inputClass:null,preset:[[Lr,{enable:!1}],[He,{enable:!1},["rotate"]],[wn,{direction:Cr}],[Ae,{direction:Cr},["swipe"]],[Kr],[Kr,{event:"doubletap",taps:2},["tap"]],[_r]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pi=1,Pi=2;function ca(Fe,er){this.options=_t({},Fr.defaults,er||{}),this.options.inputTarget=this.options.inputTarget||Fe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Fe,this.input=la(this),this.touchAction=new Wo(this,this.options.touchAction),va(this,!0),q(this.options.recognizers,function(Ir){var hn=this.add(new Ir[0](Ir[1]));Ir[2]&&hn.recognizeWith(Ir[2]),Ir[3]&&hn.requireFailure(Ir[3])},this)}ca.prototype={set:function(Fe){return _t(this.options,Fe),Fe.touchAction&&this.touchAction.update(),Fe.inputTarget&&(this.input.destroy(),this.input.target=Fe.inputTarget,this.input.init()),this},stop:function(Fe){this.session.stopped=Fe?Pi:pi},recognize:function(Fe){var er=this.session;if(!er.stopped){this.touchAction.preventDefaults(Fe);var Ir,hn=this.recognizers,ci=er.curRecognizer;(!ci||ci&&ci.state&Pe)&&(ci=er.curRecognizer=null);for(var wa=0;wa<hn.length;)Ir=hn[wa],er.stopped!==Pi&&(!ci||Ir==ci||Ir.canRecognizeWith(ci))?Ir.recognize(Fe):Ir.reset(),!ci&&Ir.state&(vi|pa|An)&&(ci=er.curRecognizer=Ir),wa++}},get:function(Fe){if(Fe instanceof he)return Fe;for(var er=this.recognizers,Ir=0;Ir<er.length;Ir++)if(er[Ir].options.event==Fe)return er[Ir];return null},add:function(Fe){if(K(Fe,"add",this))return this;var er=this.get(Fe.options.event);return er&&this.remove(er),this.recognizers.push(Fe),Fe.manager=this,this.touchAction.update(),Fe},remove:function(Fe){if(K(Fe,"remove",this))return this;if(Fe=this.get(Fe),Fe){var er=this.recognizers,Ir=Y(er,Fe);Ir!==-1&&(er.splice(Ir,1),this.touchAction.update())}return this},on:function(Fe,er){if(Fe!==F&&er!==F){var Ir=this.handlers;return q(vt(Fe),function(hn){Ir[hn]=Ir[hn]||[],Ir[hn].push(er)}),this}},off:function(Fe,er){if(Fe!==F){var Ir=this.handlers;return q(vt(Fe),function(hn){er?Ir[hn]&&Ir[hn].splice(Y(Ir[hn],er),1):delete Ir[hn]}),this}},emit:function(Fe,er){this.options.domEvents&&ji(Fe,er);var Ir=this.handlers[Fe]&&this.handlers[Fe].slice();if(!(!Ir||!Ir.length)){er.type=Fe,er.preventDefault=function(){er.srcEvent.preventDefault()};for(var hn=0;hn<Ir.length;)Ir[hn](er),hn++}},destroy:function(){this.element&&va(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function va(Fe,er){var Ir=Fe.element;if(!!Ir.style){var hn;q(Fe.options.cssProps,function(ci,wa){hn=rt(Ir.style,wa),er?(Fe.oldCssProps[hn]=Ir.style[hn],Ir.style[hn]=ci):Ir.style[hn]=Fe.oldCssProps[hn]||""}),er||(Fe.oldCssProps={})}}function ji(Fe,er){if(!N){var Ir=y.createEvent("Event");Ir.initEvent(Fe,!0,!0),Ir.gesture=er,er.target.dispatchEvent(Ir)}}if(!N){_t(Fr,{INPUT_START:Rt,INPUT_MOVE:Pt,INPUT_END:Yt,INPUT_CANCEL:Dt,STATE_POSSIBLE:Po,STATE_BEGAN:vi,STATE_CHANGED:pa,STATE_ENDED:An,STATE_RECOGNIZED:Pe,STATE_CANCELLED:Tt,STATE_FAILED:ae,DIRECTION_NONE:Nt,DIRECTION_LEFT:ne,DIRECTION_RIGHT:ve,DIRECTION_UP:Re,DIRECTION_DOWN:je,DIRECTION_HORIZONTAL:Cr,DIRECTION_VERTICAL:$r,DIRECTION_ALL:Qr,Manager:ca,Input:ui,TouchAction:Wo,TouchInput:tn,MouseInput:an,PointerEventInput:Ze,TouchMouseInput:Jr,SingleTouchInput:tr,Recognizer:he,AttrRecognizer:Se,Tap:Kr,Pan:Ae,Swipe:wn,Pinch:He,Rotate:Lr,Press:_r,on:Qt,off:it,each:q,merge:lt,extend:yt,assign:_t,inherit:Lt,bindFn:wt,prefixed:rt});var ai=typeof window!="undefined"?window:typeof self!="undefined"?self:{};ai.Hammer=Fr,T=function(){return Fr}.call(P,S,P,Vt),T!==F&&(Vt.exports=T)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},88307:function(Vt,P,S){(function(T,j){Vt.exports=j(S(81336))})(this,function(T){"use strict";var j=function(be){return be instanceof Uint8Array||be instanceof Uint16Array||be instanceof Uint32Array||be instanceof Int8Array||be instanceof Int16Array||be instanceof Int32Array||be instanceof Float32Array||be instanceof Float64Array||be instanceof Uint8ClampedArray},y=function(be,ar){for(var Pr=Object.keys(ar),Ln=0;Ln<Pr.length;++Ln)be[Pr[Ln]]=ar[Pr[Ln]];return be},U=`
`;function F(be){return typeof atob!="undefined"?atob(be):"base64:"+be}function B(be){var ar=new Error("(regl) "+be);throw console.error(ar),ar}function R(be,ar){be||B(ar)}function N(be){return be?": "+be:""}function A(be,ar,Pr){be in ar||B("unknown parameter ("+be+")"+N(Pr)+". possible values: "+Object.keys(ar).join())}function D(be,ar){j(be)||B("invalid parameter type"+N(ar)+". must be a typed array")}function M(be,ar){switch(ar){case"number":return typeof be=="number";case"object":return typeof be=="object";case"string":return typeof be=="string";case"boolean":return typeof be=="boolean";case"function":return typeof be=="function";case"undefined":return typeof be=="undefined";case"symbol":return typeof be=="symbol"}}function O(be,ar,Pr){M(be,ar)||B("invalid parameter type"+N(Pr)+". expected "+ar+", got "+typeof be)}function k(be,ar){be>=0&&(be|0)===be||B("invalid parameter type, ("+be+")"+N(ar)+". must be a nonnegative integer")}function V(be,ar,Pr){ar.indexOf(be)<0&&B("invalid value"+N(Pr)+". must be one of: "+ar)}var X=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function K(be){Object.keys(be).forEach(function(ar){X.indexOf(ar)<0&&B('invalid regl constructor argument "'+ar+'". must be one of '+X)})}function q(be,ar){for(be=be+"";be.length<ar;)be=" "+be;return be}function ct(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function _t(be,ar){this.number=be,this.line=ar,this.errors=[]}function yt(be,ar,Pr){this.file=be,this.line=ar,this.message=Pr}function lt(){var be=new Error,ar=(be.stack||be).toString(),Pr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ar);if(Pr)return Pr[1];var Ln=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ar);return Ln?Ln[1]:"unknown"}function Lt(){var be=new Error,ar=(be.stack||be).toString(),Pr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ar);if(Pr)return Pr[1];var Ln=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ar);return Ln?Ln[1]:"unknown"}function wt(be,ar){var Pr=be.split(`
`),Ln=1,ni=0,On={unknown:new ct,0:new ct};On.unknown.name=On[0].name=ar||lt(),On.unknown.lines.push(new _t(0,""));for(var Wn=0;Wn<Pr.length;++Wn){var fi=Pr[Wn],xi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fi);if(xi)switch(xi[1]){case"line":var Ii=/(\d+)(\s+\d+)?/.exec(xi[2]);Ii&&(Ln=Ii[1]|0,Ii[2]&&(ni=Ii[2]|0,ni in On||(On[ni]=new ct)));break;case"define":var Ni=/SHADER_NAME(_B64)?\s+(.*)$/.exec(xi[2]);Ni&&(On[ni].name=Ni[1]?F(Ni[2]):Ni[2]);break}On[ni].lines.push(new _t(Ln++,fi))}return Object.keys(On).forEach(function(zi){var ra=On[zi];ra.lines.forEach(function(Mi){ra.index[Mi.number]=Mi})}),On}function Gt(be){var ar=[];return be.split(`
`).forEach(function(Pr){if(!(Pr.length<5)){var Ln=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Pr);Ln?ar.push(new yt(Ln[1]|0,Ln[2]|0,Ln[3].trim())):Pr.length>0&&ar.push(new yt("unknown",0,Pr))}}),ar}function re(be,ar){ar.forEach(function(Pr){var Ln=be[Pr.file];if(Ln){var ni=Ln.index[Pr.line];if(ni){ni.errors.push(Pr),Ln.hasErrors=!0;return}}be.unknown.hasErrors=!0,be.unknown.lines[0].errors.push(Pr)})}function Qt(be,ar,Pr,Ln,ni){if(!be.getShaderParameter(ar,be.COMPILE_STATUS)){var On=be.getShaderInfoLog(ar),Wn=Ln===be.FRAGMENT_SHADER?"fragment":"vertex";nt(Pr,"string",Wn+" shader source must be a string",ni);var fi=wt(Pr,ni),xi=Gt(On);re(fi,xi),Object.keys(fi).forEach(function(Ii){var Ni=fi[Ii];if(!Ni.hasErrors)return;var zi=[""],ra=[""];function Mi(Di,fn){zi.push(Di),ra.push(fn||"")}Mi("file number "+Ii+": "+Ni.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ni.lines.forEach(function(Di){if(Di.errors.length>0){Mi(q(Di.number,4)+"|  ","background-color:yellow; font-weight:bold"),Mi(Di.line+U,"color:red; background-color:yellow; font-weight:bold");var fn=0;Di.errors.forEach(function(zn){var Ai=zn.message,Ki=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ai);if(Ki){var li=Ki[1];switch(Ai=Ki[2],li){case"assign":li="=";break}fn=Math.max(Di.line.indexOf(li,fn),0)}else fn=0;Mi(q("| ",6)),Mi(q("^^^",fn+3)+U,"font-weight:bold"),Mi(q("| ",6)),Mi(Ai+U,"font-weight:bold")}),Mi(q("| ",6)+U)}else Mi(q(Di.number,4)+"|  "),Mi(Di.line+U,"color:red")}),typeof document!="undefined"&&!window.chrome?(ra[0]=zi.join("%c"),console.log.apply(console,ra)):console.log(zi.join(""))}),R.raise("Error compiling "+Wn+" shader, "+fi[0].name)}}function it(be,ar,Pr,Ln,ni){if(!be.getProgramParameter(ar,be.LINK_STATUS)){var On=be.getProgramInfoLog(ar),Wn=wt(Pr,ni),fi=wt(Ln,ni),xi='Error linking program with vertex shader, "'+fi[0].name+'", and fragment shader "'+Wn[0].name+'"';typeof document!="undefined"?console.log("%c"+xi+U+"%c"+On,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(xi+U+On),R.raise(xi)}}function dt(be){be._commandRef=lt()}function gt(be,ar,Pr,Ln){dt(be);function ni(xi){return xi?Ln.id(xi):0}be._fragId=ni(be.static.frag),be._vertId=ni(be.static.vert);function On(xi,Ii){Object.keys(Ii).forEach(function(Ni){xi[Ln.id(Ni)]=!0})}var Wn=be._uniformSet={};On(Wn,ar.static),On(Wn,ar.dynamic);var fi=be._attributeSet={};On(fi,Pr.static),On(fi,Pr.dynamic),be._hasCount="count"in be.static||"count"in be.dynamic||"elements"in be.static||"elements"in be.dynamic}function vt(be,ar){var Pr=Lt();B(be+" in command "+(ar||lt())+(Pr==="unknown"?"":" called from "+Pr))}function Y(be,ar,Pr){be||vt(ar,Pr||lt())}function ot(be,ar,Pr,Ln){be in ar||vt("unknown parameter ("+be+")"+N(Pr)+". possible values: "+Object.keys(ar).join(),Ln||lt())}function nt(be,ar,Pr,Ln){M(be,ar)||vt("invalid parameter type"+N(Pr)+". expected "+ar+", got "+typeof be,Ln||lt())}function rt(be){be()}function st(be,ar,Pr){be.texture?V(be.texture._texture.internalformat,ar,"unsupported texture format for attachment"):V(be.renderbuffer._renderbuffer.format,Pr,"unsupported renderbuffer format for attachment")}var d=33071,It=9728,Ht=9984,kt=9985,Xt=9986,Kt=9987,Jt=5120,ue=5121,ce=5122,$t=5123,Ut=5124,Rt=5125,Pt=5126,Yt=32819,Dt=32820,Nt=33635,ne=34042,ve=36193,Re={};Re[Jt]=Re[ue]=1,Re[ce]=Re[$t]=Re[ve]=Re[Nt]=Re[Yt]=Re[Dt]=2,Re[Ut]=Re[Rt]=Re[Pt]=Re[ne]=4;function je(be,ar){return be===Dt||be===Yt||be===Nt?2:be===ne?4:Re[be]*ar}function Cr(be){return!(be&be-1)&&!!be}function $r(be,ar,Pr){var Ln,ni=ar.width,On=ar.height,Wn=ar.channels;R(ni>0&&ni<=Pr.maxTextureSize&&On>0&&On<=Pr.maxTextureSize,"invalid texture shape"),(be.wrapS!==d||be.wrapT!==d)&&R(Cr(ni)&&Cr(On),"incompatible wrap mode for texture, both width and height must be power of 2"),ar.mipmask===1?ni!==1&&On!==1&&R(be.minFilter!==Ht&&be.minFilter!==Xt&&be.minFilter!==kt&&be.minFilter!==Kt,"min filter requires mipmap"):(R(Cr(ni)&&Cr(On),"texture must be a square power of 2 to support mipmapping"),R(ar.mipmask===(ni<<1)-1,"missing or incomplete mipmap data")),ar.type===Pt&&(Pr.extensions.indexOf("oes_texture_float_linear")<0&&R(be.minFilter===It&&be.magFilter===It,"filter not supported, must enable oes_texture_float_linear"),R(!be.genMipmaps,"mipmap generation not supported with float textures"));var fi=ar.images;for(Ln=0;Ln<16;++Ln)if(fi[Ln]){var xi=ni>>Ln,Ii=On>>Ln;R(ar.mipmask&1<<Ln,"missing mipmap data");var Ni=fi[Ln];if(R(Ni.width===xi&&Ni.height===Ii,"invalid shape for mip images"),R(Ni.format===ar.format&&Ni.internalformat===ar.internalformat&&Ni.type===ar.type,"incompatible type for mip image"),!Ni.compressed)if(Ni.data){var zi=Math.ceil(je(Ni.type,Wn)*xi/Ni.unpackAlignment)*Ni.unpackAlignment;R(Ni.data.byteLength===zi*Ii,"invalid data for image, buffer size is inconsistent with image format")}else Ni.element||Ni.copy}else be.genMipmaps||R((ar.mipmask&1<<Ln)==0,"extra mipmap data");ar.compressed&&R(!be.genMipmaps,"mipmap generation for compressed images not supported")}function Qr(be,ar,Pr,Ln){var ni=be.width,On=be.height,Wn=be.channels;R(ni>0&&ni<=Ln.maxTextureSize&&On>0&&On<=Ln.maxTextureSize,"invalid texture shape"),R(ni===On,"cube map must be square"),R(ar.wrapS===d&&ar.wrapT===d,"wrap mode not supported by cube map");for(var fi=0;fi<Pr.length;++fi){var xi=Pr[fi];R(xi.width===ni&&xi.height===On,"inconsistent cube map face shape"),ar.genMipmaps&&(R(!xi.compressed,"can not generate mipmap for compressed textures"),R(xi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ii=xi.images,Ni=0;Ni<16;++Ni){var zi=Ii[Ni];if(zi){var ra=ni>>Ni,Mi=On>>Ni;R(xi.mipmask&1<<Ni,"missing mipmap data"),R(zi.width===ra&&zi.height===Mi,"invalid shape for mip images"),R(zi.format===be.format&&zi.internalformat===be.internalformat&&zi.type===be.type,"incompatible type for mip image"),zi.compressed||(zi.data?R(zi.data.byteLength===ra*Mi*Math.max(je(zi.type,Wn),zi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):zi.element||zi.copy)}}}}var Ee=y(R,{optional:rt,raise:B,commandRaise:vt,command:Y,parameter:A,commandParameter:ot,constructor:K,type:O,commandType:nt,isTypedArray:D,nni:k,oneOf:V,shaderError:Qt,linkError:it,callSite:Lt,saveCommandRef:dt,saveDrawInfo:gt,framebufferFormat:st,guessCommand:lt,texture2D:$r,textureCube:Qr}),yn=0,ui=0,la=5,Or=6;function ln(be,ar){this.id=yn++,this.type=be,this.data=ar}function Kn(be){return be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function jn(be){if(be.length===0)return[];var ar=be.charAt(0),Pr=be.charAt(be.length-1);if(be.length>1&&ar===Pr&&(ar==='"'||ar==="'"))return['"'+Kn(be.substr(1,be.length-2))+'"'];var Ln=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(be);if(Ln)return jn(be.substr(0,Ln.index)).concat(jn(Ln[1])).concat(jn(be.substr(Ln.index+Ln[0].length)));var ni=be.split(".");if(ni.length===1)return['"'+Kn(be)+'"'];for(var On=[],Wn=0;Wn<ni.length;++Wn)On=On.concat(jn(ni[Wn]));return On}function wi(be){return"["+jn(be).join("][")+"]"}function Sa(be,ar){return new ln(be,wi(ar+""))}function to(be){return typeof be=="function"&&!be._reglType||be instanceof ln}function qa(be,ar){if(typeof be=="function")return new ln(ui,be);if(typeof be=="number"||typeof be=="boolean")return new ln(la,be);if(Array.isArray(be))return new ln(Or,be.map(function(Pr,Ln){return qa(Pr,ar+"["+Ln+"]")}));if(be instanceof ln)return be;Ee(!1,"invalid option type in uniform "+ar)}var Ui={DynamicVariable:ln,define:Sa,isDynamic:to,unbox:qa,accessor:wi},Ue={next:typeof requestAnimationFrame=="function"?function(be){return requestAnimationFrame(be)}:function(be){return setTimeout(be,16)},cancel:typeof cancelAnimationFrame=="function"?function(be){return cancelAnimationFrame(be)}:clearTimeout},We=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",fr=We?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ar(){var be={"":0},ar=[""];return{id:function(Pr){var Ln=be[Pr];return Ln||(Ln=be[Pr]=ar.length,ar.push(Pr),Ln)},str:function(Pr){return ar[Pr]}}}function qr(be,ar,Pr){var Ln=document.createElement("canvas");y(Ln.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),be.appendChild(Ln),be===document.body&&(Ln.style.position="absolute",y(be.style,{margin:0,padding:0}));function ni(){var fi=window.innerWidth,xi=window.innerHeight;if(be!==document.body){var Ii=Ln.getBoundingClientRect();fi=Ii.right-Ii.left,xi=Ii.bottom-Ii.top}Ln.width=Pr*fi,Ln.height=Pr*xi}var On;be!==document.body&&typeof ResizeObserver=="function"?(On=new ResizeObserver(function(){setTimeout(ni)}),On.observe(be)):window.addEventListener("resize",ni,!1);function Wn(){On?On.disconnect():window.removeEventListener("resize",ni),be.removeChild(Ln)}return ni(),{canvas:Ln,onDestroy:Wn}}function nn(be,ar){function Pr(Ln){try{return be.getContext(Ln,ar)}catch(ni){return null}}return Pr("webgl")||Pr("experimental-webgl")||Pr("webgl-experimental")}function an(be){return typeof be.nodeName=="string"&&typeof be.appendChild=="function"&&typeof be.getBoundingClientRect=="function"}function le(be){return typeof be.drawArrays=="function"||typeof be.drawElements=="function"}function fe(be){return typeof be=="string"?be.split():(Ee(Array.isArray(be),"invalid extension array"),be)}function Me(be){return typeof be=="string"?(Ee(typeof document!="undefined","not supported outside of DOM"),document.querySelector(be)):be}function Te(be){var ar=be||{},Pr,Ln,ni,On,Wn={},fi=[],xi=[],Ii=typeof window=="undefined"?1:window.devicePixelRatio,Ni=!1,zi=function(Di){Di&&Ee.raise(Di)},ra=function(){};if(typeof ar=="string"?(Ee(typeof document!="undefined","selector queries only supported in DOM environments"),Pr=document.querySelector(ar),Ee(Pr,"invalid query string for element")):typeof ar=="object"?an(ar)?Pr=ar:le(ar)?(On=ar,ni=On.canvas):(Ee.constructor(ar),"gl"in ar?On=ar.gl:"canvas"in ar?ni=Me(ar.canvas):"container"in ar&&(Ln=Me(ar.container)),"attributes"in ar&&(Wn=ar.attributes,Ee.type(Wn,"object","invalid context attributes")),"extensions"in ar&&(fi=fe(ar.extensions)),"optionalExtensions"in ar&&(xi=fe(ar.optionalExtensions)),"onDone"in ar&&(Ee.type(ar.onDone,"function","invalid or missing onDone callback"),zi=ar.onDone),"profile"in ar&&(Ni=!!ar.profile),"pixelRatio"in ar&&(Ii=+ar.pixelRatio,Ee(Ii>0,"invalid pixel ratio"))):Ee.raise("invalid arguments to regl"),Pr&&(Pr.nodeName.toLowerCase()==="canvas"?ni=Pr:Ln=Pr),!On){if(!ni){Ee(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Mi=qr(Ln||document.body,zi,Ii);if(!Mi)return null;ni=Mi.canvas,ra=Mi.onDestroy}Wn.premultipliedAlpha===void 0&&(Wn.premultipliedAlpha=!0),On=nn(ni,Wn)}return On?{gl:On,canvas:ni,container:Ln,extensions:fi,optionalExtensions:xi,pixelRatio:Ii,profile:Ni,onDone:zi,onDestroy:ra}:(ra(),zi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ze(be,ar){var Pr={};function Ln(fi){Ee.type(fi,"string","extension name must be string");var xi=fi.toLowerCase(),Ii;try{Ii=Pr[xi]=ni(fi)}catch(Ni){}return!!Ii}function ni(fi){return be.getExtension(fi)?be.getExtension(fi):be.getExtension(fi.toLowerCase())?be.getExtension(fi.toLowerCase()):null}for(var On=0;On<ar.extensions.length;++On){var Wn=ar.extensions[On];if(!Ln(Wn))return ar.onDestroy(),ar.onDone('"'+Wn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ar.optionalExtensions.forEach(Ln),{extensions:Pr,restore:function(){Object.keys(Pr).forEach(function(fi){if(Pr[fi]&&!Ln(fi))throw new Error("(regl): error restoring extension "+fi)})}}}function or(be,ar){for(var Pr=Array(be),Ln=0;Ln<be;++Ln)Pr[Ln]=ar(Ln);return Pr}var lr=5120,Be=5121,tr=5122,Mr=5123,Xr=5124,Zr=5125,tn=5126;function _n(be){for(var ar=16;ar<=1<<28;ar*=16)if(be<=ar)return ar;return 0}function $n(be){var ar,Pr;return ar=(be>65535)<<4,be>>>=ar,Pr=(be>255)<<3,be>>>=Pr,ar|=Pr,Pr=(be>15)<<2,be>>>=Pr,ar|=Pr,Pr=(be>3)<<1,be>>>=Pr,ar|=Pr,ar|be>>1}function si(){var be=or(8,function(){return[]});function ar(On){var Wn=_n(On),fi=be[$n(Wn)>>2];return fi.length>0?fi.pop():new ArrayBuffer(Wn)}function Pr(On){be[$n(On.byteLength)>>2].push(On)}function Ln(On,Wn){var fi=null;switch(On){case lr:fi=new Int8Array(ar(Wn),0,Wn);break;case Be:fi=new Uint8Array(ar(Wn),0,Wn);break;case tr:fi=new Int16Array(ar(2*Wn),0,Wn);break;case Mr:fi=new Uint16Array(ar(2*Wn),0,Wn);break;case Xr:fi=new Int32Array(ar(4*Wn),0,Wn);break;case Zr:fi=new Uint32Array(ar(4*Wn),0,Wn);break;case tn:fi=new Float32Array(ar(4*Wn),0,Wn);break;default:return null}return fi.length!==Wn?fi.subarray(0,Wn):fi}function ni(On){Pr(On.buffer)}return{alloc:ar,free:Pr,allocType:Ln,freeType:ni}}var Jr=si();Jr.zero=si();var Si=3408,Jn=3410,yi=3411,Ka=3412,ki=3413,ga=3414,ko=3415,Ci=33901,po=33902,oo=3379,cn=3386,vn=34921,Wo=36347,mo=36348,fo=35661,Po=35660,vi=34930,pa=36349,An=34076,Pe=34024,Tt=7936,ae=7937,he=7938,zt=35724,Wt=34047,de=36063,Se=34852,Ae=3553,He=34067,_r=34069,Lr=33984,wn=6408,Kr=5126,Fr=5121,pi=36160,Pi=36053,ca=36064,va=16384,ji=function(be,ar){var Pr=1;ar.ext_texture_filter_anisotropic&&(Pr=be.getParameter(Wt));var Ln=1,ni=1;ar.webgl_draw_buffers&&(Ln=be.getParameter(Se),ni=be.getParameter(de));var On=!!ar.oes_texture_float;if(On){var Wn=be.createTexture();be.bindTexture(Ae,Wn),be.texImage2D(Ae,0,wn,1,1,0,wn,Kr,null);var fi=be.createFramebuffer();if(be.bindFramebuffer(pi,fi),be.framebufferTexture2D(pi,ca,Ae,Wn,0),be.bindTexture(Ae,null),be.checkFramebufferStatus(pi)!==Pi)On=!1;else{be.viewport(0,0,1,1),be.clearColor(1,0,0,1),be.clear(va);var xi=Jr.allocType(Kr,4);be.readPixels(0,0,1,1,wn,Kr,xi),be.getError()?On=!1:(be.deleteFramebuffer(fi),be.deleteTexture(Wn),On=xi[0]===1),Jr.freeType(xi)}}var Ii=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ni=!0;if(!Ii){var zi=be.createTexture(),ra=Jr.allocType(Fr,36);be.activeTexture(Lr),be.bindTexture(He,zi),be.texImage2D(_r,0,wn,3,3,0,wn,Fr,ra),Jr.freeType(ra),be.bindTexture(He,null),be.deleteTexture(zi),Ni=!be.getError()}return{colorBits:[be.getParameter(Jn),be.getParameter(yi),be.getParameter(Ka),be.getParameter(ki)],depthBits:be.getParameter(ga),stencilBits:be.getParameter(ko),subpixelBits:be.getParameter(Si),extensions:Object.keys(ar).filter(function(Mi){return!!ar[Mi]}),maxAnisotropic:Pr,maxDrawbuffers:Ln,maxColorAttachments:ni,pointSizeDims:be.getParameter(Ci),lineWidthDims:be.getParameter(po),maxViewportDims:be.getParameter(cn),maxCombinedTextureUnits:be.getParameter(fo),maxCubeMapSize:be.getParameter(An),maxRenderbufferSize:be.getParameter(Pe),maxTextureUnits:be.getParameter(vi),maxTextureSize:be.getParameter(oo),maxAttributes:be.getParameter(vn),maxVertexUniforms:be.getParameter(Wo),maxVertexTextureUnits:be.getParameter(Po),maxVaryingVectors:be.getParameter(mo),maxFragmentUniforms:be.getParameter(pa),glsl:be.getParameter(zt),renderer:be.getParameter(ae),vendor:be.getParameter(Tt),version:be.getParameter(he),readFloat:On,npotTextureCube:Ni}};function ai(be){return!!be&&typeof be=="object"&&Array.isArray(be.shape)&&Array.isArray(be.stride)&&typeof be.offset=="number"&&be.shape.length===be.stride.length&&(Array.isArray(be.data)||j(be.data))}var Fe=function(be){return Object.keys(be).map(function(ar){return be[ar]})},er={shape:ls,flatten:no};function Ir(be,ar,Pr){for(var Ln=0;Ln<ar;++Ln)Pr[Ln]=be[Ln]}function hn(be,ar,Pr,Ln){for(var ni=0,On=0;On<ar;++On)for(var Wn=be[On],fi=0;fi<Pr;++fi)Ln[ni++]=Wn[fi]}function ci(be,ar,Pr,Ln,ni,On){for(var Wn=On,fi=0;fi<ar;++fi)for(var xi=be[fi],Ii=0;Ii<Pr;++Ii)for(var Ni=xi[Ii],zi=0;zi<Ln;++zi)ni[Wn++]=Ni[zi]}function wa(be,ar,Pr,Ln,ni){for(var On=1,Wn=Pr+1;Wn<ar.length;++Wn)On*=ar[Wn];var fi=ar[Pr];if(ar.length-Pr==4){var xi=ar[Pr+1],Ii=ar[Pr+2],Ni=ar[Pr+3];for(Wn=0;Wn<fi;++Wn)ci(be[Wn],xi,Ii,Ni,Ln,ni),ni+=On}else for(Wn=0;Wn<fi;++Wn)wa(be[Wn],ar,Pr+1,Ln,ni),ni+=On}function no(be,ar,Pr,Ln){var ni=1;if(ar.length)for(var On=0;On<ar.length;++On)ni*=ar[On];else ni=0;var Wn=Ln||Jr.allocType(Pr,ni);switch(ar.length){case 0:break;case 1:Ir(be,ar[0],Wn);break;case 2:hn(be,ar[0],ar[1],Wn);break;case 3:ci(be,ar[0],ar[1],ar[2],Wn,0);break;default:wa(be,ar,0,Wn,0)}return Wn}function ls(be){for(var ar=[],Pr=be;Pr.length;Pr=Pr[0])ar.push(Pr.length);return ar}var Jo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ps=5120,Ks=5122,Fo=5124,Vs=5121,$s=5123,zs=5125,Ou=5126,au=5126,Vu={int8:ps,int16:Ks,int32:Fo,uint8:Vs,uint16:$s,uint32:zs,float:Ou,float32:au},ou=35048,ds=35040,Ko={dynamic:ou,stream:ds,static:35044},Lu=er.flatten,Gl=er.shape,Du=35044,Wu=35040,Ul=5121,Ql=5126,Ku=[];Ku[5120]=1,Ku[5122]=2,Ku[5124]=4,Ku[5121]=1,Ku[5123]=2,Ku[5125]=4,Ku[5126]=4;function Nc(be){return Jo[Object.prototype.toString.call(be)]|0}function J(be,ar){for(var Pr=0;Pr<ar.length;++Pr)be[Pr]=ar[Pr]}function Ct(be,ar,Pr,Ln,ni,On,Wn){for(var fi=0,xi=0;xi<Pr;++xi)for(var Ii=0;Ii<Ln;++Ii)be[fi++]=ar[ni*xi+On*Ii+Wn]}function me(be,ar,Pr,Ln){var ni=0,On={};function Wn(fn){this.id=ni++,this.buffer=be.createBuffer(),this.type=fn,this.usage=Du,this.byteLength=0,this.dimension=1,this.dtype=Ul,this.persistentData=null,Pr.profile&&(this.stats={size:0})}Wn.prototype.bind=function(){be.bindBuffer(this.type,this.buffer)},Wn.prototype.destroy=function(){ra(this)};var fi=[];function xi(fn,zn){var Ai=fi.pop();return Ai||(Ai=new Wn(fn)),Ai.bind(),zi(Ai,zn,Wu,0,1,!1),Ai}function Ii(fn){fi.push(fn)}function Ni(fn,zn,Ai){fn.byteLength=zn.byteLength,be.bufferData(fn.type,zn,Ai)}function zi(fn,zn,Ai,Ki,li,Zi){var ha;if(fn.usage=Ai,Array.isArray(zn)){if(fn.dtype=Ki||Ql,zn.length>0){var ao;if(Array.isArray(zn[0])){ha=Gl(zn);for(var Xn=1,ei=1;ei<ha.length;++ei)Xn*=ha[ei];fn.dimension=Xn,ao=Lu(zn,ha,fn.dtype),Ni(fn,ao,Ai),Zi?fn.persistentData=ao:Jr.freeType(ao)}else if(typeof zn[0]=="number"){fn.dimension=li;var ka=Jr.allocType(fn.dtype,zn.length);J(ka,zn),Ni(fn,ka,Ai),Zi?fn.persistentData=ka:Jr.freeType(ka)}else j(zn[0])?(fn.dimension=zn[0].length,fn.dtype=Ki||Nc(zn[0])||Ql,ao=Lu(zn,[zn.length,zn[0].length],fn.dtype),Ni(fn,ao,Ai),Zi?fn.persistentData=ao:Jr.freeType(ao)):Ee.raise("invalid buffer data")}}else if(j(zn))fn.dtype=Ki||Nc(zn),fn.dimension=li,Ni(fn,zn,Ai),Zi&&(fn.persistentData=new Uint8Array(new Uint8Array(zn.buffer)));else if(ai(zn)){ha=zn.shape;var aa=zn.stride,Oi=zn.offset,ua=0,$i=0,Go=0,Io=0;ha.length===1?(ua=ha[0],$i=1,Go=aa[0],Io=0):ha.length===2?(ua=ha[0],$i=ha[1],Go=aa[0],Io=aa[1]):Ee.raise("invalid shape"),fn.dtype=Ki||Nc(zn.data)||Ql,fn.dimension=$i;var na=Jr.allocType(fn.dtype,ua*$i);Ct(na,zn.data,ua,$i,Go,Io,Oi),Ni(fn,na,Ai),Zi?fn.persistentData=na:Jr.freeType(na)}else zn instanceof ArrayBuffer?(fn.dtype=Ul,fn.dimension=li,Ni(fn,zn,Ai),Zi&&(fn.persistentData=new Uint8Array(new Uint8Array(zn)))):Ee.raise("invalid buffer data")}function ra(fn){ar.bufferCount--,Ln(fn);var zn=fn.buffer;Ee(zn,"buffer must not be deleted already"),be.deleteBuffer(zn),fn.buffer=null,delete On[fn.id]}function Mi(fn,zn,Ai,Ki){ar.bufferCount++;var li=new Wn(zn);On[li.id]=li;function Zi(Xn){var ei=Du,ka=null,aa=0,Oi=0,ua=1;return Array.isArray(Xn)||j(Xn)||ai(Xn)||Xn instanceof ArrayBuffer?ka=Xn:typeof Xn=="number"?aa=Xn|0:Xn&&(Ee.type(Xn,"object","buffer arguments must be an object, a number or an array"),"data"in Xn&&(Ee(ka===null||Array.isArray(ka)||j(ka)||ai(ka),"invalid data for buffer"),ka=Xn.data),"usage"in Xn&&(Ee.parameter(Xn.usage,Ko,"invalid buffer usage"),ei=Ko[Xn.usage]),"type"in Xn&&(Ee.parameter(Xn.type,Vu,"invalid buffer type"),Oi=Vu[Xn.type]),"dimension"in Xn&&(Ee.type(Xn.dimension,"number","invalid dimension"),ua=Xn.dimension|0),"length"in Xn&&(Ee.nni(aa,"buffer length must be a nonnegative integer"),aa=Xn.length|0)),li.bind(),ka?zi(li,ka,ei,Oi,ua,Ki):(aa&&be.bufferData(li.type,aa,ei),li.dtype=Oi||Ul,li.usage=ei,li.dimension=ua,li.byteLength=aa),Pr.profile&&(li.stats.size=li.byteLength*Ku[li.dtype]),Zi}function ha(Xn,ei){Ee(ei+Xn.byteLength<=li.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Xn.byteLength+" starting from offset "+ei+" to a buffer of size "+li.byteLength),be.bufferSubData(li.type,ei,Xn)}function ao(Xn,ei){var ka=(ei||0)|0,aa;if(li.bind(),j(Xn)||Xn instanceof ArrayBuffer)ha(Xn,ka);else if(Array.isArray(Xn)){if(Xn.length>0)if(typeof Xn[0]=="number"){var Oi=Jr.allocType(li.dtype,Xn.length);J(Oi,Xn),ha(Oi,ka),Jr.freeType(Oi)}else if(Array.isArray(Xn[0])||j(Xn[0])){aa=Gl(Xn);var ua=Lu(Xn,aa,li.dtype);ha(ua,ka),Jr.freeType(ua)}else Ee.raise("invalid buffer data")}else if(ai(Xn)){aa=Xn.shape;var $i=Xn.stride,Go=0,Io=0,na=0,ma=0;aa.length===1?(Go=aa[0],Io=1,na=$i[0],ma=0):aa.length===2?(Go=aa[0],Io=aa[1],na=$i[0],ma=$i[1]):Ee.raise("invalid shape");var Co=Array.isArray(Xn.data)?li.dtype:Nc(Xn.data),Do=Jr.allocType(Co,Go*Io);Ct(Do,Xn.data,Go,Io,na,ma,Xn.offset),ha(Do,ka),Jr.freeType(Do)}else Ee.raise("invalid data for buffer subdata");return Zi}return Ai||Zi(fn),Zi._reglType="buffer",Zi._buffer=li,Zi.subdata=ao,Pr.profile&&(Zi.stats=li.stats),Zi.destroy=function(){ra(li)},Zi}function Di(){Fe(On).forEach(function(fn){fn.buffer=be.createBuffer(),be.bindBuffer(fn.type,fn.buffer),be.bufferData(fn.type,fn.persistentData||fn.byteLength,fn.usage)})}return Pr.profile&&(ar.getTotalBufferSize=function(){var fn=0;return Object.keys(On).forEach(function(zn){fn+=On[zn].stats.size}),fn}),{create:Mi,createStream:xi,destroyStream:Ii,clear:function(){Fe(On).forEach(ra),fi.forEach(ra)},getBuffer:function(fn){return fn&&fn._buffer instanceof Wn?fn._buffer:null},restore:Di,_initBuffer:zi}}var jt=0,ke=0,ir=1,Gr=1,pn=4,dn=4,ti={points:jt,point:ke,lines:ir,line:Gr,triangles:pn,triangle:dn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Nn=0,Fa=1,Xa=4,Wi=5120,rs=5121,io=5122,Cs=5123,Ve=5124,pe=5125,pt=34963,Ot=35040,ee=35044;function ye(be,ar,Pr,Ln){var ni={},On=0,Wn={uint8:rs,uint16:Cs};ar.oes_element_index_uint&&(Wn.uint32=pe);function fi(Di){this.id=On++,ni[this.id]=this,this.buffer=Di,this.primType=Xa,this.vertCount=0,this.type=0}fi.prototype.bind=function(){this.buffer.bind()};var xi=[];function Ii(Di){var fn=xi.pop();return fn||(fn=new fi(Pr.create(null,pt,!0,!1)._buffer)),zi(fn,Di,Ot,-1,-1,0,0),fn}function Ni(Di){xi.push(Di)}function zi(Di,fn,zn,Ai,Ki,li,Zi){Di.buffer.bind();var ha;if(fn){var ao=Zi;!Zi&&(!j(fn)||ai(fn)&&!j(fn.data))&&(ao=ar.oes_element_index_uint?pe:Cs),Pr._initBuffer(Di.buffer,fn,zn,ao,3)}else be.bufferData(pt,li,zn),Di.buffer.dtype=ha||rs,Di.buffer.usage=zn,Di.buffer.dimension=3,Di.buffer.byteLength=li;if(ha=Zi,!Zi){switch(Di.buffer.dtype){case rs:case Wi:ha=rs;break;case Cs:case io:ha=Cs;break;case pe:case Ve:ha=pe;break;default:Ee.raise("unsupported type for element array")}Di.buffer.dtype=ha}Di.type=ha,Ee(ha!==pe||!!ar.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Xn=Ki;Xn<0&&(Xn=Di.buffer.byteLength,ha===Cs?Xn>>=1:ha===pe&&(Xn>>=2)),Di.vertCount=Xn;var ei=Ai;if(Ai<0){ei=Xa;var ka=Di.buffer.dimension;ka===1&&(ei=Nn),ka===2&&(ei=Fa),ka===3&&(ei=Xa)}Di.primType=ei}function ra(Di){Ln.elementsCount--,Ee(Di.buffer!==null,"must not double destroy elements"),delete ni[Di.id],Di.buffer.destroy(),Di.buffer=null}function Mi(Di,fn){var zn=Pr.create(null,pt,!0),Ai=new fi(zn._buffer);Ln.elementsCount++;function Ki(li){if(!li)zn(),Ai.primType=Xa,Ai.vertCount=0,Ai.type=rs;else if(typeof li=="number")zn(li),Ai.primType=Xa,Ai.vertCount=li|0,Ai.type=rs;else{var Zi=null,ha=ee,ao=-1,Xn=-1,ei=0,ka=0;Array.isArray(li)||j(li)||ai(li)?Zi=li:(Ee.type(li,"object","invalid arguments for elements"),"data"in li&&(Zi=li.data,Ee(Array.isArray(Zi)||j(Zi)||ai(Zi),"invalid data for element buffer")),"usage"in li&&(Ee.parameter(li.usage,Ko,"invalid element buffer usage"),ha=Ko[li.usage]),"primitive"in li&&(Ee.parameter(li.primitive,ti,"invalid element buffer primitive"),ao=ti[li.primitive]),"count"in li&&(Ee(typeof li.count=="number"&&li.count>=0,"invalid vertex count for elements"),Xn=li.count|0),"type"in li&&(Ee.parameter(li.type,Wn,"invalid buffer type"),ka=Wn[li.type]),"length"in li?ei=li.length|0:(ei=Xn,ka===Cs||ka===io?ei*=2:(ka===pe||ka===Ve)&&(ei*=4))),zi(Ai,Zi,ha,ao,Xn,ei,ka)}return Ki}return Ki(Di),Ki._reglType="elements",Ki._elements=Ai,Ki.subdata=function(li,Zi){return zn.subdata(li,Zi),Ki},Ki.destroy=function(){ra(Ai)},Ki}return{create:Mi,createStream:Ii,destroyStream:Ni,getElements:function(Di){return typeof Di=="function"&&Di._elements instanceof fi?Di._elements:null},clear:function(){Fe(ni).forEach(ra)}}}var Ne=new Float32Array(1),Ye=new Uint32Array(Ne.buffer),hr=5123;function Er(be){for(var ar=Jr.allocType(hr,be.length),Pr=0;Pr<be.length;++Pr)if(isNaN(be[Pr]))ar[Pr]=65535;else if(be[Pr]===Infinity)ar[Pr]=31744;else if(be[Pr]===-Infinity)ar[Pr]=64512;else{Ne[0]=be[Pr];var Ln=Ye[0],ni=Ln>>>31<<15,On=(Ln<<1>>>24)-127,Wn=Ln>>13&(1<<10)-1;if(On<-24)ar[Pr]=ni;else if(On<-14){var fi=-14-On;ar[Pr]=ni+(Wn+(1<<10)>>fi)}else On>15?ar[Pr]=ni+31744:ar[Pr]=ni+(On+15<<10)+Wn}return ar}function Hr(be){return Array.isArray(be)||j(be)}var bn=function(be){return!(be&be-1)&&!!be},ri=34467,qn=3553,da=34067,Ya=34069,Ra=6408,ts=6406,$o=6407,Aa=6409,Le=6410,gr=32854,Dr=32855,on=36194,Yn=32819,ia=32820,vo=33635,As=34042,Bu=6402,Cl=34041,Al=35904,zc=35906,Sh=36193,nf=33776,Zu=33777,tp=33778,qp=33779,Md=35986,Vl=35987,wh=34798,Ip=35840,Jp=35841,Eh=35842,yg=35843,Ch=36196,Xf=5121,Op=5123,Ah=5125,Ft=5126,Lp=10242,Sv=10243,wv=10497,ep=33071,Ev=33648,wf=10240,Ms=10241,rp=9728,Ds=9729,af=9984,vs=9985,Qs=9986,ks=9987,of=33170,Ef=4352,lu=4353,np=4354,Yf=34046,fc=3317,kp=37440,sf=37441,Hu=37443,Wf=37444,Mh=33984,Fu=[af,Qs,vs,ks],Ma=[0,Aa,Le,$o,Ra],pu={};pu[Aa]=pu[ts]=pu[Bu]=1,pu[Cl]=pu[Le]=2,pu[$o]=pu[Al]=3,pu[Ra]=pu[zc]=4;function uf(be){return"[object "+be+"]"}var Gs=uf("HTMLCanvasElement"),ql=uf("OffscreenCanvas"),oc=uf("CanvasRenderingContext2D"),td=uf("ImageBitmap"),Qi=uf("HTMLImageElement"),Ec=uf("HTMLVideoElement"),ws=Object.keys(Jo).concat([Gs,ql,oc,td,Qi,Ec]),lf=[];lf[Xf]=1,lf[Ft]=4,lf[Sh]=2,lf[Op]=2,lf[Ah]=4;var Js=[];Js[gr]=2,Js[Dr]=2,Js[on]=2,Js[Cl]=4,Js[nf]=.5,Js[Zu]=.5,Js[tp]=1,Js[qp]=1,Js[Md]=.5,Js[Vl]=1,Js[wh]=1,Js[Ip]=.5,Js[Jp]=.25,Js[Eh]=.5,Js[yg]=.25,Js[Ch]=.5;function Zl(be){return Array.isArray(be)&&(be.length===0||typeof be[0]=="number")}function Kf(be){if(!Array.isArray(be))return!1;var ar=be.length;return!(ar===0||!Hr(be[0]))}function cf(be){return Object.prototype.toString.call(be)}function hc(be){return cf(be)===Gs}function Rl(be){return cf(be)===ql}function ip(be){return cf(be)===oc}function ff(be){return cf(be)===td}function ed(be){return cf(be)===Qi}function Td(be){return cf(be)===Ec}function Gc(be){var ar=typeof my!="undefined"&&!!my&&typeof my.showToast=="function";return!!(ar&&be&&be.getContext)}function sc(be){var ar=typeof my!="undefined"&&!!my&&typeof my.showToast=="function";return!!(ar&&be&&"src"in be&&"crossOrigin"in be)}function Qo(be){if(!be)return!1;if(Gc(be)||sc(be))return!0;var ar=cf(be);return ws.indexOf(ar)>=0?!0:Zl(be)||Kf(be)||ai(be)}function hf(be){return Jo[Object.prototype.toString.call(be)]|0}function Uc(be,ar){var Pr=ar.length;switch(be.type){case Xf:case Op:case Ah:case Ft:var Ln=Jr.allocType(be.type,Pr);Ln.set(ar),be.data=Ln;break;case Sh:be.data=Er(ar);break;default:Ee.raise("unsupported texture type, must specify a typed array")}}function $u(be,ar){return Jr.allocType(be.type===Sh?Ft:be.type,ar)}function $f(be,ar){be.type===Sh?(be.data=Er(ar),Jr.freeType(ar)):be.data=ar}function Hl(be,ar,Pr,Ln,ni,On){for(var Wn=be.width,fi=be.height,xi=be.channels,Ii=Wn*fi*xi,Ni=$u(be,Ii),zi=0,ra=0;ra<fi;++ra)for(var Mi=0;Mi<Wn;++Mi)for(var Di=0;Di<xi;++Di)Ni[zi++]=ar[Pr*Mi+Ln*ra+ni*Di+On];$f(be,Ni)}function Ml(be,ar,Pr,Ln,ni,On){var Wn;if(typeof Js[be]!="undefined"?Wn=Js[be]:Wn=pu[be]*lf[ar],On&&(Wn*=6),ni){for(var fi=0,xi=Pr;xi>=1;)fi+=Wn*xi*xi,xi/=2;return fi}else return Wn*Pr*Ln}function cs(be,ar,Pr,Ln,ni,On,Wn){var fi={"don't care":Ef,"dont care":Ef,nice:np,fast:lu},xi={repeat:wv,clamp:ep,mirror:Ev},Ii={nearest:rp,linear:Ds},Ni=y({mipmap:ks,"nearest mipmap nearest":af,"linear mipmap nearest":vs,"nearest mipmap linear":Qs,"linear mipmap linear":ks},Ii),zi={none:0,browser:Wf},ra={uint8:Xf,rgba4:Yn,rgb565:vo,"rgb5 a1":ia},Mi={alpha:ts,luminance:Aa,"luminance alpha":Le,rgb:$o,rgba:Ra,rgba4:gr,"rgb5 a1":Dr,rgb565:on},Di={};ar.ext_srgb&&(Mi.srgb=Al,Mi.srgba=zc),ar.oes_texture_float&&(ra.float32=ra.float=Ft),ar.oes_texture_half_float&&(ra.float16=ra["half float"]=Sh),ar.webgl_depth_texture&&(y(Mi,{depth:Bu,"depth stencil":Cl}),y(ra,{uint16:Op,uint32:Ah,"depth stencil":As})),ar.webgl_compressed_texture_s3tc&&y(Di,{"rgb s3tc dxt1":nf,"rgba s3tc dxt1":Zu,"rgba s3tc dxt3":tp,"rgba s3tc dxt5":qp}),ar.webgl_compressed_texture_atc&&y(Di,{"rgb atc":Md,"rgba atc explicit alpha":Vl,"rgba atc interpolated alpha":wh}),ar.webgl_compressed_texture_pvrtc&&y(Di,{"rgb pvrtc 4bppv1":Ip,"rgb pvrtc 2bppv1":Jp,"rgba pvrtc 4bppv1":Eh,"rgba pvrtc 2bppv1":yg}),ar.webgl_compressed_texture_etc1&&(Di["rgb etc1"]=Ch);var fn=Array.prototype.slice.call(be.getParameter(ri)||new Uint32Array(0));Object.keys(Di).forEach(function(yr){var Dn=Di[yr];fn.indexOf(Dn)>=0&&(Mi[yr]=Dn)});var zn=Object.keys(Mi);Pr.textureFormats=zn;var Ai=[];Object.keys(Mi).forEach(function(yr){var Dn=Mi[yr];Ai[Dn]=yr});var Ki=[];Object.keys(ra).forEach(function(yr){var Dn=ra[yr];Ki[Dn]=yr});var li=[];Object.keys(Ii).forEach(function(yr){var Dn=Ii[yr];li[Dn]=yr});var Zi=[];Object.keys(Ni).forEach(function(yr){var Dn=Ni[yr];Zi[Dn]=yr});var ha=[];Object.keys(xi).forEach(function(yr){var Dn=xi[yr];ha[Dn]=yr});var ao=zn.reduce(function(yr,Dn){var Mn=Mi[Dn];return Mn===Aa||Mn===ts||Mn===Aa||Mn===Le||Mn===Bu||Mn===Cl||ar.ext_srgb&&(Mn===Al||Mn===zc)?yr[Mn]=Mn:Mn===Dr||Dn.indexOf("rgba")>=0?yr[Mn]=Ra:yr[Mn]=$o,yr},{});function Xn(){this.internalformat=Ra,this.format=Ra,this.type=Xf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Wf,this.width=0,this.height=0,this.channels=0}function ei(yr,Dn){yr.internalformat=Dn.internalformat,yr.format=Dn.format,yr.type=Dn.type,yr.compressed=Dn.compressed,yr.premultiplyAlpha=Dn.premultiplyAlpha,yr.flipY=Dn.flipY,yr.unpackAlignment=Dn.unpackAlignment,yr.colorSpace=Dn.colorSpace,yr.width=Dn.width,yr.height=Dn.height,yr.channels=Dn.channels}function ka(yr,Dn){if(!(typeof Dn!="object"||!Dn)){if("premultiplyAlpha"in Dn&&(Ee.type(Dn.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),yr.premultiplyAlpha=Dn.premultiplyAlpha),"flipY"in Dn&&(Ee.type(Dn.flipY,"boolean","invalid texture flip"),yr.flipY=Dn.flipY),"alignment"in Dn&&(Ee.oneOf(Dn.alignment,[1,2,4,8],"invalid texture unpack alignment"),yr.unpackAlignment=Dn.alignment),"colorSpace"in Dn&&(Ee.parameter(Dn.colorSpace,zi,"invalid colorSpace"),yr.colorSpace=zi[Dn.colorSpace]),"type"in Dn){var Mn=Dn.type;Ee(ar.oes_texture_float||!(Mn==="float"||Mn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ee(ar.oes_texture_half_float||!(Mn==="half float"||Mn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ee(ar.webgl_depth_texture||!(Mn==="uint16"||Mn==="uint32"||Mn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ee.parameter(Mn,ra,"invalid texture type"),yr.type=ra[Mn]}var Ta=yr.width,fs=yr.height,cr=yr.channels,Je=!1;"shape"in Dn?(Ee(Array.isArray(Dn.shape)&&Dn.shape.length>=2,"shape must be an array"),Ta=Dn.shape[0],fs=Dn.shape[1],Dn.shape.length===3&&(cr=Dn.shape[2],Ee(cr>0&&cr<=4,"invalid number of channels"),Je=!0),Ee(Ta>=0&&Ta<=Pr.maxTextureSize,"invalid width"),Ee(fs>=0&&fs<=Pr.maxTextureSize,"invalid height")):("radius"in Dn&&(Ta=fs=Dn.radius,Ee(Ta>=0&&Ta<=Pr.maxTextureSize,"invalid radius")),"width"in Dn&&(Ta=Dn.width,Ee(Ta>=0&&Ta<=Pr.maxTextureSize,"invalid width")),"height"in Dn&&(fs=Dn.height,Ee(fs>=0&&fs<=Pr.maxTextureSize,"invalid height")),"channels"in Dn&&(cr=Dn.channels,Ee(cr>0&&cr<=4,"invalid number of channels"),Je=!0)),yr.width=Ta|0,yr.height=fs|0,yr.channels=cr|0;var Nr=!1;if("format"in Dn){var gn=Dn.format;Ee(ar.webgl_depth_texture||!(gn==="depth"||gn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ee.parameter(gn,Mi,"invalid texture format");var In=yr.internalformat=Mi[gn];yr.format=ao[In],gn in ra&&("type"in Dn||(yr.type=ra[gn])),gn in Di&&(yr.compressed=!0),Nr=!0}!Je&&Nr?yr.channels=pu[yr.format]:Je&&!Nr?yr.channels!==Ma[yr.format]&&(yr.format=yr.internalformat=Ma[yr.channels]):Nr&&Je&&Ee(yr.channels===pu[yr.format],"number of channels inconsistent with specified format")}}function aa(yr){be.pixelStorei(kp,yr.flipY),be.pixelStorei(sf,yr.premultiplyAlpha),be.pixelStorei(Hu,yr.colorSpace),be.pixelStorei(fc,yr.unpackAlignment)}function Oi(){Xn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ua(yr,Dn){var Mn=null;if(Qo(Dn)?Mn=Dn:Dn&&(Ee.type(Dn,"object","invalid pixel data type"),ka(yr,Dn),"x"in Dn&&(yr.xOffset=Dn.x|0),"y"in Dn&&(yr.yOffset=Dn.y|0),Qo(Dn.data)&&(Mn=Dn.data)),Ee(!yr.compressed||Mn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Dn.copy){Ee(!Mn,"can not specify copy and data field for the same texture");var Ta=ni.viewportWidth,fs=ni.viewportHeight;yr.width=yr.width||Ta-yr.xOffset,yr.height=yr.height||fs-yr.yOffset,yr.needsCopy=!0,Ee(yr.xOffset>=0&&yr.xOffset<Ta&&yr.yOffset>=0&&yr.yOffset<fs&&yr.width>0&&yr.width<=Ta&&yr.height>0&&yr.height<=fs,"copy texture read out of bounds")}else if(!Mn)yr.width=yr.width||1,yr.height=yr.height||1,yr.channels=yr.channels||4;else if(j(Mn))yr.channels=yr.channels||4,yr.data=Mn,!("type"in Dn)&&yr.type===Xf&&(yr.type=hf(Mn));else if(Zl(Mn))yr.channels=yr.channels||4,Uc(yr,Mn),yr.alignment=1,yr.needsFree=!0;else if(ai(Mn)){var cr=Mn.data;!Array.isArray(cr)&&yr.type===Xf&&(yr.type=hf(cr));var Je=Mn.shape,Nr=Mn.stride,gn,In,Yr,Tr,rn,ur;Je.length===3?(Yr=Je[2],ur=Nr[2]):(Ee(Je.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Yr=1,ur=1),gn=Je[0],In=Je[1],Tr=Nr[0],rn=Nr[1],yr.alignment=1,yr.width=gn,yr.height=In,yr.channels=Yr,yr.format=yr.internalformat=Ma[Yr],yr.needsFree=!0,Hl(yr,cr,Tr,rn,ur,Mn.offset)}else if(Gc(Mn)||hc(Mn)||Rl(Mn)||ip(Mn))Gc(Mn)||hc(Mn)||Rl(Mn)?yr.element=Mn:yr.element=Mn.canvas,yr.width=yr.element.width,yr.height=yr.element.height,yr.channels=4;else if(ff(Mn))yr.element=Mn,yr.width=Mn.width,yr.height=Mn.height,yr.channels=4;else if(ed(Mn))yr.element=Mn,yr.width=Mn.naturalWidth,yr.height=Mn.naturalHeight,yr.channels=4;else if(sc(Mn))yr.element=Mn,yr.width=Mn.width,yr.height=Mn.height,yr.channels=4;else if(Td(Mn))yr.element=Mn,yr.width=Mn.videoWidth,yr.height=Mn.videoHeight,yr.channels=4;else if(Kf(Mn)){var Rr=yr.width||Mn[0].length,vr=yr.height||Mn.length,mn=yr.channels;Hr(Mn[0][0])?mn=mn||Mn[0][0].length:mn=mn||1;for(var Cn=er.shape(Mn),hi=1,Ji=0;Ji<Cn.length;++Ji)hi*=Cn[Ji];var qi=$u(yr,hi);er.flatten(Mn,Cn,"",qi),$f(yr,qi),yr.alignment=1,yr.width=Rr,yr.height=vr,yr.channels=mn,yr.format=yr.internalformat=Ma[mn],yr.needsFree=!0}yr.type===Ft?Ee(Pr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):yr.type===Sh&&Ee(Pr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function $i(yr,Dn,Mn){var Ta=yr.element,fs=yr.data,cr=yr.internalformat,Je=yr.format,Nr=yr.type,gn=yr.width,In=yr.height;aa(yr),Ta?be.texImage2D(Dn,Mn,Je,Je,Nr,Ta):yr.compressed?be.compressedTexImage2D(Dn,Mn,cr,gn,In,0,fs):yr.needsCopy?(Ln(),be.copyTexImage2D(Dn,Mn,Je,yr.xOffset,yr.yOffset,gn,In,0)):be.texImage2D(Dn,Mn,Je,gn,In,0,Je,Nr,fs||null)}function Go(yr,Dn,Mn,Ta,fs){var cr=yr.element,Je=yr.data,Nr=yr.internalformat,gn=yr.format,In=yr.type,Yr=yr.width,Tr=yr.height;aa(yr),cr?be.texSubImage2D(Dn,fs,Mn,Ta,gn,In,cr):yr.compressed?be.compressedTexSubImage2D(Dn,fs,Mn,Ta,Nr,Yr,Tr,Je):yr.needsCopy?(Ln(),be.copyTexSubImage2D(Dn,fs,Mn,Ta,yr.xOffset,yr.yOffset,Yr,Tr)):be.texSubImage2D(Dn,fs,Mn,Ta,Yr,Tr,gn,In,Je)}var Io=[];function na(){return Io.pop()||new Oi}function ma(yr){yr.needsFree&&Jr.freeType(yr.data),Oi.call(yr),Io.push(yr)}function Co(){Xn.call(this),this.genMipmaps=!1,this.mipmapHint=Ef,this.mipmask=0,this.images=Array(16)}function Do(yr,Dn,Mn){var Ta=yr.images[0]=na();yr.mipmask=1,Ta.width=yr.width=Dn,Ta.height=yr.height=Mn,Ta.channels=yr.channels=4}function os(yr,Dn){var Mn=null;if(Qo(Dn))Mn=yr.images[0]=na(),ei(Mn,yr),ua(Mn,Dn),yr.mipmask=1;else if(ka(yr,Dn),Array.isArray(Dn.mipmap))for(var Ta=Dn.mipmap,fs=0;fs<Ta.length;++fs)Mn=yr.images[fs]=na(),ei(Mn,yr),Mn.width>>=fs,Mn.height>>=fs,ua(Mn,Ta[fs]),yr.mipmask|=1<<fs;else Mn=yr.images[0]=na(),ei(Mn,yr),ua(Mn,Dn),yr.mipmask=1;ei(yr,yr.images[0]),yr.compressed&&(yr.internalformat===nf||yr.internalformat===Zu||yr.internalformat===tp||yr.internalformat===qp)&&Ee(yr.width%4==0&&yr.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ku(yr,Dn){for(var Mn=yr.images,Ta=0;Ta<Mn.length;++Ta){if(!Mn[Ta])return;$i(Mn[Ta],Dn,Ta)}}var zu=[];function ss(){var yr=zu.pop()||new Co;Xn.call(yr),yr.mipmask=0;for(var Dn=0;Dn<16;++Dn)yr.images[Dn]=null;return yr}function Dl(yr){for(var Dn=yr.images,Mn=0;Mn<Dn.length;++Mn)Dn[Mn]&&ma(Dn[Mn]),Dn[Mn]=null;zu.push(yr)}function yu(){this.minFilter=rp,this.magFilter=rp,this.wrapS=ep,this.wrapT=ep,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ef}function Tl(yr,Dn){if("min"in Dn){var Mn=Dn.min;Ee.parameter(Mn,Ni),yr.minFilter=Ni[Mn],Fu.indexOf(yr.minFilter)>=0&&!("faces"in Dn)&&(yr.genMipmaps=!0)}if("mag"in Dn){var Ta=Dn.mag;Ee.parameter(Ta,Ii),yr.magFilter=Ii[Ta]}var fs=yr.wrapS,cr=yr.wrapT;if("wrap"in Dn){var Je=Dn.wrap;typeof Je=="string"?(Ee.parameter(Je,xi),fs=cr=xi[Je]):Array.isArray(Je)&&(Ee.parameter(Je[0],xi),Ee.parameter(Je[1],xi),fs=xi[Je[0]],cr=xi[Je[1]])}else{if("wrapS"in Dn){var Nr=Dn.wrapS;Ee.parameter(Nr,xi),fs=xi[Nr]}if("wrapT"in Dn){var gn=Dn.wrapT;Ee.parameter(gn,xi),cr=xi[gn]}}if(yr.wrapS=fs,yr.wrapT=cr,"anisotropic"in Dn){var In=Dn.anisotropic;Ee(typeof In=="number"&&In>=1&&In<=Pr.maxAnisotropic,"aniso samples must be between 1 and "),yr.anisotropic=Dn.anisotropic}if("mipmap"in Dn){var Yr=!1;switch(typeof Dn.mipmap){case"string":Ee.parameter(Dn.mipmap,fi,"invalid mipmap hint"),yr.mipmapHint=fi[Dn.mipmap],yr.genMipmaps=!0,Yr=!0;break;case"boolean":Yr=yr.genMipmaps=Dn.mipmap;break;case"object":Ee(Array.isArray(Dn.mipmap),"invalid mipmap type"),yr.genMipmaps=!1,Yr=!0;break;default:Ee.raise("invalid mipmap type")}Yr&&!("min"in Dn)&&(yr.minFilter=af)}}function ul(yr,Dn){be.texParameteri(Dn,Ms,yr.minFilter),be.texParameteri(Dn,wf,yr.magFilter),be.texParameteri(Dn,Lp,yr.wrapS),be.texParameteri(Dn,Sv,yr.wrapT),ar.ext_texture_filter_anisotropic&&be.texParameteri(Dn,Yf,yr.anisotropic),yr.genMipmaps&&(be.hint(of,yr.mipmapHint),be.generateMipmap(Dn))}var Pl=0,ll={},ml=Pr.maxTextureUnits,xu=Array(ml).map(function(){return null});function Uo(yr){Xn.call(this),this.mipmask=0,this.internalformat=Ra,this.id=Pl++,this.refCount=1,this.target=yr,this.texture=be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new yu,Wn.profile&&(this.stats={size:0})}function yl(yr){be.activeTexture(Mh),be.bindTexture(yr.target,yr.texture)}function Is(){var yr=xu[0];yr?be.bindTexture(yr.target,yr.texture):be.bindTexture(qn,null)}function cl(yr){var Dn=yr.texture;Ee(Dn,"must not double destroy texture");var Mn=yr.unit,Ta=yr.target;Mn>=0&&(be.activeTexture(Mh+Mn),be.bindTexture(Ta,null),xu[Mn]=null),be.deleteTexture(Dn),yr.texture=null,yr.params=null,yr.pixels=null,yr.refCount=0,delete ll[yr.id],On.textureCount--}y(Uo.prototype,{bind:function(){var yr=this;yr.bindCount+=1;var Dn=yr.unit;if(Dn<0){for(var Mn=0;Mn<ml;++Mn){var Ta=xu[Mn];if(Ta){if(Ta.bindCount>0)continue;Ta.unit=-1}xu[Mn]=yr,Dn=Mn;break}Dn>=ml&&Ee.raise("insufficient number of texture units"),Wn.profile&&On.maxTextureUnits<Dn+1&&(On.maxTextureUnits=Dn+1),yr.unit=Dn,be.activeTexture(Mh+Dn),be.bindTexture(yr.target,yr.texture)}return Dn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&cl(this)}});function Xi(yr,Dn){var Mn=new Uo(qn);ll[Mn.id]=Mn,On.textureCount++;function Ta(Je,Nr){var gn=Mn.texInfo;yu.call(gn);var In=ss();return typeof Je=="number"?typeof Nr=="number"?Do(In,Je|0,Nr|0):Do(In,Je|0,Je|0):Je?(Ee.type(Je,"object","invalid arguments to regl.texture"),Tl(gn,Je),os(In,Je)):Do(In,1,1),gn.genMipmaps&&(In.mipmask=(In.width<<1)-1),Mn.mipmask=In.mipmask,ei(Mn,In),Ee.texture2D(gn,In,Pr),Mn.internalformat=In.internalformat,Ta.width=In.width,Ta.height=In.height,yl(Mn),ku(In,qn),ul(gn,qn),Is(),Dl(In),Wn.profile&&(Mn.stats.size=Ml(Mn.internalformat,Mn.type,In.width,In.height,gn.genMipmaps,!1)),Ta.format=Ai[Mn.internalformat],Ta.type=Ki[Mn.type],Ta.mag=li[gn.magFilter],Ta.min=Zi[gn.minFilter],Ta.wrapS=ha[gn.wrapS],Ta.wrapT=ha[gn.wrapT],Ta}function fs(Je,Nr,gn,In){Ee(!!Je,"must specify image data");var Yr=Nr|0,Tr=gn|0,rn=In|0,ur=na();return ei(ur,Mn),ur.width=0,ur.height=0,ua(ur,Je),ur.width=ur.width||(Mn.width>>rn)-Yr,ur.height=ur.height||(Mn.height>>rn)-Tr,Ee(Mn.type===ur.type&&Mn.format===ur.format&&Mn.internalformat===ur.internalformat,"incompatible format for texture.subimage"),Ee(Yr>=0&&Tr>=0&&Yr+ur.width<=Mn.width&&Tr+ur.height<=Mn.height,"texture.subimage write out of bounds"),Ee(Mn.mipmask&1<<rn,"missing mipmap data"),Ee(ur.data||ur.element||ur.needsCopy,"missing image data"),yl(Mn),Go(ur,qn,Yr,Tr,rn),Is(),ma(ur),Ta}function cr(Je,Nr){var gn=Je|0,In=Nr|0||gn;if(gn===Mn.width&&In===Mn.height)return Ta;Ta.width=Mn.width=gn,Ta.height=Mn.height=In,yl(Mn);for(var Yr=0;Mn.mipmask>>Yr;++Yr){var Tr=gn>>Yr,rn=In>>Yr;if(!Tr||!rn)break;be.texImage2D(qn,Yr,Mn.format,Tr,rn,0,Mn.format,Mn.type,null)}return Is(),Wn.profile&&(Mn.stats.size=Ml(Mn.internalformat,Mn.type,gn,In,!1,!1)),Ta}return Ta(yr,Dn),Ta.subimage=fs,Ta.resize=cr,Ta._reglType="texture2d",Ta._texture=Mn,Wn.profile&&(Ta.stats=Mn.stats),Ta.destroy=function(){Mn.decRef()},Ta}function ya(yr,Dn,Mn,Ta,fs,cr){var Je=new Uo(da);ll[Je.id]=Je,On.cubeCount++;var Nr=new Array(6);function gn(Tr,rn,ur,Rr,vr,mn){var Cn,hi=Je.texInfo;for(yu.call(hi),Cn=0;Cn<6;++Cn)Nr[Cn]=ss();if(typeof Tr=="number"||!Tr){var Ji=Tr|0||1;for(Cn=0;Cn<6;++Cn)Do(Nr[Cn],Ji,Ji)}else if(typeof Tr=="object")if(rn)os(Nr[0],Tr),os(Nr[1],rn),os(Nr[2],ur),os(Nr[3],Rr),os(Nr[4],vr),os(Nr[5],mn);else if(Tl(hi,Tr),ka(Je,Tr),"faces"in Tr){var qi=Tr.faces;for(Ee(Array.isArray(qi)&&qi.length===6,"cube faces must be a length 6 array"),Cn=0;Cn<6;++Cn)Ee(typeof qi[Cn]=="object"&&!!qi[Cn],"invalid input for cube map face"),ei(Nr[Cn],Je),os(Nr[Cn],qi[Cn])}else for(Cn=0;Cn<6;++Cn)os(Nr[Cn],Tr);else Ee.raise("invalid arguments to cube map");for(ei(Je,Nr[0]),Ee.optional(function(){Pr.npotTextureCube||Ee(bn(Je.width)&&bn(Je.height),"your browser does not support non power or two texture dimensions")}),hi.genMipmaps?Je.mipmask=(Nr[0].width<<1)-1:Je.mipmask=Nr[0].mipmask,Ee.textureCube(Je,hi,Nr,Pr),Je.internalformat=Nr[0].internalformat,gn.width=Nr[0].width,gn.height=Nr[0].height,yl(Je),Cn=0;Cn<6;++Cn)ku(Nr[Cn],Ya+Cn);for(ul(hi,da),Is(),Wn.profile&&(Je.stats.size=Ml(Je.internalformat,Je.type,gn.width,gn.height,hi.genMipmaps,!0)),gn.format=Ai[Je.internalformat],gn.type=Ki[Je.type],gn.mag=li[hi.magFilter],gn.min=Zi[hi.minFilter],gn.wrapS=ha[hi.wrapS],gn.wrapT=ha[hi.wrapT],Cn=0;Cn<6;++Cn)Dl(Nr[Cn]);return gn}function In(Tr,rn,ur,Rr,vr){Ee(!!rn,"must specify image data"),Ee(typeof Tr=="number"&&Tr===(Tr|0)&&Tr>=0&&Tr<6,"invalid face");var mn=ur|0,Cn=Rr|0,hi=vr|0,Ji=na();return ei(Ji,Je),Ji.width=0,Ji.height=0,ua(Ji,rn),Ji.width=Ji.width||(Je.width>>hi)-mn,Ji.height=Ji.height||(Je.height>>hi)-Cn,Ee(Je.type===Ji.type&&Je.format===Ji.format&&Je.internalformat===Ji.internalformat,"incompatible format for texture.subimage"),Ee(mn>=0&&Cn>=0&&mn+Ji.width<=Je.width&&Cn+Ji.height<=Je.height,"texture.subimage write out of bounds"),Ee(Je.mipmask&1<<hi,"missing mipmap data"),Ee(Ji.data||Ji.element||Ji.needsCopy,"missing image data"),yl(Je),Go(Ji,Ya+Tr,mn,Cn,hi),Is(),ma(Ji),gn}function Yr(Tr){var rn=Tr|0;if(rn!==Je.width){gn.width=Je.width=rn,gn.height=Je.height=rn,yl(Je);for(var ur=0;ur<6;++ur)for(var Rr=0;Je.mipmask>>Rr;++Rr)be.texImage2D(Ya+ur,Rr,Je.format,rn>>Rr,rn>>Rr,0,Je.format,Je.type,null);return Is(),Wn.profile&&(Je.stats.size=Ml(Je.internalformat,Je.type,gn.width,gn.height,!1,!0)),gn}}return gn(yr,Dn,Mn,Ta,fs,cr),gn.subimage=In,gn.resize=Yr,gn._reglType="textureCube",gn._texture=Je,Wn.profile&&(gn.stats=Je.stats),gn.destroy=function(){Je.decRef()},gn}function Bs(){for(var yr=0;yr<ml;++yr)be.activeTexture(Mh+yr),be.bindTexture(qn,null),xu[yr]=null;Fe(ll).forEach(cl),On.cubeCount=0,On.textureCount=0}Wn.profile&&(On.getTotalTextureSize=function(){var yr=0;return Object.keys(ll).forEach(function(Dn){yr+=ll[Dn].stats.size}),yr});function fl(){for(var yr=0;yr<ml;++yr){var Dn=xu[yr];Dn&&(Dn.bindCount=0,Dn.unit=-1,xu[yr]=null)}Fe(ll).forEach(function(Mn){Mn.texture=be.createTexture(),be.bindTexture(Mn.target,Mn.texture);for(var Ta=0;Ta<32;++Ta)if((Mn.mipmask&1<<Ta)!=0)if(Mn.target===qn)be.texImage2D(qn,Ta,Mn.internalformat,Mn.width>>Ta,Mn.height>>Ta,0,Mn.internalformat,Mn.type,null);else for(var fs=0;fs<6;++fs)be.texImage2D(Ya+fs,Ta,Mn.internalformat,Mn.width>>Ta,Mn.height>>Ta,0,Mn.internalformat,Mn.type,null);ul(Mn.texInfo,Mn.target)})}function lh(){for(var yr=0;yr<ml;++yr){var Dn=xu[yr];Dn&&(Dn.bindCount=0,Dn.unit=-1,xu[yr]=null),be.activeTexture(Mh+yr),be.bindTexture(qn,null),be.bindTexture(da,null)}}return{create2D:Xi,createCube:ya,clear:Bs,getTexture:function(yr){return null},restore:fl,refresh:lh}}var Qu=36161,Wa=32854,za=32855,qu=36194,Zo=33189,uc=36168,Rs=34041,gs=35907,rd=34836,nd=34842,Zs=34843,Hs=[];Hs[Wa]=2,Hs[za]=2,Hs[qu]=2,Hs[Zo]=2,Hs[uc]=1,Hs[Rs]=4,Hs[gs]=4,Hs[rd]=16,Hs[nd]=8,Hs[Zs]=6;function Cv(be,ar,Pr){return Hs[be]*ar*Pr}var Cf=function(be,ar,Pr,Ln,ni){var On={rgba4:Wa,rgb565:qu,"rgb5 a1":za,depth:Zo,stencil:uc,"depth stencil":Rs};ar.ext_srgb&&(On.srgba=gs),ar.ext_color_buffer_half_float&&(On.rgba16f=nd,On.rgb16f=Zs),ar.webgl_color_buffer_float&&(On.rgba32f=rd);var Wn=[];Object.keys(On).forEach(function(Mi){var Di=On[Mi];Wn[Di]=Mi});var fi=0,xi={};function Ii(Mi){this.id=fi++,this.refCount=1,this.renderbuffer=Mi,this.format=Wa,this.width=0,this.height=0,ni.profile&&(this.stats={size:0})}Ii.prototype.decRef=function(){--this.refCount<=0&&Ni(this)};function Ni(Mi){var Di=Mi.renderbuffer;Ee(Di,"must not double destroy renderbuffer"),be.bindRenderbuffer(Qu,null),be.deleteRenderbuffer(Di),Mi.renderbuffer=null,Mi.refCount=0,delete xi[Mi.id],Ln.renderbufferCount--}function zi(Mi,Di){var fn=new Ii(be.createRenderbuffer());xi[fn.id]=fn,Ln.renderbufferCount++;function zn(Ki,li){var Zi=0,ha=0,ao=Wa;if(typeof Ki=="object"&&Ki){var Xn=Ki;if("shape"in Xn){var ei=Xn.shape;Ee(Array.isArray(ei)&&ei.length>=2,"invalid renderbuffer shape"),Zi=ei[0]|0,ha=ei[1]|0}else"radius"in Xn&&(Zi=ha=Xn.radius|0),"width"in Xn&&(Zi=Xn.width|0),"height"in Xn&&(ha=Xn.height|0);"format"in Xn&&(Ee.parameter(Xn.format,On,"invalid renderbuffer format"),ao=On[Xn.format])}else typeof Ki=="number"?(Zi=Ki|0,typeof li=="number"?ha=li|0:ha=Zi):Ki?Ee.raise("invalid arguments to renderbuffer constructor"):Zi=ha=1;if(Ee(Zi>0&&ha>0&&Zi<=Pr.maxRenderbufferSize&&ha<=Pr.maxRenderbufferSize,"invalid renderbuffer size"),!(Zi===fn.width&&ha===fn.height&&ao===fn.format))return zn.width=fn.width=Zi,zn.height=fn.height=ha,fn.format=ao,be.bindRenderbuffer(Qu,fn.renderbuffer),be.renderbufferStorage(Qu,ao,Zi,ha),Ee(be.getError()===0,"invalid render buffer format"),ni.profile&&(fn.stats.size=Cv(fn.format,fn.width,fn.height)),zn.format=Wn[fn.format],zn}function Ai(Ki,li){var Zi=Ki|0,ha=li|0||Zi;return Zi===fn.width&&ha===fn.height||(Ee(Zi>0&&ha>0&&Zi<=Pr.maxRenderbufferSize&&ha<=Pr.maxRenderbufferSize,"invalid renderbuffer size"),zn.width=fn.width=Zi,zn.height=fn.height=ha,be.bindRenderbuffer(Qu,fn.renderbuffer),be.renderbufferStorage(Qu,fn.format,Zi,ha),Ee(be.getError()===0,"invalid render buffer format"),ni.profile&&(fn.stats.size=Cv(fn.format,fn.width,fn.height))),zn}return zn(Mi,Di),zn.resize=Ai,zn._reglType="renderbuffer",zn._renderbuffer=fn,ni.profile&&(zn.stats=fn.stats),zn.destroy=function(){fn.decRef()},zn}ni.profile&&(Ln.getTotalRenderbufferSize=function(){var Mi=0;return Object.keys(xi).forEach(function(Di){Mi+=xi[Di].stats.size}),Mi});function ra(){Fe(xi).forEach(function(Mi){Mi.renderbuffer=be.createRenderbuffer(),be.bindRenderbuffer(Qu,Mi.renderbuffer),be.renderbufferStorage(Qu,Mi.format,Mi.width,Mi.height)}),be.bindRenderbuffer(Qu,null)}return{create:zi,clear:function(){Fe(xi).forEach(Ni)},restore:ra}},Vc=36160,as=36161,gu=3553,pc=34069,dc=36064,Th=36096,Af=36128,Ph=33306,ju=36053,ap=36054,Qf=36055,Rp=36057,qf=36061,Jf=36193,op=5121,pf=5126,Cc=6407,th=6408,Ih=6402,id=[Cc,th],Oh=[];Oh[th]=4,Oh[Cc]=3;var E=[];E[op]=1,E[pf]=4,E[Jf]=2;var I=32854,C=32855,Z=36194,ut=33189,St=36168,At=34041,te=35907,we=34836,Oe=34842,Ke=34843,nr=[I,C,Z,te,Oe,Ke,we],$e={};$e[ju]="complete",$e[ap]="incomplete attachment",$e[Rp]="incomplete dimensions",$e[Qf]="incomplete, missing attachment",$e[qf]="unsupported";function pr(be,ar,Pr,Ln,ni,On){var Wn={cur:null,next:null,dirty:!1,setFBO:null},fi=["rgba"],xi=["rgba4","rgb565","rgb5 a1"];ar.ext_srgb&&xi.push("srgba"),ar.ext_color_buffer_half_float&&xi.push("rgba16f","rgb16f"),ar.webgl_color_buffer_float&&xi.push("rgba32f");var Ii=["uint8"];ar.oes_texture_half_float&&Ii.push("half float","float16"),ar.oes_texture_float&&Ii.push("float","float32");function Ni(Oi,ua,$i){this.target=Oi,this.texture=ua,this.renderbuffer=$i;var Go=0,Io=0;ua?(Go=ua.width,Io=ua.height):$i&&(Go=$i.width,Io=$i.height),this.width=Go,this.height=Io}function zi(Oi){Oi&&(Oi.texture&&Oi.texture._texture.decRef(),Oi.renderbuffer&&Oi.renderbuffer._renderbuffer.decRef())}function ra(Oi,ua,$i){if(!!Oi)if(Oi.texture){var Go=Oi.texture._texture,Io=Math.max(1,Go.width),na=Math.max(1,Go.height);Ee(Io===ua&&na===$i,"inconsistent width/height for supplied texture"),Go.refCount+=1}else{var ma=Oi.renderbuffer._renderbuffer;Ee(ma.width===ua&&ma.height===$i,"inconsistent width/height for renderbuffer"),ma.refCount+=1}}function Mi(Oi,ua){ua&&(ua.texture?be.framebufferTexture2D(Vc,Oi,ua.target,ua.texture._texture.texture,0):be.framebufferRenderbuffer(Vc,Oi,as,ua.renderbuffer._renderbuffer.renderbuffer))}function Di(Oi){var ua=gu,$i=null,Go=null,Io=Oi;typeof Oi=="object"&&(Io=Oi.data,"target"in Oi&&(ua=Oi.target|0)),Ee.type(Io,"function","invalid attachment data");var na=Io._reglType;return na==="texture2d"?($i=Io,Ee(ua===gu)):na==="textureCube"?($i=Io,Ee(ua>=pc&&ua<pc+6,"invalid cube map target")):na==="renderbuffer"?(Go=Io,ua=as):Ee.raise("invalid regl object for attachment"),new Ni(ua,$i,Go)}function fn(Oi,ua,$i,Go,Io){if($i){var na=Ln.create2D({width:Oi,height:ua,format:Go,type:Io});return na._texture.refCount=0,new Ni(gu,na,null)}else{var ma=ni.create({width:Oi,height:ua,format:Go});return ma._renderbuffer.refCount=0,new Ni(as,null,ma)}}function zn(Oi){return Oi&&(Oi.texture||Oi.renderbuffer)}function Ai(Oi,ua,$i){Oi&&(Oi.texture?Oi.texture.resize(ua,$i):Oi.renderbuffer&&Oi.renderbuffer.resize(ua,$i),Oi.width=ua,Oi.height=$i)}var Ki=0,li={};function Zi(){this.id=Ki++,li[this.id]=this,this.framebuffer=be.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ha(Oi){Oi.colorAttachments.forEach(zi),zi(Oi.depthAttachment),zi(Oi.stencilAttachment),zi(Oi.depthStencilAttachment)}function ao(Oi){var ua=Oi.framebuffer;Ee(ua,"must not double destroy framebuffer"),be.deleteFramebuffer(ua),Oi.framebuffer=null,On.framebufferCount--,delete li[Oi.id]}function Xn(Oi){var ua;be.bindFramebuffer(Vc,Oi.framebuffer);var $i=Oi.colorAttachments;for(ua=0;ua<$i.length;++ua)Mi(dc+ua,$i[ua]);for(ua=$i.length;ua<Pr.maxColorAttachments;++ua)be.framebufferTexture2D(Vc,dc+ua,gu,null,0);be.framebufferTexture2D(Vc,Ph,gu,null,0),be.framebufferTexture2D(Vc,Th,gu,null,0),be.framebufferTexture2D(Vc,Af,gu,null,0),Mi(Th,Oi.depthAttachment),Mi(Af,Oi.stencilAttachment),Mi(Ph,Oi.depthStencilAttachment);var Go=be.checkFramebufferStatus(Vc);!be.isContextLost()&&Go!==ju&&Ee.raise("framebuffer configuration not supported, status = "+$e[Go]),be.bindFramebuffer(Vc,Wn.next?Wn.next.framebuffer:null),Wn.cur=Wn.next,be.getError()}function ei(Oi,ua){var $i=new Zi;On.framebufferCount++;function Go(na,ma){var Co;Ee(Wn.next!==$i,"can not update framebuffer which is currently in use");var Do=0,os=0,ku=!0,zu=!0,ss=null,Dl=!0,yu="rgba",Tl="uint8",ul=1,Pl=null,ll=null,ml=null,xu=!1;if(typeof na=="number")Do=na|0,os=ma|0||Do;else if(!na)Do=os=1;else{Ee.type(na,"object","invalid arguments for framebuffer");var Uo=na;if("shape"in Uo){var yl=Uo.shape;Ee(Array.isArray(yl)&&yl.length>=2,"invalid shape for framebuffer"),Do=yl[0],os=yl[1]}else"radius"in Uo&&(Do=os=Uo.radius),"width"in Uo&&(Do=Uo.width),"height"in Uo&&(os=Uo.height);("color"in Uo||"colors"in Uo)&&(ss=Uo.color||Uo.colors,Array.isArray(ss)&&Ee(ss.length===1||ar.webgl_draw_buffers,"multiple render targets not supported")),ss||("colorCount"in Uo&&(ul=Uo.colorCount|0,Ee(ul>0,"invalid color buffer count")),"colorTexture"in Uo&&(Dl=!!Uo.colorTexture,yu="rgba4"),"colorType"in Uo&&(Tl=Uo.colorType,Dl?(Ee(ar.oes_texture_float||!(Tl==="float"||Tl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ee(ar.oes_texture_half_float||!(Tl==="half float"||Tl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Tl==="half float"||Tl==="float16"?(Ee(ar.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),yu="rgba16f"):(Tl==="float"||Tl==="float32")&&(Ee(ar.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),yu="rgba32f"),Ee.oneOf(Tl,Ii,"invalid color type")),"colorFormat"in Uo&&(yu=Uo.colorFormat,fi.indexOf(yu)>=0?Dl=!0:xi.indexOf(yu)>=0?Dl=!1:Ee.optional(function(){Dl?Ee.oneOf(Uo.colorFormat,fi,"invalid color format for texture"):Ee.oneOf(Uo.colorFormat,xi,"invalid color format for renderbuffer")}))),("depthTexture"in Uo||"depthStencilTexture"in Uo)&&(xu=!!(Uo.depthTexture||Uo.depthStencilTexture),Ee(!xu||ar.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Uo&&(typeof Uo.depth=="boolean"?ku=Uo.depth:(Pl=Uo.depth,zu=!1)),"stencil"in Uo&&(typeof Uo.stencil=="boolean"?zu=Uo.stencil:(ll=Uo.stencil,ku=!1)),"depthStencil"in Uo&&(typeof Uo.depthStencil=="boolean"?ku=zu=Uo.depthStencil:(ml=Uo.depthStencil,ku=!1,zu=!1))}var Is=null,cl=null,Xi=null,ya=null;if(Array.isArray(ss))Is=ss.map(Di);else if(ss)Is=[Di(ss)];else for(Is=new Array(ul),Co=0;Co<ul;++Co)Is[Co]=fn(Do,os,Dl,yu,Tl);Ee(ar.webgl_draw_buffers||Is.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ee(Is.length<=Pr.maxColorAttachments,"too many color attachments, not supported"),Do=Do||Is[0].width,os=os||Is[0].height,Pl?cl=Di(Pl):ku&&!zu&&(cl=fn(Do,os,xu,"depth","uint32")),ll?Xi=Di(ll):zu&&!ku&&(Xi=fn(Do,os,!1,"stencil","uint8")),ml?ya=Di(ml):!Pl&&!ll&&zu&&ku&&(ya=fn(Do,os,xu,"depth stencil","depth stencil")),Ee(!!Pl+!!ll+!!ml<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Bs=null;for(Co=0;Co<Is.length;++Co)if(ra(Is[Co],Do,os),Ee(!Is[Co]||Is[Co].texture&&id.indexOf(Is[Co].texture._texture.format)>=0||Is[Co].renderbuffer&&nr.indexOf(Is[Co].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Co+" is invalid"),Is[Co]&&Is[Co].texture){var fl=Oh[Is[Co].texture._texture.format]*E[Is[Co].texture._texture.type];Bs===null?Bs=fl:Ee(Bs===fl,"all color attachments much have the same number of bits per pixel.")}return ra(cl,Do,os),Ee(!cl||cl.texture&&cl.texture._texture.format===Ih||cl.renderbuffer&&cl.renderbuffer._renderbuffer.format===ut,"invalid depth attachment for framebuffer object"),ra(Xi,Do,os),Ee(!Xi||Xi.renderbuffer&&Xi.renderbuffer._renderbuffer.format===St,"invalid stencil attachment for framebuffer object"),ra(ya,Do,os),Ee(!ya||ya.texture&&ya.texture._texture.format===At||ya.renderbuffer&&ya.renderbuffer._renderbuffer.format===At,"invalid depth-stencil attachment for framebuffer object"),ha($i),$i.width=Do,$i.height=os,$i.colorAttachments=Is,$i.depthAttachment=cl,$i.stencilAttachment=Xi,$i.depthStencilAttachment=ya,Go.color=Is.map(zn),Go.depth=zn(cl),Go.stencil=zn(Xi),Go.depthStencil=zn(ya),Go.width=$i.width,Go.height=$i.height,Xn($i),Go}function Io(na,ma){Ee(Wn.next!==$i,"can not resize a framebuffer which is currently in use");var Co=Math.max(na|0,1),Do=Math.max(ma|0||Co,1);if(Co===$i.width&&Do===$i.height)return Go;for(var os=$i.colorAttachments,ku=0;ku<os.length;++ku)Ai(os[ku],Co,Do);return Ai($i.depthAttachment,Co,Do),Ai($i.stencilAttachment,Co,Do),Ai($i.depthStencilAttachment,Co,Do),$i.width=Go.width=Co,$i.height=Go.height=Do,Xn($i),Go}return Go(Oi,ua),y(Go,{resize:Io,_reglType:"framebuffer",_framebuffer:$i,destroy:function(){ao($i),ha($i)},use:function(na){Wn.setFBO({framebuffer:Go},na)}})}function ka(Oi){var ua=Array(6);function $i(Io){var na;Ee(ua.indexOf(Wn.next)<0,"can not update framebuffer which is currently in use");var ma={color:null},Co=0,Do=null,os="rgba",ku="uint8",zu=1;if(typeof Io=="number")Co=Io|0;else if(!Io)Co=1;else{Ee.type(Io,"object","invalid arguments for framebuffer");var ss=Io;if("shape"in ss){var Dl=ss.shape;Ee(Array.isArray(Dl)&&Dl.length>=2,"invalid shape for framebuffer"),Ee(Dl[0]===Dl[1],"cube framebuffer must be square"),Co=Dl[0]}else"radius"in ss&&(Co=ss.radius|0),"width"in ss?(Co=ss.width|0,"height"in ss&&Ee(ss.height===Co,"must be square")):"height"in ss&&(Co=ss.height|0);("color"in ss||"colors"in ss)&&(Do=ss.color||ss.colors,Array.isArray(Do)&&Ee(Do.length===1||ar.webgl_draw_buffers,"multiple render targets not supported")),Do||("colorCount"in ss&&(zu=ss.colorCount|0,Ee(zu>0,"invalid color buffer count")),"colorType"in ss&&(Ee.oneOf(ss.colorType,Ii,"invalid color type"),ku=ss.colorType),"colorFormat"in ss&&(os=ss.colorFormat,Ee.oneOf(ss.colorFormat,fi,"invalid color format for texture"))),"depth"in ss&&(ma.depth=ss.depth),"stencil"in ss&&(ma.stencil=ss.stencil),"depthStencil"in ss&&(ma.depthStencil=ss.depthStencil)}var yu;if(Do)if(Array.isArray(Do))for(yu=[],na=0;na<Do.length;++na)yu[na]=Do[na];else yu=[Do];else{yu=Array(zu);var Tl={radius:Co,format:os,type:ku};for(na=0;na<zu;++na)yu[na]=Ln.createCube(Tl)}for(ma.color=Array(yu.length),na=0;na<yu.length;++na){var ul=yu[na];Ee(typeof ul=="function"&&ul._reglType==="textureCube","invalid cube map"),Co=Co||ul.width,Ee(ul.width===Co&&ul.height===Co,"invalid cube map shape"),ma.color[na]={target:pc,data:yu[na]}}for(na=0;na<6;++na){for(var Pl=0;Pl<yu.length;++Pl)ma.color[Pl].target=pc+na;na>0&&(ma.depth=ua[0].depth,ma.stencil=ua[0].stencil,ma.depthStencil=ua[0].depthStencil),ua[na]?ua[na](ma):ua[na]=ei(ma)}return y($i,{width:Co,height:Co,color:yu})}function Go(Io){var na,ma=Io|0;if(Ee(ma>0&&ma<=Pr.maxCubeMapSize,"invalid radius for cube fbo"),ma===$i.width)return $i;var Co=$i.color;for(na=0;na<Co.length;++na)Co[na].resize(ma);for(na=0;na<6;++na)ua[na].resize(ma);return $i.width=$i.height=ma,$i}return $i(Oi),y($i,{faces:ua,resize:Go,_reglType:"framebufferCube",destroy:function(){ua.forEach(function(Io){Io.destroy()})}})}function aa(){Wn.cur=null,Wn.next=null,Wn.dirty=!0,Fe(li).forEach(function(Oi){Oi.framebuffer=be.createFramebuffer(),Xn(Oi)})}return y(Wn,{getFramebuffer:function(Oi){if(typeof Oi=="function"&&Oi._reglType==="framebuffer"){var ua=Oi._framebuffer;if(ua instanceof Zi)return ua}return null},create:ei,createCube:ka,clear:function(){Fe(li).forEach(ao)},restore:aa})}var Sr=5126,zr=34962,dr=34963,Ur=["attributes","elements","offset","count","primitive","instances"];function en(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Sr,this.offset=0,this.stride=0,this.divisor=0}function Sn(be,ar,Pr,Ln,ni,On,Wn){for(var fi=Pr.maxAttributes,xi=new Array(fi),Ii=0;Ii<fi;++Ii)xi[Ii]=new en;var Ni=0,zi={},ra={Record:en,scope:{},state:xi,currentVAO:null,targetVAO:null,restore:Di()?ha:function(){},createVAO:ao,getVAO:zn,destroyBuffer:Mi,setVAO:Di()?Ai:Ki,clear:Di()?li:function(){}};function Mi(Xn){for(var ei=0;ei<xi.length;++ei){var ka=xi[ei];ka.buffer===Xn&&(be.disableVertexAttribArray(ei),ka.buffer=null)}}function Di(){return ar.oes_vertex_array_object}function fn(){return ar.angle_instanced_arrays}function zn(Xn){return typeof Xn=="function"&&Xn._vao?Xn._vao:null}function Ai(Xn){if(Xn!==ra.currentVAO){var ei=Di();Xn?ei.bindVertexArrayOES(Xn.vao):ei.bindVertexArrayOES(null),ra.currentVAO=Xn}}function Ki(Xn){if(Xn!==ra.currentVAO){if(Xn)Xn.bindAttrs();else{for(var ei=fn(),ka=0;ka<xi.length;++ka){var aa=xi[ka];aa.buffer?(be.enableVertexAttribArray(ka),aa.buffer.bind(),be.vertexAttribPointer(ka,aa.size,aa.type,aa.normalized,aa.stride,aa.offfset),ei&&aa.divisor&&ei.vertexAttribDivisorANGLE(ka,aa.divisor)):(be.disableVertexAttribArray(ka),be.vertexAttrib4f(ka,aa.x,aa.y,aa.z,aa.w))}Wn.elements?be.bindBuffer(dr,Wn.elements.buffer.buffer):be.bindBuffer(dr,null)}ra.currentVAO=Xn}}function li(){Fe(zi).forEach(function(Xn){Xn.destroy()})}function Zi(){this.id=++Ni,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Xn=Di();Xn?this.vao=Xn.createVertexArrayOES():this.vao=null,zi[this.id]=this,this.buffers=[]}Zi.prototype.bindAttrs=function(){for(var Xn=fn(),ei=this.attributes,ka=0;ka<ei.length;++ka){var aa=ei[ka];aa.buffer?(be.enableVertexAttribArray(ka),be.bindBuffer(zr,aa.buffer.buffer),be.vertexAttribPointer(ka,aa.size,aa.type,aa.normalized,aa.stride,aa.offset),Xn&&aa.divisor&&Xn.vertexAttribDivisorANGLE(ka,aa.divisor)):(be.disableVertexAttribArray(ka),be.vertexAttrib4f(ka,aa.x,aa.y,aa.z,aa.w))}for(var Oi=ei.length;Oi<fi;++Oi)be.disableVertexAttribArray(Oi);var ua=On.getElements(this.elements);ua?be.bindBuffer(dr,ua.buffer.buffer):be.bindBuffer(dr,null)},Zi.prototype.refresh=function(){var Xn=Di();Xn&&(Xn.bindVertexArrayOES(this.vao),this.bindAttrs(),ra.currentVAO=null,Xn.bindVertexArrayOES(null))},Zi.prototype.destroy=function(){if(this.vao){var Xn=Di();this===ra.currentVAO&&(ra.currentVAO=null,Xn.bindVertexArrayOES(null)),Xn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),zi[this.id]&&(delete zi[this.id],Ln.vaoCount-=1)};function ha(){var Xn=Di();Xn&&Fe(zi).forEach(function(ei){ei.refresh()})}function ao(Xn){var ei=new Zi;Ln.vaoCount+=1;function ka(aa){var Oi;if(Array.isArray(aa))Oi=aa,ei.elements&&ei.ownsElements&&ei.elements.destroy(),ei.elements=null,ei.ownsElements=!1,ei.offset=0,ei.count=0,ei.instances=-1,ei.primitive=4;else{if(Ee(typeof aa=="object","invalid arguments for create vao"),Ee("attributes"in aa,"must specify attributes for vao"),aa.elements){var ua=aa.elements;ei.ownsElements?typeof ua=="function"&&ua._reglType==="elements"?(ei.elements.destroy(),ei.ownsElements=!1):(ei.elements(ua),ei.ownsElements=!1):On.getElements(aa.elements)?(ei.elements=aa.elements,ei.ownsElements=!1):(ei.elements=On.create(aa.elements),ei.ownsElements=!0)}else ei.elements=null,ei.ownsElements=!1;Oi=aa.attributes,ei.offset=0,ei.count=-1,ei.instances=-1,ei.primitive=4,ei.elements&&(ei.count=ei.elements._elements.vertCount,ei.primitive=ei.elements._elements.primType),"offset"in aa&&(ei.offset=aa.offset|0),"count"in aa&&(ei.count=aa.count|0),"instances"in aa&&(ei.instances=aa.instances|0),"primitive"in aa&&(Ee(aa.primitive in ti,"bad primitive type: "+aa.primitive),ei.primitive=ti[aa.primitive]),Ee.optional(()=>{for(var ku=Object.keys(aa),zu=0;zu<ku.length;++zu)Ee(Ur.indexOf(ku[zu])>=0,'invalid option for vao: "'+ku[zu]+'" valid options are '+Ur)}),Ee(Array.isArray(Oi),"attributes must be an array")}Ee(Oi.length<fi,"too many attributes"),Ee(Oi.length>0,"must specify at least one attribute");var $i={},Go=ei.attributes;Go.length=Oi.length;for(var Io=0;Io<Oi.length;++Io){var na=Oi[Io],ma=Go[Io]=new en,Co=na.data||na;if(Array.isArray(Co)||j(Co)||ai(Co)){var Do;ei.buffers[Io]&&(Do=ei.buffers[Io],j(Co)&&Do._buffer.byteLength>=Co.byteLength?Do.subdata(Co):(Do.destroy(),ei.buffers[Io]=null)),ei.buffers[Io]||(Do=ei.buffers[Io]=ni.create(na,zr,!1,!0)),ma.buffer=ni.getBuffer(Do),ma.size=ma.buffer.dimension|0,ma.normalized=!1,ma.type=ma.buffer.dtype,ma.offset=0,ma.stride=0,ma.divisor=0,ma.state=1,$i[Io]=1}else ni.getBuffer(na)?(ma.buffer=ni.getBuffer(na),ma.size=ma.buffer.dimension|0,ma.normalized=!1,ma.type=ma.buffer.dtype,ma.offset=0,ma.stride=0,ma.divisor=0,ma.state=1):ni.getBuffer(na.buffer)?(ma.buffer=ni.getBuffer(na.buffer),ma.size=(+na.size||ma.buffer.dimension)|0,ma.normalized=!!na.normalized||!1,"type"in na?(Ee.parameter(na.type,Vu,"invalid buffer type"),ma.type=Vu[na.type]):ma.type=ma.buffer.dtype,ma.offset=(na.offset||0)|0,ma.stride=(na.stride||0)|0,ma.divisor=(na.divisor||0)|0,ma.state=1,Ee(ma.size>=1&&ma.size<=4,"size must be between 1 and 4"),Ee(ma.offset>=0,"invalid offset"),Ee(ma.stride>=0&&ma.stride<=255,"stride must be between 0 and 255"),Ee(ma.divisor>=0,"divisor must be positive"),Ee(!ma.divisor||!!ar.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in na?(Ee(Io>0,"first attribute must not be a constant"),ma.x=+na.x||0,ma.y=+na.y||0,ma.z=+na.z||0,ma.w=+na.w||0,ma.state=2):Ee(!1,"invalid attribute spec for location "+Io)}for(var os=0;os<ei.buffers.length;++os)!$i[os]&&ei.buffers[os]&&(ei.buffers[os].destroy(),ei.buffers[os]=null);return ei.refresh(),ka}return ka.destroy=function(){for(var aa=0;aa<ei.buffers.length;++aa)ei.buffers[aa]&&ei.buffers[aa].destroy();ei.buffers.length=0,ei.ownsElements&&(ei.elements.destroy(),ei.elements=null,ei.ownsElements=!1),ei.destroy()},ka._vao=ei,ka._reglType="vao",ka(Xn)}return ra}var Zn=35632,Pn=35633,Fn=35718,gi=35721;function Vi(be,ar,Pr,Ln){var ni={},On={};function Wn(fn,zn,Ai,Ki){this.name=fn,this.id=zn,this.location=Ai,this.info=Ki}function fi(fn,zn){for(var Ai=0;Ai<fn.length;++Ai)if(fn[Ai].id===zn.id){fn[Ai].location=zn.location;return}fn.push(zn)}function xi(fn,zn,Ai){var Ki=fn===Zn?ni:On,li=Ki[zn];if(!li){var Zi=ar.str(zn);li=be.createShader(fn),be.shaderSource(li,Zi),be.compileShader(li),Ee.shaderError(be,li,Zi,fn,Ai),Ki[zn]=li}return li}var Ii={},Ni=[],zi=0;function ra(fn,zn){this.id=zi++,this.fragId=fn,this.vertId=zn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ln.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Mi(fn,zn,Ai){var Ki,li,Zi=xi(Zn,fn.fragId),ha=xi(Pn,fn.vertId),ao=fn.program=be.createProgram();if(be.attachShader(ao,Zi),be.attachShader(ao,ha),Ai)for(Ki=0;Ki<Ai.length;++Ki){var Xn=Ai[Ki];be.bindAttribLocation(ao,Xn[0],Xn[1])}be.linkProgram(ao),Ee.linkError(be,ao,ar.str(fn.fragId),ar.str(fn.vertId),zn);var ei=be.getProgramParameter(ao,Fn);Ln.profile&&(fn.stats.uniformsCount=ei);var ka=fn.uniforms;for(Ki=0;Ki<ei;++Ki)if(li=be.getActiveUniform(ao,Ki),li)if(li.size>1)for(var aa=0;aa<li.size;++aa){var Oi=li.name.replace("[0]","["+aa+"]");fi(ka,new Wn(Oi,ar.id(Oi),be.getUniformLocation(ao,Oi),li))}else fi(ka,new Wn(li.name,ar.id(li.name),be.getUniformLocation(ao,li.name),li));var ua=be.getProgramParameter(ao,gi);Ln.profile&&(fn.stats.attributesCount=ua);var $i=fn.attributes;for(Ki=0;Ki<ua;++Ki)li=be.getActiveAttrib(ao,Ki),li&&fi($i,new Wn(li.name,ar.id(li.name),be.getAttribLocation(ao,li.name),li))}Ln.profile&&(Pr.getMaxUniformsCount=function(){var fn=0;return Ni.forEach(function(zn){zn.stats.uniformsCount>fn&&(fn=zn.stats.uniformsCount)}),fn},Pr.getMaxAttributesCount=function(){var fn=0;return Ni.forEach(function(zn){zn.stats.attributesCount>fn&&(fn=zn.stats.attributesCount)}),fn});function Di(){ni={},On={};for(var fn=0;fn<Ni.length;++fn)Mi(Ni[fn],null,Ni[fn].attributes.map(function(zn){return[zn.location,zn.name]}))}return{clear:function(){var fn=be.deleteShader.bind(be);Fe(ni).forEach(fn),ni={},Fe(On).forEach(fn),On={},Ni.forEach(function(zn){be.deleteProgram(zn.program)}),Ni.length=0,Ii={},Pr.shaderCount=0},program:function(fn,zn,Ai,Ki){Ee.command(fn>=0,"missing vertex shader",Ai),Ee.command(zn>=0,"missing fragment shader",Ai);var li=Ii[zn];li||(li=Ii[zn]={});var Zi=li[fn];if(Zi&&(Zi.refCount++,!Ki))return Zi;var ha=new ra(zn,fn);return Pr.shaderCount++,Mi(ha,Ai,Ki),Zi||(li[fn]=ha),Ni.push(ha),y(ha,{destroy:function(){if(ha.refCount--,ha.refCount<=0){be.deleteProgram(ha.program);var ao=Ni.indexOf(ha);Ni.splice(ao,1),Pr.shaderCount--}li[ha.vertId].refCount<=0&&(be.deleteShader(On[ha.vertId]),delete On[ha.vertId],delete Ii[ha.fragId][ha.vertId]),Object.keys(Ii[ha.fragId]).length||(be.deleteShader(ni[ha.fragId]),delete ni[ha.fragId],delete Ii[ha.fragId])}})},restore:Di,shader:xi,frag:-1,vert:-1}}var Hi=6408,fa=5121,$a=3333,Qa=5126;function so(be,ar,Pr,Ln,ni,On,Wn){function fi(Ni){var zi;ar.next===null?(Ee(ni.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),zi=fa):(Ee(ar.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),zi=ar.next.colorAttachments[0].texture._texture.type,Ee.optional(function(){On.oes_texture_float?(Ee(zi===fa||zi===Qa,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),zi===Qa&&Ee(Wn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ee(zi===fa,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var ra=0,Mi=0,Di=Ln.framebufferWidth,fn=Ln.framebufferHeight,zn=null;j(Ni)?zn=Ni:Ni&&(Ee.type(Ni,"object","invalid arguments to regl.read()"),ra=Ni.x|0,Mi=Ni.y|0,Ee(ra>=0&&ra<Ln.framebufferWidth,"invalid x offset for regl.read"),Ee(Mi>=0&&Mi<Ln.framebufferHeight,"invalid y offset for regl.read"),Di=(Ni.width||Ln.framebufferWidth-ra)|0,fn=(Ni.height||Ln.framebufferHeight-Mi)|0,zn=Ni.data||null),zn&&(zi===fa?Ee(zn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):zi===Qa&&Ee(zn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ee(Di>0&&Di+ra<=Ln.framebufferWidth,"invalid width for read pixels"),Ee(fn>0&&fn+Mi<=Ln.framebufferHeight,"invalid height for read pixels"),Pr();var Ai=Di*fn*4;return zn||(zi===fa?zn=new Uint8Array(Ai):zi===Qa&&(zn=zn||new Float32Array(Ai))),Ee.isTypedArray(zn,"data buffer for regl.read() must be a typedarray"),Ee(zn.byteLength>=Ai,"data buffer for regl.read() too small"),be.pixelStorei($a,4),be.readPixels(ra,Mi,Di,fn,Hi,zi,zn),zn}function xi(Ni){var zi;return ar.setFBO({framebuffer:Ni.framebuffer},function(){zi=fi(Ni)}),zi}function Ii(Ni){return!Ni||!("framebuffer"in Ni)?fi(Ni):xi(Ni)}return Ii}function No(be){return Array.prototype.slice.call(be)}function ea(be){return No(be).join("")}function Eo(){var be=0,ar=[],Pr=[];function Ln(zi){for(var ra=0;ra<Pr.length;++ra)if(Pr[ra]===zi)return ar[ra];var Mi="g"+be++;return ar.push(Mi),Pr.push(zi),Mi}function ni(){var zi=[];function ra(){zi.push.apply(zi,No(arguments))}var Mi=[];function Di(){var fn="v"+be++;return Mi.push(fn),arguments.length>0&&(zi.push(fn,"="),zi.push.apply(zi,No(arguments)),zi.push(";")),fn}return y(ra,{def:Di,toString:function(){return ea([Mi.length>0?"var "+Mi.join(",")+";":"",ea(zi)])}})}function On(){var zi=ni(),ra=ni(),Mi=zi.toString,Di=ra.toString;function fn(zn,Ai){ra(zn,Ai,"=",zi.def(zn,Ai),";")}return y(function(){zi.apply(zi,No(arguments))},{def:zi.def,entry:zi,exit:ra,save:fn,set:function(zn,Ai,Ki){fn(zn,Ai),zi(zn,Ai,"=",Ki,";")},toString:function(){return Mi()+Di()}})}function Wn(){var zi=ea(arguments),ra=On(),Mi=On(),Di=ra.toString,fn=Mi.toString;return y(ra,{then:function(){return ra.apply(ra,No(arguments)),this},else:function(){return Mi.apply(Mi,No(arguments)),this},toString:function(){var zn=fn();return zn&&(zn="else{"+zn+"}"),ea(["if(",zi,"){",Di(),"}",zn])}})}var fi=ni(),xi={};function Ii(zi,ra){var Mi=[];function Di(){var li="a"+Mi.length;return Mi.push(li),li}ra=ra||0;for(var fn=0;fn<ra;++fn)Di();var zn=On(),Ai=zn.toString,Ki=xi[zi]=y(zn,{arg:Di,toString:function(){return ea(["function(",Mi.join(),"){",Ai(),"}"])}});return Ki}function Ni(){var zi=['"use strict";',fi,"return {"];Object.keys(xi).forEach(function(fn){zi.push('"',fn,'":',xi[fn].toString(),",")}),zi.push("}");var ra=ea(zi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mi=typeof my!="undefined"&&!!my&&typeof my.showToast=="function",Di=Mi?T.Function.apply(null,ar.concat(ra)):Function.apply(null,ar.concat(ra));return Di.apply(null,Pr)}return{global:fi,link:Ln,block:ni,proc:Ii,scope:On,cond:Wn,compile:Ni}}var Ro="xyzw".split(""),bo=5121,ho=1,zo=2,yo=0,uo=1,tu=2,mu=3,al=4,vl=5,du=6,Nu="dither",Jl="blend.enable",jl="blend.color",tc="blend.equation",cu="blend.func",Ac="depth.enable",Mc="depth.func",Lh="depth.range",eh="depth.mask",vc="colorMask",Mf="cull.enable",sp="cull.face",gc="frontFace",rh="lineWidth",Zc="polygonOffset.enable",Ju="polygonOffset.offset",Kc="sample.alpha",Tf="sample.enable",df="sample.coverage",Ps="stencil.enable",mc="stencil.mask",Xl="stencil.func",Pf="stencil.opFront",up="stencil.opBack",Dp="scissor.enable",Bp="scissor.box",Tc="viewport",lp="profile",yc="framebuffer",If="vert",Fp="frag",Hc="elements",ol="primitive",cp="count",Pd="offset",nh="instances",Id="vao",xg="Width",Od="Height",ms=yc+xg,ad=yc+Od,xc=Tc+xg,_g=Tc+Od,ih="drawingBuffer",Np=ih+xg,bg=ih+Od,Ld=[cu,tc,Xl,Pf,up,df,Tc,Bp,Ju],ah=34962,Av=34963,p0=35632,rm=35633,Sg=3553,sa=34067,vf=2884,Vn=3042,nm=3024,sl=2960,kd=2929,wg=3089,Rd=32823,Mv=32926,od=32928,fp=5126,Dd=35664,Of=35665,hp=35666,sd=5124,Bd=35667,kh=35668,Fd=35669,Nd=35670,zd=35671,zp=35672,pp=35673,Pc=35674,Gd=35675,Ud=35676,Tv=35678,Vd=35680,Pv=4,oh=1028,Rh=1029,d0=2304,Zd=2305,v0=32775,vy=32776,im=519,jc=7680,Eg=0,Iv=1,dp=32774,gf=513,g0=36160,am=36064,sh={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Gp=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Lf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},vp={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},fu={frag:p0,vert:rm},uh={cw:d0,ccw:Zd};function Hd(be){return Array.isArray(be)||j(be)||ai(be)}function Cg(be){return be.sort(function(ar,Pr){return ar===Tc?-1:Pr===Tc?1:ar<Pr?-1:1})}function Us(be,ar,Pr,Ln){this.thisDep=be,this.contextDep=ar,this.propDep=Pr,this.append=Ln}function gp(be){return be&&!(be.thisDep||be.contextDep||be.propDep)}function tl(be){return new Us(!1,!1,!1,be)}function Ic(be,ar){var Pr=be.type;if(Pr===yo){var Ln=be.data.length;return new Us(!0,Ln>=1,Ln>=2,ar)}else if(Pr===al){var ni=be.data;return new Us(ni.thisDep,ni.contextDep,ni.propDep,ar)}else{if(Pr===vl)return new Us(!1,!1,!1,ar);if(Pr===du){for(var On=!1,Wn=!1,fi=!1,xi=0;xi<be.data.length;++xi){var Ii=be.data[xi];if(Ii.type===uo)fi=!0;else if(Ii.type===tu)Wn=!0;else if(Ii.type===mu)On=!0;else if(Ii.type===yo){On=!0;var Ni=Ii.data;Ni>=1&&(Wn=!0),Ni>=2&&(fi=!0)}else Ii.type===al&&(On=On||Ii.data.thisDep,Wn=Wn||Ii.data.contextDep,fi=fi||Ii.data.propDep)}return new Us(On,Wn,fi,ar)}else return new Us(Pr===mu,Pr===tu,Pr===uo,ar)}}var jd=new Us(!1,!1,!1,function(){});function m0(be,ar,Pr,Ln,ni,On,Wn,fi,xi,Ii,Ni,zi,ra,Mi,Di){var fn=Ii.Record,zn={add:32774,subtract:32778,"reverse subtract":32779};Pr.ext_blend_minmax&&(zn.min=v0,zn.max=vy);var Ai=Pr.angle_instanced_arrays,Ki=Pr.webgl_draw_buffers,li=Pr.oes_vertex_array_object,Zi={dirty:!0,profile:Di.profile},ha={},ao=[],Xn={},ei={};function ka(cr){return cr.replace(".","_")}function aa(cr,Je,Nr){var gn=ka(cr);ao.push(cr),ha[gn]=Zi[gn]=!!Nr,Xn[gn]=Je}function Oi(cr,Je,Nr){var gn=ka(cr);ao.push(cr),Array.isArray(Nr)?(Zi[gn]=Nr.slice(),ha[gn]=Nr.slice()):Zi[gn]=ha[gn]=Nr,ei[gn]=Je}aa(Nu,nm),aa(Jl,Vn),Oi(jl,"blendColor",[0,0,0,0]),Oi(tc,"blendEquationSeparate",[dp,dp]),Oi(cu,"blendFuncSeparate",[Iv,Eg,Iv,Eg]),aa(Ac,kd,!0),Oi(Mc,"depthFunc",gf),Oi(Lh,"depthRange",[0,1]),Oi(eh,"depthMask",!0),Oi(vc,vc,[!0,!0,!0,!0]),aa(Mf,vf),Oi(sp,"cullFace",Rh),Oi(gc,gc,Zd),Oi(rh,rh,1),aa(Zc,Rd),Oi(Ju,"polygonOffset",[0,0]),aa(Kc,Mv),aa(Tf,od),Oi(df,"sampleCoverage",[1,!1]),aa(Ps,sl),Oi(mc,"stencilMask",-1),Oi(Xl,"stencilFunc",[im,0,-1]),Oi(Pf,"stencilOpSeparate",[oh,jc,jc,jc]),Oi(up,"stencilOpSeparate",[Rh,jc,jc,jc]),aa(Dp,wg),Oi(Bp,"scissor",[0,0,be.drawingBufferWidth,be.drawingBufferHeight]),Oi(Tc,Tc,[0,0,be.drawingBufferWidth,be.drawingBufferHeight]);var ua={gl:be,context:ra,strings:ar,next:ha,current:Zi,draw:zi,elements:On,buffer:ni,shader:Ni,attributes:Ii.state,vao:Ii,uniforms:xi,framebuffer:fi,extensions:Pr,timer:Mi,isBufferArgs:Hd},$i={primTypes:ti,compareFuncs:Lf,blendFuncs:sh,blendEquations:zn,stencilOps:vp,glTypes:Vu,orientationType:uh};Ee.optional(function(){ua.isArrayLike=Hr}),Ki&&($i.backBuffer=[Rh],$i.drawBuffer=or(Ln.maxDrawbuffers,function(cr){return cr===0?[0]:or(cr,function(Je){return am+Je})}));var Go=0;function Io(){var cr=Eo(),Je=cr.link,Nr=cr.global;cr.id=Go++,cr.batchId="0";var gn=Je(ua),In=cr.shared={props:"a0"};Object.keys(ua).forEach(function(Rr){In[Rr]=Nr.def(gn,".",Rr)}),Ee.optional(function(){cr.CHECK=Je(Ee),cr.commandStr=Ee.guessCommand(),cr.command=Je(cr.commandStr),cr.assert=function(Rr,vr,mn){Rr("if(!(",vr,"))",this.CHECK,".commandRaise(",Je(mn),",",this.command,");")},$i.invalidBlendCombinations=Gp});var Yr=cr.next={},Tr=cr.current={};Object.keys(ei).forEach(function(Rr){Array.isArray(Zi[Rr])&&(Yr[Rr]=Nr.def(In.next,".",Rr),Tr[Rr]=Nr.def(In.current,".",Rr))});var rn=cr.constants={};Object.keys($i).forEach(function(Rr){rn[Rr]=Nr.def(JSON.stringify($i[Rr]))}),cr.invoke=function(Rr,vr){switch(vr.type){case yo:var mn=["this",In.context,In.props,cr.batchId];return Rr.def(Je(vr.data),".call(",mn.slice(0,Math.max(vr.data.length+1,4)),")");case uo:return Rr.def(In.props,vr.data);case tu:return Rr.def(In.context,vr.data);case mu:return Rr.def("this",vr.data);case al:return vr.data.append(cr,Rr),vr.data.ref;case vl:return vr.data.toString();case du:return vr.data.map(function(Cn){return cr.invoke(Rr,Cn)})}},cr.attribCache={};var ur={};return cr.scopeAttrib=function(Rr){var vr=ar.id(Rr);if(vr in ur)return ur[vr];var mn=Ii.scope[vr];mn||(mn=Ii.scope[vr]=new fn);var Cn=ur[vr]=Je(mn);return Cn},cr}function na(cr){var Je=cr.static,Nr=cr.dynamic,gn;if(lp in Je){var In=!!Je[lp];gn=tl(function(Tr,rn){return In}),gn.enable=In}else if(lp in Nr){var Yr=Nr[lp];gn=Ic(Yr,function(Tr,rn){return Tr.invoke(rn,Yr)})}return gn}function ma(cr,Je){var Nr=cr.static,gn=cr.dynamic;if(yc in Nr){var In=Nr[yc];return In?(In=fi.getFramebuffer(In),Ee.command(In,"invalid framebuffer object"),tl(function(Tr,rn){var ur=Tr.link(In),Rr=Tr.shared;rn.set(Rr.framebuffer,".next",ur);var vr=Rr.context;return rn.set(vr,"."+ms,ur+".width"),rn.set(vr,"."+ad,ur+".height"),ur})):tl(function(Tr,rn){var ur=Tr.shared;rn.set(ur.framebuffer,".next","null");var Rr=ur.context;return rn.set(Rr,"."+ms,Rr+"."+Np),rn.set(Rr,"."+ad,Rr+"."+bg),"null"})}else if(yc in gn){var Yr=gn[yc];return Ic(Yr,function(Tr,rn){var ur=Tr.invoke(rn,Yr),Rr=Tr.shared,vr=Rr.framebuffer,mn=rn.def(vr,".getFramebuffer(",ur,")");Ee.optional(function(){Tr.assert(rn,"!"+ur+"||"+mn,"invalid framebuffer object")}),rn.set(vr,".next",mn);var Cn=Rr.context;return rn.set(Cn,"."+ms,mn+"?"+mn+".width:"+Cn+"."+Np),rn.set(Cn,"."+ad,mn+"?"+mn+".height:"+Cn+"."+bg),mn})}else return null}function Co(cr,Je,Nr){var gn=cr.static,In=cr.dynamic;function Yr(ur){if(ur in gn){var Rr=gn[ur];Ee.commandType(Rr,"object","invalid "+ur,Nr.commandStr);var vr=!0,mn=Rr.x|0,Cn=Rr.y|0,hi,Ji;return"width"in Rr?(hi=Rr.width|0,Ee.command(hi>=0,"invalid "+ur,Nr.commandStr)):vr=!1,"height"in Rr?(Ji=Rr.height|0,Ee.command(Ji>=0,"invalid "+ur,Nr.commandStr)):vr=!1,new Us(!vr&&Je&&Je.thisDep,!vr&&Je&&Je.contextDep,!vr&&Je&&Je.propDep,function(Yi,Ga){var _a=Yi.shared.context,Da=hi;"width"in Rr||(Da=Ga.def(_a,".",ms,"-",mn));var Oa=Ji;return"height"in Rr||(Oa=Ga.def(_a,".",ad,"-",Cn)),[mn,Cn,Da,Oa]})}else if(ur in In){var qi=In[ur],xa=Ic(qi,function(Yi,Ga){var _a=Yi.invoke(Ga,qi);Ee.optional(function(){Yi.assert(Ga,_a+"&&typeof "+_a+'==="object"',"invalid "+ur)});var Da=Yi.shared.context,Oa=Ga.def(_a,".x|0"),Pa=Ga.def(_a,".y|0"),So=Ga.def('"width" in ',_a,"?",_a,".width|0:","(",Da,".",ms,"-",Oa,")"),qs=Ga.def('"height" in ',_a,"?",_a,".height|0:","(",Da,".",ad,"-",Pa,")");return Ee.optional(function(){Yi.assert(Ga,So+">=0&&"+qs+">=0","invalid "+ur)}),[Oa,Pa,So,qs]});return Je&&(xa.thisDep=xa.thisDep||Je.thisDep,xa.contextDep=xa.contextDep||Je.contextDep,xa.propDep=xa.propDep||Je.propDep),xa}else return Je?new Us(Je.thisDep,Je.contextDep,Je.propDep,function(Yi,Ga){var _a=Yi.shared.context;return[0,0,Ga.def(_a,".",ms),Ga.def(_a,".",ad)]}):null}var Tr=Yr(Tc);if(Tr){var rn=Tr;Tr=new Us(Tr.thisDep,Tr.contextDep,Tr.propDep,function(ur,Rr){var vr=rn.append(ur,Rr),mn=ur.shared.context;return Rr.set(mn,"."+xc,vr[2]),Rr.set(mn,"."+_g,vr[3]),vr})}return{viewport:Tr,scissor_box:Yr(Bp)}}function Do(cr,Je){var Nr=cr.static,gn=typeof Nr[Fp]=="string"&&typeof Nr[If]=="string";if(gn){if(Object.keys(Je.dynamic).length>0)return null;var In=Je.static,Yr=Object.keys(In);if(Yr.length>0&&typeof In[Yr[0]]=="number"){for(var Tr=[],rn=0;rn<Yr.length;++rn)Ee(typeof In[Yr[rn]]=="number","must specify all vertex attribute locations when using vaos"),Tr.push([In[Yr[rn]]|0,Yr[rn]]);return Tr}}return null}function os(cr,Je,Nr){var gn=cr.static,In=cr.dynamic;function Yr(vr){if(vr in gn){var mn=ar.id(gn[vr]);Ee.optional(function(){Ni.shader(fu[vr],mn,Ee.guessCommand())});var Cn=tl(function(){return mn});return Cn.id=mn,Cn}else if(vr in In){var hi=In[vr];return Ic(hi,function(Ji,qi){var xa=Ji.invoke(qi,hi),Yi=qi.def(Ji.shared.strings,".id(",xa,")");return Ee.optional(function(){qi(Ji.shared.shader,".shader(",fu[vr],",",Yi,",",Ji.command,");")}),Yi})}return null}var Tr=Yr(Fp),rn=Yr(If),ur=null,Rr;return gp(Tr)&&gp(rn)?(ur=Ni.program(rn.id,Tr.id,null,Nr),Rr=tl(function(vr,mn){return vr.link(ur)})):Rr=new Us(Tr&&Tr.thisDep||rn&&rn.thisDep,Tr&&Tr.contextDep||rn&&rn.contextDep,Tr&&Tr.propDep||rn&&rn.propDep,function(vr,mn){var Cn=vr.shared.shader,hi;Tr?hi=Tr.append(vr,mn):hi=mn.def(Cn,".",Fp);var Ji;rn?Ji=rn.append(vr,mn):Ji=mn.def(Cn,".",If);var qi=Cn+".program("+Ji+","+hi;return Ee.optional(function(){qi+=","+vr.command}),mn.def(qi+")")}),{frag:Tr,vert:rn,progVar:Rr,program:ur}}function ku(cr,Je){var Nr=cr.static,gn=cr.dynamic,In={},Yr=!1;function Tr(){if(Id in Nr){var Ga=Nr[Id];return Ga!==null&&Ii.getVAO(Ga)===null&&(Ga=Ii.createVAO(Ga)),Yr=!0,In.vao=Ga,tl(function(Da){var Oa=Ii.getVAO(Ga);return Oa?Da.link(Oa):"null"})}else if(Id in gn){Yr=!0;var _a=gn[Id];return Ic(_a,function(Da,Oa){var Pa=Da.invoke(Oa,_a);return Oa.def(Da.shared.vao+".getVAO("+Pa+")")})}return null}var rn=Tr(),ur=!1;function Rr(){if(Hc in Nr){var Ga=Nr[Hc];if(In.elements=Ga,Hd(Ga)){var _a=In.elements=On.create(Ga,!0);Ga=On.getElements(_a),ur=!0}else Ga&&(Ga=On.getElements(Ga),ur=!0,Ee.command(Ga,"invalid elements",Je.commandStr));var Da=tl(function(Pa,So){if(Ga){var qs=Pa.link(Ga);return Pa.ELEMENTS=qs,qs}return Pa.ELEMENTS=null,null});return Da.value=Ga,Da}else if(Hc in gn){ur=!0;var Oa=gn[Hc];return Ic(Oa,function(Pa,So){var qs=Pa.shared,Yl=qs.isBufferArgs,vu=qs.elements,js=Pa.invoke(So,Oa),Bh=So.def("null"),ec=So.def(Yl,"(",js,")"),ch=Pa.cond(ec).then(Bh,"=",vu,".createStream(",js,");").else(Bh,"=",vu,".getElements(",js,");");return Ee.optional(function(){Pa.assert(ch.else,"!"+js+"||"+Bh,"invalid elements")}),So.entry(ch),So.exit(Pa.cond(ec).then(vu,".destroyStream(",Bh,");")),Pa.ELEMENTS=Bh,Bh})}else if(Yr)return new Us(rn.thisDep,rn.contextDep,rn.propDep,function(Pa,So){return So.def(Pa.shared.vao+".currentVAO?"+Pa.shared.elements+".getElements("+Pa.shared.vao+".currentVAO.elements):null")});return null}var vr=Rr();function mn(){if(ol in Nr){var Ga=Nr[ol];return In.primitive=Ga,Ee.commandParameter(Ga,ti,"invalid primitve",Je.commandStr),tl(function(Da,Oa){return ti[Ga]})}else if(ol in gn){var _a=gn[ol];return Ic(_a,function(Da,Oa){var Pa=Da.constants.primTypes,So=Da.invoke(Oa,_a);return Ee.optional(function(){Da.assert(Oa,So+" in "+Pa,"invalid primitive, must be one of "+Object.keys(ti))}),Oa.def(Pa,"[",So,"]")})}else{if(ur)return gp(vr)?vr.value?tl(function(Da,Oa){return Oa.def(Da.ELEMENTS,".primType")}):tl(function(){return Pv}):new Us(vr.thisDep,vr.contextDep,vr.propDep,function(Da,Oa){var Pa=Da.ELEMENTS;return Oa.def(Pa,"?",Pa,".primType:",Pv)});if(Yr)return new Us(rn.thisDep,rn.contextDep,rn.propDep,function(Da,Oa){return Oa.def(Da.shared.vao+".currentVAO?"+Da.shared.vao+".currentVAO.primitive:"+Pv)})}return null}function Cn(Ga,_a){if(Ga in Nr){var Da=Nr[Ga]|0;return _a?In.offset=Da:In.instances=Da,Ee.command(!_a||Da>=0,"invalid "+Ga,Je.commandStr),tl(function(Pa,So){return _a&&(Pa.OFFSET=Da),Da})}else if(Ga in gn){var Oa=gn[Ga];return Ic(Oa,function(Pa,So){var qs=Pa.invoke(So,Oa);return _a&&(Pa.OFFSET=qs,Ee.optional(function(){Pa.assert(So,qs+">=0","invalid "+Ga)})),qs})}else if(_a){if(ur)return tl(function(Pa,So){return Pa.OFFSET=0,0});if(Yr)return new Us(rn.thisDep,rn.contextDep,rn.propDep,function(Pa,So){return So.def(Pa.shared.vao+".currentVAO?"+Pa.shared.vao+".currentVAO.offset:0")})}else if(Yr)return new Us(rn.thisDep,rn.contextDep,rn.propDep,function(Pa,So){return So.def(Pa.shared.vao+".currentVAO?"+Pa.shared.vao+".currentVAO.instances:-1")});return null}var hi=Cn(Pd,!0);function Ji(){if(cp in Nr){var Ga=Nr[cp]|0;return In.count=Ga,Ee.command(typeof Ga=="number"&&Ga>=0,"invalid vertex count",Je.commandStr),tl(function(){return Ga})}else if(cp in gn){var _a=gn[cp];return Ic(_a,function(So,qs){var Yl=So.invoke(qs,_a);return Ee.optional(function(){So.assert(qs,"typeof "+Yl+'==="number"&&'+Yl+">=0&&"+Yl+"===("+Yl+"|0)","invalid vertex count")}),Yl})}else if(ur)if(gp(vr)){if(vr)return hi?new Us(hi.thisDep,hi.contextDep,hi.propDep,function(So,qs){var Yl=qs.def(So.ELEMENTS,".vertCount-",So.OFFSET);return Ee.optional(function(){So.assert(qs,Yl+">=0","invalid vertex offset/element buffer too small")}),Yl}):tl(function(So,qs){return qs.def(So.ELEMENTS,".vertCount")});var Da=tl(function(){return-1});return Ee.optional(function(){Da.MISSING=!0}),Da}else{var Oa=new Us(vr.thisDep||hi.thisDep,vr.contextDep||hi.contextDep,vr.propDep||hi.propDep,function(So,qs){var Yl=So.ELEMENTS;return So.OFFSET?qs.def(Yl,"?",Yl,".vertCount-",So.OFFSET,":-1"):qs.def(Yl,"?",Yl,".vertCount:-1")});return Ee.optional(function(){Oa.DYNAMIC=!0}),Oa}else if(Yr){var Pa=new Us(rn.thisDep,rn.contextDep,rn.propDep,function(So,qs){return qs.def(So.shared.vao,".currentVAO?",So.shared.vao,".currentVAO.count:-1")});return Pa}return null}var qi=mn(),xa=Ji(),Yi=Cn(nh,!1);return{elements:vr,primitive:qi,count:xa,instances:Yi,offset:hi,vao:rn,vaoActive:Yr,elementsActive:ur,static:In}}function zu(cr,Je){var Nr=cr.static,gn=cr.dynamic,In={};return ao.forEach(function(Yr){var Tr=ka(Yr);function rn(ur,Rr){if(Yr in Nr){var vr=ur(Nr[Yr]);In[Tr]=tl(function(){return vr})}else if(Yr in gn){var mn=gn[Yr];In[Tr]=Ic(mn,function(Cn,hi){return Rr(Cn,hi,Cn.invoke(hi,mn))})}}switch(Yr){case Mf:case Jl:case Nu:case Ps:case Ac:case Dp:case Zc:case Kc:case Tf:case eh:return rn(function(ur){return Ee.commandType(ur,"boolean",Yr,Je.commandStr),ur},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,"typeof "+vr+'==="boolean"',"invalid flag "+Yr,ur.commandStr)}),vr});case Mc:return rn(function(ur){return Ee.commandParameter(ur,Lf,"invalid "+Yr,Je.commandStr),Lf[ur]},function(ur,Rr,vr){var mn=ur.constants.compareFuncs;return Ee.optional(function(){ur.assert(Rr,vr+" in "+mn,"invalid "+Yr+", must be one of "+Object.keys(Lf))}),Rr.def(mn,"[",vr,"]")});case Lh:return rn(function(ur){return Ee.command(Hr(ur)&&ur.length===2&&typeof ur[0]=="number"&&typeof ur[1]=="number"&&ur[0]<=ur[1],"depth range is 2d array",Je.commandStr),ur},function(ur,Rr,vr){Ee.optional(function(){ur.assert(Rr,ur.shared.isArrayLike+"("+vr+")&&"+vr+".length===2&&typeof "+vr+'[0]==="number"&&typeof '+vr+'[1]==="number"&&'+vr+"[0]<="+vr+"[1]","depth range must be a 2d array")});var mn=Rr.def("+",vr,"[0]"),Cn=Rr.def("+",vr,"[1]");return[mn,Cn]});case cu:return rn(function(ur){Ee.commandType(ur,"object","blend.func",Je.commandStr);var Rr="srcRGB"in ur?ur.srcRGB:ur.src,vr="srcAlpha"in ur?ur.srcAlpha:ur.src,mn="dstRGB"in ur?ur.dstRGB:ur.dst,Cn="dstAlpha"in ur?ur.dstAlpha:ur.dst;return Ee.commandParameter(Rr,sh,Tr+".srcRGB",Je.commandStr),Ee.commandParameter(vr,sh,Tr+".srcAlpha",Je.commandStr),Ee.commandParameter(mn,sh,Tr+".dstRGB",Je.commandStr),Ee.commandParameter(Cn,sh,Tr+".dstAlpha",Je.commandStr),Ee.command(Gp.indexOf(Rr+", "+mn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Rr+", "+mn+")",Je.commandStr),[sh[Rr],sh[mn],sh[vr],sh[Cn]]},function(ur,Rr,vr){var mn=ur.constants.blendFuncs;Ee.optional(function(){ur.assert(Rr,vr+"&&typeof "+vr+'==="object"',"invalid blend func, must be an object")});function Cn(_a,Da){var Oa=Rr.def('"',_a,Da,'" in ',vr,"?",vr,".",_a,Da,":",vr,".",_a);return Ee.optional(function(){ur.assert(Rr,Oa+" in "+mn,"invalid "+Yr+"."+_a+Da+", must be one of "+Object.keys(sh))}),Oa}var hi=Cn("src","RGB"),Ji=Cn("dst","RGB");Ee.optional(function(){var _a=ur.constants.invalidBlendCombinations;ur.assert(Rr,_a+".indexOf("+hi+'+", "+'+Ji+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var qi=Rr.def(mn,"[",hi,"]"),xa=Rr.def(mn,"[",Cn("src","Alpha"),"]"),Yi=Rr.def(mn,"[",Ji,"]"),Ga=Rr.def(mn,"[",Cn("dst","Alpha"),"]");return[qi,Yi,xa,Ga]});case tc:return rn(function(ur){if(typeof ur=="string")return Ee.commandParameter(ur,zn,"invalid "+Yr,Je.commandStr),[zn[ur],zn[ur]];if(typeof ur=="object")return Ee.commandParameter(ur.rgb,zn,Yr+".rgb",Je.commandStr),Ee.commandParameter(ur.alpha,zn,Yr+".alpha",Je.commandStr),[zn[ur.rgb],zn[ur.alpha]];Ee.commandRaise("invalid blend.equation",Je.commandStr)},function(ur,Rr,vr){var mn=ur.constants.blendEquations,Cn=Rr.def(),hi=Rr.def(),Ji=ur.cond("typeof ",vr,'==="string"');return Ee.optional(function(){function qi(xa,Yi,Ga){ur.assert(xa,Ga+" in "+mn,"invalid "+Yi+", must be one of "+Object.keys(zn))}qi(Ji.then,Yr,vr),ur.assert(Ji.else,vr+"&&typeof "+vr+'==="object"',"invalid "+Yr),qi(Ji.else,Yr+".rgb",vr+".rgb"),qi(Ji.else,Yr+".alpha",vr+".alpha")}),Ji.then(Cn,"=",hi,"=",mn,"[",vr,"];"),Ji.else(Cn,"=",mn,"[",vr,".rgb];",hi,"=",mn,"[",vr,".alpha];"),Rr(Ji),[Cn,hi]});case jl:return rn(function(ur){return Ee.command(Hr(ur)&&ur.length===4,"blend.color must be a 4d array",Je.commandStr),or(4,function(Rr){return+ur[Rr]})},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,ur.shared.isArrayLike+"("+vr+")&&"+vr+".length===4","blend.color must be a 4d array")}),or(4,function(mn){return Rr.def("+",vr,"[",mn,"]")})});case mc:return rn(function(ur){return Ee.commandType(ur,"number",Tr,Je.commandStr),ur|0},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,"typeof "+vr+'==="number"',"invalid stencil.mask")}),Rr.def(vr,"|0")});case Xl:return rn(function(ur){Ee.commandType(ur,"object",Tr,Je.commandStr);var Rr=ur.cmp||"keep",vr=ur.ref||0,mn="mask"in ur?ur.mask:-1;return Ee.commandParameter(Rr,Lf,Yr+".cmp",Je.commandStr),Ee.commandType(vr,"number",Yr+".ref",Je.commandStr),Ee.commandType(mn,"number",Yr+".mask",Je.commandStr),[Lf[Rr],vr,mn]},function(ur,Rr,vr){var mn=ur.constants.compareFuncs;Ee.optional(function(){function qi(){ur.assert(Rr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}qi(vr+"&&typeof ",vr,'==="object"'),qi('!("cmp" in ',vr,")||(",vr,".cmp in ",mn,")")});var Cn=Rr.def('"cmp" in ',vr,"?",mn,"[",vr,".cmp]",":",jc),hi=Rr.def(vr,".ref|0"),Ji=Rr.def('"mask" in ',vr,"?",vr,".mask|0:-1");return[Cn,hi,Ji]});case Pf:case up:return rn(function(ur){Ee.commandType(ur,"object",Tr,Je.commandStr);var Rr=ur.fail||"keep",vr=ur.zfail||"keep",mn=ur.zpass||"keep";return Ee.commandParameter(Rr,vp,Yr+".fail",Je.commandStr),Ee.commandParameter(vr,vp,Yr+".zfail",Je.commandStr),Ee.commandParameter(mn,vp,Yr+".zpass",Je.commandStr),[Yr===up?Rh:oh,vp[Rr],vp[vr],vp[mn]]},function(ur,Rr,vr){var mn=ur.constants.stencilOps;Ee.optional(function(){ur.assert(Rr,vr+"&&typeof "+vr+'==="object"',"invalid "+Yr)});function Cn(hi){return Ee.optional(function(){ur.assert(Rr,'!("'+hi+'" in '+vr+")||("+vr+"."+hi+" in "+mn+")","invalid "+Yr+"."+hi+", must be one of "+Object.keys(vp))}),Rr.def('"',hi,'" in ',vr,"?",mn,"[",vr,".",hi,"]:",jc)}return[Yr===up?Rh:oh,Cn("fail"),Cn("zfail"),Cn("zpass")]});case Ju:return rn(function(ur){Ee.commandType(ur,"object",Tr,Je.commandStr);var Rr=ur.factor|0,vr=ur.units|0;return Ee.commandType(Rr,"number",Tr+".factor",Je.commandStr),Ee.commandType(vr,"number",Tr+".units",Je.commandStr),[Rr,vr]},function(ur,Rr,vr){Ee.optional(function(){ur.assert(Rr,vr+"&&typeof "+vr+'==="object"',"invalid "+Yr)});var mn=Rr.def(vr,".factor|0"),Cn=Rr.def(vr,".units|0");return[mn,Cn]});case sp:return rn(function(ur){var Rr=0;return ur==="front"?Rr=oh:ur==="back"&&(Rr=Rh),Ee.command(!!Rr,Tr,Je.commandStr),Rr},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,vr+'==="front"||'+vr+'==="back"',"invalid cull.face")}),Rr.def(vr,'==="front"?',oh,":",Rh)});case rh:return rn(function(ur){return Ee.command(typeof ur=="number"&&ur>=Ln.lineWidthDims[0]&&ur<=Ln.lineWidthDims[1],"invalid line width, must be a positive number between "+Ln.lineWidthDims[0]+" and "+Ln.lineWidthDims[1],Je.commandStr),ur},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,"typeof "+vr+'==="number"&&'+vr+">="+Ln.lineWidthDims[0]+"&&"+vr+"<="+Ln.lineWidthDims[1],"invalid line width")}),vr});case gc:return rn(function(ur){return Ee.commandParameter(ur,uh,Tr,Je.commandStr),uh[ur]},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,vr+'==="cw"||'+vr+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Rr.def(vr+'==="cw"?'+d0+":"+Zd)});case vc:return rn(function(ur){return Ee.command(Hr(ur)&&ur.length===4,"color.mask must be length 4 array",Je.commandStr),ur.map(function(Rr){return!!Rr})},function(ur,Rr,vr){return Ee.optional(function(){ur.assert(Rr,ur.shared.isArrayLike+"("+vr+")&&"+vr+".length===4","invalid color.mask")}),or(4,function(mn){return"!!"+vr+"["+mn+"]"})});case df:return rn(function(ur){Ee.command(typeof ur=="object"&&ur,Tr,Je.commandStr);var Rr="value"in ur?ur.value:1,vr=!!ur.invert;return Ee.command(typeof Rr=="number"&&Rr>=0&&Rr<=1,"sample.coverage.value must be a number between 0 and 1",Je.commandStr),[Rr,vr]},function(ur,Rr,vr){Ee.optional(function(){ur.assert(Rr,vr+"&&typeof "+vr+'==="object"',"invalid sample.coverage")});var mn=Rr.def('"value" in ',vr,"?+",vr,".value:1"),Cn=Rr.def("!!",vr,".invert");return[mn,Cn]})}}),In}function ss(cr,Je){var Nr=cr.static,gn=cr.dynamic,In={};return Object.keys(Nr).forEach(function(Yr){var Tr=Nr[Yr],rn;if(typeof Tr=="number"||typeof Tr=="boolean")rn=tl(function(){return Tr});else if(typeof Tr=="function"){var ur=Tr._reglType;ur==="texture2d"||ur==="textureCube"?rn=tl(function(Rr){return Rr.link(Tr)}):ur==="framebuffer"||ur==="framebufferCube"?(Ee.command(Tr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Yr+'"',Je.commandStr),rn=tl(function(Rr){return Rr.link(Tr.color[0])})):Ee.commandRaise('invalid data for uniform "'+Yr+'"',Je.commandStr)}else Hr(Tr)?rn=tl(function(Rr){var vr=Rr.global.def("[",or(Tr.length,function(mn){return Ee.command(typeof Tr[mn]=="number"||typeof Tr[mn]=="boolean","invalid uniform "+Yr,Rr.commandStr),Tr[mn]}),"]");return vr}):Ee.commandRaise('invalid or missing data for uniform "'+Yr+'"',Je.commandStr);rn.value=Tr,In[Yr]=rn}),Object.keys(gn).forEach(function(Yr){var Tr=gn[Yr];In[Yr]=Ic(Tr,function(rn,ur){return rn.invoke(ur,Tr)})}),In}function Dl(cr,Je){var Nr=cr.static,gn=cr.dynamic,In={};return Object.keys(Nr).forEach(function(Yr){var Tr=Nr[Yr],rn=ar.id(Yr),ur=new fn;if(Hd(Tr))ur.state=ho,ur.buffer=ni.getBuffer(ni.create(Tr,ah,!1,!0)),ur.type=0;else{var Rr=ni.getBuffer(Tr);if(Rr)ur.state=ho,ur.buffer=Rr,ur.type=0;else if(Ee.command(typeof Tr=="object"&&Tr,"invalid data for attribute "+Yr,Je.commandStr),"constant"in Tr){var vr=Tr.constant;ur.buffer="null",ur.state=zo,typeof vr=="number"?ur.x=vr:(Ee.command(Hr(vr)&&vr.length>0&&vr.length<=4,"invalid constant for attribute "+Yr,Je.commandStr),Ro.forEach(function(Yi,Ga){Ga<vr.length&&(ur[Yi]=vr[Ga])}))}else{Hd(Tr.buffer)?Rr=ni.getBuffer(ni.create(Tr.buffer,ah,!1,!0)):Rr=ni.getBuffer(Tr.buffer),Ee.command(!!Rr,'missing buffer for attribute "'+Yr+'"',Je.commandStr);var mn=Tr.offset|0;Ee.command(mn>=0,'invalid offset for attribute "'+Yr+'"',Je.commandStr);var Cn=Tr.stride|0;Ee.command(Cn>=0&&Cn<256,'invalid stride for attribute "'+Yr+'", must be integer betweeen [0, 255]',Je.commandStr);var hi=Tr.size|0;Ee.command(!("size"in Tr)||hi>0&&hi<=4,'invalid size for attribute "'+Yr+'", must be 1,2,3,4',Je.commandStr);var Ji=!!Tr.normalized,qi=0;"type"in Tr&&(Ee.commandParameter(Tr.type,Vu,"invalid type for attribute "+Yr,Je.commandStr),qi=Vu[Tr.type]);var xa=Tr.divisor|0;Ee.optional(function(){"divisor"in Tr&&(Ee.command(xa===0||Ai,'cannot specify divisor for attribute "'+Yr+'", instancing not supported',Je.commandStr),Ee.command(xa>=0,'invalid divisor for attribute "'+Yr+'"',Je.commandStr));var Yi=Je.commandStr,Ga=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Tr).forEach(function(_a){Ee.command(Ga.indexOf(_a)>=0,'unknown parameter "'+_a+'" for attribute pointer "'+Yr+'" (valid parameters are '+Ga+")",Yi)})}),ur.buffer=Rr,ur.state=ho,ur.size=hi,ur.normalized=Ji,ur.type=qi||Rr.dtype,ur.offset=mn,ur.stride=Cn,ur.divisor=xa}}In[Yr]=tl(function(Yi,Ga){var _a=Yi.attribCache;if(rn in _a)return _a[rn];var Da={isStream:!1};return Object.keys(ur).forEach(function(Oa){Da[Oa]=ur[Oa]}),ur.buffer&&(Da.buffer=Yi.link(ur.buffer),Da.type=Da.type||Da.buffer+".dtype"),_a[rn]=Da,Da})}),Object.keys(gn).forEach(function(Yr){var Tr=gn[Yr];function rn(ur,Rr){var vr=ur.invoke(Rr,Tr),mn=ur.shared,Cn=ur.constants,hi=mn.isBufferArgs,Ji=mn.buffer;Ee.optional(function(){ur.assert(Rr,vr+"&&(typeof "+vr+'==="object"||typeof '+vr+'==="function")&&('+hi+"("+vr+")||"+Ji+".getBuffer("+vr+")||"+Ji+".getBuffer("+vr+".buffer)||"+hi+"("+vr+'.buffer)||("constant" in '+vr+"&&(typeof "+vr+'.constant==="number"||'+mn.isArrayLike+"("+vr+".constant))))",'invalid dynamic attribute "'+Yr+'"')});var qi={isStream:Rr.def(!1)},xa=new fn;xa.state=ho,Object.keys(xa).forEach(function(Da){qi[Da]=Rr.def(""+xa[Da])});var Yi=qi.buffer,Ga=qi.type;Rr("if(",hi,"(",vr,")){",qi.isStream,"=true;",Yi,"=",Ji,".createStream(",ah,",",vr,");",Ga,"=",Yi,".dtype;","}else{",Yi,"=",Ji,".getBuffer(",vr,");","if(",Yi,"){",Ga,"=",Yi,".dtype;",'}else if("constant" in ',vr,"){",qi.state,"=",zo,";","if(typeof "+vr+'.constant === "number"){',qi[Ro[0]],"=",vr,".constant;",Ro.slice(1).map(function(Da){return qi[Da]}).join("="),"=0;","}else{",Ro.map(function(Da,Oa){return qi[Da]+"="+vr+".constant.length>"+Oa+"?"+vr+".constant["+Oa+"]:0;"}).join(""),"}}else{","if(",hi,"(",vr,".buffer)){",Yi,"=",Ji,".createStream(",ah,",",vr,".buffer);","}else{",Yi,"=",Ji,".getBuffer(",vr,".buffer);","}",Ga,'="type" in ',vr,"?",Cn.glTypes,"[",vr,".type]:",Yi,".dtype;",qi.normalized,"=!!",vr,".normalized;");function _a(Da){Rr(qi[Da],"=",vr,".",Da,"|0;")}return _a("size"),_a("offset"),_a("stride"),_a("divisor"),Rr("}}"),Rr.exit("if(",qi.isStream,"){",Ji,".destroyStream(",Yi,");","}"),qi}In[Yr]=Ic(Tr,rn)}),In}function yu(cr){var Je=cr.static,Nr=cr.dynamic,gn={};return Object.keys(Je).forEach(function(In){var Yr=Je[In];gn[In]=tl(function(Tr,rn){return typeof Yr=="number"||typeof Yr=="boolean"?""+Yr:Tr.link(Yr)})}),Object.keys(Nr).forEach(function(In){var Yr=Nr[In];gn[In]=Ic(Yr,function(Tr,rn){return Tr.invoke(rn,Yr)})}),gn}function Tl(cr,Je,Nr,gn,In){var Yr=cr.static,Tr=cr.dynamic;Ee.optional(function(){var _a=[yc,If,Fp,Hc,ol,Pd,cp,nh,lp,Id].concat(ao);function Da(Oa){Object.keys(Oa).forEach(function(Pa){Ee.command(_a.indexOf(Pa)>=0,'unknown parameter "'+Pa+'"',In.commandStr)})}Da(Yr),Da(Tr)});var rn=Do(cr,Je),ur=ma(cr,In),Rr=Co(cr,ur,In),vr=ku(cr,In),mn=zu(cr,In),Cn=os(cr,In,rn);function hi(_a){var Da=Rr[_a];Da&&(mn[_a]=Da)}hi(Tc),hi(ka(Bp));var Ji=Object.keys(mn).length>0,qi={framebuffer:ur,draw:vr,shader:Cn,state:mn,dirty:Ji,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(qi.profile=na(cr,In),qi.uniforms=ss(Nr,In),qi.drawVAO=qi.scopeVAO=vr.vao,!qi.drawVAO&&Cn.program&&!rn&&Pr.angle_instanced_arrays&&vr.static.elements){var xa=!0,Yi=Cn.program.attributes.map(function(_a){var Da=Je.static[_a];return xa=xa&&!!Da,Da});if(xa&&Yi.length>0){var Ga=Ii.getVAO(Ii.createVAO({attributes:Yi,elements:vr.static.elements}));qi.drawVAO=new Us(null,null,null,function(_a,Da){return _a.link(Ga)}),qi.useVAO=!0}}return rn?qi.useVAO=!0:qi.attributes=Dl(Je,In),qi.context=yu(gn,In),qi}function ul(cr,Je,Nr){var gn=cr.shared,In=gn.context,Yr=cr.scope();Object.keys(Nr).forEach(function(Tr){Je.save(In,"."+Tr);var rn=Nr[Tr],ur=rn.append(cr,Je);Array.isArray(ur)?Yr(In,".",Tr,"=[",ur.join(),"];"):Yr(In,".",Tr,"=",ur,";")}),Je(Yr)}function Pl(cr,Je,Nr,gn){var In=cr.shared,Yr=In.gl,Tr=In.framebuffer,rn;Ki&&(rn=Je.def(In.extensions,".webgl_draw_buffers"));var ur=cr.constants,Rr=ur.drawBuffer,vr=ur.backBuffer,mn;Nr?mn=Nr.append(cr,Je):mn=Je.def(Tr,".next"),gn||Je("if(",mn,"!==",Tr,".cur){"),Je("if(",mn,"){",Yr,".bindFramebuffer(",g0,",",mn,".framebuffer);"),Ki&&Je(rn,".drawBuffersWEBGL(",Rr,"[",mn,".colorAttachments.length]);"),Je("}else{",Yr,".bindFramebuffer(",g0,",null);"),Ki&&Je(rn,".drawBuffersWEBGL(",vr,");"),Je("}",Tr,".cur=",mn,";"),gn||Je("}")}function ll(cr,Je,Nr){var gn=cr.shared,In=gn.gl,Yr=cr.current,Tr=cr.next,rn=gn.current,ur=gn.next,Rr=cr.cond(rn,".dirty");ao.forEach(function(vr){var mn=ka(vr);if(!(mn in Nr.state)){var Cn,hi;if(mn in Tr){Cn=Tr[mn],hi=Yr[mn];var Ji=or(Zi[mn].length,function(xa){return Rr.def(Cn,"[",xa,"]")});Rr(cr.cond(Ji.map(function(xa,Yi){return xa+"!=="+hi+"["+Yi+"]"}).join("||")).then(In,".",ei[mn],"(",Ji,");",Ji.map(function(xa,Yi){return hi+"["+Yi+"]="+xa}).join(";"),";"))}else{Cn=Rr.def(ur,".",mn);var qi=cr.cond(Cn,"!==",rn,".",mn);Rr(qi),mn in Xn?qi(cr.cond(Cn).then(In,".enable(",Xn[mn],");").else(In,".disable(",Xn[mn],");"),rn,".",mn,"=",Cn,";"):qi(In,".",ei[mn],"(",Cn,");",rn,".",mn,"=",Cn,";")}}}),Object.keys(Nr.state).length===0&&Rr(rn,".dirty=false;"),Je(Rr)}function ml(cr,Je,Nr,gn){var In=cr.shared,Yr=cr.current,Tr=In.current,rn=In.gl;Cg(Object.keys(Nr)).forEach(function(ur){var Rr=Nr[ur];if(!(gn&&!gn(Rr))){var vr=Rr.append(cr,Je);if(Xn[ur]){var mn=Xn[ur];gp(Rr)?vr?Je(rn,".enable(",mn,");"):Je(rn,".disable(",mn,");"):Je(cr.cond(vr).then(rn,".enable(",mn,");").else(rn,".disable(",mn,");")),Je(Tr,".",ur,"=",vr,";")}else if(Hr(vr)){var Cn=Yr[ur];Je(rn,".",ei[ur],"(",vr,");",vr.map(function(hi,Ji){return Cn+"["+Ji+"]="+hi}).join(";"),";")}else Je(rn,".",ei[ur],"(",vr,");",Tr,".",ur,"=",vr,";")}})}function xu(cr,Je){Ai&&(cr.instancing=Je.def(cr.shared.extensions,".angle_instanced_arrays"))}function Uo(cr,Je,Nr,gn,In){var Yr=cr.shared,Tr=cr.stats,rn=Yr.current,ur=Yr.timer,Rr=Nr.profile;function vr(){var _a=typeof my!="undefined"&&!!my&&typeof my.showToast=="function";return _a||typeof performance=="undefined"?"Date.now()":"performance.now()"}var mn,Cn;function hi(_a){mn=Je.def(),_a(mn,"=",vr(),";"),typeof In=="string"?_a(Tr,".count+=",In,";"):_a(Tr,".count++;"),Mi&&(gn?(Cn=Je.def(),_a(Cn,"=",ur,".getNumPendingQueries();")):_a(ur,".beginQuery(",Tr,");"))}function Ji(_a){_a(Tr,".cpuTime+=",vr(),"-",mn,";"),Mi&&(gn?_a(ur,".pushScopeStats(",Cn,",",ur,".getNumPendingQueries(),",Tr,");"):_a(ur,".endQuery();"))}function qi(_a){var Da=Je.def(rn,".profile");Je(rn,".profile=",_a,";"),Je.exit(rn,".profile=",Da,";")}var xa;if(Rr){if(gp(Rr)){Rr.enable?(hi(Je),Ji(Je.exit),qi("true")):qi("false");return}xa=Rr.append(cr,Je),qi(xa)}else xa=Je.def(rn,".profile");var Yi=cr.block();hi(Yi),Je("if(",xa,"){",Yi,"}");var Ga=cr.block();Ji(Ga),Je.exit("if(",xa,"){",Ga,"}")}function yl(cr,Je,Nr,gn,In){var Yr=cr.shared;function Tr(ur){switch(ur){case Dd:case Bd:case zd:return 2;case Of:case kh:case zp:return 3;case hp:case Fd:case pp:return 4;default:return 1}}function rn(ur,Rr,vr){var mn=Yr.gl,Cn=Je.def(ur,".location"),hi=Je.def(Yr.attributes,"[",Cn,"]"),Ji=vr.state,qi=vr.buffer,xa=[vr.x,vr.y,vr.z,vr.w],Yi=["buffer","normalized","offset","stride"];function Ga(){Je("if(!",hi,".buffer){",mn,".enableVertexAttribArray(",Cn,");}");var Da=vr.type,Oa;if(vr.size?Oa=Je.def(vr.size,"||",Rr):Oa=Rr,Je("if(",hi,".type!==",Da,"||",hi,".size!==",Oa,"||",Yi.map(function(So){return hi+"."+So+"!=="+vr[So]}).join("||"),"){",mn,".bindBuffer(",ah,",",qi,".buffer);",mn,".vertexAttribPointer(",[Cn,Oa,Da,vr.normalized,vr.stride,vr.offset],");",hi,".type=",Da,";",hi,".size=",Oa,";",Yi.map(function(So){return hi+"."+So+"="+vr[So]+";"}).join(""),"}"),Ai){var Pa=vr.divisor;Je("if(",hi,".divisor!==",Pa,"){",cr.instancing,".vertexAttribDivisorANGLE(",[Cn,Pa],");",hi,".divisor=",Pa,";}")}}function _a(){Je("if(",hi,".buffer){",mn,".disableVertexAttribArray(",Cn,");",hi,".buffer=null;","}if(",Ro.map(function(Da,Oa){return hi+"."+Da+"!=="+xa[Oa]}).join("||"),"){",mn,".vertexAttrib4f(",Cn,",",xa,");",Ro.map(function(Da,Oa){return hi+"."+Da+"="+xa[Oa]+";"}).join(""),"}")}Ji===ho?Ga():Ji===zo?_a():(Je("if(",Ji,"===",ho,"){"),Ga(),Je("}else{"),_a(),Je("}"))}gn.forEach(function(ur){var Rr=ur.name,vr=Nr.attributes[Rr],mn;if(vr){if(!In(vr))return;mn=vr.append(cr,Je)}else{if(!In(jd))return;var Cn=cr.scopeAttrib(Rr);Ee.optional(function(){cr.assert(Je,Cn+".state","missing attribute "+Rr)}),mn={},Object.keys(new fn).forEach(function(hi){mn[hi]=Je.def(Cn,".",hi)})}rn(cr.link(ur),Tr(ur.info.type),mn)})}function Is(cr,Je,Nr,gn,In,Yr){for(var Tr=cr.shared,rn=Tr.gl,ur,Rr=0;Rr<gn.length;++Rr){var vr=gn[Rr],mn=vr.name,Cn=vr.info.type,hi=Nr.uniforms[mn],Ji=cr.link(vr),qi=Ji+".location",xa;if(hi){if(!In(hi))continue;if(gp(hi)){var Yi=hi.value;if(Ee.command(Yi!==null&&typeof Yi!="undefined",'missing uniform "'+mn+'"',cr.commandStr),Cn===Tv||Cn===Vd){Ee.command(typeof Yi=="function"&&(Cn===Tv&&(Yi._reglType==="texture2d"||Yi._reglType==="framebuffer")||Cn===Vd&&(Yi._reglType==="textureCube"||Yi._reglType==="framebufferCube")),"invalid texture for uniform "+mn,cr.commandStr);var Ga=cr.link(Yi._texture||Yi.color[0]._texture);Je(rn,".uniform1i(",qi,",",Ga+".bind());"),Je.exit(Ga,".unbind();")}else if(Cn===Pc||Cn===Gd||Cn===Ud){Ee.optional(function(){Ee.command(Hr(Yi),"invalid matrix for uniform "+mn,cr.commandStr),Ee.command(Cn===Pc&&Yi.length===4||Cn===Gd&&Yi.length===9||Cn===Ud&&Yi.length===16,"invalid length for matrix uniform "+mn,cr.commandStr)});var _a=cr.global.def("new Float32Array(["+Array.prototype.slice.call(Yi)+"])"),Da=2;Cn===Gd?Da=3:Cn===Ud&&(Da=4),Je(rn,".uniformMatrix",Da,"fv(",qi,",false,",_a,");")}else{switch(Cn){case fp:Ee.commandType(Yi,"number","uniform "+mn,cr.commandStr),ur="1f";break;case Dd:Ee.command(Hr(Yi)&&Yi.length===2,"uniform "+mn,cr.commandStr),ur="2f";break;case Of:Ee.command(Hr(Yi)&&Yi.length===3,"uniform "+mn,cr.commandStr),ur="3f";break;case hp:Ee.command(Hr(Yi)&&Yi.length===4,"uniform "+mn,cr.commandStr),ur="4f";break;case Nd:Ee.commandType(Yi,"boolean","uniform "+mn,cr.commandStr),ur="1i";break;case sd:Ee.commandType(Yi,"number","uniform "+mn,cr.commandStr),ur="1i";break;case zd:Ee.command(Hr(Yi)&&Yi.length===2,"uniform "+mn,cr.commandStr),ur="2i";break;case Bd:Ee.command(Hr(Yi)&&Yi.length===2,"uniform "+mn,cr.commandStr),ur="2i";break;case zp:Ee.command(Hr(Yi)&&Yi.length===3,"uniform "+mn,cr.commandStr),ur="3i";break;case kh:Ee.command(Hr(Yi)&&Yi.length===3,"uniform "+mn,cr.commandStr),ur="3i";break;case pp:Ee.command(Hr(Yi)&&Yi.length===4,"uniform "+mn,cr.commandStr),ur="4i";break;case Fd:Ee.command(Hr(Yi)&&Yi.length===4,"uniform "+mn,cr.commandStr),ur="4i";break}Je(rn,".uniform",ur,"(",qi,",",Hr(Yi)?Array.prototype.slice.call(Yi):Yi,");")}continue}else xa=hi.append(cr,Je)}else{if(!In(jd))continue;xa=Je.def(Tr.uniforms,"[",ar.id(mn),"]")}Cn===Tv?(Ee(!Array.isArray(xa),"must specify a scalar prop for textures"),Je("if(",xa,"&&",xa,'._reglType==="framebuffer"){',xa,"=",xa,".color[0];","}")):Cn===Vd&&(Ee(!Array.isArray(xa),"must specify a scalar prop for cube maps"),Je("if(",xa,"&&",xa,'._reglType==="framebufferCube"){',xa,"=",xa,".color[0];","}")),Ee.optional(function(){function ec(Oc,mp){cr.assert(Je,Oc,'bad data or missing for uniform "'+mn+'".  '+mp)}function ch(Oc){Ee(!Array.isArray(xa),"must not specify an array type for uniform"),ec("typeof "+xa+'==="'+Oc+'"',"invalid type, expected "+Oc)}function mf(Oc,mp){Array.isArray(xa)?Ee(xa.length===Oc,"must have length "+Oc):ec(Tr.isArrayLike+"("+xa+")&&"+xa+".length==="+Oc,"invalid vector, should have length "+Oc,cr.commandStr)}function y0(Oc){Ee(!Array.isArray(xa),"must not specify a value type"),ec("typeof "+xa+'==="function"&&'+xa+'._reglType==="texture'+(Oc===Sg?"2d":"Cube")+'"',"invalid texture type",cr.commandStr)}switch(Cn){case sd:ch("number");break;case Bd:mf(2,"number");break;case kh:mf(3,"number");break;case Fd:mf(4,"number");break;case fp:ch("number");break;case Dd:mf(2,"number");break;case Of:mf(3,"number");break;case hp:mf(4,"number");break;case Nd:ch("boolean");break;case zd:mf(2,"boolean");break;case zp:mf(3,"boolean");break;case pp:mf(4,"boolean");break;case Pc:mf(4,"number");break;case Gd:mf(9,"number");break;case Ud:mf(16,"number");break;case Tv:y0(Sg);break;case Vd:y0(sa);break}});var Oa=1;switch(Cn){case Tv:case Vd:var Pa=Je.def(xa,"._texture");Je(rn,".uniform1i(",qi,",",Pa,".bind());"),Je.exit(Pa,".unbind();");continue;case sd:case Nd:ur="1i";break;case Bd:case zd:ur="2i",Oa=2;break;case kh:case zp:ur="3i",Oa=3;break;case Fd:case pp:ur="4i",Oa=4;break;case fp:ur="1f";break;case Dd:ur="2f",Oa=2;break;case Of:ur="3f",Oa=3;break;case hp:ur="4f",Oa=4;break;case Pc:ur="Matrix2fv";break;case Gd:ur="Matrix3fv";break;case Ud:ur="Matrix4fv";break}if(ur.charAt(0)==="M"){Je(rn,".uniform",ur,"(",qi,",");var So=Math.pow(Cn-Pc+2,2),qs=cr.global.def("new Float32Array(",So,")");Array.isArray(xa)?Je("false,(",or(So,function(ec){return qs+"["+ec+"]="+xa[ec]}),",",qs,")"):Je("false,(Array.isArray(",xa,")||",xa," instanceof Float32Array)?",xa,":(",or(So,function(ec){return qs+"["+ec+"]="+xa+"["+ec+"]"}),",",qs,")"),Je(");")}else if(Oa>1){for(var Yl=[],vu=[],js=0;js<Oa;++js)Array.isArray(xa)?vu.push(xa[js]):vu.push(Je.def(xa+"["+js+"]")),Yr&&Yl.push(Je.def());Yr&&Je("if(!",cr.batchId,"||",Yl.map(function(ec,ch){return ec+"!=="+vu[ch]}).join("||"),"){",Yl.map(function(ec,ch){return ec+"="+vu[ch]+";"}).join("")),Je(rn,".uniform",ur,"(",qi,",",vu.join(","),");"),Yr&&Je("}")}else{if(Ee(!Array.isArray(xa),"uniform value must not be an array"),Yr){var Bh=Je.def();Je("if(!",cr.batchId,"||",Bh,"!==",xa,"){",Bh,"=",xa,";")}Je(rn,".uniform",ur,"(",qi,",",xa,");"),Yr&&Je("}")}}}function cl(cr,Je,Nr,gn){var In=cr.shared,Yr=In.gl,Tr=In.draw,rn=gn.draw;function ur(){var Oa=rn.elements,Pa,So=Je;return Oa?((Oa.contextDep&&gn.contextDynamic||Oa.propDep)&&(So=Nr),Pa=Oa.append(cr,So),rn.elementsActive&&So("if("+Pa+")"+Yr+".bindBuffer("+Av+","+Pa+".buffer.buffer);")):(Pa=So.def(),So(Pa,"=",Tr,".",Hc,";","if(",Pa,"){",Yr,".bindBuffer(",Av,",",Pa,".buffer.buffer);}","else if(",In.vao,".currentVAO){",Pa,"=",cr.shared.elements+".getElements("+In.vao,".currentVAO.elements);",li?"":"if("+Pa+")"+Yr+".bindBuffer("+Av+","+Pa+".buffer.buffer);","}")),Pa}function Rr(){var Oa=rn.count,Pa,So=Je;return Oa?((Oa.contextDep&&gn.contextDynamic||Oa.propDep)&&(So=Nr),Pa=Oa.append(cr,So),Ee.optional(function(){Oa.MISSING&&cr.assert(Je,"false","missing vertex count"),Oa.DYNAMIC&&cr.assert(So,Pa+">=0","missing vertex count")})):(Pa=So.def(Tr,".",cp),Ee.optional(function(){cr.assert(So,Pa+">=0","missing vertex count")})),Pa}var vr=ur();function mn(Oa){var Pa=rn[Oa];return Pa?Pa.contextDep&&gn.contextDynamic||Pa.propDep?Pa.append(cr,Nr):Pa.append(cr,Je):Je.def(Tr,".",Oa)}var Cn=mn(ol),hi=mn(Pd),Ji=Rr();if(typeof Ji=="number"){if(Ji===0)return}else Nr("if(",Ji,"){"),Nr.exit("}");var qi,xa;Ai&&(qi=mn(nh),xa=cr.instancing);var Yi=vr+".type",Ga=rn.elements&&gp(rn.elements)&&!rn.vaoActive;function _a(){function Oa(){Nr(xa,".drawElementsInstancedANGLE(",[Cn,Ji,Yi,hi+"<<(("+Yi+"-"+bo+")>>1)",qi],");")}function Pa(){Nr(xa,".drawArraysInstancedANGLE(",[Cn,hi,Ji,qi],");")}vr&&vr!=="null"?Ga?Oa():(Nr("if(",vr,"){"),Oa(),Nr("}else{"),Pa(),Nr("}")):Pa()}function Da(){function Oa(){Nr(Yr+".drawElements("+[Cn,Ji,Yi,hi+"<<(("+Yi+"-"+bo+")>>1)"]+");")}function Pa(){Nr(Yr+".drawArrays("+[Cn,hi,Ji]+");")}vr&&vr!=="null"?Ga?Oa():(Nr("if(",vr,"){"),Oa(),Nr("}else{"),Pa(),Nr("}")):Pa()}Ai&&(typeof qi!="number"||qi>=0)?typeof qi=="string"?(Nr("if(",qi,">0){"),_a(),Nr("}else if(",qi,"<0){"),Da(),Nr("}")):_a():Da()}function Xi(cr,Je,Nr,gn,In){var Yr=Io(),Tr=Yr.proc("body",In);return Ee.optional(function(){Yr.commandStr=Je.commandStr,Yr.command=Yr.link(Je.commandStr)}),Ai&&(Yr.instancing=Tr.def(Yr.shared.extensions,".angle_instanced_arrays")),cr(Yr,Tr,Nr,gn),Yr.compile().body}function ya(cr,Je,Nr,gn){xu(cr,Je),Nr.useVAO?Nr.drawVAO?Je(cr.shared.vao,".setVAO(",Nr.drawVAO.append(cr,Je),");"):Je(cr.shared.vao,".setVAO(",cr.shared.vao,".targetVAO);"):(Je(cr.shared.vao,".setVAO(null);"),yl(cr,Je,Nr,gn.attributes,function(){return!0})),Is(cr,Je,Nr,gn.uniforms,function(){return!0},!1),cl(cr,Je,Je,Nr)}function Bs(cr,Je){var Nr=cr.proc("draw",1);xu(cr,Nr),ul(cr,Nr,Je.context),Pl(cr,Nr,Je.framebuffer),ll(cr,Nr,Je),ml(cr,Nr,Je.state),Uo(cr,Nr,Je,!1,!0);var gn=Je.shader.progVar.append(cr,Nr);if(Nr(cr.shared.gl,".useProgram(",gn,".program);"),Je.shader.program)ya(cr,Nr,Je,Je.shader.program);else{Nr(cr.shared.vao,".setVAO(null);");var In=cr.global.def("{}"),Yr=Nr.def(gn,".id"),Tr=Nr.def(In,"[",Yr,"]");Nr(cr.cond(Tr).then(Tr,".call(this,a0);").else(Tr,"=",In,"[",Yr,"]=",cr.link(function(rn){return Xi(ya,cr,Je,rn,1)}),"(",gn,");",Tr,".call(this,a0);"))}Object.keys(Je.state).length>0&&Nr(cr.shared.current,".dirty=true;"),cr.shared.vao&&Nr(cr.shared.vao,".setVAO(null);")}function fl(cr,Je,Nr,gn){cr.batchId="a1",xu(cr,Je);function In(){return!0}yl(cr,Je,Nr,gn.attributes,In),Is(cr,Je,Nr,gn.uniforms,In,!1),cl(cr,Je,Je,Nr)}function lh(cr,Je,Nr,gn){xu(cr,Je);var In=Nr.contextDep,Yr=Je.def(),Tr="a0",rn="a1",ur=Je.def();cr.shared.props=ur,cr.batchId=Yr;var Rr=cr.scope(),vr=cr.scope();Je(Rr.entry,"for(",Yr,"=0;",Yr,"<",rn,";++",Yr,"){",ur,"=",Tr,"[",Yr,"];",vr,"}",Rr.exit);function mn(Yi){return Yi.contextDep&&In||Yi.propDep}function Cn(Yi){return!mn(Yi)}if(Nr.needsContext&&ul(cr,vr,Nr.context),Nr.needsFramebuffer&&Pl(cr,vr,Nr.framebuffer),ml(cr,vr,Nr.state,mn),Nr.profile&&mn(Nr.profile)&&Uo(cr,vr,Nr,!1,!0),gn)Nr.useVAO?Nr.drawVAO?mn(Nr.drawVAO)?vr(cr.shared.vao,".setVAO(",Nr.drawVAO.append(cr,vr),");"):Rr(cr.shared.vao,".setVAO(",Nr.drawVAO.append(cr,Rr),");"):Rr(cr.shared.vao,".setVAO(",cr.shared.vao,".targetVAO);"):(Rr(cr.shared.vao,".setVAO(null);"),yl(cr,Rr,Nr,gn.attributes,Cn),yl(cr,vr,Nr,gn.attributes,mn)),Is(cr,Rr,Nr,gn.uniforms,Cn,!1),Is(cr,vr,Nr,gn.uniforms,mn,!0),cl(cr,Rr,vr,Nr);else{var hi=cr.global.def("{}"),Ji=Nr.shader.progVar.append(cr,vr),qi=vr.def(Ji,".id"),xa=vr.def(hi,"[",qi,"]");vr(cr.shared.gl,".useProgram(",Ji,".program);","if(!",xa,"){",xa,"=",hi,"[",qi,"]=",cr.link(function(Yi){return Xi(fl,cr,Nr,Yi,2)}),"(",Ji,");}",xa,".call(this,a0[",Yr,"],",Yr,");")}}function yr(cr,Je){var Nr=cr.proc("batch",2);cr.batchId="0",xu(cr,Nr);var gn=!1,In=!0;Object.keys(Je.context).forEach(function(hi){gn=gn||Je.context[hi].propDep}),gn||(ul(cr,Nr,Je.context),In=!1);var Yr=Je.framebuffer,Tr=!1;Yr?(Yr.propDep?gn=Tr=!0:Yr.contextDep&&gn&&(Tr=!0),Tr||Pl(cr,Nr,Yr)):Pl(cr,Nr,null),Je.state.viewport&&Je.state.viewport.propDep&&(gn=!0);function rn(hi){return hi.contextDep&&gn||hi.propDep}ll(cr,Nr,Je),ml(cr,Nr,Je.state,function(hi){return!rn(hi)}),(!Je.profile||!rn(Je.profile))&&Uo(cr,Nr,Je,!1,"a1"),Je.contextDep=gn,Je.needsContext=In,Je.needsFramebuffer=Tr;var ur=Je.shader.progVar;if(ur.contextDep&&gn||ur.propDep)lh(cr,Nr,Je,null);else{var Rr=ur.append(cr,Nr);if(Nr(cr.shared.gl,".useProgram(",Rr,".program);"),Je.shader.program)lh(cr,Nr,Je,Je.shader.program);else{Nr(cr.shared.vao,".setVAO(null);");var vr=cr.global.def("{}"),mn=Nr.def(Rr,".id"),Cn=Nr.def(vr,"[",mn,"]");Nr(cr.cond(Cn).then(Cn,".call(this,a0,a1);").else(Cn,"=",vr,"[",mn,"]=",cr.link(function(hi){return Xi(lh,cr,Je,hi,2)}),"(",Rr,");",Cn,".call(this,a0,a1);"))}}Object.keys(Je.state).length>0&&Nr(cr.shared.current,".dirty=true;"),cr.shared.vao&&Nr(cr.shared.vao,".setVAO(null);")}function Dn(cr,Je){var Nr=cr.proc("scope",3);cr.batchId="a2";var gn=cr.shared,In=gn.current;ul(cr,Nr,Je.context),Je.framebuffer&&Je.framebuffer.append(cr,Nr),Cg(Object.keys(Je.state)).forEach(function(Tr){var rn=Je.state[Tr],ur=rn.append(cr,Nr);Hr(ur)?ur.forEach(function(Rr,vr){Nr.set(cr.next[Tr],"["+vr+"]",Rr)}):Nr.set(gn.next,"."+Tr,ur)}),Uo(cr,Nr,Je,!0,!0),[Hc,Pd,cp,nh,ol].forEach(function(Tr){var rn=Je.draw[Tr];!rn||Nr.set(gn.draw,"."+Tr,""+rn.append(cr,Nr))}),Object.keys(Je.uniforms).forEach(function(Tr){var rn=Je.uniforms[Tr].append(cr,Nr);Array.isArray(rn)&&(rn="["+rn.join()+"]"),Nr.set(gn.uniforms,"["+ar.id(Tr)+"]",rn)}),Object.keys(Je.attributes).forEach(function(Tr){var rn=Je.attributes[Tr].append(cr,Nr),ur=cr.scopeAttrib(Tr);Object.keys(new fn).forEach(function(Rr){Nr.set(ur,"."+Rr,rn[Rr])})}),Je.scopeVAO&&Nr.set(gn.vao,".targetVAO",Je.scopeVAO.append(cr,Nr));function Yr(Tr){var rn=Je.shader[Tr];rn&&Nr.set(gn.shader,"."+Tr,rn.append(cr,Nr))}Yr(If),Yr(Fp),Object.keys(Je.state).length>0&&(Nr(In,".dirty=true;"),Nr.exit(In,".dirty=true;")),Nr("a1(",cr.shared.context,",a0,",cr.batchId,");")}function Mn(cr){if(!(typeof cr!="object"||Hr(cr))){for(var Je=Object.keys(cr),Nr=0;Nr<Je.length;++Nr)if(Ui.isDynamic(cr[Je[Nr]]))return!0;return!1}}function Ta(cr,Je,Nr){var gn=Je.static[Nr];if(!gn||!Mn(gn))return;var In=cr.global,Yr=Object.keys(gn),Tr=!1,rn=!1,ur=!1,Rr=cr.global.def("{}");Yr.forEach(function(mn){var Cn=gn[mn];if(Ui.isDynamic(Cn)){typeof Cn=="function"&&(Cn=gn[mn]=Ui.unbox(Cn));var hi=Ic(Cn,null);Tr=Tr||hi.thisDep,ur=ur||hi.propDep,rn=rn||hi.contextDep}else{switch(In(Rr,".",mn,"="),typeof Cn){case"number":In(Cn);break;case"string":In('"',Cn,'"');break;case"object":Array.isArray(Cn)&&In("[",Cn.join(),"]");break;default:In(cr.link(Cn));break}In(";")}});function vr(mn,Cn){Yr.forEach(function(hi){var Ji=gn[hi];if(!!Ui.isDynamic(Ji)){var qi=mn.invoke(Cn,Ji);Cn(Rr,".",hi,"=",qi,";")}})}Je.dynamic[Nr]=new Ui.DynamicVariable(al,{thisDep:Tr,contextDep:rn,propDep:ur,ref:Rr,append:vr}),delete Je.static[Nr]}function fs(cr,Je,Nr,gn,In){var Yr=Io();Yr.stats=Yr.link(In),Object.keys(Je.static).forEach(function(rn){Ta(Yr,Je,rn)}),Ld.forEach(function(rn){Ta(Yr,cr,rn)});var Tr=Tl(cr,Je,Nr,gn,Yr);return Bs(Yr,Tr),Dn(Yr,Tr),yr(Yr,Tr),y(Yr.compile(),{destroy:function(){Tr.shader.program.destroy()}})}return{next:ha,current:Zi,procs:function(){var cr=Io(),Je=cr.proc("poll"),Nr=cr.proc("refresh"),gn=cr.block();Je(gn),Nr(gn);var In=cr.shared,Yr=In.gl,Tr=In.next,rn=In.current;gn(rn,".dirty=false;"),Pl(cr,Je),Pl(cr,Nr,null,!0);var ur;Ai&&(ur=cr.link(Ai)),Pr.oes_vertex_array_object&&Nr(cr.link(Pr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Rr=0;Rr<Ln.maxAttributes;++Rr){var vr=Nr.def(In.attributes,"[",Rr,"]"),mn=cr.cond(vr,".buffer");mn.then(Yr,".enableVertexAttribArray(",Rr,");",Yr,".bindBuffer(",ah,",",vr,".buffer.buffer);",Yr,".vertexAttribPointer(",Rr,",",vr,".size,",vr,".type,",vr,".normalized,",vr,".stride,",vr,".offset);").else(Yr,".disableVertexAttribArray(",Rr,");",Yr,".vertexAttrib4f(",Rr,",",vr,".x,",vr,".y,",vr,".z,",vr,".w);",vr,".buffer=null;"),Nr(mn),Ai&&Nr(ur,".vertexAttribDivisorANGLE(",Rr,",",vr,".divisor);")}return Nr(cr.shared.vao,".currentVAO=null;",cr.shared.vao,".setVAO(",cr.shared.vao,".targetVAO);"),Object.keys(Xn).forEach(function(Cn){var hi=Xn[Cn],Ji=gn.def(Tr,".",Cn),qi=cr.block();qi("if(",Ji,"){",Yr,".enable(",hi,")}else{",Yr,".disable(",hi,")}",rn,".",Cn,"=",Ji,";"),Nr(qi),Je("if(",Ji,"!==",rn,".",Cn,"){",qi,"}")}),Object.keys(ei).forEach(function(Cn){var hi=ei[Cn],Ji=Zi[Cn],qi,xa,Yi=cr.block();if(Yi(Yr,".",hi,"("),Hr(Ji)){var Ga=Ji.length;qi=cr.global.def(Tr,".",Cn),xa=cr.global.def(rn,".",Cn),Yi(or(Ga,function(_a){return qi+"["+_a+"]"}),");",or(Ga,function(_a){return xa+"["+_a+"]="+qi+"["+_a+"];"}).join("")),Je("if(",or(Ga,function(_a){return qi+"["+_a+"]!=="+xa+"["+_a+"]"}).join("||"),"){",Yi,"}")}else qi=gn.def(Tr,".",Cn),xa=gn.def(rn,".",Cn),Yi(qi,");",rn,".",Cn,"=",qi,";"),Je("if(",qi,"!==",xa,"){",Yi,"}");Nr(Yi)}),cr.compile()}(),compile:fs}}function om(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var kf=34918,Xd=34919,Up=35007,Ag=function(be,ar){if(!ar.ext_disjoint_timer_query)return null;var Pr=[];function Ln(){return Pr.pop()||ar.ext_disjoint_timer_query.createQueryEXT()}function ni(Ai){Pr.push(Ai)}var On=[];function Wn(Ai){var Ki=Ln();ar.ext_disjoint_timer_query.beginQueryEXT(Up,Ki),On.push(Ki),Mi(On.length-1,On.length,Ai)}function fi(){ar.ext_disjoint_timer_query.endQueryEXT(Up)}function xi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ii=[];function Ni(){return Ii.pop()||new xi}function zi(Ai){Ii.push(Ai)}var ra=[];function Mi(Ai,Ki,li){var Zi=Ni();Zi.startQueryIndex=Ai,Zi.endQueryIndex=Ki,Zi.sum=0,Zi.stats=li,ra.push(Zi)}var Di=[],fn=[];function zn(){var Ai,Ki,li=On.length;if(li!==0){fn.length=Math.max(fn.length,li+1),Di.length=Math.max(Di.length,li+1),Di[0]=0,fn[0]=0;var Zi=0;for(Ai=0,Ki=0;Ki<On.length;++Ki){var ha=On[Ki];ar.ext_disjoint_timer_query.getQueryObjectEXT(ha,Xd)?(Zi+=ar.ext_disjoint_timer_query.getQueryObjectEXT(ha,kf),ni(ha)):On[Ai++]=ha,Di[Ki+1]=Zi,fn[Ki+1]=Ai}for(On.length=Ai,Ai=0,Ki=0;Ki<ra.length;++Ki){var ao=ra[Ki],Xn=ao.startQueryIndex,ei=ao.endQueryIndex;ao.sum+=Di[ei]-Di[Xn];var ka=fn[Xn],aa=fn[ei];aa===ka?(ao.stats.gpuTime+=ao.sum/1e6,zi(ao)):(ao.startQueryIndex=ka,ao.endQueryIndex=aa,ra[Ai++]=ao)}ra.length=Ai}}return{beginQuery:Wn,endQuery:fi,pushScopeStats:Mi,update:zn,getNumPendingQueries:function(){return On.length},clear:function(){Pr.push.apply(Pr,On);for(var Ai=0;Ai<Pr.length;Ai++)ar.ext_disjoint_timer_query.deleteQueryEXT(Pr[Ai]);On.length=0,Pr.length=0},restore:function(){On.length=0,Pr.length=0}}},Yd=16384,Dh=256,gl=1024,Wd=34962,Kd="webglcontextlost",eu="webglcontextrestored",Mg=1,Rf=2,ud=3;function Ov(be,ar){for(var Pr=0;Pr<be.length;++Pr)if(be[Pr]===ar)return Pr;return-1}function gy(be){var ar=Te(be);if(!ar)return null;var Pr=ar.gl,Ln=Pr.getContextAttributes(),ni=Pr.isContextLost(),On=Ze(Pr,ar);if(!On)return null;var Wn=Ar(),fi=om(),xi=On.extensions,Ii=Ag(Pr,xi),Ni=fr(),zi=Pr.drawingBufferWidth,ra=Pr.drawingBufferHeight,Mi={tick:0,time:0,viewportWidth:zi,viewportHeight:ra,framebufferWidth:zi,framebufferHeight:ra,drawingBufferWidth:zi,drawingBufferHeight:ra,pixelRatio:ar.pixelRatio},Di={},fn={elements:null,primitive:4,count:-1,offset:0,instances:-1},zn=ji(Pr,xi),Ai=me(Pr,fi,ar,Zi),Ki=ye(Pr,xi,Ai,fi),li=Sn(Pr,xi,zn,fi,Ai,Ki,fn);function Zi(Xi){return li.destroyBuffer(Xi)}var ha=Vi(Pr,Wn,fi,ar),ao=cs(Pr,xi,zn,function(){ka.procs.poll()},Mi,fi,ar),Xn=Cf(Pr,xi,zn,fi,ar),ei=pr(Pr,xi,zn,ao,Xn,fi),ka=m0(Pr,Wn,xi,zn,Ai,Ki,ao,ei,Di,li,ha,fn,Mi,Ii,ar),aa=so(Pr,ei,ka.procs.poll,Mi,Ln,xi,zn),Oi=ka.next,ua=Pr.canvas,$i=[],Go=[],Io=[],na=[ar.onDestroy],ma=null;function Co(){if($i.length===0){Ii&&Ii.update(),ma=null;return}ma=Ue.next(Co),xu();for(var Xi=$i.length-1;Xi>=0;--Xi){var ya=$i[Xi];ya&&ya(Mi,null,0)}Pr.flush(),Ii&&Ii.update()}function Do(){!ma&&$i.length>0&&(ma=Ue.next(Co))}function os(){ma&&(Ue.cancel(Co),ma=null)}function ku(Xi){Xi.preventDefault(),ni=!0,os(),Go.forEach(function(ya){ya()})}function zu(Xi){Pr.getError(),ni=!1,On.restore(),ha.restore(),Ai.restore(),ao.restore(),Xn.restore(),ei.restore(),li.restore(),Ii&&Ii.restore(),ka.procs.refresh(),Do(),Io.forEach(function(ya){ya()})}var ss=typeof my!="undefined"&&!!my&&typeof my.showToast=="function";!ss&&ua&&(ua.addEventListener(Kd,ku,!1),ua.addEventListener(eu,zu,!1));function Dl(){$i.length=0,os(),!ss&&ua&&(ua.removeEventListener(Kd,ku),ua.removeEventListener(eu,zu)),ha.clear(),ei.clear(),Xn.clear(),li.clear(),ao.clear(),Ki.clear(),Ai.clear(),Ii&&Ii.clear(),na.forEach(function(Xi){Xi()})}function yu(Xi){Ee(!!Xi,"invalid args to regl({...})"),Ee.type(Xi,"object","invalid args to regl({...})");function ya(Yr){var Tr=y({},Yr);delete Tr.uniforms,delete Tr.attributes,delete Tr.context,delete Tr.vao,"stencil"in Tr&&Tr.stencil.op&&(Tr.stencil.opBack=Tr.stencil.opFront=Tr.stencil.op,delete Tr.stencil.op);function rn(ur){if(ur in Tr){var Rr=Tr[ur];delete Tr[ur],Object.keys(Rr).forEach(function(vr){Tr[ur+"."+vr]=Rr[vr]})}}return rn("blend"),rn("depth"),rn("cull"),rn("stencil"),rn("polygonOffset"),rn("scissor"),rn("sample"),"vao"in Yr&&(Tr.vao=Yr.vao),Tr}function Bs(Yr,Tr){var rn={},ur={};return Object.keys(Yr).forEach(function(Rr){var vr=Yr[Rr];if(Ui.isDynamic(vr)){ur[Rr]=Ui.unbox(vr,Rr);return}else if(Tr&&Array.isArray(vr)){for(var mn=0;mn<vr.length;++mn)if(Ui.isDynamic(vr[mn])){ur[Rr]=Ui.unbox(vr,Rr);return}}rn[Rr]=vr}),{dynamic:ur,static:rn}}var fl=Bs(Xi.context||{},!0),lh=Bs(Xi.uniforms||{},!0),yr=Bs(Xi.attributes||{},!1),Dn=Bs(ya(Xi),!1),Mn={gpuTime:0,cpuTime:0,count:0},Ta=ka.compile(Dn,yr,lh,fl,Mn),fs=Ta.draw,cr=Ta.batch,Je=Ta.scope,Nr=[];function gn(Yr){for(;Nr.length<Yr;)Nr.push(null);return Nr}function In(Yr,Tr){var rn;if(ni&&Ee.raise("context lost"),typeof Yr=="function")return Je.call(this,null,Yr,0);if(typeof Tr=="function")if(typeof Yr=="number")for(rn=0;rn<Yr;++rn)Je.call(this,null,Tr,rn);else if(Array.isArray(Yr))for(rn=0;rn<Yr.length;++rn)Je.call(this,Yr[rn],Tr,rn);else return Je.call(this,Yr,Tr,0);else if(typeof Yr=="number"){if(Yr>0)return cr.call(this,gn(Yr|0),Yr|0)}else if(Array.isArray(Yr)){if(Yr.length)return cr.call(this,Yr,Yr.length)}else return fs.call(this,Yr)}return y(In,{stats:Mn,destroy:function(){Ta.destroy()}})}var Tl=ei.setFBO=yu({framebuffer:Ui.define.call(null,Mg,"framebuffer")});function ul(Xi,ya){var Bs=0;ka.procs.poll();var fl=ya.color;fl&&(Pr.clearColor(+fl[0]||0,+fl[1]||0,+fl[2]||0,+fl[3]||0),Bs|=Yd),"depth"in ya&&(Pr.clearDepth(+ya.depth),Bs|=Dh),"stencil"in ya&&(Pr.clearStencil(ya.stencil|0),Bs|=gl),Ee(!!Bs,"called regl.clear with no buffer specified"),Pr.clear(Bs)}function Pl(Xi){if(Ee(typeof Xi=="object"&&Xi,"regl.clear() takes an object as input"),"framebuffer"in Xi)if(Xi.framebuffer&&Xi.framebuffer_reglType==="framebufferCube")for(var ya=0;ya<6;++ya)Tl(y({framebuffer:Xi.framebuffer.faces[ya]},Xi),ul);else Tl(Xi,ul);else ul(null,Xi)}function ll(Xi){Ee.type(Xi,"function","regl.frame() callback must be a function"),$i.push(Xi);function ya(){var Bs=Ov($i,Xi);Ee(Bs>=0,"cannot cancel a frame twice");function fl(){var lh=Ov($i,fl);$i[lh]=$i[$i.length-1],$i.length-=1,$i.length<=0&&os()}$i[Bs]=fl}return Do(),{cancel:ya}}function ml(){var Xi=Oi.viewport,ya=Oi.scissor_box;Xi[0]=Xi[1]=ya[0]=ya[1]=0,Mi.viewportWidth=Mi.framebufferWidth=Mi.drawingBufferWidth=Xi[2]=ya[2]=Pr.drawingBufferWidth,Mi.viewportHeight=Mi.framebufferHeight=Mi.drawingBufferHeight=Xi[3]=ya[3]=Pr.drawingBufferHeight}function xu(){Mi.tick+=1,Mi.time=yl(),ml(),ka.procs.poll()}function Uo(){ao.refresh(),ml(),ka.procs.refresh(),Ii&&Ii.update()}function yl(){return(fr()-Ni)/1e3}Uo();function Is(Xi,ya){Ee.type(ya,"function","listener callback must be a function");var Bs;switch(Xi){case"frame":return ll(ya);case"lost":Bs=Go;break;case"restore":Bs=Io;break;case"destroy":Bs=na;break;default:Ee.raise("invalid event, must be one of frame,lost,restore,destroy")}return Bs.push(ya),{cancel:function(){for(var fl=0;fl<Bs.length;++fl)if(Bs[fl]===ya){Bs[fl]=Bs[Bs.length-1],Bs.pop();return}}}}var cl=y(yu,{clear:Pl,prop:Ui.define.bind(null,Mg),context:Ui.define.bind(null,Rf),this:Ui.define.bind(null,ud),draw:yu({}),buffer:function(Xi){return Ai.create(Xi,Wd,!1,!1)},elements:function(Xi){return Ki.create(Xi,!1)},texture:ao.create2D,cube:ao.createCube,renderbuffer:Xn.create,framebuffer:ei.create,framebufferCube:ei.createCube,vao:li.createVAO,attributes:Ln,frame:ll,on:Is,limits:zn,hasExtension:function(Xi){return zn.extensions.indexOf(Xi.toLowerCase())>=0},read:aa,destroy:Dl,_gl:Pr,_refresh:Uo,poll:function(){xu(),Ii&&Ii.update()},now:yl,stats:fi});return ar.onDone(null,cl),cl}return gy})},96874:function(Vt){function P(S,T,j){switch(j.length){case 0:return S.call(T);case 1:return S.call(T,j[0]);case 2:return S.call(T,j[0],j[1]);case 3:return S.call(T,j[0],j[1],j[2])}return S.apply(T,j)}Vt.exports=P},47443:function(Vt,P,S){var T=S(42118);function j(y,U){var F=y==null?0:y.length;return!!F&&T(y,U,0)>-1}Vt.exports=j},1196:function(Vt){function P(S,T,j){for(var y=-1,U=S==null?0:S.length;++y<U;)if(j(T,S[y]))return!0;return!1}Vt.exports=P},62663:function(Vt){function P(S,T,j,y){var U=-1,F=S==null?0:S.length;for(y&&F&&(j=S[++U]);++U<F;)j=T(j,S[U],U,S);return j}Vt.exports=P},48983:function(Vt,P,S){var T=S(40371),j=T("length");Vt.exports=j},44286:function(Vt){function P(S){return S.split("")}Vt.exports=P},49029:function(Vt){var P=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function S(T){return T.match(P)||[]}Vt.exports=S},86556:function(Vt,P,S){var T=S(89465),j=S(77813);function y(U,F,B){(B!==void 0&&!j(U[F],B)||B===void 0&&!(F in U))&&T(U,F,B)}Vt.exports=y},29750:function(Vt){function P(S,T,j){return S===S&&(j!==void 0&&(S=S<=j?S:j),T!==void 0&&(S=S>=T?S:T)),S}Vt.exports=P},56029:function(Vt,P,S){var T=S(33448);function j(y,U,F){for(var B=-1,R=y.length;++B<R;){var N=y[B],A=U(N);if(A!=null&&(D===void 0?A===A&&!T(A):F(A,D)))var D=A,M=N}return M}Vt.exports=j},80760:function(Vt,P,S){var T=S(89881);function j(y,U){var F=[];return T(y,function(B,R,N){U(B,R,N)&&F.push(B)}),F}Vt.exports=j},41848:function(Vt){function P(S,T,j,y){for(var U=S.length,F=j+(y?1:-1);y?F--:++F<U;)if(T(S[F],F,S))return F;return-1}Vt.exports=P},21078:function(Vt,P,S){var T=S(62488),j=S(37285);function y(U,F,B,R,N){var A=-1,D=U.length;for(B||(B=j),N||(N=[]);++A<D;){var M=U[A];F>0&&B(M)?F>1?y(M,F-1,B,R,N):T(N,M):R||(N[N.length]=M)}return N}Vt.exports=y},53325:function(Vt){function P(S,T){return S>T}Vt.exports=P},78565:function(Vt){var P=Object.prototype,S=P.hasOwnProperty;function T(j,y){return j!=null&&S.call(j,y)}Vt.exports=T},42118:function(Vt,P,S){var T=S(41848),j=S(62722),y=S(42351);function U(F,B,R){return B===B?y(F,B,R):T(F,j,R)}Vt.exports=U},62722:function(Vt){function P(S){return S!==S}Vt.exports=P},70433:function(Vt){function P(S,T){return S<T}Vt.exports=P},42980:function(Vt,P,S){var T=S(46384),j=S(86556),y=S(28483),U=S(59783),F=S(13218),B=S(81704),R=S(36390);function N(A,D,M,O,k){A!==D&&y(D,function(V,X){if(k||(k=new T),F(V))U(A,D,X,M,N,O,k);else{var K=O?O(R(A,X),V,X+"",A,D,k):void 0;K===void 0&&(K=V),j(A,X,K)}},B)}Vt.exports=N},59783:function(Vt,P,S){var T=S(86556),j=S(64626),y=S(77133),U=S(278),F=S(38517),B=S(35694),R=S(1469),N=S(29246),A=S(44144),D=S(23560),M=S(13218),O=S(68630),k=S(36719),V=S(36390),X=S(59881);function K(q,ct,_t,yt,lt,Lt,wt){var Gt=V(q,_t),re=V(ct,_t),Qt=wt.get(re);if(Qt){T(q,_t,Qt);return}var it=Lt?Lt(Gt,re,_t+"",q,ct,wt):void 0,dt=it===void 0;if(dt){var gt=R(re),vt=!gt&&A(re),Y=!gt&&!vt&&k(re);it=re,gt||vt||Y?R(Gt)?it=Gt:N(Gt)?it=U(Gt):vt?(dt=!1,it=j(re,!0)):Y?(dt=!1,it=y(re,!0)):it=[]:O(re)||B(re)?(it=Gt,B(Gt)?it=X(Gt):(!M(Gt)||D(Gt))&&(it=F(re))):dt=!1}dt&&(wt.set(re,it),lt(it,re,yt,Lt,wt),wt.delete(re)),T(q,_t,it)}Vt.exports=K},82689:function(Vt,P,S){var T=S(29932),j=S(97786),y=S(67206),U=S(69199),F=S(71131),B=S(7518),R=S(85022),N=S(6557),A=S(1469);function D(M,O,k){O.length?O=T(O,function(K){return A(K)?function(q){return j(q,K.length===1?K[0]:K)}:K}):O=[N];var V=-1;O=T(O,B(y));var X=U(M,function(K,q,ct){var _t=T(O,function(yt){return yt(K)});return{criteria:_t,index:++V,value:K}});return F(X,function(K,q){return R(K,q,k)})}Vt.exports=D},25970:function(Vt,P,S){var T=S(63012),j=S(79095);function y(U,F){return T(U,F,function(B,R){return j(U,R)})}Vt.exports=y},63012:function(Vt,P,S){var T=S(97786),j=S(10611),y=S(71811);function U(F,B,R){for(var N=-1,A=B.length,D={};++N<A;){var M=B[N],O=T(F,M);R(O,M)&&j(D,y(M,F),O)}return D}Vt.exports=U},18674:function(Vt){function P(S){return function(T){return S==null?void 0:S[T]}}Vt.exports=P},40098:function(Vt){var P=Math.ceil,S=Math.max;function T(j,y,U,F){for(var B=-1,R=S(P((y-j)/(U||1)),0),N=Array(R);R--;)N[F?R:++B]=j,j+=U;return N}Vt.exports=T},10107:function(Vt){function P(S,T,j,y,U){return U(S,function(F,B,R){j=y?(y=!1,F):T(j,F,B,R)}),j}Vt.exports=P},18190:function(Vt){var P=9007199254740991,S=Math.floor;function T(j,y){var U="";if(!j||y<1||y>P)return U;do y%2&&(U+=j),y=S(y/2),y&&(j+=j);while(y);return U}Vt.exports=T},5976:function(Vt,P,S){var T=S(6557),j=S(45357),y=S(30061);function U(F,B){return y(j(F,B,T),F+"")}Vt.exports=U},10611:function(Vt,P,S){var T=S(34865),j=S(71811),y=S(65776),U=S(13218),F=S(40327);function B(R,N,A,D){if(!U(R))return R;N=j(N,R);for(var M=-1,O=N.length,k=O-1,V=R;V!=null&&++M<O;){var X=F(N[M]),K=A;if(X==="__proto__"||X==="constructor"||X==="prototype")return R;if(M!=k){var q=V[X];K=D?D(q,X,V):void 0,K===void 0&&(K=U(q)?q:y(N[M+1])?[]:{})}T(V,X,K),V=V[X]}return R}Vt.exports=B},56560:function(Vt,P,S){var T=S(75703),j=S(38777),y=S(6557),U=j?function(F,B){return j(F,"toString",{configurable:!0,enumerable:!1,value:T(B),writable:!0})}:y;Vt.exports=U},14259:function(Vt){function P(S,T,j){var y=-1,U=S.length;T<0&&(T=-T>U?0:U+T),j=j>U?U:j,j<0&&(j+=U),U=T>j?0:j-T>>>0,T>>>=0;for(var F=Array(U);++y<U;)F[y]=S[y+T];return F}Vt.exports=P},71131:function(Vt){function P(S,T){var j=S.length;for(S.sort(T);j--;)S[j]=S[j].value;return S}Vt.exports=P},45652:function(Vt,P,S){var T=S(88668),j=S(47443),y=S(1196),U=S(74757),F=S(23593),B=S(21814),R=200;function N(A,D,M){var O=-1,k=j,V=A.length,X=!0,K=[],q=K;if(M)X=!1,k=y;else if(V>=R){var ct=D?null:F(A);if(ct)return B(ct);X=!1,k=U,q=new T}else q=D?[]:K;t:for(;++O<V;){var _t=A[O],yt=D?D(_t):_t;if(_t=M||_t!==0?_t:0,X&&yt===yt){for(var lt=q.length;lt--;)if(q[lt]===yt)continue t;D&&q.push(yt),K.push(_t)}else k(q,yt,M)||(q!==K&&q.push(yt),K.push(_t))}return K}Vt.exports=N},47415:function(Vt,P,S){var T=S(29932);function j(y,U){return T(U,function(F){return y[F]})}Vt.exports=j},1757:function(Vt){function P(S,T,j){for(var y=-1,U=S.length,F=T.length,B={};++y<U;){var R=y<F?T[y]:void 0;j(B,S[y],R)}return B}Vt.exports=P},40180:function(Vt,P,S){var T=S(14259);function j(y,U,F){var B=y.length;return F=F===void 0?B:F,!U&&F>=B?y:T(y,U,F)}Vt.exports=j},26393:function(Vt,P,S){var T=S(33448);function j(y,U){if(y!==U){var F=y!==void 0,B=y===null,R=y===y,N=T(y),A=U!==void 0,D=U===null,M=U===U,O=T(U);if(!D&&!O&&!N&&y>U||N&&A&&M&&!D&&!O||B&&A&&M||!F&&M||!R)return 1;if(!B&&!N&&!O&&y<U||O&&F&&R&&!B&&!N||D&&F&&R||!A&&R||!M)return-1}return 0}Vt.exports=j},85022:function(Vt,P,S){var T=S(26393);function j(y,U,F){for(var B=-1,R=y.criteria,N=U.criteria,A=R.length,D=F.length;++B<A;){var M=T(R[B],N[B]);if(M){if(B>=D)return M;var O=F[B];return M*(O=="desc"?-1:1)}}return y.index-U.index}Vt.exports=j},21463:function(Vt,P,S){var T=S(5976),j=S(16612);function y(U){return T(function(F,B){var R=-1,N=B.length,A=N>1?B[N-1]:void 0,D=N>2?B[2]:void 0;for(A=U.length>3&&typeof A=="function"?(N--,A):void 0,D&&j(B[0],B[1],D)&&(A=N<3?void 0:A,N=1),F=Object(F);++R<N;){var M=B[R];M&&U(F,M,R,A)}return F})}Vt.exports=y},98805:function(Vt,P,S){var T=S(40180),j=S(62689),y=S(83140),U=S(79833);function F(B){return function(R){R=U(R);var N=j(R)?y(R):void 0,A=N?N[0]:R.charAt(0),D=N?T(N,1).join(""):R.slice(1);return A[B]()+D}}Vt.exports=F},35393:function(Vt,P,S){var T=S(62663),j=S(53816),y=S(58748),U="['\u2019]",F=RegExp(U,"g");function B(R){return function(N){return T(y(j(N).replace(F,"")),R,"")}}Vt.exports=B},67740:function(Vt,P,S){var T=S(67206),j=S(98612),y=S(3674);function U(F){return function(B,R,N){var A=Object(B);if(!j(B)){var D=T(R,3);B=y(B),R=function(O){return D(A[O],O,A)}}var M=F(B,R,N);return M>-1?A[D?B[M]:M]:void 0}}Vt.exports=U},78302:function(Vt,P,S){var T=S(18190),j=S(80531),y=S(40180),U=S(62689),F=S(88016),B=S(83140),R=Math.ceil;function N(A,D){D=D===void 0?" ":j(D);var M=D.length;if(M<2)return M?T(D,A):D;var O=T(D,R(A/F(D)));return U(D)?y(B(O),0,A).join(""):O.slice(0,A)}Vt.exports=N},47445:function(Vt,P,S){var T=S(40098),j=S(16612),y=S(18601);function U(F){return function(B,R,N){return N&&typeof N!="number"&&j(B,R,N)&&(R=N=void 0),B=y(B),R===void 0?(R=B,B=0):R=y(R),N=N===void 0?B<R?1:-1:y(N),T(B,R,N,F)}}Vt.exports=U},23593:function(Vt,P,S){var T=S(58525),j=S(50308),y=S(21814),U=1/0,F=T&&1/y(new T([,-0]))[1]==U?function(B){return new T(B)}:j;Vt.exports=F},69389:function(Vt,P,S){var T=S(18674),j={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},y=T(j);Vt.exports=y},99021:function(Vt,P,S){var T=S(85564),j=S(45357),y=S(30061);function U(F){return y(j(F,void 0,T),F+"")}Vt.exports=U},62689:function(Vt){var P="\\ud800-\\udfff",S="\\u0300-\\u036f",T="\\ufe20-\\ufe2f",j="\\u20d0-\\u20ff",y=S+T+j,U="\\ufe0e\\ufe0f",F="\\u200d",B=RegExp("["+F+P+y+U+"]");function R(N){return B.test(N)}Vt.exports=R},93157:function(Vt){var P=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function S(T){return P.test(T)}Vt.exports=S},37285:function(Vt,P,S){var T=S(62705),j=S(35694),y=S(1469),U=T?T.isConcatSpreadable:void 0;function F(B){return y(B)||j(B)||!!(U&&B&&B[U])}Vt.exports=F},16612:function(Vt,P,S){var T=S(77813),j=S(98612),y=S(65776),U=S(13218);function F(B,R,N){if(!U(N))return!1;var A=typeof R;return(A=="number"?j(N)&&y(R,N.length):A=="string"&&R in N)?T(N[R],B):!1}Vt.exports=F},45357:function(Vt,P,S){var T=S(96874),j=Math.max;function y(U,F,B){return F=j(F===void 0?U.length-1:F,0),function(){for(var R=arguments,N=-1,A=j(R.length-F,0),D=Array(A);++N<A;)D[N]=R[F+N];N=-1;for(var M=Array(F+1);++N<F;)M[N]=R[N];return M[F]=B(D),T(U,this,M)}}Vt.exports=y},36390:function(Vt){function P(S,T){if(!(T==="constructor"&&typeof S[T]=="function")&&T!="__proto__")return S[T]}Vt.exports=P},30061:function(Vt,P,S){var T=S(56560),j=S(21275),y=j(T);Vt.exports=y},21275:function(Vt){var P=800,S=16,T=Date.now;function j(y){var U=0,F=0;return function(){var B=T(),R=S-(B-F);if(F=B,R>0){if(++U>=P)return arguments[0]}else U=0;return y.apply(void 0,arguments)}}Vt.exports=j},42351:function(Vt){function P(S,T,j){for(var y=j-1,U=S.length;++y<U;)if(S[y]===T)return y;return-1}Vt.exports=P},88016:function(Vt,P,S){var T=S(48983),j=S(62689),y=S(21903);function U(F){return j(F)?y(F):T(F)}Vt.exports=U},83140:function(Vt,P,S){var T=S(44286),j=S(62689),y=S(676);function U(F){return j(F)?y(F):T(F)}Vt.exports=U},21903:function(Vt){var P="\\ud800-\\udfff",S="\\u0300-\\u036f",T="\\ufe20-\\ufe2f",j="\\u20d0-\\u20ff",y=S+T+j,U="\\ufe0e\\ufe0f",F="["+P+"]",B="["+y+"]",R="\\ud83c[\\udffb-\\udfff]",N="(?:"+B+"|"+R+")",A="[^"+P+"]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",O="\\u200d",k=N+"?",V="["+U+"]?",X="(?:"+O+"(?:"+[A,D,M].join("|")+")"+V+k+")*",K=V+k+X,q="(?:"+[A+B+"?",B,D,M,F].join("|")+")",ct=RegExp(R+"(?="+R+")|"+q+K,"g");function _t(yt){for(var lt=ct.lastIndex=0;ct.test(yt);)++lt;return lt}Vt.exports=_t},676:function(Vt){var P="\\ud800-\\udfff",S="\\u0300-\\u036f",T="\\ufe20-\\ufe2f",j="\\u20d0-\\u20ff",y=S+T+j,U="\\ufe0e\\ufe0f",F="["+P+"]",B="["+y+"]",R="\\ud83c[\\udffb-\\udfff]",N="(?:"+B+"|"+R+")",A="[^"+P+"]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",O="\\u200d",k=N+"?",V="["+U+"]?",X="(?:"+O+"(?:"+[A,D,M].join("|")+")"+V+k+")*",K=V+k+X,q="(?:"+[A+B+"?",B,D,M,F].join("|")+")",ct=RegExp(R+"(?="+R+")|"+q+K,"g");function _t(yt){return yt.match(ct)||[]}Vt.exports=_t},2757:function(Vt){var P="\\ud800-\\udfff",S="\\u0300-\\u036f",T="\\ufe20-\\ufe2f",j="\\u20d0-\\u20ff",y=S+T+j,U="\\u2700-\\u27bf",F="a-z\\xdf-\\xf6\\xf8-\\xff",B="\\xac\\xb1\\xd7\\xf7",R="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",N="\\u2000-\\u206f",A=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",D="A-Z\\xc0-\\xd6\\xd8-\\xde",M="\\ufe0e\\ufe0f",O=B+R+N+A,k="['\u2019]",V="["+O+"]",X="["+y+"]",K="\\d+",q="["+U+"]",ct="["+F+"]",_t="[^"+P+O+K+U+F+D+"]",yt="\\ud83c[\\udffb-\\udfff]",lt="(?:"+X+"|"+yt+")",Lt="[^"+P+"]",wt="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",re="["+D+"]",Qt="\\u200d",it="(?:"+ct+"|"+_t+")",dt="(?:"+re+"|"+_t+")",gt="(?:"+k+"(?:d|ll|m|re|s|t|ve))?",vt="(?:"+k+"(?:D|LL|M|RE|S|T|VE))?",Y=lt+"?",ot="["+M+"]?",nt="(?:"+Qt+"(?:"+[Lt,wt,Gt].join("|")+")"+ot+Y+")*",rt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",st="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",d=ot+Y+nt,It="(?:"+[q,wt,Gt].join("|")+")"+d,Ht=RegExp([re+"?"+ct+"+"+gt+"(?="+[V,re,"$"].join("|")+")",dt+"+"+vt+"(?="+[V,re+it,"$"].join("|")+")",re+"?"+it+"+"+gt,re+"+"+vt,st,rt,K,It].join("|"),"g");function kt(Xt){return Xt.match(Ht)||[]}Vt.exports=kt},68929:function(Vt,P,S){var T=S(48403),j=S(35393),y=j(function(U,F,B){return F=F.toLowerCase(),U+(B?T(F):F)});Vt.exports=y},48403:function(Vt,P,S){var T=S(79833),j=S(11700);function y(U){return j(T(U).toLowerCase())}Vt.exports=y},74691:function(Vt,P,S){var T=S(29750),j=S(14841);function y(U,F,B){return B===void 0&&(B=F,F=void 0),B!==void 0&&(B=j(B),B=B===B?B:0),F!==void 0&&(F=j(F),F=F===F?F:0),T(j(U),F,B)}Vt.exports=y},66678:function(Vt,P,S){var T=S(85990),j=4;function y(U){return T(U,j)}Vt.exports=y},75703:function(Vt){function P(S){return function(){return S}}Vt.exports=P},53816:function(Vt,P,S){var T=S(69389),j=S(79833),y=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,U="\\u0300-\\u036f",F="\\ufe20-\\ufe2f",B="\\u20d0-\\u20ff",R=U+F+B,N="["+R+"]",A=RegExp(N,"g");function D(M){return M=j(M),M&&M.replace(y,T).replace(A,"")}Vt.exports=D},91747:function(Vt,P,S){var T=S(5976),j=S(77813),y=S(16612),U=S(81704),F=Object.prototype,B=F.hasOwnProperty,R=T(function(N,A){N=Object(N);var D=-1,M=A.length,O=M>2?A[2]:void 0;for(O&&y(A[0],A[1],O)&&(M=1);++D<M;)for(var k=A[D],V=U(k),X=-1,K=V.length;++X<K;){var q=V[X],ct=N[q];(ct===void 0||j(ct,F[q])&&!B.call(N,q))&&(N[q]=k[q])}return N});Vt.exports=R},66073:function(Vt,P,S){Vt.exports=S(84486)},63105:function(Vt,P,S){var T=S(34963),j=S(80760),y=S(67206),U=S(1469);function F(B,R){var N=U(B)?T:j;return N(B,y(R,3))}Vt.exports=F},13311:function(Vt,P,S){var T=S(67740),j=S(30998),y=T(j);Vt.exports=y},30998:function(Vt,P,S){var T=S(41848),j=S(67206),y=S(40554),U=Math.max;function F(B,R,N){var A=B==null?0:B.length;if(!A)return-1;var D=N==null?0:y(N);return D<0&&(D=U(A+D,0)),T(B,j(R,3),D)}Vt.exports=F},85564:function(Vt,P,S){var T=S(21078);function j(y){var U=y==null?0:y.length;return U?T(y,1):[]}Vt.exports=j},84486:function(Vt,P,S){var T=S(77412),j=S(89881),y=S(54290),U=S(1469);function F(B,R){var N=U(B)?T:j;return N(B,y(R))}Vt.exports=F},62620:function(Vt,P,S){var T=S(28483),j=S(54290),y=S(81704);function U(F,B){return F==null?F:T(F,j(B),y)}Vt.exports=U},18721:function(Vt,P,S){var T=S(78565),j=S(222);function y(U,F){return U!=null&&j(U,F,T)}Vt.exports=y},29246:function(Vt,P,S){var T=S(98612),j=S(37005);function y(U){return j(U)&&T(U)}Vt.exports=y},41609:function(Vt,P,S){var T=S(280),j=S(64160),y=S(35694),U=S(1469),F=S(98612),B=S(44144),R=S(25726),N=S(36719),A="[object Map]",D="[object Set]",M=Object.prototype,O=M.hasOwnProperty;function k(V){if(V==null)return!0;if(F(V)&&(U(V)||typeof V=="string"||typeof V.splice=="function"||B(V)||N(V)||y(V)))return!V.length;var X=j(V);if(X==A||X==D)return!V.size;if(R(V))return!T(V).length;for(var K in V)if(O.call(V,K))return!1;return!0}Vt.exports=k},14293:function(Vt){function P(S){return S==null}Vt.exports=P},81763:function(Vt,P,S){var T=S(44239),j=S(37005),y="[object Number]";function U(F){return typeof F=="number"||j(F)&&T(F)==y}Vt.exports=U},52353:function(Vt){function P(S){return S===void 0}Vt.exports=P},10928:function(Vt){function P(S){var T=S==null?0:S.length;return T?S[T-1]:void 0}Vt.exports=P},66604:function(Vt,P,S){var T=S(89465),j=S(47816),y=S(67206);function U(F,B){var R={};return B=y(B,3),j(F,function(N,A,D){T(R,A,B(N,A,D))}),R}Vt.exports=U},6162:function(Vt,P,S){var T=S(56029),j=S(53325),y=S(6557);function U(F){return F&&F.length?T(F,y,j):void 0}Vt.exports=U},82492:function(Vt,P,S){var T=S(42980),j=S(21463),y=j(function(U,F,B){T(U,F,B)});Vt.exports=y},30236:function(Vt,P,S){var T=S(42980),j=S(21463),y=j(function(U,F,B,R){T(U,F,B,R)});Vt.exports=y},53632:function(Vt,P,S){var T=S(56029),j=S(70433),y=S(6557);function U(F){return F&&F.length?T(F,y,j):void 0}Vt.exports=U},22762:function(Vt,P,S){var T=S(56029),j=S(67206),y=S(70433);function U(F,B){return F&&F.length?T(F,j(B,2),y):void 0}Vt.exports=U},50308:function(Vt){function P(){}Vt.exports=P},11726:function(Vt,P,S){var T=S(78302),j=S(88016),y=S(40554),U=S(79833);function F(B,R,N){B=U(B),R=y(R);var A=R?j(B):0;return R&&A<R?B+T(R-A,N):B}Vt.exports=F},32475:function(Vt,P,S){var T=S(78302),j=S(88016),y=S(40554),U=S(79833);function F(B,R,N){B=U(B),R=y(R);var A=R?j(B):0;return R&&A<R?T(R-A,N)+B:B}Vt.exports=F},78718:function(Vt,P,S){var T=S(25970),j=S(99021),y=j(function(U,F){return U==null?{}:T(U,F)});Vt.exports=y},96026:function(Vt,P,S){var T=S(47445),j=T();Vt.exports=j},54061:function(Vt,P,S){var T=S(62663),j=S(89881),y=S(67206),U=S(10107),F=S(1469);function B(R,N,A){var D=F(R)?T:U,M=arguments.length<3;return D(R,y(N,4),A,M,j)}Vt.exports=B},84238:function(Vt,P,S){var T=S(280),j=S(64160),y=S(98612),U=S(47037),F=S(88016),B="[object Map]",R="[object Set]";function N(A){if(A==null)return 0;if(y(A))return U(A)?F(A):A.length;var D=j(A);return D==B||D==R?A.size:T(A).length}Vt.exports=N},89734:function(Vt,P,S){var T=S(21078),j=S(82689),y=S(5976),U=S(16612),F=y(function(B,R){if(B==null)return[];var N=R.length;return N>1&&U(B,R[0],R[1])?R=[]:N>2&&U(R[0],R[1],R[2])&&(R=[R[0]]),j(B,T(R,1),[])});Vt.exports=F},18601:function(Vt,P,S){var T=S(14841),j=1/0,y=17976931348623157e292;function U(F){if(!F)return F===0?F:0;if(F=T(F),F===j||F===-j){var B=F<0?-1:1;return B*y}return F===F?F:0}Vt.exports=U},40554:function(Vt,P,S){var T=S(18601);function j(y){var U=T(y),F=U%1;return U===U?F?U-F:U:0}Vt.exports=j},59881:function(Vt,P,S){var T=S(98363),j=S(81704);function y(U){return T(U,j(U))}Vt.exports=y},68718:function(Vt,P,S){var T=S(77412),j=S(3118),y=S(47816),U=S(67206),F=S(85924),B=S(1469),R=S(44144),N=S(23560),A=S(13218),D=S(36719);function M(O,k,V){var X=B(O),K=X||R(O)||D(O);if(k=U(k,4),V==null){var q=O&&O.constructor;K?V=X?new q:[]:A(O)?V=N(q)?j(F(O)):{}:V={}}return(K?T:y)(O,function(ct,_t,yt){return k(V,ct,_t,yt)}),V}Vt.exports=M},93386:function(Vt,P,S){var T=S(21078),j=S(5976),y=S(45652),U=S(29246),F=j(function(B){return y(T(B,1,U,!0))});Vt.exports=F},44908:function(Vt,P,S){var T=S(45652);function j(y){return y&&y.length?T(y):[]}Vt.exports=j},73955:function(Vt,P,S){var T=S(79833),j=0;function y(U){var F=++j;return T(U)+F}Vt.exports=y},11700:function(Vt,P,S){var T=S(98805),j=T("toUpperCase");Vt.exports=j},52628:function(Vt,P,S){var T=S(47415),j=S(3674);function y(U){return U==null?[]:T(U,j(U))}Vt.exports=y},58748:function(Vt,P,S){var T=S(49029),j=S(93157),y=S(79833),U=S(2757);function F(B,R,N){return B=y(B),R=N?void 0:R,R===void 0?j(B)?U(B):T(B):B.match(R)||[]}Vt.exports=F},7287:function(Vt,P,S){var T=S(34865),j=S(1757);function y(U,F){return j(U||[],F||[],T)}Vt.exports=y},6158:function(Vt){(function(P,S){Vt.exports=S()})(this,function(){"use strict";var P,S,T;function j(y,U){if(!P)P=U;else if(!S)S=U;else{var F="var sharedChunk = {}; ("+P+")(sharedChunk); ("+S+")(sharedChunk);",B={};P(B),T=U(B),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([F],{type:"text/javascript"})))}}return j(["exports"],function(y){"use strict";function U(l,v){return l(v={exports:{}},v.exports),v.exports}var F=B;function B(l,v,b,z){this.cx=3*l,this.bx=3*(b-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(z-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=z,this.p2x=b,this.p2y=z}B.prototype.sampleCurveX=function(l){return((this.ax*l+this.bx)*l+this.cx)*l},B.prototype.sampleCurveY=function(l){return((this.ay*l+this.by)*l+this.cy)*l},B.prototype.sampleCurveDerivativeX=function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},B.prototype.solveCurveX=function(l,v){var b,z,$,at,mt;for(v===void 0&&(v=1e-6),$=l,mt=0;mt<8;mt++){if(at=this.sampleCurveX($)-l,Math.abs(at)<v)return $;var Mt=this.sampleCurveDerivativeX($);if(Math.abs(Mt)<1e-6)break;$-=at/Mt}if(($=l)<(b=0))return b;if($>(z=1))return z;for(;b<z;){if(at=this.sampleCurveX($),Math.abs(at-l)<v)return $;l>at?b=$:z=$,$=.5*(z-b)+b}return $},B.prototype.solve=function(l,v){return this.sampleCurveY(this.solveCurveX(l,v))};var R=N;function N(l,v){this.x=l,this.y=v}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,v){return this.clone()._rotateAround(l,v)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var v=l.x-this.x,b=l.y-this.y;return v*v+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,v){return Math.atan2(this.x*v-this.y*l,this.x*l+this.y*v)},_matMult:function(l){var v=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=v,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var v=Math.cos(l),b=Math.sin(l),z=b*this.x+v*this.y;return this.x=v*this.x-b*this.y,this.y=z,this},_rotateAround:function(l,v){var b=Math.cos(l),z=Math.sin(l),$=v.y+z*(this.x-v.x)+b*(this.y-v.y);return this.x=v.x+b*(this.x-v.x)-z*(this.y-v.y),this.y=$,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(l){return l instanceof N?l:Array.isArray(l)?new N(l[0],l[1]):l};var A=typeof self!="undefined"?self:{},D=Math.pow(2,53)-1;function M(l,v,b,z){var $=new F(l,v,b,z);return function(at){return $.solve(at)}}var O=M(.25,.1,.25,1);function k(l,v,b){return Math.min(b,Math.max(v,l))}function V(l,v,b){var z=b-v,$=((l-v)%z+z)%z+v;return $===v?b:$}function X(l){for(var v=[],b=arguments.length-1;b-- >0;)v[b]=arguments[b+1];for(var z=0,$=v;z<$.length;z+=1){var at=$[z];for(var mt in at)l[mt]=at[mt]}return l}var K=1;function q(){return K++}function ct(){return function l(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function _t(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function yt(l,v){l.forEach(function(b){v[b]&&(v[b]=v[b].bind(v))})}function lt(l,v){return l.indexOf(v,l.length-v.length)!==-1}function Lt(l,v,b){var z={};for(var $ in l)z[$]=v.call(b||this,l[$],$,l);return z}function wt(l,v,b){var z={};for(var $ in l)v.call(b||this,l[$],$,l)&&(z[$]=l[$]);return z}function Gt(l){return Array.isArray(l)?l.map(Gt):typeof l=="object"&&l?Lt(l,Gt):l}var re={};function Qt(l){re[l]||(typeof console!="undefined"&&console.warn(l),re[l]=!0)}function it(l,v,b){return(b.y-l.y)*(v.x-l.x)>(v.y-l.y)*(b.x-l.x)}function dt(l){for(var v=0,b=0,z=l.length,$=z-1,at=void 0,mt=void 0;b<z;$=b++)v+=((mt=l[$]).x-(at=l[b]).x)*(at.y+mt.y);return v}function gt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function vt(l){var v={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(z,$,at,mt){var Mt=at||mt;return v[$]=!Mt||Mt.toLowerCase(),""}),v["max-age"]){var b=parseInt(v["max-age"],10);isNaN(b)?delete v["max-age"]:v["max-age"]=b}return v}var Y=null;function ot(l){if(Y==null){var v=l.navigator?l.navigator.userAgent:null;Y=!!l.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return Y}function nt(l){try{var v=A[l];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(b){return!1}}var rt,st,d,It,Ht=A.performance&&A.performance.now?A.performance.now.bind(A.performance):Date.now.bind(Date),kt=A.requestAnimationFrame||A.mozRequestAnimationFrame||A.webkitRequestAnimationFrame||A.msRequestAnimationFrame,Xt=A.cancelAnimationFrame||A.mozCancelAnimationFrame||A.webkitCancelAnimationFrame||A.msCancelAnimationFrame,Kt={now:Ht,frame:function(l){var v=kt(l);return{cancel:function(){return Xt(v)}}},getImageData:function(l,v){v===void 0&&(v=0);var b=A.document.createElement("canvas"),z=b.getContext("2d");if(!z)throw new Error("failed to create canvas 2d context");return b.width=l.width,b.height=l.height,z.drawImage(l,0,0,l.width,l.height),z.getImageData(-v,-v,l.width+2*v,l.height+2*v)},resolveURL:function(l){return rt||(rt=A.document.createElement("a")),rt.href=l,rt.href},hardwareConcurrency:A.navigator&&A.navigator.hardwareConcurrency||4,get devicePixelRatio(){return A.devicePixelRatio},get prefersReducedMotion(){return!!A.matchMedia&&(st==null&&(st=A.matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},Jt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ue={supported:!1,testSupport:function(l){!ce&&It&&($t?Ut(l):d=l)}},ce=!1,$t=!1;function Ut(l){var v=l.createTexture();l.bindTexture(l.TEXTURE_2D,v);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,It),l.isContextLost())return;ue.supported=!0}catch(b){}l.deleteTexture(v),ce=!0}A.document&&((It=A.document.createElement("img")).onload=function(){d&&Ut(d),d=null,$t=!0},It.onerror=function(){ce=!0,d=null},It.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Rt="01",Pt=function(l,v){this._transformRequestFn=l,this._customAccessToken=v,this._createSkuToken()};function Yt(l){return l.indexOf("mapbox:")===0}Pt.prototype._createSkuToken=function(){var l=function(){for(var v="",b=0;b<10;b++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Rt,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt},Pt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Pt.prototype.transformRequest=function(l,v){return this._transformRequestFn&&this._transformRequestFn(l,v)||{url:l}},Pt.prototype.normalizeStyleURL=function(l,v){if(!Yt(l))return l;var b=ve(l);return b.path="/styles/v1"+b.path,this._makeAPIURL(b,this._customAccessToken||v)},Pt.prototype.normalizeGlyphsURL=function(l,v){if(!Yt(l))return l;var b=ve(l);return b.path="/fonts/v1"+b.path,this._makeAPIURL(b,this._customAccessToken||v)},Pt.prototype.normalizeSourceURL=function(l,v){if(!Yt(l))return l;var b=ve(l);return b.path="/v4/"+b.authority+".json",b.params.push("secure"),this._makeAPIURL(b,this._customAccessToken||v)},Pt.prototype.normalizeSpriteURL=function(l,v,b,z){var $=ve(l);return Yt(l)?($.path="/styles/v1"+$.path+"/sprite"+v+b,this._makeAPIURL($,this._customAccessToken||z)):($.path+=""+v+b,Re($))},Pt.prototype.normalizeTileURL=function(l,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!Yt(l))return l;var b=ve(l);b.path=b.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Kt.devicePixelRatio>=2||v===512?"@2x":"")+(ue.supported?".webp":"$1")),b.path=b.path.replace(/^.+\/v4\//,"/"),b.path="/v4"+b.path;var z=this._customAccessToken||function($){for(var at=0,mt=$;at<mt.length;at+=1){var Mt=mt[at].match(/^access_token=(.*)$/);if(Mt)return Mt[1]}return null}(b.params)||Jt.ACCESS_TOKEN;return Jt.REQUIRE_ACCESS_TOKEN&&z&&this._skuToken&&b.params.push("sku="+this._skuToken),this._makeAPIURL(b,z)},Pt.prototype.canonicalizeTileURL=function(l,v){var b=ve(l);if(!b.path.match(/(^\/v4\/)/)||!b.path.match(/\.[\w]+$/))return l;var z="mapbox://tiles/";z+=b.path.replace("/v4/","");var $=b.params;return v&&($=$.filter(function(at){return!at.match(/^access_token=/)})),$.length&&(z+="?"+$.join("&")),z},Pt.prototype.canonicalizeTileset=function(l,v){for(var b=!!v&&Yt(v),z=[],$=0,at=l.tiles||[];$<at.length;$+=1){var mt=at[$];Nt(mt)?z.push(this.canonicalizeTileURL(mt,b)):z.push(mt)}return z},Pt.prototype._makeAPIURL=function(l,v){var b="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",z=ve(Jt.API_URL);if(l.protocol=z.protocol,l.authority=z.authority,l.protocol==="http"){var $=l.params.indexOf("secure");$>=0&&l.params.splice($,1)}if(z.path!=="/"&&(l.path=""+z.path+l.path),!Jt.REQUIRE_ACCESS_TOKEN)return Re(l);if(!(v=v||Jt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+b);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+b);return l.params=l.params.filter(function(at){return at.indexOf("access_token")===-1}),l.params.push("access_token="+v),Re(l)};var Dt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Nt(l){return Dt.test(l)}var ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ve(l){var v=l.match(ne);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function Re(l){var v=l.params.length?"?"+l.params.join("&"):"";return l.protocol+"://"+l.authority+l.path+v}function je(l){if(!l)return null;var v=l.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(A.atob(v[1]).split("").map(function(b){return"%"+("00"+b.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(b){return null}}var Cr=function(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Cr.prototype.getStorageKey=function(l){var v,b=je(Jt.ACCESS_TOKEN);return v=b&&b.u?A.btoa(encodeURIComponent(b.u).replace(/%([0-9A-F]{2})/g,function(z,$){return String.fromCharCode(Number("0x"+$))})):Jt.ACCESS_TOKEN||"",l?"mapbox.eventData."+l+":"+v:"mapbox.eventData:"+v},Cr.prototype.fetchEventData=function(){var l=nt("localStorage"),v=this.getStorageKey(),b=this.getStorageKey("uuid");if(l)try{var z=A.localStorage.getItem(v);z&&(this.eventData=JSON.parse(z));var $=A.localStorage.getItem(b);$&&(this.anonId=$)}catch(at){Qt("Unable to read from LocalStorage")}},Cr.prototype.saveEventData=function(){var l=nt("localStorage"),v=this.getStorageKey(),b=this.getStorageKey("uuid");if(l)try{A.localStorage.setItem(b,this.anonId),Object.keys(this.eventData).length>=1&&A.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(z){Qt("Unable to write to LocalStorage")}},Cr.prototype.processRequests=function(l){},Cr.prototype.postEvent=function(l,v,b,z){var $=this;if(Jt.EVENTS_URL){var at=ve(Jt.EVENTS_URL);at.params.push("access_token="+(z||Jt.ACCESS_TOKEN||""));var mt={event:this.type,created:new Date(l).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Rt,userId:this.anonId},Mt=v?X(mt,v):mt,oe={url:Re(at),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Mt])};this.pendingRequest=an(oe,function(ge){$.pendingRequest=null,b(ge),$.saveEventData(),$.processRequests(z)})}},Cr.prototype.queueRequest=function(l,v){this.queue.push(l),this.processRequests(v)};var $r,Qr,Ee=function(l){function v(){l.call(this,"map.load"),this.success={},this.skuToken=""}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(b,z,$,at){this.skuToken=$,(Jt.EVENTS_URL&&at||Jt.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function(mt){return Yt(mt)||Nt(mt)}))&&this.queueRequest({id:z,timestamp:Date.now()},at)},v.prototype.processRequests=function(b){var z=this;if(!this.pendingRequest&&this.queue.length!==0){var $=this.queue.shift(),at=$.id,mt=$.timestamp;at&&this.success[at]||(this.anonId||this.fetchEventData(),_t(this.anonId)||(this.anonId=ct()),this.postEvent(mt,{skuToken:this.skuToken},function(Mt){Mt||at&&(z.success[at]=!0)},b))}},v}(Cr),yn=new(function(l){function v(b){l.call(this,"appUserTurnstile"),this._customAccessToken=b}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(b,z){Jt.EVENTS_URL&&Jt.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function($){return Yt($)||Nt($)})&&this.queueRequest(Date.now(),z)},v.prototype.processRequests=function(b){var z=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var $=je(Jt.ACCESS_TOKEN),at=$?$.u:Jt.ACCESS_TOKEN,mt=at!==this.eventData.tokenU;_t(this.anonId)||(this.anonId=ct(),mt=!0);var Mt=this.queue.shift();if(this.eventData.lastSuccess){var oe=new Date(this.eventData.lastSuccess),ge=new Date(Mt),Ce=(Mt-this.eventData.lastSuccess)/864e5;mt=mt||Ce>=1||Ce<-1||oe.getDate()!==ge.getDate()}else mt=!0;if(!mt)return this.processRequests();this.postEvent(Mt,{"enabled.telemetry":!1},function(Ie){Ie||(z.eventData.lastSuccess=Mt,z.eventData.tokenU=at)},b)}},v}(Cr)),ui=yn.postTurnstileEvent.bind(yn),la=new Ee,Or=la.postMapLoadEvent.bind(la),ln=500,Kn=50;function jn(){A.caches&&!$r&&($r=A.caches.open("mapbox-tiles"))}function wi(l){var v=l.indexOf("?");return v<0?l:l.slice(0,v)}var Sa,to=1/0;function qa(){return Sa==null&&(Sa=A.OffscreenCanvas&&new A.OffscreenCanvas(1,1).getContext("2d")&&typeof A.createImageBitmap=="function"),Sa}var Ui={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ui);var Ue=function(l){function v(b,z,$){z===401&&Nt($)&&(b+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),l.call(this,b),this.status=z,this.url=$,this.name=this.constructor.name,this.message=b}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),We=gt()?function(){return self.worker&&self.worker.referrer}:function(){return(A.location.protocol==="blob:"?A.parent:A).location.href},fr,Ar,qr=function(l,v){if(!(/^file:/.test(b=l.url)||/^file:/.test(We())&&!/^\w+:/.test(b))){if(A.fetch&&A.Request&&A.AbortController&&A.Request.prototype.hasOwnProperty("signal"))return function(z,$){var at,mt=new A.AbortController,Mt=new A.Request(z.url,{method:z.method||"GET",body:z.body,credentials:z.credentials,headers:z.headers,referrer:We(),signal:mt.signal}),oe=!1,ge=!1,Ce=(at=Mt.url).indexOf("sku=")>0&&Nt(at);z.type==="json"&&Mt.headers.set("Accept","application/json");var Ie=function(Zt,xr,mr){if(!ge){if(Zt&&Zt.message!=="SecurityError"&&Qt(Zt),xr&&mr)return Ge(xr);var jr=Date.now();A.fetch(Mt).then(function(kr){if(kr.ok){var un=Ce?kr.clone():null;return Ge(kr,un,jr)}return $(new Ue(kr.statusText,kr.status,z.url))}).catch(function(kr){kr.code!==20&&$(new Error(kr.message))})}},Ge=function(Zt,xr,mr){(z.type==="arrayBuffer"?Zt.arrayBuffer():z.type==="json"?Zt.json():Zt.text()).then(function(jr){ge||(xr&&mr&&function(kr,un,En){if(jn(),$r){var kn={status:un.status,statusText:un.statusText,headers:new A.Headers};un.headers.forEach(function(oi,Bi){return kn.headers.set(Bi,oi)});var Gn=vt(un.headers.get("Cache-Control")||"");Gn["no-store"]||(Gn["max-age"]&&kn.headers.set("Expires",new Date(En+1e3*Gn["max-age"]).toUTCString()),new Date(kn.headers.get("Expires")).getTime()-En<42e4||function(oi,Bi){if(Qr===void 0)try{new Response(new ReadableStream),Qr=!0}catch(oa){Qr=!1}Qr?Bi(oi.body):oi.blob().then(Bi)}(un,function(oi){var Bi=new A.Response(oi,kn);jn(),$r&&$r.then(function(oa){return oa.put(wi(kr.url),Bi)}).catch(function(oa){return Qt(oa.message)})}))}}(Mt,xr,mr),oe=!0,$(null,jr,Zt.headers.get("Cache-Control"),Zt.headers.get("Expires")))}).catch(function(jr){ge||$(new Error(jr.message))})};return Ce?function(Zt,xr){if(jn(),!$r)return xr(null);var mr=wi(Zt.url);$r.then(function(jr){jr.match(mr).then(function(kr){var un=function(En){if(!En)return!1;var kn=new Date(En.headers.get("Expires")||0),Gn=vt(En.headers.get("Cache-Control")||"");return kn>Date.now()&&!Gn["no-cache"]}(kr);jr.delete(mr),un&&jr.put(mr,kr.clone()),xr(null,kr,un)}).catch(xr)}).catch(xr)}(Mt,Ie):Ie(null,null),{cancel:function(){ge=!0,oe||mt.abort()}}}(l,v);if(gt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,v,void 0,!0)}var b;return function(z,$){var at=new A.XMLHttpRequest;for(var mt in at.open(z.method||"GET",z.url,!0),z.type==="arrayBuffer"&&(at.responseType="arraybuffer"),z.headers)at.setRequestHeader(mt,z.headers[mt]);return z.type==="json"&&(at.responseType="text",at.setRequestHeader("Accept","application/json")),at.withCredentials=z.credentials==="include",at.onerror=function(){$(new Error(at.statusText))},at.onload=function(){if((at.status>=200&&at.status<300||at.status===0)&&at.response!==null){var Mt=at.response;if(z.type==="json")try{Mt=JSON.parse(at.response)}catch(oe){return $(oe)}$(null,Mt,at.getResponseHeader("Cache-Control"),at.getResponseHeader("Expires"))}else $(new Ue(at.statusText,at.status,z.url))},at.send(z.body),{cancel:function(){return at.abort()}}}(l,v)},nn=function(l,v){return qr(X(l,{type:"arrayBuffer"}),v)},an=function(l,v){return qr(X(l,{method:"POST"}),v)},le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";fr=[],Ar=0;var fe=function(l,v){if(ue.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),Ar>=Jt.MAX_PARALLEL_IMAGE_REQUESTS){var b={requestParameters:l,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return fr.push(b),b}Ar++;var z=!1,$=function(){if(!z)for(z=!0,Ar--;fr.length&&Ar<Jt.MAX_PARALLEL_IMAGE_REQUESTS;){var mt=fr.shift();mt.cancelled||(mt.cancel=fe(mt.requestParameters,mt.callback).cancel)}},at=nn(l,function(mt,Mt,oe,ge){$(),mt?v(mt):Mt&&(qa()?function(Ce,Ie){var Ge=new A.Blob([new Uint8Array(Ce)],{type:"image/png"});A.createImageBitmap(Ge).then(function(Zt){Ie(null,Zt)}).catch(function(Zt){Ie(new Error("Could not load image because of "+Zt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Mt,v):function(Ce,Ie,Ge,Zt){var xr=new A.Image,mr=A.URL;xr.onload=function(){Ie(null,xr),mr.revokeObjectURL(xr.src),xr.onload=null,A.requestAnimationFrame(function(){xr.src=le})},xr.onerror=function(){return Ie(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var jr=new A.Blob([new Uint8Array(Ce)],{type:"image/png"});xr.cacheControl=Ge,xr.expires=Zt,xr.src=Ce.byteLength?mr.createObjectURL(jr):le}(Mt,v,oe,ge))});return{cancel:function(){at.cancel(),$()}}};function Me(l,v,b){b[l]&&b[l].indexOf(v)!==-1||(b[l]=b[l]||[],b[l].push(v))}function Te(l,v,b){if(b&&b[l]){var z=b[l].indexOf(v);z!==-1&&b[l].splice(z,1)}}var Ze=function(l,v){v===void 0&&(v={}),X(this,v),this.type=l},or=function(l){function v(b,z){z===void 0&&(z={}),l.call(this,"error",X({error:b},z))}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v}(Ze),lr=function(){};lr.prototype.on=function(l,v){return this._listeners=this._listeners||{},Me(l,v,this._listeners),this},lr.prototype.off=function(l,v){return Te(l,v,this._listeners),Te(l,v,this._oneTimeListeners),this},lr.prototype.once=function(l,v){return this._oneTimeListeners=this._oneTimeListeners||{},Me(l,v,this._oneTimeListeners),this},lr.prototype.fire=function(l,v){typeof l=="string"&&(l=new Ze(l,v||{}));var b=l.type;if(this.listens(b)){l.target=this;for(var z=0,$=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];z<$.length;z+=1)$[z].call(this,l);for(var at=0,mt=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];at<mt.length;at+=1){var Mt=mt[at];Te(b,Mt,this._oneTimeListeners),Mt.call(this,l)}var oe=this._eventedParent;oe&&(X(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),oe.fire(l))}else l instanceof or&&console.error(l.error);return this},lr.prototype.listens=function(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)},lr.prototype.setEventedParent=function(l,v){return this._eventedParent=l,this._eventedParentData=v,this};var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},tr=function(l,v,b,z){this.message=(l?l+": ":"")+b,z&&(this.identifier=z),v!=null&&v.__line__&&(this.line=v.__line__)};function Mr(l){var v=l.value;return v?[new tr(l.key,v,"constants have been deprecated as of v8")]:[]}function Xr(l){for(var v=[],b=arguments.length-1;b-- >0;)v[b]=arguments[b+1];for(var z=0,$=v;z<$.length;z+=1){var at=$[z];for(var mt in at)l[mt]=at[mt]}return l}function Zr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function tn(l){if(Array.isArray(l))return l.map(tn);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){var v={};for(var b in l)v[b]=tn(l[b]);return v}return Zr(l)}var _n=function(l){function v(b,z){l.call(this,z),this.message=z,this.key=b}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v}(Error),$n=function(l,v){v===void 0&&(v=[]),this.parent=l,this.bindings={};for(var b=0,z=v;b<z.length;b+=1){var $=z[b];this.bindings[$[0]]=$[1]}};$n.prototype.concat=function(l){return new $n(this,l)},$n.prototype.get=function(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(l+" not found in scope.")},$n.prototype.has=function(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)};var si={kind:"null"},Jr={kind:"number"},Si={kind:"string"},Jn={kind:"boolean"},yi={kind:"color"},Ka={kind:"object"},ki={kind:"value"},ga={kind:"collator"},ko={kind:"formatted"},Ci={kind:"resolvedImage"};function po(l,v){return{kind:"array",itemType:l,N:v}}function oo(l){if(l.kind==="array"){var v=oo(l.itemType);return typeof l.N=="number"?"array<"+v+", "+l.N+">":l.itemType.kind==="value"?"array":"array<"+v+">"}return l.kind}var cn=[si,Jr,Si,Jn,yi,ko,Ka,po(ki),Ci];function vn(l,v){if(v.kind==="error")return null;if(l.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!vn(l.itemType,v.itemType))&&(typeof l.N!="number"||l.N===v.N))return null}else{if(l.kind===v.kind)return null;if(l.kind==="value"){for(var b=0,z=cn;b<z.length;b+=1)if(!vn(z[b],v))return null}}return"Expected "+oo(l)+" but found "+oo(v)+" instead."}function Wo(l,v){return v.some(function(b){return b.kind===l.kind})}function mo(l,v){return v.some(function(b){return b==="null"?l===null:b==="array"?Array.isArray(l):b==="object"?l&&!Array.isArray(l)&&typeof l=="object":b===typeof l})}var fo=U(function(l,v){var b={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function z(Mt){return(Mt=Math.round(Mt))<0?0:Mt>255?255:Mt}function $(Mt){return z(Mt[Mt.length-1]==="%"?parseFloat(Mt)/100*255:parseInt(Mt))}function at(Mt){return(oe=Mt[Mt.length-1]==="%"?parseFloat(Mt)/100:parseFloat(Mt))<0?0:oe>1?1:oe;var oe}function mt(Mt,oe,ge){return ge<0?ge+=1:ge>1&&(ge-=1),6*ge<1?Mt+(oe-Mt)*ge*6:2*ge<1?oe:3*ge<2?Mt+(oe-Mt)*(2/3-ge)*6:Mt}try{v.parseCSSColor=function(Mt){var oe,ge=Mt.replace(/ /g,"").toLowerCase();if(ge in b)return b[ge].slice();if(ge[0]==="#")return ge.length===4?(oe=parseInt(ge.substr(1),16))>=0&&oe<=4095?[(3840&oe)>>4|(3840&oe)>>8,240&oe|(240&oe)>>4,15&oe|(15&oe)<<4,1]:null:ge.length===7&&(oe=parseInt(ge.substr(1),16))>=0&&oe<=16777215?[(16711680&oe)>>16,(65280&oe)>>8,255&oe,1]:null;var Ce=ge.indexOf("("),Ie=ge.indexOf(")");if(Ce!==-1&&Ie+1===ge.length){var Ge=ge.substr(0,Ce),Zt=ge.substr(Ce+1,Ie-(Ce+1)).split(","),xr=1;switch(Ge){case"rgba":if(Zt.length!==4)return null;xr=at(Zt.pop());case"rgb":return Zt.length!==3?null:[$(Zt[0]),$(Zt[1]),$(Zt[2]),xr];case"hsla":if(Zt.length!==4)return null;xr=at(Zt.pop());case"hsl":if(Zt.length!==3)return null;var mr=(parseFloat(Zt[0])%360+360)%360/360,jr=at(Zt[1]),kr=at(Zt[2]),un=kr<=.5?kr*(jr+1):kr+jr-kr*jr,En=2*kr-un;return[z(255*mt(En,un,mr+1/3)),z(255*mt(En,un,mr)),z(255*mt(En,un,mr-1/3)),xr];default:return null}}return null}}catch(Mt){}}).parseCSSColor,Po=function(l,v,b,z){z===void 0&&(z=1),this.r=l,this.g=v,this.b=b,this.a=z};Po.parse=function(l){if(l){if(l instanceof Po)return l;if(typeof l=="string"){var v=fo(l);if(v)return new Po(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},Po.prototype.toString=function(){var l=this.toArray(),v=l[1],b=l[2],z=l[3];return"rgba("+Math.round(l[0])+","+Math.round(v)+","+Math.round(b)+","+z+")"},Po.prototype.toArray=function(){var l=this.a;return l===0?[0,0,0,0]:[255*this.r/l,255*this.g/l,255*this.b/l,l]},Po.black=new Po(0,0,0,1),Po.white=new Po(1,1,1,1),Po.transparent=new Po(0,0,0,0),Po.red=new Po(1,0,0,1);var vi=function(l,v,b){this.sensitivity=l?v?"variant":"case":v?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};vi.prototype.compare=function(l,v){return this.collator.compare(l,v)},vi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pa=function(l,v,b,z,$){this.text=l,this.image=v,this.scale=b,this.fontStack=z,this.textColor=$},An=function(l){this.sections=l};An.fromString=function(l){return new An([new pa(l,null,null,null,null)])},An.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(l){return l.text.length!==0||l.image&&l.image.name.length!==0})},An.factory=function(l){return l instanceof An?l:An.fromString(l)},An.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(l){return l.text}).join("")},An.prototype.serialize=function(){for(var l=["format"],v=0,b=this.sections;v<b.length;v+=1){var z=b[v];if(z.image)l.push(["image",z.image.name]);else{l.push(z.text);var $={};z.fontStack&&($["text-font"]=["literal",z.fontStack.split(",")]),z.scale&&($["font-scale"]=z.scale),z.textColor&&($["text-color"]=["rgba"].concat(z.textColor.toArray())),l.push($)}}return l};var Pe=function(l){this.name=l.name,this.available=l.available};function Tt(l,v,b,z){return typeof l=="number"&&l>=0&&l<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof b=="number"&&b>=0&&b<=255?z===void 0||typeof z=="number"&&z>=0&&z<=1?null:"Invalid rgba value ["+[l,v,b,z].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof z=="number"?[l,v,b,z]:[l,v,b]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ae(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Po||l instanceof vi||l instanceof An||l instanceof Pe)return!0;if(Array.isArray(l)){for(var v=0,b=l;v<b.length;v+=1)if(!ae(b[v]))return!1;return!0}if(typeof l=="object"){for(var z in l)if(!ae(l[z]))return!1;return!0}return!1}function he(l){if(l===null)return si;if(typeof l=="string")return Si;if(typeof l=="boolean")return Jn;if(typeof l=="number")return Jr;if(l instanceof Po)return yi;if(l instanceof vi)return ga;if(l instanceof An)return ko;if(l instanceof Pe)return Ci;if(Array.isArray(l)){for(var v,b=l.length,z=0,$=l;z<$.length;z+=1){var at=he($[z]);if(v){if(v===at)continue;v=ki;break}v=at}return po(v||ki,b)}return Ka}function zt(l){var v=typeof l;return l===null?"":v==="string"||v==="number"||v==="boolean"?String(l):l instanceof Po||l instanceof An||l instanceof Pe?l.toString():JSON.stringify(l)}Pe.prototype.toString=function(){return this.name},Pe.fromString=function(l){return l?new Pe({name:l,available:!1}):null},Pe.prototype.serialize=function(){return["image",this.name]};var Wt=function(l,v){this.type=l,this.value=v};Wt.parse=function(l,v){if(l.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(!ae(l[1]))return v.error("invalid value");var b=l[1],z=he(b),$=v.expectedType;return z.kind!=="array"||z.N!==0||!$||$.kind!=="array"||typeof $.N=="number"&&$.N!==0||(z=$),new Wt(z,b)},Wt.prototype.evaluate=function(){return this.value},Wt.prototype.eachChild=function(){},Wt.prototype.outputDefined=function(){return!0},Wt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Po?["rgba"].concat(this.value.toArray()):this.value instanceof An?this.value.serialize():this.value};var de=function(l){this.name="ExpressionEvaluationError",this.message=l};de.prototype.toJSON=function(){return this.message};var Se={string:Si,number:Jr,boolean:Jn,object:Ka},Ae=function(l,v){this.type=l,this.args=v};Ae.parse=function(l,v){if(l.length<2)return v.error("Expected at least one argument.");var b,z=1,$=l[0];if($==="array"){var at,mt;if(l.length>2){var Mt=l[1];if(typeof Mt!="string"||!(Mt in Se)||Mt==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);at=Se[Mt],z++}else at=ki;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return v.error('The length argument to "array" must be a positive integer literal',2);mt=l[2],z++}b=po(at,mt)}else b=Se[$];for(var oe=[];z<l.length;z++){var ge=v.parse(l[z],z,ki);if(!ge)return null;oe.push(ge)}return new Ae(b,oe)},Ae.prototype.evaluate=function(l){for(var v=0;v<this.args.length;v++){var b=this.args[v].evaluate(l);if(!vn(this.type,he(b)))return b;if(v===this.args.length-1)throw new de("Expected value to be of type "+oo(this.type)+", but found "+oo(he(b))+" instead.")}return null},Ae.prototype.eachChild=function(l){this.args.forEach(l)},Ae.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},Ae.prototype.serialize=function(){var l=this.type,v=[l.kind];if(l.kind==="array"){var b=l.itemType;if(b.kind==="string"||b.kind==="number"||b.kind==="boolean"){v.push(b.kind);var z=l.N;(typeof z=="number"||this.args.length>1)&&v.push(z)}}return v.concat(this.args.map(function($){return $.serialize()}))};var He=function(l){this.type=ko,this.sections=l};He.parse=function(l,v){if(l.length<2)return v.error("Expected at least one argument.");var b=l[1];if(!Array.isArray(b)&&typeof b=="object")return v.error("First argument must be an image or text section.");for(var z=[],$=!1,at=1;at<=l.length-1;++at){var mt=l[at];if($&&typeof mt=="object"&&!Array.isArray(mt)){$=!1;var Mt=null;if(mt["font-scale"]&&!(Mt=v.parse(mt["font-scale"],1,Jr)))return null;var oe=null;if(mt["text-font"]&&!(oe=v.parse(mt["text-font"],1,po(Si))))return null;var ge=null;if(mt["text-color"]&&!(ge=v.parse(mt["text-color"],1,yi)))return null;var Ce=z[z.length-1];Ce.scale=Mt,Ce.font=oe,Ce.textColor=ge}else{var Ie=v.parse(l[at],1,ki);if(!Ie)return null;var Ge=Ie.type.kind;if(Ge!=="string"&&Ge!=="value"&&Ge!=="null"&&Ge!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");$=!0,z.push({content:Ie,scale:null,font:null,textColor:null})}}return new He(z)},He.prototype.evaluate=function(l){return new An(this.sections.map(function(v){var b=v.content.evaluate(l);return he(b)===Ci?new pa("",b,null,null,null):new pa(zt(b),null,v.scale?v.scale.evaluate(l):null,v.font?v.font.evaluate(l).join(","):null,v.textColor?v.textColor.evaluate(l):null)}))},He.prototype.eachChild=function(l){for(var v=0,b=this.sections;v<b.length;v+=1){var z=b[v];l(z.content),z.scale&&l(z.scale),z.font&&l(z.font),z.textColor&&l(z.textColor)}},He.prototype.outputDefined=function(){return!1},He.prototype.serialize=function(){for(var l=["format"],v=0,b=this.sections;v<b.length;v+=1){var z=b[v];l.push(z.content.serialize());var $={};z.scale&&($["font-scale"]=z.scale.serialize()),z.font&&($["text-font"]=z.font.serialize()),z.textColor&&($["text-color"]=z.textColor.serialize()),l.push($)}return l};var _r=function(l){this.type=Ci,this.input=l};_r.parse=function(l,v){if(l.length!==2)return v.error("Expected two arguments.");var b=v.parse(l[1],1,Si);return b?new _r(b):v.error("No image name provided.")},_r.prototype.evaluate=function(l){var v=this.input.evaluate(l),b=Pe.fromString(v);return b&&l.availableImages&&(b.available=l.availableImages.indexOf(v)>-1),b},_r.prototype.eachChild=function(l){l(this.input)},_r.prototype.outputDefined=function(){return!1},_r.prototype.serialize=function(){return["image",this.input.serialize()]};var Lr={"to-boolean":Jn,"to-color":yi,"to-number":Jr,"to-string":Si},wn=function(l,v){this.type=l,this.args=v};wn.parse=function(l,v){if(l.length<2)return v.error("Expected at least one argument.");var b=l[0];if((b==="to-boolean"||b==="to-string")&&l.length!==2)return v.error("Expected one argument.");for(var z=Lr[b],$=[],at=1;at<l.length;at++){var mt=v.parse(l[at],at,ki);if(!mt)return null;$.push(mt)}return new wn(z,$)},wn.prototype.evaluate=function(l){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(l));if(this.type.kind==="color"){for(var v,b,z=0,$=this.args;z<$.length;z+=1){if(b=null,(v=$[z].evaluate(l))instanceof Po)return v;if(typeof v=="string"){var at=l.parseColor(v);if(at)return at}else if(Array.isArray(v)&&!(b=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":Tt(v[0],v[1],v[2],v[3])))return new Po(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new de(b||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var mt=null,Mt=0,oe=this.args;Mt<oe.length;Mt+=1){if((mt=oe[Mt].evaluate(l))===null)return 0;var ge=Number(mt);if(!isNaN(ge))return ge}throw new de("Could not convert "+JSON.stringify(mt)+" to number.")}return this.type.kind==="formatted"?An.fromString(zt(this.args[0].evaluate(l))):this.type.kind==="resolvedImage"?Pe.fromString(zt(this.args[0].evaluate(l))):zt(this.args[0].evaluate(l))},wn.prototype.eachChild=function(l){this.args.forEach(l)},wn.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},wn.prototype.serialize=function(){if(this.type.kind==="formatted")return new He([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _r(this.args[0]).serialize();var l=["to-"+this.type.kind];return this.eachChild(function(v){l.push(v.serialize())}),l};var Kr=["Unknown","Point","LineString","Polygon"],Fr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Fr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Fr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Kr[this.feature.type]:this.feature.type:null},Fr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Fr.prototype.canonicalID=function(){return this.canonical},Fr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Fr.prototype.parseColor=function(l){var v=this._parseColorCache[l];return v||(v=this._parseColorCache[l]=Po.parse(l)),v};var pi=function(l,v,b,z){this.name=l,this.type=v,this._evaluate=b,this.args=z};pi.prototype.evaluate=function(l){return this._evaluate(l,this.args)},pi.prototype.eachChild=function(l){this.args.forEach(l)},pi.prototype.outputDefined=function(){return!1},pi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(l){return l.serialize()}))},pi.parse=function(l,v){var b,z=l[0],$=pi.definitions[z];if(!$)return v.error('Unknown expression "'+z+'". If you wanted a literal array, use ["literal", [...]].',0);for(var at=Array.isArray($)?$[0]:$.type,mt=Array.isArray($)?[[$[1],$[2]]]:$.overloads,Mt=mt.filter(function(lo){var Ea=lo[0];return!Array.isArray(Ea)||Ea.length===l.length-1}),oe=null,ge=0,Ce=Mt;ge<Ce.length;ge+=1){var Ie=Ce[ge],Ge=Ie[0],Zt=Ie[1];oe=new au(v.registry,v.path,null,v.scope);for(var xr=[],mr=!1,jr=1;jr<l.length;jr++){var kr=l[jr],un=Array.isArray(Ge)?Ge[jr-1]:Ge.type,En=oe.parse(kr,1+xr.length,un);if(!En){mr=!0;break}xr.push(En)}if(!mr)if(Array.isArray(Ge)&&Ge.length!==xr.length)oe.error("Expected "+Ge.length+" arguments, but found "+xr.length+" instead.");else{for(var kn=0;kn<xr.length;kn++){var Gn=Array.isArray(Ge)?Ge[kn]:Ge.type,oi=xr[kn];oe.concat(kn+1).checkSubtype(Gn,oi.type)}if(oe.errors.length===0)return new pi(z,at,Zt,xr)}}if(Mt.length===1)(b=v.errors).push.apply(b,oe.errors);else{for(var Bi=(Mt.length?Mt:mt).map(function(lo){var Ea;return Ea=lo[0],Array.isArray(Ea)?"("+Ea.map(oo).join(", ")+")":"("+oo(Ea.type)+"...)"}).join(" | "),oa=[],eo=1;eo<l.length;eo++){var ba=v.parse(l[eo],1+oa.length);if(!ba)return null;oa.push(oo(ba.type))}v.error("Expected arguments of type "+Bi+", but found ("+oa.join(", ")+") instead.")}return null},pi.register=function(l,v){for(var b in pi.definitions=v,v)l[b]=pi};var Pi=function(l,v,b){this.type=ga,this.locale=b,this.caseSensitive=l,this.diacriticSensitive=v};function ca(l,v){l[0]=Math.min(l[0],v[0]),l[1]=Math.min(l[1],v[1]),l[2]=Math.max(l[2],v[0]),l[3]=Math.max(l[3],v[1])}function va(l,v){return!(l[0]<=v[0]||l[2]>=v[2]||l[1]<=v[1]||l[3]>=v[3])}function ji(l,v){var b=(180+l[0])/360,z=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,$=Math.pow(2,v.z);return[Math.round(b*$*8192),Math.round(z*$*8192)]}function ai(l,v,b){return v[1]>l[1]!=b[1]>l[1]&&l[0]<(b[0]-v[0])*(l[1]-v[1])/(b[1]-v[1])+v[0]}function Fe(l,v){for(var b,z,$,at,mt,Mt,oe,ge=!1,Ce=0,Ie=v.length;Ce<Ie;Ce++)for(var Ge=v[Ce],Zt=0,xr=Ge.length;Zt<xr-1;Zt++){if((at=(b=l)[0]-(z=Ge[Zt])[0])*(oe=b[1]-($=Ge[Zt+1])[1])-(Mt=b[0]-$[0])*(mt=b[1]-z[1])==0&&at*Mt<=0&&mt*oe<=0)return!1;ai(l,Ge[Zt],Ge[Zt+1])&&(ge=!ge)}return ge}function er(l,v){for(var b=0;b<v.length;b++)if(Fe(l,v[b]))return!0;return!1}function Ir(l,v,b,z){var $=z[0]-b[0],at=z[1]-b[1],mt=(l[0]-b[0])*at-$*(l[1]-b[1]),Mt=(v[0]-b[0])*at-$*(v[1]-b[1]);return mt>0&&Mt<0||mt<0&&Mt>0}function hn(l,v,b){for(var z=0,$=b;z<$.length;z+=1)for(var at=$[z],mt=0;mt<at.length-1;++mt)if((Ie=[(Ce=at[mt+1])[0]-(ge=at[mt])[0],Ce[1]-ge[1]])[0]*(Ge=[(oe=v)[0]-(Mt=l)[0],oe[1]-Mt[1]])[1]-Ie[1]*Ge[0]!=0&&Ir(Mt,oe,ge,Ce)&&Ir(ge,Ce,Mt,oe))return!0;var Mt,oe,ge,Ce,Ie,Ge;return!1}function ci(l,v){for(var b=0;b<l.length;++b)if(!Fe(l[b],v))return!1;for(var z=0;z<l.length-1;++z)if(hn(l[z],l[z+1],v))return!1;return!0}function wa(l,v){for(var b=0;b<v.length;b++)if(ci(l,v[b]))return!0;return!1}function no(l,v,b){for(var z=[],$=0;$<l.length;$++){for(var at=[],mt=0;mt<l[$].length;mt++){var Mt=ji(l[$][mt],b);ca(v,Mt),at.push(Mt)}z.push(at)}return z}function ls(l,v,b){for(var z=[],$=0;$<l.length;$++){var at=no(l[$],v,b);z.push(at)}return z}function Jo(l,v,b,z){if(l[0]<b[0]||l[0]>b[2]){var $=.5*z,at=l[0]-b[0]>$?-z:b[0]-l[0]>$?z:0;at===0&&(at=l[0]-b[2]>$?-z:b[2]-l[0]>$?z:0),l[0]+=at}ca(v,l)}function ps(l,v,b,z){for(var $=8192*Math.pow(2,z.z),at=[8192*z.x,8192*z.y],mt=[],Mt=0,oe=l;Mt<oe.length;Mt+=1)for(var ge=0,Ce=oe[Mt];ge<Ce.length;ge+=1){var Ie=Ce[ge],Ge=[Ie.x+at[0],Ie.y+at[1]];Jo(Ge,v,b,$),mt.push(Ge)}return mt}function Ks(l,v,b,z){for(var $,at=8192*Math.pow(2,z.z),mt=[8192*z.x,8192*z.y],Mt=[],oe=0,ge=l;oe<ge.length;oe+=1){for(var Ce=[],Ie=0,Ge=ge[oe];Ie<Ge.length;Ie+=1){var Zt=Ge[Ie],xr=[Zt.x+mt[0],Zt.y+mt[1]];ca(v,xr),Ce.push(xr)}Mt.push(Ce)}if(v[2]-v[0]<=at/2){($=v)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(var mr=0,jr=Mt;mr<jr.length;mr+=1)for(var kr=0,un=jr[mr];kr<un.length;kr+=1)Jo(un[kr],v,b,at)}return Mt}Pi.parse=function(l,v){if(l.length!==2)return v.error("Expected one argument.");var b=l[1];if(typeof b!="object"||Array.isArray(b))return v.error("Collator options argument must be an object.");var z=v.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,Jn);if(!z)return null;var $=v.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,Jn);if(!$)return null;var at=null;return b.locale&&!(at=v.parse(b.locale,1,Si))?null:new Pi(z,$,at)},Pi.prototype.evaluate=function(l){return new vi(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)},Pi.prototype.eachChild=function(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)},Pi.prototype.outputDefined=function(){return!1},Pi.prototype.serialize=function(){var l={};return l["case-sensitive"]=this.caseSensitive.serialize(),l["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(l.locale=this.locale.serialize()),["collator",l]};var Fo=function(l,v){this.type=Jn,this.geojson=l,this.geometries=v};function Vs(l){if(l instanceof pi&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Fo)return!1;var v=!0;return l.eachChild(function(b){v&&!Vs(b)&&(v=!1)}),v}function $s(l){if(l instanceof pi&&l.name==="feature-state")return!1;var v=!0;return l.eachChild(function(b){v&&!$s(b)&&(v=!1)}),v}function zs(l,v){if(l instanceof pi&&v.indexOf(l.name)>=0)return!1;var b=!0;return l.eachChild(function(z){b&&!zs(z,v)&&(b=!1)}),b}Fo.parse=function(l,v){if(l.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(ae(l[1])){var b=l[1];if(b.type==="FeatureCollection")for(var z=0;z<b.features.length;++z){var $=b.features[z].geometry.type;if($==="Polygon"||$==="MultiPolygon")return new Fo(b,b.features[z].geometry)}else if(b.type==="Feature"){var at=b.geometry.type;if(at==="Polygon"||at==="MultiPolygon")return new Fo(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new Fo(b,b)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fo.prototype.evaluate=function(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(v,b){var z=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],at=v.canonicalID();if(b.type==="Polygon"){var mt=no(b.coordinates,$,at),Mt=ps(v.geometry(),z,$,at);if(!va(z,$))return!1;for(var oe=0,ge=Mt;oe<ge.length;oe+=1)if(!Fe(ge[oe],mt))return!1}if(b.type==="MultiPolygon"){var Ce=ls(b.coordinates,$,at),Ie=ps(v.geometry(),z,$,at);if(!va(z,$))return!1;for(var Ge=0,Zt=Ie;Ge<Zt.length;Ge+=1)if(!er(Zt[Ge],Ce))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(v,b){var z=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],at=v.canonicalID();if(b.type==="Polygon"){var mt=no(b.coordinates,$,at),Mt=Ks(v.geometry(),z,$,at);if(!va(z,$))return!1;for(var oe=0,ge=Mt;oe<ge.length;oe+=1)if(!ci(ge[oe],mt))return!1}if(b.type==="MultiPolygon"){var Ce=ls(b.coordinates,$,at),Ie=Ks(v.geometry(),z,$,at);if(!va(z,$))return!1;for(var Ge=0,Zt=Ie;Ge<Zt.length;Ge+=1)if(!wa(Zt[Ge],Ce))return!1}return!0}(l,this.geometries)}return!1},Fo.prototype.eachChild=function(){},Fo.prototype.outputDefined=function(){return!0},Fo.prototype.serialize=function(){return["within",this.geojson]};var Ou=function(l,v){this.type=v.type,this.name=l,this.boundExpression=v};Ou.parse=function(l,v){if(l.length!==2||typeof l[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var b=l[1];return v.scope.has(b)?new Ou(b,v.scope.get(b)):v.error('Unknown variable "'+b+'". Make sure "'+b+'" has been bound in an enclosing "let" expression before using it.',1)},Ou.prototype.evaluate=function(l){return this.boundExpression.evaluate(l)},Ou.prototype.eachChild=function(){},Ou.prototype.outputDefined=function(){return!1},Ou.prototype.serialize=function(){return["var",this.name]};var au=function(l,v,b,z,$){v===void 0&&(v=[]),z===void 0&&(z=new $n),$===void 0&&($=[]),this.registry=l,this.path=v,this.key=v.map(function(at){return"["+at+"]"}).join(""),this.scope=z,this.errors=$,this.expectedType=b};function Vu(l,v){for(var b,z=l.length-1,$=0,at=z,mt=0;$<=at;)if((b=l[mt=Math.floor(($+at)/2)])<=v){if(mt===z||v<l[mt+1])return mt;$=mt+1}else{if(!(b>v))throw new de("Input is not a number.");at=mt-1}return 0}au.prototype.parse=function(l,v,b,z,$){return $===void 0&&($={}),v?this.concat(v,b,z)._parse(l,$):this._parse(l,$)},au.prototype._parse=function(l,v){function b(ge,Ce,Ie){return Ie==="assert"?new Ae(Ce,[ge]):Ie==="coerce"?new wn(Ce,[ge]):ge}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var z=l[0];if(typeof z!="string")return this.error("Expression name must be a string, but found "+typeof z+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var $=this.registry[z];if($){var at=$.parse(l,this);if(!at)return null;if(this.expectedType){var mt=this.expectedType,Mt=at.type;if(mt.kind!=="string"&&mt.kind!=="number"&&mt.kind!=="boolean"&&mt.kind!=="object"&&mt.kind!=="array"||Mt.kind!=="value")if(mt.kind!=="color"&&mt.kind!=="formatted"&&mt.kind!=="resolvedImage"||Mt.kind!=="value"&&Mt.kind!=="string"){if(this.checkSubtype(mt,Mt))return null}else at=b(at,mt,v.typeAnnotation||"coerce");else at=b(at,mt,v.typeAnnotation||"assert")}if(!(at instanceof Wt)&&at.type.kind!=="resolvedImage"&&function ge(Ce){if(Ce instanceof Ou)return ge(Ce.boundExpression);if(Ce instanceof pi&&Ce.name==="error"||Ce instanceof Pi||Ce instanceof Fo)return!1;var Ie=Ce instanceof wn||Ce instanceof Ae,Ge=!0;return Ce.eachChild(function(Zt){Ge=Ie?Ge&&ge(Zt):Ge&&Zt instanceof Wt}),!!Ge&&Vs(Ce)&&zs(Ce,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(at)){var oe=new Fr;try{at=new Wt(at.type,at.evaluate(oe))}catch(ge){return this.error(ge.message),null}}return at}return this.error('Unknown expression "'+z+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof l+" instead.")},au.prototype.concat=function(l,v,b){var z=typeof l=="number"?this.path.concat(l):this.path,$=b?this.scope.concat(b):this.scope;return new au(this.registry,z,v||null,$,this.errors)},au.prototype.error=function(l){for(var v=[],b=arguments.length-1;b-- >0;)v[b]=arguments[b+1];var z=""+this.key+v.map(function($){return"["+$+"]"}).join("");this.errors.push(new _n(z,l))},au.prototype.checkSubtype=function(l,v){var b=vn(l,v);return b&&this.error(b),b};var ou=function(l,v,b){this.type=l,this.input=v,this.labels=[],this.outputs=[];for(var z=0,$=b;z<$.length;z+=1){var at=$[z],mt=at[1];this.labels.push(at[0]),this.outputs.push(mt)}};function ds(l,v,b){return l*(1-b)+v*b}ou.parse=function(l,v){if(l.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return v.error("Expected an even number of arguments.");var b=v.parse(l[1],1,Jr);if(!b)return null;var z=[],$=null;v.expectedType&&v.expectedType.kind!=="value"&&($=v.expectedType);for(var at=1;at<l.length;at+=2){var mt=at===1?-1/0:l[at],Mt=l[at+1],oe=at,ge=at+1;if(typeof mt!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(z.length&&z[z.length-1][0]>=mt)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oe);var Ce=v.parse(Mt,ge,$);if(!Ce)return null;$=$||Ce.type,z.push([mt,Ce])}return new ou($,b,z)},ou.prototype.evaluate=function(l){var v=this.labels,b=this.outputs;if(v.length===1)return b[0].evaluate(l);var z=this.input.evaluate(l);if(z<=v[0])return b[0].evaluate(l);var $=v.length;return z>=v[$-1]?b[$-1].evaluate(l):b[Vu(v,z)].evaluate(l)},ou.prototype.eachChild=function(l){l(this.input);for(var v=0,b=this.outputs;v<b.length;v+=1)l(b[v])},ou.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},ou.prototype.serialize=function(){for(var l=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&l.push(this.labels[v]),l.push(this.outputs[v].serialize());return l};var Ko=Object.freeze({__proto__:null,number:ds,color:function(l,v,b){return new Po(ds(l.r,v.r,b),ds(l.g,v.g,b),ds(l.b,v.b,b),ds(l.a,v.a,b))},array:function(l,v,b){return l.map(function(z,$){return ds(z,v[$],b)})}}),Lu=6/29*3*(6/29),Gl=Math.PI/180,Du=180/Math.PI;function Wu(l){return l>.008856451679035631?Math.pow(l,1/3):l/Lu+4/29}function Ul(l){return l>6/29?l*l*l:Lu*(l-4/29)}function Ql(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Ku(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Nc(l){var v=Ku(l.r),b=Ku(l.g),z=Ku(l.b),$=Wu((.4124564*v+.3575761*b+.1804375*z)/.95047),at=Wu((.2126729*v+.7151522*b+.072175*z)/1);return{l:116*at-16,a:500*($-at),b:200*(at-Wu((.0193339*v+.119192*b+.9503041*z)/1.08883)),alpha:l.a}}function J(l){var v=(l.l+16)/116,b=isNaN(l.a)?v:v+l.a/500,z=isNaN(l.b)?v:v-l.b/200;return v=1*Ul(v),b=.95047*Ul(b),z=1.08883*Ul(z),new Po(Ql(3.2404542*b-1.5371385*v-.4985314*z),Ql(-.969266*b+1.8760108*v+.041556*z),Ql(.0556434*b-.2040259*v+1.0572252*z),l.alpha)}function Ct(l,v,b){var z=v-l;return l+b*(z>180||z<-180?z-360*Math.round(z/360):z)}var me={forward:Nc,reverse:J,interpolate:function(l,v,b){return{l:ds(l.l,v.l,b),a:ds(l.a,v.a,b),b:ds(l.b,v.b,b),alpha:ds(l.alpha,v.alpha,b)}}},jt={forward:function(l){var v=Nc(l),b=v.l,z=v.a,$=v.b,at=Math.atan2($,z)*Du;return{h:at<0?at+360:at,c:Math.sqrt(z*z+$*$),l:b,alpha:l.a}},reverse:function(l){var v=l.h*Gl,b=l.c;return J({l:l.l,a:Math.cos(v)*b,b:Math.sin(v)*b,alpha:l.alpha})},interpolate:function(l,v,b){return{h:Ct(l.h,v.h,b),c:ds(l.c,v.c,b),l:ds(l.l,v.l,b),alpha:ds(l.alpha,v.alpha,b)}}},ke=Object.freeze({__proto__:null,lab:me,hcl:jt}),ir=function(l,v,b,z,$){this.type=l,this.operator=v,this.interpolation=b,this.input=z,this.labels=[],this.outputs=[];for(var at=0,mt=$;at<mt.length;at+=1){var Mt=mt[at],oe=Mt[1];this.labels.push(Mt[0]),this.outputs.push(oe)}};function Gr(l,v,b,z){var $=z-b,at=l-b;return $===0?0:v===1?at/$:(Math.pow(v,at)-1)/(Math.pow(v,$)-1)}ir.interpolationFactor=function(l,v,b,z){var $=0;if(l.name==="exponential")$=Gr(v,l.base,b,z);else if(l.name==="linear")$=Gr(v,1,b,z);else if(l.name==="cubic-bezier"){var at=l.controlPoints;$=new F(at[0],at[1],at[2],at[3]).solve(Gr(v,1,b,z))}return $},ir.parse=function(l,v){var b=l[0],z=l[1],$=l[2],at=l.slice(3);if(!Array.isArray(z)||z.length===0)return v.error("Expected an interpolation type expression.",1);if(z[0]==="linear")z={name:"linear"};else if(z[0]==="exponential"){var mt=z[1];if(typeof mt!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);z={name:"exponential",base:mt}}else{if(z[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(z[0]),1,0);var Mt=z.slice(1);if(Mt.length!==4||Mt.some(function(jr){return typeof jr!="number"||jr<0||jr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);z={name:"cubic-bezier",controlPoints:Mt}}if(l.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!($=v.parse($,2,Jr)))return null;var oe=[],ge=null;b==="interpolate-hcl"||b==="interpolate-lab"?ge=yi:v.expectedType&&v.expectedType.kind!=="value"&&(ge=v.expectedType);for(var Ce=0;Ce<at.length;Ce+=2){var Ie=at[Ce],Ge=at[Ce+1],Zt=Ce+3,xr=Ce+4;if(typeof Ie!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Zt);if(oe.length&&oe[oe.length-1][0]>=Ie)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Zt);var mr=v.parse(Ge,xr,ge);if(!mr)return null;ge=ge||mr.type,oe.push([Ie,mr])}return ge.kind==="number"||ge.kind==="color"||ge.kind==="array"&&ge.itemType.kind==="number"&&typeof ge.N=="number"?new ir(ge,b,z,$,oe):v.error("Type "+oo(ge)+" is not interpolatable.")},ir.prototype.evaluate=function(l){var v=this.labels,b=this.outputs;if(v.length===1)return b[0].evaluate(l);var z=this.input.evaluate(l);if(z<=v[0])return b[0].evaluate(l);var $=v.length;if(z>=v[$-1])return b[$-1].evaluate(l);var at=Vu(v,z),mt=ir.interpolationFactor(this.interpolation,z,v[at],v[at+1]),Mt=b[at].evaluate(l),oe=b[at+1].evaluate(l);return this.operator==="interpolate"?Ko[this.type.kind.toLowerCase()](Mt,oe,mt):this.operator==="interpolate-hcl"?jt.reverse(jt.interpolate(jt.forward(Mt),jt.forward(oe),mt)):me.reverse(me.interpolate(me.forward(Mt),me.forward(oe),mt))},ir.prototype.eachChild=function(l){l(this.input);for(var v=0,b=this.outputs;v<b.length;v+=1)l(b[v])},ir.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},ir.prototype.serialize=function(){var l;l=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,l,this.input.serialize()],b=0;b<this.labels.length;b++)v.push(this.labels[b],this.outputs[b].serialize());return v};var pn=function(l,v){this.type=l,this.args=v};pn.parse=function(l,v){if(l.length<2)return v.error("Expectected at least one argument.");var b=null,z=v.expectedType;z&&z.kind!=="value"&&(b=z);for(var $=[],at=0,mt=l.slice(1);at<mt.length;at+=1){var Mt=v.parse(mt[at],1+$.length,b,void 0,{typeAnnotation:"omit"});if(!Mt)return null;b=b||Mt.type,$.push(Mt)}var oe=z&&$.some(function(ge){return vn(z,ge.type)});return new pn(oe?ki:b,$)},pn.prototype.evaluate=function(l){for(var v,b=null,z=0,$=0,at=this.args;$<at.length&&(z++,(b=at[$].evaluate(l))&&b instanceof Pe&&!b.available&&(v||(v=b.name),b=null,z===this.args.length&&(b=v)),b===null);$+=1);return b},pn.prototype.eachChild=function(l){this.args.forEach(l)},pn.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},pn.prototype.serialize=function(){var l=["coalesce"];return this.eachChild(function(v){l.push(v.serialize())}),l};var dn=function(l,v){this.type=v.type,this.bindings=[].concat(l),this.result=v};dn.prototype.evaluate=function(l){return this.result.evaluate(l)},dn.prototype.eachChild=function(l){for(var v=0,b=this.bindings;v<b.length;v+=1)l(b[v][1]);l(this.result)},dn.parse=function(l,v){if(l.length<4)return v.error("Expected at least 3 arguments, but found "+(l.length-1)+" instead.");for(var b=[],z=1;z<l.length-1;z+=2){var $=l[z];if(typeof $!="string")return v.error("Expected string, but found "+typeof $+" instead.",z);if(/[^a-zA-Z0-9_]/.test($))return v.error("Variable names must contain only alphanumeric characters or '_'.",z);var at=v.parse(l[z+1],z+1);if(!at)return null;b.push([$,at])}var mt=v.parse(l[l.length-1],l.length-1,v.expectedType,b);return mt?new dn(b,mt):null},dn.prototype.outputDefined=function(){return this.result.outputDefined()},dn.prototype.serialize=function(){for(var l=["let"],v=0,b=this.bindings;v<b.length;v+=1){var z=b[v];l.push(z[0],z[1].serialize())}return l.push(this.result.serialize()),l};var ti=function(l,v,b){this.type=l,this.index=v,this.input=b};ti.parse=function(l,v){if(l.length!==3)return v.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var b=v.parse(l[1],1,Jr),z=v.parse(l[2],2,po(v.expectedType||ki));return b&&z?new ti(z.type.itemType,b,z):null},ti.prototype.evaluate=function(l){var v=this.index.evaluate(l),b=this.input.evaluate(l);if(v<0)throw new de("Array index out of bounds: "+v+" < 0.");if(v>=b.length)throw new de("Array index out of bounds: "+v+" > "+(b.length-1)+".");if(v!==Math.floor(v))throw new de("Array index must be an integer, but found "+v+" instead.");return b[v]},ti.prototype.eachChild=function(l){l(this.index),l(this.input)},ti.prototype.outputDefined=function(){return!1},ti.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Nn=function(l,v){this.type=Jn,this.needle=l,this.haystack=v};Nn.parse=function(l,v){if(l.length!==3)return v.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var b=v.parse(l[1],1,ki),z=v.parse(l[2],2,ki);return b&&z?Wo(b.type,[Jn,Si,Jr,si,ki])?new Nn(b,z):v.error("Expected first argument to be of type boolean, string, number or null, but found "+oo(b.type)+" instead"):null},Nn.prototype.evaluate=function(l){var v=this.needle.evaluate(l),b=this.haystack.evaluate(l);if(!b)return!1;if(!mo(v,["boolean","string","number","null"]))throw new de("Expected first argument to be of type boolean, string, number or null, but found "+oo(he(v))+" instead.");if(!mo(b,["string","array"]))throw new de("Expected second argument to be of type array or string, but found "+oo(he(b))+" instead.");return b.indexOf(v)>=0},Nn.prototype.eachChild=function(l){l(this.needle),l(this.haystack)},Nn.prototype.outputDefined=function(){return!0},Nn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Fa=function(l,v,b){this.type=Jr,this.needle=l,this.haystack=v,this.fromIndex=b};Fa.parse=function(l,v){if(l.length<=2||l.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var b=v.parse(l[1],1,ki),z=v.parse(l[2],2,ki);if(!b||!z)return null;if(!Wo(b.type,[Jn,Si,Jr,si,ki]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+oo(b.type)+" instead");if(l.length===4){var $=v.parse(l[3],3,Jr);return $?new Fa(b,z,$):null}return new Fa(b,z)},Fa.prototype.evaluate=function(l){var v=this.needle.evaluate(l),b=this.haystack.evaluate(l);if(!mo(v,["boolean","string","number","null"]))throw new de("Expected first argument to be of type boolean, string, number or null, but found "+oo(he(v))+" instead.");if(!mo(b,["string","array"]))throw new de("Expected second argument to be of type array or string, but found "+oo(he(b))+" instead.");if(this.fromIndex){var z=this.fromIndex.evaluate(l);return b.indexOf(v,z)}return b.indexOf(v)},Fa.prototype.eachChild=function(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)},Fa.prototype.outputDefined=function(){return!1},Fa.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var l=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),l]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Xa=function(l,v,b,z,$,at){this.inputType=l,this.type=v,this.input=b,this.cases=z,this.outputs=$,this.otherwise=at};Xa.parse=function(l,v){if(l.length<5)return v.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if(l.length%2!=1)return v.error("Expected an even number of arguments.");var b,z;v.expectedType&&v.expectedType.kind!=="value"&&(z=v.expectedType);for(var $={},at=[],mt=2;mt<l.length-1;mt+=2){var Mt=l[mt],oe=l[mt+1];Array.isArray(Mt)||(Mt=[Mt]);var ge=v.concat(mt);if(Mt.length===0)return ge.error("Expected at least one branch label.");for(var Ce=0,Ie=Mt;Ce<Ie.length;Ce+=1){var Ge=Ie[Ce];if(typeof Ge!="number"&&typeof Ge!="string")return ge.error("Branch labels must be numbers or strings.");if(typeof Ge=="number"&&Math.abs(Ge)>Number.MAX_SAFE_INTEGER)return ge.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ge=="number"&&Math.floor(Ge)!==Ge)return ge.error("Numeric branch labels must be integer values.");if(b){if(ge.checkSubtype(b,he(Ge)))return null}else b=he(Ge);if($[String(Ge)]!==void 0)return ge.error("Branch labels must be unique.");$[String(Ge)]=at.length}var Zt=v.parse(oe,mt,z);if(!Zt)return null;z=z||Zt.type,at.push(Zt)}var xr=v.parse(l[1],1,ki);if(!xr)return null;var mr=v.parse(l[l.length-1],l.length-1,z);return mr?xr.type.kind!=="value"&&v.concat(1).checkSubtype(b,xr.type)?null:new Xa(b,z,xr,$,at,mr):null},Xa.prototype.evaluate=function(l){var v=this.input.evaluate(l);return(he(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(l)},Xa.prototype.eachChild=function(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)},Xa.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})&&this.otherwise.outputDefined()},Xa.prototype.serialize=function(){for(var l=this,v=["match",this.input.serialize()],b=[],z={},$=0,at=Object.keys(this.cases).sort();$<at.length;$+=1){var mt=at[$];(Ie=z[this.cases[mt]])===void 0?(z[this.cases[mt]]=b.length,b.push([this.cases[mt],[mt]])):b[Ie][1].push(mt)}for(var Mt=function(Zt){return l.inputType.kind==="number"?Number(Zt):Zt},oe=0,ge=b;oe<ge.length;oe+=1){var Ce=ge[oe],Ie=Ce[0],Ge=Ce[1];v.push(Ge.length===1?Mt(Ge[0]):Ge.map(Mt)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var Wi=function(l,v,b){this.type=l,this.branches=v,this.otherwise=b};Wi.parse=function(l,v){if(l.length<4)return v.error("Expected at least 3 arguments, but found only "+(l.length-1)+".");if(l.length%2!=0)return v.error("Expected an odd number of arguments.");var b;v.expectedType&&v.expectedType.kind!=="value"&&(b=v.expectedType);for(var z=[],$=1;$<l.length-1;$+=2){var at=v.parse(l[$],$,Jn);if(!at)return null;var mt=v.parse(l[$+1],$+1,b);if(!mt)return null;z.push([at,mt]),b=b||mt.type}var Mt=v.parse(l[l.length-1],l.length-1,b);return Mt?new Wi(b,z,Mt):null},Wi.prototype.evaluate=function(l){for(var v=0,b=this.branches;v<b.length;v+=1){var z=b[v],$=z[1];if(z[0].evaluate(l))return $.evaluate(l)}return this.otherwise.evaluate(l)},Wi.prototype.eachChild=function(l){for(var v=0,b=this.branches;v<b.length;v+=1){var z=b[v],$=z[1];l(z[0]),l($)}l(this.otherwise)},Wi.prototype.outputDefined=function(){return this.branches.every(function(l){return l[1].outputDefined()})&&this.otherwise.outputDefined()},Wi.prototype.serialize=function(){var l=["case"];return this.eachChild(function(v){l.push(v.serialize())}),l};var rs=function(l,v,b,z){this.type=l,this.input=v,this.beginIndex=b,this.endIndex=z};function io(l,v){return l==="=="||l==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function Cs(l,v,b,z){return z.compare(v,b)===0}function Ve(l,v,b){var z=l!=="=="&&l!=="!=";return function(){function $(at,mt,Mt){this.type=Jn,this.lhs=at,this.rhs=mt,this.collator=Mt,this.hasUntypedArgument=at.type.kind==="value"||mt.type.kind==="value"}return $.parse=function(at,mt){if(at.length!==3&&at.length!==4)return mt.error("Expected two or three arguments.");var Mt=at[0],oe=mt.parse(at[1],1,ki);if(!oe)return null;if(!io(Mt,oe.type))return mt.concat(1).error('"'+Mt+`" comparisons are not supported for type '`+oo(oe.type)+"'.");var ge=mt.parse(at[2],2,ki);if(!ge)return null;if(!io(Mt,ge.type))return mt.concat(2).error('"'+Mt+`" comparisons are not supported for type '`+oo(ge.type)+"'.");if(oe.type.kind!==ge.type.kind&&oe.type.kind!=="value"&&ge.type.kind!=="value")return mt.error("Cannot compare types '"+oo(oe.type)+"' and '"+oo(ge.type)+"'.");z&&(oe.type.kind==="value"&&ge.type.kind!=="value"?oe=new Ae(ge.type,[oe]):oe.type.kind!=="value"&&ge.type.kind==="value"&&(ge=new Ae(oe.type,[ge])));var Ce=null;if(at.length===4){if(oe.type.kind!=="string"&&ge.type.kind!=="string"&&oe.type.kind!=="value"&&ge.type.kind!=="value")return mt.error("Cannot use collator to compare non-string types.");if(!(Ce=mt.parse(at[3],3,ga)))return null}return new $(oe,ge,Ce)},$.prototype.evaluate=function(at){var mt=this.lhs.evaluate(at),Mt=this.rhs.evaluate(at);if(z&&this.hasUntypedArgument){var oe=he(mt),ge=he(Mt);if(oe.kind!==ge.kind||oe.kind!=="string"&&oe.kind!=="number")throw new de('Expected arguments for "'+l+'" to be (string, string) or (number, number), but found ('+oe.kind+", "+ge.kind+") instead.")}if(this.collator&&!z&&this.hasUntypedArgument){var Ce=he(mt),Ie=he(Mt);if(Ce.kind!=="string"||Ie.kind!=="string")return v(at,mt,Mt)}return this.collator?b(at,mt,Mt,this.collator.evaluate(at)):v(at,mt,Mt)},$.prototype.eachChild=function(at){at(this.lhs),at(this.rhs),this.collator&&at(this.collator)},$.prototype.outputDefined=function(){return!0},$.prototype.serialize=function(){var at=[l];return this.eachChild(function(mt){at.push(mt.serialize())}),at},$}()}rs.parse=function(l,v){if(l.length<=2||l.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var b=v.parse(l[1],1,ki),z=v.parse(l[2],2,Jr);if(!b||!z)return null;if(!Wo(b.type,[po(ki),Si,ki]))return v.error("Expected first argument to be of type array or string, but found "+oo(b.type)+" instead");if(l.length===4){var $=v.parse(l[3],3,Jr);return $?new rs(b.type,b,z,$):null}return new rs(b.type,b,z)},rs.prototype.evaluate=function(l){var v=this.input.evaluate(l),b=this.beginIndex.evaluate(l);if(!mo(v,["string","array"]))throw new de("Expected first argument to be of type array or string, but found "+oo(he(v))+" instead.");if(this.endIndex){var z=this.endIndex.evaluate(l);return v.slice(b,z)}return v.slice(b)},rs.prototype.eachChild=function(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)},rs.prototype.outputDefined=function(){return!1},rs.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var l=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),l]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var pe=Ve("==",function(l,v,b){return v===b},Cs),pt=Ve("!=",function(l,v,b){return v!==b},function(l,v,b,z){return!Cs(0,v,b,z)}),Ot=Ve("<",function(l,v,b){return v<b},function(l,v,b,z){return z.compare(v,b)<0}),ee=Ve(">",function(l,v,b){return v>b},function(l,v,b,z){return z.compare(v,b)>0}),ye=Ve("<=",function(l,v,b){return v<=b},function(l,v,b,z){return z.compare(v,b)<=0}),Ne=Ve(">=",function(l,v,b){return v>=b},function(l,v,b,z){return z.compare(v,b)>=0}),Ye=function(l,v,b,z,$){this.type=Si,this.number=l,this.locale=v,this.currency=b,this.minFractionDigits=z,this.maxFractionDigits=$};Ye.parse=function(l,v){if(l.length!==3)return v.error("Expected two arguments.");var b=v.parse(l[1],1,Jr);if(!b)return null;var z=l[2];if(typeof z!="object"||Array.isArray(z))return v.error("NumberFormat options argument must be an object.");var $=null;if(z.locale&&!($=v.parse(z.locale,1,Si)))return null;var at=null;if(z.currency&&!(at=v.parse(z.currency,1,Si)))return null;var mt=null;if(z["min-fraction-digits"]&&!(mt=v.parse(z["min-fraction-digits"],1,Jr)))return null;var Mt=null;return z["max-fraction-digits"]&&!(Mt=v.parse(z["max-fraction-digits"],1,Jr))?null:new Ye(b,$,at,mt,Mt)},Ye.prototype.evaluate=function(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))},Ye.prototype.eachChild=function(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)},Ye.prototype.outputDefined=function(){return!1},Ye.prototype.serialize=function(){var l={};return this.locale&&(l.locale=this.locale.serialize()),this.currency&&(l.currency=this.currency.serialize()),this.minFractionDigits&&(l["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(l["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),l]};var hr=function(l){this.type=Jr,this.input=l};hr.parse=function(l,v){if(l.length!==2)return v.error("Expected 1 argument, but found "+(l.length-1)+" instead.");var b=v.parse(l[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+oo(b.type)+" instead."):new hr(b):null},hr.prototype.evaluate=function(l){var v=this.input.evaluate(l);if(typeof v=="string"||Array.isArray(v))return v.length;throw new de("Expected value to be of type string or array, but found "+oo(he(v))+" instead.")},hr.prototype.eachChild=function(l){l(this.input)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){var l=["length"];return this.eachChild(function(v){l.push(v.serialize())}),l};var Er={"==":pe,"!=":pt,">":ee,"<":Ot,">=":Ne,"<=":ye,array:Ae,at:ti,boolean:Ae,case:Wi,coalesce:pn,collator:Pi,format:He,image:_r,in:Nn,"index-of":Fa,interpolate:ir,"interpolate-hcl":ir,"interpolate-lab":ir,length:hr,let:dn,literal:Wt,match:Xa,number:Ae,"number-format":Ye,object:Ae,slice:rs,step:ou,string:Ae,"to-boolean":wn,"to-color":wn,"to-number":wn,"to-string":wn,var:Ou,within:Fo};function Hr(l,v){var b=v[0],z=v[1],$=v[2],at=v[3];b=b.evaluate(l),z=z.evaluate(l),$=$.evaluate(l);var mt=at?at.evaluate(l):1,Mt=Tt(b,z,$,mt);if(Mt)throw new de(Mt);return new Po(b/255*mt,z/255*mt,$/255*mt,mt)}function bn(l,v){return l in v}function ri(l,v){var b=v[l];return b===void 0?null:b}function qn(l){return{type:l}}function da(l){return{result:"success",value:l}}function Ya(l){return{result:"error",value:l}}function Ra(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function ts(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function $o(l){return!!l.expression&&l.expression.interpolated}function Aa(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Le(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function gr(l){return l}function Dr(l,v,b){return l!==void 0?l:v!==void 0?v:b!==void 0?b:void 0}function on(l,v,b,z,$){return Dr(typeof b===$?z[b]:void 0,l.default,v.default)}function Yn(l,v,b){if(Aa(b)!=="number")return Dr(l.default,v.default);var z=l.stops.length;if(z===1||b<=l.stops[0][0])return l.stops[0][1];if(b>=l.stops[z-1][0])return l.stops[z-1][1];var $=Vu(l.stops.map(function(at){return at[0]}),b);return l.stops[$][1]}function ia(l,v,b){var z=l.base!==void 0?l.base:1;if(Aa(b)!=="number")return Dr(l.default,v.default);var $=l.stops.length;if($===1||b<=l.stops[0][0])return l.stops[0][1];if(b>=l.stops[$-1][0])return l.stops[$-1][1];var at=Vu(l.stops.map(function(Ie){return Ie[0]}),b),mt=function(Ie,Ge,Zt,xr){var mr=xr-Zt,jr=Ie-Zt;return mr===0?0:Ge===1?jr/mr:(Math.pow(Ge,jr)-1)/(Math.pow(Ge,mr)-1)}(b,z,l.stops[at][0],l.stops[at+1][0]),Mt=l.stops[at][1],oe=l.stops[at+1][1],ge=Ko[v.type]||gr;if(l.colorSpace&&l.colorSpace!=="rgb"){var Ce=ke[l.colorSpace];ge=function(Ie,Ge){return Ce.reverse(Ce.interpolate(Ce.forward(Ie),Ce.forward(Ge),mt))}}return typeof Mt.evaluate=="function"?{evaluate:function(){for(var Ie=[],Ge=arguments.length;Ge--;)Ie[Ge]=arguments[Ge];var Zt=Mt.evaluate.apply(void 0,Ie),xr=oe.evaluate.apply(void 0,Ie);if(Zt!==void 0&&xr!==void 0)return ge(Zt,xr,mt)}}:ge(Mt,oe,mt)}function vo(l,v,b){return v.type==="color"?b=Po.parse(b):v.type==="formatted"?b=An.fromString(b.toString()):v.type==="resolvedImage"?b=Pe.fromString(b.toString()):Aa(b)===v.type||v.type==="enum"&&v.values[b]||(b=void 0),Dr(b,l.default,v.default)}pi.register(Er,{error:[{kind:"error"},[Si],function(l,v){throw new de(v[0].evaluate(l))}],typeof:[Si,[ki],function(l,v){return oo(he(v[0].evaluate(l)))}],"to-rgba":[po(Jr,4),[yi],function(l,v){return v[0].evaluate(l).toArray()}],rgb:[yi,[Jr,Jr,Jr],Hr],rgba:[yi,[Jr,Jr,Jr,Jr],Hr],has:{type:Jn,overloads:[[[Si],function(l,v){return bn(v[0].evaluate(l),l.properties())}],[[Si,Ka],function(l,v){var b=v[1];return bn(v[0].evaluate(l),b.evaluate(l))}]]},get:{type:ki,overloads:[[[Si],function(l,v){return ri(v[0].evaluate(l),l.properties())}],[[Si,Ka],function(l,v){var b=v[1];return ri(v[0].evaluate(l),b.evaluate(l))}]]},"feature-state":[ki,[Si],function(l,v){return ri(v[0].evaluate(l),l.featureState||{})}],properties:[Ka,[],function(l){return l.properties()}],"geometry-type":[Si,[],function(l){return l.geometryType()}],id:[ki,[],function(l){return l.id()}],zoom:[Jr,[],function(l){return l.globals.zoom}],"heatmap-density":[Jr,[],function(l){return l.globals.heatmapDensity||0}],"line-progress":[Jr,[],function(l){return l.globals.lineProgress||0}],accumulated:[ki,[],function(l){return l.globals.accumulated===void 0?null:l.globals.accumulated}],"+":[Jr,qn(Jr),function(l,v){for(var b=0,z=0,$=v;z<$.length;z+=1)b+=$[z].evaluate(l);return b}],"*":[Jr,qn(Jr),function(l,v){for(var b=1,z=0,$=v;z<$.length;z+=1)b*=$[z].evaluate(l);return b}],"-":{type:Jr,overloads:[[[Jr,Jr],function(l,v){var b=v[1];return v[0].evaluate(l)-b.evaluate(l)}],[[Jr],function(l,v){return-v[0].evaluate(l)}]]},"/":[Jr,[Jr,Jr],function(l,v){var b=v[1];return v[0].evaluate(l)/b.evaluate(l)}],"%":[Jr,[Jr,Jr],function(l,v){var b=v[1];return v[0].evaluate(l)%b.evaluate(l)}],ln2:[Jr,[],function(){return Math.LN2}],pi:[Jr,[],function(){return Math.PI}],e:[Jr,[],function(){return Math.E}],"^":[Jr,[Jr,Jr],function(l,v){var b=v[1];return Math.pow(v[0].evaluate(l),b.evaluate(l))}],sqrt:[Jr,[Jr],function(l,v){return Math.sqrt(v[0].evaluate(l))}],log10:[Jr,[Jr],function(l,v){return Math.log(v[0].evaluate(l))/Math.LN10}],ln:[Jr,[Jr],function(l,v){return Math.log(v[0].evaluate(l))}],log2:[Jr,[Jr],function(l,v){return Math.log(v[0].evaluate(l))/Math.LN2}],sin:[Jr,[Jr],function(l,v){return Math.sin(v[0].evaluate(l))}],cos:[Jr,[Jr],function(l,v){return Math.cos(v[0].evaluate(l))}],tan:[Jr,[Jr],function(l,v){return Math.tan(v[0].evaluate(l))}],asin:[Jr,[Jr],function(l,v){return Math.asin(v[0].evaluate(l))}],acos:[Jr,[Jr],function(l,v){return Math.acos(v[0].evaluate(l))}],atan:[Jr,[Jr],function(l,v){return Math.atan(v[0].evaluate(l))}],min:[Jr,qn(Jr),function(l,v){return Math.min.apply(Math,v.map(function(b){return b.evaluate(l)}))}],max:[Jr,qn(Jr),function(l,v){return Math.max.apply(Math,v.map(function(b){return b.evaluate(l)}))}],abs:[Jr,[Jr],function(l,v){return Math.abs(v[0].evaluate(l))}],round:[Jr,[Jr],function(l,v){var b=v[0].evaluate(l);return b<0?-Math.round(-b):Math.round(b)}],floor:[Jr,[Jr],function(l,v){return Math.floor(v[0].evaluate(l))}],ceil:[Jr,[Jr],function(l,v){return Math.ceil(v[0].evaluate(l))}],"filter-==":[Jn,[Si,ki],function(l,v){var b=v[0],z=v[1];return l.properties()[b.value]===z.value}],"filter-id-==":[Jn,[ki],function(l,v){var b=v[0];return l.id()===b.value}],"filter-type-==":[Jn,[Si],function(l,v){var b=v[0];return l.geometryType()===b.value}],"filter-<":[Jn,[Si,ki],function(l,v){var b=v[0],z=v[1],$=l.properties()[b.value],at=z.value;return typeof $==typeof at&&$<at}],"filter-id-<":[Jn,[ki],function(l,v){var b=v[0],z=l.id(),$=b.value;return typeof z==typeof $&&z<$}],"filter->":[Jn,[Si,ki],function(l,v){var b=v[0],z=v[1],$=l.properties()[b.value],at=z.value;return typeof $==typeof at&&$>at}],"filter-id->":[Jn,[ki],function(l,v){var b=v[0],z=l.id(),$=b.value;return typeof z==typeof $&&z>$}],"filter-<=":[Jn,[Si,ki],function(l,v){var b=v[0],z=v[1],$=l.properties()[b.value],at=z.value;return typeof $==typeof at&&$<=at}],"filter-id-<=":[Jn,[ki],function(l,v){var b=v[0],z=l.id(),$=b.value;return typeof z==typeof $&&z<=$}],"filter->=":[Jn,[Si,ki],function(l,v){var b=v[0],z=v[1],$=l.properties()[b.value],at=z.value;return typeof $==typeof at&&$>=at}],"filter-id->=":[Jn,[ki],function(l,v){var b=v[0],z=l.id(),$=b.value;return typeof z==typeof $&&z>=$}],"filter-has":[Jn,[ki],function(l,v){return v[0].value in l.properties()}],"filter-has-id":[Jn,[],function(l){return l.id()!==null&&l.id()!==void 0}],"filter-type-in":[Jn,[po(Si)],function(l,v){return v[0].value.indexOf(l.geometryType())>=0}],"filter-id-in":[Jn,[po(ki)],function(l,v){return v[0].value.indexOf(l.id())>=0}],"filter-in-small":[Jn,[Si,po(ki)],function(l,v){var b=v[0];return v[1].value.indexOf(l.properties()[b.value])>=0}],"filter-in-large":[Jn,[Si,po(ki)],function(l,v){var b=v[0],z=v[1];return function($,at,mt,Mt){for(;mt<=Mt;){var oe=mt+Mt>>1;if(at[oe]===$)return!0;at[oe]>$?Mt=oe-1:mt=oe+1}return!1}(l.properties()[b.value],z.value,0,z.value.length-1)}],all:{type:Jn,overloads:[[[Jn,Jn],function(l,v){var b=v[1];return v[0].evaluate(l)&&b.evaluate(l)}],[qn(Jn),function(l,v){for(var b=0,z=v;b<z.length;b+=1)if(!z[b].evaluate(l))return!1;return!0}]]},any:{type:Jn,overloads:[[[Jn,Jn],function(l,v){var b=v[1];return v[0].evaluate(l)||b.evaluate(l)}],[qn(Jn),function(l,v){for(var b=0,z=v;b<z.length;b+=1)if(z[b].evaluate(l))return!0;return!1}]]},"!":[Jn,[Jn],function(l,v){return!v[0].evaluate(l)}],"is-supported-script":[Jn,[Si],function(l,v){var b=l.globals&&l.globals.isSupportedScript;return!b||b(v[0].evaluate(l))}],upcase:[Si,[Si],function(l,v){return v[0].evaluate(l).toUpperCase()}],downcase:[Si,[Si],function(l,v){return v[0].evaluate(l).toLowerCase()}],concat:[Si,qn(ki),function(l,v){return v.map(function(b){return zt(b.evaluate(l))}).join("")}],"resolved-locale":[Si,[ga],function(l,v){return v[0].evaluate(l).resolvedLocale()}]});var As=function(l,v){this.expression=l,this._warningHistory={},this._evaluator=new Fr,this._defaultValue=v?function(b){return b.type==="color"&&Le(b.default)?new Po(0,0,0,0):b.type==="color"?Po.parse(b.default)||null:b.default===void 0?null:b.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function Bu(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Er}function Cl(l,v){var b=new au(Er,[],v?function($){var at={color:yi,string:Si,number:Jr,enum:Si,boolean:Jn,formatted:ko,resolvedImage:Ci};return $.type==="array"?po(at[$.value]||ki,$.length):at[$.type]}(v):void 0),z=b.parse(l,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return z?da(new As(z,v)):Ya(b.errors)}As.prototype.evaluateWithoutErrorHandling=function(l,v,b,z,$,at){return this._evaluator.globals=l,this._evaluator.feature=v,this._evaluator.featureState=b,this._evaluator.canonical=z,this._evaluator.availableImages=$||null,this._evaluator.formattedSection=at,this.expression.evaluate(this._evaluator)},As.prototype.evaluate=function(l,v,b,z,$,at){this._evaluator.globals=l,this._evaluator.feature=v||null,this._evaluator.featureState=b||null,this._evaluator.canonical=z,this._evaluator.availableImages=$||null,this._evaluator.formattedSection=at||null;try{var mt=this.expression.evaluate(this._evaluator);if(mt==null||typeof mt=="number"&&mt!=mt)return this._defaultValue;if(this._enumValues&&!(mt in this._enumValues))throw new de("Expected value to be one of "+Object.keys(this._enumValues).map(function(Mt){return JSON.stringify(Mt)}).join(", ")+", but found "+JSON.stringify(mt)+" instead.");return mt}catch(Mt){return this._warningHistory[Mt.message]||(this._warningHistory[Mt.message]=!0,typeof console!="undefined"&&console.warn(Mt.message)),this._defaultValue}};var Al=function(l,v){this.kind=l,this._styleExpression=v,this.isStateDependent=l!=="constant"&&!$s(v.expression)};Al.prototype.evaluateWithoutErrorHandling=function(l,v,b,z,$,at){return this._styleExpression.evaluateWithoutErrorHandling(l,v,b,z,$,at)},Al.prototype.evaluate=function(l,v,b,z,$,at){return this._styleExpression.evaluate(l,v,b,z,$,at)};var zc=function(l,v,b,z){this.kind=l,this.zoomStops=b,this._styleExpression=v,this.isStateDependent=l!=="camera"&&!$s(v.expression),this.interpolationType=z};function Sh(l,v){if((l=Cl(l,v)).result==="error")return l;var b=l.value.expression,z=Vs(b);if(!z&&!Ra(v))return Ya([new _n("","data expressions not supported")]);var $=zs(b,["zoom"]);if(!$&&!ts(v))return Ya([new _n("","zoom expressions not supported")]);var at=function mt(Mt){var oe=null;if(Mt instanceof dn)oe=mt(Mt.result);else if(Mt instanceof pn)for(var ge=0,Ce=Mt.args;ge<Ce.length&&!(oe=mt(Ce[ge]));ge+=1);else(Mt instanceof ou||Mt instanceof ir)&&Mt.input instanceof pi&&Mt.input.name==="zoom"&&(oe=Mt);return oe instanceof _n||Mt.eachChild(function(Ie){var Ge=mt(Ie);Ge instanceof _n?oe=Ge:!oe&&Ge?oe=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):oe&&Ge&&oe!==Ge&&(oe=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),oe}(b);return at||$?at instanceof _n?Ya([at]):at instanceof ir&&!$o(v)?Ya([new _n("",'"interpolate" expressions cannot be used with this property')]):da(at?new zc(z?"camera":"composite",l.value,at.labels,at instanceof ir?at.interpolation:void 0):new Al(z?"constant":"source",l.value)):Ya([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}zc.prototype.evaluateWithoutErrorHandling=function(l,v,b,z,$,at){return this._styleExpression.evaluateWithoutErrorHandling(l,v,b,z,$,at)},zc.prototype.evaluate=function(l,v,b,z,$,at){return this._styleExpression.evaluate(l,v,b,z,$,at)},zc.prototype.interpolationFactor=function(l,v,b){return this.interpolationType?ir.interpolationFactor(this.interpolationType,l,v,b):0};var nf=function(l,v){this._parameters=l,this._specification=v,Xr(this,function b(z,$){var at,mt,Mt,oe=$.type==="color",ge=z.stops&&typeof z.stops[0][0]=="object",Ce=ge||!(ge||z.property!==void 0),Ie=z.type||($o($)?"exponential":"interval");if(oe&&((z=Xr({},z)).stops&&(z.stops=z.stops.map(function(ba){return[ba[0],Po.parse(ba[1])]})),z.default=Po.parse(z.default?z.default:$.default)),z.colorSpace&&z.colorSpace!=="rgb"&&!ke[z.colorSpace])throw new Error("Unknown color space: "+z.colorSpace);if(Ie==="exponential")at=ia;else if(Ie==="interval")at=Yn;else if(Ie==="categorical"){at=on,mt=Object.create(null);for(var Ge=0,Zt=z.stops;Ge<Zt.length;Ge+=1){var xr=Zt[Ge];mt[xr[0]]=xr[1]}Mt=typeof z.stops[0][0]}else{if(Ie!=="identity")throw new Error('Unknown function type "'+Ie+'"');at=vo}if(ge){for(var mr={},jr=[],kr=0;kr<z.stops.length;kr++){var un=z.stops[kr],En=un[0].zoom;mr[En]===void 0&&(mr[En]={zoom:En,type:z.type,property:z.property,default:z.default,stops:[]},jr.push(En)),mr[En].stops.push([un[0].value,un[1]])}for(var kn=[],Gn=0,oi=jr;Gn<oi.length;Gn+=1){var Bi=oi[Gn];kn.push([mr[Bi].zoom,b(mr[Bi],$)])}var oa={name:"linear"};return{kind:"composite",interpolationType:oa,interpolationFactor:ir.interpolationFactor.bind(void 0,oa),zoomStops:kn.map(function(ba){return ba[0]}),evaluate:function(ba,lo){var Ea=ba.zoom;return ia({stops:kn,base:z.base},$,Ea).evaluate(Ea,lo)}}}if(Ce){var eo=Ie==="exponential"?{name:"exponential",base:z.base!==void 0?z.base:1}:null;return{kind:"camera",interpolationType:eo,interpolationFactor:ir.interpolationFactor.bind(void 0,eo),zoomStops:z.stops.map(function(ba){return ba[0]}),evaluate:function(ba){return at(z,$,ba.zoom,mt,Mt)}}}return{kind:"source",evaluate:function(ba,lo){var Ea=lo&&lo.properties?lo.properties[z.property]:void 0;return Ea===void 0?Dr(z.default,$.default):at(z,$,Ea,mt,Mt)}}}(this._parameters,this._specification))};function Zu(l){var v=l.key,b=l.value,z=l.valueSpec||{},$=l.objectElementValidators||{},at=l.style,mt=l.styleSpec,Mt=[],oe=Aa(b);if(oe!=="object")return[new tr(v,b,"object expected, "+oe+" found")];for(var ge in b){var Ce=ge.split(".")[0],Ie=z[Ce]||z["*"],Ge=void 0;if($[Ce])Ge=$[Ce];else if(z[Ce])Ge=vs;else if($["*"])Ge=$["*"];else{if(!z["*"]){Mt.push(new tr(v,b[ge],'unknown property "'+ge+'"'));continue}Ge=vs}Mt=Mt.concat(Ge({key:(v&&v+".")+ge,value:b[ge],valueSpec:Ie,style:at,styleSpec:mt,object:b,objectKey:ge},b))}for(var Zt in z)$[Zt]||z[Zt].required&&z[Zt].default===void 0&&b[Zt]===void 0&&Mt.push(new tr(v,b,'missing required property "'+Zt+'"'));return Mt}function tp(l){var v=l.value,b=l.valueSpec,z=l.style,$=l.styleSpec,at=l.key,mt=l.arrayElementValidator||vs;if(Aa(v)!=="array")return[new tr(at,v,"array expected, "+Aa(v)+" found")];if(b.length&&v.length!==b.length)return[new tr(at,v,"array length "+b.length+" expected, length "+v.length+" found")];if(b["min-length"]&&v.length<b["min-length"])return[new tr(at,v,"array length at least "+b["min-length"]+" expected, length "+v.length+" found")];var Mt={type:b.value,values:b.values};$.$version<7&&(Mt.function=b.function),Aa(b.value)==="object"&&(Mt=b.value);for(var oe=[],ge=0;ge<v.length;ge++)oe=oe.concat(mt({array:v,arrayIndex:ge,value:v[ge],valueSpec:Mt,style:z,styleSpec:$,key:at+"["+ge+"]"}));return oe}function qp(l){var v=l.key,b=l.value,z=l.valueSpec,$=Aa(b);return $==="number"&&b!=b&&($="NaN"),$!=="number"?[new tr(v,b,"number expected, "+$+" found")]:"minimum"in z&&b<z.minimum?[new tr(v,b,b+" is less than the minimum value "+z.minimum)]:"maximum"in z&&b>z.maximum?[new tr(v,b,b+" is greater than the maximum value "+z.maximum)]:[]}function Md(l){var v,b,z,$=l.valueSpec,at=Zr(l.value.type),mt={},Mt=at!=="categorical"&&l.value.property===void 0,oe=!Mt,ge=Aa(l.value.stops)==="array"&&Aa(l.value.stops[0])==="array"&&Aa(l.value.stops[0][0])==="object",Ce=Zu({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Zt){if(at==="identity")return[new tr(Zt.key,Zt.value,'identity function may not have a "stops" property')];var xr=[],mr=Zt.value;return xr=xr.concat(tp({key:Zt.key,value:mr,valueSpec:Zt.valueSpec,style:Zt.style,styleSpec:Zt.styleSpec,arrayElementValidator:Ie})),Aa(mr)==="array"&&mr.length===0&&xr.push(new tr(Zt.key,mr,"array must have at least one stop")),xr},default:function(Zt){return vs({key:Zt.key,value:Zt.value,valueSpec:$,style:Zt.style,styleSpec:Zt.styleSpec})}}});return at==="identity"&&Mt&&Ce.push(new tr(l.key,l.value,'missing required property "property"')),at==="identity"||l.value.stops||Ce.push(new tr(l.key,l.value,'missing required property "stops"')),at==="exponential"&&l.valueSpec.expression&&!$o(l.valueSpec)&&Ce.push(new tr(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(oe&&!Ra(l.valueSpec)?Ce.push(new tr(l.key,l.value,"property functions not supported")):Mt&&!ts(l.valueSpec)&&Ce.push(new tr(l.key,l.value,"zoom functions not supported"))),at!=="categorical"&&!ge||l.value.property!==void 0||Ce.push(new tr(l.key,l.value,'"property" property is required')),Ce;function Ie(Zt){var xr=[],mr=Zt.value,jr=Zt.key;if(Aa(mr)!=="array")return[new tr(jr,mr,"array expected, "+Aa(mr)+" found")];if(mr.length!==2)return[new tr(jr,mr,"array length 2 expected, length "+mr.length+" found")];if(ge){if(Aa(mr[0])!=="object")return[new tr(jr,mr,"object expected, "+Aa(mr[0])+" found")];if(mr[0].zoom===void 0)return[new tr(jr,mr,"object stop key must have zoom")];if(mr[0].value===void 0)return[new tr(jr,mr,"object stop key must have value")];if(z&&z>Zr(mr[0].zoom))return[new tr(jr,mr[0].zoom,"stop zoom values must appear in ascending order")];Zr(mr[0].zoom)!==z&&(z=Zr(mr[0].zoom),b=void 0,mt={}),xr=xr.concat(Zu({key:jr+"[0]",value:mr[0],valueSpec:{zoom:{}},style:Zt.style,styleSpec:Zt.styleSpec,objectElementValidators:{zoom:qp,value:Ge}}))}else xr=xr.concat(Ge({key:jr+"[0]",value:mr[0],valueSpec:{},style:Zt.style,styleSpec:Zt.styleSpec},mr));return Bu(tn(mr[1]))?xr.concat([new tr(jr+"[1]",mr[1],"expressions are not allowed in function stops.")]):xr.concat(vs({key:jr+"[1]",value:mr[1],valueSpec:$,style:Zt.style,styleSpec:Zt.styleSpec}))}function Ge(Zt,xr){var mr=Aa(Zt.value),jr=Zr(Zt.value),kr=Zt.value!==null?Zt.value:xr;if(v){if(mr!==v)return[new tr(Zt.key,kr,mr+" stop domain type must match previous stop domain type "+v)]}else v=mr;if(mr!=="number"&&mr!=="string"&&mr!=="boolean")return[new tr(Zt.key,kr,"stop domain value must be a number, string, or boolean")];if(mr!=="number"&&at!=="categorical"){var un="number expected, "+mr+" found";return Ra($)&&at===void 0&&(un+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tr(Zt.key,kr,un)]}return at!=="categorical"||mr!=="number"||isFinite(jr)&&Math.floor(jr)===jr?at!=="categorical"&&mr==="number"&&b!==void 0&&jr<b?[new tr(Zt.key,kr,"stop domain values must appear in ascending order")]:(b=jr,at==="categorical"&&jr in mt?[new tr(Zt.key,kr,"stop domain values must be unique")]:(mt[jr]=!0,[])):[new tr(Zt.key,kr,"integer expected, found "+jr)]}}function Vl(l){var v=(l.expressionContext==="property"?Sh:Cl)(tn(l.value),l.valueSpec);if(v.result==="error")return v.value.map(function(z){return new tr(""+l.key+z.key,l.value,z.message)});var b=v.value.expression||v.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!b.outputDefined())return[new tr(l.key,l.value,'Invalid data expression for "'+l.propertyKey+'". Output values must be contained as literals within the expression.')];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!$s(b))return[new tr(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!$s(b))return[new tr(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!zs(b,["zoom","feature-state"]))return[new tr(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Vs(b))return[new tr(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wh(l){var v=l.key,b=l.value,z=l.valueSpec,$=[];return Array.isArray(z.values)?z.values.indexOf(Zr(b))===-1&&$.push(new tr(v,b,"expected one of ["+z.values.join(", ")+"], "+JSON.stringify(b)+" found")):Object.keys(z.values).indexOf(Zr(b))===-1&&$.push(new tr(v,b,"expected one of ["+Object.keys(z.values).join(", ")+"], "+JSON.stringify(b)+" found")),$}function Ip(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(var v=0,b=l.slice(1);v<b.length;v+=1){var z=b[v];if(!Ip(z)&&typeof z!="boolean")return!1}return!0;default:return!0}}nf.deserialize=function(l){return new nf(l._parameters,l._specification)},nf.serialize=function(l){return{_parameters:l._parameters,_specification:l._specification}};var Jp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Eh(l){if(l==null)return{filter:function(){return!0},needGeometry:!1};Ip(l)||(l=Ch(l));var v=Cl(l,Jp);if(v.result==="error")throw new Error(v.value.map(function(b){return b.key+": "+b.message}).join(", "));return{filter:function(b,z,$){return v.value.evaluate(b,z,{},$)},needGeometry:function b(z){if(!Array.isArray(z))return!1;if(z[0]==="within")return!0;for(var $=1;$<z.length;$++)if(b(z[$]))return!0;return!1}(l)}}function yg(l,v){return l<v?-1:l>v?1:0}function Ch(l){if(!l)return!0;var v,b=l[0];return l.length<=1?b!=="any":b==="=="?Xf(l[1],l[2],"=="):b==="!="?Ft(Xf(l[1],l[2],"==")):b==="<"||b===">"||b==="<="||b===">="?Xf(l[1],l[2],b):b==="any"?(v=l.slice(1),["any"].concat(v.map(Ch))):b==="all"?["all"].concat(l.slice(1).map(Ch)):b==="none"?["all"].concat(l.slice(1).map(Ch).map(Ft)):b==="in"?Op(l[1],l.slice(2)):b==="!in"?Ft(Op(l[1],l.slice(2))):b==="has"?Ah(l[1]):b==="!has"?Ft(Ah(l[1])):b!=="within"||l}function Xf(l,v,b){switch(l){case"$type":return["filter-type-"+b,v];case"$id":return["filter-id-"+b,v];default:return["filter-"+b,l,v]}}function Op(l,v){if(v.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(b){return typeof b!=typeof v[0]})?["filter-in-large",l,["literal",v.sort(yg)]]:["filter-in-small",l,["literal",v]]}}function Ah(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Ft(l){return["!",l]}function Lp(l){return Ip(tn(l.value))?Vl(Xr({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(b){var z=b.value,$=b.key;if(Aa(z)!=="array")return[new tr($,z,"array expected, "+Aa(z)+" found")];var at,mt=b.styleSpec,Mt=[];if(z.length<1)return[new tr($,z,"filter array must have at least 1 element")];switch(Mt=Mt.concat(wh({key:$+"[0]",value:z[0],valueSpec:mt.filter_operator,style:b.style,styleSpec:b.styleSpec})),Zr(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&Zr(z[1])==="$type"&&Mt.push(new tr($,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&Mt.push(new tr($,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(at=Aa(z[1]))!=="string"&&Mt.push(new tr($+"[1]",z[1],"string expected, "+at+" found"));for(var oe=2;oe<z.length;oe++)at=Aa(z[oe]),Zr(z[1])==="$type"?Mt=Mt.concat(wh({key:$+"["+oe+"]",value:z[oe],valueSpec:mt.geometry_type,style:b.style,styleSpec:b.styleSpec})):at!=="string"&&at!=="number"&&at!=="boolean"&&Mt.push(new tr($+"["+oe+"]",z[oe],"string, number, or boolean expected, "+at+" found"));break;case"any":case"all":case"none":for(var ge=1;ge<z.length;ge++)Mt=Mt.concat(v({key:$+"["+ge+"]",value:z[ge],style:b.style,styleSpec:b.styleSpec}));break;case"has":case"!has":at=Aa(z[1]),z.length!==2?Mt.push(new tr($,z,'filter array for "'+z[0]+'" operator must have 2 elements')):at!=="string"&&Mt.push(new tr($+"[1]",z[1],"string expected, "+at+" found"));break;case"within":at=Aa(z[1]),z.length!==2?Mt.push(new tr($,z,'filter array for "'+z[0]+'" operator must have 2 elements')):at!=="object"&&Mt.push(new tr($+"[1]",z[1],"object expected, "+at+" found"))}return Mt}(l)}function Sv(l,v){var b=l.key,z=l.style,$=l.styleSpec,at=l.value,mt=l.objectKey,Mt=$[v+"_"+l.layerType];if(!Mt)return[];var oe=mt.match(/^(.*)-transition$/);if(v==="paint"&&oe&&Mt[oe[1]]&&Mt[oe[1]].transition)return vs({key:b,value:at,valueSpec:$.transition,style:z,styleSpec:$});var ge,Ce=l.valueSpec||Mt[mt];if(!Ce)return[new tr(b,at,'unknown property "'+mt+'"')];if(Aa(at)==="string"&&Ra(Ce)&&!Ce.tokens&&(ge=/^{([^}]+)}$/.exec(at)))return[new tr(b,at,'"'+mt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ge[1])+" }`.")];var Ie=[];return l.layerType==="symbol"&&(mt==="text-field"&&z&&!z.glyphs&&Ie.push(new tr(b,at,'use of "text-field" requires a style "glyphs" property')),mt==="text-font"&&Le(tn(at))&&Zr(at.type)==="identity"&&Ie.push(new tr(b,at,'"text-font" does not support identity functions'))),Ie.concat(vs({key:l.key,value:at,valueSpec:Ce,style:z,styleSpec:$,expressionContext:"property",propertyType:v,propertyKey:mt}))}function wv(l){return Sv(l,"paint")}function ep(l){return Sv(l,"layout")}function Ev(l){var v=[],b=l.value,z=l.key,$=l.style,at=l.styleSpec;b.type||b.ref||v.push(new tr(z,b,'either "type" or "ref" is required'));var mt,Mt=Zr(b.type),oe=Zr(b.ref);if(b.id)for(var ge=Zr(b.id),Ce=0;Ce<l.arrayIndex;Ce++){var Ie=$.layers[Ce];Zr(Ie.id)===ge&&v.push(new tr(z,b.id,'duplicate layer id "'+b.id+'", previously used at line '+Ie.id.__line__))}if("ref"in b)["type","source","source-layer","filter","layout"].forEach(function(xr){xr in b&&v.push(new tr(z,b[xr],'"'+xr+'" is prohibited for ref layers'))}),$.layers.forEach(function(xr){Zr(xr.id)===oe&&(mt=xr)}),mt?mt.ref?v.push(new tr(z,b.ref,"ref cannot reference another ref layer")):Mt=Zr(mt.type):v.push(new tr(z,b.ref,'ref layer "'+oe+'" not found'));else if(Mt!=="background")if(b.source){var Ge=$.sources&&$.sources[b.source],Zt=Ge&&Zr(Ge.type);Ge?Zt==="vector"&&Mt==="raster"?v.push(new tr(z,b.source,'layer "'+b.id+'" requires a raster source')):Zt==="raster"&&Mt!=="raster"?v.push(new tr(z,b.source,'layer "'+b.id+'" requires a vector source')):Zt!=="vector"||b["source-layer"]?Zt==="raster-dem"&&Mt!=="hillshade"?v.push(new tr(z,b.source,"raster-dem source can only be used with layer type 'hillshade'.")):Mt!=="line"||!b.paint||!b.paint["line-gradient"]||Zt==="geojson"&&Ge.lineMetrics||v.push(new tr(z,b,'layer "'+b.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new tr(z,b,'layer "'+b.id+'" must specify a "source-layer"')):v.push(new tr(z,b.source,'source "'+b.source+'" not found'))}else v.push(new tr(z,b,'missing required property "source"'));return v=v.concat(Zu({key:z,value:b,valueSpec:at.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vs({key:z+".type",value:b.type,valueSpec:at.layer.type,style:l.style,styleSpec:l.styleSpec,object:b,objectKey:"type"})},filter:Lp,layout:function(xr){return Zu({layer:b,key:xr.key,value:xr.value,style:xr.style,styleSpec:xr.styleSpec,objectElementValidators:{"*":function(mr){return ep(Xr({layerType:Mt},mr))}}})},paint:function(xr){return Zu({layer:b,key:xr.key,value:xr.value,style:xr.style,styleSpec:xr.styleSpec,objectElementValidators:{"*":function(mr){return wv(Xr({layerType:Mt},mr))}}})}}}))}function wf(l){var v=l.value,b=l.key,z=Aa(v);return z!=="string"?[new tr(b,v,"string expected, "+z+" found")]:[]}var Ms={promoteId:function(l){var v=l.key,b=l.value;if(Aa(b)==="string")return wf({key:v,value:b});var z=[];for(var $ in b)z.push.apply(z,wf({key:v+"."+$,value:b[$]}));return z}};function rp(l){var v=l.value,b=l.key,z=l.styleSpec,$=l.style;if(!v.type)return[new tr(b,v,'"type" is required')];var at,mt=Zr(v.type);switch(mt){case"vector":case"raster":case"raster-dem":return Zu({key:b,value:v,valueSpec:z["source_"+mt.replace("-","_")],style:l.style,styleSpec:z,objectElementValidators:Ms});case"geojson":if(at=Zu({key:b,value:v,valueSpec:z.source_geojson,style:$,styleSpec:z,objectElementValidators:Ms}),v.cluster)for(var Mt in v.clusterProperties){var oe=v.clusterProperties[Mt],ge=oe[0],Ce=typeof ge=="string"?[ge,["accumulated"],["get",Mt]]:ge;at.push.apply(at,Vl({key:b+"."+Mt+".map",value:oe[1],expressionContext:"cluster-map"})),at.push.apply(at,Vl({key:b+"."+Mt+".reduce",value:Ce,expressionContext:"cluster-reduce"}))}return at;case"video":return Zu({key:b,value:v,valueSpec:z.source_video,style:$,styleSpec:z});case"image":return Zu({key:b,value:v,valueSpec:z.source_image,style:$,styleSpec:z});case"canvas":return[new tr(b,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wh({key:b+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:$,styleSpec:z})}}function Ds(l){var v=l.value,b=l.styleSpec,z=b.light,$=l.style,at=[],mt=Aa(v);if(v===void 0)return at;if(mt!=="object")return at.concat([new tr("light",v,"object expected, "+mt+" found")]);for(var Mt in v){var oe=Mt.match(/^(.*)-transition$/);at=at.concat(oe&&z[oe[1]]&&z[oe[1]].transition?vs({key:Mt,value:v[Mt],valueSpec:b.transition,style:$,styleSpec:b}):z[Mt]?vs({key:Mt,value:v[Mt],valueSpec:z[Mt],style:$,styleSpec:b}):[new tr(Mt,v[Mt],'unknown property "'+Mt+'"')])}return at}var af={"*":function(){return[]},array:tp,boolean:function(l){var v=l.value,b=l.key,z=Aa(v);return z!=="boolean"?[new tr(b,v,"boolean expected, "+z+" found")]:[]},number:qp,color:function(l){var v=l.key,b=l.value,z=Aa(b);return z!=="string"?[new tr(v,b,"color expected, "+z+" found")]:fo(b)===null?[new tr(v,b,'color expected, "'+b+'" found')]:[]},constants:Mr,enum:wh,filter:Lp,function:Md,layer:Ev,object:Zu,source:rp,light:Ds,string:wf,formatted:function(l){return wf(l).length===0?[]:Vl(l)},resolvedImage:function(l){return wf(l).length===0?[]:Vl(l)}};function vs(l){var v=l.value,b=l.valueSpec,z=l.styleSpec;return b.expression&&Le(Zr(v))?Md(l):b.expression&&Bu(tn(v))?Vl(l):b.type&&af[b.type]?af[b.type](l):Zu(Xr({},l,{valueSpec:b.type?z[b.type]:b}))}function Qs(l){var v=l.value,b=l.key,z=wf(l);return z.length||(v.indexOf("{fontstack}")===-1&&z.push(new tr(b,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&z.push(new tr(b,v,'"glyphs" url must include a "{range}" token'))),z}function ks(l,v){v===void 0&&(v=Be);var b=[];return b=b.concat(vs({key:"",value:l,valueSpec:v.$root,styleSpec:v,style:l,objectElementValidators:{glyphs:Qs,"*":function(){return[]}}})),l.constants&&(b=b.concat(Mr({key:"constants",value:l.constants,style:l,styleSpec:v}))),of(b)}function of(l){return[].concat(l).sort(function(v,b){return v.line-b.line})}function Ef(l){return function(){for(var v=[],b=arguments.length;b--;)v[b]=arguments[b];return of(l.apply(this,v))}}ks.source=Ef(rp),ks.light=Ef(Ds),ks.layer=Ef(Ev),ks.filter=Ef(Lp),ks.paintProperty=Ef(wv),ks.layoutProperty=Ef(ep);var lu=ks,np=lu.light,Yf=lu.paintProperty,fc=lu.layoutProperty;function kp(l,v){var b=!1;if(v&&v.length)for(var z=0,$=v;z<$.length;z+=1)l.fire(new or(new Error($[z].message))),b=!0;return b}var sf=Hu;function Hu(l,v,b){var z=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var $=new Int32Array(this.arrayBuffer);l=$[0],this.d=(v=$[1])+2*(b=$[2]);for(var at=0;at<this.d*this.d;at++){var mt=$[3+at],Mt=$[3+at+1];z.push(mt===Mt?null:$.subarray(mt,Mt))}var oe=$[3+z.length+1];this.keys=$.subarray($[3+z.length],oe),this.bboxes=$.subarray(oe),this.insert=this._insertReadonly}else{this.d=v+2*b;for(var ge=0;ge<this.d*this.d;ge++)z.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=l,this.padding=b,this.scale=v/l,this.uid=0;var Ce=b/v*l;this.min=-Ce,this.max=l+Ce}Hu.prototype.insert=function(l,v,b,z,$){this._forEachCell(v,b,z,$,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(z),this.bboxes.push($)},Hu.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hu.prototype._insertCell=function(l,v,b,z,$,at){this.cells[$].push(at)},Hu.prototype.query=function(l,v,b,z,$){var at=this.min,mt=this.max;if(l<=at&&v<=at&&mt<=b&&mt<=z&&!$)return Array.prototype.slice.call(this.keys);var Mt=[];return this._forEachCell(l,v,b,z,this._queryCell,Mt,{},$),Mt},Hu.prototype._queryCell=function(l,v,b,z,$,at,mt,Mt){var oe=this.cells[$];if(oe!==null)for(var ge=this.keys,Ce=this.bboxes,Ie=0;Ie<oe.length;Ie++){var Ge=oe[Ie];if(mt[Ge]===void 0){var Zt=4*Ge;(Mt?Mt(Ce[Zt+0],Ce[Zt+1],Ce[Zt+2],Ce[Zt+3]):l<=Ce[Zt+2]&&v<=Ce[Zt+3]&&b>=Ce[Zt+0]&&z>=Ce[Zt+1])?(mt[Ge]=!0,at.push(ge[Ge])):mt[Ge]=!1}}},Hu.prototype._forEachCell=function(l,v,b,z,$,at,mt,Mt){for(var oe=this._convertToCellCoord(l),ge=this._convertToCellCoord(v),Ce=this._convertToCellCoord(b),Ie=this._convertToCellCoord(z),Ge=oe;Ge<=Ce;Ge++)for(var Zt=ge;Zt<=Ie;Zt++){var xr=this.d*Zt+Ge;if((!Mt||Mt(this._convertFromCellCoord(Ge),this._convertFromCellCoord(Zt),this._convertFromCellCoord(Ge+1),this._convertFromCellCoord(Zt+1)))&&$.call(this,l,v,b,z,xr,at,mt,Mt))return}},Hu.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},Hu.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},Hu.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,v=3+this.cells.length+1+1,b=0,z=0;z<this.cells.length;z++)b+=this.cells[z].length;var $=new Int32Array(v+b+this.keys.length+this.bboxes.length);$[0]=this.extent,$[1]=this.n,$[2]=this.padding;for(var at=v,mt=0;mt<l.length;mt++){var Mt=l[mt];$[3+mt]=at,$.set(Mt,at),at+=Mt.length}return $[3+l.length]=at,$.set(this.keys,at),$[3+l.length+1]=at+=this.keys.length,$.set(this.bboxes,at),at+=this.bboxes.length,$.buffer};var Wf=A.ImageData,Mh=A.ImageBitmap,Fu={};function Ma(l,v,b){b===void 0&&(b={}),Object.defineProperty(v,"_classRegistryKey",{value:l,writeable:!1}),Fu[l]={klass:v,omit:b.omit||[],shallow:b.shallow||[]}}for(var pu in Ma("Object",Object),sf.serialize=function(l,v){var b=l.toArrayBuffer();return v&&v.push(b),{buffer:b}},sf.deserialize=function(l){return new sf(l.buffer)},Ma("Grid",sf),Ma("Color",Po),Ma("Error",Error),Ma("ResolvedImage",Pe),Ma("StylePropertyFunction",nf),Ma("StyleExpression",As,{omit:["_evaluator"]}),Ma("ZoomDependentExpression",zc),Ma("ZoomConstantExpression",Al),Ma("CompoundExpression",pi,{omit:["_evaluate"]}),Er)Er[pu]._classRegistryKey||Ma("Expression_"+pu,Er[pu]);function uf(l){return l&&typeof ArrayBuffer!="undefined"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Gs(l){return Mh&&l instanceof Mh}function ql(l,v){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(uf(l)||Gs(l))return v&&v.push(l),l;if(ArrayBuffer.isView(l)){var b=l;return v&&v.push(b.buffer),b}if(l instanceof Wf)return v&&v.push(l.data.buffer),l;if(Array.isArray(l)){for(var z=[],$=0,at=l;$<at.length;$+=1)z.push(ql(at[$],v));return z}if(typeof l=="object"){var mt=l.constructor,Mt=mt._classRegistryKey;if(!Mt)throw new Error("can't serialize object of unregistered class");var oe=mt.serialize?mt.serialize(l,v):{};if(!mt.serialize){for(var ge in l)if(l.hasOwnProperty(ge)&&!(Fu[Mt].omit.indexOf(ge)>=0)){var Ce=l[ge];oe[ge]=Fu[Mt].shallow.indexOf(ge)>=0?Ce:ql(Ce,v)}l instanceof Error&&(oe.message=l.message)}if(oe.$name)throw new Error("$name property is reserved for worker serialization logic.");return Mt!=="Object"&&(oe.$name=Mt),oe}throw new Error("can't serialize object of type "+typeof l)}function oc(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||uf(l)||Gs(l)||ArrayBuffer.isView(l)||l instanceof Wf)return l;if(Array.isArray(l))return l.map(oc);if(typeof l=="object"){var v=l.$name||"Object",b=Fu[v].klass;if(!b)throw new Error("can't deserialize unregistered class "+v);if(b.deserialize)return b.deserialize(l);for(var z=Object.create(b.prototype),$=0,at=Object.keys(l);$<at.length;$+=1){var mt=at[$];if(mt!=="$name"){var Mt=l[mt];z[mt]=Fu[v].shallow.indexOf(mt)>=0?Mt:oc(Mt)}}return z}throw new Error("can't deserialize object of type "+typeof l)}var td=function(){this.first=!0};td.prototype.update=function(l,v){var b=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=v),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=b,!0))};var Qi={"Latin-1 Supplement":function(l){return l>=128&&l<=255},Arabic:function(l){return l>=1536&&l<=1791},"Arabic Supplement":function(l){return l>=1872&&l<=1919},"Arabic Extended-A":function(l){return l>=2208&&l<=2303},"Hangul Jamo":function(l){return l>=4352&&l<=4607},"Unified Canadian Aboriginal Syllabics":function(l){return l>=5120&&l<=5759},Khmer:function(l){return l>=6016&&l<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(l){return l>=6320&&l<=6399},"General Punctuation":function(l){return l>=8192&&l<=8303},"Letterlike Symbols":function(l){return l>=8448&&l<=8527},"Number Forms":function(l){return l>=8528&&l<=8591},"Miscellaneous Technical":function(l){return l>=8960&&l<=9215},"Control Pictures":function(l){return l>=9216&&l<=9279},"Optical Character Recognition":function(l){return l>=9280&&l<=9311},"Enclosed Alphanumerics":function(l){return l>=9312&&l<=9471},"Geometric Shapes":function(l){return l>=9632&&l<=9727},"Miscellaneous Symbols":function(l){return l>=9728&&l<=9983},"Miscellaneous Symbols and Arrows":function(l){return l>=11008&&l<=11263},"CJK Radicals Supplement":function(l){return l>=11904&&l<=12031},"Kangxi Radicals":function(l){return l>=12032&&l<=12255},"Ideographic Description Characters":function(l){return l>=12272&&l<=12287},"CJK Symbols and Punctuation":function(l){return l>=12288&&l<=12351},Hiragana:function(l){return l>=12352&&l<=12447},Katakana:function(l){return l>=12448&&l<=12543},Bopomofo:function(l){return l>=12544&&l<=12591},"Hangul Compatibility Jamo":function(l){return l>=12592&&l<=12687},Kanbun:function(l){return l>=12688&&l<=12703},"Bopomofo Extended":function(l){return l>=12704&&l<=12735},"CJK Strokes":function(l){return l>=12736&&l<=12783},"Katakana Phonetic Extensions":function(l){return l>=12784&&l<=12799},"Enclosed CJK Letters and Months":function(l){return l>=12800&&l<=13055},"CJK Compatibility":function(l){return l>=13056&&l<=13311},"CJK Unified Ideographs Extension A":function(l){return l>=13312&&l<=19903},"Yijing Hexagram Symbols":function(l){return l>=19904&&l<=19967},"CJK Unified Ideographs":function(l){return l>=19968&&l<=40959},"Yi Syllables":function(l){return l>=40960&&l<=42127},"Yi Radicals":function(l){return l>=42128&&l<=42191},"Hangul Jamo Extended-A":function(l){return l>=43360&&l<=43391},"Hangul Syllables":function(l){return l>=44032&&l<=55215},"Hangul Jamo Extended-B":function(l){return l>=55216&&l<=55295},"Private Use Area":function(l){return l>=57344&&l<=63743},"CJK Compatibility Ideographs":function(l){return l>=63744&&l<=64255},"Arabic Presentation Forms-A":function(l){return l>=64336&&l<=65023},"Vertical Forms":function(l){return l>=65040&&l<=65055},"CJK Compatibility Forms":function(l){return l>=65072&&l<=65103},"Small Form Variants":function(l){return l>=65104&&l<=65135},"Arabic Presentation Forms-B":function(l){return l>=65136&&l<=65279},"Halfwidth and Fullwidth Forms":function(l){return l>=65280&&l<=65519}};function Ec(l){for(var v=0,b=l;v<b.length;v+=1)if(ws(b[v].charCodeAt(0)))return!0;return!1}function ws(l){return!(l!==746&&l!==747&&(l<4352||!(Qi["Bopomofo Extended"](l)||Qi.Bopomofo(l)||Qi["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Qi["CJK Compatibility Ideographs"](l)||Qi["CJK Compatibility"](l)||Qi["CJK Radicals Supplement"](l)||Qi["CJK Strokes"](l)||!(!Qi["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Qi["CJK Unified Ideographs Extension A"](l)||Qi["CJK Unified Ideographs"](l)||Qi["Enclosed CJK Letters and Months"](l)||Qi["Hangul Compatibility Jamo"](l)||Qi["Hangul Jamo Extended-A"](l)||Qi["Hangul Jamo Extended-B"](l)||Qi["Hangul Jamo"](l)||Qi["Hangul Syllables"](l)||Qi.Hiragana(l)||Qi["Ideographic Description Characters"](l)||Qi.Kanbun(l)||Qi["Kangxi Radicals"](l)||Qi["Katakana Phonetic Extensions"](l)||Qi.Katakana(l)&&l!==12540||!(!Qi["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Qi["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Qi["Unified Canadian Aboriginal Syllabics"](l)||Qi["Unified Canadian Aboriginal Syllabics Extended"](l)||Qi["Vertical Forms"](l)||Qi["Yijing Hexagram Symbols"](l)||Qi["Yi Syllables"](l)||Qi["Yi Radicals"](l))))}function lf(l){return!(ws(l)||function(v){return!!(Qi["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Qi["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Qi["Letterlike Symbols"](v)||Qi["Number Forms"](v)||Qi["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Qi["Control Pictures"](v)&&v!==9251||Qi["Optical Character Recognition"](v)||Qi["Enclosed Alphanumerics"](v)||Qi["Geometric Shapes"](v)||Qi["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Qi["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Qi["CJK Symbols and Punctuation"](v)||Qi.Katakana(v)||Qi["Private Use Area"](v)||Qi["CJK Compatibility Forms"](v)||Qi["Small Form Variants"](v)||Qi["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(l))}function Js(l){return l>=1424&&l<=2303||Qi["Arabic Presentation Forms-A"](l)||Qi["Arabic Presentation Forms-B"](l)}function Zl(l,v){return!(!v&&Js(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Qi.Khmer(l))}function Kf(l){for(var v=0,b=l;v<b.length;v+=1)if(Js(b[v].charCodeAt(0)))return!0;return!1}var cf=null,hc="unavailable",Rl=null,ip=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(hc="error"),cf&&cf(l)};function ff(){ed.fire(new Ze("pluginStateChange",{pluginStatus:hc,pluginURL:Rl}))}var ed=new lr,Td=function(){return hc},Gc=function(){if(hc!=="deferred"||!Rl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hc="loading",ff(),Rl&&nn({url:Rl},function(l){l?ip(l):(hc="loaded",ff())})},sc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return hc==="loaded"||sc.applyArabicShaping!=null},isLoading:function(){return hc==="loading"},setState:function(l){hc=l.pluginStatus,Rl=l.pluginURL},isParsed:function(){return sc.applyArabicShaping!=null&&sc.processBidirectionalText!=null&&sc.processStyledBidirectionalText!=null},getPluginURL:function(){return Rl}},Qo=function(l,v){this.zoom=l,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new td,this.transition={})};Qo.prototype.isSupportedScript=function(l){return function(v,b){for(var z=0,$=v;z<$.length;z+=1)if(!Zl($[z].charCodeAt(0),b))return!1;return!0}(l,sc.isLoaded())},Qo.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Qo.prototype.getCrossfadeParameters=function(){var l=this.zoom,v=l-Math.floor(l),b=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*v}};var hf=function(l,v){this.property=l,this.value=v,this.expression=function(b,z){if(Le(b))return new nf(b,z);if(Bu(b)){var $=Sh(b,z);if($.result==="error")throw new Error($.value.map(function(mt){return mt.key+": "+mt.message}).join(", "));return $.value}var at=b;return typeof b=="string"&&z.type==="color"&&(at=Po.parse(b)),{kind:"constant",evaluate:function(){return at}}}(v===void 0?l.specification.default:v,l.specification)};hf.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},hf.prototype.possiblyEvaluate=function(l,v,b){return this.property.possiblyEvaluate(this,l,v,b)};var Uc=function(l){this.property=l,this.value=new hf(l,void 0)};Uc.prototype.transitioned=function(l,v){return new $f(this.property,this.value,v,X({},l.transition,this.transition),l.now)},Uc.prototype.untransitioned=function(){return new $f(this.property,this.value,null,{},0)};var $u=function(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)};$u.prototype.getValue=function(l){return Gt(this._values[l].value.value)},$u.prototype.setValue=function(l,v){this._values.hasOwnProperty(l)||(this._values[l]=new Uc(this._values[l].property)),this._values[l].value=new hf(this._values[l].property,v===null?void 0:Gt(v))},$u.prototype.getTransition=function(l){return Gt(this._values[l].transition)},$u.prototype.setTransition=function(l,v){this._values.hasOwnProperty(l)||(this._values[l]=new Uc(this._values[l].property)),this._values[l].transition=Gt(v)||void 0},$u.prototype.serialize=function(){for(var l={},v=0,b=Object.keys(this._values);v<b.length;v+=1){var z=b[v],$=this.getValue(z);$!==void 0&&(l[z]=$);var at=this.getTransition(z);at!==void 0&&(l[z+"-transition"]=at)}return l},$u.prototype.transitioned=function(l,v){for(var b=new Hl(this._properties),z=0,$=Object.keys(this._values);z<$.length;z+=1){var at=$[z];b._values[at]=this._values[at].transitioned(l,v._values[at])}return b},$u.prototype.untransitioned=function(){for(var l=new Hl(this._properties),v=0,b=Object.keys(this._values);v<b.length;v+=1){var z=b[v];l._values[z]=this._values[z].untransitioned()}return l};var $f=function(l,v,b,z,$){this.property=l,this.value=v,this.begin=$+z.delay||0,this.end=this.begin+z.duration||0,l.specification.transition&&(z.delay||z.duration)&&(this.prior=b)};$f.prototype.possiblyEvaluate=function(l,v,b){var z=l.now||0,$=this.value.possiblyEvaluate(l,v,b),at=this.prior;if(at){if(z>this.end)return this.prior=null,$;if(this.value.isDataDriven())return this.prior=null,$;if(z<this.begin)return at.possiblyEvaluate(l,v,b);var mt=(z-this.begin)/(this.end-this.begin);return this.property.interpolate(at.possiblyEvaluate(l,v,b),$,function(Mt){if(Mt<=0)return 0;if(Mt>=1)return 1;var oe=Mt*Mt,ge=oe*Mt;return 4*(Mt<.5?ge:3*(Mt-oe)+ge-.75)}(mt))}return $};var Hl=function(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)};Hl.prototype.possiblyEvaluate=function(l,v,b){for(var z=new Qu(this._properties),$=0,at=Object.keys(this._values);$<at.length;$+=1){var mt=at[$];z._values[mt]=this._values[mt].possiblyEvaluate(l,v,b)}return z},Hl.prototype.hasTransition=function(){for(var l=0,v=Object.keys(this._values);l<v.length;l+=1)if(this._values[v[l]].prior)return!0;return!1};var Ml=function(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)};Ml.prototype.getValue=function(l){return Gt(this._values[l].value)},Ml.prototype.setValue=function(l,v){this._values[l]=new hf(this._values[l].property,v===null?void 0:Gt(v))},Ml.prototype.serialize=function(){for(var l={},v=0,b=Object.keys(this._values);v<b.length;v+=1){var z=b[v],$=this.getValue(z);$!==void 0&&(l[z]=$)}return l},Ml.prototype.possiblyEvaluate=function(l,v,b){for(var z=new Qu(this._properties),$=0,at=Object.keys(this._values);$<at.length;$+=1){var mt=at[$];z._values[mt]=this._values[mt].possiblyEvaluate(l,v,b)}return z};var cs=function(l,v,b){this.property=l,this.value=v,this.parameters=b};cs.prototype.isConstant=function(){return this.value.kind==="constant"},cs.prototype.constantOr=function(l){return this.value.kind==="constant"?this.value.value:l},cs.prototype.evaluate=function(l,v,b,z){return this.property.evaluate(this.value,this.parameters,l,v,b,z)};var Qu=function(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)};Qu.prototype.get=function(l){return this._values[l]};var Wa=function(l){this.specification=l};Wa.prototype.possiblyEvaluate=function(l,v){return l.expression.evaluate(v)},Wa.prototype.interpolate=function(l,v,b){var z=Ko[this.specification.type];return z?z(l,v,b):l};var za=function(l,v){this.specification=l,this.overrides=v};za.prototype.possiblyEvaluate=function(l,v,b,z){return new cs(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(v,null,{},b,z)}:l.expression,v)},za.prototype.interpolate=function(l,v,b){if(l.value.kind!=="constant"||v.value.kind!=="constant")return l;if(l.value.value===void 0||v.value.value===void 0)return new cs(this,{kind:"constant",value:void 0},l.parameters);var z=Ko[this.specification.type];return z?new cs(this,{kind:"constant",value:z(l.value.value,v.value.value,b)},l.parameters):l},za.prototype.evaluate=function(l,v,b,z,$,at){return l.kind==="constant"?l.value:l.evaluate(v,b,z,$,at)};var qu=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(b,z,$,at){if(b.value===void 0)return new cs(this,{kind:"constant",value:void 0},z);if(b.expression.kind==="constant"){var mt=b.expression.evaluate(z,null,{},$,at),Mt=b.property.specification.type==="resolvedImage"&&typeof mt!="string"?mt.name:mt,oe=this._calculate(Mt,Mt,Mt,z);return new cs(this,{kind:"constant",value:oe},z)}if(b.expression.kind==="camera"){var ge=this._calculate(b.expression.evaluate({zoom:z.zoom-1}),b.expression.evaluate({zoom:z.zoom}),b.expression.evaluate({zoom:z.zoom+1}),z);return new cs(this,{kind:"constant",value:ge},z)}return new cs(this,b.expression,z)},v.prototype.evaluate=function(b,z,$,at,mt,Mt){if(b.kind==="source"){var oe=b.evaluate(z,$,at,mt,Mt);return this._calculate(oe,oe,oe,z)}return b.kind==="composite"?this._calculate(b.evaluate({zoom:Math.floor(z.zoom)-1},$,at),b.evaluate({zoom:Math.floor(z.zoom)},$,at),b.evaluate({zoom:Math.floor(z.zoom)+1},$,at),z):b.value},v.prototype._calculate=function(b,z,$,at){return at.zoom>at.zoomHistory.lastIntegerZoom?{from:b,to:z}:{from:$,to:z}},v.prototype.interpolate=function(b){return b},v}(za),Zo=function(l){this.specification=l};Zo.prototype.possiblyEvaluate=function(l,v,b,z){if(l.value!==void 0){if(l.expression.kind==="constant"){var $=l.expression.evaluate(v,null,{},b,z);return this._calculate($,$,$,v)}return this._calculate(l.expression.evaluate(new Qo(Math.floor(v.zoom-1),v)),l.expression.evaluate(new Qo(Math.floor(v.zoom),v)),l.expression.evaluate(new Qo(Math.floor(v.zoom+1),v)),v)}},Zo.prototype._calculate=function(l,v,b,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:l,to:v}:{from:b,to:v}},Zo.prototype.interpolate=function(l){return l};var uc=function(l){this.specification=l};uc.prototype.possiblyEvaluate=function(l,v,b,z){return!!l.expression.evaluate(v,null,{},b,z)},uc.prototype.interpolate=function(){return!1};var Rs=function(l){for(var v in this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],l){var b=l[v];b.specification.overridable&&this.overridableProperties.push(v);var z=this.defaultPropertyValues[v]=new hf(b,void 0),$=this.defaultTransitionablePropertyValues[v]=new Uc(b);this.defaultTransitioningPropertyValues[v]=$.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=z.possiblyEvaluate({})}};Ma("DataDrivenProperty",za),Ma("DataConstantProperty",Wa),Ma("CrossFadedDataDrivenProperty",qu),Ma("CrossFadedProperty",Zo),Ma("ColorRampProperty",uc);var gs=function(l){function v(b,z){if(l.call(this),this.id=b.id,this.type=b.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},b.type!=="custom"&&(this.metadata=(b=b).metadata,this.minzoom=b.minzoom,this.maxzoom=b.maxzoom,b.type!=="background"&&(this.source=b.source,this.sourceLayer=b["source-layer"],this.filter=b.filter),z.layout&&(this._unevaluatedLayout=new Ml(z.layout)),z.paint)){for(var $ in this._transitionablePaint=new $u(z.paint),b.paint)this.setPaintProperty($,b.paint[$],{validate:!1});for(var at in b.layout)this.setLayoutProperty(at,b.layout[at],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qu(z.paint)}}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(b){return b==="visibility"?this.visibility:this._unevaluatedLayout.getValue(b)},v.prototype.setLayoutProperty=function(b,z,$){$===void 0&&($={}),z!=null&&this._validate(fc,"layers."+this.id+".layout."+b,b,z,$)||(b!=="visibility"?this._unevaluatedLayout.setValue(b,z):this.visibility=z)},v.prototype.getPaintProperty=function(b){return lt(b,"-transition")?this._transitionablePaint.getTransition(b.slice(0,-"-transition".length)):this._transitionablePaint.getValue(b)},v.prototype.setPaintProperty=function(b,z,$){if($===void 0&&($={}),z!=null&&this._validate(Yf,"layers."+this.id+".paint."+b,b,z,$))return!1;if(lt(b,"-transition"))return this._transitionablePaint.setTransition(b.slice(0,-"-transition".length),z||void 0),!1;var at=this._transitionablePaint._values[b],mt=at.property.specification["property-type"]==="cross-faded-data-driven",Mt=at.value.isDataDriven(),oe=at.value;this._transitionablePaint.setValue(b,z),this._handleSpecialPaintPropertyUpdate(b);var ge=this._transitionablePaint._values[b].value;return ge.isDataDriven()||Mt||mt||this._handleOverridablePaintPropertyUpdate(b,oe,ge)},v.prototype._handleSpecialPaintPropertyUpdate=function(b){},v.prototype._handleOverridablePaintPropertyUpdate=function(b,z,$){return!1},v.prototype.isHidden=function(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(b,z){b.getCrossfadeParameters&&(this._crossfadeParameters=b.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b,void 0,z)),this.paint=this._transitioningPaint.possiblyEvaluate(b,void 0,z)},v.prototype.serialize=function(){var b={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(b.layout=b.layout||{},b.layout.visibility=this.visibility),wt(b,function(z,$){return!(z===void 0||$==="layout"&&!Object.keys(z).length||$==="paint"&&!Object.keys(z).length)})},v.prototype._validate=function(b,z,$,at,mt){return mt===void 0&&(mt={}),(!mt||mt.validate!==!1)&&kp(this,b.call(lu,{key:z,layerType:this.type,objectKey:$,value:at,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var b in this.paint._values){var z=this.paint.get(b);if(z instanceof cs&&Ra(z.property.specification)&&(z.value.kind==="source"||z.value.kind==="composite")&&z.value.isStateDependent)return!0}return!1},v}(lr),rd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nd=function(l,v){this._structArray=l,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Zs=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hs(l,v){v===void 0&&(v=1);var b=0,z=0;return{members:l.map(function($){var at=rd[$.type].BYTES_PER_ELEMENT,mt=b=Cv(b,Math.max(v,at)),Mt=$.components||1;return z=Math.max(z,at),b+=at*Mt,{name:$.name,type:$.type,components:Mt,offset:mt}}),size:Cv(b,Math.max(z,v)),alignment:v}}function Cv(l,v){return Math.ceil(l/v)*v}Zs.serialize=function(l,v){return l._trim(),v&&(l.isTransferred=!0,v.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}},Zs.deserialize=function(l){var v=Object.create(this.prototype);return v.arrayBuffer=l.arrayBuffer,v.length=l.length,v.capacity=l.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},Zs.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Zs.prototype.clear=function(){this.length=0},Zs.prototype.resize=function(l){this.reserve(l),this.length=l},Zs.prototype.reserve=function(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},Zs.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Cf=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z){var $=this.length;return this.resize($+1),this.emplace($,b,z)},v.prototype.emplace=function(b,z,$){var at=2*b;return this.int16[at+0]=z,this.int16[at+1]=$,b},v}(Zs);Cf.prototype.bytesPerElement=4,Ma("StructArrayLayout2i4",Cf);var Vc=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,b,z,$,at)},v.prototype.emplace=function(b,z,$,at,mt){var Mt=4*b;return this.int16[Mt+0]=z,this.int16[Mt+1]=$,this.int16[Mt+2]=at,this.int16[Mt+3]=mt,b},v}(Zs);Vc.prototype.bytesPerElement=8,Ma("StructArrayLayout4i8",Vc);var as=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,b,z,$,at,mt,Mt)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe){var ge=6*b;return this.int16[ge+0]=z,this.int16[ge+1]=$,this.int16[ge+2]=at,this.int16[ge+3]=mt,this.int16[ge+4]=Mt,this.int16[ge+5]=oe,b},v}(Zs);as.prototype.bytesPerElement=12,Ma("StructArrayLayout2i4i12",as);var gu=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,b,z,$,at,mt,Mt)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe){var ge=4*b,Ce=8*b;return this.int16[ge+0]=z,this.int16[ge+1]=$,this.uint8[Ce+4]=at,this.uint8[Ce+5]=mt,this.uint8[Ce+6]=Mt,this.uint8[Ce+7]=oe,b},v}(Zs);gu.prototype.bytesPerElement=8,Ma("StructArrayLayout2i4ub8",gu);var pc=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z){var $=this.length;return this.resize($+1),this.emplace($,b,z)},v.prototype.emplace=function(b,z,$){var at=2*b;return this.float32[at+0]=z,this.float32[at+1]=$,b},v}(Zs);pc.prototype.bytesPerElement=8,Ma("StructArrayLayout2f8",pc);var dc=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie){var Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,b,z,$,at,mt,Mt,oe,ge,Ce,Ie)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge){var Zt=10*b;return this.uint16[Zt+0]=z,this.uint16[Zt+1]=$,this.uint16[Zt+2]=at,this.uint16[Zt+3]=mt,this.uint16[Zt+4]=Mt,this.uint16[Zt+5]=oe,this.uint16[Zt+6]=ge,this.uint16[Zt+7]=Ce,this.uint16[Zt+8]=Ie,this.uint16[Zt+9]=Ge,b},v}(Zs);dc.prototype.bytesPerElement=20,Ma("StructArrayLayout10ui20",dc);var Th=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt){var xr=this.length;return this.resize(xr+1),this.emplace(xr,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr){var mr=12*b;return this.int16[mr+0]=z,this.int16[mr+1]=$,this.int16[mr+2]=at,this.int16[mr+3]=mt,this.uint16[mr+4]=Mt,this.uint16[mr+5]=oe,this.uint16[mr+6]=ge,this.uint16[mr+7]=Ce,this.int16[mr+8]=Ie,this.int16[mr+9]=Ge,this.int16[mr+10]=Zt,this.int16[mr+11]=xr,b},v}(Zs);Th.prototype.bytesPerElement=24,Ma("StructArrayLayout4i4ui4i24",Th);var Af=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$){var at=this.length;return this.resize(at+1),this.emplace(at,b,z,$)},v.prototype.emplace=function(b,z,$,at){var mt=3*b;return this.float32[mt+0]=z,this.float32[mt+1]=$,this.float32[mt+2]=at,b},v}(Zs);Af.prototype.bytesPerElement=12,Ma("StructArrayLayout3f12",Af);var Ph=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b){var z=this.length;return this.resize(z+1),this.emplace(z,b)},v.prototype.emplace=function(b,z){return this.uint32[1*b+0]=z,b},v}(Zs);Ph.prototype.bytesPerElement=4,Ma("StructArrayLayout1ul4",Ph);var ju=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt,oe,ge,Ce){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,b,z,$,at,mt,Mt,oe,ge,Ce)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie){var Ge=10*b,Zt=5*b;return this.int16[Ge+0]=z,this.int16[Ge+1]=$,this.int16[Ge+2]=at,this.int16[Ge+3]=mt,this.int16[Ge+4]=Mt,this.int16[Ge+5]=oe,this.uint32[Zt+3]=ge,this.uint16[Ge+8]=Ce,this.uint16[Ge+9]=Ie,b},v}(Zs);ju.prototype.bytesPerElement=20,Ma("StructArrayLayout6i1ul2ui20",ju);var ap=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,b,z,$,at,mt,Mt)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe){var ge=6*b;return this.int16[ge+0]=z,this.int16[ge+1]=$,this.int16[ge+2]=at,this.int16[ge+3]=mt,this.int16[ge+4]=Mt,this.int16[ge+5]=oe,b},v}(Zs);ap.prototype.bytesPerElement=12,Ma("StructArrayLayout2i2i2i12",ap);var Qf=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,b,z,$,at,mt)},v.prototype.emplace=function(b,z,$,at,mt,Mt){var oe=4*b,ge=8*b;return this.float32[oe+0]=z,this.float32[oe+1]=$,this.float32[oe+2]=at,this.int16[ge+6]=mt,this.int16[ge+7]=Mt,b},v}(Zs);Qf.prototype.bytesPerElement=16,Ma("StructArrayLayout2f1f2i16",Qf);var Rp=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,b,z,$,at)},v.prototype.emplace=function(b,z,$,at,mt){var Mt=12*b,oe=3*b;return this.uint8[Mt+0]=z,this.uint8[Mt+1]=$,this.float32[oe+1]=at,this.float32[oe+2]=mt,b},v}(Zs);Rp.prototype.bytesPerElement=12,Ma("StructArrayLayout2ub2f12",Rp);var qf=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$){var at=this.length;return this.resize(at+1),this.emplace(at,b,z,$)},v.prototype.emplace=function(b,z,$,at){var mt=3*b;return this.uint16[mt+0]=z,this.uint16[mt+1]=$,this.uint16[mt+2]=at,b},v}(Zs);qf.prototype.bytesPerElement=6,Ma("StructArrayLayout3ui6",qf);var Jf=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un){var En=this.length;return this.resize(En+1),this.emplace(En,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un,En){var kn=24*b,Gn=12*b,oi=48*b;return this.int16[kn+0]=z,this.int16[kn+1]=$,this.uint16[kn+2]=at,this.uint16[kn+3]=mt,this.uint32[Gn+2]=Mt,this.uint32[Gn+3]=oe,this.uint32[Gn+4]=ge,this.uint16[kn+10]=Ce,this.uint16[kn+11]=Ie,this.uint16[kn+12]=Ge,this.float32[Gn+7]=Zt,this.float32[Gn+8]=xr,this.uint8[oi+36]=mr,this.uint8[oi+37]=jr,this.uint8[oi+38]=kr,this.uint32[Gn+10]=un,this.int16[kn+22]=En,b},v}(Zs);Jf.prototype.bytesPerElement=48,Ma("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Jf);var op=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un,En,kn,Gn,oi,Bi,oa,eo,ba,lo,Ea,es){var Ao=this.length;return this.resize(Ao+1),this.emplace(Ao,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un,En,kn,Gn,oi,Bi,oa,eo,ba,lo,Ea,es)},v.prototype.emplace=function(b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr,jr,kr,un,En,kn,Gn,oi,Bi,oa,eo,ba,lo,Ea,es,Ao){var Za=34*b,qo=17*b;return this.int16[Za+0]=z,this.int16[Za+1]=$,this.int16[Za+2]=at,this.int16[Za+3]=mt,this.int16[Za+4]=Mt,this.int16[Za+5]=oe,this.int16[Za+6]=ge,this.int16[Za+7]=Ce,this.uint16[Za+8]=Ie,this.uint16[Za+9]=Ge,this.uint16[Za+10]=Zt,this.uint16[Za+11]=xr,this.uint16[Za+12]=mr,this.uint16[Za+13]=jr,this.uint16[Za+14]=kr,this.uint16[Za+15]=un,this.uint16[Za+16]=En,this.uint16[Za+17]=kn,this.uint16[Za+18]=Gn,this.uint16[Za+19]=oi,this.uint16[Za+20]=Bi,this.uint16[Za+21]=oa,this.uint16[Za+22]=eo,this.uint32[qo+12]=ba,this.float32[qo+13]=lo,this.float32[qo+14]=Ea,this.float32[qo+15]=es,this.float32[qo+16]=Ao,b},v}(Zs);op.prototype.bytesPerElement=68,Ma("StructArrayLayout8i15ui1ul4f68",op);var pf=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b){var z=this.length;return this.resize(z+1),this.emplace(z,b)},v.prototype.emplace=function(b,z){return this.float32[1*b+0]=z,b},v}(Zs);pf.prototype.bytesPerElement=4,Ma("StructArrayLayout1f4",pf);var Cc=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$){var at=this.length;return this.resize(at+1),this.emplace(at,b,z,$)},v.prototype.emplace=function(b,z,$,at){var mt=3*b;return this.int16[mt+0]=z,this.int16[mt+1]=$,this.int16[mt+2]=at,b},v}(Zs);Cc.prototype.bytesPerElement=6,Ma("StructArrayLayout3i6",Cc);var th=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$){var at=this.length;return this.resize(at+1),this.emplace(at,b,z,$)},v.prototype.emplace=function(b,z,$,at){var mt=4*b;return this.uint32[2*b+0]=z,this.uint16[mt+2]=$,this.uint16[mt+3]=at,b},v}(Zs);th.prototype.bytesPerElement=8,Ma("StructArrayLayout1ul2ui8",th);var Ih=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z){var $=this.length;return this.resize($+1),this.emplace($,b,z)},v.prototype.emplace=function(b,z,$){var at=2*b;return this.uint16[at+0]=z,this.uint16[at+1]=$,b},v}(Zs);Ih.prototype.bytesPerElement=4,Ma("StructArrayLayout2ui4",Ih);var id=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b){var z=this.length;return this.resize(z+1),this.emplace(z,b)},v.prototype.emplace=function(b,z){return this.uint16[1*b+0]=z,b},v}(Zs);id.prototype.bytesPerElement=2,Ma("StructArrayLayout1ui2",id);var Oh=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(b,z,$,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,b,z,$,at)},v.prototype.emplace=function(b,z,$,at,mt){var Mt=4*b;return this.float32[Mt+0]=z,this.float32[Mt+1]=$,this.float32[Mt+2]=at,this.float32[Mt+3]=mt,b},v}(Zs);Oh.prototype.bytesPerElement=16,Ma("StructArrayLayout4f16",Oh);var E=function(l){function v(){l.apply(this,arguments)}l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v;var b={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return b.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},b.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},b.x1.get=function(){return this._structArray.int16[this._pos2+2]},b.y1.get=function(){return this._structArray.int16[this._pos2+3]},b.x2.get=function(){return this._structArray.int16[this._pos2+4]},b.y2.get=function(){return this._structArray.int16[this._pos2+5]},b.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},b.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},b.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},b.anchorPoint.get=function(){return new R(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,b),v}(nd);E.prototype.size=20;var I=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.get=function(b){return new E(this,b)},v}(ju);Ma("CollisionBoxArray",I);var C=function(l){function v(){l.apply(this,arguments)}l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v;var b={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return b.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},b.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},b.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},b.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},b.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},b.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},b.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},b.segment.get=function(){return this._structArray.uint16[this._pos2+10]},b.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},b.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},b.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},b.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},b.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},b.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},b.placedOrientation.set=function(z){this._structArray.uint8[this._pos1+37]=z},b.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},b.hidden.set=function(z){this._structArray.uint8[this._pos1+38]=z},b.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},b.crossTileID.set=function(z){this._structArray.uint32[this._pos4+10]=z},b.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,b),v}(nd);C.prototype.size=48;var Z=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.get=function(b){return new C(this,b)},v}(Jf);Ma("PlacedSymbolArray",Z);var ut=function(l){function v(){l.apply(this,arguments)}l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v;var b={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return b.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},b.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},b.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},b.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},b.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},b.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},b.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},b.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},b.key.get=function(){return this._structArray.uint16[this._pos2+8]},b.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},b.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},b.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},b.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},b.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},b.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},b.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},b.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},b.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},b.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},b.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},b.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},b.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},b.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},b.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},b.crossTileID.set=function(z){this._structArray.uint32[this._pos4+12]=z},b.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},b.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},b.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},b.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,b),v}(nd);ut.prototype.size=68;var St=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.get=function(b){return new ut(this,b)},v}(op);Ma("SymbolInstanceArray",St);var At=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.getoffsetX=function(b){return this.float32[1*b+0]},v}(pf);Ma("GlyphOffsetArray",At);var te=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.getx=function(b){return this.int16[3*b+0]},v.prototype.gety=function(b){return this.int16[3*b+1]},v.prototype.gettileUnitDistanceFromAnchor=function(b){return this.int16[3*b+2]},v}(Cc);Ma("SymbolLineVertexArray",te);var we=function(l){function v(){l.apply(this,arguments)}l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v;var b={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return b.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},b.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},b.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,b),v}(nd);we.prototype.size=8;var Oe=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.get=function(b){return new we(this,b)},v}(th);Ma("FeatureIndexArray",Oe);var Ke=Hs([{name:"a_pos",components:2,type:"Int16"}],4).members,nr=function(l){l===void 0&&(l=[]),this.segments=l};function $e(l,v){return 256*(l=k(Math.floor(l),0,255))+k(Math.floor(v),0,255)}nr.prototype.prepareSegment=function(l,v,b,z){var $=this.segments[this.segments.length-1];return l>nr.MAX_VERTEX_ARRAY_LENGTH&&Qt("Max vertices per segment is "+nr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+l),(!$||$.vertexLength+l>nr.MAX_VERTEX_ARRAY_LENGTH||$.sortKey!==z)&&($={vertexOffset:v.length,primitiveOffset:b.length,vertexLength:0,primitiveLength:0},z!==void 0&&($.sortKey=z),this.segments.push($)),$},nr.prototype.get=function(){return this.segments},nr.prototype.destroy=function(){for(var l=0,v=this.segments;l<v.length;l+=1){var b=v[l];for(var z in b.vaos)b.vaos[z].destroy()}},nr.simpleSegment=function(l,v,b,z){return new nr([{vertexOffset:l,primitiveOffset:v,vertexLength:b,primitiveLength:z,vaos:{},sortKey:0}])},nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ma("SegmentVector",nr);var pr=Hs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Sr=U(function(l){l.exports=function(v,b){var z,$,at,mt,Mt,oe,ge,Ce;for($=v.length-(z=3&v.length),at=b,Mt=3432918353,oe=461845907,Ce=0;Ce<$;)ge=255&v.charCodeAt(Ce)|(255&v.charCodeAt(++Ce))<<8|(255&v.charCodeAt(++Ce))<<16|(255&v.charCodeAt(++Ce))<<24,++Ce,at=27492+(65535&(mt=5*(65535&(at=(at^=ge=(65535&(ge=(ge=(65535&ge)*Mt+(((ge>>>16)*Mt&65535)<<16)&4294967295)<<15|ge>>>17))*oe+(((ge>>>16)*oe&65535)<<16)&4294967295)<<13|at>>>19))+((5*(at>>>16)&65535)<<16)&4294967295))+((58964+(mt>>>16)&65535)<<16);switch(ge=0,z){case 3:ge^=(255&v.charCodeAt(Ce+2))<<16;case 2:ge^=(255&v.charCodeAt(Ce+1))<<8;case 1:at^=ge=(65535&(ge=(ge=(65535&(ge^=255&v.charCodeAt(Ce)))*Mt+(((ge>>>16)*Mt&65535)<<16)&4294967295)<<15|ge>>>17))*oe+(((ge>>>16)*oe&65535)<<16)&4294967295}return at^=v.length,at=2246822507*(65535&(at^=at>>>16))+((2246822507*(at>>>16)&65535)<<16)&4294967295,at=3266489909*(65535&(at^=at>>>13))+((3266489909*(at>>>16)&65535)<<16)&4294967295,(at^=at>>>16)>>>0}}),zr=U(function(l){l.exports=function(v,b){for(var z,$=v.length,at=b^$,mt=0;$>=4;)z=1540483477*(65535&(z=255&v.charCodeAt(mt)|(255&v.charCodeAt(++mt))<<8|(255&v.charCodeAt(++mt))<<16|(255&v.charCodeAt(++mt))<<24))+((1540483477*(z>>>16)&65535)<<16),at=1540483477*(65535&at)+((1540483477*(at>>>16)&65535)<<16)^(z=1540483477*(65535&(z^=z>>>24))+((1540483477*(z>>>16)&65535)<<16)),$-=4,++mt;switch($){case 3:at^=(255&v.charCodeAt(mt+2))<<16;case 2:at^=(255&v.charCodeAt(mt+1))<<8;case 1:at=1540483477*(65535&(at^=255&v.charCodeAt(mt)))+((1540483477*(at>>>16)&65535)<<16)}return at=1540483477*(65535&(at^=at>>>13))+((1540483477*(at>>>16)&65535)<<16),(at^=at>>>15)>>>0}}),dr=Sr,Ur=zr;dr.murmur3=Sr,dr.murmur2=Ur;var en=function(){this.ids=[],this.positions=[],this.indexed=!1};en.prototype.add=function(l,v,b,z){this.ids.push(Zn(l)),this.positions.push(v,b,z)},en.prototype.getPositions=function(l){for(var v=Zn(l),b=0,z=this.ids.length-1;b<z;){var $=b+z>>1;this.ids[$]>=v?z=$:b=$+1}for(var at=[];this.ids[b]===v;)at.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return at},en.serialize=function(l,v){var b=new Float64Array(l.ids),z=new Uint32Array(l.positions);return function $(at,mt,Mt,oe){for(;Mt<oe;){for(var ge=at[Mt+oe>>1],Ce=Mt-1,Ie=oe+1;;){do Ce++;while(at[Ce]<ge);do Ie--;while(at[Ie]>ge);if(Ce>=Ie)break;Pn(at,Ce,Ie),Pn(mt,3*Ce,3*Ie),Pn(mt,3*Ce+1,3*Ie+1),Pn(mt,3*Ce+2,3*Ie+2)}Ie-Mt<oe-Ie?($(at,mt,Mt,Ie),Mt=Ie+1):($(at,mt,Ie+1,oe),oe=Ie)}}(b,z,0,b.length-1),v&&v.push(b.buffer,z.buffer),{ids:b,positions:z}},en.deserialize=function(l){var v=new en;return v.ids=l.ids,v.positions=l.positions,v.indexed=!0,v};var Sn=Math.pow(2,53)-1;function Zn(l){var v=+l;return!isNaN(v)&&v<=Sn?v:dr(String(l))}function Pn(l,v,b){var z=l[v];l[v]=l[b],l[b]=z}Ma("FeaturePositionMap",en);var Fn=function(l,v){this.gl=l.gl,this.location=v},gi=function(l){function v(b,z){l.call(this,b,z),this.current=0}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){this.current!==b&&(this.current=b,this.gl.uniform1i(this.location,b))},v}(Fn),Vi=function(l){function v(b,z){l.call(this,b,z),this.current=0}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){this.current!==b&&(this.current=b,this.gl.uniform1f(this.location,b))},v}(Fn),Hi=function(l){function v(b,z){l.call(this,b,z),this.current=[0,0]}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]||(this.current=b,this.gl.uniform2f(this.location,b[0],b[1]))},v}(Fn),fa=function(l){function v(b,z){l.call(this,b,z),this.current=[0,0,0]}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]||(this.current=b,this.gl.uniform3f(this.location,b[0],b[1],b[2]))},v}(Fn),$a=function(l){function v(b,z){l.call(this,b,z),this.current=[0,0,0,0]}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]&&b[3]===this.current[3]||(this.current=b,this.gl.uniform4f(this.location,b[0],b[1],b[2],b[3]))},v}(Fn),Qa=function(l){function v(b,z){l.call(this,b,z),this.current=Po.transparent}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){b.r===this.current.r&&b.g===this.current.g&&b.b===this.current.b&&b.a===this.current.a||(this.current=b,this.gl.uniform4f(this.location,b.r,b.g,b.b,b.a))},v}(Fn),so=new Float32Array(16),No=function(l){function v(b,z){l.call(this,b,z),this.current=so}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.set=function(b){if(b[12]!==this.current[12]||b[0]!==this.current[0])return this.current=b,void this.gl.uniformMatrix4fv(this.location,!1,b);for(var z=1;z<16;z++)if(b[z]!==this.current[z]){this.current=b,this.gl.uniformMatrix4fv(this.location,!1,b);break}},v}(Fn);function ea(l){return[$e(255*l.r,255*l.g),$e(255*l.b,255*l.a)]}var Eo=function(l,v,b){this.value=l,this.uniformNames=v.map(function(z){return"u_"+z}),this.type=b};Eo.prototype.setUniform=function(l,v,b){l.set(b.constantOr(this.value))},Eo.prototype.getBinding=function(l,v,b){return this.type==="color"?new Qa(l,v):new Vi(l,v)};var Ro=function(l,v){this.uniformNames=v.map(function(b){return"u_"+b}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ro.prototype.setConstantPatternPositions=function(l,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=l.tlbr},Ro.prototype.setUniform=function(l,v,b,z){var $=z==="u_pattern_to"?this.patternTo:z==="u_pattern_from"?this.patternFrom:z==="u_pixel_ratio_to"?this.pixelRatioTo:z==="u_pixel_ratio_from"?this.pixelRatioFrom:null;$&&l.set($)},Ro.prototype.getBinding=function(l,v,b){return b.substr(0,9)==="u_pattern"?new $a(l,v):new Vi(l,v)};var bo=function(l,v,b,z){this.expression=l,this.type=b,this.maxValue=0,this.paintVertexAttributes=v.map(function($){return{name:"a_"+$,type:"Float32",components:b==="color"?2:1,offset:0}}),this.paintVertexArray=new z};bo.prototype.populatePaintArray=function(l,v,b,z,$){var at=this.paintVertexArray.length,mt=this.expression.evaluate(new Qo(0),v,{},z,[],$);this.paintVertexArray.resize(l),this._setPaintValue(at,l,mt)},bo.prototype.updatePaintArray=function(l,v,b,z){var $=this.expression.evaluate({zoom:0},b,z);this._setPaintValue(l,v,$)},bo.prototype._setPaintValue=function(l,v,b){if(this.type==="color")for(var z=ea(b),$=l;$<v;$++)this.paintVertexArray.emplace($,z[0],z[1]);else{for(var at=l;at<v;at++)this.paintVertexArray.emplace(at,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}},bo.prototype.upload=function(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},bo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ho=function(l,v,b,z,$,at){this.expression=l,this.uniformNames=v.map(function(mt){return"u_"+mt+"_t"}),this.type=b,this.useIntegerZoom=z,this.zoom=$,this.maxValue=0,this.paintVertexAttributes=v.map(function(mt){return{name:"a_"+mt,type:"Float32",components:b==="color"?4:2,offset:0}}),this.paintVertexArray=new at};ho.prototype.populatePaintArray=function(l,v,b,z,$){var at=this.expression.evaluate(new Qo(this.zoom),v,{},z,[],$),mt=this.expression.evaluate(new Qo(this.zoom+1),v,{},z,[],$),Mt=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(Mt,l,at,mt)},ho.prototype.updatePaintArray=function(l,v,b,z){var $=this.expression.evaluate({zoom:this.zoom},b,z),at=this.expression.evaluate({zoom:this.zoom+1},b,z);this._setPaintValue(l,v,$,at)},ho.prototype._setPaintValue=function(l,v,b,z){if(this.type==="color")for(var $=ea(b),at=ea(z),mt=l;mt<v;mt++)this.paintVertexArray.emplace(mt,$[0],$[1],at[0],at[1]);else{for(var Mt=l;Mt<v;Mt++)this.paintVertexArray.emplace(Mt,b,z);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(z))}},ho.prototype.upload=function(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ho.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ho.prototype.setUniform=function(l,v){var b=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,z=k(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);l.set(z)},ho.prototype.getBinding=function(l,v,b){return new Vi(l,v)};var zo=function(l,v,b,z,$,at){this.expression=l,this.type=v,this.useIntegerZoom=b,this.zoom=z,this.layerId=at,this.zoomInPaintVertexArray=new $,this.zoomOutPaintVertexArray=new $};zo.prototype.populatePaintArray=function(l,v,b){var z=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(z,l,v.patterns&&v.patterns[this.layerId],b)},zo.prototype.updatePaintArray=function(l,v,b,z,$){this._setPaintValues(l,v,b.patterns&&b.patterns[this.layerId],$)},zo.prototype._setPaintValues=function(l,v,b,z){if(z&&b){var $=z[b.min],at=z[b.mid],mt=z[b.max];if($&&at&&mt)for(var Mt=l;Mt<v;Mt++)this.zoomInPaintVertexArray.emplace(Mt,at.tl[0],at.tl[1],at.br[0],at.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],at.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(Mt,at.tl[0],at.tl[1],at.br[0],at.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],at.pixelRatio,mt.pixelRatio)}},zo.prototype.upload=function(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,pr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,pr.members,this.expression.isStateDependent))},zo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var yo=function(l,v,b){this.binders={},this._buffers=[];var z=[];for(var $ in l.paint._values)if(b($)){var at=l.paint.get($);if(at instanceof cs&&Ra(at.property.specification)){var mt=tu($,l.type),Mt=at.value,oe=at.property.specification.type,ge=at.property.useIntegerZoom,Ce=at.property.specification["property-type"],Ie=Ce==="cross-faded"||Ce==="cross-faded-data-driven";if(Mt.kind==="constant")this.binders[$]=Ie?new Ro(Mt.value,mt):new Eo(Mt.value,mt,oe),z.push("/u_"+$);else if(Mt.kind==="source"||Ie){var Ge=mu($,oe,"source");this.binders[$]=Ie?new zo(Mt,oe,ge,v,Ge,l.id):new bo(Mt,mt,oe,Ge),z.push("/a_"+$)}else{var Zt=mu($,oe,"composite");this.binders[$]=new ho(Mt,mt,oe,ge,v,Zt),z.push("/z_"+$)}}}this.cacheKey=z.sort().join("")};yo.prototype.getMaxValue=function(l){var v=this.binders[l];return v instanceof bo||v instanceof ho?v.maxValue:0},yo.prototype.populatePaintArrays=function(l,v,b,z,$){for(var at in this.binders){var mt=this.binders[at];(mt instanceof bo||mt instanceof ho||mt instanceof zo)&&mt.populatePaintArray(l,v,b,z,$)}},yo.prototype.setConstantPatternPositions=function(l,v){for(var b in this.binders){var z=this.binders[b];z instanceof Ro&&z.setConstantPatternPositions(l,v)}},yo.prototype.updatePaintArrays=function(l,v,b,z,$){var at=!1;for(var mt in l)for(var Mt=0,oe=v.getPositions(mt);Mt<oe.length;Mt+=1){var ge=oe[Mt],Ce=b.feature(ge.index);for(var Ie in this.binders){var Ge=this.binders[Ie];if((Ge instanceof bo||Ge instanceof ho||Ge instanceof zo)&&Ge.expression.isStateDependent===!0){var Zt=z.paint.get(Ie);Ge.expression=Zt.value,Ge.updatePaintArray(ge.start,ge.end,Ce,l[mt],$),at=!0}}}return at},yo.prototype.defines=function(){var l=[];for(var v in this.binders){var b=this.binders[v];(b instanceof Eo||b instanceof Ro)&&l.push.apply(l,b.uniformNames.map(function(z){return"#define HAS_UNIFORM_"+z}))}return l},yo.prototype.getBinderAttributes=function(){var l=[];for(var v in this.binders){var b=this.binders[v];if(b instanceof bo||b instanceof ho)for(var z=0;z<b.paintVertexAttributes.length;z++)l.push(b.paintVertexAttributes[z].name);else if(b instanceof zo)for(var $=0;$<pr.members.length;$++)l.push(pr.members[$].name)}return l},yo.prototype.getBinderUniforms=function(){var l=[];for(var v in this.binders){var b=this.binders[v];if(b instanceof Eo||b instanceof Ro||b instanceof ho)for(var z=0,$=b.uniformNames;z<$.length;z+=1)l.push($[z])}return l},yo.prototype.getPaintVertexBuffers=function(){return this._buffers},yo.prototype.getUniforms=function(l,v){var b=[];for(var z in this.binders){var $=this.binders[z];if($ instanceof Eo||$ instanceof Ro||$ instanceof ho)for(var at=0,mt=$.uniformNames;at<mt.length;at+=1){var Mt=mt[at];if(v[Mt]){var oe=$.getBinding(l,v[Mt],Mt);b.push({name:Mt,property:z,binding:oe})}}}return b},yo.prototype.setUniforms=function(l,v,b,z){for(var $=0,at=v;$<at.length;$+=1){var mt=at[$],Mt=mt.name,oe=mt.property;this.binders[oe].setUniform(mt.binding,z,b.get(oe),Mt)}},yo.prototype.updatePaintBuffers=function(l){for(var v in this._buffers=[],this.binders){var b=this.binders[v];if(l&&b instanceof zo){var z=l.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;z&&this._buffers.push(z)}else(b instanceof bo||b instanceof ho)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}},yo.prototype.upload=function(l){for(var v in this.binders){var b=this.binders[v];(b instanceof bo||b instanceof ho||b instanceof zo)&&b.upload(l)}this.updatePaintBuffers()},yo.prototype.destroy=function(){for(var l in this.binders){var v=this.binders[l];(v instanceof bo||v instanceof ho||v instanceof zo)&&v.destroy()}};var uo=function(l,v,b){b===void 0&&(b=function(){return!0}),this.programConfigurations={};for(var z=0,$=l;z<$.length;z+=1){var at=$[z];this.programConfigurations[at.id]=new yo(at,v,b)}this.needsUpload=!1,this._featureMap=new en,this._bufferOffset=0};function tu(l,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(v+"-","").replace(/-/g,"_")]}function mu(l,v,b){var z={color:{source:pc,composite:Oh},number:{source:pf,composite:pc}},$=function(at){return{"line-pattern":{source:dc,composite:dc},"fill-pattern":{source:dc,composite:dc},"fill-extrusion-pattern":{source:dc,composite:dc}}[at]}(l);return $&&$[b]||z[v][b]}uo.prototype.populatePaintArrays=function(l,v,b,z,$,at){for(var mt in this.programConfigurations)this.programConfigurations[mt].populatePaintArrays(l,v,z,$,at);v.id!==void 0&&this._featureMap.add(v.id,b,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0},uo.prototype.updatePaintArrays=function(l,v,b,z){for(var $=0,at=b;$<at.length;$+=1){var mt=at[$];this.needsUpload=this.programConfigurations[mt.id].updatePaintArrays(l,this._featureMap,v,mt,z)||this.needsUpload}},uo.prototype.get=function(l){return this.programConfigurations[l]},uo.prototype.upload=function(l){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(l);this.needsUpload=!1}},uo.prototype.destroy=function(){for(var l in this.programConfigurations)this.programConfigurations[l].destroy()},Ma("ConstantBinder",Eo),Ma("CrossFadedConstantBinder",Ro),Ma("SourceExpressionBinder",bo),Ma("CrossFadedCompositeBinder",zo),Ma("CompositeExpressionBinder",ho),Ma("ProgramConfiguration",yo,{omit:["_buffers"]}),Ma("ProgramConfigurationSet",uo);var al=Math.pow(2,14)-1,vl=-al-1;function du(l){for(var v=8192/l.extent,b=l.loadGeometry(),z=0;z<b.length;z++)for(var $=b[z],at=0;at<$.length;at++){var mt=$[at],Mt=Math.round(mt.x*v),oe=Math.round(mt.y*v);mt.x=k(Mt,vl,al),mt.y=k(oe,vl,al),(Mt<mt.x||Mt>mt.x+1||oe<mt.y||oe>mt.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return b}function Nu(l,v){return{type:l.type,id:l.id,properties:l.properties,geometry:v?du(l):[]}}function Jl(l,v,b,z,$){l.emplaceBack(2*v+(z+1)/2,2*b+($+1)/2)}var jl=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Cf,this.indexArray=new qf,this.segments=new nr,this.programConfigurations=new uo(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function tc(l,v){for(var b=0;b<l.length;b++)if(gc(v,l[b]))return!0;for(var z=0;z<v.length;z++)if(gc(l,v[z]))return!0;return!!Lh(l,v)}function cu(l,v,b){return!!gc(l,v)||!!vc(v,l,b)}function Ac(l,v){if(l.length===1)return sp(v,l[0]);for(var b=0;b<v.length;b++)for(var z=v[b],$=0;$<z.length;$++)if(gc(l,z[$]))return!0;for(var at=0;at<l.length;at++)if(sp(v,l[at]))return!0;for(var mt=0;mt<v.length;mt++)if(Lh(l,v[mt]))return!0;return!1}function Mc(l,v,b){if(l.length>1){if(Lh(l,v))return!0;for(var z=0;z<v.length;z++)if(vc(v[z],l,b))return!0}for(var $=0;$<l.length;$++)if(vc(l[$],v,b))return!0;return!1}function Lh(l,v){if(l.length===0||v.length===0)return!1;for(var b=0;b<l.length-1;b++)for(var z=l[b],$=l[b+1],at=0;at<v.length-1;at++)if(eh(z,$,v[at],v[at+1]))return!0;return!1}function eh(l,v,b,z){return it(l,b,z)!==it(v,b,z)&&it(l,v,b)!==it(l,v,z)}function vc(l,v,b){var z=b*b;if(v.length===1)return l.distSqr(v[0])<z;for(var $=1;$<v.length;$++)if(Mf(l,v[$-1],v[$])<z)return!0;return!1}function Mf(l,v,b){var z=v.distSqr(b);if(z===0)return l.distSqr(v);var $=((l.x-v.x)*(b.x-v.x)+(l.y-v.y)*(b.y-v.y))/z;return l.distSqr($<0?v:$>1?b:b.sub(v)._mult($)._add(v))}function sp(l,v){for(var b,z,$,at=!1,mt=0;mt<l.length;mt++)for(var Mt=0,oe=(b=l[mt]).length-1;Mt<b.length;oe=Mt++)(z=b[Mt]).y>v.y!=($=b[oe]).y>v.y&&v.x<($.x-z.x)*(v.y-z.y)/($.y-z.y)+z.x&&(at=!at);return at}function gc(l,v){for(var b=!1,z=0,$=l.length-1;z<l.length;$=z++){var at=l[z],mt=l[$];at.y>v.y!=mt.y>v.y&&v.x<(mt.x-at.x)*(v.y-at.y)/(mt.y-at.y)+at.x&&(b=!b)}return b}function rh(l,v,b){var z=b[0],$=b[2];if(l.x<z.x&&v.x<z.x||l.x>$.x&&v.x>$.x||l.y<z.y&&v.y<z.y||l.y>$.y&&v.y>$.y)return!1;var at=it(l,v,b[0]);return at!==it(l,v,b[1])||at!==it(l,v,b[2])||at!==it(l,v,b[3])}function Zc(l,v,b){var z=v.paint.get(l).value;return z.kind==="constant"?z.value:b.programConfigurations.get(v.id).getMaxValue(l)}function Ju(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Kc(l,v,b,z,$){if(!v[0]&&!v[1])return l;var at=R.convert(v)._mult($);b==="viewport"&&at._rotate(-z);for(var mt=[],Mt=0;Mt<l.length;Mt++)mt.push(l[Mt].sub(at));return mt}jl.prototype.populate=function(l,v,b){var z=this.layers[0],$=[],at=null;z.type==="circle"&&(at=z.layout.get("circle-sort-key"));for(var mt=0,Mt=l;mt<Mt.length;mt+=1){var oe=Mt[mt],ge=oe.feature,Ce=oe.id,Ie=oe.index,Ge=oe.sourceLayerIndex,Zt=this.layers[0]._featureFilter.needGeometry,xr=Nu(ge,Zt);if(this.layers[0]._featureFilter.filter(new Qo(this.zoom),xr,b)){var mr=at?at.evaluate(xr,{},b):void 0,jr={id:Ce,properties:ge.properties,type:ge.type,sourceLayerIndex:Ge,index:Ie,geometry:Zt?xr.geometry:du(ge),patterns:{},sortKey:mr};$.push(jr)}}at&&$.sort(function(oa,eo){return oa.sortKey-eo.sortKey});for(var kr=0,un=$;kr<un.length;kr+=1){var En=un[kr],kn=En.geometry,Gn=En.index,oi=En.sourceLayerIndex,Bi=l[Gn].feature;this.addFeature(En,kn,Gn,b),v.featureIndex.insert(Bi,kn,Gn,oi,this.index)}},jl.prototype.update=function(l,v,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,v,this.stateDependentLayers,b)},jl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jl.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ke),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jl.prototype.addFeature=function(l,v,b,z){for(var $=0,at=v;$<at.length;$+=1)for(var mt=0,Mt=at[$];mt<Mt.length;mt+=1){var oe=Mt[mt],ge=oe.x,Ce=oe.y;if(!(ge<0||ge>=8192||Ce<0||Ce>=8192)){var Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),Ge=Ie.vertexLength;Jl(this.layoutVertexArray,ge,Ce,-1,-1),Jl(this.layoutVertexArray,ge,Ce,1,-1),Jl(this.layoutVertexArray,ge,Ce,1,1),Jl(this.layoutVertexArray,ge,Ce,-1,1),this.indexArray.emplaceBack(Ge,Ge+1,Ge+2),this.indexArray.emplaceBack(Ge,Ge+3,Ge+2),Ie.vertexLength+=4,Ie.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,{},z)},Ma("CircleBucket",jl,{omit:["layers"]});var Tf=new Rs({"circle-sort-key":new za(Be.layout_circle["circle-sort-key"])}),df={paint:new Rs({"circle-radius":new za(Be.paint_circle["circle-radius"]),"circle-color":new za(Be.paint_circle["circle-color"]),"circle-blur":new za(Be.paint_circle["circle-blur"]),"circle-opacity":new za(Be.paint_circle["circle-opacity"]),"circle-translate":new Wa(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Wa(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wa(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wa(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new za(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new za(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new za(Be.paint_circle["circle-stroke-opacity"])}),layout:Tf},Ps=typeof Float32Array!="undefined"?Float32Array:Array;function mc(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Xl(l,v,b){var z=v[0],$=v[1],at=v[2],mt=v[3],Mt=v[4],oe=v[5],ge=v[6],Ce=v[7],Ie=v[8],Ge=v[9],Zt=v[10],xr=v[11],mr=v[12],jr=v[13],kr=v[14],un=v[15],En=b[0],kn=b[1],Gn=b[2],oi=b[3];return l[0]=En*z+kn*Mt+Gn*Ie+oi*mr,l[1]=En*$+kn*oe+Gn*Ge+oi*jr,l[2]=En*at+kn*ge+Gn*Zt+oi*kr,l[3]=En*mt+kn*Ce+Gn*xr+oi*un,l[4]=(En=b[4])*z+(kn=b[5])*Mt+(Gn=b[6])*Ie+(oi=b[7])*mr,l[5]=En*$+kn*oe+Gn*Ge+oi*jr,l[6]=En*at+kn*ge+Gn*Zt+oi*kr,l[7]=En*mt+kn*Ce+Gn*xr+oi*un,l[8]=(En=b[8])*z+(kn=b[9])*Mt+(Gn=b[10])*Ie+(oi=b[11])*mr,l[9]=En*$+kn*oe+Gn*Ge+oi*jr,l[10]=En*at+kn*ge+Gn*Zt+oi*kr,l[11]=En*mt+kn*Ce+Gn*xr+oi*un,l[12]=(En=b[12])*z+(kn=b[13])*Mt+(Gn=b[14])*Ie+(oi=b[15])*mr,l[13]=En*$+kn*oe+Gn*Ge+oi*jr,l[14]=En*at+kn*ge+Gn*Zt+oi*kr,l[15]=En*mt+kn*Ce+Gn*xr+oi*un,l}Math.hypot||(Math.hypot=function(){for(var l=arguments,v=0,b=arguments.length;b--;)v+=l[b]*l[b];return Math.sqrt(v)});var Pf,up=Xl;function Dp(l,v,b){var z=v[0],$=v[1],at=v[2],mt=v[3];return l[0]=b[0]*z+b[4]*$+b[8]*at+b[12]*mt,l[1]=b[1]*z+b[5]*$+b[9]*at+b[13]*mt,l[2]=b[2]*z+b[6]*$+b[10]*at+b[14]*mt,l[3]=b[3]*z+b[7]*$+b[11]*at+b[15]*mt,l}Pf=new Ps(3),Ps!=Float32Array&&(Pf[0]=0,Pf[1]=0,Pf[2]=0),function(){var l=new Ps(4);Ps!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0,l[3]=0)}();var Bp=(function(){var l=new Ps(2);Ps!=Float32Array&&(l[0]=0,l[1]=0)}(),function(l){function v(b){l.call(this,b,df)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.createBucket=function(b){return new jl(b)},v.prototype.queryRadius=function(b){var z=b;return Zc("circle-radius",this,z)+Zc("circle-stroke-width",this,z)+Ju(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(b,z,$,at,mt,Mt,oe,ge){for(var Ce=Kc(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Mt.angle,oe),Ie=this.paint.get("circle-radius").evaluate(z,$)+this.paint.get("circle-stroke-width").evaluate(z,$),Ge=this.paint.get("circle-pitch-alignment")==="map",Zt=Ge?Ce:function(Bi,oa){return Bi.map(function(eo){return Tc(eo,oa)})}(Ce,ge),xr=Ge?Ie*oe:Ie,mr=0,jr=at;mr<jr.length;mr+=1)for(var kr=0,un=jr[mr];kr<un.length;kr+=1){var En=un[kr],kn=Ge?En:Tc(En,ge),Gn=xr,oi=Dp([],[En.x,En.y,0,1],ge);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Gn*=oi[3]/Mt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Gn*=Mt.cameraToCenterDistance/oi[3]),cu(Zt,kn,Gn))return!0}return!1},v}(gs));function Tc(l,v){var b=Dp([],[l.x,l.y,0,1],v);return new R(b[0]/b[3],b[1]/b[3])}var lp=function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v}(jl);function yc(l,v,b,z){var $=v.width,at=v.height;if(z){if(z instanceof Uint8ClampedArray)z=new Uint8Array(z.buffer);else if(z.length!==$*at*b)throw new RangeError("mismatched image size")}else z=new Uint8Array($*at*b);return l.width=$,l.height=at,l.data=z,l}function If(l,v,b){var z=v.width,$=v.height;if(z!==l.width||$!==l.height){var at=yc({},{width:z,height:$},b);Fp(l,at,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,z),height:Math.min(l.height,$)},b),l.width=z,l.height=$,l.data=at.data}}function Fp(l,v,b,z,$,at){if($.width===0||$.height===0)return v;if($.width>l.width||$.height>l.height||b.x>l.width-$.width||b.y>l.height-$.height)throw new RangeError("out of range source coordinates for image copy");if($.width>v.width||$.height>v.height||z.x>v.width-$.width||z.y>v.height-$.height)throw new RangeError("out of range destination coordinates for image copy");for(var mt=l.data,Mt=v.data,oe=0;oe<$.height;oe++)for(var ge=((b.y+oe)*l.width+b.x)*at,Ce=((z.y+oe)*v.width+z.x)*at,Ie=0;Ie<$.width*at;Ie++)Mt[Ce+Ie]=mt[ge+Ie];return v}Ma("HeatmapBucket",lp,{omit:["layers"]});var Hc=function(l,v){yc(this,l,1,v)};Hc.prototype.resize=function(l){If(this,l,1)},Hc.prototype.clone=function(){return new Hc({width:this.width,height:this.height},new Uint8Array(this.data))},Hc.copy=function(l,v,b,z,$){Fp(l,v,b,z,$,1)};var ol=function(l,v){yc(this,l,4,v)};ol.prototype.resize=function(l){If(this,l,4)},ol.prototype.replace=function(l,v){v?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l},ol.prototype.clone=function(){return new ol({width:this.width,height:this.height},new Uint8Array(this.data))},ol.copy=function(l,v,b,z,$){Fp(l,v,b,z,$,4)},Ma("AlphaImage",Hc),Ma("RGBAImage",ol);var cp={paint:new Rs({"heatmap-radius":new za(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new za(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wa(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uc(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wa(Be.paint_heatmap["heatmap-opacity"])})};function Pd(l){var v={},b=l.resolution||256,z=l.clips?l.clips.length:1,$=l.image||new ol({width:b,height:z}),at=function(xr,mr,jr){v[l.evaluationKey]=jr;var kr=l.expression.evaluate(v);$.data[xr+mr+0]=Math.floor(255*kr.r/kr.a),$.data[xr+mr+1]=Math.floor(255*kr.g/kr.a),$.data[xr+mr+2]=Math.floor(255*kr.b/kr.a),$.data[xr+mr+3]=Math.floor(255*kr.a)};if(l.clips)for(var mt=0,Mt=0;mt<z;++mt,Mt+=4*b)for(var oe=0,ge=0;oe<b;oe++,ge+=4){var Ce=oe/(b-1),Ie=l.clips[mt];at(Mt,ge,Ie.start*(1-Ce)+Ie.end*Ce)}else for(var Ge=0,Zt=0;Ge<b;Ge++,Zt+=4)at(0,Zt,Ge/(b-1));return $}var nh=function(l){function v(b){l.call(this,b,cp),this._updateColorRamp()}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.createBucket=function(b){return new lp(b)},v.prototype._handleSpecialPaintPropertyUpdate=function(b){b==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=Pd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(gs),Id={paint:new Rs({"hillshade-illumination-direction":new Wa(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wa(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wa(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wa(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wa(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wa(Be.paint_hillshade["hillshade-accent-color"])})},xg=function(l){function v(b){l.call(this,b,Id)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(gs),Od=Hs([{name:"a_pos",components:2,type:"Int16"}],4).members,ms=xc,ad=xc;function xc(l,v,b){b=b||2;var z,$,at,mt,Mt,oe,ge,Ce=v&&v.length,Ie=Ce?v[0]*b:l.length,Ge=_g(l,0,Ie,b,!0),Zt=[];if(!Ge||Ge.next===Ge.prev)return Zt;if(Ce&&(Ge=function(mr,jr,kr,un){var En,kn,Gn,oi=[];for(En=0,kn=jr.length;En<kn;En++)(Gn=_g(mr,jr[En]*un,En<kn-1?jr[En+1]*un:mr.length,un,!1))===Gn.next&&(Gn.steiner=!0),oi.push(vf(Gn));for(oi.sort(p0),En=0;En<oi.length;En++)rm(oi[En],kr),kr=ih(kr,kr.next);return kr}(l,v,Ge,b)),l.length>80*b){z=at=l[0],$=mt=l[1];for(var xr=b;xr<Ie;xr+=b)(Mt=l[xr])<z&&(z=Mt),(oe=l[xr+1])<$&&($=oe),Mt>at&&(at=Mt),oe>mt&&(mt=oe);ge=(ge=Math.max(at-z,mt-$))!==0?1/ge:0}return Np(Ge,Zt,b,z,$,ge),Zt}function _g(l,v,b,z,$){var at,mt;if($===sd(l,v,b,z)>0)for(at=v;at<b;at+=z)mt=Dd(at,l[at],l[at+1],mt);else for(at=b-z;at>=v;at-=z)mt=Dd(at,l[at],l[at+1],mt);return mt&&kd(mt,mt.next)&&(Of(mt),mt=mt.next),mt}function ih(l,v){if(!l)return l;v||(v=l);var b,z=l;do if(b=!1,z.steiner||!kd(z,z.next)&&sl(z.prev,z,z.next)!==0)z=z.next;else{if(Of(z),(z=v=z.prev)===z.next)break;b=!0}while(b||z!==v);return v}function Np(l,v,b,z,$,at,mt){if(l){!mt&&at&&function(Ce,Ie,Ge,Zt){var xr=Ce;do xr.z===null&&(xr.z=sa(xr.x,xr.y,Ie,Ge,Zt)),xr.prevZ=xr.prev,xr.nextZ=xr.next,xr=xr.next;while(xr!==Ce);xr.prevZ.nextZ=null,xr.prevZ=null,function(mr){var jr,kr,un,En,kn,Gn,oi,Bi,oa=1;do{for(kr=mr,mr=null,kn=null,Gn=0;kr;){for(Gn++,un=kr,oi=0,jr=0;jr<oa&&(oi++,un=un.nextZ);jr++);for(Bi=oa;oi>0||Bi>0&&un;)oi!==0&&(Bi===0||!un||kr.z<=un.z)?(En=kr,kr=kr.nextZ,oi--):(En=un,un=un.nextZ,Bi--),kn?kn.nextZ=En:mr=En,En.prevZ=kn,kn=En;kr=un}kn.nextZ=null,oa*=2}while(Gn>1)}(xr)}(l,z,$,at);for(var Mt,oe,ge=l;l.prev!==l.next;)if(Mt=l.prev,oe=l.next,at?Ld(l,z,$,at):bg(l))v.push(Mt.i/b),v.push(l.i/b),v.push(oe.i/b),Of(l),l=oe.next,ge=oe.next;else if((l=oe)===ge){mt?mt===1?Np(l=ah(ih(l),v,b),v,b,z,$,at,2):mt===2&&Av(l,v,b,z,$,at):Np(ih(l),v,b,z,$,at,1);break}}}function bg(l){var v=l.prev,b=l,z=l.next;if(sl(v,b,z)>=0)return!1;for(var $=l.next.next;$!==l.prev;){if(Vn(v.x,v.y,b.x,b.y,z.x,z.y,$.x,$.y)&&sl($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function Ld(l,v,b,z){var $=l.prev,at=l,mt=l.next;if(sl($,at,mt)>=0)return!1;for(var Mt=$.x>at.x?$.x>mt.x?$.x:mt.x:at.x>mt.x?at.x:mt.x,oe=$.y>at.y?$.y>mt.y?$.y:mt.y:at.y>mt.y?at.y:mt.y,ge=sa($.x<at.x?$.x<mt.x?$.x:mt.x:at.x<mt.x?at.x:mt.x,$.y<at.y?$.y<mt.y?$.y:mt.y:at.y<mt.y?at.y:mt.y,v,b,z),Ce=sa(Mt,oe,v,b,z),Ie=l.prevZ,Ge=l.nextZ;Ie&&Ie.z>=ge&&Ge&&Ge.z<=Ce;){if(Ie!==l.prev&&Ie!==l.next&&Vn($.x,$.y,at.x,at.y,mt.x,mt.y,Ie.x,Ie.y)&&sl(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,Ge!==l.prev&&Ge!==l.next&&Vn($.x,$.y,at.x,at.y,mt.x,mt.y,Ge.x,Ge.y)&&sl(Ge.prev,Ge,Ge.next)>=0))return!1;Ge=Ge.nextZ}for(;Ie&&Ie.z>=ge;){if(Ie!==l.prev&&Ie!==l.next&&Vn($.x,$.y,at.x,at.y,mt.x,mt.y,Ie.x,Ie.y)&&sl(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;Ge&&Ge.z<=Ce;){if(Ge!==l.prev&&Ge!==l.next&&Vn($.x,$.y,at.x,at.y,mt.x,mt.y,Ge.x,Ge.y)&&sl(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.nextZ}return!0}function ah(l,v,b){var z=l;do{var $=z.prev,at=z.next.next;!kd($,at)&&wg($,z,z.next,at)&&od($,at)&&od(at,$)&&(v.push($.i/b),v.push(z.i/b),v.push(at.i/b),Of(z),Of(z.next),z=l=at),z=z.next}while(z!==l);return ih(z)}function Av(l,v,b,z,$,at){var mt=l;do{for(var Mt=mt.next.next;Mt!==mt.prev;){if(mt.i!==Mt.i&&nm(mt,Mt)){var oe=fp(mt,Mt);return mt=ih(mt,mt.next),oe=ih(oe,oe.next),Np(mt,v,b,z,$,at),void Np(oe,v,b,z,$,at)}Mt=Mt.next}mt=mt.next}while(mt!==l)}function p0(l,v){return l.x-v.x}function rm(l,v){if(v=function(z,$){var at,mt=$,Mt=z.x,oe=z.y,ge=-1/0;do{if(oe<=mt.y&&oe>=mt.next.y&&mt.next.y!==mt.y){var Ce=mt.x+(oe-mt.y)*(mt.next.x-mt.x)/(mt.next.y-mt.y);if(Ce<=Mt&&Ce>ge){if(ge=Ce,Ce===Mt){if(oe===mt.y)return mt;if(oe===mt.next.y)return mt.next}at=mt.x<mt.next.x?mt:mt.next}}mt=mt.next}while(mt!==$);if(!at)return null;if(Mt===ge)return at;var Ie,Ge=at,Zt=at.x,xr=at.y,mr=1/0;mt=at;do Mt>=mt.x&&mt.x>=Zt&&Mt!==mt.x&&Vn(oe<xr?Mt:ge,oe,Zt,xr,oe<xr?ge:Mt,oe,mt.x,mt.y)&&(Ie=Math.abs(oe-mt.y)/(Mt-mt.x),od(mt,z)&&(Ie<mr||Ie===mr&&(mt.x>at.x||mt.x===at.x&&Sg(at,mt)))&&(at=mt,mr=Ie)),mt=mt.next;while(mt!==Ge);return at}(l,v)){var b=fp(v,l);ih(v,v.next),ih(b,b.next)}}function Sg(l,v){return sl(l.prev,l,v.prev)<0&&sl(v.next,l,l.next)<0}function sa(l,v,b,z,$){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-b)*$)|l<<8))|l<<4))|l<<2))|l<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-z)*$)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function vf(l){var v=l,b=l;do(v.x<b.x||v.x===b.x&&v.y<b.y)&&(b=v),v=v.next;while(v!==l);return b}function Vn(l,v,b,z,$,at,mt,Mt){return($-mt)*(v-Mt)-(l-mt)*(at-Mt)>=0&&(l-mt)*(z-Mt)-(b-mt)*(v-Mt)>=0&&(b-mt)*(at-Mt)-($-mt)*(z-Mt)>=0}function nm(l,v){return l.next.i!==v.i&&l.prev.i!==v.i&&!function(b,z){var $=b;do{if($.i!==b.i&&$.next.i!==b.i&&$.i!==z.i&&$.next.i!==z.i&&wg($,$.next,b,z))return!0;$=$.next}while($!==b);return!1}(l,v)&&(od(l,v)&&od(v,l)&&function(b,z){var $=b,at=!1,mt=(b.x+z.x)/2,Mt=(b.y+z.y)/2;do $.y>Mt!=$.next.y>Mt&&$.next.y!==$.y&&mt<($.next.x-$.x)*(Mt-$.y)/($.next.y-$.y)+$.x&&(at=!at),$=$.next;while($!==b);return at}(l,v)&&(sl(l.prev,l,v.prev)||sl(l,v.prev,v))||kd(l,v)&&sl(l.prev,l,l.next)>0&&sl(v.prev,v,v.next)>0)}function sl(l,v,b){return(v.y-l.y)*(b.x-v.x)-(v.x-l.x)*(b.y-v.y)}function kd(l,v){return l.x===v.x&&l.y===v.y}function wg(l,v,b,z){var $=Mv(sl(l,v,b)),at=Mv(sl(l,v,z)),mt=Mv(sl(b,z,l)),Mt=Mv(sl(b,z,v));return $!==at&&mt!==Mt||!($!==0||!Rd(l,b,v))||!(at!==0||!Rd(l,z,v))||!(mt!==0||!Rd(b,l,z))||!(Mt!==0||!Rd(b,v,z))}function Rd(l,v,b){return v.x<=Math.max(l.x,b.x)&&v.x>=Math.min(l.x,b.x)&&v.y<=Math.max(l.y,b.y)&&v.y>=Math.min(l.y,b.y)}function Mv(l){return l>0?1:l<0?-1:0}function od(l,v){return sl(l.prev,l,l.next)<0?sl(l,v,l.next)>=0&&sl(l,l.prev,v)>=0:sl(l,v,l.prev)<0||sl(l,l.next,v)<0}function fp(l,v){var b=new hp(l.i,l.x,l.y),z=new hp(v.i,v.x,v.y),$=l.next,at=v.prev;return l.next=v,v.prev=l,b.next=$,$.prev=b,z.next=b,b.prev=z,at.next=z,z.prev=at,z}function Dd(l,v,b,z){var $=new hp(l,v,b);return z?($.next=z.next,$.prev=z,z.next.prev=$,z.next=$):($.prev=$,$.next=$),$}function Of(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function hp(l,v,b){this.i=l,this.x=v,this.y=b,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sd(l,v,b,z){for(var $=0,at=v,mt=b-z;at<b;at+=z)$+=(l[mt]-l[at])*(l[at+1]+l[mt+1]),mt=at;return $}function Bd(l,v,b,z,$){(function at(mt,Mt,oe,ge,Ce){for(;ge>oe;){if(ge-oe>600){var Ie=ge-oe+1,Ge=Mt-oe+1,Zt=Math.log(Ie),xr=.5*Math.exp(2*Zt/3),mr=.5*Math.sqrt(Zt*xr*(Ie-xr)/Ie)*(Ge-Ie/2<0?-1:1);at(mt,Mt,Math.max(oe,Math.floor(Mt-Ge*xr/Ie+mr)),Math.min(ge,Math.floor(Mt+(Ie-Ge)*xr/Ie+mr)),Ce)}var jr=mt[Mt],kr=oe,un=ge;for(kh(mt,oe,Mt),Ce(mt[ge],jr)>0&&kh(mt,oe,ge);kr<un;){for(kh(mt,kr,un),kr++,un--;Ce(mt[kr],jr)<0;)kr++;for(;Ce(mt[un],jr)>0;)un--}Ce(mt[oe],jr)===0?kh(mt,oe,un):kh(mt,++un,ge),un<=Mt&&(oe=un+1),Mt<=un&&(ge=un-1)}})(l,v,b||0,z||l.length-1,$||Fd)}function kh(l,v,b){var z=l[v];l[v]=l[b],l[b]=z}function Fd(l,v){return l<v?-1:l>v?1:0}function Nd(l,v){var b=l.length;if(b<=1)return[l];for(var z,$,at=[],mt=0;mt<b;mt++){var Mt=dt(l[mt]);Mt!==0&&(l[mt].area=Math.abs(Mt),$===void 0&&($=Mt<0),$===Mt<0?(z&&at.push(z),z=[l[mt]]):z.push(l[mt]))}if(z&&at.push(z),v>1)for(var oe=0;oe<at.length;oe++)at[oe].length<=v||(Bd(at[oe],v,1,at[oe].length-1,zd),at[oe]=at[oe].slice(0,v));return at}function zd(l,v){return v.area-l.area}function zp(l,v,b){for(var z=b.patternDependencies,$=!1,at=0,mt=v;at<mt.length;at+=1){var Mt=mt[at].paint.get(l+"-pattern");Mt.isConstant()||($=!0);var oe=Mt.constantOr(null);oe&&($=!0,z[oe.to]=!0,z[oe.from]=!0)}return $}function pp(l,v,b,z,$){for(var at=$.patternDependencies,mt=0,Mt=v;mt<Mt.length;mt+=1){var oe=Mt[mt],ge=oe.paint.get(l+"-pattern").value;if(ge.kind!=="constant"){var Ce=ge.evaluate({zoom:z-1},b,{},$.availableImages),Ie=ge.evaluate({zoom:z},b,{},$.availableImages),Ge=ge.evaluate({zoom:z+1},b,{},$.availableImages);Ie=Ie&&Ie.name?Ie.name:Ie,Ge=Ge&&Ge.name?Ge.name:Ge,at[Ce=Ce&&Ce.name?Ce.name:Ce]=!0,at[Ie]=!0,at[Ge]=!0,b.patterns[oe.id]={min:Ce,mid:Ie,max:Ge}}}return b}xc.deviation=function(l,v,b,z){var $=v&&v.length,at=Math.abs(sd(l,0,$?v[0]*b:l.length,b));if($)for(var mt=0,Mt=v.length;mt<Mt;mt++)at-=Math.abs(sd(l,v[mt]*b,mt<Mt-1?v[mt+1]*b:l.length,b));var oe=0;for(mt=0;mt<z.length;mt+=3){var ge=z[mt]*b,Ce=z[mt+1]*b,Ie=z[mt+2]*b;oe+=Math.abs((l[ge]-l[Ie])*(l[Ce+1]-l[ge+1])-(l[ge]-l[Ce])*(l[Ie+1]-l[ge+1]))}return at===0&&oe===0?0:Math.abs((oe-at)/at)},xc.flatten=function(l){for(var v=l[0][0].length,b={vertices:[],holes:[],dimensions:v},z=0,$=0;$<l.length;$++){for(var at=0;at<l[$].length;at++)for(var mt=0;mt<v;mt++)b.vertices.push(l[$][at][mt]);$>0&&b.holes.push(z+=l[$-1].length)}return b},ms.default=ad;var Pc=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Cf,this.indexArray=new qf,this.indexArray2=new Ih,this.programConfigurations=new uo(l.layers,l.zoom),this.segments=new nr,this.segments2=new nr,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};Pc.prototype.populate=function(l,v,b){this.hasPattern=zp("fill",this.layers,v);for(var z=this.layers[0].layout.get("fill-sort-key"),$=[],at=0,mt=l;at<mt.length;at+=1){var Mt=mt[at],oe=Mt.feature,ge=Mt.id,Ce=Mt.index,Ie=Mt.sourceLayerIndex,Ge=this.layers[0]._featureFilter.needGeometry,Zt=Nu(oe,Ge);if(this.layers[0]._featureFilter.filter(new Qo(this.zoom),Zt,b)){var xr=z?z.evaluate(Zt,{},b,v.availableImages):void 0,mr={id:ge,properties:oe.properties,type:oe.type,sourceLayerIndex:Ie,index:Ce,geometry:Ge?Zt.geometry:du(oe),patterns:{},sortKey:xr};$.push(mr)}}z&&$.sort(function(Bi,oa){return Bi.sortKey-oa.sortKey});for(var jr=0,kr=$;jr<kr.length;jr+=1){var un=kr[jr],En=un.geometry,kn=un.index,Gn=un.sourceLayerIndex;if(this.hasPattern){var oi=pp("fill",this.layers,un,this.zoom,v);this.patternFeatures.push(oi)}else this.addFeature(un,En,kn,b,{});v.featureIndex.insert(l[kn].feature,En,kn,Gn,this.index)}},Pc.prototype.update=function(l,v,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,v,this.stateDependentLayers,b)},Pc.prototype.addFeatures=function(l,v,b){for(var z=0,$=this.patternFeatures;z<$.length;z+=1){var at=$[z];this.addFeature(at,at.geometry,at.index,v,b)}},Pc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pc.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Od),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0},Pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Pc.prototype.addFeature=function(l,v,b,z,$){for(var at=0,mt=Nd(v,500);at<mt.length;at+=1){for(var Mt=mt[at],oe=0,ge=0,Ce=Mt;ge<Ce.length;ge+=1)oe+=Ce[ge].length;for(var Ie=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),Ge=Ie.vertexLength,Zt=[],xr=[],mr=0,jr=Mt;mr<jr.length;mr+=1){var kr=jr[mr];if(kr.length!==0){kr!==Mt[0]&&xr.push(Zt.length/2);var un=this.segments2.prepareSegment(kr.length,this.layoutVertexArray,this.indexArray2),En=un.vertexLength;this.layoutVertexArray.emplaceBack(kr[0].x,kr[0].y),this.indexArray2.emplaceBack(En+kr.length-1,En),Zt.push(kr[0].x),Zt.push(kr[0].y);for(var kn=1;kn<kr.length;kn++)this.layoutVertexArray.emplaceBack(kr[kn].x,kr[kn].y),this.indexArray2.emplaceBack(En+kn-1,En+kn),Zt.push(kr[kn].x),Zt.push(kr[kn].y);un.vertexLength+=kr.length,un.primitiveLength+=kr.length}}for(var Gn=ms(Zt,xr),oi=0;oi<Gn.length;oi+=3)this.indexArray.emplaceBack(Ge+Gn[oi],Ge+Gn[oi+1],Ge+Gn[oi+2]);Ie.vertexLength+=oe,Ie.primitiveLength+=Gn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,$,z)},Ma("FillBucket",Pc,{omit:["layers","patternFeatures"]});var Gd=new Rs({"fill-sort-key":new za(Be.layout_fill["fill-sort-key"])}),Ud={paint:new Rs({"fill-antialias":new Wa(Be.paint_fill["fill-antialias"]),"fill-opacity":new za(Be.paint_fill["fill-opacity"]),"fill-color":new za(Be.paint_fill["fill-color"]),"fill-outline-color":new za(Be.paint_fill["fill-outline-color"]),"fill-translate":new Wa(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Wa(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new qu(Be.paint_fill["fill-pattern"])}),layout:Gd},Tv=function(l){function v(b){l.call(this,b,Ud)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.recalculate=function(b,z){l.prototype.recalculate.call(this,b,z);var $=this.paint._values["fill-outline-color"];$.value.kind==="constant"&&$.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(b){return new Pc(b)},v.prototype.queryRadius=function(){return Ju(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(b,z,$,at,mt,Mt,oe){return Ac(Kc(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Mt.angle,oe),at)},v.prototype.isTileClipped=function(){return!0},v}(gs),Vd=Hs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Pv=oh;function oh(l,v,b,z,$){this.properties={},this.extent=b,this.type=0,this._pbf=l,this._geometry=-1,this._keys=z,this._values=$,l.readFields(Rh,this,v)}function Rh(l,v,b){l==1?v.id=b.readVarint():l==2?function(z,$){for(var at=z.readVarint()+z.pos;z.pos<at;){var mt=$._keys[z.readVarint()],Mt=$._values[z.readVarint()];$.properties[mt]=Mt}}(b,v):l==3?v.type=b.readVarint():l==4&&(v._geometry=b.pos)}function d0(l){for(var v,b,z=0,$=0,at=l.length,mt=at-1;$<at;mt=$++)z+=((b=l[mt]).x-(v=l[$]).x)*(v.y+b.y);return z}oh.types=["Unknown","Point","LineString","Polygon"],oh.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var v,b=l.readVarint()+l.pos,z=1,$=0,at=0,mt=0,Mt=[];l.pos<b;){if($<=0){var oe=l.readVarint();z=7&oe,$=oe>>3}if($--,z===1||z===2)at+=l.readSVarint(),mt+=l.readSVarint(),z===1&&(v&&Mt.push(v),v=[]),v.push(new R(at,mt));else{if(z!==7)throw new Error("unknown command "+z);v&&v.push(v[0].clone())}}return v&&Mt.push(v),Mt},oh.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var v=l.readVarint()+l.pos,b=1,z=0,$=0,at=0,mt=1/0,Mt=-1/0,oe=1/0,ge=-1/0;l.pos<v;){if(z<=0){var Ce=l.readVarint();b=7&Ce,z=Ce>>3}if(z--,b===1||b===2)($+=l.readSVarint())<mt&&(mt=$),$>Mt&&(Mt=$),(at+=l.readSVarint())<oe&&(oe=at),at>ge&&(ge=at);else if(b!==7)throw new Error("unknown command "+b)}return[mt,oe,Mt,ge]},oh.prototype.toGeoJSON=function(l,v,b){var z,$,at=this.extent*Math.pow(2,b),mt=this.extent*l,Mt=this.extent*v,oe=this.loadGeometry(),ge=oh.types[this.type];function Ce(Zt){for(var xr=0;xr<Zt.length;xr++){var mr=Zt[xr];Zt[xr]=[360*(mr.x+mt)/at-180,360/Math.PI*Math.atan(Math.exp((180-360*(mr.y+Mt)/at)*Math.PI/180))-90]}}switch(this.type){case 1:var Ie=[];for(z=0;z<oe.length;z++)Ie[z]=oe[z][0];Ce(oe=Ie);break;case 2:for(z=0;z<oe.length;z++)Ce(oe[z]);break;case 3:for(oe=function(Zt){var xr=Zt.length;if(xr<=1)return[Zt];for(var mr,jr,kr=[],un=0;un<xr;un++){var En=d0(Zt[un]);En!==0&&(jr===void 0&&(jr=En<0),jr===En<0?(mr&&kr.push(mr),mr=[Zt[un]]):mr.push(Zt[un]))}return mr&&kr.push(mr),kr}(oe),z=0;z<oe.length;z++)for($=0;$<oe[z].length;$++)Ce(oe[z][$])}oe.length===1?oe=oe[0]:ge="Multi"+ge;var Ge={type:"Feature",geometry:{type:ge,coordinates:oe},properties:this.properties};return"id"in this&&(Ge.id=this.id),Ge};var Zd=v0;function v0(l,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(vy,this,v),this.length=this._features.length}function vy(l,v,b){l===15?v.version=b.readVarint():l===1?v.name=b.readString():l===5?v.extent=b.readVarint():l===2?v._features.push(b.pos):l===3?v._keys.push(b.readString()):l===4&&v._values.push(function(z){for(var $=null,at=z.readVarint()+z.pos;z.pos<at;){var mt=z.readVarint()>>3;$=mt===1?z.readString():mt===2?z.readFloat():mt===3?z.readDouble():mt===4?z.readVarint64():mt===5?z.readVarint():mt===6?z.readSVarint():mt===7?z.readBoolean():null}return $}(b))}function im(l,v,b){if(l===3){var z=new Zd(b,b.readVarint()+b.pos);z.length&&(v[z.name]=z)}}v0.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var v=this._pbf.readVarint()+this._pbf.pos;return new Pv(this._pbf,v,this.extent,this._keys,this._values)};var jc={VectorTile:function(l,v){this.layers=l.readFields(im,{},v)},VectorTileFeature:Pv,VectorTileLayer:Zd},Eg=jc.VectorTileFeature.types,Iv=Math.pow(2,13);function dp(l,v,b,z,$,at,mt,Mt){l.emplaceBack(v,b,2*Math.floor(z*Iv)+mt,$*Iv*2,at*Iv*2,Math.round(Mt))}var gf=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new as,this.indexArray=new qf,this.programConfigurations=new uo(l.layers,l.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function g0(l,v){return l.x===v.x&&(l.x<0||l.x>8192)||l.y===v.y&&(l.y<0||l.y>8192)}gf.prototype.populate=function(l,v,b){this.features=[],this.hasPattern=zp("fill-extrusion",this.layers,v);for(var z=0,$=l;z<$.length;z+=1){var at=$[z],mt=at.feature,Mt=at.id,oe=at.index,ge=at.sourceLayerIndex,Ce=this.layers[0]._featureFilter.needGeometry,Ie=Nu(mt,Ce);if(this.layers[0]._featureFilter.filter(new Qo(this.zoom),Ie,b)){var Ge={id:Mt,sourceLayerIndex:ge,index:oe,geometry:Ce?Ie.geometry:du(mt),properties:mt.properties,type:mt.type,patterns:{}};this.hasPattern?this.features.push(pp("fill-extrusion",this.layers,Ge,this.zoom,v)):this.addFeature(Ge,Ge.geometry,oe,b,{}),v.featureIndex.insert(mt,Ge.geometry,oe,ge,this.index,!0)}}},gf.prototype.addFeatures=function(l,v,b){for(var z=0,$=this.features;z<$.length;z+=1){var at=$[z];this.addFeature(at,at.geometry,at.index,v,b)}},gf.prototype.update=function(l,v,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,v,this.stateDependentLayers,b)},gf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},gf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gf.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Vd),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},gf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},gf.prototype.addFeature=function(l,v,b,z,$){for(var at=0,mt=Nd(v,500);at<mt.length;at+=1){for(var Mt=mt[at],oe=0,ge=0,Ce=Mt;ge<Ce.length;ge+=1)oe+=Ce[ge].length;for(var Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ge=0,Zt=Mt;Ge<Zt.length;Ge+=1){var xr=Zt[Ge];if(xr.length!==0&&!((qo=xr).every(function(jo){return jo.x<0})||qo.every(function(jo){return jo.x>8192})||qo.every(function(jo){return jo.y<0})||qo.every(function(jo){return jo.y>8192})))for(var mr=0,jr=0;jr<xr.length;jr++){var kr=xr[jr];if(jr>=1){var un=xr[jr-1];if(!g0(kr,un)){Ie.vertexLength+4>nr.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var En=kr.sub(un)._perp()._unit(),kn=un.dist(kr);mr+kn>32768&&(mr=0),dp(this.layoutVertexArray,kr.x,kr.y,En.x,En.y,0,0,mr),dp(this.layoutVertexArray,kr.x,kr.y,En.x,En.y,0,1,mr),dp(this.layoutVertexArray,un.x,un.y,En.x,En.y,0,0,mr+=kn),dp(this.layoutVertexArray,un.x,un.y,En.x,En.y,0,1,mr);var Gn=Ie.vertexLength;this.indexArray.emplaceBack(Gn,Gn+2,Gn+1),this.indexArray.emplaceBack(Gn+1,Gn+2,Gn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2}}}}if(Ie.vertexLength+oe>nr.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray)),Eg[l.type]==="Polygon"){for(var oi=[],Bi=[],oa=Ie.vertexLength,eo=0,ba=Mt;eo<ba.length;eo+=1){var lo=ba[eo];if(lo.length!==0){lo!==Mt[0]&&Bi.push(oi.length/2);for(var Ea=0;Ea<lo.length;Ea++){var es=lo[Ea];dp(this.layoutVertexArray,es.x,es.y,0,0,1,1,0),oi.push(es.x),oi.push(es.y)}}}for(var Ao=ms(oi,Bi),Za=0;Za<Ao.length;Za+=3)this.indexArray.emplaceBack(oa+Ao[Za],oa+Ao[Za+2],oa+Ao[Za+1]);Ie.primitiveLength+=Ao.length/3,Ie.vertexLength+=oe}}var qo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,$,z)},Ma("FillExtrusionBucket",gf,{omit:["layers","features"]});var am={paint:new Rs({"fill-extrusion-opacity":new Wa(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new za(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wa(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wa(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qu(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new za(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new za(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wa(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},sh=function(l){function v(b){l.call(this,b,am)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.createBucket=function(b){return new gf(b)},v.prototype.queryRadius=function(){return Ju(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(b,z,$,at,mt,Mt,oe,ge){var Ce=Kc(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Mt.angle,oe),Ie=this.paint.get("fill-extrusion-height").evaluate(z,$),Ge=this.paint.get("fill-extrusion-base").evaluate(z,$),Zt=function(mr,jr,kr,un){for(var En=[],kn=0,Gn=mr;kn<Gn.length;kn+=1){var oi=Gn[kn],Bi=[oi.x,oi.y,0,1];Dp(Bi,Bi,jr),En.push(new R(Bi[0]/Bi[3],Bi[1]/Bi[3]))}return En}(Ce,ge),xr=function(mr,jr,kr,un){for(var En=[],kn=[],Gn=un[8]*jr,oi=un[9]*jr,Bi=un[10]*jr,oa=un[11]*jr,eo=un[8]*kr,ba=un[9]*kr,lo=un[10]*kr,Ea=un[11]*kr,es=0,Ao=mr;es<Ao.length;es+=1){for(var Za=[],qo=[],jo=0,ys=Ao[es];jo<ys.length;jo+=1){var co=ys[jo],Fs=co.x,Cu=co.y,el=un[0]*Fs+un[4]*Cu+un[12],_u=un[1]*Fs+un[5]*Cu+un[13],Ru=un[2]*Fs+un[6]*Cu+un[14],bu=un[3]*Fs+un[7]*Cu+un[15],Bl=Ru+Bi,Il=bu+oa,Fl=el+eo,Nl=_u+ba,lc=Ru+lo,rl=bu+Ea,Ol=new R((el+Gn)/Il,(_u+oi)/Il);Ol.z=Bl/Il,Za.push(Ol);var us=new R(Fl/rl,Nl/rl);us.z=lc/rl,qo.push(us)}En.push(Za),kn.push(qo)}return[En,kn]}(at,Ge,Ie,ge);return function(mr,jr,kr){var un=1/0;Ac(kr,jr)&&(un=Lf(kr,jr[0]));for(var En=0;En<jr.length;En++)for(var kn=jr[En],Gn=mr[En],oi=0;oi<kn.length-1;oi++){var Bi=kn[oi],oa=[Bi,kn[oi+1],Gn[oi+1],Gn[oi],Bi];tc(kr,oa)&&(un=Math.min(un,Lf(kr,oa)))}return un!==1/0&&un}(xr[0],xr[1],Zt)},v}(gs);function Gp(l,v){return l.x*v.x+l.y*v.y}function Lf(l,v){if(l.length===1){for(var b,z=0,$=v[z++];!b||$.equals(b);)if(!(b=v[z++]))return 1/0;for(;z<v.length;z++){var at=v[z],mt=l[0],Mt=b.sub($),oe=at.sub($),ge=mt.sub($),Ce=Gp(Mt,Mt),Ie=Gp(Mt,oe),Ge=Gp(oe,oe),Zt=Gp(ge,Mt),xr=Gp(ge,oe),mr=Ce*Ge-Ie*Ie,jr=(Ge*Zt-Ie*xr)/mr,kr=(Ce*xr-Ie*Zt)/mr,un=$.z*(1-jr-kr)+b.z*jr+at.z*kr;if(isFinite(un))return un}return 1/0}for(var En=1/0,kn=0,Gn=v;kn<Gn.length;kn+=1)En=Math.min(En,Gn[kn].z);return En}var vp=Hs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,fu=Hs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,uh=jc.VectorTileFeature.types,Hd=Math.cos(Math.PI/180*37.5),Cg=Math.pow(2,14)/.5,Us=function(l){var v=this;this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(b){return b.id}),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(b){v.gradients[b.id]={}}),this.layoutVertexArray=new gu,this.layoutVertexArray2=new pc,this.indexArray=new qf,this.programConfigurations=new uo(l.layers,l.zoom),this.segments=new nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id})};Us.prototype.populate=function(l,v,b){this.hasPattern=zp("line",this.layers,v);for(var z=this.layers[0].layout.get("line-sort-key"),$=[],at=0,mt=l;at<mt.length;at+=1){var Mt=mt[at],oe=Mt.feature,ge=Mt.id,Ce=Mt.index,Ie=Mt.sourceLayerIndex,Ge=this.layers[0]._featureFilter.needGeometry,Zt=Nu(oe,Ge);if(this.layers[0]._featureFilter.filter(new Qo(this.zoom),Zt,b)){var xr=z?z.evaluate(Zt,{},b):void 0,mr={id:ge,properties:oe.properties,type:oe.type,sourceLayerIndex:Ie,index:Ce,geometry:Ge?Zt.geometry:du(oe),patterns:{},sortKey:xr};$.push(mr)}}z&&$.sort(function(Bi,oa){return Bi.sortKey-oa.sortKey});for(var jr=0,kr=$;jr<kr.length;jr+=1){var un=kr[jr],En=un.geometry,kn=un.index,Gn=un.sourceLayerIndex;if(this.hasPattern){var oi=pp("line",this.layers,un,this.zoom,v);this.patternFeatures.push(oi)}else this.addFeature(un,En,kn,b,{});v.featureIndex.insert(l[kn].feature,En,kn,Gn,this.index)}},Us.prototype.update=function(l,v,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,v,this.stateDependentLayers,b)},Us.prototype.addFeatures=function(l,v,b){for(var z=0,$=this.patternFeatures;z<$.length;z+=1){var at=$[z];this.addFeature(at,at.geometry,at.index,v,b)}},Us.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,fu)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,vp),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Us.prototype.lineFeatureClips=function(l){if(l.properties&&l.properties.hasOwnProperty("mapbox_clip_start")&&l.properties.hasOwnProperty("mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}},Us.prototype.addFeature=function(l,v,b,z,$){var at=this.layers[0].layout,mt=at.get("line-join").evaluate(l,{}),Mt=at.get("line-cap"),oe=at.get("line-miter-limit"),ge=at.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(var Ce=0,Ie=v;Ce<Ie.length;Ce+=1)this.addLine(Ie[Ce],l,mt,Mt,oe,ge);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,b,$,z)},Us.prototype.addLine=function(l,v,b,z,$,at){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var mt=0;mt<l.length-1;mt++)this.totalDistance+=l[mt].dist(l[mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Mt=uh[v.type]==="Polygon",oe=l.length;oe>=2&&l[oe-1].equals(l[oe-2]);)oe--;for(var ge=0;ge<oe-1&&l[ge].equals(l[ge+1]);)ge++;if(!(oe<(Mt?3:2))){b==="bevel"&&($=1.05);var Ce,Ie=this.overscaling<=16?122880/(512*this.overscaling):0,Ge=this.segments.prepareSegment(10*oe,this.layoutVertexArray,this.indexArray),Zt=void 0,xr=void 0,mr=void 0,jr=void 0;this.e1=this.e2=-1,Mt&&(jr=l[ge].sub(Ce=l[oe-2])._unit()._perp());for(var kr=ge;kr<oe;kr++)if(!(xr=kr===oe-1?Mt?l[ge+1]:void 0:l[kr+1])||!l[kr].equals(xr)){jr&&(mr=jr),Ce&&(Zt=Ce),Ce=l[kr],jr=xr?xr.sub(Ce)._unit()._perp():mr;var un=(mr=mr||jr).add(jr);un.x===0&&un.y===0||un._unit();var En=mr.x*jr.x+mr.y*jr.y,kn=un.x*jr.x+un.y*jr.y,Gn=kn!==0?1/kn:1/0,oi=2*Math.sqrt(2-2*kn),Bi=kn<Hd&&Zt&&xr,oa=mr.x*jr.y-mr.y*jr.x>0;if(Bi&&kr>ge){var eo=Ce.dist(Zt);if(eo>2*Ie){var ba=Ce.sub(Ce.sub(Zt)._mult(Ie/eo)._round());this.updateDistance(Zt,ba),this.addCurrentVertex(ba,mr,0,0,Ge),Zt=ba}}var lo=Zt&&xr,Ea=lo?b:Mt?"butt":z;if(lo&&Ea==="round"&&(Gn<at?Ea="miter":Gn<=2&&(Ea="fakeround")),Ea==="miter"&&Gn>$&&(Ea="bevel"),Ea==="bevel"&&(Gn>2&&(Ea="flipbevel"),Gn<$&&(Ea="miter")),Zt&&this.updateDistance(Zt,Ce),Ea==="miter")un._mult(Gn),this.addCurrentVertex(Ce,un,0,0,Ge);else if(Ea==="flipbevel"){if(Gn>100)un=jr.mult(-1);else{var es=Gn*mr.add(jr).mag()/mr.sub(jr).mag();un._perp()._mult(es*(oa?-1:1))}this.addCurrentVertex(Ce,un,0,0,Ge),this.addCurrentVertex(Ce,un.mult(-1),0,0,Ge)}else if(Ea==="bevel"||Ea==="fakeround"){var Ao=-Math.sqrt(Gn*Gn-1),Za=oa?Ao:0,qo=oa?0:Ao;if(Zt&&this.addCurrentVertex(Ce,mr,Za,qo,Ge),Ea==="fakeround")for(var jo=Math.round(180*oi/Math.PI/20),ys=1;ys<jo;ys++){var co=ys/jo;if(co!==.5){var Fs=co-.5;co+=co*Fs*(co-1)*((1.0904+En*(En*(3.55645-1.43519*En)-3.2452))*Fs*Fs+(.848013+En*(.215638*En-1.06021)))}var Cu=jr.sub(mr)._mult(co)._add(mr)._unit()._mult(oa?-1:1);this.addHalfVertex(Ce,Cu.x,Cu.y,!1,oa,0,Ge)}xr&&this.addCurrentVertex(Ce,jr,-Za,-qo,Ge)}else if(Ea==="butt")this.addCurrentVertex(Ce,un,0,0,Ge);else if(Ea==="square"){var el=Zt?1:-1;this.addCurrentVertex(Ce,un,el,el,Ge)}else Ea==="round"&&(Zt&&(this.addCurrentVertex(Ce,mr,0,0,Ge),this.addCurrentVertex(Ce,mr,1,1,Ge,!0)),xr&&(this.addCurrentVertex(Ce,jr,-1,-1,Ge,!0),this.addCurrentVertex(Ce,jr,0,0,Ge)));if(Bi&&kr<oe-1){var _u=Ce.dist(xr);if(_u>2*Ie){var Ru=Ce.add(xr.sub(Ce)._mult(Ie/_u)._round());this.updateDistance(Ce,Ru),this.addCurrentVertex(Ru,jr,0,0,Ge),Ce=Ru}}}}},Us.prototype.addCurrentVertex=function(l,v,b,z,$,at){at===void 0&&(at=!1);var mt=v.y*z-v.x,Mt=-v.y-v.x*z;this.addHalfVertex(l,v.x+v.y*b,v.y-v.x*b,at,!1,b,$),this.addHalfVertex(l,mt,Mt,at,!0,-z,$),this.distance>Cg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(l,v,b,z,$,at))},Us.prototype.addHalfVertex=function(l,v,b,z,$,at,mt){var Mt=.5*(this.lineClips?this.scaledDistance*(Cg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l.x<<1)+(z?1:0),(l.y<<1)+($?1:0),Math.round(63*v)+128,Math.round(63*b)+128,1+(at===0?0:at<0?-1:1)|(63&Mt)<<2,Mt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var oe=mt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,oe),mt.primitiveLength++),$?this.e2=oe:this.e1=oe},Us.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Us.prototype.updateDistance=function(l,v){this.distance+=l.dist(v),this.updateScaledDistance()},Ma("LineBucket",Us,{omit:["layers","patternFeatures"]});var gp=new Rs({"line-cap":new Wa(Be.layout_line["line-cap"]),"line-join":new za(Be.layout_line["line-join"]),"line-miter-limit":new Wa(Be.layout_line["line-miter-limit"]),"line-round-limit":new Wa(Be.layout_line["line-round-limit"]),"line-sort-key":new za(Be.layout_line["line-sort-key"])}),tl={paint:new Rs({"line-opacity":new za(Be.paint_line["line-opacity"]),"line-color":new za(Be.paint_line["line-color"]),"line-translate":new Wa(Be.paint_line["line-translate"]),"line-translate-anchor":new Wa(Be.paint_line["line-translate-anchor"]),"line-width":new za(Be.paint_line["line-width"]),"line-gap-width":new za(Be.paint_line["line-gap-width"]),"line-offset":new za(Be.paint_line["line-offset"]),"line-blur":new za(Be.paint_line["line-blur"]),"line-dasharray":new Zo(Be.paint_line["line-dasharray"]),"line-pattern":new qu(Be.paint_line["line-pattern"]),"line-gradient":new uc(Be.paint_line["line-gradient"])}),layout:gp},Ic=new(function(l){function v(){l.apply(this,arguments)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(b,z){return z=new Qo(Math.floor(z.zoom),{now:z.now,fadeDuration:z.fadeDuration,zoomHistory:z.zoomHistory,transition:z.transition}),l.prototype.possiblyEvaluate.call(this,b,z)},v.prototype.evaluate=function(b,z,$,at){return z=X({},z,{zoom:Math.floor(z.zoom)}),l.prototype.evaluate.call(this,b,z,$,at)},v}(za))(tl.paint.properties["line-width"].specification);Ic.useIntegerZoom=!0;var jd=function(l){function v(b){l.call(this,b,tl),this.gradientVersion=0}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(b){b==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ou,this.gradientVersion=(this.gradientVersion+1)%D)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(b,z){l.prototype.recalculate.call(this,b,z),this.paint._values["line-floorwidth"]=Ic.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,b)},v.prototype.createBucket=function(b){return new Us(b)},v.prototype.queryRadius=function(b){var z=b,$=m0(Zc("line-width",this,z),Zc("line-gap-width",this,z)),at=Zc("line-offset",this,z);return $/2+Math.abs(at)+Ju(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(b,z,$,at,mt,Mt,oe){var ge=Kc(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Mt.angle,oe),Ce=oe/2*m0(this.paint.get("line-width").evaluate(z,$),this.paint.get("line-gap-width").evaluate(z,$)),Ie=this.paint.get("line-offset").evaluate(z,$);return Ie&&(at=function(Ge,Zt){for(var xr=[],mr=new R(0,0),jr=0;jr<Ge.length;jr++){for(var kr=Ge[jr],un=[],En=0;En<kr.length;En++){var kn=kr[En],Gn=kr[En+1],oi=En===0?mr:kn.sub(kr[En-1])._unit()._perp(),Bi=En===kr.length-1?mr:Gn.sub(kn)._unit()._perp(),oa=oi._add(Bi)._unit();oa._mult(1/(oa.x*Bi.x+oa.y*Bi.y)),un.push(oa._mult(Zt)._add(kn))}xr.push(un)}return xr}(at,Ie*oe)),function(Ge,Zt,xr){for(var mr=0;mr<Zt.length;mr++){var jr=Zt[mr];if(Ge.length>=3){for(var kr=0;kr<jr.length;kr++)if(gc(Ge,jr[kr]))return!0}if(Mc(Ge,jr,xr))return!0}return!1}(ge,at,Ce)},v.prototype.isTileClipped=function(){return!0},v}(gs);function m0(l,v){return v>0?v+2*l:l}var om=Hs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kf=Hs([{name:"a_projected_pos",components:3,type:"Float32"}],4),Xd=(Hs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Up=(Hs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ag=Hs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yd(l,v,b){return l.sections.forEach(function(z){z.text=function($,at,mt){var Mt=at.layout.get("text-transform").evaluate(mt,{});return Mt==="uppercase"?$=$.toLocaleUpperCase():Mt==="lowercase"&&($=$.toLocaleLowerCase()),sc.applyArabicShaping&&($=sc.applyArabicShaping($)),$}(z.text,v,b)}),l}Hs([{name:"triangle",components:3,type:"Uint16"}]),Hs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hs([{type:"Float32",name:"offsetX"}]),Hs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Dh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},gl=function(l,v,b,z,$){var at,mt,Mt=8*$-z-1,oe=(1<<Mt)-1,ge=oe>>1,Ce=-7,Ie=b?$-1:0,Ge=b?-1:1,Zt=l[v+Ie];for(Ie+=Ge,at=Zt&(1<<-Ce)-1,Zt>>=-Ce,Ce+=Mt;Ce>0;at=256*at+l[v+Ie],Ie+=Ge,Ce-=8);for(mt=at&(1<<-Ce)-1,at>>=-Ce,Ce+=z;Ce>0;mt=256*mt+l[v+Ie],Ie+=Ge,Ce-=8);if(at===0)at=1-ge;else{if(at===oe)return mt?NaN:1/0*(Zt?-1:1);mt+=Math.pow(2,z),at-=ge}return(Zt?-1:1)*mt*Math.pow(2,at-z)},Wd=function(l,v,b,z,$,at){var mt,Mt,oe,ge=8*at-$-1,Ce=(1<<ge)-1,Ie=Ce>>1,Ge=$===23?Math.pow(2,-24)-Math.pow(2,-77):0,Zt=z?0:at-1,xr=z?1:-1,mr=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(Mt=isNaN(v)?1:0,mt=Ce):(mt=Math.floor(Math.log(v)/Math.LN2),v*(oe=Math.pow(2,-mt))<1&&(mt--,oe*=2),(v+=mt+Ie>=1?Ge/oe:Ge*Math.pow(2,1-Ie))*oe>=2&&(mt++,oe/=2),mt+Ie>=Ce?(Mt=0,mt=Ce):mt+Ie>=1?(Mt=(v*oe-1)*Math.pow(2,$),mt+=Ie):(Mt=v*Math.pow(2,Ie-1)*Math.pow(2,$),mt=0));$>=8;l[b+Zt]=255&Mt,Zt+=xr,Mt/=256,$-=8);for(mt=mt<<$|Mt,ge+=$;ge>0;l[b+Zt]=255&mt,Zt+=xr,mt/=256,ge-=8);l[b+Zt-xr]|=128*mr},Kd=eu;function eu(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}eu.Varint=0,eu.Fixed64=1,eu.Bytes=2,eu.Fixed32=5;var Mg=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Rf(l){return l.type===eu.Bytes?l.readVarint()+l.pos:l.pos+1}function ud(l,v,b){return b?4294967296*v+(l>>>0):4294967296*(v>>>0)+(l>>>0)}function Ov(l,v,b){var z=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));b.realloc(z);for(var $=b.pos-1;$>=l;$--)b.buf[$+z]=b.buf[$]}function gy(l,v){for(var b=0;b<l.length;b++)v.writeVarint(l[b])}function be(l,v){for(var b=0;b<l.length;b++)v.writeSVarint(l[b])}function ar(l,v){for(var b=0;b<l.length;b++)v.writeFloat(l[b])}function Pr(l,v){for(var b=0;b<l.length;b++)v.writeDouble(l[b])}function Ln(l,v){for(var b=0;b<l.length;b++)v.writeBoolean(l[b])}function ni(l,v){for(var b=0;b<l.length;b++)v.writeFixed32(l[b])}function On(l,v){for(var b=0;b<l.length;b++)v.writeSFixed32(l[b])}function Wn(l,v){for(var b=0;b<l.length;b++)v.writeFixed64(l[b])}function fi(l,v){for(var b=0;b<l.length;b++)v.writeSFixed64(l[b])}function xi(l,v){return(l[v]|l[v+1]<<8|l[v+2]<<16)+16777216*l[v+3]}function Ii(l,v,b){l[b]=v,l[b+1]=v>>>8,l[b+2]=v>>>16,l[b+3]=v>>>24}function Ni(l,v){return(l[v]|l[v+1]<<8|l[v+2]<<16)+(l[v+3]<<24)}function zi(l,v,b){l===1&&b.readMessage(ra,v)}function ra(l,v,b){if(l===3){var z=b.readMessage(Mi,{}),$=z.width,at=z.height,mt=z.left,Mt=z.top,oe=z.advance;v.push({id:z.id,bitmap:new Hc({width:$+6,height:at+6},z.bitmap),metrics:{width:$,height:at,left:mt,top:Mt,advance:oe}})}}function Mi(l,v,b){l===1?v.id=b.readVarint():l===2?v.bitmap=b.readBytes():l===3?v.width=b.readVarint():l===4?v.height=b.readVarint():l===5?v.left=b.readSVarint():l===6?v.top=b.readSVarint():l===7&&(v.advance=b.readVarint())}function Di(l){for(var v=0,b=0,z=0,$=l;z<$.length;z+=1){var at=$[z];v+=at.w*at.h,b=Math.max(b,at.w)}l.sort(function(mr,jr){return jr.h-mr.h});for(var mt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),b),h:1/0}],Mt=0,oe=0,ge=0,Ce=l;ge<Ce.length;ge+=1)for(var Ie=Ce[ge],Ge=mt.length-1;Ge>=0;Ge--){var Zt=mt[Ge];if(!(Ie.w>Zt.w||Ie.h>Zt.h)){if(Ie.x=Zt.x,Ie.y=Zt.y,oe=Math.max(oe,Ie.y+Ie.h),Mt=Math.max(Mt,Ie.x+Ie.w),Ie.w===Zt.w&&Ie.h===Zt.h){var xr=mt.pop();Ge<mt.length&&(mt[Ge]=xr)}else Ie.h===Zt.h?(Zt.x+=Ie.w,Zt.w-=Ie.w):Ie.w===Zt.w?(Zt.y+=Ie.h,Zt.h-=Ie.h):(mt.push({x:Zt.x+Ie.w,y:Zt.y,w:Zt.w-Ie.w,h:Ie.h}),Zt.y+=Ie.h,Zt.h-=Ie.h);break}}return{w:Mt,h:oe,fill:v/(Mt*oe)||0}}eu.prototype={destroy:function(){this.buf=null},readFields:function(l,v,b){for(b=b||this.length;this.pos<b;){var z=this.readVarint(),$=z>>3,at=this.pos;this.type=7&z,l($,v,this),this.pos===at&&this.skip(z)}return v},readMessage:function(l,v){return this.readFields(l,v,this.readVarint()+this.pos)},readFixed32:function(){var l=xi(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Ni(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=xi(this.buf,this.pos)+4294967296*xi(this.buf,this.pos+4);return this.pos+=8,l},readSFixed64:function(){var l=xi(this.buf,this.pos)+4294967296*Ni(this.buf,this.pos+4);return this.pos+=8,l},readFloat:function(){var l=gl(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=gl(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var v,b,z=this.buf;return v=127&(b=z[this.pos++]),b<128?v:(v|=(127&(b=z[this.pos++]))<<7,b<128?v:(v|=(127&(b=z[this.pos++]))<<14,b<128?v:(v|=(127&(b=z[this.pos++]))<<21,b<128?v:function($,at,mt){var Mt,oe,ge=mt.buf;if(Mt=(112&(oe=ge[mt.pos++]))>>4,oe<128||(Mt|=(127&(oe=ge[mt.pos++]))<<3,oe<128)||(Mt|=(127&(oe=ge[mt.pos++]))<<10,oe<128)||(Mt|=(127&(oe=ge[mt.pos++]))<<17,oe<128)||(Mt|=(127&(oe=ge[mt.pos++]))<<24,oe<128)||(Mt|=(1&(oe=ge[mt.pos++]))<<31,oe<128))return ud($,Mt,at);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(b=z[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,v=this.pos;return this.pos=l,l-v>=12&&Mg?function(b,z,$){return Mg.decode(b.subarray(z,$))}(this.buf,v,l):function(b,z,$){for(var at="",mt=z;mt<$;){var Mt,oe,ge,Ce=b[mt],Ie=null,Ge=Ce>239?4:Ce>223?3:Ce>191?2:1;if(mt+Ge>$)break;Ge===1?Ce<128&&(Ie=Ce):Ge===2?(192&(Mt=b[mt+1]))==128&&(Ie=(31&Ce)<<6|63&Mt)<=127&&(Ie=null):Ge===3?(oe=b[mt+2],(192&(Mt=b[mt+1]))==128&&(192&oe)==128&&((Ie=(15&Ce)<<12|(63&Mt)<<6|63&oe)<=2047||Ie>=55296&&Ie<=57343)&&(Ie=null)):Ge===4&&(oe=b[mt+2],ge=b[mt+3],(192&(Mt=b[mt+1]))==128&&(192&oe)==128&&(192&ge)==128&&((Ie=(15&Ce)<<18|(63&Mt)<<12|(63&oe)<<6|63&ge)<=65535||Ie>=1114112)&&(Ie=null)),Ie===null?(Ie=65533,Ge=1):Ie>65535&&(Ie-=65536,at+=String.fromCharCode(Ie>>>10&1023|55296),Ie=56320|1023&Ie),at+=String.fromCharCode(Ie),mt+=Ge}return at}(this.buf,v,l)},readBytes:function(){var l=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,l);return this.pos=l,v},readPackedVarint:function(l,v){if(this.type!==eu.Bytes)return l.push(this.readVarint(v));var b=Rf(this);for(l=l||[];this.pos<b;)l.push(this.readVarint(v));return l},readPackedSVarint:function(l){if(this.type!==eu.Bytes)return l.push(this.readSVarint());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==eu.Bytes)return l.push(this.readBoolean());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==eu.Bytes)return l.push(this.readFloat());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==eu.Bytes)return l.push(this.readDouble());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==eu.Bytes)return l.push(this.readFixed32());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==eu.Bytes)return l.push(this.readSFixed32());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==eu.Bytes)return l.push(this.readFixed64());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==eu.Bytes)return l.push(this.readSFixed64());var v=Rf(this);for(l=l||[];this.pos<v;)l.push(this.readSFixed64());return l},skip:function(l){var v=7&l;if(v===eu.Varint)for(;this.buf[this.pos++]>127;);else if(v===eu.Bytes)this.pos=this.readVarint()+this.pos;else if(v===eu.Fixed32)this.pos+=4;else{if(v!==eu.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(l,v){this.writeVarint(l<<3|v)},realloc:function(l){for(var v=this.length||16;v<this.pos+l;)v*=2;if(v!==this.length){var b=new Uint8Array(v);b.set(this.buf),this.buf=b,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Ii(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Ii(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Ii(this.buf,-1&l,this.pos),Ii(this.buf,Math.floor(l*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Ii(this.buf,-1&l,this.pos),Ii(this.buf,Math.floor(l*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(v,b){var z,$;if(v>=0?(z=v%4294967296|0,$=v/4294967296|0):($=~(-v/4294967296),4294967295^(z=~(-v%4294967296))?z=z+1|0:(z=0,$=$+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),function(at,mt,Mt){Mt.buf[Mt.pos++]=127&at|128,at>>>=7,Mt.buf[Mt.pos++]=127&at|128,at>>>=7,Mt.buf[Mt.pos++]=127&at|128,at>>>=7,Mt.buf[Mt.pos++]=127&at|128,Mt.buf[Mt.pos]=127&(at>>>=7)}(z,0,b),function(at,mt){var Mt=(7&at)<<4;mt.buf[mt.pos++]|=Mt|((at>>>=3)?128:0),at&&(mt.buf[mt.pos++]=127&at|((at>>>=7)?128:0),at&&(mt.buf[mt.pos++]=127&at|((at>>>=7)?128:0),at&&(mt.buf[mt.pos++]=127&at|((at>>>=7)?128:0),at&&(mt.buf[mt.pos++]=127&at|((at>>>=7)?128:0),at&&(mt.buf[mt.pos++]=127&at)))))}($,b)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var v=this.pos;this.pos=function(z,$,at){for(var mt,Mt,oe=0;oe<$.length;oe++){if((mt=$.charCodeAt(oe))>55295&&mt<57344){if(!Mt){mt>56319||oe+1===$.length?(z[at++]=239,z[at++]=191,z[at++]=189):Mt=mt;continue}if(mt<56320){z[at++]=239,z[at++]=191,z[at++]=189,Mt=mt;continue}mt=Mt-55296<<10|mt-56320|65536,Mt=null}else Mt&&(z[at++]=239,z[at++]=191,z[at++]=189,Mt=null);mt<128?z[at++]=mt:(mt<2048?z[at++]=mt>>6|192:(mt<65536?z[at++]=mt>>12|224:(z[at++]=mt>>18|240,z[at++]=mt>>12&63|128),z[at++]=mt>>6&63|128),z[at++]=63&mt|128)}return at}(this.buf,l,this.pos);var b=this.pos-v;b>=128&&Ov(v,b,this),this.pos=v-1,this.writeVarint(b),this.pos+=b},writeFloat:function(l){this.realloc(4),Wd(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Wd(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var v=l.length;this.writeVarint(v),this.realloc(v);for(var b=0;b<v;b++)this.buf[this.pos++]=l[b]},writeRawMessage:function(l,v){this.pos++;var b=this.pos;l(v,this);var z=this.pos-b;z>=128&&Ov(b,z,this),this.pos=b-1,this.writeVarint(z),this.pos+=z},writeMessage:function(l,v,b){this.writeTag(l,eu.Bytes),this.writeRawMessage(v,b)},writePackedVarint:function(l,v){v.length&&this.writeMessage(l,gy,v)},writePackedSVarint:function(l,v){v.length&&this.writeMessage(l,be,v)},writePackedBoolean:function(l,v){v.length&&this.writeMessage(l,Ln,v)},writePackedFloat:function(l,v){v.length&&this.writeMessage(l,ar,v)},writePackedDouble:function(l,v){v.length&&this.writeMessage(l,Pr,v)},writePackedFixed32:function(l,v){v.length&&this.writeMessage(l,ni,v)},writePackedSFixed32:function(l,v){v.length&&this.writeMessage(l,On,v)},writePackedFixed64:function(l,v){v.length&&this.writeMessage(l,Wn,v)},writePackedSFixed64:function(l,v){v.length&&this.writeMessage(l,fi,v)},writeBytesField:function(l,v){this.writeTag(l,eu.Bytes),this.writeBytes(v)},writeFixed32Field:function(l,v){this.writeTag(l,eu.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(l,v){this.writeTag(l,eu.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(l,v){this.writeTag(l,eu.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(l,v){this.writeTag(l,eu.Fixed64),this.writeSFixed64(v)},writeVarintField:function(l,v){this.writeTag(l,eu.Varint),this.writeVarint(v)},writeSVarintField:function(l,v){this.writeTag(l,eu.Varint),this.writeSVarint(v)},writeStringField:function(l,v){this.writeTag(l,eu.Bytes),this.writeString(v)},writeFloatField:function(l,v){this.writeTag(l,eu.Fixed32),this.writeFloat(v)},writeDoubleField:function(l,v){this.writeTag(l,eu.Fixed64),this.writeDouble(v)},writeBooleanField:function(l,v){this.writeVarintField(l,Boolean(v))}};var fn=function(l,v){var b=v.pixelRatio,z=v.version,$=v.stretchX,at=v.stretchY,mt=v.content;this.paddedRect=l,this.pixelRatio=b,this.stretchX=$,this.stretchY=at,this.content=mt,this.version=z},zn={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zn.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zn.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zn.tlbr.get=function(){return this.tl.concat(this.br)},zn.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(fn.prototype,zn);var Ai=function(l,v){var b={},z={};this.haveRenderCallbacks=[];var $=[];this.addImages(l,b,$),this.addImages(v,z,$);var at=Di($),mt=new ol({width:at.w||1,height:at.h||1});for(var Mt in l){var oe=l[Mt],ge=b[Mt].paddedRect;ol.copy(oe.data,mt,{x:0,y:0},{x:ge.x+1,y:ge.y+1},oe.data)}for(var Ce in v){var Ie=v[Ce],Ge=z[Ce].paddedRect,Zt=Ge.x+1,xr=Ge.y+1,mr=Ie.data.width,jr=Ie.data.height;ol.copy(Ie.data,mt,{x:0,y:0},{x:Zt,y:xr},Ie.data),ol.copy(Ie.data,mt,{x:0,y:jr-1},{x:Zt,y:xr-1},{width:mr,height:1}),ol.copy(Ie.data,mt,{x:0,y:0},{x:Zt,y:xr+jr},{width:mr,height:1}),ol.copy(Ie.data,mt,{x:mr-1,y:0},{x:Zt-1,y:xr},{width:1,height:jr}),ol.copy(Ie.data,mt,{x:0,y:0},{x:Zt+mr,y:xr},{width:1,height:jr})}this.image=mt,this.iconPositions=b,this.patternPositions=z};Ai.prototype.addImages=function(l,v,b){for(var z in l){var $=l[z],at={x:0,y:0,w:$.data.width+2,h:$.data.height+2};b.push(at),v[z]=new fn(at,$),$.hasRenderCallback&&this.haveRenderCallbacks.push(z)}},Ai.prototype.patchUpdatedImages=function(l,v){for(var b in l.dispatchRenderCallbacks(this.haveRenderCallbacks),l.updatedImages)this.patchUpdatedImage(this.iconPositions[b],l.getImage(b),v),this.patchUpdatedImage(this.patternPositions[b],l.getImage(b),v)},Ai.prototype.patchUpdatedImage=function(l,v,b){if(l&&v&&l.version!==v.version){l.version=v.version;var z=l.tl;b.update(v.data,void 0,{x:z[0],y:z[1]})}},Ma("ImagePosition",fn),Ma("ImageAtlas",Ai);var Ki={horizontal:1,vertical:2,horizontalOnly:3},li=function(){this.scale=1,this.fontStack="",this.imageName=null};li.forText=function(l,v){var b=new li;return b.scale=l||1,b.fontStack=v,b},li.forImage=function(l){var v=new li;return v.imageName=l,v};var Zi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ha(l,v,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr){var jr,kr=Zi.fromFeature(l,$);Ie===Ki.vertical&&kr.verticalizePunctuation();var un=sc.processBidirectionalText,En=sc.processStyledBidirectionalText;if(un&&kr.sections.length===1){jr=[];for(var kn=0,Gn=un(kr.toString(),ua(kr,ge,at,v,z,Zt,xr));kn<Gn.length;kn+=1){var oi=Gn[kn],Bi=new Zi;Bi.text=oi,Bi.sections=kr.sections;for(var oa=0;oa<oi.length;oa++)Bi.sectionIndex.push(0);jr.push(Bi)}}else if(En){jr=[];for(var eo=0,ba=En(kr.text,kr.sectionIndex,ua(kr,ge,at,v,z,Zt,xr));eo<ba.length;eo+=1){var lo=ba[eo],Ea=new Zi;Ea.text=lo[0],Ea.sectionIndex=lo[1],Ea.sections=kr.sections,jr.push(Ea)}}else jr=function(Za,qo){for(var jo=[],ys=Za.text,co=0,Fs=0,Cu=qo;Fs<Cu.length;Fs+=1){var el=Cu[Fs];jo.push(Za.substring(co,el)),co=el}return co<ys.length&&jo.push(Za.substring(co,ys.length)),jo}(kr,ua(kr,ge,at,v,z,Zt,xr));var es=[],Ao={positionedLines:es,text:kr.toString(),top:Ce[1],bottom:Ce[1],left:Ce[0],right:Ce[0],writingMode:Ie,iconsInText:!1,verticalizable:!1};return function(Za,qo,jo,ys,co,Fs,Cu,el,_u,Ru,bu,Bl){for(var Il=0,Fl=-17,Nl=0,lc=0,rl=el==="right"?1:el==="left"?0:.5,Ol=0,us=0,ru=co;us<ru.length;us+=1){var Ws=ru[us];Ws.trim();var Os=Ws.getMaxScale(),Lc=24*(Os-1),cc={positionedGlyphs:[],lineOffset:0};Za.positionedLines[Ol]=cc;var Su=cc.positionedGlyphs,xl=0;if(Ws.length()){for(var rc=0;rc<Ws.length();rc++){var Ls=Ws.getSection(rc),Nh=Ws.getSectionIndex(rc),$c=Ws.getCharCode(rc),zh=0,Gu=null,Gh=null,Df=null,Uh=24,hh=!(_u===Ki.horizontal||!bu&&!ws($c)||bu&&(ao[$c]||(xp=$c,Qi.Arabic(xp)||Qi["Arabic Supplement"](xp)||Qi["Arabic Extended-A"](xp)||Qi["Arabic Presentation Forms-A"](xp)||Qi["Arabic Presentation Forms-B"](xp))));if(Ls.imageName){var jp=ys[Ls.imageName];if(!jp)continue;Df=Ls.imageName,Za.iconsInText=Za.iconsInText||!0,Gh=jp.paddedRect;var Vh=jp.displaySize;Ls.scale=24*Ls.scale/Bl,zh=Lc+(24-Vh[1]*Ls.scale),Uh=(Gu={width:Vh[0],height:Vh[1],left:1,top:-3,advance:hh?Vh[1]:Vh[0]}).advance;var Bf=hh?Vh[0]*Ls.scale-24*Os:Vh[1]*Ls.scale-24*Os;Bf>0&&Bf>xl&&(xl=Bf)}else{var Ff=jo[Ls.fontStack],Qd=Ff&&Ff[$c];if(Qd&&Qd.rect)Gh=Qd.rect,Gu=Qd.metrics;else{var cd=qo[Ls.fontStack],Ig=cd&&cd[$c];if(!Ig)continue;Gu=Ig.metrics}zh=24*(Os-Ls.scale)}hh?(Za.verticalizable=!0,Su.push({glyph:$c,imageName:Df,x:Il,y:Fl+zh,vertical:hh,scale:Ls.scale,fontStack:Ls.fontStack,sectionIndex:Nh,metrics:Gu,rect:Gh}),Il+=Uh*Ls.scale+Ru):(Su.push({glyph:$c,imageName:Df,x:Il,y:Fl+zh,vertical:hh,scale:Ls.scale,fontStack:Ls.fontStack,sectionIndex:Nh,metrics:Gu,rect:Gh}),Il+=Gu.advance*Ls.scale+Ru)}Su.length!==0&&(Nl=Math.max(Il-Ru,Nl),Go(Su,0,Su.length-1,rl,xl)),Il=0;var nc=Fs*Os+xl;cc.lineOffset=Math.max(xl,Lc),Fl+=nc,lc=Math.max(nc,lc),++Ol}else Fl+=Fs,++Ol}var xp,kv=Fl- -17,qd=$i(Cu),_p=qd.horizontalAlign,Jd=qd.verticalAlign;(function(Og,Lg,Rv,Dv,kg,Bv,Fv,Nv,fd){var tv,x0=(Lg-Rv)*kg;tv=Bv!==Fv?-Nv*Dv- -17:(-Dv*fd+.5)*Fv;for(var ev=0,zv=Og;ev<zv.length;ev+=1)for(var rv=0,bp=zv[ev].positionedGlyphs;rv<bp.length;rv+=1){var ph=bp[rv];ph.x+=x0,ph.y+=tv}})(Za.positionedLines,rl,_p,Jd,Nl,lc,Fs,kv,co.length),Za.top+=-Jd*kv,Za.bottom=Za.top+kv,Za.left+=-_p*Nl,Za.right=Za.left+Nl}(Ao,v,b,z,jr,mt,Mt,oe,Ie,ge,Ge,mr),!function(Za){for(var qo=0,jo=Za;qo<jo.length;qo+=1)if(jo[qo].positionedGlyphs.length!==0)return!1;return!0}(es)&&Ao}Zi.fromFeature=function(l,v){for(var b=new Zi,z=0;z<l.sections.length;z++){var $=l.sections[z];$.image?b.addImageSection($):b.addTextSection($,v)}return b},Zi.prototype.length=function(){return this.text.length},Zi.prototype.getSection=function(l){return this.sections[this.sectionIndex[l]]},Zi.prototype.getSectionIndex=function(l){return this.sectionIndex[l]},Zi.prototype.getCharCode=function(l){return this.text.charCodeAt(l)},Zi.prototype.verticalizePunctuation=function(){this.text=function(l){for(var v="",b=0;b<l.length;b++){var z=l.charCodeAt(b+1)||null,$=l.charCodeAt(b-1)||null;v+=z&&lf(z)&&!Dh[l[b+1]]||$&&lf($)&&!Dh[l[b-1]]||!Dh[l[b]]?l[b]:Dh[l[b]]}return v}(this.text)},Zi.prototype.trim=function(){for(var l=0,v=0;v<this.text.length&&ao[this.text.charCodeAt(v)];v++)l++;for(var b=this.text.length,z=this.text.length-1;z>=0&&z>=l&&ao[this.text.charCodeAt(z)];z--)b--;this.text=this.text.substring(l,b),this.sectionIndex=this.sectionIndex.slice(l,b)},Zi.prototype.substring=function(l,v){var b=new Zi;return b.text=this.text.substring(l,v),b.sectionIndex=this.sectionIndex.slice(l,v),b.sections=this.sections,b},Zi.prototype.toString=function(){return this.text},Zi.prototype.getMaxScale=function(){var l=this;return this.sectionIndex.reduce(function(v,b){return Math.max(v,l.sections[b].scale)},0)},Zi.prototype.addTextSection=function(l,v){this.text+=l.text,this.sections.push(li.forText(l.scale,l.fontStack||v));for(var b=this.sections.length-1,z=0;z<l.text.length;++z)this.sectionIndex.push(b)},Zi.prototype.addImageSection=function(l){var v=l.image?l.image.name:"";if(v.length!==0){var b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(li.forImage(v)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}else Qt("Can't add FormattedSection with an empty image.")},Zi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ao={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xn={};function ei(l,v,b,z,$,at){if(v.imageName){var mt=z[v.imageName];return mt?mt.displaySize[0]*v.scale*24/at+$:0}var Mt=b[v.fontStack],oe=Mt&&Mt[l];return oe?oe.metrics.advance*v.scale+$:0}function ka(l,v,b,z){var $=Math.pow(l-v,2);return z?l<v?$/2:2*$:$+Math.abs(b)*b}function aa(l,v,b){var z=0;return l===10&&(z-=1e4),b&&(z+=150),l!==40&&l!==65288||(z+=50),v!==41&&v!==65289||(z+=50),z}function Oi(l,v,b,z,$,at){for(var mt=null,Mt=ka(v,b,$,at),oe=0,ge=z;oe<ge.length;oe+=1){var Ce=ge[oe],Ie=ka(v-Ce.x,b,$,at)+Ce.badness;Ie<=Mt&&(mt=Ce,Mt=Ie)}return{index:l,x:v,priorBreak:mt,badness:Mt}}function ua(l,v,b,z,$,at,mt){if(at!=="point")return[];if(!l)return[];for(var Mt,oe=[],ge=function(jr,kr,un,En,kn,Gn){for(var oi=0,Bi=0;Bi<jr.length();Bi++){var oa=jr.getSection(Bi);oi+=ei(jr.getCharCode(Bi),oa,En,kn,kr,Gn)}return oi/Math.max(1,Math.ceil(oi/un))}(l,v,b,z,$,mt),Ce=l.text.indexOf("\u200B")>=0,Ie=0,Ge=0;Ge<l.length();Ge++){var Zt=l.getSection(Ge),xr=l.getCharCode(Ge);if(ao[xr]||(Ie+=ei(xr,Zt,z,$,v,mt)),Ge<l.length()-1){var mr=!((Mt=xr)<11904||!(Qi["Bopomofo Extended"](Mt)||Qi.Bopomofo(Mt)||Qi["CJK Compatibility Forms"](Mt)||Qi["CJK Compatibility Ideographs"](Mt)||Qi["CJK Compatibility"](Mt)||Qi["CJK Radicals Supplement"](Mt)||Qi["CJK Strokes"](Mt)||Qi["CJK Symbols and Punctuation"](Mt)||Qi["CJK Unified Ideographs Extension A"](Mt)||Qi["CJK Unified Ideographs"](Mt)||Qi["Enclosed CJK Letters and Months"](Mt)||Qi["Halfwidth and Fullwidth Forms"](Mt)||Qi.Hiragana(Mt)||Qi["Ideographic Description Characters"](Mt)||Qi["Kangxi Radicals"](Mt)||Qi["Katakana Phonetic Extensions"](Mt)||Qi.Katakana(Mt)||Qi["Vertical Forms"](Mt)||Qi["Yi Radicals"](Mt)||Qi["Yi Syllables"](Mt)));(Xn[xr]||mr||Zt.imageName)&&oe.push(Oi(Ge+1,Ie,ge,oe,aa(xr,l.getCharCode(Ge+1),mr&&Ce),!1))}}return function jr(kr){return kr?jr(kr.priorBreak).concat(kr.index):[]}(Oi(l.length(),Ie,ge,oe,0,!0))}function $i(l){var v=.5,b=.5;switch(l){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":b=1;break;case"top":case"top-right":case"top-left":b=0}return{horizontalAlign:v,verticalAlign:b}}function Go(l,v,b,z,$){if(z||$)for(var at=l[b],mt=(l[b].x+at.metrics.advance*at.scale)*z,Mt=v;Mt<=b;Mt++)l[Mt].x-=mt,l[Mt].y+=$}function Io(l,v,b,z,$,at){var mt,Mt=l.image;if(Mt.content){var oe=Mt.content,ge=Mt.pixelRatio||1;mt=[oe[0]/ge,oe[1]/ge,Mt.displaySize[0]-oe[2]/ge,Mt.displaySize[1]-oe[3]/ge]}var Ce,Ie,Ge,Zt,xr=v.left*at,mr=v.right*at;b==="width"||b==="both"?(Zt=$[0]+xr-z[3],Ie=$[0]+mr+z[1]):Ie=(Zt=$[0]+(xr+mr-Mt.displaySize[0])/2)+Mt.displaySize[0];var jr=v.top*at,kr=v.bottom*at;return b==="height"||b==="both"?(Ce=$[1]+jr-z[0],Ge=$[1]+kr+z[2]):Ge=(Ce=$[1]+(jr+kr-Mt.displaySize[1])/2)+Mt.displaySize[1],{image:Mt,top:Ce,right:Ie,bottom:Ge,left:Zt,collisionPadding:mt}}Xn[10]=!0,Xn[32]=!0,Xn[38]=!0,Xn[40]=!0,Xn[41]=!0,Xn[43]=!0,Xn[45]=!0,Xn[47]=!0,Xn[173]=!0,Xn[183]=!0,Xn[8203]=!0,Xn[8208]=!0,Xn[8211]=!0,Xn[8231]=!0;var na=function(l){function v(b,z,$,at){l.call(this,b,z),this.angle=$,at!==void 0&&(this.segment=at)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(R);function ma(l,v){var b=v.expression;if(b.kind==="constant")return{kind:"constant",layoutSize:b.evaluate(new Qo(l+1))};if(b.kind==="source")return{kind:"source"};for(var z=b.zoomStops,$=b.interpolationType,at=0;at<z.length&&z[at]<=l;)at++;for(var mt=at=Math.max(0,at-1);mt<z.length&&z[mt]<l+1;)mt++;mt=Math.min(z.length-1,mt);var Mt=z[at],oe=z[mt];return b.kind==="composite"?{kind:"composite",minZoom:Mt,maxZoom:oe,interpolationType:$}:{kind:"camera",minZoom:Mt,maxZoom:oe,minSize:b.evaluate(new Qo(Mt)),maxSize:b.evaluate(new Qo(oe)),interpolationType:$}}function Co(l,v,b){var z=v.uSize,$=b.lowerSize;return l.kind==="source"?$/128:l.kind==="composite"?ds($/128,b.upperSize/128,v.uSizeT):z}function Do(l,v){var b=0,z=0;if(l.kind==="constant")z=l.layoutSize;else if(l.kind!=="source"){var $=l.interpolationType,at=$?k(ir.interpolationFactor($,v,l.minZoom,l.maxZoom),0,1):0;l.kind==="camera"?z=ds(l.minSize,l.maxSize,at):b=at}return{uSizeT:b,uSize:z}}Ma("Anchor",na);var os=Object.freeze({__proto__:null,getSizeData:ma,evaluateSizeForFeature:Co,evaluateSizeForZoom:Do,SIZE_PACK_FACTOR:128});function ku(l,v,b,z,$){if(v.segment===void 0)return!0;for(var at=v,mt=v.segment+1,Mt=0;Mt>-b/2;){if(--mt<0)return!1;Mt-=l[mt].dist(at),at=l[mt]}Mt+=l[mt].dist(l[mt+1]),mt++;for(var oe=[],ge=0;Mt<b/2;){var Ce=l[mt],Ie=l[mt+1];if(!Ie)return!1;var Ge=l[mt-1].angleTo(Ce)-Ce.angleTo(Ie);for(Ge=Math.abs((Ge+3*Math.PI)%(2*Math.PI)-Math.PI),oe.push({distance:Mt,angleDelta:Ge}),ge+=Ge;Mt-oe[0].distance>z;)ge-=oe.shift().angleDelta;if(ge>$)return!1;mt++,Mt+=Ce.dist(Ie)}return!0}function zu(l){for(var v=0,b=0;b<l.length-1;b++)v+=l[b].dist(l[b+1]);return v}function ss(l,v,b){return l?.6*v*b:0}function Dl(l,v){return Math.max(l?l.right-l.left:0,v?v.right-v.left:0)}function yu(l,v,b,z,$,at){for(var mt=ss(b,$,at),Mt=Dl(b,z)*at,oe=0,ge=zu(l)/2,Ce=0;Ce<l.length-1;Ce++){var Ie=l[Ce],Ge=l[Ce+1],Zt=Ie.dist(Ge);if(oe+Zt>ge){var xr=(ge-oe)/Zt,mr=ds(Ie.x,Ge.x,xr),jr=ds(Ie.y,Ge.y,xr),kr=new na(mr,jr,Ge.angleTo(Ie),Ce);return kr._round(),!mt||ku(l,kr,Mt,mt,v)?kr:void 0}oe+=Zt}}function Tl(l,v,b,z,$,at,mt,Mt,oe){var ge=ss(z,at,mt),Ce=Dl(z,$),Ie=Ce*mt,Ge=l[0].x===0||l[0].x===oe||l[0].y===0||l[0].y===oe;return v-Ie<v/4&&(v=Ie+v/4),function Zt(xr,mr,jr,kr,un,En,kn,Gn,oi){for(var Bi=En/2,oa=zu(xr),eo=0,ba=mr-jr,lo=[],Ea=0;Ea<xr.length-1;Ea++){for(var es=xr[Ea],Ao=xr[Ea+1],Za=es.dist(Ao),qo=Ao.angleTo(es);ba+jr<eo+Za;){var jo=((ba+=jr)-eo)/Za,ys=ds(es.x,Ao.x,jo),co=ds(es.y,Ao.y,jo);if(ys>=0&&ys<oi&&co>=0&&co<oi&&ba-Bi>=0&&ba+Bi<=oa){var Fs=new na(ys,co,qo,Ea);Fs._round(),kr&&!ku(xr,Fs,En,kr,un)||lo.push(Fs)}}eo+=Za}return Gn||lo.length||kn||(lo=Zt(xr,eo/2,jr,kr,un,En,kn,!0,oi)),lo}(l,Ge?v/2*Mt%v:(Ce/2+2*at)*mt*Mt%v,v,ge,b,Ie,Ge,!1,oe)}function ul(l,v,b,z,$){for(var at=[],mt=0;mt<l.length;mt++)for(var Mt=l[mt],oe=void 0,ge=0;ge<Mt.length-1;ge++){var Ce=Mt[ge],Ie=Mt[ge+1];Ce.x<v&&Ie.x<v||(Ce.x<v?Ce=new R(v,Ce.y+(v-Ce.x)/(Ie.x-Ce.x)*(Ie.y-Ce.y))._round():Ie.x<v&&(Ie=new R(v,Ce.y+(v-Ce.x)/(Ie.x-Ce.x)*(Ie.y-Ce.y))._round()),Ce.y<b&&Ie.y<b||(Ce.y<b?Ce=new R(Ce.x+(b-Ce.y)/(Ie.y-Ce.y)*(Ie.x-Ce.x),b)._round():Ie.y<b&&(Ie=new R(Ce.x+(b-Ce.y)/(Ie.y-Ce.y)*(Ie.x-Ce.x),b)._round()),Ce.x>=z&&Ie.x>=z||(Ce.x>=z?Ce=new R(z,Ce.y+(z-Ce.x)/(Ie.x-Ce.x)*(Ie.y-Ce.y))._round():Ie.x>=z&&(Ie=new R(z,Ce.y+(z-Ce.x)/(Ie.x-Ce.x)*(Ie.y-Ce.y))._round()),Ce.y>=$&&Ie.y>=$||(Ce.y>=$?Ce=new R(Ce.x+($-Ce.y)/(Ie.y-Ce.y)*(Ie.x-Ce.x),$)._round():Ie.y>=$&&(Ie=new R(Ce.x+($-Ce.y)/(Ie.y-Ce.y)*(Ie.x-Ce.x),$)._round()),oe&&Ce.equals(oe[oe.length-1])||at.push(oe=[Ce]),oe.push(Ie)))))}return at}function Pl(l,v,b,z){var $=[],at=l.image,mt=at.pixelRatio,Mt=at.paddedRect.w-2,oe=at.paddedRect.h-2,ge=l.right-l.left,Ce=l.bottom-l.top,Ie=at.stretchX||[[0,Mt]],Ge=at.stretchY||[[0,oe]],Zt=function(ys,co){return ys+co[1]-co[0]},xr=Ie.reduce(Zt,0),mr=Ge.reduce(Zt,0),jr=Mt-xr,kr=oe-mr,un=0,En=xr,kn=0,Gn=mr,oi=0,Bi=jr,oa=0,eo=kr;if(at.content&&z){var ba=at.content;un=ll(Ie,0,ba[0]),kn=ll(Ge,0,ba[1]),En=ll(Ie,ba[0],ba[2]),Gn=ll(Ge,ba[1],ba[3]),oi=ba[0]-un,oa=ba[1]-kn,Bi=ba[2]-ba[0]-En,eo=ba[3]-ba[1]-Gn}var lo=function(ys,co,Fs,Cu){var el=xu(ys.stretch-un,En,ge,l.left),_u=Uo(ys.fixed-oi,Bi,ys.stretch,xr),Ru=xu(co.stretch-kn,Gn,Ce,l.top),bu=Uo(co.fixed-oa,eo,co.stretch,mr),Bl=xu(Fs.stretch-un,En,ge,l.left),Il=Uo(Fs.fixed-oi,Bi,Fs.stretch,xr),Fl=xu(Cu.stretch-kn,Gn,Ce,l.top),Nl=Uo(Cu.fixed-oa,eo,Cu.stretch,mr),lc=new R(el,Ru),rl=new R(Bl,Ru),Ol=new R(Bl,Fl),us=new R(el,Fl),ru=new R(_u/mt,bu/mt),Ws=new R(Il/mt,Nl/mt),Os=v*Math.PI/180;if(Os){var Lc=Math.sin(Os),cc=Math.cos(Os),Su=[cc,-Lc,Lc,cc];lc._matMult(Su),rl._matMult(Su),us._matMult(Su),Ol._matMult(Su)}var xl=ys.stretch+ys.fixed,rc=co.stretch+co.fixed;return{tl:lc,tr:rl,bl:us,br:Ol,tex:{x:at.paddedRect.x+1+xl,y:at.paddedRect.y+1+rc,w:Fs.stretch+Fs.fixed-xl,h:Cu.stretch+Cu.fixed-rc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ru,pixelOffsetBR:Ws,minFontScaleX:Bi/mt/ge,minFontScaleY:eo/mt/Ce,isSDF:b}};if(z&&(at.stretchX||at.stretchY))for(var Ea=ml(Ie,jr,xr),es=ml(Ge,kr,mr),Ao=0;Ao<Ea.length-1;Ao++)for(var Za=Ea[Ao],qo=Ea[Ao+1],jo=0;jo<es.length-1;jo++)$.push(lo(Za,es[jo],qo,es[jo+1]));else $.push(lo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Mt+1},{fixed:0,stretch:oe+1}));return $}function ll(l,v,b){for(var z=0,$=0,at=l;$<at.length;$+=1){var mt=at[$];z+=Math.max(v,Math.min(b,mt[1]))-Math.max(v,Math.min(b,mt[0]))}return z}function ml(l,v,b){for(var z=[{fixed:-1,stretch:0}],$=0,at=l;$<at.length;$+=1){var mt=at[$],Mt=mt[0],oe=mt[1],ge=z[z.length-1];z.push({fixed:Mt-ge.stretch,stretch:ge.stretch}),z.push({fixed:Mt-ge.stretch,stretch:ge.stretch+(oe-Mt)})}return z.push({fixed:v+1,stretch:b}),z}function xu(l,v,b,z){return l/v*b+z}function Uo(l,v,b,z){return l-v*b/z}var yl=function(l,v,b,z,$,at,mt,Mt,oe,ge){if(this.boxStartIndex=l.length,oe){var Ce=at.top,Ie=at.bottom,Ge=at.collisionPadding;Ge&&(Ce-=Ge[1],Ie+=Ge[3]);var Zt=Ie-Ce;Zt>0&&(Zt=Math.max(10,Zt),this.circleDiameter=Zt)}else{var xr=at.top*mt-Mt,mr=at.bottom*mt+Mt,jr=at.left*mt-Mt,kr=at.right*mt+Mt,un=at.collisionPadding;if(un&&(jr-=un[0]*mt,xr-=un[1]*mt,kr+=un[2]*mt,mr+=un[3]*mt),ge){var En=new R(jr,xr),kn=new R(kr,xr),Gn=new R(jr,mr),oi=new R(kr,mr),Bi=ge*Math.PI/180;En._rotate(Bi),kn._rotate(Bi),Gn._rotate(Bi),oi._rotate(Bi),jr=Math.min(En.x,kn.x,Gn.x,oi.x),kr=Math.max(En.x,kn.x,Gn.x,oi.x),xr=Math.min(En.y,kn.y,Gn.y,oi.y),mr=Math.max(En.y,kn.y,Gn.y,oi.y)}l.emplaceBack(v.x,v.y,jr,xr,kr,mr,b,z,$)}this.boxEndIndex=l.length},Is=function(l,v){if(l===void 0&&(l=[]),v===void 0&&(v=cl),this.data=l,this.length=this.data.length,this.compare=v,this.length>0)for(var b=(this.length>>1)-1;b>=0;b--)this._down(b)};function cl(l,v){return l<v?-1:l>v?1:0}function Xi(l,v,b){v===void 0&&(v=1),b===void 0&&(b=!1);for(var z=1/0,$=1/0,at=-1/0,mt=-1/0,Mt=l[0],oe=0;oe<Mt.length;oe++){var ge=Mt[oe];(!oe||ge.x<z)&&(z=ge.x),(!oe||ge.y<$)&&($=ge.y),(!oe||ge.x>at)&&(at=ge.x),(!oe||ge.y>mt)&&(mt=ge.y)}var Ce=Math.min(at-z,mt-$),Ie=Ce/2,Ge=new Is([],ya);if(Ce===0)return new R(z,$);for(var Zt=z;Zt<at;Zt+=Ce)for(var xr=$;xr<mt;xr+=Ce)Ge.push(new Bs(Zt+Ie,xr+Ie,Ie,l));for(var mr=function(un){for(var En=0,kn=0,Gn=0,oi=un[0],Bi=0,oa=oi.length,eo=oa-1;Bi<oa;eo=Bi++){var ba=oi[Bi],lo=oi[eo],Ea=ba.x*lo.y-lo.x*ba.y;kn+=(ba.x+lo.x)*Ea,Gn+=(ba.y+lo.y)*Ea,En+=3*Ea}return new Bs(kn/En,Gn/En,0,un)}(l),jr=Ge.length;Ge.length;){var kr=Ge.pop();(kr.d>mr.d||!mr.d)&&(mr=kr,b&&console.log("found best %d after %d probes",Math.round(1e4*kr.d)/1e4,jr)),kr.max-mr.d<=v||(Ge.push(new Bs(kr.p.x-(Ie=kr.h/2),kr.p.y-Ie,Ie,l)),Ge.push(new Bs(kr.p.x+Ie,kr.p.y-Ie,Ie,l)),Ge.push(new Bs(kr.p.x-Ie,kr.p.y+Ie,Ie,l)),Ge.push(new Bs(kr.p.x+Ie,kr.p.y+Ie,Ie,l)),jr+=4)}return b&&(console.log("num probes: "+jr),console.log("best distance: "+mr.d)),mr.p}function ya(l,v){return v.max-l.max}function Bs(l,v,b,z){this.p=new R(l,v),this.h=b,this.d=function($,at){for(var mt=!1,Mt=1/0,oe=0;oe<at.length;oe++)for(var ge=at[oe],Ce=0,Ie=ge.length,Ge=Ie-1;Ce<Ie;Ge=Ce++){var Zt=ge[Ce],xr=ge[Ge];Zt.y>$.y!=xr.y>$.y&&$.x<(xr.x-Zt.x)*($.y-Zt.y)/(xr.y-Zt.y)+Zt.x&&(mt=!mt),Mt=Math.min(Mt,Mf($,Zt,xr))}return(mt?1:-1)*Math.sqrt(Mt)}(this.p,z),this.max=this.d+this.h*Math.SQRT2}Is.prototype.push=function(l){this.data.push(l),this.length++,this._up(this.length-1)},Is.prototype.pop=function(){if(this.length!==0){var l=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),l}},Is.prototype.peek=function(){return this.data[0]},Is.prototype._up=function(l){for(var v=this.data,b=this.compare,z=v[l];l>0;){var $=l-1>>1,at=v[$];if(b(z,at)>=0)break;v[l]=at,l=$}v[l]=z},Is.prototype._down=function(l){for(var v=this.data,b=this.compare,z=this.length>>1,$=v[l];l<z;){var at=1+(l<<1),mt=v[at],Mt=at+1;if(Mt<this.length&&b(v[Mt],mt)<0&&(at=Mt,mt=v[Mt]),b(mt,$)>=0)break;v[l]=mt,l=at}v[l]=$};var fl=Number.POSITIVE_INFINITY;function lh(l,v){return v[1]!==fl?function(b,z,$){var at=0,mt=0;switch(z=Math.abs(z),$=Math.abs($),b){case"top-right":case"top-left":case"top":mt=$-7;break;case"bottom-right":case"bottom-left":case"bottom":mt=7-$}switch(b){case"top-right":case"bottom-right":case"right":at=-z;break;case"top-left":case"bottom-left":case"left":at=z}return[at,mt]}(l,v[0],v[1]):function(b,z){var $=0,at=0;z<0&&(z=0);var mt=z/Math.sqrt(2);switch(b){case"top-right":case"top-left":at=mt-7;break;case"bottom-right":case"bottom-left":at=7-mt;break;case"bottom":at=7-z;break;case"top":at=z-7}switch(b){case"top-right":case"bottom-right":$=-mt;break;case"top-left":case"bottom-left":$=mt;break;case"left":$=z;break;case"right":$=-z}return[$,at]}(l,v[0])}function yr(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dn(l,v,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr){var mr=function(kn,Gn,oi,Bi,oa,eo,ba,lo){for(var Ea=Bi.layout.get("text-rotate").evaluate(eo,{})*Math.PI/180,es=[],Ao=0,Za=Gn.positionedLines;Ao<Za.length;Ao+=1)for(var qo=Za[Ao],jo=0,ys=qo.positionedGlyphs;jo<ys.length;jo+=1){var co=ys[jo];if(co.rect){var Fs=co.rect||{},Cu=4,el=!0,_u=1,Ru=0,bu=(oa||lo)&&co.vertical,Bl=co.metrics.advance*co.scale/2;if(lo&&Gn.verticalizable&&(Ru=qo.lineOffset/2-(co.imageName?-(24-co.metrics.width*co.scale)/2:24*(co.scale-1))),co.imageName){var Il=ba[co.imageName];el=Il.sdf,Cu=1/(_u=Il.pixelRatio)}var Fl=oa?[co.x+Bl,co.y]:[0,0],Nl=oa?[0,0]:[co.x+Bl+oi[0],co.y+oi[1]-Ru],lc=[0,0];bu&&(lc=Nl,Nl=[0,0]);var rl=(co.metrics.left-Cu)*co.scale-Bl+Nl[0],Ol=(-co.metrics.top-Cu)*co.scale+Nl[1],us=rl+Fs.w*co.scale/_u,ru=Ol+Fs.h*co.scale/_u,Ws=new R(rl,Ol),Os=new R(us,Ol),Lc=new R(rl,ru),cc=new R(us,ru);if(bu){var Su=new R(-Bl,Bl- -17),xl=-Math.PI/2,rc=12-Bl,Ls=new R(22-rc,-(co.imageName?rc:0)),Nh=new(Function.prototype.bind.apply(R,[null].concat(lc)));Ws._rotateAround(xl,Su)._add(Ls)._add(Nh),Os._rotateAround(xl,Su)._add(Ls)._add(Nh),Lc._rotateAround(xl,Su)._add(Ls)._add(Nh),cc._rotateAround(xl,Su)._add(Ls)._add(Nh)}if(Ea){var $c=Math.sin(Ea),zh=Math.cos(Ea),Gu=[zh,-$c,$c,zh];Ws._matMult(Gu),Os._matMult(Gu),Lc._matMult(Gu),cc._matMult(Gu)}var Gh=new R(0,0),Df=new R(0,0);es.push({tl:Ws,tr:Os,bl:Lc,br:cc,tex:Fs,writingMode:Gn.writingMode,glyphOffset:Fl,sectionIndex:co.sectionIndex,isSDF:el,pixelOffsetTL:Gh,pixelOffsetBR:Df,minFontScaleX:0,minFontScaleY:0})}}return es}(0,b,Mt,$,at,mt,z,l.allowVerticalPlacement),jr=l.textSizeData,kr=null;jr.kind==="source"?(kr=[128*$.layout.get("text-size").evaluate(mt,{})])[0]>32640&&Qt(l.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):jr.kind==="composite"&&((kr=[128*Zt.compositeTextSizes[0].evaluate(mt,{},xr),128*Zt.compositeTextSizes[1].evaluate(mt,{},xr)])[0]>32640||kr[1]>32640)&&Qt(l.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),l.addSymbols(l.text,mr,kr,Mt,at,mt,ge,v,oe.lineStartIndex,oe.lineLength,Ge,xr);for(var un=0,En=Ce;un<En.length;un+=1)Ie[En[un]]=l.text.placedSymbolArray.length-1;return 4*mr.length}function Mn(l){for(var v in l)return l[v];return null}function Ta(l,v,b,z){var $=l.compareText;if(v in $){for(var at=$[v],mt=at.length-1;mt>=0;mt--)if(z.dist(at[mt])<b)return!0}else $[v]=[];return $[v].push(z),!1}var fs=jc.VectorTileFeature.types,cr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Je(l,v,b,z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge){var Zt=Mt?Math.min(32640,Math.round(Mt[0])):0,xr=Mt?Math.min(32640,Math.round(Mt[1])):0;l.emplaceBack(v,b,Math.round(32*z),Math.round(32*$),at,mt,(Zt<<1)+(oe?1:0),xr,16*ge,16*Ce,256*Ie,256*Ge)}function Nr(l,v,b){l.emplaceBack(v.x,v.y,b),l.emplaceBack(v.x,v.y,b),l.emplaceBack(v.x,v.y,b),l.emplaceBack(v.x,v.y,b)}function gn(l){for(var v=0,b=l.sections;v<b.length;v+=1)if(Kf(b[v].text))return!0;return!1}var In=function(l){this.layoutVertexArray=new Th,this.indexArray=new qf,this.programConfigurations=l,this.segments=new nr,this.dynamicLayoutVertexArray=new Af,this.opacityVertexArray=new Ph,this.placedSymbolArray=new Z};In.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},In.prototype.upload=function(l,v,b,z){this.isEmpty()||(b&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,om.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,kf.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,cr,!0),this.opacityVertexBuffer.itemSize=1),(b||z)&&this.programConfigurations.upload(l))},In.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ma("SymbolBuffers",In);var Yr=function(l,v,b){this.layoutVertexArray=new l,this.layoutAttributes=v,this.indexArray=new b,this.segments=new nr,this.collisionVertexArray=new Rp};Yr.prototype.upload=function(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Xd.members,!0)},Yr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ma("CollisionBuffers",Yr);var Tr=function(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(at){return at.id}),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=mc([]),this.placementViewportMatrix=mc([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ma(this.zoom,v["text-size"]),this.iconSizeData=ma(this.zoom,v["icon-size"]);var b=this.layers[0].layout,z=b.get("symbol-sort-key"),$=b.get("symbol-z-order");this.canOverlap=b.get("text-allow-overlap")||b.get("icon-allow-overlap")||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=$!=="viewport-y"&&z.constantOr(1)!==void 0,this.sortFeaturesByY=($==="viewport-y"||$==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map(function(at){return Ki[at]})),this.stateDependentLayerIds=this.layers.filter(function(at){return at.isStateDependent()}).map(function(at){return at.id}),this.sourceID=l.sourceID};Tr.prototype.createArrays=function(){this.text=new In(new uo(this.layers,this.zoom,function(l){return/^text/.test(l)})),this.icon=new In(new uo(this.layers,this.zoom,function(l){return/^icon/.test(l)})),this.glyphOffsetArray=new At,this.lineVertexArray=new te,this.symbolInstances=new St},Tr.prototype.calculateGlyphDependencies=function(l,v,b,z,$){for(var at=0;at<l.length;at++)if(v[l.charCodeAt(at)]=!0,(b||z)&&$){var mt=Dh[l.charAt(at)];mt&&(v[mt.charCodeAt(0)]=!0)}},Tr.prototype.populate=function(l,v,b){var z=this.layers[0],$=z.layout,at=$.get("text-font"),mt=$.get("text-field"),Mt=$.get("icon-image"),oe=(mt.value.kind!=="constant"||mt.value.value instanceof An&&!mt.value.value.isEmpty()||mt.value.value.toString().length>0)&&(at.value.kind!=="constant"||at.value.value.length>0),ge=Mt.value.kind!=="constant"||!!Mt.value.value||Object.keys(Mt.parameters).length>0,Ce=$.get("symbol-sort-key");if(this.features=[],oe||ge){for(var Ie=v.iconDependencies,Ge=v.glyphDependencies,Zt=v.availableImages,xr=new Qo(this.zoom),mr=0,jr=l;mr<jr.length;mr+=1){var kr=jr[mr],un=kr.feature,En=kr.id,kn=kr.index,Gn=kr.sourceLayerIndex,oi=z._featureFilter.needGeometry,Bi=Nu(un,oi);if(z._featureFilter.filter(xr,Bi,b)){oi||(Bi.geometry=du(un));var oa=void 0;if(oe){var eo=z.getValueAndResolveTokens("text-field",Bi,b,Zt),ba=An.factory(eo);gn(ba)&&(this.hasRTLText=!0),(!this.hasRTLText||Td()==="unavailable"||this.hasRTLText&&sc.isParsed())&&(oa=Yd(ba,z,Bi))}var lo=void 0;if(ge){var Ea=z.getValueAndResolveTokens("icon-image",Bi,b,Zt);lo=Ea instanceof Pe?Ea:Pe.fromString(Ea)}if(oa||lo){var es=this.sortFeaturesByKey?Ce.evaluate(Bi,{},b):void 0;if(this.features.push({id:En,text:oa,icon:lo,index:kn,sourceLayerIndex:Gn,geometry:Bi.geometry,properties:un.properties,type:fs[un.type],sortKey:es}),lo&&(Ie[lo.name]=!0),oa){var Ao=at.evaluate(Bi,{},b).join(","),Za=$.get("text-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ki.vertical)>=0;for(var qo=0,jo=oa.sections;qo<jo.length;qo+=1){var ys=jo[qo];if(ys.image)Ie[ys.image.name]=!0;else{var co=Ec(oa.toString()),Fs=ys.fontStack||Ao,Cu=Ge[Fs]=Ge[Fs]||{};this.calculateGlyphDependencies(ys.text,Cu,Za,this.allowVerticalPlacement,co)}}}}}}$.get("symbol-placement")==="line"&&(this.features=function(el){var _u={},Ru={},bu=[],Bl=0;function Il(Su){bu.push(el[Su]),Bl++}function Fl(Su,xl,rc){var Ls=Ru[Su];return delete Ru[Su],Ru[xl]=Ls,bu[Ls].geometry[0].pop(),bu[Ls].geometry[0]=bu[Ls].geometry[0].concat(rc[0]),Ls}function Nl(Su,xl,rc){var Ls=_u[xl];return delete _u[xl],_u[Su]=Ls,bu[Ls].geometry[0].shift(),bu[Ls].geometry[0]=rc[0].concat(bu[Ls].geometry[0]),Ls}function lc(Su,xl,rc){var Ls=rc?xl[0][xl[0].length-1]:xl[0][0];return Su+":"+Ls.x+":"+Ls.y}for(var rl=0;rl<el.length;rl++){var Ol=el[rl],us=Ol.geometry,ru=Ol.text?Ol.text.toString():null;if(ru){var Ws=lc(ru,us),Os=lc(ru,us,!0);if(Ws in Ru&&Os in _u&&Ru[Ws]!==_u[Os]){var Lc=Nl(Ws,Os,us),cc=Fl(Ws,Os,bu[Lc].geometry);delete _u[Ws],delete Ru[Os],Ru[lc(ru,bu[cc].geometry,!0)]=cc,bu[Lc].geometry=null}else Ws in Ru?Fl(Ws,Os,us):Os in _u?Nl(Ws,Os,us):(Il(rl),_u[Ws]=Bl-1,Ru[Os]=Bl-1)}else Il(rl)}return bu.filter(function(Su){return Su.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(el,_u){return el.sortKey-_u.sortKey})}},Tr.prototype.update=function(l,v,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,v,this.layers,b),this.icon.programConfigurations.updatePaintArrays(l,v,this.layers,b))},Tr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Tr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Tr.prototype.upload=function(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Tr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Tr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Tr.prototype.addToLineVertexArray=function(l,v){var b=this.lineVertexArray.length;if(l.segment!==void 0){for(var z=l.dist(v[l.segment+1]),$=l.dist(v[l.segment]),at={},mt=l.segment+1;mt<v.length;mt++)at[mt]={x:v[mt].x,y:v[mt].y,tileUnitDistanceFromAnchor:z},mt<v.length-1&&(z+=v[mt+1].dist(v[mt]));for(var Mt=l.segment||0;Mt>=0;Mt--)at[Mt]={x:v[Mt].x,y:v[Mt].y,tileUnitDistanceFromAnchor:$},Mt>0&&($+=v[Mt-1].dist(v[Mt]));for(var oe=0;oe<v.length;oe++){var ge=at[oe];this.lineVertexArray.emplaceBack(ge.x,ge.y,ge.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}},Tr.prototype.addSymbols=function(l,v,b,z,$,at,mt,Mt,oe,ge,Ce,Ie){for(var Ge=l.indexArray,Zt=l.layoutVertexArray,xr=l.segments.prepareSegment(4*v.length,Zt,Ge,this.canOverlap?at.sortKey:void 0),mr=this.glyphOffsetArray.length,jr=xr.vertexLength,kr=this.allowVerticalPlacement&&mt===Ki.vertical?Math.PI/2:0,un=at.text&&at.text.sections,En=0;En<v.length;En++){var kn=v[En],Gn=kn.tl,oi=kn.tr,Bi=kn.bl,oa=kn.br,eo=kn.tex,ba=kn.pixelOffsetTL,lo=kn.pixelOffsetBR,Ea=kn.minFontScaleX,es=kn.minFontScaleY,Ao=kn.glyphOffset,Za=kn.isSDF,qo=kn.sectionIndex,jo=xr.vertexLength,ys=Ao[1];Je(Zt,Mt.x,Mt.y,Gn.x,ys+Gn.y,eo.x,eo.y,b,Za,ba.x,ba.y,Ea,es),Je(Zt,Mt.x,Mt.y,oi.x,ys+oi.y,eo.x+eo.w,eo.y,b,Za,lo.x,ba.y,Ea,es),Je(Zt,Mt.x,Mt.y,Bi.x,ys+Bi.y,eo.x,eo.y+eo.h,b,Za,ba.x,lo.y,Ea,es),Je(Zt,Mt.x,Mt.y,oa.x,ys+oa.y,eo.x+eo.w,eo.y+eo.h,b,Za,lo.x,lo.y,Ea,es),Nr(l.dynamicLayoutVertexArray,Mt,kr),Ge.emplaceBack(jo,jo+1,jo+2),Ge.emplaceBack(jo+1,jo+2,jo+3),xr.vertexLength+=4,xr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ao[0]),En!==v.length-1&&qo===v[En+1].sectionIndex||l.programConfigurations.populatePaintArrays(Zt.length,at,at.index,{},Ie,un&&un[qo])}l.placedSymbolArray.emplaceBack(Mt.x,Mt.y,mr,this.glyphOffsetArray.length-mr,jr,oe,ge,Mt.segment,b?b[0]:0,b?b[1]:0,z[0],z[1],mt,0,!1,0,Ce)},Tr.prototype._addCollisionDebugVertex=function(l,v,b,z,$,at){return v.emplaceBack(0,0),l.emplaceBack(b.x,b.y,z,$,Math.round(at.x),Math.round(at.y))},Tr.prototype.addCollisionDebugVertices=function(l,v,b,z,$,at,mt){var Mt=$.segments.prepareSegment(4,$.layoutVertexArray,$.indexArray),oe=Mt.vertexLength,ge=$.layoutVertexArray,Ce=$.collisionVertexArray,Ie=mt.anchorX,Ge=mt.anchorY;this._addCollisionDebugVertex(ge,Ce,at,Ie,Ge,new R(l,v)),this._addCollisionDebugVertex(ge,Ce,at,Ie,Ge,new R(b,v)),this._addCollisionDebugVertex(ge,Ce,at,Ie,Ge,new R(b,z)),this._addCollisionDebugVertex(ge,Ce,at,Ie,Ge,new R(l,z)),Mt.vertexLength+=4;var Zt=$.indexArray;Zt.emplaceBack(oe,oe+1),Zt.emplaceBack(oe+1,oe+2),Zt.emplaceBack(oe+2,oe+3),Zt.emplaceBack(oe+3,oe),Mt.primitiveLength+=4},Tr.prototype.addDebugCollisionBoxes=function(l,v,b,z){for(var $=l;$<v;$++){var at=this.collisionBoxArray.get($);this.addCollisionDebugVertices(at.x1,at.y1,at.x2,at.y2,z?this.textCollisionBox:this.iconCollisionBox,at.anchorPoint,b)}},Tr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yr(ap,Up.members,Ih),this.iconCollisionBox=new Yr(ap,Up.members,Ih);for(var l=0;l<this.symbolInstances.length;l++){var v=this.symbolInstances.get(l);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Tr.prototype._deserializeCollisionBoxesForSymbol=function(l,v,b,z,$,at,mt,Mt,oe){for(var ge={},Ce=v;Ce<b;Ce++){var Ie=l.get(Ce);ge.textBox={x1:Ie.x1,y1:Ie.y1,x2:Ie.x2,y2:Ie.y2,anchorPointX:Ie.anchorPointX,anchorPointY:Ie.anchorPointY},ge.textFeatureIndex=Ie.featureIndex;break}for(var Ge=z;Ge<$;Ge++){var Zt=l.get(Ge);ge.verticalTextBox={x1:Zt.x1,y1:Zt.y1,x2:Zt.x2,y2:Zt.y2,anchorPointX:Zt.anchorPointX,anchorPointY:Zt.anchorPointY},ge.verticalTextFeatureIndex=Zt.featureIndex;break}for(var xr=at;xr<mt;xr++){var mr=l.get(xr);ge.iconBox={x1:mr.x1,y1:mr.y1,x2:mr.x2,y2:mr.y2,anchorPointX:mr.anchorPointX,anchorPointY:mr.anchorPointY},ge.iconFeatureIndex=mr.featureIndex;break}for(var jr=Mt;jr<oe;jr++){var kr=l.get(jr);ge.verticalIconBox={x1:kr.x1,y1:kr.y1,x2:kr.x2,y2:kr.y2,anchorPointX:kr.anchorPointX,anchorPointY:kr.anchorPointY},ge.verticalIconFeatureIndex=kr.featureIndex;break}return ge},Tr.prototype.deserializeCollisionBoxes=function(l){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var b=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}},Tr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Tr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Tr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Tr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Tr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Tr.prototype.addIndicesForPlacedSymbol=function(l,v){for(var b=l.placedSymbolArray.get(v),z=b.vertexStartIndex+4*b.numGlyphs,$=b.vertexStartIndex;$<z;$+=4)l.indexArray.emplaceBack($,$+1,$+2),l.indexArray.emplaceBack($+1,$+2,$+3)},Tr.prototype.getSortedSymbolIndexes=function(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(l),b=Math.cos(l),z=[],$=[],at=[],mt=0;mt<this.symbolInstances.length;++mt){at.push(mt);var Mt=this.symbolInstances.get(mt);z.push(0|Math.round(v*Mt.anchorX+b*Mt.anchorY)),$.push(Mt.featureIndex)}return at.sort(function(oe,ge){return z[oe]-z[ge]||$[ge]-$[oe]}),at},Tr.prototype.addToSortKeyRanges=function(l,v){var b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===v?b.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:l,symbolInstanceEnd:l+1})},Tr.prototype.sortFeatures=function(l){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var b=0,z=this.symbolInstanceIndexes;b<z.length;b+=1){var $=this.symbolInstances.get(z[b]);this.featureSortOrder.push($.featureIndex),[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(function(at,mt,Mt){at>=0&&Mt.indexOf(at)===mt&&v.addIndicesForPlacedSymbol(v.text,at)}),$.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,$.verticalPlacedTextSymbolIndex),$.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.placedIconSymbolIndex),$.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ma("SymbolBucket",Tr,{omit:["layers","collisionBoxArray","features","compareText"]}),Tr.MAX_GLYPHS=65535,Tr.addDynamicAttributes=Nr;var rn=new Rs({"symbol-placement":new Wa(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Wa(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wa(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new za(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wa(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wa(Be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wa(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wa(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wa(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new za(Be.layout_symbol["icon-size"]),"icon-text-fit":new Wa(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wa(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new za(Be.layout_symbol["icon-image"]),"icon-rotate":new za(Be.layout_symbol["icon-rotate"]),"icon-padding":new Wa(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Wa(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new za(Be.layout_symbol["icon-offset"]),"icon-anchor":new za(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wa(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wa(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wa(Be.layout_symbol["text-rotation-alignment"]),"text-field":new za(Be.layout_symbol["text-field"]),"text-font":new za(Be.layout_symbol["text-font"]),"text-size":new za(Be.layout_symbol["text-size"]),"text-max-width":new za(Be.layout_symbol["text-max-width"]),"text-line-height":new Wa(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new za(Be.layout_symbol["text-letter-spacing"]),"text-justify":new za(Be.layout_symbol["text-justify"]),"text-radial-offset":new za(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wa(Be.layout_symbol["text-variable-anchor"]),"text-anchor":new za(Be.layout_symbol["text-anchor"]),"text-max-angle":new Wa(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Wa(Be.layout_symbol["text-writing-mode"]),"text-rotate":new za(Be.layout_symbol["text-rotate"]),"text-padding":new Wa(Be.layout_symbol["text-padding"]),"text-keep-upright":new Wa(Be.layout_symbol["text-keep-upright"]),"text-transform":new za(Be.layout_symbol["text-transform"]),"text-offset":new za(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Wa(Be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wa(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Wa(Be.layout_symbol["text-optional"])}),ur={paint:new Rs({"icon-opacity":new za(Be.paint_symbol["icon-opacity"]),"icon-color":new za(Be.paint_symbol["icon-color"]),"icon-halo-color":new za(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new za(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new za(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Wa(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wa(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new za(Be.paint_symbol["text-opacity"]),"text-color":new za(Be.paint_symbol["text-color"],{runtimeType:yi,getOverride:function(l){return l.textColor},hasOverride:function(l){return!!l.textColor}}),"text-halo-color":new za(Be.paint_symbol["text-halo-color"]),"text-halo-width":new za(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new za(Be.paint_symbol["text-halo-blur"]),"text-translate":new Wa(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Wa(Be.paint_symbol["text-translate-anchor"])}),layout:rn},Rr=function(l){this.type=l.property.overrides?l.property.overrides.runtimeType:si,this.defaultValue=l};Rr.prototype.evaluate=function(l){if(l.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(l.formattedSection))return v.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default},Rr.prototype.eachChild=function(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)},Rr.prototype.outputDefined=function(){return!1},Rr.prototype.serialize=function(){return null},Ma("FormatSectionOverride",Rr,{omit:["defaultValue"]});var vr=function(l){function v(b){l.call(this,b,ur)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.recalculate=function(b,z){if(l.prototype.recalculate.call(this,b,z),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var $=this.layout.get("text-writing-mode");if($){for(var at=[],mt=0,Mt=$;mt<Mt.length;mt+=1){var oe=Mt[mt];at.indexOf(oe)<0&&at.push(oe)}this.layout._values["text-writing-mode"]=at}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(b,z,$,at){var mt=this.layout.get(b).evaluate(z,{},$,at),Mt=this._unevaluatedLayout._values[b];return Mt.isDataDriven()||Bu(Mt.value)||!mt?mt:function(oe,ge){return ge.replace(/{([^{}]+)}/g,function(Ce,Ie){return Ie in oe?String(oe[Ie]):""})}(z.properties,mt)},v.prototype.createBucket=function(b){return new Tr(b)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var b=0,z=ur.paint.overridableProperties;b<z.length;b+=1){var $=z[b];if(v.hasPaintOverride(this.layout,$)){var at,mt=this.paint.get($),Mt=new Rr(mt),oe=new As(Mt,mt.property.specification);at=mt.value.kind==="constant"||mt.value.kind==="source"?new Al("source",oe):new zc("composite",oe,mt.value.zoomStops,mt.value._interpolationType),this.paint._values[$]=new cs(mt.property,at,mt.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(b,z,$){return!(!this.layout||z.isDataDriven()||$.isDataDriven())&&v.hasPaintOverride(this.layout,b)},v.hasPaintOverride=function(b,z){var $=b.get("text-field"),at=ur.paint.properties[z],mt=!1,Mt=function(Ce){for(var Ie=0,Ge=Ce;Ie<Ge.length;Ie+=1)if(at.overrides&&at.overrides.hasOverride(Ge[Ie]))return void(mt=!0)};if($.value.kind==="constant"&&$.value.value instanceof An)Mt($.value.value.sections);else if($.value.kind==="source"){var oe=function(Ce){mt||(Ce instanceof Wt&&he(Ce.value)===ko?Mt(Ce.value.sections):Ce instanceof He?Mt(Ce.sections):Ce.eachChild(oe))},ge=$.value;ge._styleExpression&&oe(ge._styleExpression.expression)}return mt},v}(gs),mn={paint:new Rs({"background-color":new Wa(Be.paint_background["background-color"]),"background-pattern":new Zo(Be.paint_background["background-pattern"]),"background-opacity":new Wa(Be.paint_background["background-opacity"])})},Cn=function(l){function v(b){l.call(this,b,mn)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v}(gs),hi={paint:new Rs({"raster-opacity":new Wa(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wa(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wa(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wa(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Wa(Be.paint_raster["raster-saturation"]),"raster-contrast":new Wa(Be.paint_raster["raster-contrast"]),"raster-resampling":new Wa(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Wa(Be.paint_raster["raster-fade-duration"])})},Ji=function(l){function v(b){l.call(this,b,hi)}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v}(gs),qi=function(l){function v(b){l.call(this,b,{}),this.implementation=b}return l&&(v.__proto__=l),(v.prototype=Object.create(l&&l.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(b){this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},v.prototype.onRemove=function(b){this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},v}(gs),xa={circle:Bp,heatmap:nh,hillshade:xg,fill:Tv,"fill-extrusion":sh,line:jd,symbol:vr,background:Cn,raster:Ji},Yi=A.HTMLImageElement,Ga=A.HTMLCanvasElement,_a=A.HTMLVideoElement,Da=A.ImageData,Oa=A.ImageBitmap,Pa=function(l,v,b,z){this.context=l,this.format=b,this.texture=l.gl.createTexture(),this.update(v,z)};Pa.prototype.update=function(l,v,b){var z=l.width,$=l.height,at=!(this.size&&this.size[0]===z&&this.size[1]===$||b),mt=this.context,Mt=mt.gl;if(this.useMipmap=Boolean(v&&v.useMipmap),Mt.bindTexture(Mt.TEXTURE_2D,this.texture),mt.pixelStoreUnpackFlipY.set(!1),mt.pixelStoreUnpack.set(1),mt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Mt.RGBA&&(!v||v.premultiply!==!1)),at)this.size=[z,$],l instanceof Yi||l instanceof Ga||l instanceof _a||l instanceof Da||Oa&&l instanceof Oa?Mt.texImage2D(Mt.TEXTURE_2D,0,this.format,this.format,Mt.UNSIGNED_BYTE,l):Mt.texImage2D(Mt.TEXTURE_2D,0,this.format,z,$,0,this.format,Mt.UNSIGNED_BYTE,l.data);else{var oe=b||{x:0,y:0},ge=oe.x,Ce=oe.y;l instanceof Yi||l instanceof Ga||l instanceof _a||l instanceof Da||Oa&&l instanceof Oa?Mt.texSubImage2D(Mt.TEXTURE_2D,0,ge,Ce,Mt.RGBA,Mt.UNSIGNED_BYTE,l):Mt.texSubImage2D(Mt.TEXTURE_2D,0,ge,Ce,z,$,Mt.RGBA,Mt.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Mt.generateMipmap(Mt.TEXTURE_2D)},Pa.prototype.bind=function(l,v,b){var z=this.context.gl;z.bindTexture(z.TEXTURE_2D,this.texture),b!==z.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=z.LINEAR),l!==this.filter&&(z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,l),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,b||l),this.filter=l),v!==this.wrap&&(z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,v),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,v),this.wrap=v)},Pa.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Pa.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var So=function(l){var v=this;this._callback=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};So.prototype.trigger=function(){var l=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){l._triggered=!1,l._callback()},0))},So.prototype.remove=function(){delete this._channel,this._callback=function(){}};var qs=function(l,v,b){this.target=l,this.parent=v,this.mapId=b,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},yt(["receive","process"],this),this.invoker=new So(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=gt()?l:A};function Yl(l,v,b){var z=2*Math.PI*6378137/256/Math.pow(2,b);return[l*z-2*Math.PI*6378137/2,v*z-2*Math.PI*6378137/2]}qs.prototype.send=function(l,v,b,z,$){var at=this;$===void 0&&($=!1);var mt=Math.round(1e18*Math.random()).toString(36).substring(0,10);b&&(this.callbacks[mt]=b);var Mt=ot(this.globalScope)?void 0:[];return this.target.postMessage({id:mt,type:l,hasCallback:!!b,targetMapId:z,mustQueue:$,sourceMapId:this.mapId,data:ql(v,Mt)},Mt),{cancel:function(){b&&delete at.callbacks[mt],at.target.postMessage({id:mt,type:"<cancel>",targetMapId:z,sourceMapId:at.mapId})}}},qs.prototype.receive=function(l){var v=l.data,b=v.id;if(b&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[b];var z=this.cancelCallbacks[b];delete this.cancelCallbacks[b],z&&z()}else gt()||v.mustQueue?(this.tasks[b]=v,this.taskQueue.push(b),this.invoker.trigger()):this.processTask(b,v)},qs.prototype.process=function(){if(this.taskQueue.length){var l=this.taskQueue.shift(),v=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(l,v)}},qs.prototype.processTask=function(l,v){var b=this;if(v.type==="<response>"){var z=this.callbacks[l];delete this.callbacks[l],z&&(v.error?z(oc(v.error)):z(null,oc(v.data)))}else{var $=!1,at=ot(this.globalScope)?void 0:[],mt=v.hasCallback?function(Ce,Ie){$=!0,delete b.cancelCallbacks[l],b.target.postMessage({id:l,type:"<response>",sourceMapId:b.mapId,error:Ce?ql(Ce):null,data:ql(Ie,at)},at)}:function(Ce){$=!0},Mt=null,oe=oc(v.data);if(this.parent[v.type])Mt=this.parent[v.type](v.sourceMapId,oe,mt);else if(this.parent.getWorkerSource){var ge=v.type.split(".");Mt=this.parent.getWorkerSource(v.sourceMapId,ge[0],oe.source)[ge[1]](oe,mt)}else mt(new Error("Could not find function "+v.type));!$&&Mt&&Mt.cancel&&(this.cancelCallbacks[l]=Mt.cancel)}},qs.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var vu=function(l,v){l&&(v?this.setSouthWest(l).setNorthEast(v):l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1]))};vu.prototype.setNorthEast=function(l){return this._ne=l instanceof js?new js(l.lng,l.lat):js.convert(l),this},vu.prototype.setSouthWest=function(l){return this._sw=l instanceof js?new js(l.lng,l.lat):js.convert(l),this},vu.prototype.extend=function(l){var v,b,z=this._sw,$=this._ne;if(l instanceof js)v=l,b=l;else{if(!(l instanceof vu))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(vu.convert(l)):this.extend(js.convert(l)):this;if(b=l._ne,!(v=l._sw)||!b)return this}return z||$?(z.lng=Math.min(v.lng,z.lng),z.lat=Math.min(v.lat,z.lat),$.lng=Math.max(b.lng,$.lng),$.lat=Math.max(b.lat,$.lat)):(this._sw=new js(v.lng,v.lat),this._ne=new js(b.lng,b.lat)),this},vu.prototype.getCenter=function(){return new js((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},vu.prototype.getSouthWest=function(){return this._sw},vu.prototype.getNorthEast=function(){return this._ne},vu.prototype.getNorthWest=function(){return new js(this.getWest(),this.getNorth())},vu.prototype.getSouthEast=function(){return new js(this.getEast(),this.getSouth())},vu.prototype.getWest=function(){return this._sw.lng},vu.prototype.getSouth=function(){return this._sw.lat},vu.prototype.getEast=function(){return this._ne.lng},vu.prototype.getNorth=function(){return this._ne.lat},vu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},vu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},vu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},vu.prototype.contains=function(l){var v=js.convert(l),b=v.lng,z=v.lat,$=this._sw.lng<=b&&b<=this._ne.lng;return this._sw.lng>this._ne.lng&&($=this._sw.lng>=b&&b>=this._ne.lng),this._sw.lat<=z&&z<=this._ne.lat&&$},vu.convert=function(l){return!l||l instanceof vu?l:new vu(l)};var js=function(l,v){if(isNaN(l)||isNaN(v))throw new Error("Invalid LngLat object: ("+l+", "+v+")");if(this.lng=+l,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};js.prototype.wrap=function(){return new js(V(this.lng,-180,180),this.lat)},js.prototype.toArray=function(){return[this.lng,this.lat]},js.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},js.prototype.distanceTo=function(l){var v=Math.PI/180,b=this.lat*v,z=l.lat*v,$=Math.sin(b)*Math.sin(z)+Math.cos(b)*Math.cos(z)*Math.cos((l.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min($,1))},js.prototype.toBounds=function(l){l===void 0&&(l=0);var v=360*l/40075017,b=v/Math.cos(Math.PI/180*this.lat);return new vu(new js(this.lng-b,this.lat-v),new js(this.lng+b,this.lat+v))},js.convert=function(l){if(l instanceof js)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new js(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new js(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bh=2*Math.PI*63710088e-1;function ec(l){return Bh*Math.cos(l*Math.PI/180)}function ch(l){return(180+l)/360}function mf(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function y0(l,v){return l/ec(v)}function Oc(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}var mp=function(l,v,b){b===void 0&&(b=0),this.x=+l,this.y=+v,this.z=+b};mp.fromLngLat=function(l,v){v===void 0&&(v=0);var b=js.convert(l);return new mp(ch(b.lng),mf(b.lat),y0(v,b.lat))},mp.prototype.toLngLat=function(){return new js(360*this.x-180,Oc(this.y))},mp.prototype.toAltitude=function(){return this.z*ec(Oc(this.y))},mp.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bh*(l=Oc(this.y),1/Math.cos(l*Math.PI/180));var l};var ld=function(l,v,b){this.z=l,this.x=v,this.y=b,this.key=fh(0,l,l,v,b)};ld.prototype.equals=function(l){return this.z===l.z&&this.x===l.x&&this.y===l.y},ld.prototype.url=function(l,v){var b,z,$,at,mt,Mt=(z=this.y,$=this.z,at=Yl(256*(b=this.x),256*(z=Math.pow(2,$)-z-1),$),mt=Yl(256*(b+1),256*(z+1),$),at[0]+","+at[1]+","+mt[0]+","+mt[1]),oe=function(ge,Ce,Ie){for(var Ge,Zt="",xr=ge;xr>0;xr--)Zt+=(Ce&(Ge=1<<xr-1)?1:0)+(Ie&Ge?2:0);return Zt}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",oe).replace("{bbox-epsg-3857}",Mt)},ld.prototype.getTilePoint=function(l){var v=Math.pow(2,this.z);return new R(8192*(l.x*v-this.x),8192*(l.y*v-this.y))},ld.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sm=function(l,v){this.wrap=l,this.canonical=v,this.key=fh(l,v.z,v.z,v.x,v.y)},Eu=function(l,v,b,z,$){this.overscaledZ=l,this.wrap=v,this.canonical=new ld(b,+z,+$),this.key=fh(v,l,b,z,$)};function fh(l,v,b,z,$){(l*=2)<0&&(l=-1*l-1);var at=1<<b;return(at*at*l+at*$+z).toString(36)+b.toString(36)+v.toString(36)}Eu.prototype.equals=function(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)},Eu.prototype.scaledTo=function(l){var v=this.canonical.z-l;return l>this.canonical.z?new Eu(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eu(l,this.wrap,l,this.canonical.x>>v,this.canonical.y>>v)},Eu.prototype.calculateScaledKey=function(l,v){var b=this.canonical.z-l;return l>this.canonical.z?fh(this.wrap*+v,l,this.canonical.z,this.canonical.x,this.canonical.y):fh(this.wrap*+v,l,l,this.canonical.x>>b,this.canonical.y>>b)},Eu.prototype.isChildOf=function(l){if(l.wrap!==this.wrap)return!1;var v=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>v&&l.canonical.y===this.canonical.y>>v},Eu.prototype.children=function(l){if(this.overscaledZ>=l)return[new Eu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,b=2*this.canonical.x,z=2*this.canonical.y;return[new Eu(v,this.wrap,v,b,z),new Eu(v,this.wrap,v,b+1,z),new Eu(v,this.wrap,v,b,z+1),new Eu(v,this.wrap,v,b+1,z+1)]},Eu.prototype.isLessThan=function(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))},Eu.prototype.wrapped=function(){return new Eu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.unwrapTo=function(l){return new Eu(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Eu.prototype.toUnwrapped=function(){return new sm(this.wrap,this.canonical)},Eu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Eu.prototype.getTilePoint=function(l){return this.canonical.getTilePoint(new mp(l.x-this.wrap,l.y))},Ma("CanonicalTileID",ld),Ma("OverscaledTileID",Eu,{omit:["posMatrix"]});var Fh=function(l,v,b){if(this.uid=l,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(b&&b!=="mapbox"&&b!=="terrarium")return Qt('"'+b+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var z=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=b||"mapbox";for(var $=0;$<z;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(z,$)]=this.data[this._idx(z-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,z)]=this.data[this._idx($,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)]};Fh.prototype.get=function(l,v){var b=new Uint8Array(this.data.buffer),z=4*this._idx(l,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(b[z],b[z+1],b[z+2])},Fh.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Fh.prototype._idx=function(l,v){if(l<-1||l>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(l+1)},Fh.prototype._unpackMapbox=function(l,v,b){return(256*l*256+256*v+b)/10-1e4},Fh.prototype._unpackTerrarium=function(l,v,b){return 256*l+v+b/256-32768},Fh.prototype.getPixels=function(){return new ol({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Fh.prototype.backfillBorder=function(l,v,b){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");var z=v*this.dim,$=v*this.dim+this.dim,at=b*this.dim,mt=b*this.dim+this.dim;switch(v){case-1:z=$-1;break;case 1:$=z+1}switch(b){case-1:at=mt-1;break;case 1:mt=at+1}for(var Mt=-v*this.dim,oe=-b*this.dim,ge=at;ge<mt;ge++)for(var Ce=z;Ce<$;Ce++)this.data[this._idx(Ce,ge)]=l.data[this._idx(Ce+Mt,ge+oe)]},Ma("DEMData",Fh);var Lv=function(l){this._stringToNumber={},this._numberToString=[];for(var v=0;v<l.length;v++){var b=l[v];this._stringToNumber[b]=v,this._numberToString[v]=b}};Lv.prototype.encode=function(l){return this._stringToNumber[l]},Lv.prototype.decode=function(l){return this._numberToString[l]};var Tg=function(l,v,b,z,$){this.type="Feature",this._vectorTileFeature=l,l._z=v,l._x=b,l._y=z,this.properties=l.properties,this.id=$},Pg={geometry:{configurable:!0}};Pg.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Pg.geometry.set=function(l){this._geometry=l},Tg.prototype.toJSON=function(){var l={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(l[v]=this[v]);return l},Object.defineProperties(Tg.prototype,Pg);var Vp=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vp.prototype.updateState=function(l,v,b){var z=String(v);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][z]=this.stateChanges[l][z]||{},X(this.stateChanges[l][z],b),this.deletedStates[l]===null)for(var $ in this.deletedStates[l]={},this.state[l])$!==z&&(this.deletedStates[l][$]=null);else if(this.deletedStates[l]&&this.deletedStates[l][z]===null)for(var at in this.deletedStates[l][z]={},this.state[l][z])b[at]||(this.deletedStates[l][z][at]=null);else for(var mt in b)this.deletedStates[l]&&this.deletedStates[l][z]&&this.deletedStates[l][z][mt]===null&&delete this.deletedStates[l][z][mt]},Vp.prototype.removeFeatureState=function(l,v,b){if(this.deletedStates[l]!==null){var z=String(v);if(this.deletedStates[l]=this.deletedStates[l]||{},b&&v!==void 0)this.deletedStates[l][z]!==null&&(this.deletedStates[l][z]=this.deletedStates[l][z]||{},this.deletedStates[l][z][b]=null);else if(v!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][z])for(b in this.deletedStates[l][z]={},this.stateChanges[l][z])this.deletedStates[l][z][b]=null;else this.deletedStates[l][z]=null;else this.deletedStates[l]=null}},Vp.prototype.getState=function(l,v){var b=String(v),z=X({},(this.state[l]||{})[b],(this.stateChanges[l]||{})[b]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){var $=this.deletedStates[l][v];if($===null)return{};for(var at in $)delete z[at]}return z},Vp.prototype.initializeTileState=function(l,v){l.setFeatureState(this.state,v)},Vp.prototype.coalesceChanges=function(l,v){var b={};for(var z in this.stateChanges){this.state[z]=this.state[z]||{};var $={};for(var at in this.stateChanges[z])this.state[z][at]||(this.state[z][at]={}),X(this.state[z][at],this.stateChanges[z][at]),$[at]=this.state[z][at];b[z]=$}for(var mt in this.deletedStates){this.state[mt]=this.state[mt]||{};var Mt={};if(this.deletedStates[mt]===null)for(var oe in this.state[mt])Mt[oe]={},this.state[mt][oe]={};else for(var ge in this.deletedStates[mt]){if(this.deletedStates[mt][ge]===null)this.state[mt][ge]={};else for(var Ce=0,Ie=Object.keys(this.deletedStates[mt][ge]);Ce<Ie.length;Ce+=1)delete this.state[mt][ge][Ie[Ce]];Mt[ge]=this.state[mt][ge]}b[mt]=b[mt]||{},X(b[mt],Mt)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(var Ge in l)l[Ge].setFeatureState(b,v)};var Zp=function(l,v){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new sf(8192,16,0),this.grid3D=new sf(8192,16,0),this.featureIndexArray=new Oe,this.promoteId=v};function yy(l,v,b,z,$){return Lt(l,function(at,mt){var Mt=v instanceof Qu?v.get(mt):null;return Mt&&Mt.evaluate?Mt.evaluate(b,z,$):Mt})}function yp(l){for(var v=1/0,b=1/0,z=-1/0,$=-1/0,at=0,mt=l;at<mt.length;at+=1){var Mt=mt[at];v=Math.min(v,Mt.x),b=Math.min(b,Mt.y),z=Math.max(z,Mt.x),$=Math.max($,Mt.y)}return{minX:v,minY:b,maxX:z,maxY:$}}function $d(l,v){return v-l}Zp.prototype.insert=function(l,v,b,z,$,at){var mt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,z,$);for(var Mt=at?this.grid3D:this.grid,oe=0;oe<v.length;oe++){for(var ge=v[oe],Ce=[1/0,1/0,-1/0,-1/0],Ie=0;Ie<ge.length;Ie++){var Ge=ge[Ie];Ce[0]=Math.min(Ce[0],Ge.x),Ce[1]=Math.min(Ce[1],Ge.y),Ce[2]=Math.max(Ce[2],Ge.x),Ce[3]=Math.max(Ce[3],Ge.y)}Ce[0]<8192&&Ce[1]<8192&&Ce[2]>=0&&Ce[3]>=0&&Mt.insert(mt,Ce[0],Ce[1],Ce[2],Ce[3])}},Zp.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new jc.VectorTile(new Kd(this.rawTileData)).layers,this.sourceLayerCoder=new Lv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zp.prototype.query=function(l,v,b,z){var $=this;this.loadVTLayers();for(var at=l.params||{},mt=8192/l.tileSize/l.scale,Mt=Eh(at.filter),oe=l.queryGeometry,ge=l.queryPadding*mt,Ce=yp(oe),Ie=this.grid.query(Ce.minX-ge,Ce.minY-ge,Ce.maxX+ge,Ce.maxY+ge),Ge=yp(l.cameraQueryGeometry),Zt=this.grid3D.query(Ge.minX-ge,Ge.minY-ge,Ge.maxX+ge,Ge.maxY+ge,function(kn,Gn,oi,Bi){return function(oa,eo,ba,lo,Ea){for(var es=0,Ao=oa;es<Ao.length;es+=1){var Za=Ao[es];if(eo<=Za.x&&ba<=Za.y&&lo>=Za.x&&Ea>=Za.y)return!0}var qo=[new R(eo,ba),new R(eo,Ea),new R(lo,Ea),new R(lo,ba)];if(oa.length>2){for(var jo=0,ys=qo;jo<ys.length;jo+=1)if(gc(oa,ys[jo]))return!0}for(var co=0;co<oa.length-1;co++)if(rh(oa[co],oa[co+1],qo))return!0;return!1}(l.cameraQueryGeometry,kn-ge,Gn-ge,oi+ge,Bi+ge)}),xr=0,mr=Zt;xr<mr.length;xr+=1)Ie.push(mr[xr]);Ie.sort($d);for(var jr,kr={},un=function(kn){var Gn=Ie[kn];if(Gn!==jr){jr=Gn;var oi=$.featureIndexArray.get(Gn),Bi=null;$.loadMatchingFeature(kr,oi.bucketIndex,oi.sourceLayerIndex,oi.featureIndex,Mt,at.layers,at.availableImages,v,b,z,function(oa,eo,ba){return Bi||(Bi=du(oa)),eo.queryIntersectsFeature(oe,oa,ba,Bi,$.z,l.transform,mt,l.pixelPosMatrix)})}},En=0;En<Ie.length;En++)un(En);return kr},Zp.prototype.loadMatchingFeature=function(l,v,b,z,$,at,mt,Mt,oe,ge,Ce){var Ie=this.bucketLayerIDs[v];if(!at||function(oa,eo){for(var ba=0;ba<oa.length;ba++)if(eo.indexOf(oa[ba])>=0)return!0;return!1}(at,Ie)){var Ge=this.sourceLayerCoder.decode(b),Zt=this.vtLayers[Ge].feature(z);if($.needGeometry){var xr=Nu(Zt,!0);if(!$.filter(new Qo(this.tileID.overscaledZ),xr,this.tileID.canonical))return}else if(!$.filter(new Qo(this.tileID.overscaledZ),Zt))return;for(var mr=this.getId(Zt,Ge),jr=0;jr<Ie.length;jr++){var kr=Ie[jr];if(!(at&&at.indexOf(kr)<0)){var un=Mt[kr];if(un){var En={};mr!==void 0&&ge&&(En=ge.getState(un.sourceLayer||"_geojsonTileLayer",mr));var kn=X({},oe[kr]);kn.paint=yy(kn.paint,un.paint,Zt,En,mt),kn.layout=yy(kn.layout,un.layout,Zt,En,mt);var Gn=!Ce||Ce(Zt,un,En);if(Gn){var oi=new Tg(Zt,this.z,this.x,this.y,mr);oi.layer=kn;var Bi=l[kr];Bi===void 0&&(Bi=l[kr]=[]),Bi.push({featureIndex:z,feature:oi,intersectionZ:Gn})}}}}}},Zp.prototype.lookupSymbolFeatures=function(l,v,b,z,$,at,mt,Mt){var oe={};this.loadVTLayers();for(var ge=Eh($),Ce=0,Ie=l;Ce<Ie.length;Ce+=1)this.loadMatchingFeature(oe,b,z,Ie[Ce],ge,at,mt,Mt,v);return oe},Zp.prototype.hasLayer=function(l){for(var v=0,b=this.bucketLayerIDs;v<b.length;v+=1)for(var z=0,$=b[v];z<$.length;z+=1)if(l===$[z])return!0;return!1},Zp.prototype.getId=function(l,v){var b=l.id;return this.promoteId&&typeof(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(b=Number(b)),b},Ma("FeatureIndex",Zp,{omit:["rawTileData","sourceLayerCoder"]});var Ys=function(l,v){this.tileID=l,this.uid=q(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ys.prototype.registerFadeDuration=function(l){var v=l+this.timeAdded;v<Kt.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},Ys.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ys.prototype.loadVectorData=function(l,v,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){for(var z in l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(ge,Ce){var Ie={};if(!Ce)return Ie;for(var Ge=function(){var mr=xr[Zt],jr=mr.layerIds.map(function(En){return Ce.getLayer(En)}).filter(Boolean);if(jr.length!==0){mr.layers=jr,mr.stateDependentLayerIds&&(mr.stateDependentLayers=mr.stateDependentLayerIds.map(function(En){return jr.filter(function(kn){return kn.id===En})[0]}));for(var kr=0,un=jr;kr<un.length;kr+=1)Ie[un[kr].id]=mr}},Zt=0,xr=ge;Zt<xr.length;Zt+=1)Ge();return Ie}(l.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var $=this.buckets[z];if($ instanceof Tr){if(this.hasSymbolBuckets=!0,!b)break;$.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var at in this.buckets){var mt=this.buckets[at];if(mt instanceof Tr&&mt.hasRTLText){this.hasRTLText=!0,sc.isLoading()||sc.isLoaded()||Td()!=="deferred"||Gc();break}}for(var Mt in this.queryPadding=0,this.buckets){var oe=this.buckets[Mt];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(Mt).queryRadius(oe))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new I},Ys.prototype.unloadVectorData=function(){for(var l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ys.prototype.getBucket=function(l){return this.buckets[l.id]},Ys.prototype.upload=function(l){for(var v in this.buckets){var b=this.buckets[v];b.uploadPending()&&b.upload(l)}var z=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pa(l,this.imageAtlas.image,z.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pa(l,this.glyphAtlasImage,z.ALPHA),this.glyphAtlasImage=null)},Ys.prototype.prepare=function(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)},Ys.prototype.queryRenderedFeatures=function(l,v,b,z,$,at,mt,Mt,oe,ge){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:$,scale:at,tileSize:this.tileSize,pixelPosMatrix:ge,transform:Mt,params:mt,queryPadding:this.queryPadding*oe},l,v,b):{}},Ys.prototype.querySourceFeatures=function(l,v){var b=this.latestFeatureIndex;if(b&&b.rawTileData){var z=b.loadVTLayers(),$=v?v.sourceLayer:"",at=z._geojsonTileLayer||z[$];if(at)for(var mt=Eh(v&&v.filter),Mt=this.tileID.canonical,oe=Mt.z,ge=Mt.x,Ce=Mt.y,Ie={z:oe,x:ge,y:Ce},Ge=0;Ge<at.length;Ge++){var Zt=at.feature(Ge);if(mt.needGeometry){var xr=Nu(Zt,!0);if(!mt.filter(new Qo(this.tileID.overscaledZ),xr,this.tileID.canonical))continue}else if(!mt.filter(new Qo(this.tileID.overscaledZ),Zt))continue;var mr=b.getId(Zt,$),jr=new Tg(Zt,oe,ge,Ce,mr);jr.tile=Ie,l.push(jr)}}},Ys.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ys.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ys.prototype.setExpiryData=function(l){var v=this.expirationTime;if(l.cacheControl){var b=vt(l.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){var z=Date.now(),$=!1;if(this.expirationTime>z)$=!1;else if(v)if(this.expirationTime<v)$=!0;else{var at=this.expirationTime-v;at?this.expirationTime=z+Math.max(at,3e4):$=!0}else $=!0;$?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ys.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ys.prototype.setFeatureState=function(l,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(l).length!==0){var b=this.latestFeatureIndex.loadVTLayers();for(var z in this.buckets)if(v.style.hasLayer(z)){var $=this.buckets[z],at=$.layers[0].sourceLayer||"_geojsonTileLayer",mt=b[at],Mt=l[at];if(mt&&Mt&&Object.keys(Mt).length!==0){$.update(Mt,mt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var oe=v&&v.style&&v.style.getLayer(z);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius($)))}}}},Ys.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ys.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Kt.now()},Ys.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ys.prototype.setHoldDuration=function(l){this.symbolFadeHoldUntil=Kt.now()+l},Ys.prototype.setDependencies=function(l,v){for(var b={},z=0,$=v;z<$.length;z+=1)b[$[z]]=!0;this.dependencies[l]=b},Ys.prototype.hasDependency=function(l,v){for(var b=0,z=l;b<z.length;b+=1){var $=this.dependencies[z[b]];if($){for(var at=0,mt=v;at<mt.length;at+=1)if($[mt[at]])return!0}}return!1};var Hp=A.performance,um=function(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},Hp.mark(this._marks.start)};um.prototype.finish=function(){Hp.mark(this._marks.end);var l=Hp.getEntriesByName(this._marks.measure);return l.length===0&&(Hp.measure(this._marks.measure,this._marks.start,this._marks.end),l=Hp.getEntriesByName(this._marks.measure),Hp.clearMarks(this._marks.start),Hp.clearMarks(this._marks.end),Hp.clearMeasures(this._marks.measure)),l},y.Actor=qs,y.AlphaImage=Hc,y.CanonicalTileID=ld,y.CollisionBoxArray=I,y.Color=Po,y.DEMData=Fh,y.DataConstantProperty=Wa,y.DictionaryCoder=Lv,y.EXTENT=8192,y.ErrorEvent=or,y.EvaluationParameters=Qo,y.Event=Ze,y.Evented=lr,y.FeatureIndex=Zp,y.FillBucket=Pc,y.FillExtrusionBucket=gf,y.ImageAtlas=Ai,y.ImagePosition=fn,y.LineBucket=Us,y.LngLat=js,y.LngLatBounds=vu,y.MercatorCoordinate=mp,y.ONE_EM=24,y.OverscaledTileID=Eu,y.Point=R,y.Point$1=R,y.Properties=Rs,y.Protobuf=Kd,y.RGBAImage=ol,y.RequestManager=Pt,y.RequestPerformance=um,y.ResourceType=Ui,y.SegmentVector=nr,y.SourceFeatureState=Vp,y.StructArrayLayout1ui2=id,y.StructArrayLayout2f1f2i16=Qf,y.StructArrayLayout2i4=Cf,y.StructArrayLayout3ui6=qf,y.StructArrayLayout4i8=Vc,y.SymbolBucket=Tr,y.Texture=Pa,y.Tile=Ys,y.Transitionable=$u,y.Uniform1f=Vi,y.Uniform1i=gi,y.Uniform2f=Hi,y.Uniform3f=fa,y.Uniform4f=$a,y.UniformColor=Qa,y.UniformMatrix4f=No,y.UnwrappedTileID=sm,y.ValidationError=tr,y.WritingMode=Ki,y.ZoomHistory=td,y.add=function(l,v,b){return l[0]=v[0]+b[0],l[1]=v[1]+b[1],l[2]=v[2]+b[2],l},y.addDynamicAttributes=Nr,y.asyncAll=function(l,v,b){if(!l.length)return b(null,[]);var z=l.length,$=new Array(l.length),at=null;l.forEach(function(mt,Mt){v(mt,function(oe,ge){oe&&(at=oe),$[Mt]=ge,--z==0&&b(at,$)})})},y.bezier=M,y.bindAll=yt,y.browser=Kt,y.cacheEntryPossiblyAdded=function(l){++to>Kn&&(l.getActor().send("enforceCacheSizeLimit",ln),to=0)},y.clamp=k,y.clearTileCache=function(l){var v=A.caches.delete("mapbox-tiles");l&&v.catch(l).then(function(){return l()})},y.clipLine=ul,y.clone=function(l){var v=new Ps(16);return v[0]=l[0],v[1]=l[1],v[2]=l[2],v[3]=l[3],v[4]=l[4],v[5]=l[5],v[6]=l[6],v[7]=l[7],v[8]=l[8],v[9]=l[9],v[10]=l[10],v[11]=l[11],v[12]=l[12],v[13]=l[13],v[14]=l[14],v[15]=l[15],v},y.clone$1=Gt,y.clone$2=function(l){var v=new Ps(3);return v[0]=l[0],v[1]=l[1],v[2]=l[2],v},y.collisionCircleLayout=Ag,y.config=Jt,y.create=function(){var l=new Ps(16);return Ps!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},y.create$1=function(){var l=new Ps(9);return Ps!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l},y.create$2=function(){var l=new Ps(4);return Ps!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l},y.createCommonjsModule=U,y.createExpression=Cl,y.createLayout=Hs,y.createStyleLayer=function(l){return l.type==="custom"?new qi(l):new xa[l.type](l)},y.cross=function(l,v,b){var z=v[0],$=v[1],at=v[2],mt=b[0],Mt=b[1],oe=b[2];return l[0]=$*oe-at*Mt,l[1]=at*mt-z*oe,l[2]=z*Mt-$*mt,l},y.deepEqual=function l(v,b){if(Array.isArray(v)){if(!Array.isArray(b)||v.length!==b.length)return!1;for(var z=0;z<v.length;z++)if(!l(v[z],b[z]))return!1;return!0}if(typeof v=="object"&&v!==null&&b!==null){if(typeof b!="object"||Object.keys(v).length!==Object.keys(b).length)return!1;for(var $ in v)if(!l(v[$],b[$]))return!1;return!0}return v===b},y.dot=function(l,v){return l[0]*v[0]+l[1]*v[1]+l[2]*v[2]},y.dot$1=function(l,v){return l[0]*v[0]+l[1]*v[1]+l[2]*v[2]+l[3]*v[3]},y.ease=O,y.emitValidationErrors=kp,y.endsWith=lt,y.enforceCacheSizeLimit=function(l){jn(),$r&&$r.then(function(v){v.keys().then(function(b){for(var z=0;z<b.length-l;z++)v.delete(b[z])})})},y.evaluateSizeForFeature=Co,y.evaluateSizeForZoom=Do,y.evaluateVariableOffset=lh,y.evented=ed,y.extend=X,y.featureFilter=Eh,y.filterObject=wt,y.fromRotation=function(l,v){var b=Math.sin(v),z=Math.cos(v);return l[0]=z,l[1]=b,l[2]=0,l[3]=-b,l[4]=z,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},y.getAnchorAlignment=$i,y.getAnchorJustification=yr,y.getArrayBuffer=nn,y.getImage=fe,y.getJSON=function(l,v){return qr(X(l,{type:"json"}),v)},y.getRTLTextPluginStatus=Td,y.getReferrer=We,y.getVideo=function(l,v){var b,z,$=A.document.createElement("video");$.muted=!0,$.onloadstart=function(){v(null,$)};for(var at=0;at<l.length;at++){var mt=A.document.createElement("source");b=l[at],z=void 0,(z=A.document.createElement("a")).href=b,(z.protocol!==A.document.location.protocol||z.host!==A.document.location.host)&&($.crossOrigin="Anonymous"),mt.src=l[at],$.appendChild(mt)}return{cancel:function(){}}},y.identity=mc,y.invert=function(l,v){var b=v[0],z=v[1],$=v[2],at=v[3],mt=v[4],Mt=v[5],oe=v[6],ge=v[7],Ce=v[8],Ie=v[9],Ge=v[10],Zt=v[11],xr=v[12],mr=v[13],jr=v[14],kr=v[15],un=b*Mt-z*mt,En=b*oe-$*mt,kn=b*ge-at*mt,Gn=z*oe-$*Mt,oi=z*ge-at*Mt,Bi=$*ge-at*oe,oa=Ce*mr-Ie*xr,eo=Ce*jr-Ge*xr,ba=Ce*kr-Zt*xr,lo=Ie*jr-Ge*mr,Ea=Ie*kr-Zt*mr,es=Ge*kr-Zt*jr,Ao=un*es-En*Ea+kn*lo+Gn*ba-oi*eo+Bi*oa;return Ao?(l[0]=(Mt*es-oe*Ea+ge*lo)*(Ao=1/Ao),l[1]=($*Ea-z*es-at*lo)*Ao,l[2]=(mr*Bi-jr*oi+kr*Gn)*Ao,l[3]=(Ge*oi-Ie*Bi-Zt*Gn)*Ao,l[4]=(oe*ba-mt*es-ge*eo)*Ao,l[5]=(b*es-$*ba+at*eo)*Ao,l[6]=(jr*kn-xr*Bi-kr*En)*Ao,l[7]=(Ce*Bi-Ge*kn+Zt*En)*Ao,l[8]=(mt*Ea-Mt*ba+ge*oa)*Ao,l[9]=(z*ba-b*Ea-at*oa)*Ao,l[10]=(xr*oi-mr*kn+kr*un)*Ao,l[11]=(Ie*kn-Ce*oi-Zt*un)*Ao,l[12]=(Mt*eo-mt*lo-oe*oa)*Ao,l[13]=(b*lo-z*eo+$*oa)*Ao,l[14]=(mr*En-xr*Gn-jr*un)*Ao,l[15]=(Ce*Gn-Ie*En+Ge*un)*Ao,l):null},y.isChar=Qi,y.isMapboxURL=Yt,y.keysDifference=function(l,v){var b=[];for(var z in l)z in v||b.push(z);return b},y.makeRequest=qr,y.mapObject=Lt,y.mercatorXfromLng=ch,y.mercatorYfromLat=mf,y.mercatorZfromAltitude=y0,y.mul=up,y.multiply=Xl,y.mvt=jc,y.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},y.normalize=function(l,v){var b=v[0],z=v[1],$=v[2],at=b*b+z*z+$*$;return at>0&&(at=1/Math.sqrt(at)),l[0]=v[0]*at,l[1]=v[1]*at,l[2]=v[2]*at,l},y.number=ds,y.offscreenCanvasSupported=qa,y.ortho=function(l,v,b,z,$,at,mt){var Mt=1/(v-b),oe=1/(z-$),ge=1/(at-mt);return l[0]=-2*Mt,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*oe,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*ge,l[11]=0,l[12]=(v+b)*Mt,l[13]=($+z)*oe,l[14]=(mt+at)*ge,l[15]=1,l},y.parseGlyphPBF=function(l){return new Kd(l).readFields(zi,[])},y.pbf=Kd,y.performSymbolLayout=function(l,v,b,z,$,at,mt){l.createArrays(),l.tilePixelRatio=8192/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;var Mt=l.layers[0].layout,oe=l.layers[0]._unevaluatedLayout._values,ge={};if(l.textSizeData.kind==="composite"){var Ce=l.textSizeData,Ie=Ce.maxZoom;ge.compositeTextSizes=[oe["text-size"].possiblyEvaluate(new Qo(Ce.minZoom),mt),oe["text-size"].possiblyEvaluate(new Qo(Ie),mt)]}if(l.iconSizeData.kind==="composite"){var Ge=l.iconSizeData,Zt=Ge.maxZoom;ge.compositeIconSizes=[oe["icon-size"].possiblyEvaluate(new Qo(Ge.minZoom),mt),oe["icon-size"].possiblyEvaluate(new Qo(Zt),mt)]}ge.layoutTextSize=oe["text-size"].possiblyEvaluate(new Qo(l.zoom+1),mt),ge.layoutIconSize=oe["icon-size"].possiblyEvaluate(new Qo(l.zoom+1),mt),ge.textMaxSize=oe["text-size"].possiblyEvaluate(new Qo(18));for(var xr=24*Mt.get("text-line-height"),mr=Mt.get("text-rotation-alignment")==="map"&&Mt.get("symbol-placement")!=="point",jr=Mt.get("text-keep-upright"),kr=Mt.get("text-size"),un=function(){var Gn=kn[En],oi=Mt.get("text-font").evaluate(Gn,{},mt).join(","),Bi=kr.evaluate(Gn,{},mt),oa=ge.layoutTextSize.evaluate(Gn,{},mt),eo=ge.layoutIconSize.evaluate(Gn,{},mt),ba={horizontal:{},vertical:void 0},lo=Gn.text,Ea=[0,0];if(lo){var es=lo.toString(),Ao=24*Mt.get("text-letter-spacing").evaluate(Gn,{},mt),Za=function(us){for(var ru=0,Ws=us;ru<Ws.length;ru+=1)if(Os=Ws[ru].charCodeAt(0),Qi.Arabic(Os)||Qi["Arabic Supplement"](Os)||Qi["Arabic Extended-A"](Os)||Qi["Arabic Presentation Forms-A"](Os)||Qi["Arabic Presentation Forms-B"](Os))return!1;var Os;return!0}(es)?Ao:0,qo=Mt.get("text-anchor").evaluate(Gn,{},mt),jo=Mt.get("text-variable-anchor");if(!jo){var ys=Mt.get("text-radial-offset").evaluate(Gn,{},mt);Ea=ys?lh(qo,[24*ys,fl]):Mt.get("text-offset").evaluate(Gn,{},mt).map(function(us){return 24*us})}var co=mr?"center":Mt.get("text-justify").evaluate(Gn,{},mt),Fs=Mt.get("symbol-placement"),Cu=Fs==="point"?24*Mt.get("text-max-width").evaluate(Gn,{},mt):0,el=function(){l.allowVerticalPlacement&&Ec(es)&&(ba.vertical=ha(lo,v,b,$,oi,Cu,xr,qo,"left",Za,Ea,Ki.vertical,!0,Fs,oa,Bi))};if(!mr&&jo){for(var _u=co==="auto"?jo.map(function(us){return yr(us)}):[co],Ru=!1,bu=0;bu<_u.length;bu++){var Bl=_u[bu];if(!ba.horizontal[Bl])if(Ru)ba.horizontal[Bl]=ba.horizontal[0];else{var Il=ha(lo,v,b,$,oi,Cu,xr,"center",Bl,Za,Ea,Ki.horizontal,!1,Fs,oa,Bi);Il&&(ba.horizontal[Bl]=Il,Ru=Il.positionedLines.length===1)}}el()}else{co==="auto"&&(co=yr(qo));var Fl=ha(lo,v,b,$,oi,Cu,xr,qo,co,Za,Ea,Ki.horizontal,!1,Fs,oa,Bi);Fl&&(ba.horizontal[co]=Fl),el(),Ec(es)&&mr&&jr&&(ba.vertical=ha(lo,v,b,$,oi,Cu,xr,qo,co,Za,Ea,Ki.vertical,!1,Fs,oa,Bi))}}var Nl=void 0,lc=!1;if(Gn.icon&&Gn.icon.name){var rl=z[Gn.icon.name];rl&&(Nl=function(us,ru,Ws){var Os=$i(Ws),Lc=ru[0]-us.displaySize[0]*Os.horizontalAlign,cc=ru[1]-us.displaySize[1]*Os.verticalAlign;return{image:us,top:cc,bottom:cc+us.displaySize[1],left:Lc,right:Lc+us.displaySize[0]}}($[Gn.icon.name],Mt.get("icon-offset").evaluate(Gn,{},mt),Mt.get("icon-anchor").evaluate(Gn,{},mt)),lc=rl.sdf,l.sdfIcons===void 0?l.sdfIcons=rl.sdf:l.sdfIcons!==rl.sdf&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rl.pixelRatio!==l.pixelRatio||Mt.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}var Ol=Mn(ba.horizontal)||ba.vertical;l.iconsInText=!!Ol&&Ol.iconsInText,(Ol||Nl)&&function(us,ru,Ws,Os,Lc,cc,Su,xl,rc,Ls,Nh){var $c=cc.textMaxSize.evaluate(ru,{});$c===void 0&&($c=Su);var zh,Gu=us.layers[0].layout,Gh=Gu.get("icon-offset").evaluate(ru,{},Nh),Df=Mn(Ws.horizontal),Uh=Su/24,hh=us.tilePixelRatio*Uh,jp=us.tilePixelRatio*$c/24,Vh=us.tilePixelRatio*xl,Bf=us.tilePixelRatio*Gu.get("symbol-spacing"),Ff=Gu.get("text-padding")*us.tilePixelRatio,Qd=Gu.get("icon-padding")*us.tilePixelRatio,cd=Gu.get("text-max-angle")/180*Math.PI,Ig=Gu.get("text-rotation-alignment")==="map"&&Gu.get("symbol-placement")!=="point",nc=Gu.get("icon-rotation-alignment")==="map"&&Gu.get("symbol-placement")!=="point",xp=Gu.get("symbol-placement"),kv=Bf/2,qd=Gu.get("icon-text-fit");Os&&qd!=="none"&&(us.allowVerticalPlacement&&Ws.vertical&&(zh=Io(Os,Ws.vertical,qd,Gu.get("icon-text-fit-padding"),Gh,Uh)),Df&&(Os=Io(Os,Df,qd,Gu.get("icon-text-fit-padding"),Gh,Uh)));var _p=function(Dg,Gv){Gv.x<0||Gv.x>=8192||Gv.y<0||Gv.y>=8192||function(Xu,Zh,F1,hd,S0,fm,w0,Hh,E0,Uv,C0,A0,hm,xy,Bg,_y,pm,by,jh,Xp,kc,Fg,Ng,Xh,dm){var Sy,nv,Vv,iv,av,ov=Xu.addToLineVertexArray(Zh,F1),M0=0,vm=0,wy=0,Ey=0,zg=-1,T0=-1,Sp={},P0=dr(""),I0=0,O0=0;if(Hh._unevaluatedLayout.getValue("text-radial-offset")===void 0?(I0=(Sy=Hh.layout.get("text-offset").evaluate(kc,{},Xh).map(function(Hv){return 24*Hv}))[0],O0=Sy[1]):(I0=24*Hh.layout.get("text-radial-offset").evaluate(kc,{},Xh),O0=fl),Xu.allowVerticalPlacement&&hd.vertical){var Cy=Hh.layout.get("text-rotate").evaluate(kc,{},Xh)+90;iv=new yl(E0,Zh,Uv,C0,A0,hd.vertical,hm,xy,Bg,Cy),w0&&(av=new yl(E0,Zh,Uv,C0,A0,w0,pm,by,Bg,Cy))}if(S0){var gm=Hh.layout.get("icon-rotate").evaluate(kc,{}),Yp=Hh.layout.get("icon-text-fit")!=="none",mm=Pl(S0,gm,Ng,Yp),L0=w0?Pl(w0,gm,Ng,Yp):void 0;Vv=new yl(E0,Zh,Uv,C0,A0,S0,pm,by,!1,gm),M0=4*mm.length;var Gg=Xu.iconSizeData,Ug=null;Gg.kind==="source"?(Ug=[128*Hh.layout.get("icon-size").evaluate(kc,{})])[0]>32640&&Qt(Xu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Gg.kind==="composite"&&((Ug=[128*Fg.compositeIconSizes[0].evaluate(kc,{},Xh),128*Fg.compositeIconSizes[1].evaluate(kc,{},Xh)])[0]>32640||Ug[1]>32640)&&Qt(Xu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Xu.addSymbols(Xu.icon,mm,Ug,Xp,jh,kc,!1,Zh,ov.lineStartIndex,ov.lineLength,-1,Xh),zg=Xu.icon.placedSymbolArray.length-1,L0&&(vm=4*L0.length,Xu.addSymbols(Xu.icon,L0,Ug,Xp,jh,kc,Ki.vertical,Zh,ov.lineStartIndex,ov.lineLength,-1,Xh),T0=Xu.icon.placedSymbolArray.length-1)}for(var wp in hd.horizontal){var Vg=hd.horizontal[wp];if(!nv){P0=dr(Vg.text);var ym=Hh.layout.get("text-rotate").evaluate(kc,{},Xh);nv=new yl(E0,Zh,Uv,C0,A0,Vg,hm,xy,Bg,ym)}var Zv=Vg.positionedLines.length===1;if(wy+=Dn(Xu,Zh,Vg,fm,Hh,Bg,kc,_y,ov,hd.vertical?Ki.horizontal:Ki.horizontalOnly,Zv?Object.keys(hd.horizontal):[wp],Sp,zg,Fg,Xh),Zv)break}hd.vertical&&(Ey+=Dn(Xu,Zh,hd.vertical,fm,Hh,Bg,kc,_y,ov,Ki.vertical,["vertical"],Sp,T0,Fg,Xh));var N1=nv?nv.boxStartIndex:Xu.collisionBoxArray.length,pd=nv?nv.boxEndIndex:Xu.collisionBoxArray.length,Ay=iv?iv.boxStartIndex:Xu.collisionBoxArray.length,xm=iv?iv.boxEndIndex:Xu.collisionBoxArray.length,My=Vv?Vv.boxStartIndex:Xu.collisionBoxArray.length,Ty=Vv?Vv.boxEndIndex:Xu.collisionBoxArray.length,z1=av?av.boxStartIndex:Xu.collisionBoxArray.length,Py=av?av.boxEndIndex:Xu.collisionBoxArray.length,Ep=-1,k0=function(Hv,_m){return Hv&&Hv.circleDiameter?Math.max(Hv.circleDiameter,_m):_m};Ep=k0(nv,Ep),Ep=k0(iv,Ep),Ep=k0(Vv,Ep);var Iy=(Ep=k0(av,Ep))>-1?1:0;Iy&&(Ep*=dm/24),Xu.glyphOffsetArray.length>=Tr.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kc.sortKey!==void 0&&Xu.addToSortKeyRanges(Xu.symbolInstances.length,kc.sortKey),Xu.symbolInstances.emplaceBack(Zh.x,Zh.y,Sp.right>=0?Sp.right:-1,Sp.center>=0?Sp.center:-1,Sp.left>=0?Sp.left:-1,Sp.vertical||-1,zg,T0,P0,N1,pd,Ay,xm,My,Ty,z1,Py,Uv,wy,Ey,M0,vm,Iy,0,hm,I0,O0,Ep)}(us,Gv,Dg,Ws,Os,Lc,zh,us.layers[0],us.collisionBoxArray,ru.index,ru.sourceLayerIndex,us.index,hh,Ff,Ig,rc,Vh,Qd,nc,Gh,ru,cc,Ls,Nh,Su)};if(xp==="line")for(var Jd=0,Og=ul(ru.geometry,0,0,8192,8192);Jd<Og.length;Jd+=1)for(var Lg=Og[Jd],Rv=0,Dv=Tl(Lg,Bf,cd,Ws.vertical||Df,Os,24,jp,us.overscaling,8192);Rv<Dv.length;Rv+=1){var kg=Dv[Rv];Df&&Ta(us,Df.text,kv,kg)||_p(Lg,kg)}else if(xp==="line-center")for(var Bv=0,Fv=ru.geometry;Bv<Fv.length;Bv+=1){var Nv=Fv[Bv];if(Nv.length>1){var fd=yu(Nv,cd,Ws.vertical||Df,Os,24,jp);fd&&_p(Nv,fd)}}else if(ru.type==="Polygon")for(var tv=0,x0=Nd(ru.geometry,0);tv<x0.length;tv+=1){var ev=x0[tv],zv=Xi(ev,16);_p(ev[0],new na(zv.x,zv.y,0))}else if(ru.type==="LineString")for(var rv=0,bp=ru.geometry;rv<bp.length;rv+=1){var ph=bp[rv];_p(ph,new na(ph[0].x,ph[0].y,0))}else if(ru.type==="Point")for(var lm=0,Rg=ru.geometry;lm<Rg.length;lm+=1)for(var _0=0,cm=Rg[lm];_0<cm.length;_0+=1){var b0=cm[_0];_p([b0],new na(b0.x,b0.y,0))}}(l,Gn,ba,Nl,z,ge,oa,eo,Ea,lc,mt)},En=0,kn=l.features;En<kn.length;En+=1)un();at&&l.generateCollisionDebugBuffers()},y.perspective=function(l,v,b,z,$){var at,mt=1/Math.tan(v/2);return l[0]=mt/b,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=mt,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,$!=null&&$!==1/0?(l[10]=($+z)*(at=1/(z-$)),l[14]=2*$*z*at):(l[10]=-1,l[14]=-2*z),l},y.pick=function(l,v){for(var b={},z=0;z<v.length;z++){var $=v[z];$ in l&&(b[$]=l[$])}return b},y.plugin=sc,y.polygonIntersectsPolygon=tc,y.postMapLoadEvent=Or,y.postTurnstileEvent=ui,y.potpack=Di,y.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],y.register=Ma,y.registerForPluginStateChange=function(l){return l({pluginStatus:hc,pluginURL:Rl}),ed.on("pluginStateChange",l),l},y.renderColorRamp=Pd,y.rotate=function(l,v,b){var z=v[0],$=v[1],at=v[2],mt=v[3],Mt=Math.sin(b),oe=Math.cos(b);return l[0]=z*oe+at*Mt,l[1]=$*oe+mt*Mt,l[2]=z*-Mt+at*oe,l[3]=$*-Mt+mt*oe,l},y.rotateX=function(l,v,b){var z=Math.sin(b),$=Math.cos(b),at=v[4],mt=v[5],Mt=v[6],oe=v[7],ge=v[8],Ce=v[9],Ie=v[10],Ge=v[11];return v!==l&&(l[0]=v[0],l[1]=v[1],l[2]=v[2],l[3]=v[3],l[12]=v[12],l[13]=v[13],l[14]=v[14],l[15]=v[15]),l[4]=at*$+ge*z,l[5]=mt*$+Ce*z,l[6]=Mt*$+Ie*z,l[7]=oe*$+Ge*z,l[8]=ge*$-at*z,l[9]=Ce*$-mt*z,l[10]=Ie*$-Mt*z,l[11]=Ge*$-oe*z,l},y.rotateZ=function(l,v,b){var z=Math.sin(b),$=Math.cos(b),at=v[0],mt=v[1],Mt=v[2],oe=v[3],ge=v[4],Ce=v[5],Ie=v[6],Ge=v[7];return v!==l&&(l[8]=v[8],l[9]=v[9],l[10]=v[10],l[11]=v[11],l[12]=v[12],l[13]=v[13],l[14]=v[14],l[15]=v[15]),l[0]=at*$+ge*z,l[1]=mt*$+Ce*z,l[2]=Mt*$+Ie*z,l[3]=oe*$+Ge*z,l[4]=ge*$-at*z,l[5]=Ce*$-mt*z,l[6]=Ie*$-Mt*z,l[7]=Ge*$-oe*z,l},y.scale=function(l,v,b){var z=b[0],$=b[1],at=b[2];return l[0]=v[0]*z,l[1]=v[1]*z,l[2]=v[2]*z,l[3]=v[3]*z,l[4]=v[4]*$,l[5]=v[5]*$,l[6]=v[6]*$,l[7]=v[7]*$,l[8]=v[8]*at,l[9]=v[9]*at,l[10]=v[10]*at,l[11]=v[11]*at,l[12]=v[12],l[13]=v[13],l[14]=v[14],l[15]=v[15],l},y.scale$1=function(l,v,b){return l[0]=v[0]*b,l[1]=v[1]*b,l[2]=v[2]*b,l[3]=v[3]*b,l},y.scale$2=function(l,v,b){return l[0]=v[0]*b,l[1]=v[1]*b,l[2]=v[2]*b,l},y.setCacheLimits=function(l,v){ln=l,Kn=v},y.setRTLTextPlugin=function(l,v,b){if(b===void 0&&(b=!1),hc==="deferred"||hc==="loading"||hc==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Rl=Kt.resolveURL(l),hc="deferred",cf=v,ff(),b||Gc()},y.sphericalToCartesian=function(l){var v=l[0],b=l[1],z=l[2];return b+=90,b*=Math.PI/180,z*=Math.PI/180,{x:v*Math.cos(b)*Math.sin(z),y:v*Math.sin(b)*Math.sin(z),z:v*Math.cos(z)}},y.sqrLen=function(l){var v=l[0],b=l[1];return v*v+b*b},y.styleSpec=Be,y.sub=function(l,v,b){return l[0]=v[0]-b[0],l[1]=v[1]-b[1],l[2]=v[2]-b[2],l},y.symbolSize=os,y.transformMat3=function(l,v,b){var z=v[0],$=v[1],at=v[2];return l[0]=z*b[0]+$*b[3]+at*b[6],l[1]=z*b[1]+$*b[4]+at*b[7],l[2]=z*b[2]+$*b[5]+at*b[8],l},y.transformMat4=Dp,y.translate=function(l,v,b){var z,$,at,mt,Mt,oe,ge,Ce,Ie,Ge,Zt,xr,mr=b[0],jr=b[1],kr=b[2];return v===l?(l[12]=v[0]*mr+v[4]*jr+v[8]*kr+v[12],l[13]=v[1]*mr+v[5]*jr+v[9]*kr+v[13],l[14]=v[2]*mr+v[6]*jr+v[10]*kr+v[14],l[15]=v[3]*mr+v[7]*jr+v[11]*kr+v[15]):($=v[1],at=v[2],mt=v[3],Mt=v[4],oe=v[5],ge=v[6],Ce=v[7],Ie=v[8],Ge=v[9],Zt=v[10],xr=v[11],l[0]=z=v[0],l[1]=$,l[2]=at,l[3]=mt,l[4]=Mt,l[5]=oe,l[6]=ge,l[7]=Ce,l[8]=Ie,l[9]=Ge,l[10]=Zt,l[11]=xr,l[12]=z*mr+Mt*jr+Ie*kr+v[12],l[13]=$*mr+oe*jr+Ge*kr+v[13],l[14]=at*mr+ge*jr+Zt*kr+v[14],l[15]=mt*mr+Ce*jr+xr*kr+v[15]),l},y.triggerPluginCompletionEvent=ip,y.uniqueId=q,y.validateCustomStyleLayer=function(l){var v=[],b=l.id;return b===void 0&&v.push({message:"layers."+b+': missing required property "id"'}),l.render===void 0&&v.push({message:"layers."+b+': missing required method "render"'}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&v.push({message:"layers."+b+': property "renderingMode" must be either "2d" or "3d"'}),v},y.validateLight=np,y.validateStyle=lu,y.values=function(l){var v=[];for(var b in l)v.push(l[b]);return v},y.vectorTile=jc,y.version="1.13.2",y.warnOnce=Qt,y.webpSupported=ue,y.window=A,y.wrap=V}),j(["./shared"],function(y){"use strict";function U(le){var fe=typeof le;if(fe==="number"||fe==="boolean"||fe==="string"||le==null)return JSON.stringify(le);if(Array.isArray(le)){for(var Me="[",Te=0,Ze=le;Te<Ze.length;Te+=1)Me+=U(Ze[Te])+",";return Me+"]"}for(var or=Object.keys(le).sort(),lr="{",Be=0;Be<or.length;Be++)lr+=JSON.stringify(or[Be])+":"+U(le[or[Be]])+",";return lr+"}"}function F(le){for(var fe="",Me=0,Te=y.refProperties;Me<Te.length;Me+=1)fe+="/"+U(le[Te[Me]]);return fe}var B=function(le){this.keyCache={},le&&this.replace(le)};B.prototype.replace=function(le){this._layerConfigs={},this._layers={},this.update(le,[])},B.prototype.update=function(le,fe){for(var Me=this,Te=0,Ze=le;Te<Ze.length;Te+=1){var or=Ze[Te];this._layerConfigs[or.id]=or;var lr=this._layers[or.id]=y.createStyleLayer(or);lr._featureFilter=y.featureFilter(lr.filter),this.keyCache[or.id]&&delete this.keyCache[or.id]}for(var Be=0,tr=fe;Be<tr.length;Be+=1){var Mr=tr[Be];delete this.keyCache[Mr],delete this._layerConfigs[Mr],delete this._layers[Mr]}this.familiesBySource={};for(var Xr=0,Zr=function(Jn,yi){for(var Ka={},ki=0;ki<Jn.length;ki++){var ga=yi&&yi[Jn[ki].id]||F(Jn[ki]);yi&&(yi[Jn[ki].id]=ga);var ko=Ka[ga];ko||(ko=Ka[ga]=[]),ko.push(Jn[ki])}var Ci=[];for(var po in Ka)Ci.push(Ka[po]);return Ci}(y.values(this._layerConfigs),this.keyCache);Xr<Zr.length;Xr+=1){var tn=Zr[Xr].map(function(Jn){return Me._layers[Jn.id]}),_n=tn[0];if(_n.visibility!=="none"){var $n=_n.source||"",si=this.familiesBySource[$n];si||(si=this.familiesBySource[$n]={});var Jr=_n.sourceLayer||"_geojsonTileLayer",Si=si[Jr];Si||(Si=si[Jr]=[]),Si.push(tn)}}};var R=function(le){var fe={},Me=[];for(var Te in le){var Ze=le[Te],or=fe[Te]={};for(var lr in Ze){var Be=Ze[+lr];if(Be&&Be.bitmap.width!==0&&Be.bitmap.height!==0){var tr={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};Me.push(tr),or[lr]={rect:tr,metrics:Be.metrics}}}}var Mr=y.potpack(Me),Xr=new y.AlphaImage({width:Mr.w||1,height:Mr.h||1});for(var Zr in le){var tn=le[Zr];for(var _n in tn){var $n=tn[+_n];if($n&&$n.bitmap.width!==0&&$n.bitmap.height!==0){var si=fe[Zr][_n].rect;y.AlphaImage.copy($n.bitmap,Xr,{x:0,y:0},{x:si.x+1,y:si.y+1},$n.bitmap)}}}this.image=Xr,this.positions=fe};y.register("GlyphAtlas",R);var N=function(le){this.tileID=new y.OverscaledTileID(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId};function A(le,fe,Me){for(var Te=new y.EvaluationParameters(fe),Ze=0,or=le;Ze<or.length;Ze+=1)or[Ze].recalculate(Te,Me)}function D(le,fe){var Me=y.getArrayBuffer(le.request,function(Te,Ze,or,lr){Te?fe(Te):Ze&&fe(null,{vectorTile:new y.vectorTile.VectorTile(new y.pbf(Ze)),rawData:Ze,cacheControl:or,expires:lr})});return function(){Me.cancel(),fe()}}N.prototype.parse=function(le,fe,Me,Te,Ze){var or=this;this.status="parsing",this.data=le,this.collisionBoxArray=new y.CollisionBoxArray;var lr=new y.DictionaryCoder(Object.keys(le.layers).sort()),Be=new y.FeatureIndex(this.tileID,this.promoteId);Be.bucketLayerIDs=[];var tr,Mr,Xr,Zr,tn={},_n={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Me},$n=fe.familiesBySource[this.source];for(var si in $n){var Jr=le.layers[si];if(Jr){Jr.version===1&&y.warnOnce('Vector tile source "'+this.source+'" layer "'+si+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Si=lr.encode(si),Jn=[],yi=0;yi<Jr.length;yi++){var Ka=Jr.feature(yi),ki=Be.getId(Ka,si);Jn.push({feature:Ka,id:ki,index:yi,sourceLayerIndex:Si})}for(var ga=0,ko=$n[si];ga<ko.length;ga+=1){var Ci=ko[ga],po=Ci[0];po.minzoom&&this.zoom<Math.floor(po.minzoom)||po.maxzoom&&this.zoom>=po.maxzoom||po.visibility!=="none"&&(A(Ci,this.zoom,Me),(tn[po.id]=po.createBucket({index:Be.bucketLayerIDs.length,layers:Ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Si,sourceID:this.source})).populate(Jn,_n,this.tileID.canonical),Be.bucketLayerIDs.push(Ci.map(function(mo){return mo.id})))}}}var oo=y.mapObject(_n.glyphDependencies,function(mo){return Object.keys(mo).map(Number)});Object.keys(oo).length?Te.send("getGlyphs",{uid:this.uid,stacks:oo},function(mo,fo){tr||(tr=mo,Mr=fo,Wo.call(or))}):Mr={};var cn=Object.keys(_n.iconDependencies);cn.length?Te.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"icons"},function(mo,fo){tr||(tr=mo,Xr=fo,Wo.call(or))}):Xr={};var vn=Object.keys(_n.patternDependencies);function Wo(){if(tr)return Ze(tr);if(Mr&&Xr&&Zr){var mo=new R(Mr),fo=new y.ImageAtlas(Xr,Zr);for(var Po in tn){var vi=tn[Po];vi instanceof y.SymbolBucket?(A(vi.layers,this.zoom,Me),y.performSymbolLayout(vi,Mr,mo.positions,Xr,fo.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):vi.hasPattern&&(vi instanceof y.LineBucket||vi instanceof y.FillBucket||vi instanceof y.FillExtrusionBucket)&&(A(vi.layers,this.zoom,Me),vi.addFeatures(_n,this.tileID.canonical,fo.patternPositions))}this.status="done",Ze(null,{buckets:y.values(tn).filter(function(pa){return!pa.isEmpty()}),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mo.image,imageAtlas:fo,glyphMap:this.returnDependencies?Mr:null,iconMap:this.returnDependencies?Xr:null,glyphPositions:this.returnDependencies?mo.positions:null})}}vn.length?Te.send("getImages",{icons:vn,source:this.source,tileID:this.tileID,type:"patterns"},function(mo,fo){tr||(tr=mo,Zr=fo,Wo.call(or))}):Zr={},Wo.call(this)};var M=function(le,fe,Me,Te){this.actor=le,this.layerIndex=fe,this.availableImages=Me,this.loadVectorData=Te||D,this.loading={},this.loaded={}};M.prototype.loadTile=function(le,fe){var Me=this,Te=le.uid;this.loading||(this.loading={});var Ze=!!(le&&le.request&&le.request.collectResourceTiming)&&new y.RequestPerformance(le.request),or=this.loading[Te]=new N(le);or.abort=this.loadVectorData(le,function(lr,Be){if(delete Me.loading[Te],lr||!Be)return or.status="done",Me.loaded[Te]=or,fe(lr);var tr=Be.rawData,Mr={};Be.expires&&(Mr.expires=Be.expires),Be.cacheControl&&(Mr.cacheControl=Be.cacheControl);var Xr={};if(Ze){var Zr=Ze.finish();Zr&&(Xr.resourceTiming=JSON.parse(JSON.stringify(Zr)))}or.vectorTile=Be.vectorTile,or.parse(Be.vectorTile,Me.layerIndex,Me.availableImages,Me.actor,function(tn,_n){if(tn||!_n)return fe(tn);fe(null,y.extend({rawTileData:tr.slice(0)},_n,Mr,Xr))}),Me.loaded=Me.loaded||{},Me.loaded[Te]=or})},M.prototype.reloadTile=function(le,fe){var Me=this,Te=this.loaded,Ze=le.uid,or=this;if(Te&&Te[Ze]){var lr=Te[Ze];lr.showCollisionBoxes=le.showCollisionBoxes;var Be=function(tr,Mr){var Xr=lr.reloadCallback;Xr&&(delete lr.reloadCallback,lr.parse(lr.vectorTile,or.layerIndex,Me.availableImages,or.actor,Xr)),fe(tr,Mr)};lr.status==="parsing"?lr.reloadCallback=Be:lr.status==="done"&&(lr.vectorTile?lr.parse(lr.vectorTile,this.layerIndex,this.availableImages,this.actor,Be):Be())}},M.prototype.abortTile=function(le,fe){var Me=this.loading,Te=le.uid;Me&&Me[Te]&&Me[Te].abort&&(Me[Te].abort(),delete Me[Te]),fe()},M.prototype.removeTile=function(le,fe){var Me=this.loaded,Te=le.uid;Me&&Me[Te]&&delete Me[Te],fe()};var O=y.window.ImageBitmap,k=function(){this.loaded={}};function V(le,fe){if(le.length!==0){X(le[0],fe);for(var Me=1;Me<le.length;Me++)X(le[Me],!fe)}}function X(le,fe){for(var Me=0,Te=0,Ze=le.length,or=Ze-1;Te<Ze;or=Te++)Me+=(le[Te][0]-le[or][0])*(le[or][1]+le[Te][1]);Me>=0!=!!fe&&le.reverse()}k.prototype.loadTile=function(le,fe){var Me=le.uid,Te=le.encoding,Ze=le.rawImageData,or=O&&Ze instanceof O?this.getImageData(Ze):Ze,lr=new y.DEMData(Me,or,Te);this.loaded=this.loaded||{},this.loaded[Me]=lr,fe(null,lr)},k.prototype.getImageData=function(le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(le.width,le.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=le.width,this.offscreenCanvas.height=le.height,this.offscreenCanvasContext.drawImage(le,0,0,le.width,le.height);var fe=this.offscreenCanvasContext.getImageData(-1,-1,le.width+2,le.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new y.RGBAImage({width:fe.width,height:fe.height},fe.data)},k.prototype.removeTile=function(le){var fe=this.loaded,Me=le.uid;fe&&fe[Me]&&delete fe[Me]};var K=y.vectorTile.VectorTileFeature.prototype.toGeoJSON,q=function(le){this._feature=le,this.extent=y.EXTENT,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))};q.prototype.loadGeometry=function(){if(this._feature.type===1){for(var le=[],fe=0,Me=this._feature.geometry;fe<Me.length;fe+=1){var Te=Me[fe];le.push([new y.Point$1(Te[0],Te[1])])}return le}for(var Ze=[],or=0,lr=this._feature.geometry;or<lr.length;or+=1){for(var Be=[],tr=0,Mr=lr[or];tr<Mr.length;tr+=1){var Xr=Mr[tr];Be.push(new y.Point$1(Xr[0],Xr[1]))}Ze.push(Be)}return Ze},q.prototype.toGeoJSON=function(le,fe,Me){return K.call(this,le,fe,Me)};var ct=function(le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=y.EXTENT,this.length=le.length,this._features=le};ct.prototype.feature=function(le){return new q(this._features[le])};var _t=y.vectorTile.VectorTileFeature,yt=lt;function lt(le,fe){this.options=fe||{},this.features=le,this.length=le.length}function Lt(le,fe){this.id=typeof le.id=="number"?le.id:void 0,this.type=le.type,this.rawGeometry=le.type===1?[le.geometry]:le.geometry,this.properties=le.tags,this.extent=fe||4096}lt.prototype.feature=function(le){return new Lt(this.features[le],this.options.extent)},Lt.prototype.loadGeometry=function(){var le=this.rawGeometry;this.geometry=[];for(var fe=0;fe<le.length;fe++){for(var Me=le[fe],Te=[],Ze=0;Ze<Me.length;Ze++)Te.push(new y.Point$1(Me[Ze][0],Me[Ze][1]));this.geometry.push(Te)}return this.geometry},Lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var le=this.geometry,fe=1/0,Me=-1/0,Te=1/0,Ze=-1/0,or=0;or<le.length;or++)for(var lr=le[or],Be=0;Be<lr.length;Be++){var tr=lr[Be];fe=Math.min(fe,tr.x),Me=Math.max(Me,tr.x),Te=Math.min(Te,tr.y),Ze=Math.max(Ze,tr.y)}return[fe,Te,Me,Ze]},Lt.prototype.toGeoJSON=_t.prototype.toGeoJSON;var wt=re,Gt=yt;function re(le){var fe=new y.pbf;return function(Me,Te){for(var Ze in Me.layers)Te.writeMessage(3,Qt,Me.layers[Ze])}(le,fe),fe.finish()}function Qt(le,fe){var Me;fe.writeVarintField(15,le.version||1),fe.writeStringField(1,le.name||""),fe.writeVarintField(5,le.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(Me=0;Me<le.length;Me++)Te.feature=le.feature(Me),fe.writeMessage(2,it,Te);var Ze=Te.keys;for(Me=0;Me<Ze.length;Me++)fe.writeStringField(3,Ze[Me]);var or=Te.values;for(Me=0;Me<or.length;Me++)fe.writeMessage(4,ot,or[Me])}function it(le,fe){var Me=le.feature;Me.id!==void 0&&fe.writeVarintField(1,Me.id),fe.writeMessage(2,dt,le),fe.writeVarintField(3,Me.type),fe.writeMessage(4,Y,Me)}function dt(le,fe){var Me=le.feature,Te=le.keys,Ze=le.values,or=le.keycache,lr=le.valuecache;for(var Be in Me.properties){var tr=or[Be];tr===void 0&&(Te.push(Be),or[Be]=tr=Te.length-1),fe.writeVarint(tr);var Mr=Me.properties[Be],Xr=typeof Mr;Xr!=="string"&&Xr!=="boolean"&&Xr!=="number"&&(Mr=JSON.stringify(Mr));var Zr=Xr+":"+Mr,tn=lr[Zr];tn===void 0&&(Ze.push(Mr),lr[Zr]=tn=Ze.length-1),fe.writeVarint(tn)}}function gt(le,fe){return(fe<<3)+(7&le)}function vt(le){return le<<1^le>>31}function Y(le,fe){for(var Me=le.loadGeometry(),Te=le.type,Ze=0,or=0,lr=Me.length,Be=0;Be<lr;Be++){var tr=Me[Be],Mr=1;Te===1&&(Mr=tr.length),fe.writeVarint(gt(1,Mr));for(var Xr=Te===3?tr.length-1:tr.length,Zr=0;Zr<Xr;Zr++){Zr===1&&Te!==1&&fe.writeVarint(gt(2,Xr-1));var tn=tr[Zr].x-Ze,_n=tr[Zr].y-or;fe.writeVarint(vt(tn)),fe.writeVarint(vt(_n)),Ze+=tn,or+=_n}Te===3&&fe.writeVarint(gt(7,1))}}function ot(le,fe){var Me=typeof le;Me==="string"?fe.writeStringField(1,le):Me==="boolean"?fe.writeBooleanField(7,le):Me==="number"&&(le%1!=0?fe.writeDoubleField(3,le):le<0?fe.writeSVarintField(6,le):fe.writeVarintField(5,le))}function nt(le,fe,Me,Te){rt(le,Me,Te),rt(fe,2*Me,2*Te),rt(fe,2*Me+1,2*Te+1)}function rt(le,fe,Me){var Te=le[fe];le[fe]=le[Me],le[Me]=Te}function st(le,fe,Me,Te){var Ze=le-Me,or=fe-Te;return Ze*Ze+or*or}wt.fromVectorTileJs=re,wt.fromGeojsonVt=function(le,fe){fe=fe||{};var Me={};for(var Te in le)Me[Te]=new yt(le[Te].features,fe),Me[Te].name=Te,Me[Te].version=fe.version,Me[Te].extent=fe.extent;return re({layers:Me})},wt.GeoJSONWrapper=Gt;var d=function(le){return le[0]},It=function(le){return le[1]},Ht=function(le,fe,Me,Te,Ze){fe===void 0&&(fe=d),Me===void 0&&(Me=It),Te===void 0&&(Te=64),Ze===void 0&&(Ze=Float64Array),this.nodeSize=Te,this.points=le;for(var or=le.length<65536?Uint16Array:Uint32Array,lr=this.ids=new or(le.length),Be=this.coords=new Ze(2*le.length),tr=0;tr<le.length;tr++)lr[tr]=tr,Be[2*tr]=fe(le[tr]),Be[2*tr+1]=Me(le[tr]);(function Mr(Xr,Zr,tn,_n,$n,si){if(!($n-_n<=tn)){var Jr=_n+$n>>1;(function Si(Jn,yi,Ka,ki,ga,ko){for(;ga>ki;){if(ga-ki>600){var Ci=ga-ki+1,po=Ka-ki+1,oo=Math.log(Ci),cn=.5*Math.exp(2*oo/3),vn=.5*Math.sqrt(oo*cn*(Ci-cn)/Ci)*(po-Ci/2<0?-1:1);Si(Jn,yi,Ka,Math.max(ki,Math.floor(Ka-po*cn/Ci+vn)),Math.min(ga,Math.floor(Ka+(Ci-po)*cn/Ci+vn)),ko)}var Wo=yi[2*Ka+ko],mo=ki,fo=ga;for(nt(Jn,yi,ki,Ka),yi[2*ga+ko]>Wo&&nt(Jn,yi,ki,ga);mo<fo;){for(nt(Jn,yi,mo,fo),mo++,fo--;yi[2*mo+ko]<Wo;)mo++;for(;yi[2*fo+ko]>Wo;)fo--}yi[2*ki+ko]===Wo?nt(Jn,yi,ki,fo):nt(Jn,yi,++fo,ga),fo<=Ka&&(ki=fo+1),Ka<=fo&&(ga=fo-1)}})(Xr,Zr,Jr,_n,$n,si%2),Mr(Xr,Zr,tn,_n,Jr-1,si+1),Mr(Xr,Zr,tn,Jr+1,$n,si+1)}})(lr,Be,Te,0,lr.length-1,0)};Ht.prototype.range=function(le,fe,Me,Te){return function(Ze,or,lr,Be,tr,Mr,Xr){for(var Zr,tn,_n=[0,Ze.length-1,0],$n=[];_n.length;){var si=_n.pop(),Jr=_n.pop(),Si=_n.pop();if(Jr-Si<=Xr)for(var Jn=Si;Jn<=Jr;Jn++)tn=or[2*Jn+1],(Zr=or[2*Jn])>=lr&&Zr<=tr&&tn>=Be&&tn<=Mr&&$n.push(Ze[Jn]);else{var yi=Math.floor((Si+Jr)/2);tn=or[2*yi+1],(Zr=or[2*yi])>=lr&&Zr<=tr&&tn>=Be&&tn<=Mr&&$n.push(Ze[yi]);var Ka=(si+1)%2;(si===0?lr<=Zr:Be<=tn)&&(_n.push(Si),_n.push(yi-1),_n.push(Ka)),(si===0?tr>=Zr:Mr>=tn)&&(_n.push(yi+1),_n.push(Jr),_n.push(Ka))}}return $n}(this.ids,this.coords,le,fe,Me,Te,this.nodeSize)},Ht.prototype.within=function(le,fe,Me){return function(Te,Ze,or,lr,Be,tr){for(var Mr=[0,Te.length-1,0],Xr=[],Zr=Be*Be;Mr.length;){var tn=Mr.pop(),_n=Mr.pop(),$n=Mr.pop();if(_n-$n<=tr)for(var si=$n;si<=_n;si++)st(Ze[2*si],Ze[2*si+1],or,lr)<=Zr&&Xr.push(Te[si]);else{var Jr=Math.floor(($n+_n)/2),Si=Ze[2*Jr],Jn=Ze[2*Jr+1];st(Si,Jn,or,lr)<=Zr&&Xr.push(Te[Jr]);var yi=(tn+1)%2;(tn===0?or-Be<=Si:lr-Be<=Jn)&&(Mr.push($n),Mr.push(Jr-1),Mr.push(yi)),(tn===0?or+Be>=Si:lr+Be>=Jn)&&(Mr.push(Jr+1),Mr.push(_n),Mr.push(yi))}}return Xr}(this.ids,this.coords,le,fe,Me,this.nodeSize)};var kt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(le){return le}},Xt=function(le){this.options=Rt(Object.create(kt),le),this.trees=new Array(this.options.maxZoom+1)};function Kt(le,fe,Me,Te,Ze){return{x:le,y:fe,zoom:1/0,id:Me,parentId:-1,numPoints:Te,properties:Ze}}function Jt(le,fe){var Me=le.geometry.coordinates,Te=Me[1];return{x:$t(Me[0]),y:Ut(Te),zoom:1/0,index:fe,parentId:-1}}function ue(le){return{type:"Feature",id:le.id,properties:ce(le),geometry:{type:"Point",coordinates:[(Te=le.x,360*(Te-.5)),(fe=le.y,Me=(180-360*fe)*Math.PI/180,360*Math.atan(Math.exp(Me))/Math.PI-90)]}};var fe,Me,Te}function ce(le){var fe=le.numPoints,Me=fe>=1e4?Math.round(fe/1e3)+"k":fe>=1e3?Math.round(fe/100)/10+"k":fe;return Rt(Rt({},le.properties),{cluster:!0,cluster_id:le.id,point_count:fe,point_count_abbreviated:Me})}function $t(le){return le/360+.5}function Ut(le){var fe=Math.sin(le*Math.PI/180),Me=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return Me<0?0:Me>1?1:Me}function Rt(le,fe){for(var Me in fe)le[Me]=fe[Me];return le}function Pt(le){return le.x}function Yt(le){return le.y}function Dt(le,fe,Me,Te,Ze,or){var lr=Ze-Me,Be=or-Te;if(lr!==0||Be!==0){var tr=((le-Me)*lr+(fe-Te)*Be)/(lr*lr+Be*Be);tr>1?(Me=Ze,Te=or):tr>0&&(Me+=lr*tr,Te+=Be*tr)}return(lr=le-Me)*lr+(Be=fe-Te)*Be}function Nt(le,fe,Me,Te){var Ze={id:le===void 0?null:le,type:fe,geometry:Me,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(or){var lr=or.geometry,Be=or.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")ne(or,lr);else if(Be==="Polygon"||Be==="MultiLineString")for(var tr=0;tr<lr.length;tr++)ne(or,lr[tr]);else if(Be==="MultiPolygon")for(tr=0;tr<lr.length;tr++)for(var Mr=0;Mr<lr[tr].length;Mr++)ne(or,lr[tr][Mr])}(Ze),Ze}function ne(le,fe){for(var Me=0;Me<fe.length;Me+=3)le.minX=Math.min(le.minX,fe[Me]),le.minY=Math.min(le.minY,fe[Me+1]),le.maxX=Math.max(le.maxX,fe[Me]),le.maxY=Math.max(le.maxY,fe[Me+1])}function ve(le,fe,Me,Te){if(fe.geometry){var Ze=fe.geometry.coordinates,or=fe.geometry.type,lr=Math.pow(Me.tolerance/((1<<Me.maxZoom)*Me.extent),2),Be=[],tr=fe.id;if(Me.promoteId?tr=fe.properties[Me.promoteId]:Me.generateId&&(tr=Te||0),or==="Point")Re(Ze,Be);else if(or==="MultiPoint")for(var Mr=0;Mr<Ze.length;Mr++)Re(Ze[Mr],Be);else if(or==="LineString")je(Ze,Be,lr,!1);else if(or==="MultiLineString"){if(Me.lineMetrics){for(Mr=0;Mr<Ze.length;Mr++)je(Ze[Mr],Be=[],lr,!1),le.push(Nt(tr,"LineString",Be,fe.properties));return}Cr(Ze,Be,lr,!1)}else if(or==="Polygon")Cr(Ze,Be,lr,!0);else{if(or!=="MultiPolygon"){if(or==="GeometryCollection"){for(Mr=0;Mr<fe.geometry.geometries.length;Mr++)ve(le,{id:tr,geometry:fe.geometry.geometries[Mr],properties:fe.properties},Me,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Mr=0;Mr<Ze.length;Mr++){var Xr=[];Cr(Ze[Mr],Xr,lr,!0),Be.push(Xr)}}le.push(Nt(tr,or,Be,fe.properties))}}function Re(le,fe){fe.push($r(le[0])),fe.push(Qr(le[1])),fe.push(0)}function je(le,fe,Me,Te){for(var Ze,or,lr=0,Be=0;Be<le.length;Be++){var tr=$r(le[Be][0]),Mr=Qr(le[Be][1]);fe.push(tr),fe.push(Mr),fe.push(0),Be>0&&(lr+=Te?(Ze*Mr-tr*or)/2:Math.sqrt(Math.pow(tr-Ze,2)+Math.pow(Mr-or,2))),Ze=tr,or=Mr}var Xr=fe.length-3;fe[2]=1,function Zr(tn,_n,$n,si){for(var Jr,Si=si,Jn=$n-_n>>1,yi=$n-_n,Ka=tn[_n],ki=tn[_n+1],ga=tn[$n],ko=tn[$n+1],Ci=_n+3;Ci<$n;Ci+=3){var po=Dt(tn[Ci],tn[Ci+1],Ka,ki,ga,ko);if(po>Si)Jr=Ci,Si=po;else if(po===Si){var oo=Math.abs(Ci-Jn);oo<yi&&(Jr=Ci,yi=oo)}}Si>si&&(Jr-_n>3&&Zr(tn,_n,Jr,si),tn[Jr+2]=Si,$n-Jr>3&&Zr(tn,Jr,$n,si))}(fe,0,Xr,Me),fe[Xr+2]=1,fe.size=Math.abs(lr),fe.start=0,fe.end=fe.size}function Cr(le,fe,Me,Te){for(var Ze=0;Ze<le.length;Ze++){var or=[];je(le[Ze],or,Me,Te),fe.push(or)}}function $r(le){return le/360+.5}function Qr(le){var fe=Math.sin(le*Math.PI/180),Me=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return Me<0?0:Me>1?1:Me}function Ee(le,fe,Me,Te,Ze,or,lr,Be){if(Te/=fe,or>=(Me/=fe)&&lr<Te)return le;if(lr<Me||or>=Te)return null;for(var tr=[],Mr=0;Mr<le.length;Mr++){var Xr=le[Mr],Zr=Xr.geometry,tn=Xr.type,_n=Ze===0?Xr.minX:Xr.minY,$n=Ze===0?Xr.maxX:Xr.maxY;if(_n>=Me&&$n<Te)tr.push(Xr);else if(!($n<Me||_n>=Te)){var si=[];if(tn==="Point"||tn==="MultiPoint")yn(Zr,si,Me,Te,Ze);else if(tn==="LineString")ui(Zr,si,Me,Te,Ze,!1,Be.lineMetrics);else if(tn==="MultiLineString")Or(Zr,si,Me,Te,Ze,!1);else if(tn==="Polygon")Or(Zr,si,Me,Te,Ze,!0);else if(tn==="MultiPolygon")for(var Jr=0;Jr<Zr.length;Jr++){var Si=[];Or(Zr[Jr],Si,Me,Te,Ze,!0),Si.length&&si.push(Si)}if(si.length){if(Be.lineMetrics&&tn==="LineString"){for(Jr=0;Jr<si.length;Jr++)tr.push(Nt(Xr.id,tn,si[Jr],Xr.tags));continue}tn!=="LineString"&&tn!=="MultiLineString"||(si.length===1?(tn="LineString",si=si[0]):tn="MultiLineString"),tn!=="Point"&&tn!=="MultiPoint"||(tn=si.length===3?"Point":"MultiPoint"),tr.push(Nt(Xr.id,tn,si,Xr.tags))}}}return tr.length?tr:null}function yn(le,fe,Me,Te,Ze){for(var or=0;or<le.length;or+=3){var lr=le[or+Ze];lr>=Me&&lr<=Te&&(fe.push(le[or]),fe.push(le[or+1]),fe.push(le[or+2]))}}function ui(le,fe,Me,Te,Ze,or,lr){for(var Be,tr,Mr=la(le),Xr=Ze===0?Kn:jn,Zr=le.start,tn=0;tn<le.length-3;tn+=3){var _n=le[tn],$n=le[tn+1],si=le[tn+2],Jr=le[tn+3],Si=le[tn+4],Jn=Ze===0?_n:$n,yi=Ze===0?Jr:Si,Ka=!1;lr&&(Be=Math.sqrt(Math.pow(_n-Jr,2)+Math.pow($n-Si,2))),Jn<Me?yi>Me&&(tr=Xr(Mr,_n,$n,Jr,Si,Me),lr&&(Mr.start=Zr+Be*tr)):Jn>Te?yi<Te&&(tr=Xr(Mr,_n,$n,Jr,Si,Te),lr&&(Mr.start=Zr+Be*tr)):ln(Mr,_n,$n,si),yi<Me&&Jn>=Me&&(tr=Xr(Mr,_n,$n,Jr,Si,Me),Ka=!0),yi>Te&&Jn<=Te&&(tr=Xr(Mr,_n,$n,Jr,Si,Te),Ka=!0),!or&&Ka&&(lr&&(Mr.end=Zr+Be*tr),fe.push(Mr),Mr=la(le)),lr&&(Zr+=Be)}var ki=le.length-3;_n=le[ki],$n=le[ki+1],si=le[ki+2],(Jn=Ze===0?_n:$n)>=Me&&Jn<=Te&&ln(Mr,_n,$n,si),ki=Mr.length-3,or&&ki>=3&&(Mr[ki]!==Mr[0]||Mr[ki+1]!==Mr[1])&&ln(Mr,Mr[0],Mr[1],Mr[2]),Mr.length&&fe.push(Mr)}function la(le){var fe=[];return fe.size=le.size,fe.start=le.start,fe.end=le.end,fe}function Or(le,fe,Me,Te,Ze,or){for(var lr=0;lr<le.length;lr++)ui(le[lr],fe,Me,Te,Ze,or,!1)}function ln(le,fe,Me,Te){le.push(fe),le.push(Me),le.push(Te)}function Kn(le,fe,Me,Te,Ze,or){var lr=(or-fe)/(Te-fe);return le.push(or),le.push(Me+(Ze-Me)*lr),le.push(1),lr}function jn(le,fe,Me,Te,Ze,or){var lr=(or-Me)/(Ze-Me);return le.push(fe+(Te-fe)*lr),le.push(or),le.push(1),lr}function wi(le,fe){for(var Me=[],Te=0;Te<le.length;Te++){var Ze,or=le[Te],lr=or.type;if(lr==="Point"||lr==="MultiPoint"||lr==="LineString")Ze=Sa(or.geometry,fe);else if(lr==="MultiLineString"||lr==="Polygon"){Ze=[];for(var Be=0;Be<or.geometry.length;Be++)Ze.push(Sa(or.geometry[Be],fe))}else if(lr==="MultiPolygon")for(Ze=[],Be=0;Be<or.geometry.length;Be++){for(var tr=[],Mr=0;Mr<or.geometry[Be].length;Mr++)tr.push(Sa(or.geometry[Be][Mr],fe));Ze.push(tr)}Me.push(Nt(or.id,lr,Ze,or.tags))}return Me}function Sa(le,fe){var Me=[];Me.size=le.size,le.start!==void 0&&(Me.start=le.start,Me.end=le.end);for(var Te=0;Te<le.length;Te+=3)Me.push(le[Te]+fe,le[Te+1],le[Te+2]);return Me}function to(le,fe){if(le.transformed)return le;var Me,Te,Ze,or=1<<le.z,lr=le.x,Be=le.y;for(Me=0;Me<le.features.length;Me++){var tr=le.features[Me],Mr=tr.geometry,Xr=tr.type;if(tr.geometry=[],Xr===1)for(Te=0;Te<Mr.length;Te+=2)tr.geometry.push(qa(Mr[Te],Mr[Te+1],fe,or,lr,Be));else for(Te=0;Te<Mr.length;Te++){var Zr=[];for(Ze=0;Ze<Mr[Te].length;Ze+=2)Zr.push(qa(Mr[Te][Ze],Mr[Te][Ze+1],fe,or,lr,Be));tr.geometry.push(Zr)}}return le.transformed=!0,le}function qa(le,fe,Me,Te,Ze,or){return[Math.round(Me*(le*Te-Ze)),Math.round(Me*(fe*Te-or))]}function Ui(le,fe,Me,Te,Ze){for(var or=fe===Ze.maxZoom?0:Ze.tolerance/((1<<fe)*Ze.extent),lr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Me,y:Te,z:fe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Be=0;Be<le.length;Be++){lr.numFeatures++,Ue(lr,le[Be],or,Ze);var tr=le[Be].minX,Mr=le[Be].minY,Xr=le[Be].maxX,Zr=le[Be].maxY;tr<lr.minX&&(lr.minX=tr),Mr<lr.minY&&(lr.minY=Mr),Xr>lr.maxX&&(lr.maxX=Xr),Zr>lr.maxY&&(lr.maxY=Zr)}return lr}function Ue(le,fe,Me,Te){var Ze=fe.geometry,or=fe.type,lr=[];if(or==="Point"||or==="MultiPoint")for(var Be=0;Be<Ze.length;Be+=3)lr.push(Ze[Be]),lr.push(Ze[Be+1]),le.numPoints++,le.numSimplified++;else if(or==="LineString")We(lr,Ze,le,Me,!1,!1);else if(or==="MultiLineString"||or==="Polygon")for(Be=0;Be<Ze.length;Be++)We(lr,Ze[Be],le,Me,or==="Polygon",Be===0);else if(or==="MultiPolygon")for(var tr=0;tr<Ze.length;tr++){var Mr=Ze[tr];for(Be=0;Be<Mr.length;Be++)We(lr,Mr[Be],le,Me,!0,Be===0)}if(lr.length){var Xr=fe.tags||null;if(or==="LineString"&&Te.lineMetrics){for(var Zr in Xr={},fe.tags)Xr[Zr]=fe.tags[Zr];Xr.mapbox_clip_start=Ze.start/Ze.size,Xr.mapbox_clip_end=Ze.end/Ze.size}var tn={geometry:lr,type:or==="Polygon"||or==="MultiPolygon"?3:or==="LineString"||or==="MultiLineString"?2:1,tags:Xr};fe.id!==null&&(tn.id=fe.id),le.features.push(tn)}}function We(le,fe,Me,Te,Ze,or){var lr=Te*Te;if(Te>0&&fe.size<(Ze?lr:Te))Me.numPoints+=fe.length/3;else{for(var Be=[],tr=0;tr<fe.length;tr+=3)(Te===0||fe[tr+2]>lr)&&(Me.numSimplified++,Be.push(fe[tr]),Be.push(fe[tr+1])),Me.numPoints++;Ze&&function(Mr,Xr){for(var Zr=0,tn=0,_n=Mr.length,$n=_n-2;tn<_n;$n=tn,tn+=2)Zr+=(Mr[tn]-Mr[$n])*(Mr[tn+1]+Mr[$n+1]);if(Zr>0===Xr)for(tn=0,_n=Mr.length;tn<_n/2;tn+=2){var si=Mr[tn],Jr=Mr[tn+1];Mr[tn]=Mr[_n-2-tn],Mr[tn+1]=Mr[_n-1-tn],Mr[_n-2-tn]=si,Mr[_n-1-tn]=Jr}}(Be,or),le.push(Be)}}function fr(le,fe){var Me=(fe=this.options=function(Ze,or){for(var lr in or)Ze[lr]=or[lr];return Ze}(Object.create(this.options),fe)).debug;if(Me&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=function(Ze,or){var lr=[];if(Ze.type==="FeatureCollection")for(var Be=0;Be<Ze.features.length;Be++)ve(lr,Ze.features[Be],or,Be);else ve(lr,Ze.type==="Feature"?Ze:{geometry:Ze},or);return lr}(le,fe);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Te=function(Ze,or){var lr=or.buffer/or.extent,Be=Ze,tr=Ee(Ze,1,-1-lr,lr,0,-1,2,or),Mr=Ee(Ze,1,1-lr,2+lr,0,-1,2,or);return(tr||Mr)&&(Be=Ee(Ze,1,-lr,1+lr,0,-1,2,or)||[],tr&&(Be=wi(tr,1).concat(Be)),Mr&&(Be=Be.concat(wi(Mr,-1)))),Be}(Te,fe)).length&&this.splitTile(Te,0,0,0),Me&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ar(le,fe,Me){return 32*((1<<le)*Me+fe)+le}function qr(le,fe){var Me=le.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);var Te=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!Te)return fe(null,null);var Ze=new ct(Te.features),or=wt(Ze);or.byteOffset===0&&or.byteLength===or.buffer.byteLength||(or=new Uint8Array(or)),fe(null,{vectorTile:Ze,rawData:or.buffer})}Xt.prototype.load=function(le){var fe=this.options,Me=fe.log,Te=fe.minZoom,Ze=fe.maxZoom,or=fe.nodeSize;Me&&console.time("total time");var lr="prepare "+le.length+" points";Me&&console.time(lr),this.points=le;for(var Be=[],tr=0;tr<le.length;tr++)le[tr].geometry&&Be.push(Jt(le[tr],tr));this.trees[Ze+1]=new Ht(Be,Pt,Yt,or,Float32Array),Me&&console.timeEnd(lr);for(var Mr=Ze;Mr>=Te;Mr--){var Xr=+Date.now();Be=this._cluster(Be,Mr),this.trees[Mr]=new Ht(Be,Pt,Yt,or,Float32Array),Me&&console.log("z%d: %d clusters in %dms",Mr,Be.length,+Date.now()-Xr)}return Me&&console.timeEnd("total time"),this},Xt.prototype.getClusters=function(le,fe){var Me=((le[0]+180)%360+360)%360-180,Te=Math.max(-90,Math.min(90,le[1])),Ze=le[2]===180?180:((le[2]+180)%360+360)%360-180,or=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Me=-180,Ze=180;else if(Me>Ze){var lr=this.getClusters([Me,Te,180,or],fe),Be=this.getClusters([-180,Te,Ze,or],fe);return lr.concat(Be)}for(var tr=this.trees[this._limitZoom(fe)],Mr=[],Xr=0,Zr=tr.range($t(Me),Ut(or),$t(Ze),Ut(Te));Xr<Zr.length;Xr+=1){var tn=tr.points[Zr[Xr]];Mr.push(tn.numPoints?ue(tn):this.points[tn.index])}return Mr},Xt.prototype.getChildren=function(le){var fe=this._getOriginId(le),Me=this._getOriginZoom(le),Te="No cluster with the specified id.",Ze=this.trees[Me];if(!Ze)throw new Error(Te);var or=Ze.points[fe];if(!or)throw new Error(Te);for(var lr=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),Be=[],tr=0,Mr=Ze.within(or.x,or.y,lr);tr<Mr.length;tr+=1){var Xr=Ze.points[Mr[tr]];Xr.parentId===le&&Be.push(Xr.numPoints?ue(Xr):this.points[Xr.index])}if(Be.length===0)throw new Error(Te);return Be},Xt.prototype.getLeaves=function(le,fe,Me){var Te=[];return this._appendLeaves(Te,le,fe=fe||10,Me=Me||0,0),Te},Xt.prototype.getTile=function(le,fe,Me){var Te=this.trees[this._limitZoom(le)],Ze=Math.pow(2,le),or=this.options,lr=or.radius/or.extent,Be=(Me-lr)/Ze,tr=(Me+1+lr)/Ze,Mr={features:[]};return this._addTileFeatures(Te.range((fe-lr)/Ze,Be,(fe+1+lr)/Ze,tr),Te.points,fe,Me,Ze,Mr),fe===0&&this._addTileFeatures(Te.range(1-lr/Ze,Be,1,tr),Te.points,Ze,Me,Ze,Mr),fe===Ze-1&&this._addTileFeatures(Te.range(0,Be,lr/Ze,tr),Te.points,-1,Me,Ze,Mr),Mr.features.length?Mr:null},Xt.prototype.getClusterExpansionZoom=function(le){for(var fe=this._getOriginZoom(le)-1;fe<=this.options.maxZoom;){var Me=this.getChildren(le);if(fe++,Me.length!==1)break;le=Me[0].properties.cluster_id}return fe},Xt.prototype._appendLeaves=function(le,fe,Me,Te,Ze){for(var or=0,lr=this.getChildren(fe);or<lr.length;or+=1){var Be=lr[or],tr=Be.properties;if(tr&&tr.cluster?Ze+tr.point_count<=Te?Ze+=tr.point_count:Ze=this._appendLeaves(le,tr.cluster_id,Me,Te,Ze):Ze<Te?Ze++:le.push(Be),le.length===Me)break}return Ze},Xt.prototype._addTileFeatures=function(le,fe,Me,Te,Ze,or){for(var lr=0,Be=le;lr<Be.length;lr+=1){var tr=fe[Be[lr]],Mr=tr.numPoints,Xr={type:1,geometry:[[Math.round(this.options.extent*(tr.x*Ze-Me)),Math.round(this.options.extent*(tr.y*Ze-Te))]],tags:Mr?ce(tr):this.points[tr.index].properties},Zr=void 0;Mr?Zr=tr.id:this.options.generateId?Zr=tr.index:this.points[tr.index].id&&(Zr=this.points[tr.index].id),Zr!==void 0&&(Xr.id=Zr),or.features.push(Xr)}},Xt.prototype._limitZoom=function(le){return Math.max(this.options.minZoom,Math.min(+le,this.options.maxZoom+1))},Xt.prototype._cluster=function(le,fe){for(var Me=[],Te=this.options,Ze=Te.reduce,or=Te.minPoints,lr=Te.radius/(Te.extent*Math.pow(2,fe)),Be=0;Be<le.length;Be++){var tr=le[Be];if(!(tr.zoom<=fe)){tr.zoom=fe;for(var Mr=this.trees[fe+1],Xr=Mr.within(tr.x,tr.y,lr),Zr=tr.numPoints||1,tn=Zr,_n=0,$n=Xr;_n<$n.length;_n+=1){var si=Mr.points[$n[_n]];si.zoom>fe&&(tn+=si.numPoints||1)}if(tn>=or){for(var Jr=tr.x*Zr,Si=tr.y*Zr,Jn=Ze&&Zr>1?this._map(tr,!0):null,yi=(Be<<5)+(fe+1)+this.points.length,Ka=0,ki=Xr;Ka<ki.length;Ka+=1){var ga=Mr.points[ki[Ka]];if(!(ga.zoom<=fe)){ga.zoom=fe;var ko=ga.numPoints||1;Jr+=ga.x*ko,Si+=ga.y*ko,ga.parentId=yi,Ze&&(Jn||(Jn=this._map(tr,!0)),Ze(Jn,this._map(ga)))}}tr.parentId=yi,Me.push(Kt(Jr/tn,Si/tn,yi,tn,Jn))}else if(Me.push(tr),tn>1)for(var Ci=0,po=Xr;Ci<po.length;Ci+=1){var oo=Mr.points[po[Ci]];oo.zoom<=fe||(oo.zoom=fe,Me.push(oo))}}}return Me},Xt.prototype._getOriginId=function(le){return le-this.points.length>>5},Xt.prototype._getOriginZoom=function(le){return(le-this.points.length)%32},Xt.prototype._map=function(le,fe){if(le.numPoints)return fe?Rt({},le.properties):le.properties;var Me=this.points[le.index].properties,Te=this.options.map(Me);return fe&&Te===Me?Rt({},Te):Te},fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(le,fe,Me,Te,Ze,or,lr){for(var Be=[le,fe,Me,Te],tr=this.options,Mr=tr.debug;Be.length;){Te=Be.pop(),Me=Be.pop(),fe=Be.pop(),le=Be.pop();var Xr=1<<fe,Zr=Ar(fe,Me,Te),tn=this.tiles[Zr];if(!tn&&(Mr>1&&console.time("creation"),tn=this.tiles[Zr]=Ui(le,fe,Me,Te,tr),this.tileCoords.push({z:fe,x:Me,y:Te}),Mr)){Mr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,Me,Te,tn.numFeatures,tn.numPoints,tn.numSimplified),console.timeEnd("creation"));var _n="z"+fe;this.stats[_n]=(this.stats[_n]||0)+1,this.total++}if(tn.source=le,Ze){if(fe===tr.maxZoom||fe===Ze)continue;var $n=1<<Ze-fe;if(Me!==Math.floor(or/$n)||Te!==Math.floor(lr/$n))continue}else if(fe===tr.indexMaxZoom||tn.numPoints<=tr.indexMaxPoints)continue;if(tn.source=null,le.length!==0){Mr>1&&console.time("clipping");var si,Jr,Si,Jn,yi,Ka,ki=.5*tr.buffer/tr.extent,ga=.5-ki,ko=.5+ki,Ci=1+ki;si=Jr=Si=Jn=null,yi=Ee(le,Xr,Me-ki,Me+ko,0,tn.minX,tn.maxX,tr),Ka=Ee(le,Xr,Me+ga,Me+Ci,0,tn.minX,tn.maxX,tr),le=null,yi&&(si=Ee(yi,Xr,Te-ki,Te+ko,1,tn.minY,tn.maxY,tr),Jr=Ee(yi,Xr,Te+ga,Te+Ci,1,tn.minY,tn.maxY,tr),yi=null),Ka&&(Si=Ee(Ka,Xr,Te-ki,Te+ko,1,tn.minY,tn.maxY,tr),Jn=Ee(Ka,Xr,Te+ga,Te+Ci,1,tn.minY,tn.maxY,tr),Ka=null),Mr>1&&console.timeEnd("clipping"),Be.push(si||[],fe+1,2*Me,2*Te),Be.push(Jr||[],fe+1,2*Me,2*Te+1),Be.push(Si||[],fe+1,2*Me+1,2*Te),Be.push(Jn||[],fe+1,2*Me+1,2*Te+1)}}},fr.prototype.getTile=function(le,fe,Me){var Te=this.options,Ze=Te.extent,or=Te.debug;if(le<0||le>24)return null;var lr=1<<le,Be=Ar(le,fe=(fe%lr+lr)%lr,Me);if(this.tiles[Be])return to(this.tiles[Be],Ze);or>1&&console.log("drilling down to z%d-%d-%d",le,fe,Me);for(var tr,Mr=le,Xr=fe,Zr=Me;!tr&&Mr>0;)Mr--,Xr=Math.floor(Xr/2),Zr=Math.floor(Zr/2),tr=this.tiles[Ar(Mr,Xr,Zr)];return tr&&tr.source?(or>1&&console.log("found parent tile z%d-%d-%d",Mr,Xr,Zr),or>1&&console.time("drilling down"),this.splitTile(tr.source,Mr,Xr,Zr,le,fe,Me),or>1&&console.timeEnd("drilling down"),this.tiles[Be]?to(this.tiles[Be],Ze):null):null};var nn=function(le){function fe(Me,Te,Ze,or){le.call(this,Me,Te,Ze,qr),or&&(this.loadGeoJSON=or)}return le&&(fe.__proto__=le),(fe.prototype=Object.create(le&&le.prototype)).constructor=fe,fe.prototype.loadData=function(Me,Te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Te,this._pendingLoadDataParams=Me,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},fe.prototype._loadData=function(){var Me=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Te=this._pendingCallback,Ze=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var or=!!(Ze&&Ze.request&&Ze.request.collectResourceTiming)&&new y.RequestPerformance(Ze.request);this.loadGeoJSON(Ze,function(lr,Be){if(lr||!Be)return Te(lr);if(typeof Be!="object")return Te(new Error("Input data given to '"+Ze.source+"' is not a valid GeoJSON object."));(function tn(_n,$n){var si,Jr=_n&&_n.type;if(Jr==="FeatureCollection")for(si=0;si<_n.features.length;si++)tn(_n.features[si],$n);else if(Jr==="GeometryCollection")for(si=0;si<_n.geometries.length;si++)tn(_n.geometries[si],$n);else if(Jr==="Feature")tn(_n.geometry,$n);else if(Jr==="Polygon")V(_n.coordinates,$n);else if(Jr==="MultiPolygon")for(si=0;si<_n.coordinates.length;si++)V(_n.coordinates[si],$n);return _n})(Be,!0);try{if(Ze.filter){var tr=y.createExpression(Ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(tr.result==="error")throw new Error(tr.value.map(function(tn){return tn.key+": "+tn.message}).join(", "));var Mr=Be.features.filter(function(tn){return tr.value.evaluate({zoom:0},tn)});Be={type:"FeatureCollection",features:Mr}}Me._geoJSONIndex=Ze.cluster?new Xt(function(tn){var _n=tn.superclusterOptions,$n=tn.clusterProperties;if(!$n||!_n)return _n;for(var si={},Jr={},Si={accumulated:null,zoom:0},Jn={properties:null},yi=Object.keys($n),Ka=0,ki=yi;Ka<ki.length;Ka+=1){var ga=ki[Ka],ko=$n[ga],Ci=ko[0],po=y.createExpression(ko[1]),oo=y.createExpression(typeof Ci=="string"?[Ci,["accumulated"],["get",ga]]:Ci);si[ga]=po.value,Jr[ga]=oo.value}return _n.map=function(cn){Jn.properties=cn;for(var vn={},Wo=0,mo=yi;Wo<mo.length;Wo+=1){var fo=mo[Wo];vn[fo]=si[fo].evaluate(Si,Jn)}return vn},_n.reduce=function(cn,vn){Jn.properties=vn;for(var Wo=0,mo=yi;Wo<mo.length;Wo+=1){var fo=mo[Wo];Si.accumulated=cn[fo],cn[fo]=Jr[fo].evaluate(Si,Jn)}},_n}(Ze)).load(Be.features):function(tn,_n){return new fr(tn,_n)}(Be,Ze.geojsonVtOptions)}catch(tn){return Te(tn)}Me.loaded={};var Xr={};if(or){var Zr=or.finish();Zr&&(Xr.resourceTiming={},Xr.resourceTiming[Ze.source]=JSON.parse(JSON.stringify(Zr)))}Te(null,Xr)})}},fe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},fe.prototype.reloadTile=function(Me,Te){var Ze=this.loaded;return Ze&&Ze[Me.uid]?le.prototype.reloadTile.call(this,Me,Te):this.loadTile(Me,Te)},fe.prototype.loadGeoJSON=function(Me,Te){if(Me.request)y.getJSON(Me.request,Te);else{if(typeof Me.data!="string")return Te(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."));try{return Te(null,JSON.parse(Me.data))}catch(Ze){return Te(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."))}}},fe.prototype.removeSource=function(Me,Te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Te()},fe.prototype.getClusterExpansionZoom=function(Me,Te){try{Te(null,this._geoJSONIndex.getClusterExpansionZoom(Me.clusterId))}catch(Ze){Te(Ze)}},fe.prototype.getClusterChildren=function(Me,Te){try{Te(null,this._geoJSONIndex.getChildren(Me.clusterId))}catch(Ze){Te(Ze)}},fe.prototype.getClusterLeaves=function(Me,Te){try{Te(null,this._geoJSONIndex.getLeaves(Me.clusterId,Me.limit,Me.offset))}catch(Ze){Te(Ze)}},fe}(M),an=function(le){var fe=this;this.self=le,this.actor=new y.Actor(le,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:M,geojson:nn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Me,Te){if(fe.workerSourceTypes[Me])throw new Error('Worker source with name "'+Me+'" already registered.');fe.workerSourceTypes[Me]=Te},this.self.registerRTLTextPlugin=function(Me){if(y.plugin.isParsed())throw new Error("RTL text plugin already registered.");y.plugin.applyArabicShaping=Me.applyArabicShaping,y.plugin.processBidirectionalText=Me.processBidirectionalText,y.plugin.processStyledBidirectionalText=Me.processStyledBidirectionalText}};return an.prototype.setReferrer=function(le,fe){this.referrer=fe},an.prototype.setImages=function(le,fe,Me){for(var Te in this.availableImages[le]=fe,this.workerSources[le]){var Ze=this.workerSources[le][Te];for(var or in Ze)Ze[or].availableImages=fe}Me()},an.prototype.setLayers=function(le,fe,Me){this.getLayerIndex(le).replace(fe),Me()},an.prototype.updateLayers=function(le,fe,Me){this.getLayerIndex(le).update(fe.layers,fe.removedIds),Me()},an.prototype.loadTile=function(le,fe,Me){this.getWorkerSource(le,fe.type,fe.source).loadTile(fe,Me)},an.prototype.loadDEMTile=function(le,fe,Me){this.getDEMWorkerSource(le,fe.source).loadTile(fe,Me)},an.prototype.reloadTile=function(le,fe,Me){this.getWorkerSource(le,fe.type,fe.source).reloadTile(fe,Me)},an.prototype.abortTile=function(le,fe,Me){this.getWorkerSource(le,fe.type,fe.source).abortTile(fe,Me)},an.prototype.removeTile=function(le,fe,Me){this.getWorkerSource(le,fe.type,fe.source).removeTile(fe,Me)},an.prototype.removeDEMTile=function(le,fe){this.getDEMWorkerSource(le,fe.source).removeTile(fe)},an.prototype.removeSource=function(le,fe,Me){if(this.workerSources[le]&&this.workerSources[le][fe.type]&&this.workerSources[le][fe.type][fe.source]){var Te=this.workerSources[le][fe.type][fe.source];delete this.workerSources[le][fe.type][fe.source],Te.removeSource!==void 0?Te.removeSource(fe,Me):Me()}},an.prototype.loadWorkerSource=function(le,fe,Me){try{this.self.importScripts(fe.url),Me()}catch(Te){Me(Te.toString())}},an.prototype.syncRTLPluginState=function(le,fe,Me){try{y.plugin.setState(fe);var Te=y.plugin.getPluginURL();if(y.plugin.isLoaded()&&!y.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);var Ze=y.plugin.isParsed();Me(Ze?void 0:new Error("RTL Text Plugin failed to import scripts from "+Te),Ze)}}catch(or){Me(or.toString())}},an.prototype.getAvailableImages=function(le){var fe=this.availableImages[le];return fe||(fe=[]),fe},an.prototype.getLayerIndex=function(le){var fe=this.layerIndexes[le];return fe||(fe=this.layerIndexes[le]=new B),fe},an.prototype.getWorkerSource=function(le,fe,Me){var Te=this;return this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][fe]||(this.workerSources[le][fe]={}),this.workerSources[le][fe][Me]||(this.workerSources[le][fe][Me]=new this.workerSourceTypes[fe]({send:function(Ze,or,lr){Te.actor.send(Ze,or,lr,le)}},this.getLayerIndex(le),this.getAvailableImages(le))),this.workerSources[le][fe][Me]},an.prototype.getDEMWorkerSource=function(le,fe){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][fe]||(this.demWorkerSources[le][fe]=new k),this.demWorkerSources[le][fe]},an.prototype.enforceCacheSizeLimit=function(le,fe){y.enforceCacheSizeLimit(fe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new an(self)),an}),j(["./shared"],function(y){"use strict";var U=y.createCommonjsModule(function(E){function I(ut){return!C(ut)}function C(ut){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var At,te,we=new Blob([""],{type:"text/javascript"}),Oe=URL.createObjectURL(we);try{te=new Worker(Oe),At=!0}catch(Ke){At=!1}return te&&te.terminate(),URL.revokeObjectURL(Oe),At}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var At=document.createElement("canvas");At.width=At.height=1;var te=At.getContext("2d");if(!te)return!1;var we=te.getImageData(0,0,1,1);return we&&we.width===At.width}()?(Z[St=ut&&ut.failIfMajorPerformanceCaveat]===void 0&&(Z[St]=function(At){var te=function(Oe){var Ke=document.createElement("canvas"),nr=Object.create(I.webGLContextAttributes);return nr.failIfMajorPerformanceCaveat=Oe,Ke.probablySupportsContext?Ke.probablySupportsContext("webgl",nr)||Ke.probablySupportsContext("experimental-webgl",nr):Ke.supportsContext?Ke.supportsContext("webgl",nr)||Ke.supportsContext("experimental-webgl",nr):Ke.getContext("webgl",nr)||Ke.getContext("experimental-webgl",nr)}(At);if(!te)return!1;var we=te.createShader(te.VERTEX_SHADER);return!(!we||te.isContextLost())&&(te.shaderSource(we,"void main() {}"),te.compileShader(we),te.getShaderParameter(we,te.COMPILE_STATUS)===!0)}(St)),Z[St]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var St}E.exports?E.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=C);var Z={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),F={create:function(E,I,C){var Z=y.window.document.createElement(E);return I!==void 0&&(Z.className=I),C&&C.appendChild(Z),Z},createNS:function(E,I){return y.window.document.createElementNS(E,I)}},B=y.window.document&&y.window.document.documentElement.style;function R(E){if(!B)return E[0];for(var I=0;I<E.length;I++)if(E[I]in B)return E[I];return E[0]}var N,A=R(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);F.disableDrag=function(){B&&A&&(N=B[A],B[A]="none")},F.enableDrag=function(){B&&A&&(B[A]=N)};var D=R(["transform","WebkitTransform"]);F.setTransform=function(E,I){E.style[D]=I};var M=!1;try{var O=Object.defineProperty({},"passive",{get:function(){M=!0}});y.window.addEventListener("test",O,O),y.window.removeEventListener("test",O,O)}catch(E){M=!1}F.addEventListener=function(E,I,C,Z){Z===void 0&&(Z={}),E.addEventListener(I,C,"passive"in Z&&M?Z:Z.capture)},F.removeEventListener=function(E,I,C,Z){Z===void 0&&(Z={}),E.removeEventListener(I,C,"passive"in Z&&M?Z:Z.capture)};var k=function(E){E.preventDefault(),E.stopPropagation(),y.window.removeEventListener("click",k,!0)};function V(E){var I=E.userImage;return!!(I&&I.render&&I.render())&&(E.data.replace(new Uint8Array(I.data.buffer)),!0)}F.suppressClick=function(){y.window.addEventListener("click",k,!0),y.window.setTimeout(function(){y.window.removeEventListener("click",k,!0)},0)},F.mousePos=function(E,I){var C=E.getBoundingClientRect();return new y.Point(I.clientX-C.left-E.clientLeft,I.clientY-C.top-E.clientTop)},F.touchPos=function(E,I){for(var C=E.getBoundingClientRect(),Z=[],ut=0;ut<I.length;ut++)Z.push(new y.Point(I[ut].clientX-C.left-E.clientLeft,I[ut].clientY-C.top-E.clientTop));return Z},F.mouseButton=function(E){return y.window.InstallTrigger!==void 0&&E.button===2&&E.ctrlKey&&y.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:E.button},F.remove=function(E){E.parentNode&&E.parentNode.removeChild(E)};var X=function(E){function I(){E.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new y.RGBAImage({width:1,height:1}),this.dirty=!0}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(C){if(this.loaded!==C&&(this.loaded=C,C)){for(var Z=0,ut=this.requestors;Z<ut.length;Z+=1){var St=ut[Z];this._notify(St.ids,St.callback)}this.requestors=[]}},I.prototype.getImage=function(C){return this.images[C]},I.prototype.addImage=function(C,Z){this._validate(C,Z)&&(this.images[C]=Z)},I.prototype._validate=function(C,Z){var ut=!0;return this._validateStretch(Z.stretchX,Z.data&&Z.data.width)||(this.fire(new y.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchX" value'))),ut=!1),this._validateStretch(Z.stretchY,Z.data&&Z.data.height)||(this.fire(new y.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchY" value'))),ut=!1),this._validateContent(Z.content,Z)||(this.fire(new y.ErrorEvent(new Error('Image "'+C+'" has invalid "content" value'))),ut=!1),ut},I.prototype._validateStretch=function(C,Z){if(!C)return!0;for(var ut=0,St=0,At=C;St<At.length;St+=1){var te=At[St];if(te[0]<ut||te[1]<te[0]||Z<te[1])return!1;ut=te[1]}return!0},I.prototype._validateContent=function(C,Z){return!(C&&(C.length!==4||C[0]<0||Z.data.width<C[0]||C[1]<0||Z.data.height<C[1]||C[2]<0||Z.data.width<C[2]||C[3]<0||Z.data.height<C[3]||C[2]<C[0]||C[3]<C[1]))},I.prototype.updateImage=function(C,Z){Z.version=this.images[C].version+1,this.images[C]=Z,this.updatedImages[C]=!0},I.prototype.removeImage=function(C){var Z=this.images[C];delete this.images[C],delete this.patterns[C],Z.userImage&&Z.userImage.onRemove&&Z.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(C,Z){var ut=!0;if(!this.isLoaded())for(var St=0,At=C;St<At.length;St+=1)this.images[At[St]]||(ut=!1);this.isLoaded()||ut?this._notify(C,Z):this.requestors.push({ids:C,callback:Z})},I.prototype._notify=function(C,Z){for(var ut={},St=0,At=C;St<At.length;St+=1){var te=At[St];this.images[te]||this.fire(new y.Event("styleimagemissing",{id:te}));var we=this.images[te];we?ut[te]={data:we.data.clone(),pixelRatio:we.pixelRatio,sdf:we.sdf,version:we.version,stretchX:we.stretchX,stretchY:we.stretchY,content:we.content,hasRenderCallback:Boolean(we.userImage&&we.userImage.render)}:y.warnOnce('Image "'+te+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Z(null,ut)},I.prototype.getPixelSize=function(){var C=this.atlasImage;return{width:C.width,height:C.height}},I.prototype.getPattern=function(C){var Z=this.patterns[C],ut=this.getImage(C);if(!ut)return null;if(Z&&Z.position.version===ut.version)return Z.position;if(Z)Z.position.version=ut.version;else{var St={w:ut.data.width+2,h:ut.data.height+2,x:0,y:0},At=new y.ImagePosition(St,ut);this.patterns[C]={bin:St,position:At}}return this._updatePatternAtlas(),this.patterns[C].position},I.prototype.bind=function(C){var Z=C.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new y.Texture(C,this.atlasImage,Z.RGBA),this.atlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var C=[];for(var Z in this.patterns)C.push(this.patterns[Z].bin);var ut=y.potpack(C),St=ut.w,At=ut.h,te=this.atlasImage;for(var we in te.resize({width:St||1,height:At||1}),this.patterns){var Oe=this.patterns[we].bin,Ke=Oe.x+1,nr=Oe.y+1,$e=this.images[we].data,pr=$e.width,Sr=$e.height;y.RGBAImage.copy($e,te,{x:0,y:0},{x:Ke,y:nr},{width:pr,height:Sr}),y.RGBAImage.copy($e,te,{x:0,y:Sr-1},{x:Ke,y:nr-1},{width:pr,height:1}),y.RGBAImage.copy($e,te,{x:0,y:0},{x:Ke,y:nr+Sr},{width:pr,height:1}),y.RGBAImage.copy($e,te,{x:pr-1,y:0},{x:Ke-1,y:nr},{width:1,height:Sr}),y.RGBAImage.copy($e,te,{x:0,y:0},{x:Ke+pr,y:nr},{width:1,height:Sr})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(C){for(var Z=0,ut=C;Z<ut.length;Z+=1){var St=ut[Z];if(!this.callbackDispatchedThisFrame[St]){this.callbackDispatchedThisFrame[St]=!0;var At=this.images[St];V(At)&&this.updateImage(St,At)}}},I}(y.Evented),K=_t,q=_t,ct=1e20;function _t(E,I,C,Z,ut,St){this.fontSize=E||24,this.buffer=I===void 0?3:I,this.cutoff=Z||.25,this.fontFamily=ut||"sans-serif",this.fontWeight=St||"normal",this.radius=C||8;var At=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=At,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(At*At),this.gridInner=new Float64Array(At*At),this.f=new Float64Array(At),this.d=new Float64Array(At),this.z=new Float64Array(At+1),this.v=new Int16Array(At),this.middle=Math.round(At/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function yt(E,I,C,Z,ut,St,At){for(var te=0;te<I;te++){for(var we=0;we<C;we++)Z[we]=E[we*I+te];for(lt(Z,ut,St,At,C),we=0;we<C;we++)E[we*I+te]=ut[we]}for(we=0;we<C;we++){for(te=0;te<I;te++)Z[te]=E[we*I+te];for(lt(Z,ut,St,At,I),te=0;te<I;te++)E[we*I+te]=Math.sqrt(ut[te])}}function lt(E,I,C,Z,ut){C[0]=0,Z[0]=-ct,Z[1]=+ct;for(var St=1,At=0;St<ut;St++){for(var te=(E[St]+St*St-(E[C[At]]+C[At]*C[At]))/(2*St-2*C[At]);te<=Z[At];)At--,te=(E[St]+St*St-(E[C[At]]+C[At]*C[At]))/(2*St-2*C[At]);C[++At]=St,Z[At]=te,Z[At+1]=+ct}for(St=0,At=0;St<ut;St++){for(;Z[At+1]<St;)At++;I[St]=(St-C[At])*(St-C[At])+E[C[At]]}}_t.prototype.draw=function(E){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(E,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),C=new Uint8ClampedArray(this.size*this.size),Z=0;Z<this.size*this.size;Z++){var ut=I.data[4*Z+3]/255;this.gridOuter[Z]=ut===1?0:ut===0?ct:Math.pow(Math.max(0,.5-ut),2),this.gridInner[Z]=ut===1?ct:ut===0?0:Math.pow(Math.max(0,ut-.5),2)}for(yt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),yt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Z=0;Z<this.size*this.size;Z++)C[Z]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Z]-this.gridInner[Z])/this.radius+this.cutoff))));return C},K.default=q;var Lt=function(E,I){this.requestManager=E,this.localIdeographFontFamily=I,this.entries={}};Lt.prototype.setURL=function(E){this.url=E},Lt.prototype.getGlyphs=function(E,I){var C=this,Z=[];for(var ut in E)for(var St=0,At=E[ut];St<At.length;St+=1)Z.push({stack:ut,id:At[St]});y.asyncAll(Z,function(te,we){var Oe=te.stack,Ke=te.id,nr=C.entries[Oe];nr||(nr=C.entries[Oe]={glyphs:{},requests:{},ranges:{}});var $e=nr.glyphs[Ke];if($e===void 0){if($e=C._tinySDF(nr,Oe,Ke))return nr.glyphs[Ke]=$e,void we(null,{stack:Oe,id:Ke,glyph:$e});var pr=Math.floor(Ke/256);if(256*pr>65535)we(new Error("glyphs > 65535 not supported"));else if(nr.ranges[pr])we(null,{stack:Oe,id:Ke,glyph:$e});else{var Sr=nr.requests[pr];Sr||(Sr=nr.requests[pr]=[],Lt.loadGlyphRange(Oe,pr,C.url,C.requestManager,function(zr,dr){if(dr){for(var Ur in dr)C._doesCharSupportLocalGlyph(+Ur)||(nr.glyphs[+Ur]=dr[+Ur]);nr.ranges[pr]=!0}for(var en=0,Sn=Sr;en<Sn.length;en+=1)(0,Sn[en])(zr,dr);delete nr.requests[pr]})),Sr.push(function(zr,dr){zr?we(zr):dr&&we(null,{stack:Oe,id:Ke,glyph:dr[Ke]||null})})}}else we(null,{stack:Oe,id:Ke,glyph:$e})},function(te,we){if(te)I(te);else if(we){for(var Oe={},Ke=0,nr=we;Ke<nr.length;Ke+=1){var $e=nr[Ke],pr=$e.stack,Sr=$e.id,zr=$e.glyph;(Oe[pr]||(Oe[pr]={}))[Sr]=zr&&{id:zr.id,bitmap:zr.bitmap.clone(),metrics:zr.metrics}}I(null,Oe)}})},Lt.prototype._doesCharSupportLocalGlyph=function(E){return!!this.localIdeographFontFamily&&(y.isChar["CJK Unified Ideographs"](E)||y.isChar["Hangul Syllables"](E)||y.isChar.Hiragana(E)||y.isChar.Katakana(E))},Lt.prototype._tinySDF=function(E,I,C){var Z=this.localIdeographFontFamily;if(Z&&this._doesCharSupportLocalGlyph(C)){var ut=E.tinySDF;if(!ut){var St="400";/bold/i.test(I)?St="900":/medium/i.test(I)?St="500":/light/i.test(I)&&(St="200"),ut=E.tinySDF=new Lt.TinySDF(24,3,8,.25,Z,St)}return{id:C,bitmap:new y.AlphaImage({width:30,height:30},ut.draw(String.fromCharCode(C))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Lt.loadGlyphRange=function(E,I,C,Z,ut){var St=256*I,At=St+255,te=Z.transformRequest(Z.normalizeGlyphsURL(C).replace("{fontstack}",E).replace("{range}",St+"-"+At),y.ResourceType.Glyphs);y.getArrayBuffer(te,function(we,Oe){if(we)ut(we);else if(Oe){for(var Ke={},nr=0,$e=y.parseGlyphPBF(Oe);nr<$e.length;nr+=1){var pr=$e[nr];Ke[pr.id]=pr}ut(null,Ke)}})},Lt.TinySDF=K;var wt=function(){this.specification=y.styleSpec.light.position};wt.prototype.possiblyEvaluate=function(E,I){return y.sphericalToCartesian(E.expression.evaluate(I))},wt.prototype.interpolate=function(E,I,C){return{x:y.number(E.x,I.x,C),y:y.number(E.y,I.y,C),z:y.number(E.z,I.z,C)}};var Gt=new y.Properties({anchor:new y.DataConstantProperty(y.styleSpec.light.anchor),position:new wt,color:new y.DataConstantProperty(y.styleSpec.light.color),intensity:new y.DataConstantProperty(y.styleSpec.light.intensity)}),re=function(E){function I(C){E.call(this),this._transitionable=new y.Transitionable(Gt),this.setLight(C),this._transitioning=this._transitionable.untransitioned()}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(C,Z){if(Z===void 0&&(Z={}),!this._validate(y.validateLight,C,Z))for(var ut in C){var St=C[ut];y.endsWith(ut,"-transition")?this._transitionable.setTransition(ut.slice(0,-"-transition".length),St):this._transitionable.setValue(ut,St)}},I.prototype.updateTransitions=function(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(C){this.properties=this._transitioning.possiblyEvaluate(C)},I.prototype._validate=function(C,Z,ut){return(!ut||ut.validate!==!1)&&y.emitValidationErrors(this,C.call(y.validateStyle,y.extend({value:Z,style:{glyphs:!0,sprite:!0},styleSpec:y.styleSpec})))},I}(y.Evented),Qt=function(E,I){this.width=E,this.height=I,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Qt.prototype.getDash=function(E,I){var C=E.join(",")+String(I);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(E,I)),this.dashEntry[C]},Qt.prototype.getDashRanges=function(E,I,C){var Z=[],ut=E.length%2==1?-E[E.length-1]*C:0,St=E[0]*C,At=!0;Z.push({left:ut,right:St,isDash:At,zeroLength:E[0]===0});for(var te=E[0],we=1;we<E.length;we++){var Oe=E[we];Z.push({left:ut=te*C,right:St=(te+=Oe)*C,isDash:At=!At,zeroLength:Oe===0})}return Z},Qt.prototype.addRoundDash=function(E,I,C){for(var Z=I/2,ut=-C;ut<=C;ut++)for(var St=this.width*(this.nextRow+C+ut),At=0,te=E[At],we=0;we<this.width;we++){we/te.right>1&&(te=E[++At]);var Oe=Math.abs(we-te.left),Ke=Math.abs(we-te.right),nr=Math.min(Oe,Ke),$e=void 0,pr=ut/C*(Z+1);if(te.isDash){var Sr=Z-Math.abs(pr);$e=Math.sqrt(nr*nr+Sr*Sr)}else $e=Z-Math.sqrt(nr*nr+pr*pr);this.data[St+we]=Math.max(0,Math.min(255,$e+128))}},Qt.prototype.addRegularDash=function(E){for(var I=E.length-1;I>=0;--I){var C=E[I],Z=E[I+1];C.zeroLength?E.splice(I,1):Z&&Z.isDash===C.isDash&&(Z.left=C.left,E.splice(I,1))}var ut=E[0],St=E[E.length-1];ut.isDash===St.isDash&&(ut.left=St.left-this.width,St.right=ut.right+this.width);for(var At=this.width*this.nextRow,te=0,we=E[te],Oe=0;Oe<this.width;Oe++){Oe/we.right>1&&(we=E[++te]);var Ke=Math.abs(Oe-we.left),nr=Math.abs(Oe-we.right),$e=Math.min(Ke,nr);this.data[At+Oe]=Math.max(0,Math.min(255,(we.isDash?$e:-$e)+128))}},Qt.prototype.addDash=function(E,I){var C=I?7:0,Z=2*C+1;if(this.nextRow+Z>this.height)return y.warnOnce("LineAtlas out of space"),null;for(var ut=0,St=0;St<E.length;St++)ut+=E[St];if(ut!==0){var At=this.width/ut,te=this.getDashRanges(E,this.width,At);I?this.addRoundDash(te,At,C):this.addRegularDash(te)}var we={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:ut};return this.nextRow+=Z,this.dirty=!0,we},Qt.prototype.bind=function(E){var I=E.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var it=function E(I,C){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=y.uniqueId();for(var Z=this.workerPool.acquire(this.id),ut=0;ut<Z.length;ut++){var St=new E.Actor(Z[ut],C,this.id);St.name="Worker "+ut,this.actors.push(St)}};function dt(E,I,C){var Z=function(ut,St){if(ut)return C(ut);if(St){var At=y.pick(y.extend(St,E),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);St.vector_layers&&(At.vectorLayers=St.vector_layers,At.vectorLayerIds=At.vectorLayers.map(function(te){return te.id})),At.tiles=I.canonicalizeTileset(At,E.url),C(null,At)}};return E.url?y.getJSON(I.transformRequest(I.normalizeSourceURL(E.url),y.ResourceType.Source),Z):y.browser.frame(function(){return Z(null,E)})}it.prototype.broadcast=function(E,I,C){y.asyncAll(this.actors,function(Z,ut){Z.send(E,I,ut)},C=C||function(){})},it.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},it.prototype.remove=function(){this.actors.forEach(function(E){E.remove()}),this.actors=[],this.workerPool.release(this.id)},it.Actor=y.Actor;var gt=function(E,I,C){this.bounds=y.LngLatBounds.convert(this.validateBounds(E)),this.minzoom=I||0,this.maxzoom=C||24};gt.prototype.validateBounds=function(E){return Array.isArray(E)&&E.length===4?[Math.max(-180,E[0]),Math.max(-90,E[1]),Math.min(180,E[2]),Math.min(90,E[3])]:[-180,-90,180,90]},gt.prototype.contains=function(E){var I=Math.pow(2,E.z),C=Math.floor(y.mercatorXfromLng(this.bounds.getWest())*I),Z=Math.floor(y.mercatorYfromLat(this.bounds.getNorth())*I),ut=Math.ceil(y.mercatorXfromLng(this.bounds.getEast())*I),St=Math.ceil(y.mercatorYfromLat(this.bounds.getSouth())*I);return E.x>=C&&E.x<ut&&E.y>=Z&&E.y<St};var vt=function(E){function I(C,Z,ut,St){if(E.call(this),this.id=C,this.dispatcher=ut,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,y.extend(this,y.pick(Z,["url","scheme","tileSize","promoteId"])),this._options=y.extend({type:"vector"},Z),this._collectResourceTiming=Z.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(St)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new y.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dt(this._options,this.map._requestManager,function(Z,ut){C._tileJSONRequest=null,C._loaded=!0,Z?C.fire(new y.ErrorEvent(Z)):ut&&(y.extend(C,ut),ut.bounds&&(C.tileBounds=new gt(ut.bounds,C.minzoom,C.maxzoom)),y.postTurnstileEvent(ut.tiles,C.map._requestManager._customAccessToken),y.postMapLoadEvent(ut.tiles,C.map._getMapId(),C.map._requestManager._skuToken,C.map._requestManager._customAccessToken),C.fire(new y.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new y.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},I.prototype.onAdd=function(C){this.map=C,this.load()},I.prototype.setSourceProperty=function(C){this._tileJSONRequest&&this._tileJSONRequest.cancel(),C(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(C){var Z=this;return this.setSourceProperty(function(){Z._options.tiles=C}),this},I.prototype.setUrl=function(C){var Z=this;return this.setSourceProperty(function(){Z.url=C,Z._options.url=C}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return y.extend({},this._options)},I.prototype.loadTile=function(C,Z){var ut=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),St={request:this.map._requestManager.transformRequest(ut,y.ResourceType.Tile),uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:y.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function At(te,we){return delete C.request,C.aborted?Z(null):te&&te.status!==404?Z(te):(we&&we.resourceTiming&&(C.resourceTiming=we.resourceTiming),this.map._refreshExpiredTiles&&we&&C.setExpiryData(we),C.loadVectorData(we,this.map.painter),y.cacheEntryPossiblyAdded(this.dispatcher),Z(null),void(C.reloadCallback&&(this.loadTile(C,C.reloadCallback),C.reloadCallback=null)))}St.request.collectResourceTiming=this._collectResourceTiming,C.actor&&C.state!=="expired"?C.state==="loading"?C.reloadCallback=Z:C.request=C.actor.send("reloadTile",St,At.bind(this)):(C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",St,At.bind(this)))},I.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.actor&&C.actor.send("abortTile",{uid:C.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(C){C.unloadVectorData(),C.actor&&C.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(y.Evented),Y=function(E){function I(C,Z,ut,St){E.call(this),this.id=C,this.dispatcher=ut,this.setEventedParent(St),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=y.extend({type:"raster"},Z),y.extend(this,y.pick(Z,["url","scheme","tileSize"]))}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new y.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dt(this._options,this.map._requestManager,function(Z,ut){C._tileJSONRequest=null,C._loaded=!0,Z?C.fire(new y.ErrorEvent(Z)):ut&&(y.extend(C,ut),ut.bounds&&(C.tileBounds=new gt(ut.bounds,C.minzoom,C.maxzoom)),y.postTurnstileEvent(ut.tiles),y.postMapLoadEvent(ut.tiles,C.map._getMapId(),C.map._requestManager._skuToken),C.fire(new y.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new y.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(C){this.map=C,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return y.extend({},this._options)},I.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},I.prototype.loadTile=function(C,Z){var ut=this,St=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);C.request=y.getImage(this.map._requestManager.transformRequest(St,y.ResourceType.Tile),function(At,te){if(delete C.request,C.aborted)C.state="unloaded",Z(null);else if(At)C.state="errored",Z(At);else if(te){ut.map._refreshExpiredTiles&&C.setExpiryData(te),delete te.cacheControl,delete te.expires;var we=ut.map.painter.context,Oe=we.gl;C.texture=ut.map.painter.getTileTexture(te.width),C.texture?C.texture.update(te,{useMipmap:!0}):(C.texture=new y.Texture(we,te,Oe.RGBA,{useMipmap:!0}),C.texture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),we.extTextureFilterAnisotropic&&Oe.texParameterf(Oe.TEXTURE_2D,we.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,we.extTextureFilterAnisotropicMax)),C.state="loaded",y.cacheEntryPossiblyAdded(ut.dispatcher),Z(null)}})},I.prototype.abortTile=function(C,Z){C.request&&(C.request.cancel(),delete C.request),Z()},I.prototype.unloadTile=function(C,Z){C.texture&&this.map.painter.saveTileTexture(C.texture),Z()},I.prototype.hasTransition=function(){return!1},I}(y.Evented),ot=function(E){function I(C,Z,ut,St){E.call(this,C,Z,ut,St),this.type="raster-dem",this.maxzoom=22,this._options=y.extend({type:"raster-dem"},Z),this.encoding=Z.encoding||"mapbox"}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(C,Z){var ut=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function St(At,te){At&&(C.state="errored",Z(At)),te&&(C.dem=te,C.needsHillshadePrepare=!0,C.state="loaded",Z(null))}C.request=y.getImage(this.map._requestManager.transformRequest(ut,y.ResourceType.Tile),function(At,te){if(delete C.request,C.aborted)C.state="unloaded",Z(null);else if(At)C.state="errored",Z(At);else if(te){this.map._refreshExpiredTiles&&C.setExpiryData(te),delete te.cacheControl,delete te.expires;var we=y.window.ImageBitmap&&te instanceof y.window.ImageBitmap&&y.offscreenCanvasSupported()?te:y.browser.getImageData(te,1),Oe={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:we,encoding:this.encoding};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",Oe,St.bind(this)))}}.bind(this)),C.neighboringTiles=this._getNeighboringTiles(C.tileID)},I.prototype._getNeighboringTiles=function(C){var Z=C.canonical,ut=Math.pow(2,Z.z),St=(Z.x-1+ut)%ut,At=Z.x===0?C.wrap-1:C.wrap,te=(Z.x+1+ut)%ut,we=Z.x+1===ut?C.wrap+1:C.wrap,Oe={};return Oe[new y.OverscaledTileID(C.overscaledZ,At,Z.z,St,Z.y).key]={backfilled:!1},Oe[new y.OverscaledTileID(C.overscaledZ,we,Z.z,te,Z.y).key]={backfilled:!1},Z.y>0&&(Oe[new y.OverscaledTileID(C.overscaledZ,At,Z.z,St,Z.y-1).key]={backfilled:!1},Oe[new y.OverscaledTileID(C.overscaledZ,C.wrap,Z.z,Z.x,Z.y-1).key]={backfilled:!1},Oe[new y.OverscaledTileID(C.overscaledZ,we,Z.z,te,Z.y-1).key]={backfilled:!1}),Z.y+1<ut&&(Oe[new y.OverscaledTileID(C.overscaledZ,At,Z.z,St,Z.y+1).key]={backfilled:!1},Oe[new y.OverscaledTileID(C.overscaledZ,C.wrap,Z.z,Z.x,Z.y+1).key]={backfilled:!1},Oe[new y.OverscaledTileID(C.overscaledZ,we,Z.z,te,Z.y+1).key]={backfilled:!1}),Oe},I.prototype.unloadTile=function(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded",C.actor&&C.actor.send("removeDEMTile",{uid:C.uid,source:this.id})},I}(Y),nt=function(E){function I(C,Z,ut,St){E.call(this),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ut.getActor(),this.setEventedParent(St),this._data=Z.data,this._options=y.extend({},Z),this._collectResourceTiming=Z.collectResourceTiming,this._resourceTiming=[],Z.maxzoom!==void 0&&(this.maxzoom=Z.maxzoom),Z.type&&(this.type=Z.type),Z.attribution&&(this.attribution=Z.attribution),this.promoteId=Z.promoteId;var At=y.EXTENT/this.tileSize;this.workerOptions=y.extend({source:this.id,cluster:Z.cluster||!1,geojsonVtOptions:{buffer:(Z.buffer!==void 0?Z.buffer:128)*At,tolerance:(Z.tolerance!==void 0?Z.tolerance:.375)*At,extent:y.EXTENT,maxZoom:this.maxzoom,lineMetrics:Z.lineMetrics||!1,generateId:Z.generateId||!1},superclusterOptions:{maxZoom:Z.clusterMaxZoom!==void 0?Math.min(Z.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,Z.clusterMinPoints||2),extent:y.EXTENT,radius:(Z.clusterRadius||50)*At,log:!1,generateId:Z.generateId||!1},clusterProperties:Z.clusterProperties,filter:Z.filter},Z.workerOptions)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(){var C=this;this.fire(new y.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)C.fire(new y.ErrorEvent(Z));else{var ut={dataType:"source",sourceDataType:"metadata"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(ut.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new y.Event("data",ut))}})},I.prototype.onAdd=function(C){this.map=C,this.load()},I.prototype.setData=function(C){var Z=this;return this._data=C,this.fire(new y.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ut){if(ut)Z.fire(new y.ErrorEvent(ut));else{var St={dataType:"source",sourceDataType:"content"};Z._collectResourceTiming&&Z._resourceTiming&&Z._resourceTiming.length>0&&(St.resourceTiming=Z._resourceTiming,Z._resourceTiming=[]),Z.fire(new y.Event("data",St))}}),this},I.prototype.getClusterExpansionZoom=function(C,Z){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},Z),this},I.prototype.getClusterChildren=function(C,Z){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},Z),this},I.prototype.getClusterLeaves=function(C,Z,ut,St){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:Z,offset:ut},St),this},I.prototype._updateWorkerData=function(C){var Z=this;this._loaded=!1;var ut=y.extend({},this.workerOptions),St=this._data;typeof St=="string"?(ut.request=this.map._requestManager.transformRequest(y.browser.resolveURL(St),y.ResourceType.Source),ut.request.collectResourceTiming=this._collectResourceTiming):ut.data=JSON.stringify(St),this.actor.send(this.type+".loadData",ut,function(At,te){Z._removed||te&&te.abandoned||(Z._loaded=!0,te&&te.resourceTiming&&te.resourceTiming[Z.id]&&(Z._resourceTiming=te.resourceTiming[Z.id].slice(0)),Z.actor.send(Z.type+".coalesce",{source:ut.source},null),C(At))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(C,Z){var ut=this,St=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(St,{type:this.type,uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:y.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(At,te){return delete C.request,C.unloadVectorData(),C.aborted?Z(null):At?Z(At):(C.loadVectorData(te,ut.map.painter,St==="reloadTile"),Z(null))})},I.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0},I.prototype.unloadTile=function(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return y.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(y.Evented),rt=y.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),st=function(E){function I(C,Z,ut,St){E.call(this),this.id=C,this.dispatcher=ut,this.coordinates=Z.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(St),this.options=Z}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(C,Z){var ut=this;this._loaded=!1,this.fire(new y.Event("dataloading",{dataType:"source"})),this.url=this.options.url,y.getImage(this.map._requestManager.transformRequest(this.url,y.ResourceType.Image),function(St,At){ut._loaded=!0,St?ut.fire(new y.ErrorEvent(St)):At&&(ut.image=At,C&&(ut.coordinates=C),Z&&Z(),ut._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(C){var Z=this;return this.image&&C.url?(this.options.url=C.url,this.load(C.coordinates,function(){Z.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new y.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(C){this.map=C,this.load()},I.prototype.setCoordinates=function(C){var Z=this;this.coordinates=C;var ut=C.map(y.MercatorCoordinate.fromLngLat);this.tileID=function(At){for(var te=1/0,we=1/0,Oe=-1/0,Ke=-1/0,nr=0,$e=At;nr<$e.length;nr+=1){var pr=$e[nr];te=Math.min(te,pr.x),we=Math.min(we,pr.y),Oe=Math.max(Oe,pr.x),Ke=Math.max(Ke,pr.y)}var Sr=Math.max(Oe-te,Ke-we),zr=Math.max(0,Math.floor(-Math.log(Sr)/Math.LN2)),dr=Math.pow(2,zr);return new y.CanonicalTileID(zr,Math.floor((te+Oe)/2*dr),Math.floor((we+Ke)/2*dr))}(ut),this.minzoom=this.maxzoom=this.tileID.z;var St=ut.map(function(At){return Z.tileID.getTilePoint(At)._round()});return this._boundsArray=new y.StructArrayLayout4i8,this._boundsArray.emplaceBack(St[0].x,St[0].y,0,0),this._boundsArray.emplaceBack(St[1].x,St[1].y,y.EXTENT,0),this._boundsArray.emplaceBack(St[3].x,St[3].y,0,y.EXTENT),this._boundsArray.emplaceBack(St[2].x,St[2].y,y.EXTENT,y.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new y.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var C=this.map.painter.context,Z=C.gl;for(var ut in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=y.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new y.Texture(C,this.image,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var St=this.tiles[ut];St.state!=="loaded"&&(St.state="loaded",St.texture=this.texture)}}},I.prototype.loadTile=function(C,Z){this.tileID&&this.tileID.equals(C.tileID.canonical)?(this.tiles[String(C.tileID.wrap)]=C,C.buckets={},Z(null)):(C.state="errored",Z(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(y.Evented),d=function(E){function I(C,Z,ut,St){E.call(this,C,Z,ut,St),this.roundZoom=!0,this.type="video",this.options=Z}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(){var C=this;this._loaded=!1;var Z=this.options;this.urls=[];for(var ut=0,St=Z.urls;ut<St.length;ut+=1)this.urls.push(this.map._requestManager.transformRequest(St[ut],y.ResourceType.Source).url);y.getVideo(this.urls,function(At,te){C._loaded=!0,At?C.fire(new y.ErrorEvent(At)):te&&(C.video=te,C.video.loop=!0,C.video.addEventListener("playing",function(){C.map.triggerRepaint()}),C.map&&C.video.play(),C._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(C){if(this.video){var Z=this.video.seekable;C<Z.start(0)||C>Z.end(0)?this.fire(new y.ErrorEvent(new y.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Z.start(0)+" and "+Z.end(0)+"-second mark."))):this.video.currentTime=C}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var C=this.map.painter.context,Z=C.gl;for(var ut in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=y.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Z.texSubImage2D(Z.TEXTURE_2D,0,0,0,Z.RGBA,Z.UNSIGNED_BYTE,this.video)):(this.texture=new y.Texture(C,this.video,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var St=this.tiles[ut];St.state!=="loaded"&&(St.state="loaded",St.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(st),It=function(E){function I(C,Z,ut,St){E.call(this,C,Z,ut,St),Z.coordinates?Array.isArray(Z.coordinates)&&Z.coordinates.length===4&&!Z.coordinates.some(function(At){return!Array.isArray(At)||At.length!==2||At.some(function(te){return typeof te!="number"})})||this.fire(new y.ErrorEvent(new y.ValidationError("sources."+C,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new y.ErrorEvent(new y.ValidationError("sources."+C,null,'missing required property "coordinates"'))),Z.animate&&typeof Z.animate!="boolean"&&this.fire(new y.ErrorEvent(new y.ValidationError("sources."+C,null,'optional "animate" property must be a boolean value'))),Z.canvas?typeof Z.canvas=="string"||Z.canvas instanceof y.window.HTMLCanvasElement||this.fire(new y.ErrorEvent(new y.ValidationError("sources."+C,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new y.ErrorEvent(new y.ValidationError("sources."+C,null,'missing required property "canvas"'))),this.options=Z,this.animate=Z.animate===void 0||Z.animate}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof y.window.HTMLCanvasElement?this.options.canvas:y.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new y.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var Z=this.map.painter.context,ut=Z.gl;for(var St in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=y.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new y.Texture(Z,this.canvas,ut.RGBA,{premultiply:!0}),this.tiles){var At=this.tiles[St];At.state!=="loaded"&&(At.state="loaded",At.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var C=0,Z=[this.canvas.width,this.canvas.height];C<Z.length;C+=1){var ut=Z[C];if(isNaN(ut)||ut<=0)return!0}return!1},I}(st),Ht={vector:vt,raster:Y,"raster-dem":ot,geojson:nt,video:d,image:st,canvas:It};function kt(E,I){var C=y.identity([]);return y.translate(C,C,[1,1,0]),y.scale(C,C,[.5*E.width,.5*E.height,1]),y.multiply(C,C,E.calculatePosMatrix(I.toUnwrapped()))}function Xt(E,I,C,Z,ut,St){var At=function(zr,dr,Ur){if(zr)for(var en=0,Sn=zr;en<Sn.length;en+=1){var Zn=dr[Sn[en]];if(Zn&&Zn.source===Ur&&Zn.type==="fill-extrusion")return!0}else for(var Pn in dr){var Fn=dr[Pn];if(Fn.source===Ur&&Fn.type==="fill-extrusion")return!0}return!1}(ut&&ut.layers,I,E.id),te=St.maxPitchScaleFactor(),we=E.tilesIn(Z,te,At);we.sort(Kt);for(var Oe=[],Ke=0,nr=we;Ke<nr.length;Ke+=1){var $e=nr[Ke];Oe.push({wrappedTileID:$e.tileID.wrapped().key,queryResults:$e.tile.queryRenderedFeatures(I,C,E._state,$e.queryGeometry,$e.cameraQueryGeometry,$e.scale,ut,St,te,kt(E.transform,$e.tileID))})}var pr=function(zr){for(var dr={},Ur={},en=0,Sn=zr;en<Sn.length;en+=1){var Zn=Sn[en],Pn=Zn.queryResults,Fn=Zn.wrappedTileID,gi=Ur[Fn]=Ur[Fn]||{};for(var Vi in Pn)for(var Hi=Pn[Vi],fa=gi[Vi]=gi[Vi]||{},$a=dr[Vi]=dr[Vi]||[],Qa=0,so=Hi;Qa<so.length;Qa+=1){var No=so[Qa];fa[No.featureIndex]||(fa[No.featureIndex]=!0,$a.push(No))}}return dr}(Oe);for(var Sr in pr)pr[Sr].forEach(function(zr){var dr=zr.feature,Ur=E.getFeatureState(dr.layer["source-layer"],dr.id);dr.source=dr.layer.source,dr.layer["source-layer"]&&(dr.sourceLayer=dr.layer["source-layer"]),dr.state=Ur});return pr}function Kt(E,I){var C=E.tileID,Z=I.tileID;return C.overscaledZ-Z.overscaledZ||C.canonical.y-Z.canonical.y||C.wrap-Z.wrap||C.canonical.x-Z.canonical.x}var Jt=function(E,I){this.max=E,this.onRemove=I,this.reset()};Jt.prototype.reset=function(){for(var E in this.data)for(var I=0,C=this.data[E];I<C.length;I+=1){var Z=C[I];Z.timeout&&clearTimeout(Z.timeout),this.onRemove(Z.value)}return this.data={},this.order=[],this},Jt.prototype.add=function(E,I,C){var Z=this,ut=E.wrapped().key;this.data[ut]===void 0&&(this.data[ut]=[]);var St={value:I,timeout:void 0};if(C!==void 0&&(St.timeout=setTimeout(function(){Z.remove(E,St)},C)),this.data[ut].push(St),this.order.push(ut),this.order.length>this.max){var At=this._getAndRemoveByKey(this.order[0]);At&&this.onRemove(At)}return this},Jt.prototype.has=function(E){return E.wrapped().key in this.data},Jt.prototype.getAndRemove=function(E){return this.has(E)?this._getAndRemoveByKey(E.wrapped().key):null},Jt.prototype._getAndRemoveByKey=function(E){var I=this.data[E].shift();return I.timeout&&clearTimeout(I.timeout),this.data[E].length===0&&delete this.data[E],this.order.splice(this.order.indexOf(E),1),I.value},Jt.prototype.getByKey=function(E){var I=this.data[E];return I?I[0].value:null},Jt.prototype.get=function(E){return this.has(E)?this.data[E.wrapped().key][0].value:null},Jt.prototype.remove=function(E,I){if(!this.has(E))return this;var C=E.wrapped().key,Z=I===void 0?0:this.data[C].indexOf(I),ut=this.data[C][Z];return this.data[C].splice(Z,1),ut.timeout&&clearTimeout(ut.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(ut.value),this.order.splice(this.order.indexOf(C),1),this},Jt.prototype.setMaxSize=function(E){for(this.max=E;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},Jt.prototype.filter=function(E){var I=[];for(var C in this.data)for(var Z=0,ut=this.data[C];Z<ut.length;Z+=1){var St=ut[Z];E(St.value)||I.push(St)}for(var At=0,te=I;At<te.length;At+=1){var we=te[At];this.remove(we.value.tileID,we)}};var ue=function(E,I,C){this.context=E;var Z=E.gl;this.buffer=Z.createBuffer(),this.dynamicDraw=Boolean(C),this.context.unbindVAO(),E.bindElementBuffer.set(this.buffer),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer};ue.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ue.prototype.updateData=function(E){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,E.arrayBuffer)},ue.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ce={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},$t=function(E,I,C,Z){this.length=I.length,this.attributes=C,this.itemSize=I.bytesPerElement,this.dynamicDraw=Z,this.context=E;var ut=E.gl;this.buffer=ut.createBuffer(),E.bindVertexBuffer.set(this.buffer),ut.bufferData(ut.ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?ut.DYNAMIC_DRAW:ut.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer};$t.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},$t.prototype.updateData=function(E){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,E.arrayBuffer)},$t.prototype.enableAttributes=function(E,I){for(var C=0;C<this.attributes.length;C++){var Z=I.attributes[this.attributes[C].name];Z!==void 0&&E.enableVertexAttribArray(Z)}},$t.prototype.setVertexAttribPointers=function(E,I,C){for(var Z=0;Z<this.attributes.length;Z++){var ut=this.attributes[Z],St=I.attributes[ut.name];St!==void 0&&E.vertexAttribPointer(St,ut.components,E[ce[ut.type]],!1,this.itemSize,ut.offset+this.itemSize*(C||0))}},$t.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ut=function(E){this.gl=E.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ut.prototype.get=function(){return this.current},Ut.prototype.set=function(E){},Ut.prototype.getDefault=function(){return this.default},Ut.prototype.setDefault=function(){this.set(this.default)};var Rt=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return y.Color.transparent},I.prototype.set=function(C){var Z=this.current;(C.r!==Z.r||C.g!==Z.g||C.b!==Z.b||C.a!==Z.a||this.dirty)&&(this.gl.clearColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},I}(Ut),Pt=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearDepth(C),this.current=C,this.dirty=!1)},I}(Ut),Yt=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearStencil(C),this.current=C,this.dirty=!1)},I}(Ut),Dt=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(C){var Z=this.current;(C[0]!==Z[0]||C[1]!==Z[1]||C[2]!==Z[2]||C[3]!==Z[3]||this.dirty)&&(this.gl.colorMask(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},I}(Ut),Nt=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthMask(C),this.current=C,this.dirty=!1)},I}(Ut),ne=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.stencilMask(C),this.current=C,this.dirty=!1)},I}(Ut),ve=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(C){var Z=this.current;(C.func!==Z.func||C.ref!==Z.ref||C.mask!==Z.mask||this.dirty)&&(this.gl.stencilFunc(C.func,C.ref,C.mask),this.current=C,this.dirty=!1)},I}(Ut),Re=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){var C=this.gl;return[C.KEEP,C.KEEP,C.KEEP]},I.prototype.set=function(C){var Z=this.current;(C[0]!==Z[0]||C[1]!==Z[1]||C[2]!==Z[2]||this.dirty)&&(this.gl.stencilOp(C[0],C[1],C[2]),this.current=C,this.dirty=!1)},I}(Ut),je=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;C?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this.current=C,this.dirty=!1}},I}(Ut),Cr=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(C){var Z=this.current;(C[0]!==Z[0]||C[1]!==Z[1]||this.dirty)&&(this.gl.depthRange(C[0],C[1]),this.current=C,this.dirty=!1)},I}(Ut),$r=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;C?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this.current=C,this.dirty=!1}},I}(Ut),Qr=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthFunc(C),this.current=C,this.dirty=!1)},I}(Ut),Ee=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;C?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this.current=C,this.dirty=!1}},I}(Ut),yn=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){var C=this.gl;return[C.ONE,C.ZERO]},I.prototype.set=function(C){var Z=this.current;(C[0]!==Z[0]||C[1]!==Z[1]||this.dirty)&&(this.gl.blendFunc(C[0],C[1]),this.current=C,this.dirty=!1)},I}(Ut),ui=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return y.Color.transparent},I.prototype.set=function(C){var Z=this.current;(C.r!==Z.r||C.g!==Z.g||C.b!==Z.b||C.a!==Z.a||this.dirty)&&(this.gl.blendColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},I}(Ut),la=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.blendEquation(C),this.current=C,this.dirty=!1)},I}(Ut),Or=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;C?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this.current=C,this.dirty=!1}},I}(Ut),ln=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.cullFace(C),this.current=C,this.dirty=!1)},I}(Ut),Kn=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.frontFace(C),this.current=C,this.dirty=!1)},I}(Ut),jn=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)},I}(Ut),wi=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.activeTexture(C),this.current=C,this.dirty=!1)},I}(Ut),Sa=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){var C=this.gl;return[0,0,C.drawingBufferWidth,C.drawingBufferHeight]},I.prototype.set=function(C){var Z=this.current;(C[0]!==Z[0]||C[1]!==Z[1]||C[2]!==Z[2]||C[3]!==Z[3]||this.dirty)&&(this.gl.viewport(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},I}(Ut),to=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.bindFramebuffer(Z.FRAMEBUFFER,C),this.current=C,this.dirty=!1}},I}(Ut),qa=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.bindRenderbuffer(Z.RENDERBUFFER,C),this.current=C,this.dirty=!1}},I}(Ut),Ui=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.bindTexture(Z.TEXTURE_2D,C),this.current=C,this.dirty=!1}},I}(Ut),Ue=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.bindBuffer(Z.ARRAY_BUFFER,C),this.current=C,this.dirty=!1}},I}(Ut),We=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){var Z=this.gl;Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,C),this.current=C,this.dirty=!1},I}(Ut),fr=function(E){function I(C){E.call(this,C),this.vao=C.extVertexArrayObject}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(C){this.vao&&(C!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(C),this.current=C,this.dirty=!1)},I}(Ut),Ar=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_ALIGNMENT,C),this.current=C,this.dirty=!1}},I}(Ut),qr=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),this.current=C,this.dirty=!1}},I}(Ut),nn=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(C){if(C!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,C),this.current=C,this.dirty=!1}},I}(Ut),an=function(E){function I(C,Z){E.call(this,C),this.context=C,this.parent=Z}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(Ut),le=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,C,0),this.current=C,this.dirty=!1}},I}(an),fe=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_ATTACHMENT,Z.RENDERBUFFER,C),this.current=C,this.dirty=!1}},I}(an),Me=function(E,I,C,Z){this.context=E,this.width=I,this.height=C;var ut=this.framebuffer=E.gl.createFramebuffer();this.colorAttachment=new le(E,ut),Z&&(this.depthAttachment=new fe(E,ut))};Me.prototype.destroy=function(){var E=this.context.gl,I=this.colorAttachment.get();if(I&&E.deleteTexture(I),this.depthAttachment){var C=this.depthAttachment.get();C&&E.deleteRenderbuffer(C)}E.deleteFramebuffer(this.framebuffer)};var Te=function(E,I,C){this.func=E,this.mask=I,this.range=C};Te.ReadOnly=!1,Te.ReadWrite=!0,Te.disabled=new Te(519,Te.ReadOnly,[0,1]);var Ze=function(E,I,C,Z,ut,St){this.test=E,this.ref=I,this.mask=C,this.fail=Z,this.depthFail=ut,this.pass=St};Ze.disabled=new Ze({func:519,mask:0},0,0,7680,7680,7680);var or=function(E,I,C){this.blendFunction=E,this.blendColor=I,this.mask=C};or.disabled=new or(or.Replace=[1,0],y.Color.transparent,[!1,!1,!1,!1]),or.unblended=new or(or.Replace,y.Color.transparent,[!0,!0,!0,!0]),or.alphaBlended=new or([1,771],y.Color.transparent,[!0,!0,!0,!0]);var lr=function(E,I,C){this.enable=E,this.mode=I,this.frontFace=C};lr.disabled=new lr(!1,1029,2305),lr.backCCW=new lr(!0,1029,2305);var Be=function(E){this.gl=E,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Rt(this),this.clearDepth=new Pt(this),this.clearStencil=new Yt(this),this.colorMask=new Dt(this),this.depthMask=new Nt(this),this.stencilMask=new ne(this),this.stencilFunc=new ve(this),this.stencilOp=new Re(this),this.stencilTest=new je(this),this.depthRange=new Cr(this),this.depthTest=new $r(this),this.depthFunc=new Qr(this),this.blend=new Ee(this),this.blendFunc=new yn(this),this.blendColor=new ui(this),this.blendEquation=new la(this),this.cullFace=new Or(this),this.cullFaceSide=new ln(this),this.frontFace=new Kn(this),this.program=new jn(this),this.activeTexture=new wi(this),this.viewport=new Sa(this),this.bindFramebuffer=new to(this),this.bindRenderbuffer=new qa(this),this.bindTexture=new Ui(this),this.bindVertexBuffer=new Ue(this),this.bindElementBuffer=new We(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new fr(this),this.pixelStoreUnpack=new Ar(this),this.pixelStoreUnpackPremultiplyAlpha=new qr(this),this.pixelStoreUnpackFlipY=new nn(this),this.extTextureFilterAnisotropic=E.getExtension("EXT_texture_filter_anisotropic")||E.getExtension("MOZ_EXT_texture_filter_anisotropic")||E.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=E.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=E.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(E.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=E.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=E.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE)};Be.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Be.prototype.createIndexBuffer=function(E,I){return new ue(this,E,I)},Be.prototype.createVertexBuffer=function(E,I,C){return new $t(this,E,I,C)},Be.prototype.createRenderbuffer=function(E,I,C){var Z=this.gl,ut=Z.createRenderbuffer();return this.bindRenderbuffer.set(ut),Z.renderbufferStorage(Z.RENDERBUFFER,E,I,C),this.bindRenderbuffer.set(null),ut},Be.prototype.createFramebuffer=function(E,I,C){return new Me(this,E,I,C)},Be.prototype.clear=function(E){var I=E.color,C=E.depth,Z=this.gl,ut=0;I&&(ut|=Z.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),C!==void 0&&(ut|=Z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),Z.clear(ut)},Be.prototype.setCullFace=function(E){E.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(E.mode),this.frontFace.set(E.frontFace))},Be.prototype.setDepthMode=function(E){E.func!==this.gl.ALWAYS||E.mask?(this.depthTest.set(!0),this.depthFunc.set(E.func),this.depthMask.set(E.mask),this.depthRange.set(E.range)):this.depthTest.set(!1)},Be.prototype.setStencilMode=function(E){E.test.func!==this.gl.ALWAYS||E.mask?(this.stencilTest.set(!0),this.stencilMask.set(E.mask),this.stencilOp.set([E.fail,E.depthFail,E.pass]),this.stencilFunc.set({func:E.test.func,ref:E.ref,mask:E.test.mask})):this.stencilTest.set(!1)},Be.prototype.setColorMode=function(E){y.deepEqual(E.blendFunction,or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(E.blendFunction),this.blendColor.set(E.blendColor)),this.colorMask.set(E.mask)},Be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var tr=function(E){function I(C,Z,ut){var St=this;E.call(this),this.id=C,this.dispatcher=ut,this.on("data",function(At){At.dataType==="source"&&At.sourceDataType==="metadata"&&(St._sourceLoaded=!0),St._sourceLoaded&&!St._paused&&At.dataType==="source"&&At.sourceDataType==="content"&&(St.reload(),St.transform&&St.update(St.transform))}),this.on("error",function(){St._sourceErrored=!0}),this._source=function(At,te,we,Oe){var Ke=new Ht[te.type](At,te,we,Oe);if(Ke.id!==At)throw new Error("Expected Source id to be "+At+" instead of "+Ke.id);return y.bindAll(["load","abort","unload","serialize","prepare"],Ke),Ke}(C,Z,ut,this),this._tiles={},this._cache=new Jt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new y.SourceFeatureState}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.onAdd=function(C){this.map=C,this._maxTileCacheSize=C?C._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(C)},I.prototype.onRemove=function(C){this._source&&this._source.onRemove&&this._source.onRemove(C)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var C in this._tiles){var Z=this._tiles[C];if(Z.state!=="loaded"&&Z.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var C=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,C&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(C,Z){return this._source.loadTile(C,Z)},I.prototype._unloadTile=function(C){if(this._source.unloadTile)return this._source.unloadTile(C,function(){})},I.prototype._abortTile=function(C){if(this._source.abortTile)return this._source.abortTile(C,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(C){for(var Z in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ut=this._tiles[Z];ut.upload(C),ut.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return y.values(this._tiles).map(function(C){return C.tileID}).sort(Mr).map(function(C){return C.key})},I.prototype.getRenderableIds=function(C){var Z=this,ut=[];for(var St in this._tiles)this._isIdRenderable(St,C)&&ut.push(this._tiles[St]);return C?ut.sort(function(At,te){var we=At.tileID,Oe=te.tileID,Ke=new y.Point(we.canonical.x,we.canonical.y)._rotate(Z.transform.angle),nr=new y.Point(Oe.canonical.x,Oe.canonical.y)._rotate(Z.transform.angle);return we.overscaledZ-Oe.overscaledZ||nr.y-Ke.y||nr.x-Ke.x}).map(function(At){return At.tileID.key}):ut.map(function(At){return At.tileID}).sort(Mr).map(function(At){return At.key})},I.prototype.hasRenderableParent=function(C){var Z=this.findLoadedParent(C,0);return!!Z&&this._isIdRenderable(Z.tileID.key)},I.prototype._isIdRenderable=function(C,Z){return this._tiles[C]&&this._tiles[C].hasData()&&!this._coveredTiles[C]&&(Z||!this._tiles[C].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var C in this._cache.reset(),this._tiles)this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading")},I.prototype._reloadTile=function(C,Z){var ut=this._tiles[C];ut&&(ut.state!=="loading"&&(ut.state=Z),this._loadTile(ut,this._tileLoaded.bind(this,ut,C,Z)))},I.prototype._tileLoaded=function(C,Z,ut,St){if(St)return C.state="errored",void(St.status!==404?this._source.fire(new y.ErrorEvent(St,{tile:C})):this.update(this.transform));C.timeAdded=y.browser.now(),ut==="expired"&&(C.refreshedUponExpiration=!0),this._setTileReloadTimer(Z,C),this.getSource().type==="raster-dem"&&C.dem&&this._backfillDEM(C),this._state.initializeTileState(C,this.map?this.map.painter:null),this._source.fire(new y.Event("data",{dataType:"source",tile:C,coord:C.tileID}))},I.prototype._backfillDEM=function(C){for(var Z=this.getRenderableIds(),ut=0;ut<Z.length;ut++){var St=Z[ut];if(C.neighboringTiles&&C.neighboringTiles[St]){var At=this.getTileByID(St);te(C,At),te(At,C)}}function te(we,Oe){we.needsHillshadePrepare=!0;var Ke=Oe.tileID.canonical.x-we.tileID.canonical.x,nr=Oe.tileID.canonical.y-we.tileID.canonical.y,$e=Math.pow(2,we.tileID.canonical.z),pr=Oe.tileID.key;Ke===0&&nr===0||Math.abs(nr)>1||(Math.abs(Ke)>1&&(Math.abs(Ke+$e)===1?Ke+=$e:Math.abs(Ke-$e)===1&&(Ke-=$e)),Oe.dem&&we.dem&&(we.dem.backfillBorder(Oe.dem,Ke,nr),we.neighboringTiles&&we.neighboringTiles[pr]&&(we.neighboringTiles[pr].backfilled=!0)))}},I.prototype.getTile=function(C){return this.getTileByID(C.key)},I.prototype.getTileByID=function(C){return this._tiles[C]},I.prototype._retainLoadedChildren=function(C,Z,ut,St){for(var At in this._tiles){var te=this._tiles[At];if(!(St[At]||!te.hasData()||te.tileID.overscaledZ<=Z||te.tileID.overscaledZ>ut)){for(var we=te.tileID;te&&te.tileID.overscaledZ>Z+1;){var Oe=te.tileID.scaledTo(te.tileID.overscaledZ-1);(te=this._tiles[Oe.key])&&te.hasData()&&(we=Oe)}for(var Ke=we;Ke.overscaledZ>Z;)if(C[(Ke=Ke.scaledTo(Ke.overscaledZ-1)).key]){St[we.key]=we;break}}}},I.prototype.findLoadedParent=function(C,Z){if(C.key in this._loadedParentTiles){var ut=this._loadedParentTiles[C.key];return ut&&ut.tileID.overscaledZ>=Z?ut:null}for(var St=C.overscaledZ-1;St>=Z;St--){var At=C.scaledTo(St),te=this._getLoadedTile(At);if(te)return te}},I.prototype._getLoadedTile=function(C){var Z=this._tiles[C.key];return Z&&Z.hasData()?Z:this._cache.getByKey(C.wrapped().key)},I.prototype.updateCacheSize=function(C){var Z=Math.ceil(C.width/this._source.tileSize)+1,ut=Math.ceil(C.height/this._source.tileSize)+1,St=Math.floor(Z*ut*5),At=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,St):St;this._cache.setMaxSize(At)},I.prototype.handleWrapJump=function(C){var Z=Math.round((C-(this._prevLng===void 0?C:this._prevLng))/360);if(this._prevLng=C,Z){var ut={};for(var St in this._tiles){var At=this._tiles[St];At.tileID=At.tileID.unwrapTo(At.tileID.wrap+Z),ut[At.tileID.key]=At}for(var te in this._tiles=ut,this._timers)clearTimeout(this._timers[te]),delete this._timers[te];for(var we in this._tiles)this._setTileReloadTimer(we,this._tiles[we])}},I.prototype.update=function(C){var Z=this;if(this.transform=C,this._sourceLoaded&&!this._paused){var ut;this.updateCacheSize(C),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ut=C.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(gi){return new y.OverscaledTileID(gi.canonical.z,gi.wrap,gi.canonical.z,gi.canonical.x,gi.canonical.y)}):(ut=C.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ut=ut.filter(function(gi){return Z._source.hasTile(gi)}))):ut=[];var St=C.coveringZoomLevel(this._source),At=Math.max(St-I.maxOverzooming,this._source.minzoom),te=Math.max(St+I.maxUnderzooming,this._source.minzoom),we=this._updateRetainedTiles(ut,St);if(Xr(this._source.type)){for(var Oe={},Ke={},nr=0,$e=Object.keys(we);nr<$e.length;nr+=1){var pr=$e[nr],Sr=we[pr],zr=this._tiles[pr];if(zr&&!(zr.fadeEndTime&&zr.fadeEndTime<=y.browser.now())){var dr=this.findLoadedParent(Sr,At);dr&&(this._addTile(dr.tileID),Oe[dr.tileID.key]=dr.tileID),Ke[pr]=Sr}}for(var Ur in this._retainLoadedChildren(Ke,St,te,we),Oe)we[Ur]||(this._coveredTiles[Ur]=!0,we[Ur]=Oe[Ur])}for(var en in we)this._tiles[en].clearFadeHold();for(var Sn=0,Zn=y.keysDifference(this._tiles,we);Sn<Zn.length;Sn+=1){var Pn=Zn[Sn],Fn=this._tiles[Pn];Fn.hasSymbolBuckets&&!Fn.holdingForFade()?Fn.setHoldDuration(this.map._fadeDuration):Fn.hasSymbolBuckets&&!Fn.symbolFadeFinished()||this._removeTile(Pn)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var C in this._tiles)this._tiles[C].holdingForFade()&&this._removeTile(C)},I.prototype._updateRetainedTiles=function(C,Z){for(var ut={},St={},At=Math.max(Z-I.maxOverzooming,this._source.minzoom),te=Math.max(Z+I.maxUnderzooming,this._source.minzoom),we={},Oe=0,Ke=C;Oe<Ke.length;Oe+=1){var nr=Ke[Oe],$e=this._addTile(nr);ut[nr.key]=nr,$e.hasData()||Z<this._source.maxzoom&&(we[nr.key]=nr)}this._retainLoadedChildren(we,Z,te,ut);for(var pr=0,Sr=C;pr<Sr.length;pr+=1){var zr=Sr[pr],dr=this._tiles[zr.key];if(!dr.hasData()){if(Z+1>this._source.maxzoom){var Ur=zr.children(this._source.maxzoom)[0],en=this.getTile(Ur);if(en&&en.hasData()){ut[Ur.key]=Ur;continue}}else{var Sn=zr.children(this._source.maxzoom);if(ut[Sn[0].key]&&ut[Sn[1].key]&&ut[Sn[2].key]&&ut[Sn[3].key])continue}for(var Zn=dr.wasRequested(),Pn=zr.overscaledZ-1;Pn>=At;--Pn){var Fn=zr.scaledTo(Pn);if(St[Fn.key]||(St[Fn.key]=!0,!(dr=this.getTile(Fn))&&Zn&&(dr=this._addTile(Fn)),dr&&(ut[Fn.key]=Fn,Zn=dr.wasRequested(),dr.hasData())))break}}}return ut},I.prototype._updateLoadedParentTileCache=function(){for(var C in this._loadedParentTiles={},this._tiles){for(var Z=[],ut=void 0,St=this._tiles[C].tileID;St.overscaledZ>0;){if(St.key in this._loadedParentTiles){ut=this._loadedParentTiles[St.key];break}Z.push(St.key);var At=St.scaledTo(St.overscaledZ-1);if(ut=this._getLoadedTile(At))break;St=At}for(var te=0,we=Z;te<we.length;te+=1)this._loadedParentTiles[we[te]]=ut}},I.prototype._addTile=function(C){var Z=this._tiles[C.key];if(Z)return Z;(Z=this._cache.getAndRemove(C))&&(this._setTileReloadTimer(C.key,Z),Z.tileID=C,this._state.initializeTileState(Z,this.map?this.map.painter:null),this._cacheTimers[C.key]&&(clearTimeout(this._cacheTimers[C.key]),delete this._cacheTimers[C.key],this._setTileReloadTimer(C.key,Z)));var ut=Boolean(Z);return ut||(Z=new y.Tile(C,this._source.tileSize*C.overscaleFactor()),this._loadTile(Z,this._tileLoaded.bind(this,Z,C.key,Z.state))),Z?(Z.uses++,this._tiles[C.key]=Z,ut||this._source.fire(new y.Event("dataloading",{tile:Z,coord:Z.tileID,dataType:"source"})),Z):null},I.prototype._setTileReloadTimer=function(C,Z){var ut=this;C in this._timers&&(clearTimeout(this._timers[C]),delete this._timers[C]);var St=Z.getExpiryTimeout();St&&(this._timers[C]=setTimeout(function(){ut._reloadTile(C,"expired"),delete ut._timers[C]},St))},I.prototype._removeTile=function(C){var Z=this._tiles[C];Z&&(Z.uses--,delete this._tiles[C],this._timers[C]&&(clearTimeout(this._timers[C]),delete this._timers[C]),Z.uses>0||(Z.hasData()&&Z.state!=="reloading"?this._cache.add(Z.tileID,Z,Z.getExpiryTimeout()):(Z.aborted=!0,this._abortTile(Z),this._unloadTile(Z))))},I.prototype.clearTiles=function(){for(var C in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(C);this._cache.reset()},I.prototype.tilesIn=function(C,Z,ut){var St=this,At=[],te=this.transform;if(!te)return At;for(var we=ut?te.getCameraQueryGeometry(C):C,Oe=C.map(function(Pn){return te.pointCoordinate(Pn)}),Ke=we.map(function(Pn){return te.pointCoordinate(Pn)}),nr=this.getIds(),$e=1/0,pr=1/0,Sr=-1/0,zr=-1/0,dr=0,Ur=Ke;dr<Ur.length;dr+=1){var en=Ur[dr];$e=Math.min($e,en.x),pr=Math.min(pr,en.y),Sr=Math.max(Sr,en.x),zr=Math.max(zr,en.y)}for(var Sn=function(Pn){var Fn=St._tiles[nr[Pn]];if(!Fn.holdingForFade()){var gi=Fn.tileID,Vi=Math.pow(2,te.zoom-Fn.tileID.overscaledZ),Hi=Z*Fn.queryPadding*y.EXTENT/Fn.tileSize/Vi,fa=[gi.getTilePoint(new y.MercatorCoordinate($e,pr)),gi.getTilePoint(new y.MercatorCoordinate(Sr,zr))];if(fa[0].x-Hi<y.EXTENT&&fa[0].y-Hi<y.EXTENT&&fa[1].x+Hi>=0&&fa[1].y+Hi>=0){var $a=Oe.map(function(so){return gi.getTilePoint(so)}),Qa=Ke.map(function(so){return gi.getTilePoint(so)});At.push({tile:Fn,tileID:gi,queryGeometry:$a,cameraQueryGeometry:Qa,scale:Vi})}}},Zn=0;Zn<nr.length;Zn++)Sn(Zn);return At},I.prototype.getVisibleCoordinates=function(C){for(var Z=this,ut=this.getRenderableIds(C).map(function(we){return Z._tiles[we].tileID}),St=0,At=ut;St<At.length;St+=1){var te=At[St];te.posMatrix=this.transform.calculatePosMatrix(te.toUnwrapped())}return ut},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Xr(this._source.type))for(var C in this._tiles){var Z=this._tiles[C];if(Z.fadeEndTime!==void 0&&Z.fadeEndTime>=y.browser.now())return!0}return!1},I.prototype.setFeatureState=function(C,Z,ut){this._state.updateState(C=C||"_geojsonTileLayer",Z,ut)},I.prototype.removeFeatureState=function(C,Z,ut){this._state.removeFeatureState(C=C||"_geojsonTileLayer",Z,ut)},I.prototype.getFeatureState=function(C,Z){return this._state.getState(C=C||"_geojsonTileLayer",Z)},I.prototype.setDependencies=function(C,Z,ut){var St=this._tiles[C];St&&St.setDependencies(Z,ut)},I.prototype.reloadTilesForDependencies=function(C,Z){for(var ut in this._tiles)this._tiles[ut].hasDependency(C,Z)&&this._reloadTile(ut,"reloading");this._cache.filter(function(St){return!St.hasDependency(C,Z)})},I}(y.Evented);function Mr(E,I){var C=Math.abs(2*E.wrap)-+(E.wrap<0),Z=Math.abs(2*I.wrap)-+(I.wrap<0);return E.overscaledZ-I.overscaledZ||Z-C||I.canonical.y-E.canonical.y||I.canonical.x-E.canonical.x}function Xr(E){return E==="raster"||E==="image"||E==="video"}function Zr(){return new y.window.Worker(Oh.workerUrl)}tr.maxOverzooming=10,tr.maxUnderzooming=3;var tn="mapboxgl_preloaded_worker_pool",_n=function(){this.active={}};_n.prototype.acquire=function(E){if(!this.workers)for(this.workers=[];this.workers.length<_n.workerCount;)this.workers.push(new Zr);return this.active[E]=!0,this.workers.slice()},_n.prototype.release=function(E){delete this.active[E],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},_n.prototype.isPreloaded=function(){return!!this.active[tn]},_n.prototype.numActive=function(){return Object.keys(this.active).length};var $n,si=Math.floor(y.browser.hardwareConcurrency/2);function Jr(){return $n||($n=new _n),$n}function Si(E,I){var C={};for(var Z in E)Z!=="ref"&&(C[Z]=E[Z]);return y.refProperties.forEach(function(ut){ut in I&&(C[ut]=I[ut])}),C}function Jn(E){E=E.slice();for(var I=Object.create(null),C=0;C<E.length;C++)I[E[C].id]=E[C];for(var Z=0;Z<E.length;Z++)"ref"in E[Z]&&(E[Z]=Si(E[Z],I[E[Z].ref]));return E}_n.workerCount=Math.max(Math.min(si,6),1);var yi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ka(E,I,C){C.push({command:yi.addSource,args:[E,I[E]]})}function ki(E,I,C){I.push({command:yi.removeSource,args:[E]}),C[E]=!0}function ga(E,I,C,Z){ki(E,C,Z),Ka(E,I,C)}function ko(E,I,C){var Z;for(Z in E[C])if(E[C].hasOwnProperty(Z)&&Z!=="data"&&!y.deepEqual(E[C][Z],I[C][Z]))return!1;for(Z in I[C])if(I[C].hasOwnProperty(Z)&&Z!=="data"&&!y.deepEqual(E[C][Z],I[C][Z]))return!1;return!0}function Ci(E,I,C,Z,ut,St){var At;for(At in I=I||{},E=E||{})E.hasOwnProperty(At)&&(y.deepEqual(E[At],I[At])||C.push({command:St,args:[Z,At,I[At],ut]}));for(At in I)I.hasOwnProperty(At)&&!E.hasOwnProperty(At)&&(y.deepEqual(E[At],I[At])||C.push({command:St,args:[Z,At,I[At],ut]}))}function po(E){return E.id}function oo(E,I){return E[I.id]=I,E}var cn=function(E,I){this.reset(E,I)};cn.prototype.reset=function(E,I){this.points=E||[],this._distances=[0];for(var C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},cn.prototype.lerp=function(E){if(this.points.length===1)return this.points[0];E=y.clamp(E,0,1);for(var I=1,C=this._distances[I],Z=E*this.paddedLength+this.padding;C<Z&&I<this._distances.length;)C=this._distances[++I];var ut=I-1,St=this._distances[ut],At=C-St,te=At>0?(Z-St)/At:0;return this.points[ut].mult(1-te).add(this.points[I].mult(te))};var vn=function(E,I,C){var Z=this.boxCells=[],ut=this.circleCells=[];this.xCellCount=Math.ceil(E/C),this.yCellCount=Math.ceil(I/C);for(var St=0;St<this.xCellCount*this.yCellCount;St++)Z.push([]),ut.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=E,this.height=I,this.xScale=this.xCellCount/E,this.yScale=this.yCellCount/I,this.boxUid=0,this.circleUid=0};function Wo(E,I,C,Z,ut){var St=y.create();return I?(y.scale(St,St,[1/ut,1/ut,1]),C||y.rotateZ(St,St,Z.angle)):y.multiply(St,Z.labelPlaneMatrix,E),St}function mo(E,I,C,Z,ut){if(I){var St=y.clone(E);return y.scale(St,St,[ut,ut,1]),C||y.rotateZ(St,St,-Z.angle),St}return Z.glCoordMatrix}function fo(E,I){var C=[E.x,E.y,0,1];de(C,C,I);var Z=C[3];return{point:new y.Point(C[0]/Z,C[1]/Z),signedDistanceFromCamera:Z}}function Po(E,I){return .5+E/I*.5}function vi(E,I){var C=E[0]/E[3],Z=E[1]/E[3];return C>=-I[0]&&C<=I[0]&&Z>=-I[1]&&Z<=I[1]}function pa(E,I,C,Z,ut,St,At,te){var we=Z?E.textSizeData:E.iconSizeData,Oe=y.evaluateSizeForZoom(we,C.transform.zoom),Ke=[256/C.width*2+1,256/C.height*2+1],nr=Z?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;nr.clear();for(var $e=E.lineVertexArray,pr=Z?E.text.placedSymbolArray:E.icon.placedSymbolArray,Sr=C.transform.width/C.transform.height,zr=!1,dr=0;dr<pr.length;dr++){var Ur=pr.get(dr);if(Ur.hidden||Ur.writingMode===y.WritingMode.vertical&&!zr)Wt(Ur.numGlyphs,nr);else{zr=!1;var en=[Ur.anchorX,Ur.anchorY,0,1];if(y.transformMat4(en,en,I),vi(en,Ke)){var Sn=Po(C.transform.cameraToCenterDistance,en[3]),Zn=y.evaluateSizeForFeature(we,Oe,Ur),Pn=At?Zn/Sn:Zn*Sn,Fn=new y.Point(Ur.anchorX,Ur.anchorY),gi=fo(Fn,ut).point,Vi={},Hi=Tt(Ur,Pn,!1,te,I,ut,St,E.glyphOffsetArray,$e,nr,gi,Fn,Vi,Sr);zr=Hi.useVertical,(Hi.notEnoughRoom||zr||Hi.needsFlipping&&Tt(Ur,Pn,!0,te,I,ut,St,E.glyphOffsetArray,$e,nr,gi,Fn,Vi,Sr).notEnoughRoom)&&Wt(Ur.numGlyphs,nr)}else Wt(Ur.numGlyphs,nr)}}Z?E.text.dynamicLayoutVertexBuffer.updateData(nr):E.icon.dynamicLayoutVertexBuffer.updateData(nr)}function An(E,I,C,Z,ut,St,At,te,we,Oe,Ke){var nr=te.glyphStartIndex+te.numGlyphs,$e=te.lineStartIndex,pr=te.lineStartIndex+te.lineLength,Sr=I.getoffsetX(te.glyphStartIndex),zr=I.getoffsetX(nr-1),dr=he(E*Sr,C,Z,ut,St,At,te.segment,$e,pr,we,Oe,Ke);if(!dr)return null;var Ur=he(E*zr,C,Z,ut,St,At,te.segment,$e,pr,we,Oe,Ke);return Ur?{first:dr,last:Ur}:null}function Pe(E,I,C,Z){return E===y.WritingMode.horizontal&&Math.abs(C.y-I.y)>Math.abs(C.x-I.x)*Z?{useVertical:!0}:(E===y.WritingMode.vertical?I.y<C.y:I.x>C.x)?{needsFlipping:!0}:null}function Tt(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr,$e,pr){var Sr,zr=I/24,dr=E.lineOffsetX*zr,Ur=E.lineOffsetY*zr;if(E.numGlyphs>1){var en=E.glyphStartIndex+E.numGlyphs,Sn=E.lineStartIndex,Zn=E.lineStartIndex+E.lineLength,Pn=An(zr,te,dr,Ur,C,Ke,nr,E,we,St,$e);if(!Pn)return{notEnoughRoom:!0};var Fn=fo(Pn.first.point,At).point,gi=fo(Pn.last.point,At).point;if(Z&&!C){var Vi=Pe(E.writingMode,Fn,gi,pr);if(Vi)return Vi}Sr=[Pn.first];for(var Hi=E.glyphStartIndex+1;Hi<en-1;Hi++)Sr.push(he(zr*te.getoffsetX(Hi),dr,Ur,C,Ke,nr,E.segment,Sn,Zn,we,St,$e));Sr.push(Pn.last)}else{if(Z&&!C){var fa=fo(nr,ut).point,$a=E.lineStartIndex+E.segment+1,Qa=new y.Point(we.getx($a),we.gety($a)),so=fo(Qa,ut),No=so.signedDistanceFromCamera>0?so.point:ae(nr,Qa,fa,1,ut),ea=Pe(E.writingMode,fa,No,pr);if(ea)return ea}var Eo=he(zr*te.getoffsetX(E.glyphStartIndex),dr,Ur,C,Ke,nr,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,we,St,$e);if(!Eo)return{notEnoughRoom:!0};Sr=[Eo]}for(var Ro=0,bo=Sr;Ro<bo.length;Ro+=1){var ho=bo[Ro];y.addDynamicAttributes(Oe,ho.point,ho.angle)}return{}}function ae(E,I,C,Z,ut){var St=fo(E.add(E.sub(I)._unit()),ut).point,At=C.sub(St);return C.add(At._mult(Z/At.mag()))}function he(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr){var $e=Z?E-I:E+I,pr=$e>0?1:-1,Sr=0;Z&&(pr*=-1,Sr=Math.PI),pr<0&&(Sr+=Math.PI);for(var zr=pr>0?te+At:te+At+1,dr=ut,Ur=ut,en=0,Sn=0,Zn=Math.abs($e),Pn=[];en+Sn<=Zn;){if((zr+=pr)<te||zr>=we)return null;if(Ur=dr,Pn.push(dr),(dr=nr[zr])===void 0){var Fn=new y.Point(Oe.getx(zr),Oe.gety(zr)),gi=fo(Fn,Ke);if(gi.signedDistanceFromCamera>0)dr=nr[zr]=gi.point;else{var Vi=zr-pr;dr=ae(en===0?St:new y.Point(Oe.getx(Vi),Oe.gety(Vi)),Fn,Ur,Zn-en+1,Ke)}}en+=Sn,Sn=Ur.dist(dr)}var Hi=(Zn-en)/Sn,fa=dr.sub(Ur),$a=fa.mult(Hi)._add(Ur);$a._add(fa._unit()._perp()._mult(C*pr));var Qa=Sr+Math.atan2(dr.y-Ur.y,dr.x-Ur.x);return Pn.push($a),{point:$a,angle:Qa,path:Pn}}vn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},vn.prototype.insert=function(E,I,C,Z,ut){this._forEachCell(I,C,Z,ut,this._insertBoxCell,this.boxUid++),this.boxKeys.push(E),this.bboxes.push(I),this.bboxes.push(C),this.bboxes.push(Z),this.bboxes.push(ut)},vn.prototype.insertCircle=function(E,I,C,Z){this._forEachCell(I-Z,C-Z,I+Z,C+Z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(E),this.circles.push(I),this.circles.push(C),this.circles.push(Z)},vn.prototype._insertBoxCell=function(E,I,C,Z,ut,St){this.boxCells[ut].push(St)},vn.prototype._insertCircleCell=function(E,I,C,Z,ut,St){this.circleCells[ut].push(St)},vn.prototype._query=function(E,I,C,Z,ut,St){if(C<0||E>this.width||Z<0||I>this.height)return!ut&&[];var At=[];if(E<=0&&I<=0&&this.width<=C&&this.height<=Z){if(ut)return!0;for(var te=0;te<this.boxKeys.length;te++)At.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(var we=0;we<this.circleKeys.length;we++){var Oe=this.circles[3*we],Ke=this.circles[3*we+1],nr=this.circles[3*we+2];At.push({key:this.circleKeys[we],x1:Oe-nr,y1:Ke-nr,x2:Oe+nr,y2:Ke+nr})}return St?At.filter(St):At}return this._forEachCell(E,I,C,Z,this._queryCell,At,{hitTest:ut,seenUids:{box:{},circle:{}}},St),ut?At.length>0:At},vn.prototype._queryCircle=function(E,I,C,Z,ut){var St=E-C,At=E+C,te=I-C,we=I+C;if(At<0||St>this.width||we<0||te>this.height)return!Z&&[];var Oe=[];return this._forEachCell(St,te,At,we,this._queryCellCircle,Oe,{hitTest:Z,circle:{x:E,y:I,radius:C},seenUids:{box:{},circle:{}}},ut),Z?Oe.length>0:Oe},vn.prototype.query=function(E,I,C,Z,ut){return this._query(E,I,C,Z,!1,ut)},vn.prototype.hitTest=function(E,I,C,Z,ut){return this._query(E,I,C,Z,!0,ut)},vn.prototype.hitTestCircle=function(E,I,C,Z){return this._queryCircle(E,I,C,!0,Z)},vn.prototype._queryCell=function(E,I,C,Z,ut,St,At,te){var we=At.seenUids,Oe=this.boxCells[ut];if(Oe!==null)for(var Ke=this.bboxes,nr=0,$e=Oe;nr<$e.length;nr+=1){var pr=$e[nr];if(!we.box[pr]){we.box[pr]=!0;var Sr=4*pr;if(E<=Ke[Sr+2]&&I<=Ke[Sr+3]&&C>=Ke[Sr+0]&&Z>=Ke[Sr+1]&&(!te||te(this.boxKeys[pr]))){if(At.hitTest)return St.push(!0),!0;St.push({key:this.boxKeys[pr],x1:Ke[Sr],y1:Ke[Sr+1],x2:Ke[Sr+2],y2:Ke[Sr+3]})}}}var zr=this.circleCells[ut];if(zr!==null)for(var dr=this.circles,Ur=0,en=zr;Ur<en.length;Ur+=1){var Sn=en[Ur];if(!we.circle[Sn]){we.circle[Sn]=!0;var Zn=3*Sn;if(this._circleAndRectCollide(dr[Zn],dr[Zn+1],dr[Zn+2],E,I,C,Z)&&(!te||te(this.circleKeys[Sn]))){if(At.hitTest)return St.push(!0),!0;var Pn=dr[Zn],Fn=dr[Zn+1],gi=dr[Zn+2];St.push({key:this.circleKeys[Sn],x1:Pn-gi,y1:Fn-gi,x2:Pn+gi,y2:Fn+gi})}}}},vn.prototype._queryCellCircle=function(E,I,C,Z,ut,St,At,te){var we=At.circle,Oe=At.seenUids,Ke=this.boxCells[ut];if(Ke!==null)for(var nr=this.bboxes,$e=0,pr=Ke;$e<pr.length;$e+=1){var Sr=pr[$e];if(!Oe.box[Sr]){Oe.box[Sr]=!0;var zr=4*Sr;if(this._circleAndRectCollide(we.x,we.y,we.radius,nr[zr+0],nr[zr+1],nr[zr+2],nr[zr+3])&&(!te||te(this.boxKeys[Sr])))return St.push(!0),!0}}var dr=this.circleCells[ut];if(dr!==null)for(var Ur=this.circles,en=0,Sn=dr;en<Sn.length;en+=1){var Zn=Sn[en];if(!Oe.circle[Zn]){Oe.circle[Zn]=!0;var Pn=3*Zn;if(this._circlesCollide(Ur[Pn],Ur[Pn+1],Ur[Pn+2],we.x,we.y,we.radius)&&(!te||te(this.circleKeys[Zn])))return St.push(!0),!0}}},vn.prototype._forEachCell=function(E,I,C,Z,ut,St,At,te){for(var we=this._convertToXCellCoord(E),Oe=this._convertToYCellCoord(I),Ke=this._convertToXCellCoord(C),nr=this._convertToYCellCoord(Z),$e=we;$e<=Ke;$e++)for(var pr=Oe;pr<=nr;pr++)if(ut.call(this,E,I,C,Z,this.xCellCount*pr+$e,St,At,te))return},vn.prototype._convertToXCellCoord=function(E){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(E*this.xScale)))},vn.prototype._convertToYCellCoord=function(E){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(E*this.yScale)))},vn.prototype._circlesCollide=function(E,I,C,Z,ut,St){var At=Z-E,te=ut-I,we=C+St;return we*we>At*At+te*te},vn.prototype._circleAndRectCollide=function(E,I,C,Z,ut,St,At){var te=(St-Z)/2,we=Math.abs(E-(Z+te));if(we>te+C)return!1;var Oe=(At-ut)/2,Ke=Math.abs(I-(ut+Oe));if(Ke>Oe+C)return!1;if(we<=te||Ke<=Oe)return!0;var nr=we-te,$e=Ke-Oe;return nr*nr+$e*$e<=C*C};var zt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wt(E,I){for(var C=0;C<E;C++){var Z=I.length;I.resize(Z+4),I.float32.set(zt,3*Z)}}function de(E,I,C){var Z=I[0],ut=I[1];return E[0]=C[0]*Z+C[4]*ut+C[12],E[1]=C[1]*Z+C[5]*ut+C[13],E[3]=C[3]*Z+C[7]*ut+C[15],E}var Se=function(E,I,C){I===void 0&&(I=new vn(E.width+200,E.height+200,25)),C===void 0&&(C=new vn(E.width+200,E.height+200,25)),this.transform=E,this.grid=I,this.ignoredGrid=C,this.pitchfactor=Math.cos(E._pitch)*E.cameraToCenterDistance,this.screenRightBoundary=E.width+100,this.screenBottomBoundary=E.height+100,this.gridRightBoundary=E.width+200,this.gridBottomBoundary=E.height+200};function Ae(E,I,C){return I*(y.EXTENT/(E.tileSize*Math.pow(2,C-E.tileID.overscaledZ)))}Se.prototype.placeCollisionBox=function(E,I,C,Z,ut){var St=this.projectAndGetPerspectiveRatio(Z,E.anchorPointX,E.anchorPointY),At=C*St.perspectiveRatio,te=E.x1*At+St.point.x,we=E.y1*At+St.point.y,Oe=E.x2*At+St.point.x,Ke=E.y2*At+St.point.y;return!this.isInsideGrid(te,we,Oe,Ke)||!I&&this.grid.hitTest(te,we,Oe,Ke,ut)?{box:[],offscreen:!1}:{box:[te,we,Oe,Ke],offscreen:this.isOffscreen(te,we,Oe,Ke)}},Se.prototype.placeCollisionCircles=function(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr,$e){var pr=[],Sr=new y.Point(I.anchorX,I.anchorY),zr=fo(Sr,St),dr=Po(this.transform.cameraToCenterDistance,zr.signedDistanceFromCamera),Ur=(Oe?ut/dr:ut*dr)/y.ONE_EM,en=fo(Sr,At).point,Sn=An(Ur,Z,I.lineOffsetX*Ur,I.lineOffsetY*Ur,!1,en,Sr,I,C,At,{}),Zn=!1,Pn=!1,Fn=!0;if(Sn){for(var gi=.5*nr*dr+$e,Vi=new y.Point(-100,-100),Hi=new y.Point(this.screenRightBoundary,this.screenBottomBoundary),fa=new cn,$a=Sn.first,Qa=Sn.last,so=[],No=$a.path.length-1;No>=1;No--)so.push($a.path[No]);for(var ea=1;ea<Qa.path.length;ea++)so.push(Qa.path[ea]);var Eo=2.5*gi;if(te){var Ro=so.map(function(Mc){return fo(Mc,te)});so=Ro.some(function(Mc){return Mc.signedDistanceFromCamera<=0})?[]:Ro.map(function(Mc){return Mc.point})}var bo=[];if(so.length>0){for(var ho=so[0].clone(),zo=so[0].clone(),yo=1;yo<so.length;yo++)ho.x=Math.min(ho.x,so[yo].x),ho.y=Math.min(ho.y,so[yo].y),zo.x=Math.max(zo.x,so[yo].x),zo.y=Math.max(zo.y,so[yo].y);bo=ho.x>=Vi.x&&zo.x<=Hi.x&&ho.y>=Vi.y&&zo.y<=Hi.y?[so]:zo.x<Vi.x||ho.x>Hi.x||zo.y<Vi.y||ho.y>Hi.y?[]:y.clipLine([so],Vi.x,Vi.y,Hi.x,Hi.y)}for(var uo=0,tu=bo;uo<tu.length;uo+=1){var mu;fa.reset(tu[uo],.25*gi),mu=fa.length<=.5*gi?1:Math.ceil(fa.paddedLength/Eo)+1;for(var al=0;al<mu;al++){var vl=al/Math.max(mu-1,1),du=fa.lerp(vl),Nu=du.x+100,Jl=du.y+100;pr.push(Nu,Jl,gi,0);var jl=Nu-gi,tc=Jl-gi,cu=Nu+gi,Ac=Jl+gi;if(Fn=Fn&&this.isOffscreen(jl,tc,cu,Ac),Pn=Pn||this.isInsideGrid(jl,tc,cu,Ac),!E&&this.grid.hitTestCircle(Nu,Jl,gi,Ke)&&(Zn=!0,!we))return{circles:[],offscreen:!1,collisionDetected:Zn}}}}return{circles:!we&&Zn||!Pn?[]:pr,offscreen:Fn,collisionDetected:Zn}},Se.prototype.queryRenderedSymbols=function(E){if(E.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],C=1/0,Z=1/0,ut=-1/0,St=-1/0,At=0,te=E;At<te.length;At+=1){var we=te[At],Oe=new y.Point(we.x+100,we.y+100);C=Math.min(C,Oe.x),Z=Math.min(Z,Oe.y),ut=Math.max(ut,Oe.x),St=Math.max(St,Oe.y),I.push(Oe)}for(var Ke={},nr={},$e=0,pr=this.grid.query(C,Z,ut,St).concat(this.ignoredGrid.query(C,Z,ut,St));$e<pr.length;$e+=1){var Sr=pr[$e],zr=Sr.key;if(Ke[zr.bucketInstanceId]===void 0&&(Ke[zr.bucketInstanceId]={}),!Ke[zr.bucketInstanceId][zr.featureIndex]){var dr=[new y.Point(Sr.x1,Sr.y1),new y.Point(Sr.x2,Sr.y1),new y.Point(Sr.x2,Sr.y2),new y.Point(Sr.x1,Sr.y2)];y.polygonIntersectsPolygon(I,dr)&&(Ke[zr.bucketInstanceId][zr.featureIndex]=!0,nr[zr.bucketInstanceId]===void 0&&(nr[zr.bucketInstanceId]=[]),nr[zr.bucketInstanceId].push(zr.featureIndex))}}return nr},Se.prototype.insertCollisionBox=function(E,I,C,Z,ut){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:Z,collisionGroupID:ut},E[0],E[1],E[2],E[3])},Se.prototype.insertCollisionCircles=function(E,I,C,Z,ut){for(var St=I?this.ignoredGrid:this.grid,At={bucketInstanceId:C,featureIndex:Z,collisionGroupID:ut},te=0;te<E.length;te+=4)St.insertCircle(At,E[te],E[te+1],E[te+2])},Se.prototype.projectAndGetPerspectiveRatio=function(E,I,C){var Z=[I,C,0,1];return de(Z,Z,E),{point:new y.Point((Z[0]/Z[3]+1)/2*this.transform.width+100,(-Z[1]/Z[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/Z[3]*.5}},Se.prototype.isOffscreen=function(E,I,C,Z){return C<100||E>=this.screenRightBoundary||Z<100||I>this.screenBottomBoundary},Se.prototype.isInsideGrid=function(E,I,C,Z){return C>=0&&E<this.gridRightBoundary&&Z>=0&&I<this.gridBottomBoundary},Se.prototype.getViewportMatrix=function(){var E=y.identity([]);return y.translate(E,E,[-100,-100,0]),E};var He=function(E,I,C,Z){this.opacity=E?Math.max(0,Math.min(1,E.opacity+(E.placed?I:-I))):Z&&C?1:0,this.placed=C};He.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var _r=function(E,I,C,Z,ut){this.text=new He(E?E.text:null,I,C,ut),this.icon=new He(E?E.icon:null,I,Z,ut)};_r.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Lr=function(E,I,C){this.text=E,this.icon=I,this.skipFade=C},wn=function(){this.invProjMatrix=y.create(),this.viewportMatrix=y.create(),this.circles=[]},Kr=function(E,I,C,Z,ut){this.bucketInstanceId=E,this.featureIndex=I,this.sourceLayerIndex=C,this.bucketIndex=Z,this.tileID=ut},Fr=function(E){this.crossSourceCollisions=E,this.maxGroupID=0,this.collisionGroups={}};function pi(E,I,C,Z,ut){var St=y.getAnchorAlignment(E),At=-(St.horizontalAlign-.5)*I,te=-(St.verticalAlign-.5)*C,we=y.evaluateVariableOffset(E,Z);return new y.Point(At+we[0]*ut,te+we[1]*ut)}function Pi(E,I,C,Z,ut,St){var At=E.x1,te=E.x2,we=E.y1,Oe=E.y2,Ke=E.anchorPointX,nr=E.anchorPointY,$e=new y.Point(I,C);return Z&&$e._rotate(ut?St:-St),{x1:At+$e.x,y1:we+$e.y,x2:te+$e.x,y2:Oe+$e.y,anchorPointX:Ke,anchorPointY:nr}}Fr.prototype.get=function(E){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[E]){var I=++this.maxGroupID;this.collisionGroups[E]={ID:I,predicate:function(C){return C.collisionGroupID===I}}}return this.collisionGroups[E]};var ca=function(E,I,C,Z){this.transform=E.clone(),this.collisionIndex=new Se(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=I,this.retainedQueryData={},this.collisionGroups=new Fr(C),this.collisionCircleArrays={},this.prevPlacement=Z,Z&&(Z.prevPlacement=void 0),this.placedOrientations={}};function va(E,I,C,Z,ut){E.emplaceBack(I?1:0,C?1:0,Z||0,ut||0),E.emplaceBack(I?1:0,C?1:0,Z||0,ut||0),E.emplaceBack(I?1:0,C?1:0,Z||0,ut||0),E.emplaceBack(I?1:0,C?1:0,Z||0,ut||0)}ca.prototype.getBucketParts=function(E,I,C,Z){var ut=C.getBucket(I),St=C.latestFeatureIndex;if(ut&&St&&I.id===ut.layerIds[0]){var At=C.collisionBoxArray,te=ut.layers[0].layout,we=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Oe=C.tileSize/y.EXTENT,Ke=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),nr=te.get("text-pitch-alignment")==="map",$e=te.get("text-rotation-alignment")==="map",pr=Ae(C,1,this.transform.zoom),Sr=Wo(Ke,nr,$e,this.transform,pr),zr=null;if(nr){var dr=mo(Ke,nr,$e,this.transform,pr);zr=y.multiply([],this.transform.labelPlaneMatrix,dr)}this.retainedQueryData[ut.bucketInstanceId]=new Kr(ut.bucketInstanceId,St,ut.sourceLayerIndex,ut.index,C.tileID);var Ur={bucket:ut,layout:te,posMatrix:Ke,textLabelPlaneMatrix:Sr,labelToScreenMatrix:zr,scale:we,textPixelRatio:Oe,holdingForFade:C.holdingForFade(),collisionBoxArray:At,partiallyEvaluatedTextSize:y.evaluateSizeForZoom(ut.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ut.sourceID)};if(Z)for(var en=0,Sn=ut.sortKeyRanges;en<Sn.length;en+=1){var Zn=Sn[en];E.push({sortKey:Zn.sortKey,symbolInstanceStart:Zn.symbolInstanceStart,symbolInstanceEnd:Zn.symbolInstanceEnd,parameters:Ur})}else E.push({symbolInstanceStart:0,symbolInstanceEnd:ut.symbolInstances.length,parameters:Ur})}},ca.prototype.attemptAnchorPlacement=function(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr,$e,pr,Sr){var zr,dr=[nr.textOffset0,nr.textOffset1],Ur=pi(E,C,Z,dr,ut),en=this.collisionIndex.placeCollisionBox(Pi(I,Ur.x,Ur.y,St,At,this.transform.angle),Ke,te,we,Oe.predicate);if(!Sr||this.collisionIndex.placeCollisionBox(Pi(Sr,Ur.x,Ur.y,St,At,this.transform.angle),Ke,te,we,Oe.predicate).box.length!==0)return en.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID].text&&(zr=this.prevPlacement.variableOffsets[nr.crossTileID].anchor),this.variableOffsets[nr.crossTileID]={textOffset:dr,width:C,height:Z,anchor:E,textBoxScale:ut,prevAnchor:zr},this.markUsedJustification($e,E,nr,pr),$e.allowVerticalPlacement&&(this.markUsedOrientation($e,pr,nr),this.placedOrientations[nr.crossTileID]=pr),{shift:Ur,placedGlyphBoxes:en}):void 0},ca.prototype.placeLayerBucketPart=function(E,I,C){var Z=this,ut=E.parameters,St=ut.bucket,At=ut.layout,te=ut.posMatrix,we=ut.textLabelPlaneMatrix,Oe=ut.labelToScreenMatrix,Ke=ut.textPixelRatio,nr=ut.holdingForFade,$e=ut.collisionBoxArray,pr=ut.partiallyEvaluatedTextSize,Sr=ut.collisionGroup,zr=At.get("text-optional"),dr=At.get("icon-optional"),Ur=At.get("text-allow-overlap"),en=At.get("icon-allow-overlap"),Sn=At.get("text-rotation-alignment")==="map",Zn=At.get("text-pitch-alignment")==="map",Pn=At.get("icon-text-fit")!=="none",Fn=At.get("symbol-z-order")==="viewport-y",gi=Ur&&(en||!St.hasIconData()||dr),Vi=en&&(Ur||!St.hasTextData()||zr);!St.collisionArrays&&$e&&St.deserializeCollisionBoxes($e);var Hi=function(ea,Eo){if(!I[ea.crossTileID])if(nr)Z.placements[ea.crossTileID]=new Lr(!1,!1,!1);else{var Ro,bo=!1,ho=!1,zo=!0,yo=null,uo={box:null,offscreen:null},tu={box:null,offscreen:null},mu=null,al=null,vl=0,du=0,Nu=0;Eo.textFeatureIndex?vl=Eo.textFeatureIndex:ea.useRuntimeCollisionCircles&&(vl=ea.featureIndex),Eo.verticalTextFeatureIndex&&(du=Eo.verticalTextFeatureIndex);var Jl=Eo.textBox;if(Jl){var jl=function(Ps){var mc=y.WritingMode.horizontal;if(St.allowVerticalPlacement&&!Ps&&Z.prevPlacement){var Xl=Z.prevPlacement.placedOrientations[ea.crossTileID];Xl&&(Z.placedOrientations[ea.crossTileID]=Xl,Z.markUsedOrientation(St,mc=Xl,ea))}return mc},tc=function(Ps,mc){if(St.allowVerticalPlacement&&ea.numVerticalGlyphVertices>0&&Eo.verticalTextBox)for(var Xl=0,Pf=St.writingModes;Xl<Pf.length&&(Pf[Xl]===y.WritingMode.vertical?(uo=mc(),tu=uo):uo=Ps(),!(uo&&uo.box&&uo.box.length));Xl+=1);else uo=Ps()};if(At.get("text-variable-anchor")){var cu=At.get("text-variable-anchor");if(Z.prevPlacement&&Z.prevPlacement.variableOffsets[ea.crossTileID]){var Ac=Z.prevPlacement.variableOffsets[ea.crossTileID];cu.indexOf(Ac.anchor)>0&&(cu=cu.filter(function(Ps){return Ps!==Ac.anchor})).unshift(Ac.anchor)}var Mc=function(Ps,mc,Xl){for(var Pf=Ps.x2-Ps.x1,up=Ps.y2-Ps.y1,Dp=ea.textBoxScale,Bp=Pn&&!en?mc:null,Tc={box:[],offscreen:!1},lp=Ur?2*cu.length:cu.length,yc=0;yc<lp;++yc){var If=Z.attemptAnchorPlacement(cu[yc%cu.length],Ps,Pf,up,Dp,Sn,Zn,Ke,te,Sr,yc>=cu.length,ea,St,Xl,Bp);if(If&&(Tc=If.placedGlyphBoxes)&&Tc.box&&Tc.box.length){bo=!0,yo=If.shift;break}}return Tc};tc(function(){return Mc(Jl,Eo.iconBox,y.WritingMode.horizontal)},function(){var Ps=Eo.verticalTextBox;return St.allowVerticalPlacement&&!(uo&&uo.box&&uo.box.length)&&ea.numVerticalGlyphVertices>0&&Ps?Mc(Ps,Eo.verticalIconBox,y.WritingMode.vertical):{box:null,offscreen:null}}),uo&&(bo=uo.box,zo=uo.offscreen);var Lh=jl(uo&&uo.box);if(!bo&&Z.prevPlacement){var eh=Z.prevPlacement.variableOffsets[ea.crossTileID];eh&&(Z.variableOffsets[ea.crossTileID]=eh,Z.markUsedJustification(St,eh.anchor,ea,Lh))}}else{var vc=function(Ps,mc){var Xl=Z.collisionIndex.placeCollisionBox(Ps,Ur,Ke,te,Sr.predicate);return Xl&&Xl.box&&Xl.box.length&&(Z.markUsedOrientation(St,mc,ea),Z.placedOrientations[ea.crossTileID]=mc),Xl};tc(function(){return vc(Jl,y.WritingMode.horizontal)},function(){var Ps=Eo.verticalTextBox;return St.allowVerticalPlacement&&ea.numVerticalGlyphVertices>0&&Ps?vc(Ps,y.WritingMode.vertical):{box:null,offscreen:null}}),jl(uo&&uo.box&&uo.box.length)}}if(bo=(Ro=uo)&&Ro.box&&Ro.box.length>0,zo=Ro&&Ro.offscreen,ea.useRuntimeCollisionCircles){var Mf=St.text.placedSymbolArray.get(ea.centerJustifiedTextSymbolIndex),sp=y.evaluateSizeForFeature(St.textSizeData,pr,Mf),gc=At.get("text-padding");mu=Z.collisionIndex.placeCollisionCircles(Ur,Mf,St.lineVertexArray,St.glyphOffsetArray,sp,te,we,Oe,C,Zn,Sr.predicate,ea.collisionCircleDiameter,gc),bo=Ur||mu.circles.length>0&&!mu.collisionDetected,zo=zo&&mu.offscreen}if(Eo.iconFeatureIndex&&(Nu=Eo.iconFeatureIndex),Eo.iconBox){var rh=function(Ps){var mc=Pn&&yo?Pi(Ps,yo.x,yo.y,Sn,Zn,Z.transform.angle):Ps;return Z.collisionIndex.placeCollisionBox(mc,en,Ke,te,Sr.predicate)};ho=tu&&tu.box&&tu.box.length&&Eo.verticalIconBox?(al=rh(Eo.verticalIconBox)).box.length>0:(al=rh(Eo.iconBox)).box.length>0,zo=zo&&al.offscreen}var Zc=zr||ea.numHorizontalGlyphVertices===0&&ea.numVerticalGlyphVertices===0,Ju=dr||ea.numIconVertices===0;if(Zc||Ju?Ju?Zc||(ho=ho&&bo):bo=ho&&bo:ho=bo=ho&&bo,bo&&Ro&&Ro.box&&Z.collisionIndex.insertCollisionBox(Ro.box,At.get("text-ignore-placement"),St.bucketInstanceId,tu&&tu.box&&du?du:vl,Sr.ID),ho&&al&&Z.collisionIndex.insertCollisionBox(al.box,At.get("icon-ignore-placement"),St.bucketInstanceId,Nu,Sr.ID),mu&&(bo&&Z.collisionIndex.insertCollisionCircles(mu.circles,At.get("text-ignore-placement"),St.bucketInstanceId,vl,Sr.ID),C)){var Kc=St.bucketInstanceId,Tf=Z.collisionCircleArrays[Kc];Tf===void 0&&(Tf=Z.collisionCircleArrays[Kc]=new wn);for(var df=0;df<mu.circles.length;df+=4)Tf.circles.push(mu.circles[df+0]),Tf.circles.push(mu.circles[df+1]),Tf.circles.push(mu.circles[df+2]),Tf.circles.push(mu.collisionDetected?1:0)}Z.placements[ea.crossTileID]=new Lr(bo||gi,ho||Vi,zo||St.justReloaded),I[ea.crossTileID]=!0}};if(Fn)for(var fa=St.getSortedSymbolIndexes(this.transform.angle),$a=fa.length-1;$a>=0;--$a){var Qa=fa[$a];Hi(St.symbolInstances.get(Qa),St.collisionArrays[Qa])}else for(var so=E.symbolInstanceStart;so<E.symbolInstanceEnd;so++)Hi(St.symbolInstances.get(so),St.collisionArrays[so]);if(C&&St.bucketInstanceId in this.collisionCircleArrays){var No=this.collisionCircleArrays[St.bucketInstanceId];y.invert(No.invProjMatrix,te),No.viewportMatrix=this.collisionIndex.getViewportMatrix()}St.justReloaded=!1},ca.prototype.markUsedJustification=function(E,I,C,Z){var ut;ut=Z===y.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[y.getAnchorJustification(I)];for(var St=0,At=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];St<At.length;St+=1){var te=At[St];te>=0&&(E.text.placedSymbolArray.get(te).crossTileID=ut>=0&&te!==ut?0:C.crossTileID)}},ca.prototype.markUsedOrientation=function(E,I,C){for(var Z=I===y.WritingMode.horizontal||I===y.WritingMode.horizontalOnly?I:0,ut=I===y.WritingMode.vertical?I:0,St=0,At=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];St<At.length;St+=1)E.text.placedSymbolArray.get(At[St]).placedOrientation=Z;C.verticalPlacedTextSymbolIndex&&(E.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=ut)},ca.prototype.commit=function(E){this.commitTime=E,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,C=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var Z=I?I.symbolFadeChange(E):1,ut=I?I.opacities:{},St=I?I.variableOffsets:{},At=I?I.placedOrientations:{};for(var te in this.placements){var we=this.placements[te],Oe=ut[te];Oe?(this.opacities[te]=new _r(Oe,Z,we.text,we.icon),C=C||we.text!==Oe.text.placed||we.icon!==Oe.icon.placed):(this.opacities[te]=new _r(null,Z,we.text,we.icon,we.skipFade),C=C||we.text||we.icon)}for(var Ke in ut){var nr=ut[Ke];if(!this.opacities[Ke]){var $e=new _r(nr,Z,!1,!1);$e.isHidden()||(this.opacities[Ke]=$e,C=C||nr.text.placed||nr.icon.placed)}}for(var pr in St)this.variableOffsets[pr]||!this.opacities[pr]||this.opacities[pr].isHidden()||(this.variableOffsets[pr]=St[pr]);for(var Sr in At)this.placedOrientations[Sr]||!this.opacities[Sr]||this.opacities[Sr].isHidden()||(this.placedOrientations[Sr]=At[Sr]);C?this.lastPlacementChangeTime=E:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:E)},ca.prototype.updateLayerOpacities=function(E,I){for(var C={},Z=0,ut=I;Z<ut.length;Z+=1){var St=ut[Z],At=St.getBucket(E);At&&St.latestFeatureIndex&&E.id===At.layerIds[0]&&this.updateBucketOpacities(At,C,St.collisionBoxArray)}},ca.prototype.updateBucketOpacities=function(E,I,C){var Z=this;E.hasTextData()&&E.text.opacityVertexArray.clear(),E.hasIconData()&&E.icon.opacityVertexArray.clear(),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexArray.clear(),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexArray.clear();var ut=E.layers[0].layout,St=new _r(null,0,!1,!1,!0),At=ut.get("text-allow-overlap"),te=ut.get("icon-allow-overlap"),we=ut.get("text-variable-anchor"),Oe=ut.get("text-rotation-alignment")==="map",Ke=ut.get("text-pitch-alignment")==="map",nr=ut.get("icon-text-fit")!=="none",$e=new _r(null,0,At&&(te||!E.hasIconData()||ut.get("icon-optional")),te&&(At||!E.hasTextData()||ut.get("text-optional")),!0);!E.collisionArrays&&C&&(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData())&&E.deserializeCollisionBoxes(C);for(var pr=function(Ur,en,Sn){for(var Zn=0;Zn<en/4;Zn++)Ur.opacityVertexArray.emplaceBack(Sn)},Sr=function(Ur){var en=E.symbolInstances.get(Ur),Sn=en.numHorizontalGlyphVertices,Zn=en.numVerticalGlyphVertices,Pn=en.crossTileID,Fn=Z.opacities[Pn];I[Pn]?Fn=St:Fn||(Z.opacities[Pn]=Fn=$e),I[Pn]=!0;var gi=en.numIconVertices>0,Vi=Z.placedOrientations[en.crossTileID],Hi=Vi===y.WritingMode.vertical,fa=Vi===y.WritingMode.horizontal||Vi===y.WritingMode.horizontalOnly;if(Sn>0||Zn>0){var $a=wa(Fn.text);pr(E.text,Sn,Hi?no:$a),pr(E.text,Zn,fa?no:$a);var Qa=Fn.text.isHidden();[en.rightJustifiedTextSymbolIndex,en.centerJustifiedTextSymbolIndex,en.leftJustifiedTextSymbolIndex].forEach(function(uo){uo>=0&&(E.text.placedSymbolArray.get(uo).hidden=Qa||Hi?1:0)}),en.verticalPlacedTextSymbolIndex>=0&&(E.text.placedSymbolArray.get(en.verticalPlacedTextSymbolIndex).hidden=Qa||fa?1:0);var so=Z.variableOffsets[en.crossTileID];so&&Z.markUsedJustification(E,so.anchor,en,Vi);var No=Z.placedOrientations[en.crossTileID];No&&(Z.markUsedJustification(E,"left",en,No),Z.markUsedOrientation(E,No,en))}if(gi){var ea=wa(Fn.icon),Eo=!(nr&&en.verticalPlacedIconSymbolIndex&&Hi);en.placedIconSymbolIndex>=0&&(pr(E.icon,en.numIconVertices,Eo?ea:no),E.icon.placedSymbolArray.get(en.placedIconSymbolIndex).hidden=Fn.icon.isHidden()),en.verticalPlacedIconSymbolIndex>=0&&(pr(E.icon,en.numVerticalIconVertices,Eo?no:ea),E.icon.placedSymbolArray.get(en.verticalPlacedIconSymbolIndex).hidden=Fn.icon.isHidden())}if(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData()){var Ro=E.collisionArrays[Ur];if(Ro){var bo=new y.Point(0,0);if(Ro.textBox||Ro.verticalTextBox){var ho=!0;if(we){var zo=Z.variableOffsets[Pn];zo?(bo=pi(zo.anchor,zo.width,zo.height,zo.textOffset,zo.textBoxScale),Oe&&bo._rotate(Ke?Z.transform.angle:-Z.transform.angle)):ho=!1}Ro.textBox&&va(E.textCollisionBox.collisionVertexArray,Fn.text.placed,!ho||Hi,bo.x,bo.y),Ro.verticalTextBox&&va(E.textCollisionBox.collisionVertexArray,Fn.text.placed,!ho||fa,bo.x,bo.y)}var yo=Boolean(!fa&&Ro.verticalIconBox);Ro.iconBox&&va(E.iconCollisionBox.collisionVertexArray,Fn.icon.placed,yo,nr?bo.x:0,nr?bo.y:0),Ro.verticalIconBox&&va(E.iconCollisionBox.collisionVertexArray,Fn.icon.placed,!yo,nr?bo.x:0,nr?bo.y:0)}}},zr=0;zr<E.symbolInstances.length;zr++)Sr(zr);if(E.sortFeatures(this.transform.angle),this.retainedQueryData[E.bucketInstanceId]&&(this.retainedQueryData[E.bucketInstanceId].featureSortOrder=E.featureSortOrder),E.hasTextData()&&E.text.opacityVertexBuffer&&E.text.opacityVertexBuffer.updateData(E.text.opacityVertexArray),E.hasIconData()&&E.icon.opacityVertexBuffer&&E.icon.opacityVertexBuffer.updateData(E.icon.opacityVertexArray),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexBuffer&&E.iconCollisionBox.collisionVertexBuffer.updateData(E.iconCollisionBox.collisionVertexArray),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexBuffer&&E.textCollisionBox.collisionVertexBuffer.updateData(E.textCollisionBox.collisionVertexArray),E.bucketInstanceId in this.collisionCircleArrays){var dr=this.collisionCircleArrays[E.bucketInstanceId];E.placementInvProjMatrix=dr.invProjMatrix,E.placementViewportMatrix=dr.viewportMatrix,E.collisionCircleArray=dr.circles,delete this.collisionCircleArrays[E.bucketInstanceId]}},ca.prototype.symbolFadeChange=function(E){return this.fadeDuration===0?1:(E-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ca.prototype.zoomAdjustment=function(E){return Math.max(0,(this.transform.zoom-E)/1.5)},ca.prototype.hasTransitions=function(E){return this.stale||E-this.lastPlacementChangeTime<this.fadeDuration},ca.prototype.stillRecent=function(E,I){var C=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*C>E},ca.prototype.setStale=function(){this.stale=!0};var ji=Math.pow(2,25),ai=Math.pow(2,24),Fe=Math.pow(2,17),er=Math.pow(2,16),Ir=Math.pow(2,9),hn=Math.pow(2,8),ci=Math.pow(2,1);function wa(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;var I=E.placed?1:0,C=Math.floor(127*E.opacity);return C*ji+I*ai+C*Fe+I*er+C*Ir+I*hn+C*ci+I}var no=0,ls=function(E){this._sortAcrossTiles=E.layout.get("symbol-z-order")!=="viewport-y"&&E.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ls.prototype.continuePlacement=function(E,I,C,Z,ut){for(var St=this._bucketParts;this._currentTileIndex<E.length;)if(I.getBucketParts(St,Z,E[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ut())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,St.sort(function(At,te){return At.sortKey-te.sortKey}));this._currentPartIndex<St.length;)if(I.placeLayerBucketPart(St[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,ut())return!0;return!1};var Jo=function(E,I,C,Z,ut,St,At){this.placement=new ca(E,ut,St,At),this._currentPlacementIndex=I.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=Z,this._done=!1};Jo.prototype.isDone=function(){return this._done},Jo.prototype.continuePlacement=function(E,I,C){for(var Z=this,ut=y.browser.now(),St=function(){var we=y.browser.now()-ut;return!Z._forceFullPlacement&&we>2};this._currentPlacementIndex>=0;){var At=I[E[this._currentPlacementIndex]],te=this.placement.collisionIndex.transform.zoom;if(At.type==="symbol"&&(!At.minzoom||At.minzoom<=te)&&(!At.maxzoom||At.maxzoom>te)){if(this._inProgressLayer||(this._inProgressLayer=new ls(At)),this._inProgressLayer.continuePlacement(C[At.source],this.placement,this._showCollisionBoxes,At,St))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Jo.prototype.commit=function(E){return this.placement.commit(E),this.placement};var ps=512/y.EXTENT/2,Ks=function(E,I,C){this.tileID=E,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(var Z=0;Z<I.length;Z++){var ut=I.get(Z),St=ut.key;this.indexedSymbolInstances[St]||(this.indexedSymbolInstances[St]=[]),this.indexedSymbolInstances[St].push({crossTileID:ut.crossTileID,coord:this.getScaledCoordinates(ut,E)})}};Ks.prototype.getScaledCoordinates=function(E,I){var C=ps/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*y.EXTENT+E.anchorX)*C),y:Math.floor((I.canonical.y*y.EXTENT+E.anchorY)*C)}},Ks.prototype.findMatches=function(E,I,C){for(var Z=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),ut=0;ut<E.length;ut++){var St=E.get(ut);if(!St.crossTileID){var At=this.indexedSymbolInstances[St.key];if(At)for(var te=this.getScaledCoordinates(St,I),we=0,Oe=At;we<Oe.length;we+=1){var Ke=Oe[we];if(Math.abs(Ke.coord.x-te.x)<=Z&&Math.abs(Ke.coord.y-te.y)<=Z&&!C[Ke.crossTileID]){C[Ke.crossTileID]=!0,St.crossTileID=Ke.crossTileID;break}}}}};var Fo=function(){this.maxCrossTileID=0};Fo.prototype.generate=function(){return++this.maxCrossTileID};var Vs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Vs.prototype.handleWrapJump=function(E){var I=Math.round((E-this.lng)/360);if(I!==0)for(var C in this.indexes){var Z=this.indexes[C],ut={};for(var St in Z){var At=Z[St];At.tileID=At.tileID.unwrapTo(At.tileID.wrap+I),ut[At.tileID.key]=At}this.indexes[C]=ut}this.lng=E},Vs.prototype.addBucket=function(E,I,C){if(this.indexes[E.overscaledZ]&&this.indexes[E.overscaledZ][E.key]){if(this.indexes[E.overscaledZ][E.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(E.overscaledZ,this.indexes[E.overscaledZ][E.key])}for(var Z=0;Z<I.symbolInstances.length;Z++)I.symbolInstances.get(Z).crossTileID=0;this.usedCrossTileIDs[E.overscaledZ]||(this.usedCrossTileIDs[E.overscaledZ]={});var ut=this.usedCrossTileIDs[E.overscaledZ];for(var St in this.indexes){var At=this.indexes[St];if(Number(St)>E.overscaledZ)for(var te in At){var we=At[te];we.tileID.isChildOf(E)&&we.findMatches(I.symbolInstances,E,ut)}else{var Oe=At[E.scaledTo(Number(St)).key];Oe&&Oe.findMatches(I.symbolInstances,E,ut)}}for(var Ke=0;Ke<I.symbolInstances.length;Ke++){var nr=I.symbolInstances.get(Ke);nr.crossTileID||(nr.crossTileID=C.generate(),ut[nr.crossTileID]=!0)}return this.indexes[E.overscaledZ]===void 0&&(this.indexes[E.overscaledZ]={}),this.indexes[E.overscaledZ][E.key]=new Ks(E,I.symbolInstances,I.bucketInstanceId),!0},Vs.prototype.removeBucketCrossTileIDs=function(E,I){for(var C in I.indexedSymbolInstances)for(var Z=0,ut=I.indexedSymbolInstances[C];Z<ut.length;Z+=1)delete this.usedCrossTileIDs[E][ut[Z].crossTileID]},Vs.prototype.removeStaleBuckets=function(E){var I=!1;for(var C in this.indexes){var Z=this.indexes[C];for(var ut in Z)E[Z[ut].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,Z[ut]),delete Z[ut],I=!0)}return I};var $s=function(){this.layerIndexes={},this.crossTileIDs=new Fo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};$s.prototype.addLayer=function(E,I,C){var Z=this.layerIndexes[E.id];Z===void 0&&(Z=this.layerIndexes[E.id]=new Vs);var ut=!1,St={};Z.handleWrapJump(C);for(var At=0,te=I;At<te.length;At+=1){var we=te[At],Oe=we.getBucket(E);Oe&&E.id===Oe.layerIds[0]&&(Oe.bucketInstanceId||(Oe.bucketInstanceId=++this.maxBucketInstanceId),Z.addBucket(we.tileID,Oe,this.crossTileIDs)&&(ut=!0),St[Oe.bucketInstanceId]=!0)}return Z.removeStaleBuckets(St)&&(ut=!0),ut},$s.prototype.pruneUnusedLayers=function(E){var I={};for(var C in E.forEach(function(Z){I[Z]=!0}),this.layerIndexes)I[C]||delete this.layerIndexes[C]};var zs=function(E,I){return y.emitValidationErrors(E,I&&I.filter(function(C){return C.identifier!=="source.canvas"}))},Ou=y.pick(yi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),au=y.pick(yi,["setCenter","setZoom","setBearing","setPitch"]),Vu=function(){var E={},I=y.styleSpec.$version;for(var C in y.styleSpec.$root){var Z,ut=y.styleSpec.$root[C];ut.required&&(Z=C==="version"?I:ut.type==="array"?[]:{})!=null&&(E[C]=Z)}return E}(),ou=function(E){function I(C,Z){var ut=this;Z===void 0&&(Z={}),E.call(this),this.map=C,this.dispatcher=new it(Jr(),this),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new Lt(C._requestManager,Z.localIdeographFontFamily),this.lineAtlas=new Qt(256,512),this.crossTileSymbolIndex=new $s,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new y.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",y.getReferrer());var St=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function(At){St.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:At.pluginStatus,pluginURL:At.pluginURL},function(te,we){if(y.triggerPluginCompletionEvent(te),we&&we.every(function(Ke){return Ke}))for(var Oe in St.sourceCaches)St.sourceCaches[Oe].reload()})}),this.on("data",function(At){if(At.dataType==="source"&&At.sourceDataType==="metadata"){var te=ut.sourceCaches[At.sourceId];if(te){var we=te.getSource();if(we&&we.vectorLayerIds)for(var Oe in ut._layers){var Ke=ut._layers[Oe];Ke.source===we.id&&ut._validateLayer(Ke)}}}})}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.loadURL=function(C,Z){var ut=this;Z===void 0&&(Z={}),this.fire(new y.Event("dataloading",{dataType:"style"}));var St=typeof Z.validate=="boolean"?Z.validate:!y.isMapboxURL(C);C=this.map._requestManager.normalizeStyleURL(C,Z.accessToken);var At=this.map._requestManager.transformRequest(C,y.ResourceType.Style);this._request=y.getJSON(At,function(te,we){ut._request=null,te?ut.fire(new y.ErrorEvent(te)):we&&ut._load(we,St)})},I.prototype.loadJSON=function(C,Z){var ut=this;Z===void 0&&(Z={}),this.fire(new y.Event("dataloading",{dataType:"style"})),this._request=y.browser.frame(function(){ut._request=null,ut._load(C,Z.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new y.Event("dataloading",{dataType:"style"})),this._load(Vu,!1)},I.prototype._load=function(C,Z){if(!Z||!zs(this,y.validateStyle(C))){for(var ut in this._loaded=!0,this.stylesheet=C,C.sources)this.addSource(ut,C.sources[ut],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs);var St=Jn(this.stylesheet.layers);this._order=St.map(function(Oe){return Oe.id}),this._layers={},this._serializedLayers={};for(var At=0,te=St;At<te.length;At+=1){var we=te[At];(we=y.createStyleLayer(we)).setEventedParent(this,{layer:{id:we.id}}),this._layers[we.id]=we,this._serializedLayers[we.id]=we.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new re(this.stylesheet.light),this.fire(new y.Event("data",{dataType:"style"})),this.fire(new y.Event("style.load"))}},I.prototype._loadSprite=function(C){var Z=this;this._spriteRequest=function(ut,St,At){var te,we,Oe,Ke=y.browser.devicePixelRatio>1?"@2x":"",nr=y.getJSON(St.transformRequest(St.normalizeSpriteURL(ut,Ke,".json"),y.ResourceType.SpriteJSON),function(Sr,zr){nr=null,Oe||(Oe=Sr,te=zr,pr())}),$e=y.getImage(St.transformRequest(St.normalizeSpriteURL(ut,Ke,".png"),y.ResourceType.SpriteImage),function(Sr,zr){$e=null,Oe||(Oe=Sr,we=zr,pr())});function pr(){if(Oe)At(Oe);else if(te&&we){var Sr=y.browser.getImageData(we),zr={};for(var dr in te){var Ur=te[dr],en=Ur.width,Sn=Ur.height,Zn=Ur.x,Pn=Ur.y,Fn=Ur.sdf,gi=Ur.pixelRatio,Vi=Ur.stretchX,Hi=Ur.stretchY,fa=Ur.content,$a=new y.RGBAImage({width:en,height:Sn});y.RGBAImage.copy(Sr,$a,{x:Zn,y:Pn},{x:0,y:0},{width:en,height:Sn}),zr[dr]={data:$a,pixelRatio:gi,sdf:Fn,stretchX:Vi,stretchY:Hi,content:fa}}At(null,zr)}}return{cancel:function(){nr&&(nr.cancel(),nr=null),$e&&($e.cancel(),$e=null)}}}(C,this.map._requestManager,function(ut,St){if(Z._spriteRequest=null,ut)Z.fire(new y.ErrorEvent(ut));else if(St)for(var At in St)Z.imageManager.addImage(At,St[At]);Z.imageManager.setLoaded(!0),Z._availableImages=Z.imageManager.listImages(),Z.dispatcher.broadcast("setImages",Z._availableImages),Z.fire(new y.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(C){var Z=this.sourceCaches[C.source];if(Z){var ut=C.sourceLayer;if(ut){var St=Z.getSource();(St.type==="geojson"||St.vectorLayerIds&&St.vectorLayerIds.indexOf(ut)===-1)&&this.fire(new y.ErrorEvent(new Error('Source layer "'+ut+'" does not exist on source "'+St.id+'" as specified by style layer "'+C.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var C in this.sourceCaches)if(!this.sourceCaches[C].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(C){for(var Z=[],ut=0,St=C;ut<St.length;ut+=1){var At=this._layers[St[ut]];At.type!=="custom"&&Z.push(At.serialize())}return Z},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(var Z in this._layers)if(this._layers[Z].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(C){if(this._loaded){var Z=this._changed;if(this._changed){var ut=Object.keys(this._updatedLayers),St=Object.keys(this._removedLayers);for(var At in(ut.length||St.length)&&this._updateWorkerLayers(ut,St),this._updatedSources){var te=this._updatedSources[At];te==="reload"?this._reloadSource(At):te==="clear"&&this._clearSource(At)}for(var we in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[we].updateTransitions(C);this.light.updateTransitions(C),this._resetUpdates()}var Oe={};for(var Ke in this.sourceCaches){var nr=this.sourceCaches[Ke];Oe[Ke]=nr.used,nr.used=!1}for(var $e=0,pr=this._order;$e<pr.length;$e+=1){var Sr=this._layers[pr[$e]];Sr.recalculate(C,this._availableImages),!Sr.isHidden(C.zoom)&&Sr.source&&(this.sourceCaches[Sr.source].used=!0)}for(var zr in Oe){var dr=this.sourceCaches[zr];Oe[zr]!==dr.used&&dr.fire(new y.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:zr}))}this.light.recalculate(C),this.z=C.zoom,Z&&this.fire(new y.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var C=Object.keys(this._changedImages);if(C.length){for(var Z in this.sourceCaches)this.sourceCaches[Z].reloadTilesForDependencies(["icons","patterns"],C);this._changedImages={}}},I.prototype._updateWorkerLayers=function(C,Z){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(C),removedIds:Z})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(C){var Z=this;if(this._checkLoaded(),zs(this,y.validateStyle(C)))return!1;(C=y.clone$1(C)).layers=Jn(C.layers);var ut=function(At,te){if(!At)return[{command:yi.setStyle,args:[te]}];var we=[];try{if(!y.deepEqual(At.version,te.version))return[{command:yi.setStyle,args:[te]}];y.deepEqual(At.center,te.center)||we.push({command:yi.setCenter,args:[te.center]}),y.deepEqual(At.zoom,te.zoom)||we.push({command:yi.setZoom,args:[te.zoom]}),y.deepEqual(At.bearing,te.bearing)||we.push({command:yi.setBearing,args:[te.bearing]}),y.deepEqual(At.pitch,te.pitch)||we.push({command:yi.setPitch,args:[te.pitch]}),y.deepEqual(At.sprite,te.sprite)||we.push({command:yi.setSprite,args:[te.sprite]}),y.deepEqual(At.glyphs,te.glyphs)||we.push({command:yi.setGlyphs,args:[te.glyphs]}),y.deepEqual(At.transition,te.transition)||we.push({command:yi.setTransition,args:[te.transition]}),y.deepEqual(At.light,te.light)||we.push({command:yi.setLight,args:[te.light]});var Oe={},Ke=[];(function($e,pr,Sr,zr){var dr;for(dr in pr=pr||{},$e=$e||{})$e.hasOwnProperty(dr)&&(pr.hasOwnProperty(dr)||ki(dr,Sr,zr));for(dr in pr)pr.hasOwnProperty(dr)&&($e.hasOwnProperty(dr)?y.deepEqual($e[dr],pr[dr])||($e[dr].type==="geojson"&&pr[dr].type==="geojson"&&ko($e,pr,dr)?Sr.push({command:yi.setGeoJSONSourceData,args:[dr,pr[dr].data]}):ga(dr,pr,Sr,zr)):Ka(dr,pr,Sr))})(At.sources,te.sources,Ke,Oe);var nr=[];At.layers&&At.layers.forEach(function($e){Oe[$e.source]?we.push({command:yi.removeLayer,args:[$e.id]}):nr.push($e)}),we=we.concat(Ke),function($e,pr,Sr){pr=pr||[];var zr,dr,Ur,en,Sn,Zn,Pn,Fn=($e=$e||[]).map(po),gi=pr.map(po),Vi=$e.reduce(oo,{}),Hi=pr.reduce(oo,{}),fa=Fn.slice(),$a=Object.create(null);for(zr=0,dr=0;zr<Fn.length;zr++)Hi.hasOwnProperty(Ur=Fn[zr])?dr++:(Sr.push({command:yi.removeLayer,args:[Ur]}),fa.splice(fa.indexOf(Ur,dr),1));for(zr=0,dr=0;zr<gi.length;zr++)fa[fa.length-1-zr]!==(Ur=gi[gi.length-1-zr])&&(Vi.hasOwnProperty(Ur)?(Sr.push({command:yi.removeLayer,args:[Ur]}),fa.splice(fa.lastIndexOf(Ur,fa.length-dr),1)):dr++,Sr.push({command:yi.addLayer,args:[Hi[Ur],Zn=fa[fa.length-zr]]}),fa.splice(fa.length-zr,0,Ur),$a[Ur]=!0);for(zr=0;zr<gi.length;zr++)if(en=Vi[Ur=gi[zr]],Sn=Hi[Ur],!$a[Ur]&&!y.deepEqual(en,Sn))if(y.deepEqual(en.source,Sn.source)&&y.deepEqual(en["source-layer"],Sn["source-layer"])&&y.deepEqual(en.type,Sn.type)){for(Pn in Ci(en.layout,Sn.layout,Sr,Ur,null,yi.setLayoutProperty),Ci(en.paint,Sn.paint,Sr,Ur,null,yi.setPaintProperty),y.deepEqual(en.filter,Sn.filter)||Sr.push({command:yi.setFilter,args:[Ur,Sn.filter]}),y.deepEqual(en.minzoom,Sn.minzoom)&&y.deepEqual(en.maxzoom,Sn.maxzoom)||Sr.push({command:yi.setLayerZoomRange,args:[Ur,Sn.minzoom,Sn.maxzoom]}),en)en.hasOwnProperty(Pn)&&Pn!=="layout"&&Pn!=="paint"&&Pn!=="filter"&&Pn!=="metadata"&&Pn!=="minzoom"&&Pn!=="maxzoom"&&(Pn.indexOf("paint.")===0?Ci(en[Pn],Sn[Pn],Sr,Ur,Pn.slice(6),yi.setPaintProperty):y.deepEqual(en[Pn],Sn[Pn])||Sr.push({command:yi.setLayerProperty,args:[Ur,Pn,Sn[Pn]]}));for(Pn in Sn)Sn.hasOwnProperty(Pn)&&!en.hasOwnProperty(Pn)&&Pn!=="layout"&&Pn!=="paint"&&Pn!=="filter"&&Pn!=="metadata"&&Pn!=="minzoom"&&Pn!=="maxzoom"&&(Pn.indexOf("paint.")===0?Ci(en[Pn],Sn[Pn],Sr,Ur,Pn.slice(6),yi.setPaintProperty):y.deepEqual(en[Pn],Sn[Pn])||Sr.push({command:yi.setLayerProperty,args:[Ur,Pn,Sn[Pn]]}))}else Sr.push({command:yi.removeLayer,args:[Ur]}),Zn=fa[fa.lastIndexOf(Ur)+1],Sr.push({command:yi.addLayer,args:[Sn,Zn]})}(nr,te.layers,we)}catch($e){console.warn("Unable to compute style diff:",$e),we=[{command:yi.setStyle,args:[te]}]}return we}(this.serialize(),C).filter(function(At){return!(At.command in au)});if(ut.length===0)return!1;var St=ut.filter(function(At){return!(At.command in Ou)});if(St.length>0)throw new Error("Unimplemented: "+St.map(function(At){return At.command}).join(", ")+".");return ut.forEach(function(At){At.command!=="setTransition"&&Z[At.command].apply(Z,At.args)}),this.stylesheet=C,!0},I.prototype.addImage=function(C,Z){if(this.getImage(C))return this.fire(new y.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(C,Z),this._afterImageUpdated(C)},I.prototype.updateImage=function(C,Z){this.imageManager.updateImage(C,Z)},I.prototype.getImage=function(C){return this.imageManager.getImage(C)},I.prototype.removeImage=function(C){if(!this.getImage(C))return this.fire(new y.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(C),this._afterImageUpdated(C)},I.prototype._afterImageUpdated=function(C){this._availableImages=this.imageManager.listImages(),this._changedImages[C]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new y.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(C,Z,ut){var St=this;if(ut===void 0&&(ut={}),this._checkLoaded(),this.sourceCaches[C]!==void 0)throw new Error("There is already a source with this ID");if(!Z.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(Z).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(Z.type)>=0&&this._validate(y.validateStyle.source,"sources."+C,Z,null,ut))){this.map&&this.map._collectResourceTiming&&(Z.collectResourceTiming=!0);var At=this.sourceCaches[C]=new tr(C,Z,this.dispatcher);At.style=this,At.setEventedParent(this,function(){return{isSourceLoaded:St.loaded(),source:At.serialize(),sourceId:C}}),At.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(C){if(this._checkLoaded(),this.sourceCaches[C]===void 0)throw new Error("There is no source with this ID");for(var Z in this._layers)if(this._layers[Z].source===C)return this.fire(new y.ErrorEvent(new Error('Source "'+C+'" cannot be removed while layer "'+Z+'" is using it.')));var ut=this.sourceCaches[C];delete this.sourceCaches[C],delete this._updatedSources[C],ut.fire(new y.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C})),ut.setEventedParent(null),ut.clearTiles(),ut.onRemove&&ut.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(C,Z){this._checkLoaded(),this.sourceCaches[C].getSource().setData(Z),this._changed=!0},I.prototype.getSource=function(C){return this.sourceCaches[C]&&this.sourceCaches[C].getSource()},I.prototype.addLayer=function(C,Z,ut){ut===void 0&&(ut={}),this._checkLoaded();var St=C.id;if(this.getLayer(St))this.fire(new y.ErrorEvent(new Error('Layer with id "'+St+'" already exists on this map')));else{var At;if(C.type==="custom"){if(zs(this,y.validateCustomStyleLayer(C)))return;At=y.createStyleLayer(C)}else{if(typeof C.source=="object"&&(this.addSource(St,C.source),C=y.clone$1(C),C=y.extend(C,{source:St})),this._validate(y.validateStyle.layer,"layers."+St,C,{arrayIndex:-1},ut))return;At=y.createStyleLayer(C),this._validateLayer(At),At.setEventedParent(this,{layer:{id:St}}),this._serializedLayers[At.id]=At.serialize()}var te=Z?this._order.indexOf(Z):this._order.length;if(Z&&te===-1)this.fire(new y.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.')));else{if(this._order.splice(te,0,St),this._layerOrderChanged=!0,this._layers[St]=At,this._removedLayers[St]&&At.source&&At.type!=="custom"){var we=this._removedLayers[St];delete this._removedLayers[St],we.type!==At.type?this._updatedSources[At.source]="clear":(this._updatedSources[At.source]="reload",this.sourceCaches[At.source].pause())}this._updateLayer(At),At.onAdd&&At.onAdd(this.map)}}},I.prototype.moveLayer=function(C,Z){if(this._checkLoaded(),this._changed=!0,this._layers[C]){if(C!==Z){var ut=this._order.indexOf(C);this._order.splice(ut,1);var St=Z?this._order.indexOf(Z):this._order.length;Z&&St===-1?this.fire(new y.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.'))):(this._order.splice(St,0,C),this._layerOrderChanged=!0)}}else this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(C){this._checkLoaded();var Z=this._layers[C];if(Z){Z.setEventedParent(null);var ut=this._order.indexOf(C);this._order.splice(ut,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[C]=Z,delete this._layers[C],delete this._serializedLayers[C],delete this._updatedLayers[C],delete this._updatedPaintProps[C],Z.onRemove&&Z.onRemove(this.map)}else this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(C){return this._layers[C]},I.prototype.hasLayer=function(C){return C in this._layers},I.prototype.setLayerZoomRange=function(C,Z,ut){this._checkLoaded();var St=this.getLayer(C);St?St.minzoom===Z&&St.maxzoom===ut||(Z!=null&&(St.minzoom=Z),ut!=null&&(St.maxzoom=ut),this._updateLayer(St)):this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(C,Z,ut){ut===void 0&&(ut={}),this._checkLoaded();var St=this.getLayer(C);if(St){if(!y.deepEqual(St.filter,Z))return Z==null?(St.filter=void 0,void this._updateLayer(St)):void(this._validate(y.validateStyle.filter,"layers."+St.id+".filter",Z,null,ut)||(St.filter=y.clone$1(Z),this._updateLayer(St)))}else this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(C){return y.clone$1(this.getLayer(C).filter)},I.prototype.setLayoutProperty=function(C,Z,ut,St){St===void 0&&(St={}),this._checkLoaded();var At=this.getLayer(C);At?y.deepEqual(At.getLayoutProperty(Z),ut)||(At.setLayoutProperty(Z,ut,St),this._updateLayer(At)):this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(C,Z){var ut=this.getLayer(C);if(ut)return ut.getLayoutProperty(Z);this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(C,Z,ut,St){St===void 0&&(St={}),this._checkLoaded();var At=this.getLayer(C);At?y.deepEqual(At.getPaintProperty(Z),ut)||(At.setPaintProperty(Z,ut,St)&&this._updateLayer(At),this._changed=!0,this._updatedPaintProps[C]=!0):this.fire(new y.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(C,Z){return this.getLayer(C).getPaintProperty(Z)},I.prototype.setFeatureState=function(C,Z){this._checkLoaded();var ut=C.source,St=C.sourceLayer,At=this.sourceCaches[ut];if(At!==void 0){var te=At.getSource().type;te==="geojson"&&St?this.fire(new y.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):te!=="vector"||St?(C.id===void 0&&this.fire(new y.ErrorEvent(new Error("The feature id parameter must be provided."))),At.setFeatureState(St,C.id,Z)):this.fire(new y.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new y.ErrorEvent(new Error("The source '"+ut+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(C,Z){this._checkLoaded();var ut=C.source,St=this.sourceCaches[ut];if(St!==void 0){var At=St.getSource().type,te=At==="vector"?C.sourceLayer:void 0;At!=="vector"||te?Z&&typeof C.id!="string"&&typeof C.id!="number"?this.fire(new y.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):St.removeFeatureState(te,C.id,Z):this.fire(new y.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new y.ErrorEvent(new Error("The source '"+ut+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(C){this._checkLoaded();var Z=C.source,ut=C.sourceLayer,St=this.sourceCaches[Z];if(St!==void 0){if(St.getSource().type!=="vector"||ut)return C.id===void 0&&this.fire(new y.ErrorEvent(new Error("The feature id parameter must be provided."))),St.getFeatureState(ut,C.id);this.fire(new y.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new y.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return y.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return y.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:y.mapObject(this.sourceCaches,function(C){return C.serialize()}),layers:this._serializeLayers(this._order)},function(C){return C!==void 0})},I.prototype._updateLayer=function(C){this._updatedLayers[C.id]=!0,C.source&&!this._updatedSources[C.source]&&this.sourceCaches[C.source].getSource().type!=="raster"&&(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(C){for(var Z=this,ut=function(Vi){return Z._layers[Vi].type==="fill-extrusion"},St={},At=[],te=this._order.length-1;te>=0;te--){var we=this._order[te];if(ut(we)){St[we]=te;for(var Oe=0,Ke=C;Oe<Ke.length;Oe+=1){var nr=Ke[Oe][we];if(nr)for(var $e=0,pr=nr;$e<pr.length;$e+=1)At.push(pr[$e])}}}At.sort(function(Vi,Hi){return Hi.intersectionZ-Vi.intersectionZ});for(var Sr=[],zr=this._order.length-1;zr>=0;zr--){var dr=this._order[zr];if(ut(dr))for(var Ur=At.length-1;Ur>=0;Ur--){var en=At[Ur].feature;if(St[en.layer.id]<zr)break;Sr.push(en),At.pop()}else for(var Sn=0,Zn=C;Sn<Zn.length;Sn+=1){var Pn=Zn[Sn][dr];if(Pn)for(var Fn=0,gi=Pn;Fn<gi.length;Fn+=1)Sr.push(gi[Fn].feature)}}return Sr},I.prototype.queryRenderedFeatures=function(C,Z,ut){Z&&Z.filter&&this._validate(y.validateStyle.filter,"queryRenderedFeatures.filter",Z.filter,null,Z);var St={};if(Z&&Z.layers){if(!Array.isArray(Z.layers))return this.fire(new y.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var At=0,te=Z.layers;At<te.length;At+=1){var we=te[At],Oe=this._layers[we];if(!Oe)return this.fire(new y.ErrorEvent(new Error("The layer '"+we+"' does not exist in the map's style and cannot be queried for features."))),[];St[Oe.source]=!0}}var Ke=[];for(var nr in Z.availableImages=this._availableImages,this.sourceCaches)Z.layers&&!St[nr]||Ke.push(Xt(this.sourceCaches[nr],this._layers,this._serializedLayers,C,Z,ut));return this.placement&&Ke.push(function($e,pr,Sr,zr,dr,Ur,en){for(var Sn={},Zn=Ur.queryRenderedSymbols(zr),Pn=[],Fn=0,gi=Object.keys(Zn).map(Number);Fn<gi.length;Fn+=1)Pn.push(en[gi[Fn]]);Pn.sort(Kt);for(var Vi=function(){var so=fa[Hi],No=so.featureIndex.lookupSymbolFeatures(Zn[so.bucketInstanceId],pr,so.bucketIndex,so.sourceLayerIndex,dr.filter,dr.layers,dr.availableImages,$e);for(var ea in No){var Eo=Sn[ea]=Sn[ea]||[],Ro=No[ea];Ro.sort(function(zo,yo){var uo=so.featureSortOrder;if(uo){var tu=uo.indexOf(zo.featureIndex);return uo.indexOf(yo.featureIndex)-tu}return yo.featureIndex-zo.featureIndex});for(var bo=0,ho=Ro;bo<ho.length;bo+=1)Eo.push(ho[bo])}},Hi=0,fa=Pn;Hi<fa.length;Hi+=1)Vi();var $a=function(so){Sn[so].forEach(function(No){var ea=No.feature,Eo=Sr[$e[so].source].getFeatureState(ea.layer["source-layer"],ea.id);ea.source=ea.layer.source,ea.layer["source-layer"]&&(ea.sourceLayer=ea.layer["source-layer"]),ea.state=Eo})};for(var Qa in Sn)$a(Qa);return Sn}(this._layers,this._serializedLayers,this.sourceCaches,C,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ke)},I.prototype.querySourceFeatures=function(C,Z){Z&&Z.filter&&this._validate(y.validateStyle.filter,"querySourceFeatures.filter",Z.filter,null,Z);var ut=this.sourceCaches[C];return ut?function(St,At){for(var te=St.getRenderableIds().map(function(pr){return St.getTileByID(pr)}),we=[],Oe={},Ke=0;Ke<te.length;Ke++){var nr=te[Ke],$e=nr.tileID.canonical.key;Oe[$e]||(Oe[$e]=!0,nr.querySourceFeatures(we,At))}return we}(ut,Z):[]},I.prototype.addSourceType=function(C,Z,ut){return I.getSourceType(C)?ut(new Error('A source type called "'+C+'" already exists.')):(I.setSourceType(C,Z),Z.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:C,url:Z.workerSourceURL},ut):ut(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(C,Z){Z===void 0&&(Z={}),this._checkLoaded();var ut=this.light.getLight(),St=!1;for(var At in C)if(!y.deepEqual(C[At],ut[At])){St=!0;break}if(St){var te={now:y.browser.now(),transition:y.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(C,Z),this.light.updateTransitions(te)}},I.prototype._validate=function(C,Z,ut,St,At){return At===void 0&&(At={}),(!At||At.validate!==!1)&&zs(this,C.call(y.validateStyle,y.extend({key:Z,style:this.serialize(),value:ut,styleSpec:y.styleSpec},St)))},I.prototype._remove=function(){for(var C in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),y.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[C].setEventedParent(null);for(var Z in this.sourceCaches)this.sourceCaches[Z].clearTiles(),this.sourceCaches[Z].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(C){this.sourceCaches[C].clearTiles()},I.prototype._reloadSource=function(C){this.sourceCaches[C].resume(),this.sourceCaches[C].reload()},I.prototype._updateSources=function(C){for(var Z in this.sourceCaches)this.sourceCaches[Z].update(C)},I.prototype._generateCollisionBoxes=function(){for(var C in this.sourceCaches)this._reloadSource(C)},I.prototype._updatePlacement=function(C,Z,ut,St,At){At===void 0&&(At=!1);for(var te=!1,we=!1,Oe={},Ke=0,nr=this._order;Ke<nr.length;Ke+=1){var $e=this._layers[nr[Ke]];if($e.type==="symbol"){if(!Oe[$e.source]){var pr=this.sourceCaches[$e.source];Oe[$e.source]=pr.getRenderableIds(!0).map(function(en){return pr.getTileByID(en)}).sort(function(en,Sn){return Sn.tileID.overscaledZ-en.tileID.overscaledZ||(en.tileID.isLessThan(Sn.tileID)?-1:1)})}var Sr=this.crossTileSymbolIndex.addLayer($e,Oe[$e.source],C.center.lng);te=te||Sr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((At=At||this._layerOrderChanged||ut===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.browser.now(),C.zoom))&&(this.pauseablePlacement=new Jo(C,this._order,At,Z,ut,St,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Oe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.browser.now()),we=!0),te&&this.pauseablePlacement.placement.setStale()),we||te)for(var zr=0,dr=this._order;zr<dr.length;zr+=1){var Ur=this._layers[dr[zr]];Ur.type==="symbol"&&this.placement.updateLayerOpacities(Ur,Oe[Ur.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var C in this.sourceCaches)this.sourceCaches[C].releaseSymbolFadeTiles()},I.prototype.getImages=function(C,Z,ut){this.imageManager.getImages(Z.icons,ut),this._updateTilesForChangedImages();var St=this.sourceCaches[Z.source];St&&St.setDependencies(Z.tileID.key,Z.type,Z.icons)},I.prototype.getGlyphs=function(C,Z,ut){this.glyphManager.getGlyphs(Z.stacks,ut)},I.prototype.getResource=function(C,Z,ut){return y.makeRequest(Z,ut)},I}(y.Evented);ou.getSourceType=function(E){return Ht[E]},ou.setSourceType=function(E,I){Ht[E]=I},ou.registerForPluginStateChange=y.registerForPluginStateChange;var ds=y.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ko=Ve(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Lu=Ve(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gl=Ve(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Du=Ve(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Wu=Ve("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ul=Ve(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ql=Ve(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ku=Ve("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Nc=Ve("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),J=Ve("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ct=Ve(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),me=Ve(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),jt=Ve(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ke=Ve(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ir=Ve(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Gr=Ve(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),pn=Ve(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),dn=Ve(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ti=Ve(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Nn=Ve(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Fa=Ve(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Xa=Ve(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Wi=Ve(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),rs=Ve(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),io=Ve(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Cs=Ve(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ve(E,I){var C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Z=I.match(/attribute ([\w]+) ([\w]+)/g),ut=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),St=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),At=St?St.concat(ut):ut,te={};return{fragmentSource:E=E.replace(C,function(we,Oe,Ke,nr,$e){return te[$e]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+$e+`
varying `+Ke+" "+nr+" "+$e+`;
#else
uniform `+Ke+" "+nr+" u_"+$e+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$e+`
    `+Ke+" "+nr+" "+$e+" = u_"+$e+`;
#endif
`}),vertexSource:I=I.replace(C,function(we,Oe,Ke,nr,$e){var pr=nr==="float"?"vec2":"vec4",Sr=$e.match(/color/)?"color":pr;return te[$e]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+$e+`
uniform lowp float u_`+$e+`_t;
attribute `+Ke+" "+pr+" a_"+$e+`;
varying `+Ke+" "+nr+" "+$e+`;
#else
uniform `+Ke+" "+nr+" u_"+$e+`;
#endif
`:Sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$e+`
    `+$e+" = a_"+$e+`;
#else
    `+Ke+" "+nr+" "+$e+" = u_"+$e+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$e+`
    `+$e+" = unpack_mix_"+Sr+"(a_"+$e+", u_"+$e+`_t);
#else
    `+Ke+" "+nr+" "+$e+" = u_"+$e+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+$e+`
uniform lowp float u_`+$e+`_t;
attribute `+Ke+" "+pr+" a_"+$e+`;
#else
uniform `+Ke+" "+nr+" u_"+$e+`;
#endif
`:Sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$e+`
    `+Ke+" "+nr+" "+$e+" = a_"+$e+`;
#else
    `+Ke+" "+nr+" "+$e+" = u_"+$e+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$e+`
    `+Ke+" "+nr+" "+$e+" = unpack_mix_"+Sr+"(a_"+$e+", u_"+$e+`_t);
#else
    `+Ke+" "+nr+" "+$e+" = u_"+$e+`;
#endif
`}),staticAttributes:Z,staticUniforms:At}}var pe=Object.freeze({__proto__:null,prelude:Ko,background:Lu,backgroundPattern:Gl,circle:Du,clippingMask:Wu,heatmap:Ul,heatmapTexture:Ql,collisionBox:Ku,collisionCircle:Nc,debug:J,fill:Ct,fillOutline:me,fillOutlinePattern:jt,fillPattern:ke,fillExtrusion:ir,fillExtrusionPattern:Gr,hillshadePrepare:pn,hillshade:dn,line:ti,lineGradient:Nn,linePattern:Fa,lineSDF:Xa,raster:Wi,symbolIcon:rs,symbolSDF:io,symbolTextAndIcon:Cs}),pt=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ot(E){for(var I=[],C=0;C<E.length;C++)if(E[C]!==null){var Z=E[C].split(" ");I.push(Z.pop())}return I}pt.prototype.bind=function(E,I,C,Z,ut,St,At,te){this.context=E;for(var we=this.boundPaintVertexBuffers.length!==Z.length,Oe=0;!we&&Oe<Z.length;Oe++)this.boundPaintVertexBuffers[Oe]!==Z[Oe]&&(we=!0);E.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===C&&!we&&this.boundIndexBuffer===ut&&this.boundVertexOffset===St&&this.boundDynamicVertexBuffer===At&&this.boundDynamicVertexBuffer2===te?(E.bindVertexArrayOES.set(this.vao),At&&At.bind(),ut&&ut.dynamicDraw&&ut.bind(),te&&te.bind()):this.freshBind(I,C,Z,ut,St,At,te)},pt.prototype.freshBind=function(E,I,C,Z,ut,St,At){var te,we=E.numAttributes,Oe=this.context,Ke=Oe.gl;if(Oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Oe.extVertexArrayObject.createVertexArrayOES(),Oe.bindVertexArrayOES.set(this.vao),te=0,this.boundProgram=E,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=Z,this.boundVertexOffset=ut,this.boundDynamicVertexBuffer=St,this.boundDynamicVertexBuffer2=At;else{te=Oe.currentNumAttributes||0;for(var nr=we;nr<te;nr++)Ke.disableVertexAttribArray(nr)}I.enableAttributes(Ke,E);for(var $e=0,pr=C;$e<pr.length;$e+=1)pr[$e].enableAttributes(Ke,E);St&&St.enableAttributes(Ke,E),At&&At.enableAttributes(Ke,E),I.bind(),I.setVertexAttribPointers(Ke,E,ut);for(var Sr=0,zr=C;Sr<zr.length;Sr+=1){var dr=zr[Sr];dr.bind(),dr.setVertexAttribPointers(Ke,E,ut)}St&&(St.bind(),St.setVertexAttribPointers(Ke,E,ut)),Z&&Z.bind(),At&&(At.bind(),At.setVertexAttribPointers(Ke,E,ut)),Oe.currentNumAttributes=we},pt.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ee=function(E,I,C,Z,ut,St){var At=E.gl;this.program=At.createProgram();for(var te=Ot(C.staticAttributes),we=Z?Z.getBinderAttributes():[],Oe=te.concat(we),Ke=C.staticUniforms?Ot(C.staticUniforms):[],nr=Z?Z.getBinderUniforms():[],$e=[],pr=0,Sr=Ke.concat(nr);pr<Sr.length;pr+=1){var zr=Sr[pr];$e.indexOf(zr)<0&&$e.push(zr)}var dr=Z?Z.defines():[];St&&dr.push("#define OVERDRAW_INSPECTOR;");var Ur=dr.concat(Ko.fragmentSource,C.fragmentSource).join(`
`),en=dr.concat(Ko.vertexSource,C.vertexSource).join(`
`),Sn=At.createShader(At.FRAGMENT_SHADER);if(At.isContextLost())this.failedToCreate=!0;else{At.shaderSource(Sn,Ur),At.compileShader(Sn),At.attachShader(this.program,Sn);var Zn=At.createShader(At.VERTEX_SHADER);if(At.isContextLost())this.failedToCreate=!0;else{At.shaderSource(Zn,en),At.compileShader(Zn),At.attachShader(this.program,Zn),this.attributes={};var Pn={};this.numAttributes=Oe.length;for(var Fn=0;Fn<this.numAttributes;Fn++)Oe[Fn]&&(At.bindAttribLocation(this.program,Fn,Oe[Fn]),this.attributes[Oe[Fn]]=Fn);At.linkProgram(this.program),At.deleteShader(Zn),At.deleteShader(Sn);for(var gi=0;gi<$e.length;gi++){var Vi=$e[gi];if(Vi&&!Pn[Vi]){var Hi=At.getUniformLocation(this.program,Vi);Hi&&(Pn[Vi]=Hi)}}this.fixedUniforms=ut(E,Pn),this.binderUniforms=Z?Z.getUniforms(E,Pn):[]}}};function ye(E,I,C){var Z=1/Ae(C,1,I.transform.tileZoom),ut=Math.pow(2,C.tileID.overscaledZ),St=C.tileSize*Math.pow(2,I.transform.tileZoom)/ut,At=St*(C.tileID.canonical.x+C.tileID.wrap*ut),te=St*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[Z,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[At>>16,te>>16],u_pixel_coord_lower:[65535&At,65535&te]}}ee.prototype.draw=function(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr,$e,pr,Sr,zr){var dr,Ur=E.gl;if(!this.failedToCreate){for(var en in E.program.set(this.program),E.setDepthMode(C),E.setStencilMode(Z),E.setColorMode(ut),E.setCullFace(St),this.fixedUniforms)this.fixedUniforms[en].set(At[en]);pr&&pr.setUniforms(E,this.binderUniforms,nr,{zoom:$e});for(var Sn=(dr={},dr[Ur.LINES]=2,dr[Ur.TRIANGLES]=3,dr[Ur.LINE_STRIP]=1,dr)[I],Zn=0,Pn=Ke.get();Zn<Pn.length;Zn+=1){var Fn=Pn[Zn],gi=Fn.vaos||(Fn.vaos={});(gi[te]||(gi[te]=new pt)).bind(E,this,we,pr?pr.getPaintVertexBuffers():[],Oe,Fn.vertexOffset,Sr,zr),Ur.drawElements(I,Fn.primitiveLength*Sn,Ur.UNSIGNED_SHORT,Fn.primitiveOffset*Sn*2)}}};var Ne=function(E,I,C,Z){var ut=I.style.light,St=ut.properties.get("position"),At=[St.x,St.y,St.z],te=y.create$1();ut.properties.get("anchor")==="viewport"&&y.fromRotation(te,-I.transform.angle),y.transformMat3(At,At,te);var we=ut.properties.get("color");return{u_matrix:E,u_lightpos:At,u_lightintensity:ut.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_vertical_gradient:+C,u_opacity:Z}},Ye=function(E,I,C,Z,ut,St,At){return y.extend(Ne(E,I,C,Z),ye(St,I,At),{u_height_factor:-Math.pow(2,ut.overscaledZ)/At.tileSize/8})},hr=function(E){return{u_matrix:E}},Er=function(E,I,C,Z){return y.extend(hr(E),ye(C,I,Z))},Hr=function(E,I){return{u_matrix:E,u_world:I}},bn=function(E,I,C,Z,ut){return y.extend(Er(E,I,C,Z),{u_world:ut})},ri=function(E,I,C,Z){var ut,St,At=E.transform;if(Z.paint.get("circle-pitch-alignment")==="map"){var te=Ae(C,1,At.zoom);ut=!0,St=[te,te]}else ut=!1,St=At.pixelsToGLUnits;return{u_camera_to_center_distance:At.cameraToCenterDistance,u_scale_with_map:+(Z.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(I.posMatrix,C,Z.paint.get("circle-translate"),Z.paint.get("circle-translate-anchor")),u_pitch_with_map:+ut,u_device_pixel_ratio:y.browser.devicePixelRatio,u_extrude_scale:St}},qn=function(E,I,C){var Z=Ae(C,1,I.zoom),ut=Math.pow(2,I.zoom-C.tileID.overscaledZ),St=C.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:I.cameraToCenterDistance,u_pixels_to_tile_units:Z,u_extrude_scale:[I.pixelsToGLUnits[0]/(Z*ut),I.pixelsToGLUnits[1]/(Z*ut)],u_overscale_factor:St}},da=function(E,I,C){return{u_matrix:E,u_inv_matrix:I,u_camera_to_center_distance:C.cameraToCenterDistance,u_viewport_size:[C.width,C.height]}},Ya=function(E,I,C){return C===void 0&&(C=1),{u_matrix:E,u_color:I,u_overlay:0,u_overlay_scale:C}},Ra=function(E){return{u_matrix:E}},ts=function(E,I,C,Z){return{u_matrix:E,u_extrude_scale:Ae(I,1,C),u_intensity:Z}},$o=function(E,I,C){var Z=E.transform;return{u_matrix:on(E,I,C),u_ratio:1/Ae(I,1,Z.zoom),u_device_pixel_ratio:y.browser.devicePixelRatio,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},Aa=function(E,I,C,Z){return y.extend($o(E,I,C),{u_image:0,u_image_height:Z})},Le=function(E,I,C,Z){var ut=E.transform,St=Dr(I,ut);return{u_matrix:on(E,I,C),u_texsize:I.imageAtlasTexture.size,u_ratio:1/Ae(I,1,ut.zoom),u_device_pixel_ratio:y.browser.devicePixelRatio,u_image:0,u_scale:[St,Z.fromScale,Z.toScale],u_fade:Z.t,u_units_to_pixels:[1/ut.pixelsToGLUnits[0],1/ut.pixelsToGLUnits[1]]}},gr=function(E,I,C,Z,ut){var St=E.lineAtlas,At=Dr(I,E.transform),te=C.layout.get("line-cap")==="round",we=St.getDash(Z.from,te),Oe=St.getDash(Z.to,te),Ke=we.width*ut.fromScale,nr=Oe.width*ut.toScale;return y.extend($o(E,I,C),{u_patternscale_a:[At/Ke,-we.height/2],u_patternscale_b:[At/nr,-Oe.height/2],u_sdfgamma:St.width/(256*Math.min(Ke,nr)*y.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:we.y,u_tex_y_b:Oe.y,u_mix:ut.t})};function Dr(E,I){return 1/Ae(E,1,I.tileZoom)}function on(E,I,C){return E.translatePosMatrix(I.tileID.posMatrix,I,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}var Yn=function(E,I,C,Z,ut){return{u_matrix:E,u_tl_parent:I,u_scale_parent:C,u_buffer_scale:1,u_fade_t:Z.mix,u_opacity:Z.opacity*ut.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ut.paint.get("raster-brightness-min"),u_brightness_high:ut.paint.get("raster-brightness-max"),u_saturation_factor:(At=ut.paint.get("raster-saturation"),At>0?1-1/(1.001-At):-At),u_contrast_factor:(St=ut.paint.get("raster-contrast"),St>0?1/(1-St):1+St),u_spin_weights:ia(ut.paint.get("raster-hue-rotate"))};var St,At};function ia(E){E*=Math.PI/180;var I=Math.sin(E),C=Math.cos(E);return[(2*C+1)/3,(-Math.sqrt(3)*I-C+1)/3,(Math.sqrt(3)*I-C+1)/3]}var vo,As=function(E,I,C,Z,ut,St,At,te,we,Oe){var Ke=ut.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:I?I.uSizeT:0,u_size:I?I.uSize:0,u_camera_to_center_distance:Ke.cameraToCenterDistance,u_pitch:Ke.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Ke.width/Ke.height,u_fade_change:ut.options.fadeDuration?ut.symbolFadeChange:1,u_matrix:St,u_label_plane_matrix:At,u_coord_matrix:te,u_is_text:+we,u_pitch_with_map:+Z,u_texsize:Oe,u_texture:0}},Bu=function(E,I,C,Z,ut,St,At,te,we,Oe,Ke){var nr=ut.transform;return y.extend(As(E,I,C,Z,ut,St,At,te,we,Oe),{u_gamma_scale:Z?Math.cos(nr._pitch)*nr.cameraToCenterDistance:1,u_device_pixel_ratio:y.browser.devicePixelRatio,u_is_halo:+Ke})},Cl=function(E,I,C,Z,ut,St,At,te,we,Oe){return y.extend(Bu(E,I,C,Z,ut,St,At,te,!0,we,!0),{u_texsize_icon:Oe,u_texture_icon:1})},Al=function(E,I,C){return{u_matrix:E,u_opacity:I,u_color:C}},zc=function(E,I,C,Z,ut,St){return y.extend(function(At,te,we,Oe){var Ke=we.imageManager.getPattern(At.from.toString()),nr=we.imageManager.getPattern(At.to.toString()),$e=we.imageManager.getPixelSize(),pr=$e.width,Sr=$e.height,zr=Math.pow(2,Oe.tileID.overscaledZ),dr=Oe.tileSize*Math.pow(2,we.transform.tileZoom)/zr,Ur=dr*(Oe.tileID.canonical.x+Oe.tileID.wrap*zr),en=dr*Oe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ke.tl,u_pattern_br_a:Ke.br,u_pattern_tl_b:nr.tl,u_pattern_br_b:nr.br,u_texsize:[pr,Sr],u_mix:te.t,u_pattern_size_a:Ke.displaySize,u_pattern_size_b:nr.displaySize,u_scale_a:te.fromScale,u_scale_b:te.toScale,u_tile_units_to_pixels:1/Ae(Oe,1,we.transform.tileZoom),u_pixel_coord_upper:[Ur>>16,en>>16],u_pixel_coord_lower:[65535&Ur,65535&en]}}(Z,St,C,ut),{u_matrix:E,u_opacity:I})},Sh={fillExtrusion:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_lightpos:new y.Uniform3f(E,I.u_lightpos),u_lightintensity:new y.Uniform1f(E,I.u_lightintensity),u_lightcolor:new y.Uniform3f(E,I.u_lightcolor),u_vertical_gradient:new y.Uniform1f(E,I.u_vertical_gradient),u_opacity:new y.Uniform1f(E,I.u_opacity)}},fillExtrusionPattern:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_lightpos:new y.Uniform3f(E,I.u_lightpos),u_lightintensity:new y.Uniform1f(E,I.u_lightintensity),u_lightcolor:new y.Uniform3f(E,I.u_lightcolor),u_vertical_gradient:new y.Uniform1f(E,I.u_vertical_gradient),u_height_factor:new y.Uniform1f(E,I.u_height_factor),u_image:new y.Uniform1i(E,I.u_image),u_texsize:new y.Uniform2f(E,I.u_texsize),u_pixel_coord_upper:new y.Uniform2f(E,I.u_pixel_coord_upper),u_pixel_coord_lower:new y.Uniform2f(E,I.u_pixel_coord_lower),u_scale:new y.Uniform3f(E,I.u_scale),u_fade:new y.Uniform1f(E,I.u_fade),u_opacity:new y.Uniform1f(E,I.u_opacity)}},fill:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix)}},fillPattern:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_image:new y.Uniform1i(E,I.u_image),u_texsize:new y.Uniform2f(E,I.u_texsize),u_pixel_coord_upper:new y.Uniform2f(E,I.u_pixel_coord_upper),u_pixel_coord_lower:new y.Uniform2f(E,I.u_pixel_coord_lower),u_scale:new y.Uniform3f(E,I.u_scale),u_fade:new y.Uniform1f(E,I.u_fade)}},fillOutline:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_world:new y.Uniform2f(E,I.u_world)}},fillOutlinePattern:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_world:new y.Uniform2f(E,I.u_world),u_image:new y.Uniform1i(E,I.u_image),u_texsize:new y.Uniform2f(E,I.u_texsize),u_pixel_coord_upper:new y.Uniform2f(E,I.u_pixel_coord_upper),u_pixel_coord_lower:new y.Uniform2f(E,I.u_pixel_coord_lower),u_scale:new y.Uniform3f(E,I.u_scale),u_fade:new y.Uniform1f(E,I.u_fade)}},circle:function(E,I){return{u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_scale_with_map:new y.Uniform1i(E,I.u_scale_with_map),u_pitch_with_map:new y.Uniform1i(E,I.u_pitch_with_map),u_extrude_scale:new y.Uniform2f(E,I.u_extrude_scale),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_matrix:new y.UniformMatrix4f(E,I.u_matrix)}},collisionBox:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_pixels_to_tile_units:new y.Uniform1f(E,I.u_pixels_to_tile_units),u_extrude_scale:new y.Uniform2f(E,I.u_extrude_scale),u_overscale_factor:new y.Uniform1f(E,I.u_overscale_factor)}},collisionCircle:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_inv_matrix:new y.UniformMatrix4f(E,I.u_inv_matrix),u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_viewport_size:new y.Uniform2f(E,I.u_viewport_size)}},debug:function(E,I){return{u_color:new y.UniformColor(E,I.u_color),u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_overlay:new y.Uniform1i(E,I.u_overlay),u_overlay_scale:new y.Uniform1f(E,I.u_overlay_scale)}},clippingMask:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix)}},heatmap:function(E,I){return{u_extrude_scale:new y.Uniform1f(E,I.u_extrude_scale),u_intensity:new y.Uniform1f(E,I.u_intensity),u_matrix:new y.UniformMatrix4f(E,I.u_matrix)}},heatmapTexture:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_world:new y.Uniform2f(E,I.u_world),u_image:new y.Uniform1i(E,I.u_image),u_color_ramp:new y.Uniform1i(E,I.u_color_ramp),u_opacity:new y.Uniform1f(E,I.u_opacity)}},hillshade:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_image:new y.Uniform1i(E,I.u_image),u_latrange:new y.Uniform2f(E,I.u_latrange),u_light:new y.Uniform2f(E,I.u_light),u_shadow:new y.UniformColor(E,I.u_shadow),u_highlight:new y.UniformColor(E,I.u_highlight),u_accent:new y.UniformColor(E,I.u_accent)}},hillshadePrepare:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_image:new y.Uniform1i(E,I.u_image),u_dimension:new y.Uniform2f(E,I.u_dimension),u_zoom:new y.Uniform1f(E,I.u_zoom),u_unpack:new y.Uniform4f(E,I.u_unpack)}},line:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_ratio:new y.Uniform1f(E,I.u_ratio),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_units_to_pixels:new y.Uniform2f(E,I.u_units_to_pixels)}},lineGradient:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_ratio:new y.Uniform1f(E,I.u_ratio),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_units_to_pixels:new y.Uniform2f(E,I.u_units_to_pixels),u_image:new y.Uniform1i(E,I.u_image),u_image_height:new y.Uniform1f(E,I.u_image_height)}},linePattern:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_texsize:new y.Uniform2f(E,I.u_texsize),u_ratio:new y.Uniform1f(E,I.u_ratio),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_image:new y.Uniform1i(E,I.u_image),u_units_to_pixels:new y.Uniform2f(E,I.u_units_to_pixels),u_scale:new y.Uniform3f(E,I.u_scale),u_fade:new y.Uniform1f(E,I.u_fade)}},lineSDF:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_ratio:new y.Uniform1f(E,I.u_ratio),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_units_to_pixels:new y.Uniform2f(E,I.u_units_to_pixels),u_patternscale_a:new y.Uniform2f(E,I.u_patternscale_a),u_patternscale_b:new y.Uniform2f(E,I.u_patternscale_b),u_sdfgamma:new y.Uniform1f(E,I.u_sdfgamma),u_image:new y.Uniform1i(E,I.u_image),u_tex_y_a:new y.Uniform1f(E,I.u_tex_y_a),u_tex_y_b:new y.Uniform1f(E,I.u_tex_y_b),u_mix:new y.Uniform1f(E,I.u_mix)}},raster:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_tl_parent:new y.Uniform2f(E,I.u_tl_parent),u_scale_parent:new y.Uniform1f(E,I.u_scale_parent),u_buffer_scale:new y.Uniform1f(E,I.u_buffer_scale),u_fade_t:new y.Uniform1f(E,I.u_fade_t),u_opacity:new y.Uniform1f(E,I.u_opacity),u_image0:new y.Uniform1i(E,I.u_image0),u_image1:new y.Uniform1i(E,I.u_image1),u_brightness_low:new y.Uniform1f(E,I.u_brightness_low),u_brightness_high:new y.Uniform1f(E,I.u_brightness_high),u_saturation_factor:new y.Uniform1f(E,I.u_saturation_factor),u_contrast_factor:new y.Uniform1f(E,I.u_contrast_factor),u_spin_weights:new y.Uniform3f(E,I.u_spin_weights)}},symbolIcon:function(E,I){return{u_is_size_zoom_constant:new y.Uniform1i(E,I.u_is_size_zoom_constant),u_is_size_feature_constant:new y.Uniform1i(E,I.u_is_size_feature_constant),u_size_t:new y.Uniform1f(E,I.u_size_t),u_size:new y.Uniform1f(E,I.u_size),u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_pitch:new y.Uniform1f(E,I.u_pitch),u_rotate_symbol:new y.Uniform1i(E,I.u_rotate_symbol),u_aspect_ratio:new y.Uniform1f(E,I.u_aspect_ratio),u_fade_change:new y.Uniform1f(E,I.u_fade_change),u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_label_plane_matrix:new y.UniformMatrix4f(E,I.u_label_plane_matrix),u_coord_matrix:new y.UniformMatrix4f(E,I.u_coord_matrix),u_is_text:new y.Uniform1i(E,I.u_is_text),u_pitch_with_map:new y.Uniform1i(E,I.u_pitch_with_map),u_texsize:new y.Uniform2f(E,I.u_texsize),u_texture:new y.Uniform1i(E,I.u_texture)}},symbolSDF:function(E,I){return{u_is_size_zoom_constant:new y.Uniform1i(E,I.u_is_size_zoom_constant),u_is_size_feature_constant:new y.Uniform1i(E,I.u_is_size_feature_constant),u_size_t:new y.Uniform1f(E,I.u_size_t),u_size:new y.Uniform1f(E,I.u_size),u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_pitch:new y.Uniform1f(E,I.u_pitch),u_rotate_symbol:new y.Uniform1i(E,I.u_rotate_symbol),u_aspect_ratio:new y.Uniform1f(E,I.u_aspect_ratio),u_fade_change:new y.Uniform1f(E,I.u_fade_change),u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_label_plane_matrix:new y.UniformMatrix4f(E,I.u_label_plane_matrix),u_coord_matrix:new y.UniformMatrix4f(E,I.u_coord_matrix),u_is_text:new y.Uniform1i(E,I.u_is_text),u_pitch_with_map:new y.Uniform1i(E,I.u_pitch_with_map),u_texsize:new y.Uniform2f(E,I.u_texsize),u_texture:new y.Uniform1i(E,I.u_texture),u_gamma_scale:new y.Uniform1f(E,I.u_gamma_scale),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_is_halo:new y.Uniform1i(E,I.u_is_halo)}},symbolTextAndIcon:function(E,I){return{u_is_size_zoom_constant:new y.Uniform1i(E,I.u_is_size_zoom_constant),u_is_size_feature_constant:new y.Uniform1i(E,I.u_is_size_feature_constant),u_size_t:new y.Uniform1f(E,I.u_size_t),u_size:new y.Uniform1f(E,I.u_size),u_camera_to_center_distance:new y.Uniform1f(E,I.u_camera_to_center_distance),u_pitch:new y.Uniform1f(E,I.u_pitch),u_rotate_symbol:new y.Uniform1i(E,I.u_rotate_symbol),u_aspect_ratio:new y.Uniform1f(E,I.u_aspect_ratio),u_fade_change:new y.Uniform1f(E,I.u_fade_change),u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_label_plane_matrix:new y.UniformMatrix4f(E,I.u_label_plane_matrix),u_coord_matrix:new y.UniformMatrix4f(E,I.u_coord_matrix),u_is_text:new y.Uniform1i(E,I.u_is_text),u_pitch_with_map:new y.Uniform1i(E,I.u_pitch_with_map),u_texsize:new y.Uniform2f(E,I.u_texsize),u_texsize_icon:new y.Uniform2f(E,I.u_texsize_icon),u_texture:new y.Uniform1i(E,I.u_texture),u_texture_icon:new y.Uniform1i(E,I.u_texture_icon),u_gamma_scale:new y.Uniform1f(E,I.u_gamma_scale),u_device_pixel_ratio:new y.Uniform1f(E,I.u_device_pixel_ratio),u_is_halo:new y.Uniform1i(E,I.u_is_halo)}},background:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_opacity:new y.Uniform1f(E,I.u_opacity),u_color:new y.UniformColor(E,I.u_color)}},backgroundPattern:function(E,I){return{u_matrix:new y.UniformMatrix4f(E,I.u_matrix),u_opacity:new y.Uniform1f(E,I.u_opacity),u_image:new y.Uniform1i(E,I.u_image),u_pattern_tl_a:new y.Uniform2f(E,I.u_pattern_tl_a),u_pattern_br_a:new y.Uniform2f(E,I.u_pattern_br_a),u_pattern_tl_b:new y.Uniform2f(E,I.u_pattern_tl_b),u_pattern_br_b:new y.Uniform2f(E,I.u_pattern_br_b),u_texsize:new y.Uniform2f(E,I.u_texsize),u_mix:new y.Uniform1f(E,I.u_mix),u_pattern_size_a:new y.Uniform2f(E,I.u_pattern_size_a),u_pattern_size_b:new y.Uniform2f(E,I.u_pattern_size_b),u_scale_a:new y.Uniform1f(E,I.u_scale_a),u_scale_b:new y.Uniform1f(E,I.u_scale_b),u_pixel_coord_upper:new y.Uniform2f(E,I.u_pixel_coord_upper),u_pixel_coord_lower:new y.Uniform2f(E,I.u_pixel_coord_lower),u_tile_units_to_pixels:new y.Uniform1f(E,I.u_tile_units_to_pixels)}}};function nf(E,I,C,Z,ut,St,At){for(var te=E.context,we=te.gl,Oe=E.useProgram("collisionBox"),Ke=[],nr=0,$e=0,pr=0;pr<Z.length;pr++){var Sr=Z[pr],zr=I.getTile(Sr),dr=zr.getBucket(C);if(dr){var Ur=Sr.posMatrix;ut[0]===0&&ut[1]===0||(Ur=E.translatePosMatrix(Sr.posMatrix,zr,ut,St));var en=At?dr.textCollisionBox:dr.iconCollisionBox,Sn=dr.collisionCircleArray;if(Sn.length>0){var Zn=y.create(),Pn=Ur;y.mul(Zn,dr.placementInvProjMatrix,E.transform.glCoordMatrix),y.mul(Zn,Zn,dr.placementViewportMatrix),Ke.push({circleArray:Sn,circleOffset:$e,transform:Pn,invTransform:Zn}),$e=nr+=Sn.length/4}en&&Oe.draw(te,we.LINES,Te.disabled,Ze.disabled,E.colorModeForRenderPass(),lr.disabled,qn(Ur,E.transform,zr),C.id,en.layoutVertexBuffer,en.indexBuffer,en.segments,null,E.transform.zoom,null,null,en.collisionVertexBuffer)}}if(At&&Ke.length){var Fn=E.useProgram("collisionCircle"),gi=new y.StructArrayLayout2f1f2i16;gi.resize(4*nr),gi._trim();for(var Vi=0,Hi=0,fa=Ke;Hi<fa.length;Hi+=1)for(var $a=fa[Hi],Qa=0;Qa<$a.circleArray.length/4;Qa++){var so=4*Qa,No=$a.circleArray[so+0],ea=$a.circleArray[so+1],Eo=$a.circleArray[so+2],Ro=$a.circleArray[so+3];gi.emplace(Vi++,No,ea,Eo,Ro,0),gi.emplace(Vi++,No,ea,Eo,Ro,1),gi.emplace(Vi++,No,ea,Eo,Ro,2),gi.emplace(Vi++,No,ea,Eo,Ro,3)}(!vo||vo.length<2*nr)&&(vo=function(mu){var al=2*mu,vl=new y.StructArrayLayout3ui6;vl.resize(al),vl._trim();for(var du=0;du<al;du++){var Nu=6*du;vl.uint16[Nu+0]=4*du+0,vl.uint16[Nu+1]=4*du+1,vl.uint16[Nu+2]=4*du+2,vl.uint16[Nu+3]=4*du+2,vl.uint16[Nu+4]=4*du+3,vl.uint16[Nu+5]=4*du+0}return vl}(nr));for(var bo=te.createIndexBuffer(vo,!0),ho=te.createVertexBuffer(gi,y.collisionCircleLayout.members,!0),zo=0,yo=Ke;zo<yo.length;zo+=1){var uo=yo[zo],tu=da(uo.transform,uo.invTransform,E.transform);Fn.draw(te,we.TRIANGLES,Te.disabled,Ze.disabled,E.colorModeForRenderPass(),lr.disabled,tu,C.id,ho,bo,y.SegmentVector.simpleSegment(0,2*uo.circleOffset,uo.circleArray.length,uo.circleArray.length/2),null,E.transform.zoom,null,null,null)}ho.destroy(),bo.destroy()}}var Zu=y.identity(new Float32Array(16));function tp(E,I,C,Z,ut,St){var At=y.getAnchorAlignment(E),te=-(At.horizontalAlign-.5)*I,we=-(At.verticalAlign-.5)*C,Oe=y.evaluateVariableOffset(E,Z);return new y.Point((te/ut+Oe[0])*St,(we/ut+Oe[1])*St)}function qp(E,I,C,Z,ut,St,At,te,we,Oe,Ke){var nr=E.text.placedSymbolArray,$e=E.text.dynamicLayoutVertexArray,pr=E.icon.dynamicLayoutVertexArray,Sr={};$e.clear();for(var zr=0;zr<nr.length;zr++){var dr=nr.get(zr),Ur=dr.hidden||!dr.crossTileID||E.allowVerticalPlacement&&!dr.placedOrientation?null:Z[dr.crossTileID];if(Ur){var en=new y.Point(dr.anchorX,dr.anchorY),Sn=fo(en,C?te:At),Zn=Po(St.cameraToCenterDistance,Sn.signedDistanceFromCamera),Pn=ut.evaluateSizeForFeature(E.textSizeData,Oe,dr)*Zn/y.ONE_EM;C&&(Pn*=E.tilePixelRatio/we);for(var Fn=tp(Ur.anchor,Ur.width,Ur.height,Ur.textOffset,Ur.textBoxScale,Pn),gi=C?fo(en.add(Fn),At).point:Sn.point.add(I?Fn.rotate(-St.angle):Fn),Vi=E.allowVerticalPlacement&&dr.placedOrientation===y.WritingMode.vertical?Math.PI/2:0,Hi=0;Hi<dr.numGlyphs;Hi++)y.addDynamicAttributes($e,gi,Vi);Ke&&dr.associatedIconIndex>=0&&(Sr[dr.associatedIconIndex]={shiftedAnchor:gi,angle:Vi})}else Wt(dr.numGlyphs,$e)}if(Ke){pr.clear();for(var fa=E.icon.placedSymbolArray,$a=0;$a<fa.length;$a++){var Qa=fa.get($a);if(Qa.hidden)Wt(Qa.numGlyphs,pr);else{var so=Sr[$a];if(so)for(var No=0;No<Qa.numGlyphs;No++)y.addDynamicAttributes(pr,so.shiftedAnchor,so.angle);else Wt(Qa.numGlyphs,pr)}}E.icon.dynamicLayoutVertexBuffer.updateData(pr)}E.text.dynamicLayoutVertexBuffer.updateData($e)}function Md(E,I,C){return C.iconsInText&&I?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Vl(E,I,C,Z,ut,St,At,te,we,Oe,Ke,nr){for(var $e=E.context,pr=$e.gl,Sr=E.transform,zr=te==="map",dr=we==="map",Ur=zr&&C.layout.get("symbol-placement")!=="point",en=zr&&!dr&&!Ur,Sn=C.layout.get("symbol-sort-key").constantOr(1)!==void 0,Zn=!1,Pn=E.depthModeForSublayer(0,Te.ReadOnly),Fn=C.layout.get("text-variable-anchor"),gi=[],Vi=0,Hi=Z;Vi<Hi.length;Vi+=1){var fa=Hi[Vi],$a=I.getTile(fa),Qa=$a.getBucket(C);if(Qa){var so=ut?Qa.text:Qa.icon;if(so&&so.segments.get().length){var No=so.programConfigurations.get(C.id),ea=ut||Qa.sdfIcons,Eo=ut?Qa.textSizeData:Qa.iconSizeData,Ro=dr||Sr.pitch!==0,bo=E.useProgram(Md(ea,ut,Qa),No),ho=y.evaluateSizeForZoom(Eo,Sr.zoom),zo=void 0,yo=[0,0],uo=void 0,tu=void 0,mu=null,al=void 0;if(ut)uo=$a.glyphAtlasTexture,tu=pr.LINEAR,zo=$a.glyphAtlasTexture.size,Qa.iconsInText&&(yo=$a.imageAtlasTexture.size,mu=$a.imageAtlasTexture,al=Ro||E.options.rotating||E.options.zooming||Eo.kind==="composite"||Eo.kind==="camera"?pr.LINEAR:pr.NEAREST);else{var vl=C.layout.get("icon-size").constantOr(0)!==1||Qa.iconsNeedLinear;uo=$a.imageAtlasTexture,tu=ea||E.options.rotating||E.options.zooming||vl||Ro?pr.LINEAR:pr.NEAREST,zo=$a.imageAtlasTexture.size}var du=Ae($a,1,E.transform.zoom),Nu=Wo(fa.posMatrix,dr,zr,E.transform,du),Jl=mo(fa.posMatrix,dr,zr,E.transform,du),jl=Fn&&Qa.hasTextData(),tc=C.layout.get("icon-text-fit")!=="none"&&jl&&Qa.hasIconData();Ur&&pa(Qa,fa.posMatrix,E,ut,Nu,Jl,dr,Oe);var cu=E.translatePosMatrix(fa.posMatrix,$a,St,At),Ac=Ur||ut&&Fn||tc?Zu:Nu,Mc=E.translatePosMatrix(Jl,$a,St,At,!0),Lh=ea&&C.paint.get(ut?"text-halo-width":"icon-halo-width").constantOr(1)!==0,eh={program:bo,buffers:so,uniformValues:ea?Qa.iconsInText?Cl(Eo.kind,ho,en,dr,E,cu,Ac,Mc,zo,yo):Bu(Eo.kind,ho,en,dr,E,cu,Ac,Mc,ut,zo,!0):As(Eo.kind,ho,en,dr,E,cu,Ac,Mc,ut,zo),atlasTexture:uo,atlasTextureIcon:mu,atlasInterpolation:tu,atlasInterpolationIcon:al,isSDF:ea,hasHalo:Lh};if(Sn&&Qa.canOverlap){Zn=!0;for(var vc=0,Mf=so.segments.get();vc<Mf.length;vc+=1){var sp=Mf[vc];gi.push({segments:new y.SegmentVector([sp]),sortKey:sp.sortKey,state:eh})}}else gi.push({segments:so.segments,sortKey:0,state:eh})}}}Zn&&gi.sort(function(Tf,df){return Tf.sortKey-df.sortKey});for(var gc=0,rh=gi;gc<rh.length;gc+=1){var Zc=rh[gc],Ju=Zc.state;if($e.activeTexture.set(pr.TEXTURE0),Ju.atlasTexture.bind(Ju.atlasInterpolation,pr.CLAMP_TO_EDGE),Ju.atlasTextureIcon&&($e.activeTexture.set(pr.TEXTURE1),Ju.atlasTextureIcon&&Ju.atlasTextureIcon.bind(Ju.atlasInterpolationIcon,pr.CLAMP_TO_EDGE)),Ju.isSDF){var Kc=Ju.uniformValues;Ju.hasHalo&&(Kc.u_is_halo=1,wh(Ju.buffers,Zc.segments,C,E,Ju.program,Pn,Ke,nr,Kc)),Kc.u_is_halo=0}wh(Ju.buffers,Zc.segments,C,E,Ju.program,Pn,Ke,nr,Ju.uniformValues)}}function wh(E,I,C,Z,ut,St,At,te,we){var Oe=Z.context;ut.draw(Oe,Oe.gl.TRIANGLES,St,At,te,lr.disabled,we,C.id,E.layoutVertexBuffer,E.indexBuffer,I,C.paint,Z.transform.zoom,E.programConfigurations.get(C.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Ip(E,I,C,Z,ut,St,At){var te,we,Oe,Ke,nr,$e=E.context.gl,pr=C.paint.get("fill-pattern"),Sr=pr&&pr.constantOr(1),zr=C.getCrossfadeParameters();At?(we=Sr&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=$e.LINES):(we=Sr?"fillPattern":"fill",te=$e.TRIANGLES);for(var dr=0,Ur=Z;dr<Ur.length;dr+=1){var en=Ur[dr],Sn=I.getTile(en);if(!Sr||Sn.patternsLoaded()){var Zn=Sn.getBucket(C);if(Zn){var Pn=Zn.programConfigurations.get(C.id),Fn=E.useProgram(we,Pn);Sr&&(E.context.activeTexture.set($e.TEXTURE0),Sn.imageAtlasTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE),Pn.updatePaintBuffers(zr));var gi=pr.constantOr(null);if(gi&&Sn.imageAtlas){var Vi=Sn.imageAtlas,Hi=Vi.patternPositions[gi.to.toString()],fa=Vi.patternPositions[gi.from.toString()];Hi&&fa&&Pn.setConstantPatternPositions(Hi,fa)}var $a=E.translatePosMatrix(en.posMatrix,Sn,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(At){Ke=Zn.indexBuffer2,nr=Zn.segments2;var Qa=[$e.drawingBufferWidth,$e.drawingBufferHeight];Oe=we==="fillOutlinePattern"&&Sr?bn($a,E,zr,Sn,Qa):Hr($a,Qa)}else Ke=Zn.indexBuffer,nr=Zn.segments,Oe=Sr?Er($a,E,zr,Sn):hr($a);Fn.draw(E.context,te,ut,E.stencilModeForClipping(en),St,lr.disabled,Oe,C.id,Zn.layoutVertexBuffer,Ke,nr,C.paint,E.transform.zoom,Pn)}}}}function Jp(E,I,C,Z,ut,St,At){for(var te=E.context,we=te.gl,Oe=C.paint.get("fill-extrusion-pattern"),Ke=Oe.constantOr(1),nr=C.getCrossfadeParameters(),$e=C.paint.get("fill-extrusion-opacity"),pr=0,Sr=Z;pr<Sr.length;pr+=1){var zr=Sr[pr],dr=I.getTile(zr),Ur=dr.getBucket(C);if(Ur){var en=Ur.programConfigurations.get(C.id),Sn=E.useProgram(Ke?"fillExtrusionPattern":"fillExtrusion",en);Ke&&(E.context.activeTexture.set(we.TEXTURE0),dr.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),en.updatePaintBuffers(nr));var Zn=Oe.constantOr(null);if(Zn&&dr.imageAtlas){var Pn=dr.imageAtlas,Fn=Pn.patternPositions[Zn.to.toString()],gi=Pn.patternPositions[Zn.from.toString()];Fn&&gi&&en.setConstantPatternPositions(Fn,gi)}var Vi=E.translatePosMatrix(zr.posMatrix,dr,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),Hi=C.paint.get("fill-extrusion-vertical-gradient"),fa=Ke?Ye(Vi,E,Hi,$e,zr,nr,dr):Ne(Vi,E,Hi,$e);Sn.draw(te,te.gl.TRIANGLES,ut,St,At,lr.backCCW,fa,C.id,Ur.layoutVertexBuffer,Ur.indexBuffer,Ur.segments,C.paint,E.transform.zoom,en)}}}function Eh(E,I,C,Z,ut,St){var At=E.context,te=At.gl,we=I.fbo;if(we){var Oe=E.useProgram("hillshade");At.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,we.colorAttachment.get());var Ke=function(nr,$e,pr){var Sr=pr.paint.get("hillshade-shadow-color"),zr=pr.paint.get("hillshade-highlight-color"),dr=pr.paint.get("hillshade-accent-color"),Ur=pr.paint.get("hillshade-illumination-direction")*(Math.PI/180);pr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ur-=nr.transform.angle);var en,Sn,Zn,Pn=!nr.options.moving;return{u_matrix:nr.transform.calculatePosMatrix($e.tileID.toUnwrapped(),Pn),u_image:0,u_latrange:(en=$e.tileID,Sn=Math.pow(2,en.canonical.z),Zn=en.canonical.y,[new y.MercatorCoordinate(0,Zn/Sn).toLngLat().lat,new y.MercatorCoordinate(0,(Zn+1)/Sn).toLngLat().lat]),u_light:[pr.paint.get("hillshade-exaggeration"),Ur],u_shadow:Sr,u_highlight:zr,u_accent:dr}}(E,I,C);Oe.draw(At,te.TRIANGLES,Z,ut,St,lr.disabled,Ke,C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}}function yg(E,I,C,Z,ut,St){var At=E.context,te=At.gl,we=I.dem;if(we&&we.data){var Oe=we.dim,Ke=we.stride,nr=we.getPixels();if(At.activeTexture.set(te.TEXTURE1),At.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||E.getTileTexture(Ke),I.demTexture){var $e=I.demTexture;$e.update(nr,{premultiply:!1}),$e.bind(te.NEAREST,te.CLAMP_TO_EDGE)}else I.demTexture=new y.Texture(At,nr,te.RGBA,{premultiply:!1}),I.demTexture.bind(te.NEAREST,te.CLAMP_TO_EDGE);At.activeTexture.set(te.TEXTURE0);var pr=I.fbo;if(!pr){var Sr=new y.Texture(At,{width:Oe,height:Oe,data:null},te.RGBA);Sr.bind(te.LINEAR,te.CLAMP_TO_EDGE),(pr=I.fbo=At.createFramebuffer(Oe,Oe,!0)).colorAttachment.set(Sr.texture)}At.bindFramebuffer.set(pr.framebuffer),At.viewport.set([0,0,Oe,Oe]),E.useProgram("hillshadePrepare").draw(At,te.TRIANGLES,Z,ut,St,lr.disabled,function(zr,dr){var Ur=dr.stride,en=y.create();return y.ortho(en,0,y.EXTENT,-y.EXTENT,0,0,1),y.translate(en,en,[0,-y.EXTENT,0]),{u_matrix:en,u_image:1,u_dimension:[Ur,Ur],u_zoom:zr.overscaledZ,u_unpack:dr.getUnpackVector()}}(I.tileID,we),C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function Ch(E,I,C,Z,ut){var St=Z.paint.get("raster-fade-duration");if(St>0){var At=y.browser.now(),te=(At-E.timeAdded)/St,we=I?(At-I.timeAdded)/St:-1,Oe=C.getSource(),Ke=ut.coveringZoomLevel({tileSize:Oe.tileSize,roundZoom:Oe.roundZoom}),nr=!I||Math.abs(I.tileID.overscaledZ-Ke)>Math.abs(E.tileID.overscaledZ-Ke),$e=nr&&E.refreshedUponExpiration?1:y.clamp(nr?te:1-we,0,1);return E.refreshedUponExpiration&&te>=1&&(E.refreshedUponExpiration=!1),I?{opacity:1,mix:1-$e}:{opacity:$e,mix:0}}return{opacity:1,mix:0}}var Xf=new y.Color(1,0,0,1),Op=new y.Color(0,1,0,1),Ah=new y.Color(0,0,1,1),Ft=new y.Color(1,0,1,1),Lp=new y.Color(0,1,1,1);function Sv(E,I,C,Z){ep(E,0,I+C/2,E.transform.width,C,Z)}function wv(E,I,C,Z){ep(E,I-C/2,0,C,E.transform.height,Z)}function ep(E,I,C,Z,ut,St){var At=E.context,te=At.gl;te.enable(te.SCISSOR_TEST),te.scissor(I*y.browser.devicePixelRatio,C*y.browser.devicePixelRatio,Z*y.browser.devicePixelRatio,ut*y.browser.devicePixelRatio),At.clear({color:St}),te.disable(te.SCISSOR_TEST)}function Ev(E,I,C){var Z=E.context,ut=Z.gl,St=C.posMatrix,At=E.useProgram("debug"),te=Te.disabled,we=Ze.disabled,Oe=E.colorModeForRenderPass();Z.activeTexture.set(ut.TEXTURE0),E.emptyTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),At.draw(Z,ut.LINE_STRIP,te,we,Oe,lr.disabled,Ya(St,y.Color.red),"$debug",E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments);var Ke=I.getTileByID(C.key).latestRawTileData,nr=Math.floor((Ke&&Ke.byteLength||0)/1024),$e=I.getTile(C).tileSize,pr=512/Math.min($e,512)*(C.overscaledZ/E.transform.zoom)*.5,Sr=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(Sr+=" => "+C.overscaledZ),function(zr,dr){zr.initDebugOverlayCanvas();var Ur=zr.debugOverlayCanvas,en=zr.context.gl,Sn=zr.debugOverlayCanvas.getContext("2d");Sn.clearRect(0,0,Ur.width,Ur.height),Sn.shadowColor="white",Sn.shadowBlur=2,Sn.lineWidth=1.5,Sn.strokeStyle="white",Sn.textBaseline="top",Sn.font="bold 36px Open Sans, sans-serif",Sn.fillText(dr,5,5),Sn.strokeText(dr,5,5),zr.debugOverlayTexture.update(Ur),zr.debugOverlayTexture.bind(en.LINEAR,en.CLAMP_TO_EDGE)}(E,Sr+" "+nr+"kb"),At.draw(Z,ut.TRIANGLES,te,we,or.alphaBlended,lr.disabled,Ya(St,y.Color.transparent,pr),"$debug",E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments)}var wf={symbol:function(E,I,C,Z,ut){if(E.renderPass==="translucent"){var St=Ze.disabled,At=E.colorModeForRenderPass();C.layout.get("text-variable-anchor")&&function(te,we,Oe,Ke,nr,$e,pr){for(var Sr=we.transform,zr=nr==="map",dr=$e==="map",Ur=0,en=te;Ur<en.length;Ur+=1){var Sn=en[Ur],Zn=Ke.getTile(Sn),Pn=Zn.getBucket(Oe);if(Pn&&Pn.text&&Pn.text.segments.get().length){var Fn=y.evaluateSizeForZoom(Pn.textSizeData,Sr.zoom),gi=Ae(Zn,1,we.transform.zoom),Vi=Wo(Sn.posMatrix,dr,zr,we.transform,gi),Hi=Oe.layout.get("icon-text-fit")!=="none"&&Pn.hasIconData();if(Fn){var fa=Math.pow(2,Sr.zoom-Zn.tileID.overscaledZ);qp(Pn,zr,dr,pr,y.symbolSize,Sr,Vi,Sn.posMatrix,fa,Fn,Hi)}}}}(Z,E,C,I,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),ut),C.paint.get("icon-opacity").constantOr(1)!==0&&Vl(E,I,C,Z,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),St,At),C.paint.get("text-opacity").constantOr(1)!==0&&Vl(E,I,C,Z,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),St,At),I.map.showCollisionBoxes&&(nf(E,I,C,Z,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),nf(E,I,C,Z,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))}},circle:function(E,I,C,Z){if(E.renderPass==="translucent"){var ut=C.paint.get("circle-opacity"),St=C.paint.get("circle-stroke-width"),At=C.paint.get("circle-stroke-opacity"),te=C.layout.get("circle-sort-key").constantOr(1)!==void 0;if(ut.constantOr(1)!==0||St.constantOr(1)!==0&&At.constantOr(1)!==0){for(var we=E.context,Oe=we.gl,Ke=E.depthModeForSublayer(0,Te.ReadOnly),nr=Ze.disabled,$e=E.colorModeForRenderPass(),pr=[],Sr=0;Sr<Z.length;Sr++){var zr=Z[Sr],dr=I.getTile(zr),Ur=dr.getBucket(C);if(Ur){var en=Ur.programConfigurations.get(C.id),Sn={programConfiguration:en,program:E.useProgram("circle",en),layoutVertexBuffer:Ur.layoutVertexBuffer,indexBuffer:Ur.indexBuffer,uniformValues:ri(E,zr,dr,C)};if(te)for(var Zn=0,Pn=Ur.segments.get();Zn<Pn.length;Zn+=1){var Fn=Pn[Zn];pr.push({segments:new y.SegmentVector([Fn]),sortKey:Fn.sortKey,state:Sn})}else pr.push({segments:Ur.segments,sortKey:0,state:Sn})}}te&&pr.sort(function($a,Qa){return $a.sortKey-Qa.sortKey});for(var gi=0,Vi=pr;gi<Vi.length;gi+=1){var Hi=Vi[gi],fa=Hi.state;fa.program.draw(we,Oe.TRIANGLES,Ke,nr,$e,lr.disabled,fa.uniformValues,C.id,fa.layoutVertexBuffer,fa.indexBuffer,Hi.segments,C.paint,E.transform.zoom,fa.programConfiguration)}}}},heatmap:function(E,I,C,Z){if(C.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){var ut=E.context,St=ut.gl,At=Ze.disabled,te=new or([St.ONE,St.ONE],y.Color.transparent,[!0,!0,!0,!0]);(function(pr,Sr,zr){var dr=pr.gl;pr.activeTexture.set(dr.TEXTURE1),pr.viewport.set([0,0,Sr.width/4,Sr.height/4]);var Ur=zr.heatmapFbo;if(Ur)dr.bindTexture(dr.TEXTURE_2D,Ur.colorAttachment.get()),pr.bindFramebuffer.set(Ur.framebuffer);else{var en=dr.createTexture();dr.bindTexture(dr.TEXTURE_2D,en),dr.texParameteri(dr.TEXTURE_2D,dr.TEXTURE_WRAP_S,dr.CLAMP_TO_EDGE),dr.texParameteri(dr.TEXTURE_2D,dr.TEXTURE_WRAP_T,dr.CLAMP_TO_EDGE),dr.texParameteri(dr.TEXTURE_2D,dr.TEXTURE_MIN_FILTER,dr.LINEAR),dr.texParameteri(dr.TEXTURE_2D,dr.TEXTURE_MAG_FILTER,dr.LINEAR),Ur=zr.heatmapFbo=pr.createFramebuffer(Sr.width/4,Sr.height/4,!1),function(Sn,Zn,Pn,Fn){var gi=Sn.gl;gi.texImage2D(gi.TEXTURE_2D,0,gi.RGBA,Zn.width/4,Zn.height/4,0,gi.RGBA,Sn.extRenderToTextureHalfFloat?Sn.extTextureHalfFloat.HALF_FLOAT_OES:gi.UNSIGNED_BYTE,null),Fn.colorAttachment.set(Pn)}(pr,Sr,en,Ur)}})(ut,E,C),ut.clear({color:y.Color.transparent});for(var we=0;we<Z.length;we++){var Oe=Z[we];if(!I.hasRenderableParent(Oe)){var Ke=I.getTile(Oe),nr=Ke.getBucket(C);if(nr){var $e=nr.programConfigurations.get(C.id);E.useProgram("heatmap",$e).draw(ut,St.TRIANGLES,Te.disabled,At,te,lr.disabled,ts(Oe.posMatrix,Ke,E.transform.zoom,C.paint.get("heatmap-intensity")),C.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,C.paint,E.transform.zoom,$e)}}}ut.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(pr,Sr){var zr=pr.context,dr=zr.gl,Ur=Sr.heatmapFbo;if(Ur){zr.activeTexture.set(dr.TEXTURE0),dr.bindTexture(dr.TEXTURE_2D,Ur.colorAttachment.get()),zr.activeTexture.set(dr.TEXTURE1);var en=Sr.colorRampTexture;en||(en=Sr.colorRampTexture=new y.Texture(zr,Sr.colorRamp,dr.RGBA)),en.bind(dr.LINEAR,dr.CLAMP_TO_EDGE),pr.useProgram("heatmapTexture").draw(zr,dr.TRIANGLES,Te.disabled,Ze.disabled,pr.colorModeForRenderPass(),lr.disabled,function(Sn,Zn,Pn,Fn){var gi=y.create();y.ortho(gi,0,Sn.width,Sn.height,0,0,1);var Vi=Sn.context.gl;return{u_matrix:gi,u_world:[Vi.drawingBufferWidth,Vi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Zn.paint.get("heatmap-opacity")}}(pr,Sr),Sr.id,pr.viewportBuffer,pr.quadTriangleIndexBuffer,pr.viewportSegments,Sr.paint,pr.transform.zoom)}}(E,C))},line:function(E,I,C,Z){if(E.renderPass==="translucent"){var ut=C.paint.get("line-opacity"),St=C.paint.get("line-width");if(ut.constantOr(1)!==0&&St.constantOr(1)!==0)for(var At=E.depthModeForSublayer(0,Te.ReadOnly),te=E.colorModeForRenderPass(),we=C.paint.get("line-dasharray"),Oe=C.paint.get("line-pattern"),Ke=Oe.constantOr(1),nr=C.paint.get("line-gradient"),$e=C.getCrossfadeParameters(),pr=Ke?"linePattern":we?"lineSDF":nr?"lineGradient":"line",Sr=E.context,zr=Sr.gl,dr=!0,Ur=0,en=Z;Ur<en.length;Ur+=1){var Sn=en[Ur],Zn=I.getTile(Sn);if(!Ke||Zn.patternsLoaded()){var Pn=Zn.getBucket(C);if(Pn){var Fn=Pn.programConfigurations.get(C.id),gi=E.context.program.get(),Vi=E.useProgram(pr,Fn),Hi=dr||Vi.program!==gi,fa=Oe.constantOr(null);if(fa&&Zn.imageAtlas){var $a=Zn.imageAtlas,Qa=$a.patternPositions[fa.to.toString()],so=$a.patternPositions[fa.from.toString()];Qa&&so&&Fn.setConstantPatternPositions(Qa,so)}var No=Ke?Le(E,Zn,C,$e):we?gr(E,Zn,C,we,$e):nr?Aa(E,Zn,C,Pn.lineClipsArray.length):$o(E,Zn,C);if(Ke)Sr.activeTexture.set(zr.TEXTURE0),Zn.imageAtlasTexture.bind(zr.LINEAR,zr.CLAMP_TO_EDGE),Fn.updatePaintBuffers($e);else if(we&&(Hi||E.lineAtlas.dirty))Sr.activeTexture.set(zr.TEXTURE0),E.lineAtlas.bind(Sr);else if(nr){var ea=Pn.gradients[C.id],Eo=ea.texture;if(C.gradientVersion!==ea.version){var Ro=256;if(C.stepInterpolant){var bo=I.getSource().maxzoom,ho=Sn.canonical.z===bo?Math.ceil(1<<E.transform.maxZoom-Sn.canonical.z):1;Ro=y.clamp(y.nextPowerOfTwo(Pn.maxLineLength/y.EXTENT*1024*ho),256,Sr.maxTextureSize)}ea.gradient=y.renderColorRamp({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Ro,image:ea.gradient||void 0,clips:Pn.lineClipsArray}),ea.texture?ea.texture.update(ea.gradient):ea.texture=new y.Texture(Sr,ea.gradient,zr.RGBA),ea.version=C.gradientVersion,Eo=ea.texture}Sr.activeTexture.set(zr.TEXTURE0),Eo.bind(C.stepInterpolant?zr.NEAREST:zr.LINEAR,zr.CLAMP_TO_EDGE)}Vi.draw(Sr,zr.TRIANGLES,At,E.stencilModeForClipping(Sn),te,lr.disabled,No,C.id,Pn.layoutVertexBuffer,Pn.indexBuffer,Pn.segments,C.paint,E.transform.zoom,Fn,Pn.layoutVertexBuffer2),dr=!1}}}}},fill:function(E,I,C,Z){var ut=C.paint.get("fill-color"),St=C.paint.get("fill-opacity");if(St.constantOr(1)!==0){var At=E.colorModeForRenderPass(),te=C.paint.get("fill-pattern"),we=E.opaquePassEnabledForLayer()&&!te.constantOr(1)&&ut.constantOr(y.Color.transparent).a===1&&St.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===we){var Oe=E.depthModeForSublayer(1,E.renderPass==="opaque"?Te.ReadWrite:Te.ReadOnly);Ip(E,I,C,Z,Oe,At,!1)}if(E.renderPass==="translucent"&&C.paint.get("fill-antialias")){var Ke=E.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Te.ReadOnly);Ip(E,I,C,Z,Ke,At,!0)}}},"fill-extrusion":function(E,I,C,Z){var ut=C.paint.get("fill-extrusion-opacity");if(ut!==0&&E.renderPass==="translucent"){var St=new Te(E.context.gl.LEQUAL,Te.ReadWrite,E.depthRangeFor3D);if(ut!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Jp(E,I,C,Z,St,Ze.disabled,or.disabled),Jp(E,I,C,Z,St,E.stencilModeFor3D(),E.colorModeForRenderPass());else{var At=E.colorModeForRenderPass();Jp(E,I,C,Z,St,Ze.disabled,At)}}},hillshade:function(E,I,C,Z){if(E.renderPass==="offscreen"||E.renderPass==="translucent"){for(var ut=E.context,St=E.depthModeForSublayer(0,Te.ReadOnly),At=E.colorModeForRenderPass(),te=E.renderPass==="translucent"?E.stencilConfigForOverlap(Z):[{},Z],we=te[0],Oe=0,Ke=te[1];Oe<Ke.length;Oe+=1){var nr=Ke[Oe],$e=I.getTile(nr);$e.needsHillshadePrepare&&E.renderPass==="offscreen"?yg(E,$e,C,St,Ze.disabled,At):E.renderPass==="translucent"&&Eh(E,$e,C,St,we[nr.overscaledZ],At)}ut.viewport.set([0,0,E.width,E.height])}},raster:function(E,I,C,Z){if(E.renderPass==="translucent"&&C.paint.get("raster-opacity")!==0&&Z.length)for(var ut=E.context,St=ut.gl,At=I.getSource(),te=E.useProgram("raster"),we=E.colorModeForRenderPass(),Oe=At instanceof st?[{},Z]:E.stencilConfigForOverlap(Z),Ke=Oe[0],nr=Oe[1],$e=nr[nr.length-1].overscaledZ,pr=!E.options.moving,Sr=0,zr=nr;Sr<zr.length;Sr+=1){var dr=zr[Sr],Ur=E.depthModeForSublayer(dr.overscaledZ-$e,C.paint.get("raster-opacity")===1?Te.ReadWrite:Te.ReadOnly,St.LESS),en=I.getTile(dr),Sn=E.transform.calculatePosMatrix(dr.toUnwrapped(),pr);en.registerFadeDuration(C.paint.get("raster-fade-duration"));var Zn=I.findLoadedParent(dr,0),Pn=Ch(en,Zn,I,C,E.transform),Fn=void 0,gi=void 0,Vi=C.paint.get("raster-resampling")==="nearest"?St.NEAREST:St.LINEAR;ut.activeTexture.set(St.TEXTURE0),en.texture.bind(Vi,St.CLAMP_TO_EDGE,St.LINEAR_MIPMAP_NEAREST),ut.activeTexture.set(St.TEXTURE1),Zn?(Zn.texture.bind(Vi,St.CLAMP_TO_EDGE,St.LINEAR_MIPMAP_NEAREST),Fn=Math.pow(2,Zn.tileID.overscaledZ-en.tileID.overscaledZ),gi=[en.tileID.canonical.x*Fn%1,en.tileID.canonical.y*Fn%1]):en.texture.bind(Vi,St.CLAMP_TO_EDGE,St.LINEAR_MIPMAP_NEAREST);var Hi=Yn(Sn,gi||[0,0],Fn||1,Pn,C);At instanceof st?te.draw(ut,St.TRIANGLES,Ur,Ze.disabled,we,lr.disabled,Hi,C.id,At.boundsBuffer,E.quadTriangleIndexBuffer,At.boundsSegments):te.draw(ut,St.TRIANGLES,Ur,Ke[dr.overscaledZ],we,lr.disabled,Hi,C.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,I,C){var Z=C.paint.get("background-color"),ut=C.paint.get("background-opacity");if(ut!==0){var St=E.context,At=St.gl,te=E.transform,we=te.tileSize,Oe=C.paint.get("background-pattern");if(!E.isPatternMissing(Oe)){var Ke=!Oe&&Z.a===1&&ut===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass===Ke){var nr=Ze.disabled,$e=E.depthModeForSublayer(0,Ke==="opaque"?Te.ReadWrite:Te.ReadOnly),pr=E.colorModeForRenderPass(),Sr=E.useProgram(Oe?"backgroundPattern":"background"),zr=te.coveringTiles({tileSize:we});Oe&&(St.activeTexture.set(At.TEXTURE0),E.imageManager.bind(E.context));for(var dr=C.getCrossfadeParameters(),Ur=0,en=zr;Ur<en.length;Ur+=1){var Sn=en[Ur],Zn=E.transform.calculatePosMatrix(Sn.toUnwrapped()),Pn=Oe?zc(Zn,ut,E,Oe,{tileID:Sn,tileSize:we},dr):Al(Zn,ut,Z);Sr.draw(St,At.TRIANGLES,$e,nr,pr,lr.disabled,Pn,C.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}}}},debug:function(E,I,C){for(var Z=0;Z<C.length;Z++)Ev(E,I,C[Z])},custom:function(E,I,C){var Z=E.context,ut=C.implementation;if(E.renderPass==="offscreen"){var St=ut.prerender;St&&(E.setCustomLayerDefaults(),Z.setColorMode(E.colorModeForRenderPass()),St.call(ut,Z.gl,E.transform.customLayerMatrix()),Z.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),Z.setColorMode(E.colorModeForRenderPass()),Z.setStencilMode(Ze.disabled);var At=ut.renderingMode==="3d"?new Te(E.context.gl.LEQUAL,Te.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Te.ReadOnly);Z.setDepthMode(At),ut.render(Z.gl,E.transform.customLayerMatrix()),Z.setDirty(),E.setBaseState(),Z.bindFramebuffer.set(null)}}},Ms=function(E,I){this.context=new Be(E),this.transform=I,this._tileTextures={},this.setup(),this.numSublayers=tr.maxUnderzooming+tr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $s,this.gpuTimers={}};Ms.prototype.resize=function(E,I){if(this.width=E*y.browser.devicePixelRatio,this.height=I*y.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var C=0,Z=this.style._order;C<Z.length;C+=1)this.style._layers[Z[C]].resize()},Ms.prototype.setup=function(){var E=this.context,I=new y.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(y.EXTENT,0),I.emplaceBack(0,y.EXTENT),I.emplaceBack(y.EXTENT,y.EXTENT),this.tileExtentBuffer=E.createVertexBuffer(I,ds.members),this.tileExtentSegments=y.SegmentVector.simpleSegment(0,0,4,2);var C=new y.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(y.EXTENT,0),C.emplaceBack(0,y.EXTENT),C.emplaceBack(y.EXTENT,y.EXTENT),this.debugBuffer=E.createVertexBuffer(C,ds.members),this.debugSegments=y.SegmentVector.simpleSegment(0,0,4,5);var Z=new y.StructArrayLayout4i8;Z.emplaceBack(0,0,0,0),Z.emplaceBack(y.EXTENT,0,y.EXTENT,0),Z.emplaceBack(0,y.EXTENT,0,y.EXTENT),Z.emplaceBack(y.EXTENT,y.EXTENT,y.EXTENT,y.EXTENT),this.rasterBoundsBuffer=E.createVertexBuffer(Z,rt.members),this.rasterBoundsSegments=y.SegmentVector.simpleSegment(0,0,4,2);var ut=new y.StructArrayLayout2i4;ut.emplaceBack(0,0),ut.emplaceBack(1,0),ut.emplaceBack(0,1),ut.emplaceBack(1,1),this.viewportBuffer=E.createVertexBuffer(ut,ds.members),this.viewportSegments=y.SegmentVector.simpleSegment(0,0,4,2);var St=new y.StructArrayLayout1ui2;St.emplaceBack(0),St.emplaceBack(1),St.emplaceBack(3),St.emplaceBack(2),St.emplaceBack(0),this.tileBorderIndexBuffer=E.createIndexBuffer(St);var At=new y.StructArrayLayout3ui6;At.emplaceBack(0,1,2),At.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=E.createIndexBuffer(At),this.emptyTexture=new y.Texture(E,{width:1,height:1,data:new Uint8Array([0,0,0,0])},E.gl.RGBA);var te=this.context.gl;this.stencilClearMode=new Ze({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO)},Ms.prototype.clearStencil=function(){var E=this.context,I=E.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var C=y.create();y.ortho(C,0,this.width,this.height,0,0,1),y.scale(C,C,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(E,I.TRIANGLES,Te.disabled,this.stencilClearMode,or.disabled,lr.disabled,Ra(C),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ms.prototype._renderTileClippingMasks=function(E,I){if(this.currentStencilSource!==E.source&&E.isTileClipped()&&I&&I.length){this.currentStencilSource=E.source;var C=this.context,Z=C.gl;this.nextStencilID+I.length>256&&this.clearStencil(),C.setColorMode(or.disabled),C.setDepthMode(Te.disabled);var ut=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var St=0,At=I;St<At.length;St+=1){var te=At[St],we=this._tileClippingMaskIDs[te.key]=this.nextStencilID++;ut.draw(C,Z.TRIANGLES,Te.disabled,new Ze({func:Z.ALWAYS,mask:0},we,255,Z.KEEP,Z.KEEP,Z.REPLACE),or.disabled,lr.disabled,Ra(te.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ms.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var E=this.nextStencilID++,I=this.context.gl;return new Ze({func:I.NOTEQUAL,mask:255},E,255,I.KEEP,I.KEEP,I.REPLACE)},Ms.prototype.stencilModeForClipping=function(E){var I=this.context.gl;return new Ze({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[E.key],0,I.KEEP,I.KEEP,I.REPLACE)},Ms.prototype.stencilConfigForOverlap=function(E){var I,C=this.context.gl,Z=E.sort(function(we,Oe){return Oe.overscaledZ-we.overscaledZ}),ut=Z[Z.length-1].overscaledZ,St=Z[0].overscaledZ-ut+1;if(St>1){this.currentStencilSource=void 0,this.nextStencilID+St>256&&this.clearStencil();for(var At={},te=0;te<St;te++)At[te+ut]=new Ze({func:C.GEQUAL,mask:255},te+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=St,[At,Z]}return[(I={},I[ut]=Ze.disabled,I),Z]},Ms.prototype.colorModeForRenderPass=function(){var E=this.context.gl;return this._showOverdrawInspector?new or([E.CONSTANT_COLOR,E.ONE],new y.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?or.unblended:or.alphaBlended},Ms.prototype.depthModeForSublayer=function(E,I,C){if(!this.opaquePassEnabledForLayer())return Te.disabled;var Z=1-((1+this.currentLayer)*this.numSublayers+E)*this.depthEpsilon;return new Te(C||this.context.gl.LEQUAL,I,[Z,Z])},Ms.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ms.prototype.render=function(E,I){var C=this;this.style=E,this.options=I,this.lineAtlas=E.lineAtlas,this.imageManager=E.imageManager,this.glyphManager=E.glyphManager,this.symbolFadeChange=E.placement.symbolFadeChange(y.browser.now()),this.imageManager.beginFrame();var Z=this.style._order,ut=this.style.sourceCaches;for(var St in ut){var At=ut[St];At.used&&At.prepare(this.context)}var te,we,Oe={},Ke={},nr={};for(var $e in ut){var pr=ut[$e];Oe[$e]=pr.getVisibleCoordinates(),Ke[$e]=Oe[$e].slice().reverse(),nr[$e]=pr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Sr=0;Sr<Z.length;Sr++)if(this.style._layers[Z[Sr]].is3D()){this.opaquePassCutoff=Sr;break}this.renderPass="offscreen";for(var zr=0,dr=Z;zr<dr.length;zr+=1){var Ur=this.style._layers[dr[zr]];if(Ur.hasOffscreenPass()&&!Ur.isHidden(this.transform.zoom)){var en=Ke[Ur.source];(Ur.type==="custom"||en.length)&&this.renderLayer(this,ut[Ur.source],Ur,en)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?y.Color.black:y.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(E._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Z.length-1;this.currentLayer>=0;this.currentLayer--){var Sn=this.style._layers[Z[this.currentLayer]],Zn=ut[Sn.source],Pn=Oe[Sn.source];this._renderTileClippingMasks(Sn,Pn),this.renderLayer(this,Zn,Sn,Pn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Z.length;this.currentLayer++){var Fn=this.style._layers[Z[this.currentLayer]],gi=ut[Fn.source],Vi=(Fn.type==="symbol"?nr:Ke)[Fn.source];this._renderTileClippingMasks(Fn,Oe[Fn.source]),this.renderLayer(this,gi,Fn,Vi)}this.options.showTileBoundaries&&(y.values(this.style._layers).forEach(function(Hi){Hi.source&&!Hi.isHidden(C.transform.zoom)&&(Hi.source!==(we&&we.id)&&(we=C.style.sourceCaches[Hi.source]),(!te||te.getSource().maxzoom<we.getSource().maxzoom)&&(te=we))}),te&&wf.debug(this,te,te.getVisibleCoordinates())),this.options.showPadding&&function(Hi){var fa=Hi.transform.padding;Sv(Hi,Hi.transform.height-(fa.top||0),3,Xf),Sv(Hi,fa.bottom||0,3,Op),wv(Hi,fa.left||0,3,Ah),wv(Hi,Hi.transform.width-(fa.right||0),3,Ft);var $a=Hi.transform.centerPoint;(function(Qa,so,No,ea){ep(Qa,so-1,No-10,2,20,ea),ep(Qa,so-10,No-1,20,2,ea)})(Hi,$a.x,Hi.transform.height-$a.y,Lp)}(this),this.context.setDefault()},Ms.prototype.renderLayer=function(E,I,C,Z){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||Z.length)&&(this.id=C.id,this.gpuTimingStart(C),wf[C.type](E,I,C,Z,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ms.prototype.gpuTimingStart=function(E){if(this.options.gpuTiming){var I=this.context.extTimerQuery,C=this.gpuTimers[E.id];C||(C=this.gpuTimers[E.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),C.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,C.query)}},Ms.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var E=this.context.extTimerQuery;E.endQueryEXT(E.TIME_ELAPSED_EXT)}},Ms.prototype.collectGpuTimers=function(){var E=this.gpuTimers;return this.gpuTimers={},E},Ms.prototype.queryGpuTimers=function(E){var I={};for(var C in E){var Z=E[C],ut=this.context.extTimerQuery,St=ut.getQueryObjectEXT(Z.query,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(Z.query),I[C]=St}return I},Ms.prototype.translatePosMatrix=function(E,I,C,Z,ut){if(!C[0]&&!C[1])return E;var St=ut?Z==="map"?this.transform.angle:0:Z==="viewport"?-this.transform.angle:0;if(St){var At=Math.sin(St),te=Math.cos(St);C=[C[0]*te-C[1]*At,C[0]*At+C[1]*te]}var we=[ut?C[0]:Ae(I,C[0],this.transform.zoom),ut?C[1]:Ae(I,C[1],this.transform.zoom),0],Oe=new Float32Array(16);return y.translate(Oe,E,we),Oe},Ms.prototype.saveTileTexture=function(E){var I=this._tileTextures[E.size[0]];I?I.push(E):this._tileTextures[E.size[0]]=[E]},Ms.prototype.getTileTexture=function(E){var I=this._tileTextures[E];return I&&I.length>0?I.pop():null},Ms.prototype.isPatternMissing=function(E){if(!E)return!1;if(!E.from||!E.to)return!0;var I=this.imageManager.getPattern(E.from.toString()),C=this.imageManager.getPattern(E.to.toString());return!I||!C},Ms.prototype.useProgram=function(E,I){this.cache=this.cache||{};var C=""+E+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[C]||(this.cache[C]=new ee(this.context,E,pe[E],I,Sh[E],this._showOverdrawInspector)),this.cache[C]},Ms.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ms.prototype.setBaseState=function(){var E=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(E.FUNC_ADD)},Ms.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=y.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new y.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ms.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var rp=function(E,I){this.points=E,this.planes=I};rp.fromInvProjectionMatrix=function(E,I,C){var Z=Math.pow(2,C),ut=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(At){return y.transformMat4([],At,E)}).map(function(At){return y.scale$1([],At,1/At[3]/I*Z)}),St=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(At){var te=y.sub([],ut[At[0]],ut[At[1]]),we=y.sub([],ut[At[2]],ut[At[1]]),Oe=y.normalize([],y.cross([],te,we)),Ke=-y.dot(Oe,ut[At[1]]);return Oe.concat(Ke)});return new rp(ut,St)};var Ds=function(E,I){this.min=E,this.max=I,this.center=y.scale$2([],y.add([],this.min,this.max),.5)};Ds.prototype.quadrant=function(E){for(var I=[E%2==0,E<2],C=y.clone$2(this.min),Z=y.clone$2(this.max),ut=0;ut<I.length;ut++)C[ut]=I[ut]?this.min[ut]:this.center[ut],Z[ut]=I[ut]?this.center[ut]:this.max[ut];return Z[2]=this.max[2],new Ds(C,Z)},Ds.prototype.distanceX=function(E){return Math.max(Math.min(this.max[0],E[0]),this.min[0])-E[0]},Ds.prototype.distanceY=function(E){return Math.max(Math.min(this.max[1],E[1]),this.min[1])-E[1]},Ds.prototype.intersects=function(E){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],C=!0,Z=0;Z<E.planes.length;Z++){for(var ut=E.planes[Z],St=0,At=0;At<I.length;At++)St+=y.dot$1(ut,I[At])>=0;if(St===0)return 0;St!==I.length&&(C=!1)}if(C)return 2;for(var te=0;te<3;te++){for(var we=Number.MAX_VALUE,Oe=-Number.MAX_VALUE,Ke=0;Ke<E.points.length;Ke++){var nr=E.points[Ke][te]-this.min[te];we=Math.min(we,nr),Oe=Math.max(Oe,nr)}if(Oe<0||we>this.max[te]-this.min[te])return 0}return 1};var af=function(E,I,C,Z){if(E===void 0&&(E=0),I===void 0&&(I=0),C===void 0&&(C=0),Z===void 0&&(Z=0),isNaN(E)||E<0||isNaN(I)||I<0||isNaN(C)||C<0||isNaN(Z)||Z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=E,this.bottom=I,this.left=C,this.right=Z};af.prototype.interpolate=function(E,I,C){return I.top!=null&&E.top!=null&&(this.top=y.number(E.top,I.top,C)),I.bottom!=null&&E.bottom!=null&&(this.bottom=y.number(E.bottom,I.bottom,C)),I.left!=null&&E.left!=null&&(this.left=y.number(E.left,I.left,C)),I.right!=null&&E.right!=null&&(this.right=y.number(E.right,I.right,C)),this},af.prototype.getCenter=function(E,I){var C=y.clamp((this.left+E-this.right)/2,0,E),Z=y.clamp((this.top+I-this.bottom)/2,0,I);return new y.Point(C,Z)},af.prototype.equals=function(E){return this.top===E.top&&this.bottom===E.bottom&&this.left===E.left&&this.right===E.right},af.prototype.clone=function(){return new af(this.top,this.bottom,this.left,this.right)},af.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var vs=function(E,I,C,Z,ut){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ut===void 0||ut,this._minZoom=E||0,this._maxZoom=I||22,this._minPitch=C==null?0:C,this._maxPitch=Z==null?60:Z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new y.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new af,this._posMatrixCache={},this._alignedPosMatrixCache={}},Qs={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};vs.prototype.clone=function(){var E=new vs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return E.tileSize=this.tileSize,E.latRange=this.latRange,E.width=this.width,E.height=this.height,E._center=this._center,E.zoom=this.zoom,E.angle=this.angle,E._fov=this._fov,E._pitch=this._pitch,E._unmodified=this._unmodified,E._edgeInsets=this._edgeInsets.clone(),E._calcMatrices(),E},Qs.minZoom.get=function(){return this._minZoom},Qs.minZoom.set=function(E){this._minZoom!==E&&(this._minZoom=E,this.zoom=Math.max(this.zoom,E))},Qs.maxZoom.get=function(){return this._maxZoom},Qs.maxZoom.set=function(E){this._maxZoom!==E&&(this._maxZoom=E,this.zoom=Math.min(this.zoom,E))},Qs.minPitch.get=function(){return this._minPitch},Qs.minPitch.set=function(E){this._minPitch!==E&&(this._minPitch=E,this.pitch=Math.max(this.pitch,E))},Qs.maxPitch.get=function(){return this._maxPitch},Qs.maxPitch.set=function(E){this._maxPitch!==E&&(this._maxPitch=E,this.pitch=Math.min(this.pitch,E))},Qs.renderWorldCopies.get=function(){return this._renderWorldCopies},Qs.renderWorldCopies.set=function(E){E===void 0?E=!0:E===null&&(E=!1),this._renderWorldCopies=E},Qs.worldSize.get=function(){return this.tileSize*this.scale},Qs.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Qs.size.get=function(){return new y.Point(this.width,this.height)},Qs.bearing.get=function(){return-this.angle/Math.PI*180},Qs.bearing.set=function(E){var I=-y.wrap(E,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=y.create$2(),y.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Qs.pitch.get=function(){return this._pitch/Math.PI*180},Qs.pitch.set=function(E){var I=y.clamp(E,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},Qs.fov.get=function(){return this._fov/Math.PI*180},Qs.fov.set=function(E){E=Math.max(.01,Math.min(60,E)),this._fov!==E&&(this._unmodified=!1,this._fov=E/180*Math.PI,this._calcMatrices())},Qs.zoom.get=function(){return this._zoom},Qs.zoom.set=function(E){var I=Math.min(Math.max(E,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},Qs.center.get=function(){return this._center},Qs.center.set=function(E){E.lat===this._center.lat&&E.lng===this._center.lng||(this._unmodified=!1,this._center=E,this._constrain(),this._calcMatrices())},Qs.padding.get=function(){return this._edgeInsets.toJSON()},Qs.padding.set=function(E){this._edgeInsets.equals(E)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,E,1),this._calcMatrices())},Qs.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},vs.prototype.isPaddingEqual=function(E){return this._edgeInsets.equals(E)},vs.prototype.interpolatePadding=function(E,I,C){this._unmodified=!1,this._edgeInsets.interpolate(E,I,C),this._constrain(),this._calcMatrices()},vs.prototype.coveringZoomLevel=function(E){var I=(E.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/E.tileSize));return Math.max(0,I)},vs.prototype.getVisibleUnwrappedCoordinates=function(E){var I=[new y.UnwrappedTileID(0,E)];if(this._renderWorldCopies)for(var C=this.pointCoordinate(new y.Point(0,0)),Z=this.pointCoordinate(new y.Point(this.width,0)),ut=this.pointCoordinate(new y.Point(this.width,this.height)),St=this.pointCoordinate(new y.Point(0,this.height)),At=Math.floor(Math.min(C.x,Z.x,ut.x,St.x)),te=Math.floor(Math.max(C.x,Z.x,ut.x,St.x)),we=At-1;we<=te+1;we++)we!==0&&I.push(new y.UnwrappedTileID(we,E));return I},vs.prototype.coveringTiles=function(E){var I=this.coveringZoomLevel(E),C=I;if(E.minzoom!==void 0&&I<E.minzoom)return[];E.maxzoom!==void 0&&I>E.maxzoom&&(I=E.maxzoom);var Z=y.MercatorCoordinate.fromLngLat(this.center),ut=Math.pow(2,I),St=[ut*Z.x,ut*Z.y,0],At=rp.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),te=E.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(te=I);var we=function(Hi){return{aabb:new Ds([Hi*ut,0,0],[(Hi+1)*ut,ut,0]),zoom:0,x:0,y:0,wrap:Hi,fullyVisible:!1}},Oe=[],Ke=[],nr=I,$e=E.reparseOverscaled?C:I;if(this._renderWorldCopies)for(var pr=1;pr<=3;pr++)Oe.push(we(-pr)),Oe.push(we(pr));for(Oe.push(we(0));Oe.length>0;){var Sr=Oe.pop(),zr=Sr.x,dr=Sr.y,Ur=Sr.fullyVisible;if(!Ur){var en=Sr.aabb.intersects(At);if(en===0)continue;Ur=en===2}var Sn=Sr.aabb.distanceX(St),Zn=Sr.aabb.distanceY(St),Pn=Math.max(Math.abs(Sn),Math.abs(Zn));if(Sr.zoom===nr||Pn>3+(1<<nr-Sr.zoom)-2&&Sr.zoom>=te)Ke.push({tileID:new y.OverscaledTileID(Sr.zoom===nr?$e:Sr.zoom,Sr.wrap,Sr.zoom,zr,dr),distanceSq:y.sqrLen([St[0]-.5-zr,St[1]-.5-dr])});else for(var Fn=0;Fn<4;Fn++){var gi=(zr<<1)+Fn%2,Vi=(dr<<1)+(Fn>>1);Oe.push({aabb:Sr.aabb.quadrant(Fn),zoom:Sr.zoom+1,x:gi,y:Vi,wrap:Sr.wrap,fullyVisible:Ur})}}return Ke.sort(function(Hi,fa){return Hi.distanceSq-fa.distanceSq}).map(function(Hi){return Hi.tileID})},vs.prototype.resize=function(E,I){this.width=E,this.height=I,this.pixelsToGLUnits=[2/E,-2/I],this._constrain(),this._calcMatrices()},Qs.unmodified.get=function(){return this._unmodified},vs.prototype.zoomScale=function(E){return Math.pow(2,E)},vs.prototype.scaleZoom=function(E){return Math.log(E)/Math.LN2},vs.prototype.project=function(E){var I=y.clamp(E.lat,-this.maxValidLatitude,this.maxValidLatitude);return new y.Point(y.mercatorXfromLng(E.lng)*this.worldSize,y.mercatorYfromLat(I)*this.worldSize)},vs.prototype.unproject=function(E){return new y.MercatorCoordinate(E.x/this.worldSize,E.y/this.worldSize).toLngLat()},Qs.point.get=function(){return this.project(this.center)},vs.prototype.setLocationAtPoint=function(E,I){var C=this.pointCoordinate(I),Z=this.pointCoordinate(this.centerPoint),ut=this.locationCoordinate(E),St=new y.MercatorCoordinate(ut.x-(C.x-Z.x),ut.y-(C.y-Z.y));this.center=this.coordinateLocation(St),this._renderWorldCopies&&(this.center=this.center.wrap())},vs.prototype.locationPoint=function(E){return this.coordinatePoint(this.locationCoordinate(E))},vs.prototype.pointLocation=function(E){return this.coordinateLocation(this.pointCoordinate(E))},vs.prototype.locationCoordinate=function(E){return y.MercatorCoordinate.fromLngLat(E)},vs.prototype.coordinateLocation=function(E){return E.toLngLat()},vs.prototype.pointCoordinate=function(E){var I=[E.x,E.y,0,1],C=[E.x,E.y,1,1];y.transformMat4(I,I,this.pixelMatrixInverse),y.transformMat4(C,C,this.pixelMatrixInverse);var Z=I[3],ut=C[3],St=I[1]/Z,At=C[1]/ut,te=I[2]/Z,we=C[2]/ut,Oe=te===we?0:(0-te)/(we-te);return new y.MercatorCoordinate(y.number(I[0]/Z,C[0]/ut,Oe)/this.worldSize,y.number(St,At,Oe)/this.worldSize)},vs.prototype.coordinatePoint=function(E){var I=[E.x*this.worldSize,E.y*this.worldSize,0,1];return y.transformMat4(I,I,this.pixelMatrix),new y.Point(I[0]/I[3],I[1]/I[3])},vs.prototype.getBounds=function(){return new y.LngLatBounds().extend(this.pointLocation(new y.Point(0,0))).extend(this.pointLocation(new y.Point(this.width,0))).extend(this.pointLocation(new y.Point(this.width,this.height))).extend(this.pointLocation(new y.Point(0,this.height)))},vs.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new y.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},vs.prototype.setMaxBounds=function(E){E?(this.lngRange=[E.getWest(),E.getEast()],this.latRange=[E.getSouth(),E.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},vs.prototype.calculatePosMatrix=function(E,I){I===void 0&&(I=!1);var C=E.key,Z=I?this._alignedPosMatrixCache:this._posMatrixCache;if(Z[C])return Z[C];var ut=E.canonical,St=this.worldSize/this.zoomScale(ut.z),At=ut.x+Math.pow(2,ut.z)*E.wrap,te=y.identity(new Float64Array(16));return y.translate(te,te,[At*St,ut.y*St,0]),y.scale(te,te,[St/y.EXTENT,St/y.EXTENT,1]),y.multiply(te,I?this.alignedProjMatrix:this.projMatrix,te),Z[C]=new Float32Array(te),Z[C]},vs.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},vs.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var E,I,C,Z,ut=-90,St=90,At=-180,te=180,we=this.size,Oe=this._unmodified;if(this.latRange){var Ke=this.latRange;ut=y.mercatorYfromLat(Ke[1])*this.worldSize,E=(St=y.mercatorYfromLat(Ke[0])*this.worldSize)-ut<we.y?we.y/(St-ut):0}if(this.lngRange){var nr=this.lngRange;At=y.mercatorXfromLng(nr[0])*this.worldSize,I=(te=y.mercatorXfromLng(nr[1])*this.worldSize)-At<we.x?we.x/(te-At):0}var $e=this.point,pr=Math.max(I||0,E||0);if(pr)return this.center=this.unproject(new y.Point(I?(te+At)/2:$e.x,E?(St+ut)/2:$e.y)),this.zoom+=this.scaleZoom(pr),this._unmodified=Oe,void(this._constraining=!1);if(this.latRange){var Sr=$e.y,zr=we.y/2;Sr-zr<ut&&(Z=ut+zr),Sr+zr>St&&(Z=St-zr)}if(this.lngRange){var dr=$e.x,Ur=we.x/2;dr-Ur<At&&(C=At+Ur),dr+Ur>te&&(C=te-Ur)}C===void 0&&Z===void 0||(this.center=this.unproject(new y.Point(C!==void 0?C:$e.x,Z!==void 0?Z:$e.y))),this._unmodified=Oe,this._constraining=!1}},vs.prototype._calcMatrices=function(){if(this.height){var E=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,C=this._fov*(.5+E.y/this.height),Z=Math.sin(C)*this.cameraToCenterDistance/Math.sin(y.clamp(Math.PI-I-C,.01,Math.PI-.01)),ut=this.point,St=ut.x,At=ut.y,te=1.01*(Math.cos(Math.PI/2-this._pitch)*Z+this.cameraToCenterDistance),we=this.height/50,Oe=new Float64Array(16);y.perspective(Oe,this._fov,this.width/this.height,we,te),Oe[8]=2*-E.x/this.width,Oe[9]=2*E.y/this.height,y.scale(Oe,Oe,[1,-1,1]),y.translate(Oe,Oe,[0,0,-this.cameraToCenterDistance]),y.rotateX(Oe,Oe,this._pitch),y.rotateZ(Oe,Oe,this.angle),y.translate(Oe,Oe,[-St,-At,0]),this.mercatorMatrix=y.scale([],Oe,[this.worldSize,this.worldSize,this.worldSize]),y.scale(Oe,Oe,[1,1,y.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Oe,this.invProjMatrix=y.invert([],this.projMatrix);var Ke=this.width%2/2,nr=this.height%2/2,$e=Math.cos(this.angle),pr=Math.sin(this.angle),Sr=St-Math.round(St)+$e*Ke+pr*nr,zr=At-Math.round(At)+$e*nr+pr*Ke,dr=new Float64Array(Oe);if(y.translate(dr,dr,[Sr>.5?Sr-1:Sr,zr>.5?zr-1:zr,0]),this.alignedProjMatrix=dr,Oe=y.create(),y.scale(Oe,Oe,[this.width/2,-this.height/2,1]),y.translate(Oe,Oe,[1,-1,0]),this.labelPlaneMatrix=Oe,Oe=y.create(),y.scale(Oe,Oe,[1,-1,1]),y.translate(Oe,Oe,[-1,-1,0]),y.scale(Oe,Oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Oe,this.pixelMatrix=y.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Oe=y.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},vs.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var E=this.pointCoordinate(new y.Point(0,0)),I=[E.x*this.worldSize,E.y*this.worldSize,0,1];return y.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},vs.prototype.getCameraPoint=function(){var E=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new y.Point(0,E))},vs.prototype.getCameraQueryGeometry=function(E){var I=this.getCameraPoint();if(E.length===1)return[E[0],I];for(var C=I.x,Z=I.y,ut=I.x,St=I.y,At=0,te=E;At<te.length;At+=1){var we=te[At];C=Math.min(C,we.x),Z=Math.min(Z,we.y),ut=Math.max(ut,we.x),St=Math.max(St,we.y)}return[new y.Point(C,Z),new y.Point(ut,Z),new y.Point(ut,St),new y.Point(C,St),new y.Point(C,Z)]},Object.defineProperties(vs.prototype,Qs);var ks=function(E){var I,C,Z,ut;this._hashName=E&&encodeURIComponent(E),y.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(I=this._updateHashUnthrottled.bind(this),C=!1,Z=null,ut=function(){Z=null,C&&(I(),Z=setTimeout(ut,300),C=!1)},function(){return C=!0,Z||ut(),Z})};ks.prototype.addTo=function(E){return this._map=E,y.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ks.prototype.remove=function(){return y.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ks.prototype.getHashString=function(E){var I=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,Z=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),ut=Math.pow(10,Z),St=Math.round(I.lng*ut)/ut,At=Math.round(I.lat*ut)/ut,te=this._map.getBearing(),we=this._map.getPitch(),Oe="";if(Oe+=E?"/"+St+"/"+At+"/"+C:C+"/"+At+"/"+St,(te||we)&&(Oe+="/"+Math.round(10*te)/10),we&&(Oe+="/"+Math.round(we)),this._hashName){var Ke=this._hashName,nr=!1,$e=y.window.location.hash.slice(1).split("&").map(function(pr){var Sr=pr.split("=")[0];return Sr===Ke?(nr=!0,Sr+"="+Oe):pr}).filter(function(pr){return pr});return nr||$e.push(Ke+"="+Oe),"#"+$e.join("&")}return"#"+Oe},ks.prototype._getCurrentHash=function(){var E,I=this,C=y.window.location.hash.replace("#","");return this._hashName?(C.split("&").map(function(Z){return Z.split("=")}).forEach(function(Z){Z[0]===I._hashName&&(E=Z)}),(E&&E[1]||"").split("/")):C.split("/")},ks.prototype._onHashChange=function(){var E=this._getCurrentHash();if(E.length>=3&&!E.some(function(C){return isNaN(C)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(E[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+E[2],+E[1]],zoom:+E[0],bearing:I,pitch:+(E[4]||0)}),!0}return!1},ks.prototype._updateHashUnthrottled=function(){var E=y.window.location.href.replace(/(#.+)?$/,this.getHashString());try{y.window.history.replaceState(y.window.history.state,null,E)}catch(I){}};var of={linearity:.3,easing:y.bezier(0,0,.3,1)},Ef=y.extend({deceleration:2500,maxSpeed:1400},of),lu=y.extend({deceleration:20,maxSpeed:1400},of),np=y.extend({deceleration:1e3,maxSpeed:360},of),Yf=y.extend({deceleration:1e3,maxSpeed:90},of),fc=function(E){this._map=E,this.clear()};function kp(E,I){(!E.duration||E.duration<I.duration)&&(E.duration=I.duration,E.easing=I.easing)}function sf(E,I,C){var Z=C.maxSpeed,ut=C.linearity,St=C.deceleration,At=y.clamp(E*ut/(I/1e3),-Z,Z),te=Math.abs(At)/(St*ut);return{easing:C.easing,duration:1e3*te,amount:At*(te/2)}}fc.prototype.clear=function(){this._inertiaBuffer=[]},fc.prototype.record=function(E){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.browser.now(),settings:E})},fc.prototype._drainInertiaBuffer=function(){for(var E=this._inertiaBuffer,I=y.browser.now();E.length>0&&I-E[0].time>160;)E.shift()},fc.prototype._onMoveEnd=function(E){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new y.Point(0,0),pinchAround:void 0,around:void 0},C=0,Z=this._inertiaBuffer;C<Z.length;C+=1){var ut=Z[C].settings;I.zoom+=ut.zoomDelta||0,I.bearing+=ut.bearingDelta||0,I.pitch+=ut.pitchDelta||0,ut.panDelta&&I.pan._add(ut.panDelta),ut.around&&(I.around=ut.around),ut.pinchAround&&(I.pinchAround=ut.pinchAround)}var St=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,At={};if(I.pan.mag()){var te=sf(I.pan.mag(),St,y.extend({},Ef,E||{}));At.offset=I.pan.mult(te.amount/I.pan.mag()),At.center=this._map.transform.center,kp(At,te)}if(I.zoom){var we=sf(I.zoom,St,lu);At.zoom=this._map.transform.zoom+we.amount,kp(At,we)}if(I.bearing){var Oe=sf(I.bearing,St,np);At.bearing=this._map.transform.bearing+y.clamp(Oe.amount,-179,179),kp(At,Oe)}if(I.pitch){var Ke=sf(I.pitch,St,Yf);At.pitch=this._map.transform.pitch+Ke.amount,kp(At,Ke)}if(At.zoom||At.bearing){var nr=I.pinchAround===void 0?I.around:I.pinchAround;At.around=nr?this._map.unproject(nr):this._map.getCenter()}return this.clear(),y.extend(At,{noMoveStart:!0})}};var Hu=function(E){function I(Z,ut,St,At){At===void 0&&(At={});var te=F.mousePos(ut.getCanvasContainer(),St),we=ut.unproject(te);E.call(this,Z,y.extend({point:te,lngLat:we,originalEvent:St},At)),this._defaultPrevented=!1,this.target=ut}E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I;var C={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,C),I}(y.Event),Wf=function(E){function I(Z,ut,St){var At=Z==="touchend"?St.changedTouches:St.touches,te=F.touchPos(ut.getCanvasContainer(),At),we=te.map(function(nr){return ut.unproject(nr)}),Oe=te.reduce(function(nr,$e,pr,Sr){return nr.add($e.div(Sr.length))},new y.Point(0,0)),Ke=ut.unproject(Oe);E.call(this,Z,{points:te,point:Oe,lngLats:we,lngLat:Ke,originalEvent:St}),this._defaultPrevented=!1}E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I;var C={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,C),I}(y.Event),Mh=function(E){function I(Z,ut,St){E.call(this,Z,{originalEvent:St}),this._defaultPrevented=!1}E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I;var C={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,C),I}(y.Event),Fu=function(E,I){this._map=E,this._clickTolerance=I.clickTolerance};Fu.prototype.reset=function(){delete this._mousedownPos},Fu.prototype.wheel=function(E){return this._firePreventable(new Mh(E.type,this._map,E))},Fu.prototype.mousedown=function(E,I){return this._mousedownPos=I,this._firePreventable(new Hu(E.type,this._map,E))},Fu.prototype.mouseup=function(E){this._map.fire(new Hu(E.type,this._map,E))},Fu.prototype.click=function(E,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new Hu(E.type,this._map,E))},Fu.prototype.dblclick=function(E){return this._firePreventable(new Hu(E.type,this._map,E))},Fu.prototype.mouseover=function(E){this._map.fire(new Hu(E.type,this._map,E))},Fu.prototype.mouseout=function(E){this._map.fire(new Hu(E.type,this._map,E))},Fu.prototype.touchstart=function(E){return this._firePreventable(new Wf(E.type,this._map,E))},Fu.prototype.touchmove=function(E){this._map.fire(new Wf(E.type,this._map,E))},Fu.prototype.touchend=function(E){this._map.fire(new Wf(E.type,this._map,E))},Fu.prototype.touchcancel=function(E){this._map.fire(new Wf(E.type,this._map,E))},Fu.prototype._firePreventable=function(E){if(this._map.fire(E),E.defaultPrevented)return{}},Fu.prototype.isEnabled=function(){return!0},Fu.prototype.isActive=function(){return!1},Fu.prototype.enable=function(){},Fu.prototype.disable=function(){};var Ma=function(E){this._map=E};Ma.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ma.prototype.mousemove=function(E){this._map.fire(new Hu(E.type,this._map,E))},Ma.prototype.mousedown=function(){this._delayContextMenu=!0},Ma.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hu("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ma.prototype.contextmenu=function(E){this._delayContextMenu?this._contextMenuEvent=E:this._map.fire(new Hu(E.type,this._map,E)),this._map.listens("contextmenu")&&E.preventDefault()},Ma.prototype.isEnabled=function(){return!0},Ma.prototype.isActive=function(){return!1},Ma.prototype.enable=function(){},Ma.prototype.disable=function(){};var pu=function(E,I){this._map=E,this._el=E.getCanvasContainer(),this._container=E.getContainer(),this._clickTolerance=I.clickTolerance||1};function uf(E,I){for(var C={},Z=0;Z<E.length;Z++)C[E[Z].identifier]=I[Z];return C}pu.prototype.isEnabled=function(){return!!this._enabled},pu.prototype.isActive=function(){return!!this._active},pu.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},pu.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pu.prototype.mousedown=function(E,I){this.isEnabled()&&E.shiftKey&&E.button===0&&(F.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},pu.prototype.mousemoveWindow=function(E,I){if(this._active){var C=I;if(!(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)){var Z=this._startPos;this._lastPos=C,this._box||(this._box=F.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",E));var ut=Math.min(Z.x,C.x),St=Math.max(Z.x,C.x),At=Math.min(Z.y,C.y),te=Math.max(Z.y,C.y);F.setTransform(this._box,"translate("+ut+"px,"+At+"px)"),this._box.style.width=St-ut+"px",this._box.style.height=te-At+"px"}}},pu.prototype.mouseupWindow=function(E,I){var C=this;if(this._active&&E.button===0){var Z=this._startPos,ut=I;if(this.reset(),F.suppressClick(),Z.x!==ut.x||Z.y!==ut.y)return this._map.fire(new y.Event("boxzoomend",{originalEvent:E})),{cameraAnimation:function(St){return St.fitScreenCoordinates(Z,ut,C._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",E)}},pu.prototype.keydown=function(E){this._active&&E.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",E))},pu.prototype.blur=function(){this.reset()},pu.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos},pu.prototype._fireEvent=function(E,I){return this._map.fire(new y.Event(E,{originalEvent:I}))};var Gs=function(E){this.reset(),this.numTouches=E.numTouches};Gs.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gs.prototype.touchstart=function(E,I,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=E.timeStamp),C.length===this.numTouches&&(this.centroid=function(Z){for(var ut=new y.Point(0,0),St=0,At=Z;St<At.length;St+=1)ut._add(At[St]);return ut.div(Z.length)}(I),this.touches=uf(C,I)))},Gs.prototype.touchmove=function(E,I,C){if(!this.aborted&&this.centroid){var Z=uf(C,I);for(var ut in this.touches){var St=Z[ut];(!St||St.dist(this.touches[ut])>30)&&(this.aborted=!0)}}},Gs.prototype.touchend=function(E,I,C){if((!this.centroid||E.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){var Z=!this.aborted&&this.centroid;if(this.reset(),Z)return Z}};var ql=function(E){this.singleTap=new Gs(E),this.numTaps=E.numTaps,this.reset()};ql.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ql.prototype.touchstart=function(E,I,C){this.singleTap.touchstart(E,I,C)},ql.prototype.touchmove=function(E,I,C){this.singleTap.touchmove(E,I,C)},ql.prototype.touchend=function(E,I,C){var Z=this.singleTap.touchend(E,I,C);if(Z){var ut=E.timeStamp-this.lastTime<500,St=!this.lastTap||this.lastTap.dist(Z)<30;if(ut&&St||this.reset(),this.count++,this.lastTime=E.timeStamp,this.lastTap=Z,this.count===this.numTaps)return this.reset(),Z}};var oc=function(){this._zoomIn=new ql({numTouches:1,numTaps:2}),this._zoomOut=new ql({numTouches:2,numTaps:1}),this.reset()};oc.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},oc.prototype.touchstart=function(E,I,C){this._zoomIn.touchstart(E,I,C),this._zoomOut.touchstart(E,I,C)},oc.prototype.touchmove=function(E,I,C){this._zoomIn.touchmove(E,I,C),this._zoomOut.touchmove(E,I,C)},oc.prototype.touchend=function(E,I,C){var Z=this,ut=this._zoomIn.touchend(E,I,C),St=this._zoomOut.touchend(E,I,C);return ut?(this._active=!0,E.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(At){return At.easeTo({duration:300,zoom:At.getZoom()+1,around:At.unproject(ut)},{originalEvent:E})}}):St?(this._active=!0,E.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(At){return At.easeTo({duration:300,zoom:At.getZoom()-1,around:At.unproject(St)},{originalEvent:E})}}):void 0},oc.prototype.touchcancel=function(){this.reset()},oc.prototype.enable=function(){this._enabled=!0},oc.prototype.disable=function(){this._enabled=!1,this.reset()},oc.prototype.isEnabled=function(){return this._enabled},oc.prototype.isActive=function(){return this._active};var td={0:1,2:2},Qi=function(E){this.reset(),this._clickTolerance=E.clickTolerance||1};Qi.prototype.blur=function(){this.reset()},Qi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Qi.prototype._correctButton=function(E,I){return!1},Qi.prototype._move=function(E,I){return{}},Qi.prototype.mousedown=function(E,I){if(!this._lastPoint){var C=F.mouseButton(E);this._correctButton(E,C)&&(this._lastPoint=I,this._eventButton=C)}},Qi.prototype.mousemoveWindow=function(E,I){var C=this._lastPoint;if(C){if(E.preventDefault(),function(Z,ut){var St=td[ut];return Z.buttons===void 0||(Z.buttons&St)!==St}(E,this._eventButton))this.reset();else if(this._moved||!(I.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(C,I)}},Qi.prototype.mouseupWindow=function(E){this._lastPoint&&F.mouseButton(E)===this._eventButton&&(this._moved&&F.suppressClick(),this.reset())},Qi.prototype.enable=function(){this._enabled=!0},Qi.prototype.disable=function(){this._enabled=!1,this.reset()},Qi.prototype.isEnabled=function(){return this._enabled},Qi.prototype.isActive=function(){return this._active};var Ec=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.mousedown=function(C,Z){E.prototype.mousedown.call(this,C,Z),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(C,Z){return Z===0&&!C.ctrlKey},I.prototype._move=function(C,Z){return{around:Z,panDelta:Z.sub(C)}},I}(Qi),ws=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype._correctButton=function(C,Z){return Z===0&&C.ctrlKey||Z===2},I.prototype._move=function(C,Z){var ut=.8*(Z.x-C.x);if(ut)return this._active=!0,{bearingDelta:ut}},I.prototype.contextmenu=function(C){C.preventDefault()},I}(Qi),lf=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype._correctButton=function(C,Z){return Z===0&&C.ctrlKey||Z===2},I.prototype._move=function(C,Z){var ut=-.5*(Z.y-C.y);if(ut)return this._active=!0,{pitchDelta:ut}},I.prototype.contextmenu=function(C){C.preventDefault()},I}(Qi),Js=function(E){this._minTouches=1,this._clickTolerance=E.clickTolerance||1,this.reset()};Js.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new y.Point(0,0)},Js.prototype.touchstart=function(E,I,C){return this._calculateTransform(E,I,C)},Js.prototype.touchmove=function(E,I,C){if(this._active&&!(C.length<this._minTouches))return E.preventDefault(),this._calculateTransform(E,I,C)},Js.prototype.touchend=function(E,I,C){this._calculateTransform(E,I,C),this._active&&C.length<this._minTouches&&this.reset()},Js.prototype.touchcancel=function(){this.reset()},Js.prototype._calculateTransform=function(E,I,C){C.length>0&&(this._active=!0);var Z=uf(C,I),ut=new y.Point(0,0),St=new y.Point(0,0),At=0;for(var te in Z){var we=Z[te],Oe=this._touches[te];Oe&&(ut._add(we),St._add(we.sub(Oe)),At++,Z[te]=we)}if(this._touches=Z,!(At<this._minTouches)&&St.mag()){var Ke=St.div(At);if(this._sum._add(Ke),!(this._sum.mag()<this._clickTolerance))return{around:ut.div(At),panDelta:Ke}}},Js.prototype.enable=function(){this._enabled=!0},Js.prototype.disable=function(){this._enabled=!1,this.reset()},Js.prototype.isEnabled=function(){return this._enabled},Js.prototype.isActive=function(){return this._active};var Zl=function(){this.reset()};function Kf(E,I,C){for(var Z=0;Z<E.length;Z++)if(E[Z].identifier===C)return I[Z]}function cf(E,I){return Math.log(E/I)/Math.LN2}Zl.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Zl.prototype._start=function(E){},Zl.prototype._move=function(E,I,C){return{}},Zl.prototype.touchstart=function(E,I,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([I[0],I[1]]))},Zl.prototype.touchmove=function(E,I,C){if(this._firstTwoTouches){E.preventDefault();var Z=this._firstTwoTouches,ut=Z[1],St=Kf(C,I,Z[0]),At=Kf(C,I,ut);if(St&&At){var te=this._aroundCenter?null:St.add(At).div(2);return this._move([St,At],te,E)}}},Zl.prototype.touchend=function(E,I,C){if(this._firstTwoTouches){var Z=this._firstTwoTouches,ut=Z[1],St=Kf(C,I,Z[0]),At=Kf(C,I,ut);St&&At||(this._active&&F.suppressClick(),this.reset())}},Zl.prototype.touchcancel=function(){this.reset()},Zl.prototype.enable=function(E){this._enabled=!0,this._aroundCenter=!!E&&E.around==="center"},Zl.prototype.disable=function(){this._enabled=!1,this.reset()},Zl.prototype.isEnabled=function(){return this._enabled},Zl.prototype.isActive=function(){return this._active};var hc=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.reset=function(){E.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(C){this._startDistance=this._distance=C[0].dist(C[1])},I.prototype._move=function(C,Z){var ut=this._distance;if(this._distance=C[0].dist(C[1]),this._active||!(Math.abs(cf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cf(this._distance,ut),pinchAround:Z}},I}(Zl);function Rl(E,I){return 180*E.angleWith(I)/Math.PI}var ip=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.reset=function(){E.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(C){this._startVector=this._vector=C[0].sub(C[1]),this._minDiameter=C[0].dist(C[1])},I.prototype._move=function(C,Z){var ut=this._vector;if(this._vector=C[0].sub(C[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rl(this._vector,ut),pinchAround:Z}},I.prototype._isBelowThreshold=function(C){this._minDiameter=Math.min(this._minDiameter,C.mag());var Z=25/(Math.PI*this._minDiameter)*360,ut=Rl(C,this._startVector);return Math.abs(ut)<Z},I}(Zl);function ff(E){return Math.abs(E.y)>Math.abs(E.x)}var ed=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.reset=function(){E.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(C){this._lastPoints=C,ff(C[0].sub(C[1]))&&(this._valid=!1)},I.prototype._move=function(C,Z,ut){var St=C[0].sub(this._lastPoints[0]),At=C[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(St,At,ut.timeStamp),this._valid)return this._lastPoints=C,this._active=!0,{pitchDelta:(St.y+At.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(C,Z,ut){if(this._valid!==void 0)return this._valid;var St=C.mag()>=2,At=Z.mag()>=2;if(St||At){if(!St||!At)return this._firstMove===void 0&&(this._firstMove=ut),ut-this._firstMove<100&&void 0;var te=C.y>0==Z.y>0;return ff(C)&&ff(Z)&&te}},I}(Zl),Td={panStep:100,bearingStep:15,pitchStep:10},Gc=function(){var E=Td;this._panStep=E.panStep,this._bearingStep=E.bearingStep,this._pitchStep=E.pitchStep,this._rotationDisabled=!1};function sc(E){return E*(2-E)}Gc.prototype.blur=function(){this.reset()},Gc.prototype.reset=function(){this._active=!1},Gc.prototype.keydown=function(E){var I=this;if(!(E.altKey||E.ctrlKey||E.metaKey)){var C=0,Z=0,ut=0,St=0,At=0;switch(E.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:E.shiftKey?Z=-1:(E.preventDefault(),St=-1);break;case 39:E.shiftKey?Z=1:(E.preventDefault(),St=1);break;case 38:E.shiftKey?ut=1:(E.preventDefault(),At=-1);break;case 40:E.shiftKey?ut=-1:(E.preventDefault(),At=1);break;default:return}return this._rotationDisabled&&(Z=0,ut=0),{cameraAnimation:function(te){var we=te.getZoom();te.easeTo({duration:300,easeId:"keyboardHandler",easing:sc,zoom:C?Math.round(we)+C*(E.shiftKey?2:1):we,bearing:te.getBearing()+Z*I._bearingStep,pitch:te.getPitch()+ut*I._pitchStep,offset:[-St*I._panStep,-At*I._panStep],center:te.getCenter()},{originalEvent:E})}}}},Gc.prototype.enable=function(){this._enabled=!0},Gc.prototype.disable=function(){this._enabled=!1,this.reset()},Gc.prototype.isEnabled=function(){return this._enabled},Gc.prototype.isActive=function(){return this._active},Gc.prototype.disableRotation=function(){this._rotationDisabled=!0},Gc.prototype.enableRotation=function(){this._rotationDisabled=!1};var Qo=function(E,I){this._map=E,this._el=E.getCanvasContainer(),this._handler=I,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,y.bindAll(["_onTimeout"],this)};Qo.prototype.setZoomRate=function(E){this._defaultZoomRate=E},Qo.prototype.setWheelZoomRate=function(E){this._wheelZoomRate=E},Qo.prototype.isEnabled=function(){return!!this._enabled},Qo.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Qo.prototype.isZooming=function(){return!!this._zooming},Qo.prototype.enable=function(E){this.isEnabled()||(this._enabled=!0,this._aroundCenter=E&&E.around==="center")},Qo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qo.prototype.wheel=function(E){if(this.isEnabled()){var I=E.deltaMode===y.window.WheelEvent.DOM_DELTA_LINE?40*E.deltaY:E.deltaY,C=y.browser.now(),Z=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":Z>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,E)):this._type||(this._type=Math.abs(Z*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),E.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=E,this._delta-=I,this._active||this._start(E)),E.preventDefault()}},Qo.prototype._onTimeout=function(E){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(E)},Qo.prototype._start=function(E){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=F.mousePos(this._el,E);this._around=y.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qo.prototype.renderFrame=function(){var E=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var C=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,Z=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&Z!==0&&(Z=1/Z);var ut=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(ut*Z))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var St,At=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,te=this._startZoom,we=this._easing,Oe=!1;if(this._type==="wheel"&&te&&we){var Ke=Math.min((y.browser.now()-this._lastWheelEventTime)/200,1),nr=we(Ke);St=y.number(te,At,nr),Ke<1?this._frameId||(this._frameId=!0):Oe=!0}else St=At,Oe=!0;return this._active=!0,Oe&&(this._active=!1,this._finishTimeout=setTimeout(function(){E._zooming=!1,E._handler._triggerRenderFrame(),delete E._targetZoom,delete E._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Oe,zoomDelta:St-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qo.prototype._smoothOutEasing=function(E){var I=y.ease;if(this._prevEase){var C=this._prevEase,Z=(y.browser.now()-C.start)/C.duration,ut=C.easing(Z+.01)-C.easing(Z),St=.27/Math.sqrt(ut*ut+1e-4)*.01,At=Math.sqrt(.0729-St*St);I=y.bezier(St,At,.25,1)}return this._prevEase={start:y.browser.now(),duration:E,easing:I},I},Qo.prototype.blur=function(){this.reset()},Qo.prototype.reset=function(){this._active=!1};var hf=function(E,I){this._clickZoom=E,this._tapZoom=I};hf.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},hf.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},hf.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},hf.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Uc=function(){this.reset()};Uc.prototype.reset=function(){this._active=!1},Uc.prototype.blur=function(){this.reset()},Uc.prototype.dblclick=function(E,I){return E.preventDefault(),{cameraAnimation:function(C){C.easeTo({duration:300,zoom:C.getZoom()+(E.shiftKey?-1:1),around:C.unproject(I)},{originalEvent:E})}}},Uc.prototype.enable=function(){this._enabled=!0},Uc.prototype.disable=function(){this._enabled=!1,this.reset()},Uc.prototype.isEnabled=function(){return this._enabled},Uc.prototype.isActive=function(){return this._active};var $u=function(){this._tap=new ql({numTouches:1,numTaps:1}),this.reset()};$u.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},$u.prototype.touchstart=function(E,I,C){this._swipePoint||(this._tapTime&&E.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=I[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(E,I,C))},$u.prototype.touchmove=function(E,I,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;var Z=I[0],ut=Z.y-this._swipePoint.y;return this._swipePoint=Z,E.preventDefault(),this._active=!0,{zoomDelta:ut/128}}}else this._tap.touchmove(E,I,C)},$u.prototype.touchend=function(E,I,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(E,I,C)&&(this._tapTime=E.timeStamp)},$u.prototype.touchcancel=function(){this.reset()},$u.prototype.enable=function(){this._enabled=!0},$u.prototype.disable=function(){this._enabled=!1,this.reset()},$u.prototype.isEnabled=function(){return this._enabled},$u.prototype.isActive=function(){return this._active};var $f=function(E,I,C){this._el=E,this._mousePan=I,this._touchPan=C};$f.prototype.enable=function(E){this._inertiaOptions=E||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},$f.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},$f.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},$f.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Hl=function(E,I,C){this._pitchWithRotate=E.pitchWithRotate,this._mouseRotate=I,this._mousePitch=C};Hl.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Hl.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Hl.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Hl.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ml=function(E,I,C,Z){this._el=E,this._touchZoom=I,this._touchRotate=C,this._tapDragZoom=Z,this._rotationDisabled=!1,this._enabled=!0};Ml.prototype.enable=function(E){this._touchZoom.enable(E),this._rotationDisabled||this._touchRotate.enable(E),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ml.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ml.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ml.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ml.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ml.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var cs=function(E){return E.zoom||E.drag||E.pitch||E.rotate},Qu=function(E){function I(){E.apply(this,arguments)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I}(y.Event);function Wa(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}var za=function(E,I){this._map=E,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fc(E),this._bearingSnap=I.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(I),y.bindAll(["handleEvent","handleWindowEvent"],this);var C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[y.window.document,"mousemove",{capture:!0}],[y.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[y.window,"blur",void 0]];for(var Z=0,ut=this._listeners;Z<ut.length;Z+=1){var St=ut[Z],At=St[0];F.addEventListener(At,St[1],At===y.window.document?this.handleWindowEvent:this.handleEvent,St[2])}};za.prototype.destroy=function(){for(var E=0,I=this._listeners;E<I.length;E+=1){var C=I[E],Z=C[0];F.removeEventListener(Z,C[1],Z===y.window.document?this.handleWindowEvent:this.handleEvent,C[2])}},za.prototype._addDefaultHandlers=function(E){var I=this._map,C=I.getCanvasContainer();this._add("mapEvent",new Fu(I,E));var Z=I.boxZoom=new pu(I,E);this._add("boxZoom",Z);var ut=new oc,St=new Uc;I.doubleClickZoom=new hf(St,ut),this._add("tapZoom",ut),this._add("clickZoom",St);var At=new $u;this._add("tapDragZoom",At);var te=I.touchPitch=new ed;this._add("touchPitch",te);var we=new ws(E),Oe=new lf(E);I.dragRotate=new Hl(E,we,Oe),this._add("mouseRotate",we,["mousePitch"]),this._add("mousePitch",Oe,["mouseRotate"]);var Ke=new Ec(E),nr=new Js(E);I.dragPan=new $f(C,Ke,nr),this._add("mousePan",Ke),this._add("touchPan",nr,["touchZoom","touchRotate"]);var $e=new ip,pr=new hc;I.touchZoomRotate=new Ml(C,pr,$e,At),this._add("touchRotate",$e,["touchPan","touchZoom"]),this._add("touchZoom",pr,["touchPan","touchRotate"]);var Sr=I.scrollZoom=new Qo(I,this);this._add("scrollZoom",Sr,["mousePan"]);var zr=I.keyboard=new Gc;this._add("keyboard",zr),this._add("blockableMapEvent",new Ma(I));for(var dr=0,Ur=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];dr<Ur.length;dr+=1){var en=Ur[dr];E.interactive&&E[en]&&I[en].enable(E[en])}},za.prototype._add=function(E,I,C){this._handlers.push({handlerName:E,handler:I,allowed:C}),this._handlersById[E]=I},za.prototype.stop=function(E){if(!this._updatingCamera){for(var I=0,C=this._handlers;I<C.length;I+=1)C[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},E),this._changes=[]}},za.prototype.isActive=function(){for(var E=0,I=this._handlers;E<I.length;E+=1)if(I[E].handler.isActive())return!0;return!1},za.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},za.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},za.prototype.isMoving=function(){return Boolean(cs(this._eventsInProgress))||this.isZooming()},za.prototype._blockedByActive=function(E,I,C){for(var Z in E)if(Z!==C&&(!I||I.indexOf(Z)<0))return!0;return!1},za.prototype.handleWindowEvent=function(E){this.handleEvent(E,E.type+"Window")},za.prototype._getMapTouches=function(E){for(var I=[],C=0,Z=E;C<Z.length;C+=1){var ut=Z[C];this._el.contains(ut.target)&&I.push(ut)}return I},za.prototype.handleEvent=function(E,I){this._updatingCamera=!0;for(var C=E.type==="renderFrame"?void 0:E,Z={needsRenderFrame:!1},ut={},St={},At=E.touches?this._getMapTouches(E.touches):void 0,te=At?F.touchPos(this._el,At):F.mousePos(this._el,E),we=0,Oe=this._handlers;we<Oe.length;we+=1){var Ke=Oe[we],nr=Ke.handlerName,$e=Ke.handler,pr=Ke.allowed;if($e.isEnabled()){var Sr=void 0;this._blockedByActive(St,pr,nr)?$e.reset():$e[I||E.type]&&(Sr=$e[I||E.type](E,te,At),this.mergeHandlerResult(Z,ut,Sr,nr,C),Sr&&Sr.needsRenderFrame&&this._triggerRenderFrame()),(Sr||$e.isActive())&&(St[nr]=$e)}}var zr={};for(var dr in this._previousActiveHandlers)St[dr]||(zr[dr]=C);this._previousActiveHandlers=St,(Object.keys(zr).length||Wa(Z))&&(this._changes.push([Z,ut,zr]),this._triggerRenderFrame()),(Object.keys(St).length||Wa(Z))&&this._map._stop(!0),this._updatingCamera=!1;var Ur=Z.cameraAnimation;Ur&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ur(this._map))},za.prototype.mergeHandlerResult=function(E,I,C,Z,ut){if(C){y.extend(E,C);var St={handlerName:Z,originalEvent:C.originalEvent||ut};C.zoomDelta!==void 0&&(I.zoom=St),C.panDelta!==void 0&&(I.drag=St),C.pitchDelta!==void 0&&(I.pitch=St),C.bearingDelta!==void 0&&(I.rotate=St)}},za.prototype._applyChanges=function(){for(var E={},I={},C={},Z=0,ut=this._changes;Z<ut.length;Z+=1){var St=ut[Z],At=St[0],te=St[1],we=St[2];At.panDelta&&(E.panDelta=(E.panDelta||new y.Point(0,0))._add(At.panDelta)),At.zoomDelta&&(E.zoomDelta=(E.zoomDelta||0)+At.zoomDelta),At.bearingDelta&&(E.bearingDelta=(E.bearingDelta||0)+At.bearingDelta),At.pitchDelta&&(E.pitchDelta=(E.pitchDelta||0)+At.pitchDelta),At.around!==void 0&&(E.around=At.around),At.pinchAround!==void 0&&(E.pinchAround=At.pinchAround),At.noInertia&&(E.noInertia=At.noInertia),y.extend(I,te),y.extend(C,we)}this._updateMapTransform(E,I,C),this._changes=[]},za.prototype._updateMapTransform=function(E,I,C){var Z=this._map,ut=Z.transform;if(!Wa(E))return this._fireEvents(I,C,!0);var St=E.panDelta,At=E.zoomDelta,te=E.bearingDelta,we=E.pitchDelta,Oe=E.around,Ke=E.pinchAround;Ke!==void 0&&(Oe=Ke),Z._stop(!0),Oe=Oe||Z.transform.centerPoint;var nr=ut.pointLocation(St?Oe.sub(St):Oe);te&&(ut.bearing+=te),we&&(ut.pitch+=we),At&&(ut.zoom+=At),ut.setLocationAtPoint(nr,Oe),this._map._update(),E.noInertia||this._inertia.record(E),this._fireEvents(I,C,!0)},za.prototype._fireEvents=function(E,I,C){var Z=this,ut=cs(this._eventsInProgress),St=cs(E),At={};for(var te in E)this._eventsInProgress[te]||(At[te+"start"]=E[te].originalEvent),this._eventsInProgress[te]=E[te];for(var we in!ut&&St&&this._fireEvent("movestart",St.originalEvent),At)this._fireEvent(we,At[we]);for(var Oe in St&&this._fireEvent("move",St.originalEvent),E)this._fireEvent(Oe,E[Oe].originalEvent);var Ke,nr={};for(var $e in this._eventsInProgress){var pr=this._eventsInProgress[$e],Sr=pr.handlerName,zr=pr.originalEvent;this._handlersById[Sr].isActive()||(delete this._eventsInProgress[$e],nr[$e+"end"]=Ke=I[Sr]||zr)}for(var dr in nr)this._fireEvent(dr,nr[dr]);var Ur=cs(this._eventsInProgress);if(C&&(ut||St)&&!Ur){this._updatingCamera=!0;var en=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Sn=function(Zn){return Zn!==0&&-Z._bearingSnap<Zn&&Zn<Z._bearingSnap};en?(Sn(en.bearing||this._map.getBearing())&&(en.bearing=0),this._map.easeTo(en,{originalEvent:Ke})):(this._map.fire(new y.Event("moveend",{originalEvent:Ke})),Sn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},za.prototype._fireEvent=function(E,I){this._map.fire(new y.Event(E,I?{originalEvent:I}:{}))},za.prototype._requestFrame=function(){var E=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete E._frameId,E.handleEvent(new Qu("renderFrame",{timeStamp:I})),E._applyChanges()})},za.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var qu=function(E){function I(C,Z){E.call(this),this._moving=!1,this._zooming=!1,this.transform=C,this._bearingSnap=Z.bearingSnap,y.bindAll(["_renderFrameCallback"],this)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.getCenter=function(){return new y.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(C,Z){return this.jumpTo({center:C},Z)},I.prototype.panBy=function(C,Z,ut){return C=y.Point.convert(C).mult(-1),this.panTo(this.transform.center,y.extend({offset:C},Z),ut)},I.prototype.panTo=function(C,Z,ut){return this.easeTo(y.extend({center:C},Z),ut)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(C,Z){return this.jumpTo({zoom:C},Z),this},I.prototype.zoomTo=function(C,Z,ut){return this.easeTo(y.extend({zoom:C},Z),ut)},I.prototype.zoomIn=function(C,Z){return this.zoomTo(this.getZoom()+1,C,Z),this},I.prototype.zoomOut=function(C,Z){return this.zoomTo(this.getZoom()-1,C,Z),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(C,Z){return this.jumpTo({bearing:C},Z),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(C,Z){return this.jumpTo({padding:C},Z),this},I.prototype.rotateTo=function(C,Z,ut){return this.easeTo(y.extend({bearing:C},Z),ut)},I.prototype.resetNorth=function(C,Z){return this.rotateTo(0,y.extend({duration:1e3},C),Z),this},I.prototype.resetNorthPitch=function(C,Z){return this.easeTo(y.extend({bearing:0,pitch:0,duration:1e3},C),Z),this},I.prototype.snapToNorth=function(C,Z){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(C,Z):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(C,Z){return this.jumpTo({pitch:C},Z),this},I.prototype.cameraForBounds=function(C,Z){C=y.LngLatBounds.convert(C);var ut=Z&&Z.bearing||0;return this._cameraForBoxAndBearing(C.getNorthWest(),C.getSouthEast(),ut,Z)},I.prototype._cameraForBoxAndBearing=function(C,Z,ut,St){var At={top:0,bottom:0,right:0,left:0};if(typeof(St=y.extend({padding:At,offset:[0,0],maxZoom:this.transform.maxZoom},St)).padding=="number"){var te=St.padding;St.padding={top:te,bottom:te,right:te,left:te}}St.padding=y.extend(At,St.padding);var we=this.transform,Oe=we.padding,Ke=we.project(y.LngLat.convert(C)),nr=we.project(y.LngLat.convert(Z)),$e=Ke.rotate(-ut*Math.PI/180),pr=nr.rotate(-ut*Math.PI/180),Sr=new y.Point(Math.max($e.x,pr.x),Math.max($e.y,pr.y)),zr=new y.Point(Math.min($e.x,pr.x),Math.min($e.y,pr.y)),dr=Sr.sub(zr),Ur=(we.width-(Oe.left+Oe.right+St.padding.left+St.padding.right))/dr.x,en=(we.height-(Oe.top+Oe.bottom+St.padding.top+St.padding.bottom))/dr.y;if(!(en<0||Ur<0)){var Sn=Math.min(we.scaleZoom(we.scale*Math.min(Ur,en)),St.maxZoom),Zn=typeof St.offset.x=="number"?new y.Point(St.offset.x,St.offset.y):y.Point.convert(St.offset),Pn=new y.Point((St.padding.left-St.padding.right)/2,(St.padding.top-St.padding.bottom)/2).rotate(ut*Math.PI/180),Fn=Zn.add(Pn).mult(we.scale/we.zoomScale(Sn));return{center:we.unproject(Ke.add(nr).div(2).sub(Fn)),zoom:Sn,bearing:ut}}y.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(C,Z,ut){return this._fitInternal(this.cameraForBounds(C,Z),Z,ut)},I.prototype.fitScreenCoordinates=function(C,Z,ut,St,At){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(y.Point.convert(C)),this.transform.pointLocation(y.Point.convert(Z)),ut,St),St,At)},I.prototype._fitInternal=function(C,Z,ut){return C?(delete(Z=y.extend(C,Z)).padding,Z.linear?this.easeTo(Z,ut):this.flyTo(Z,ut)):this},I.prototype.jumpTo=function(C,Z){this.stop();var ut=this.transform,St=!1,At=!1,te=!1;return"zoom"in C&&ut.zoom!==+C.zoom&&(St=!0,ut.zoom=+C.zoom),C.center!==void 0&&(ut.center=y.LngLat.convert(C.center)),"bearing"in C&&ut.bearing!==+C.bearing&&(At=!0,ut.bearing=+C.bearing),"pitch"in C&&ut.pitch!==+C.pitch&&(te=!0,ut.pitch=+C.pitch),C.padding==null||ut.isPaddingEqual(C.padding)||(ut.padding=C.padding),this.fire(new y.Event("movestart",Z)).fire(new y.Event("move",Z)),St&&this.fire(new y.Event("zoomstart",Z)).fire(new y.Event("zoom",Z)).fire(new y.Event("zoomend",Z)),At&&this.fire(new y.Event("rotatestart",Z)).fire(new y.Event("rotate",Z)).fire(new y.Event("rotateend",Z)),te&&this.fire(new y.Event("pitchstart",Z)).fire(new y.Event("pitch",Z)).fire(new y.Event("pitchend",Z)),this.fire(new y.Event("moveend",Z))},I.prototype.easeTo=function(C,Z){var ut=this;this._stop(!1,C.easeId),((C=y.extend({offset:[0,0],duration:500,easing:y.ease},C)).animate===!1||!C.essential&&y.browser.prefersReducedMotion)&&(C.duration=0);var St=this.transform,At=this.getZoom(),te=this.getBearing(),we=this.getPitch(),Oe=this.getPadding(),Ke="zoom"in C?+C.zoom:At,nr="bearing"in C?this._normalizeBearing(C.bearing,te):te,$e="pitch"in C?+C.pitch:we,pr="padding"in C?C.padding:St.padding,Sr=y.Point.convert(C.offset),zr=St.centerPoint.add(Sr),dr=St.pointLocation(zr),Ur=y.LngLat.convert(C.center||dr);this._normalizeCenter(Ur);var en,Sn,Zn=St.project(dr),Pn=St.project(Ur).sub(Zn),Fn=St.zoomScale(Ke-At);C.around&&(en=y.LngLat.convert(C.around),Sn=St.locationPoint(en));var gi={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ke!==At,this._rotating=this._rotating||te!==nr,this._pitching=this._pitching||$e!==we,this._padding=!St.isPaddingEqual(pr),this._easeId=C.easeId,this._prepareEase(Z,C.noMoveStart,gi),this._ease(function(Vi){if(ut._zooming&&(St.zoom=y.number(At,Ke,Vi)),ut._rotating&&(St.bearing=y.number(te,nr,Vi)),ut._pitching&&(St.pitch=y.number(we,$e,Vi)),ut._padding&&(St.interpolatePadding(Oe,pr,Vi),zr=St.centerPoint.add(Sr)),en)St.setLocationAtPoint(en,Sn);else{var Hi=St.zoomScale(St.zoom-At),fa=Ke>At?Math.min(2,Fn):Math.max(.5,Fn),$a=Math.pow(fa,1-Vi),Qa=St.unproject(Zn.add(Pn.mult(Vi*$a)).mult(Hi));St.setLocationAtPoint(St.renderWorldCopies?Qa.wrap():Qa,zr)}ut._fireMoveEvents(Z)},function(Vi){ut._afterEase(Z,Vi)},C),this},I.prototype._prepareEase=function(C,Z,ut){ut===void 0&&(ut={}),this._moving=!0,Z||ut.moving||this.fire(new y.Event("movestart",C)),this._zooming&&!ut.zooming&&this.fire(new y.Event("zoomstart",C)),this._rotating&&!ut.rotating&&this.fire(new y.Event("rotatestart",C)),this._pitching&&!ut.pitching&&this.fire(new y.Event("pitchstart",C))},I.prototype._fireMoveEvents=function(C){this.fire(new y.Event("move",C)),this._zooming&&this.fire(new y.Event("zoom",C)),this._rotating&&this.fire(new y.Event("rotate",C)),this._pitching&&this.fire(new y.Event("pitch",C))},I.prototype._afterEase=function(C,Z){if(!this._easeId||!Z||this._easeId!==Z){delete this._easeId;var ut=this._zooming,St=this._rotating,At=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ut&&this.fire(new y.Event("zoomend",C)),St&&this.fire(new y.Event("rotateend",C)),At&&this.fire(new y.Event("pitchend",C)),this.fire(new y.Event("moveend",C))}},I.prototype.flyTo=function(C,Z){var ut=this;if(!C.essential&&y.browser.prefersReducedMotion){var St=y.pick(C,["center","zoom","bearing","pitch","around"]);return this.jumpTo(St,Z)}this.stop(),C=y.extend({offset:[0,0],speed:1.2,curve:1.42,easing:y.ease},C);var At=this.transform,te=this.getZoom(),we=this.getBearing(),Oe=this.getPitch(),Ke=this.getPadding(),nr="zoom"in C?y.clamp(+C.zoom,At.minZoom,At.maxZoom):te,$e="bearing"in C?this._normalizeBearing(C.bearing,we):we,pr="pitch"in C?+C.pitch:Oe,Sr="padding"in C?C.padding:At.padding,zr=At.zoomScale(nr-te),dr=y.Point.convert(C.offset),Ur=At.centerPoint.add(dr),en=At.pointLocation(Ur),Sn=y.LngLat.convert(C.center||en);this._normalizeCenter(Sn);var Zn=At.project(en),Pn=At.project(Sn).sub(Zn),Fn=C.curve,gi=Math.max(At.width,At.height),Vi=gi/zr,Hi=Pn.mag();if("minZoom"in C){var fa=y.clamp(Math.min(C.minZoom,te,nr),At.minZoom,At.maxZoom),$a=gi/At.zoomScale(fa-te);Fn=Math.sqrt($a/Hi*2)}var Qa=Fn*Fn;function so(yo){var uo=(Vi*Vi-gi*gi+(yo?-1:1)*Qa*Qa*Hi*Hi)/(2*(yo?Vi:gi)*Qa*Hi);return Math.log(Math.sqrt(uo*uo+1)-uo)}function No(yo){return(Math.exp(yo)-Math.exp(-yo))/2}function ea(yo){return(Math.exp(yo)+Math.exp(-yo))/2}var Eo=so(0),Ro=function(yo){return ea(Eo)/ea(Eo+Fn*yo)},bo=function(yo){return gi*((ea(Eo)*(No(uo=Eo+Fn*yo)/ea(uo))-No(Eo))/Qa)/Hi;var uo},ho=(so(1)-Eo)/Fn;if(Math.abs(Hi)<1e-6||!isFinite(ho)){if(Math.abs(gi-Vi)<1e-6)return this.easeTo(C,Z);var zo=Vi<gi?-1:1;ho=Math.abs(Math.log(Vi/gi))/Fn,bo=function(){return 0},Ro=function(yo){return Math.exp(zo*Fn*yo)}}return C.duration="duration"in C?+C.duration:1e3*ho/("screenSpeed"in C?+C.screenSpeed/Fn:+C.speed),C.maxDuration&&C.duration>C.maxDuration&&(C.duration=0),this._zooming=!0,this._rotating=we!==$e,this._pitching=pr!==Oe,this._padding=!At.isPaddingEqual(Sr),this._prepareEase(Z,!1),this._ease(function(yo){var uo=yo*ho,tu=1/Ro(uo);At.zoom=yo===1?nr:te+At.scaleZoom(tu),ut._rotating&&(At.bearing=y.number(we,$e,yo)),ut._pitching&&(At.pitch=y.number(Oe,pr,yo)),ut._padding&&(At.interpolatePadding(Ke,Sr,yo),Ur=At.centerPoint.add(dr));var mu=yo===1?Sn:At.unproject(Zn.add(Pn.mult(bo(uo))).mult(tu));At.setLocationAtPoint(At.renderWorldCopies?mu.wrap():mu,Ur),ut._fireMoveEvents(Z)},function(){return ut._afterEase(Z)},C),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(C,Z){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ut=this._onEaseEnd;delete this._onEaseEnd,ut.call(this,Z)}if(!C){var St=this.handlers;St&&St.stop(!1)}return this},I.prototype._ease=function(C,Z,ut){ut.animate===!1||ut.duration===0?(C(1),Z()):(this._easeStart=y.browser.now(),this._easeOptions=ut,this._onEaseFrame=C,this._onEaseEnd=Z,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var C=Math.min((y.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(C,Z){C=y.wrap(C,-180,180);var ut=Math.abs(C-Z);return Math.abs(C-360-Z)<ut&&(C-=360),Math.abs(C+360-Z)<ut&&(C+=360),C},I.prototype._normalizeCenter=function(C){var Z=this.transform;if(Z.renderWorldCopies&&!Z.lngRange){var ut=C.lng-Z.center.lng;C.lng+=ut>180?-360:ut<-180?360:0}},I}(y.Evented),Zo=function(E){E===void 0&&(E={}),this.options=E,y.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Zo.prototype.getDefaultPosition=function(){return"bottom-right"},Zo.prototype.onAdd=function(E){var I=this.options&&this.options.compact;return this._map=E,this._container=F.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zo.prototype.onRemove=function(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zo.prototype._setElementTitle=function(E,I){var C=this._map._getUIString("AttributionControl."+I);E.title=C,E.setAttribute("aria-label",C)},Zo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Zo.prototype._updateEditLink=function(){var E=this._editLink;E||(E=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||y.config.ACCESS_TOKEN}];if(E){var C=I.reduce(function(Z,ut,St){return ut.value&&(Z+=ut.key+"="+ut.value+(St<I.length-1?"&":"")),Z},"?");E.href=y.config.FEEDBACK_URL+"/"+C+(this._map._hash?this._map._hash.getHashString(!0):""),E.rel="noopener nofollow",this._setElementTitle(E,"MapFeedback")}},Zo.prototype._updateData=function(E){!E||E.sourceDataType!=="metadata"&&E.sourceDataType!=="visibility"&&E.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Zo.prototype._updateAttributions=function(){if(this._map.style){var E=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?E=E.concat(this.options.customAttribution.map(function(te){return typeof te!="string"?"":te})):typeof this.options.customAttribution=="string"&&E.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var C=this._map.style.sourceCaches;for(var Z in C){var ut=C[Z];if(ut.used){var St=ut.getSource();St.attribution&&E.indexOf(St.attribution)<0&&E.push(St.attribution)}}E.sort(function(te,we){return te.length-we.length});var At=(E=E.filter(function(te,we){for(var Oe=we+1;Oe<E.length;Oe++)if(E[Oe].indexOf(te)>=0)return!1;return!0})).join(" | ");At!==this._attribHTML&&(this._attribHTML=At,E.length?(this._innerContainer.innerHTML=At,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var uc=function(){y.bindAll(["_updateLogo"],this),y.bindAll(["_updateCompact"],this)};uc.prototype.onAdd=function(E){this._map=E,this._container=F.create("div","mapboxgl-ctrl");var I=F.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},uc.prototype.onRemove=function(){F.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},uc.prototype.getDefaultPosition=function(){return"bottom-left"},uc.prototype._updateLogo=function(E){E&&E.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},uc.prototype._logoRequired=function(){if(this._map.style){var E=this._map.style.sourceCaches;for(var I in E)if(E[I].getSource().mapbox_logo)return!0;return!1}},uc.prototype._updateCompact=function(){var E=this._container.children;if(E.length){var I=E[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var Rs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Rs.prototype.add=function(E){var I=++this._id;return this._queue.push({callback:E,id:I,cancelled:!1}),I},Rs.prototype.remove=function(E){for(var I=this._currentlyRunning,C=0,Z=I?this._queue.concat(I):this._queue;C<Z.length;C+=1){var ut=Z[C];if(ut.id===E)return void(ut.cancelled=!0)}},Rs.prototype.run=function(E){E===void 0&&(E=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var C=0,Z=I;C<Z.length;C+=1){var ut=Z[C];if(!ut.cancelled&&(ut.callback(E),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Rs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var gs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rd=y.window.HTMLImageElement,nd=y.window.HTMLElement,Zs=y.window.ImageBitmap,Hs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Cv=function(E){function I(Z){var ut=this;if((Z=y.extend({},Hs,Z)).minZoom!=null&&Z.maxZoom!=null&&Z.minZoom>Z.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(Z.minPitch!=null&&Z.maxPitch!=null&&Z.minPitch>Z.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(Z.minPitch!=null&&Z.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(Z.maxPitch!=null&&Z.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var St=new vs(Z.minZoom,Z.maxZoom,Z.minPitch,Z.maxPitch,Z.renderWorldCopies);if(E.call(this,St,Z),this._interactive=Z.interactive,this._maxTileCacheSize=Z.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Z.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Z.preserveDrawingBuffer,this._antialias=Z.antialias,this._trackResize=Z.trackResize,this._bearingSnap=Z.bearingSnap,this._refreshExpiredTiles=Z.refreshExpiredTiles,this._fadeDuration=Z.fadeDuration,this._crossSourceCollisions=Z.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Z.collectResourceTiming,this._renderTaskQueue=new Rs,this._controls=[],this._mapId=y.uniqueId(),this._locale=y.extend({},gs,Z.locale),this._clickTolerance=Z.clickTolerance,this._requestManager=new y.RequestManager(Z.transformRequest,Z.accessToken),typeof Z.container=="string"){if(this._container=y.window.document.getElementById(Z.container),!this._container)throw new Error("Container '"+Z.container+"' not found.")}else{if(!(Z.container instanceof nd))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Z.container}if(Z.maxBounds&&this.setMaxBounds(Z.maxBounds),y.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ut._update(!1)}),this.on("moveend",function(){return ut._update(!1)}),this.on("zoom",function(){return ut._update(!0)}),y.window!==void 0&&(y.window.addEventListener("online",this._onWindowOnline,!1),y.window.addEventListener("resize",this._onWindowResize,!1),y.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new za(this,Z),this._hash=Z.hash&&new ks(typeof Z.hash=="string"&&Z.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Z.center,zoom:Z.zoom,bearing:Z.bearing,pitch:Z.pitch}),Z.bounds&&(this.resize(),this.fitBounds(Z.bounds,y.extend({},Z.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Z.localIdeographFontFamily,Z.style&&this.setStyle(Z.style,{localIdeographFontFamily:Z.localIdeographFontFamily}),Z.attributionControl&&this.addControl(new Zo({customAttribution:Z.customAttribution})),this.addControl(new uc,Z.logoPosition),this.on("style.load",function(){ut.transform.unmodified&&ut.jumpTo(ut.style.stylesheet)}),this.on("data",function(At){ut._update(At.dataType==="style"),ut.fire(new y.Event(At.dataType+"data",At))}),this.on("dataloading",function(At){ut.fire(new y.Event(At.dataType+"dataloading",At))})}E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I;var C={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(Z,ut){if(ut===void 0&&(ut=Z.getDefaultPosition?Z.getDefaultPosition():"top-right"),!Z||!Z.onAdd)return this.fire(new y.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var St=Z.onAdd(this);this._controls.push(Z);var At=this._controlPositions[ut];return ut.indexOf("bottom")!==-1?At.insertBefore(St,At.firstChild):At.appendChild(St),this},I.prototype.removeControl=function(Z){if(!Z||!Z.onRemove)return this.fire(new y.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ut=this._controls.indexOf(Z);return ut>-1&&this._controls.splice(ut,1),Z.onRemove(this),this},I.prototype.hasControl=function(Z){return this._controls.indexOf(Z)>-1},I.prototype.resize=function(Z){var ut=this._containerDimensions(),St=ut[0],At=ut[1];if(St===this.transform.width&&At===this.transform.height)return this;this._resizeCanvas(St,At),this.transform.resize(St,At),this.painter.resize(St,At);var te=!this._moving;return te&&this.fire(new y.Event("movestart",Z)).fire(new y.Event("move",Z)),this.fire(new y.Event("resize",Z)),te&&this.fire(new y.Event("moveend",Z)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(Z){return this.transform.setMaxBounds(y.LngLatBounds.convert(Z)),this._update()},I.prototype.setMinZoom=function(Z){if((Z=Z==null?-2:Z)>=-2&&Z<=this.transform.maxZoom)return this.transform.minZoom=Z,this._update(),this.getZoom()<Z&&this.setZoom(Z),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(Z){if((Z=Z==null?22:Z)>=this.transform.minZoom)return this.transform.maxZoom=Z,this._update(),this.getZoom()>Z&&this.setZoom(Z),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(Z){if((Z=Z==null?0:Z)<0)throw new Error("minPitch must be greater than or equal to 0");if(Z>=0&&Z<=this.transform.maxPitch)return this.transform.minPitch=Z,this._update(),this.getPitch()<Z&&this.setPitch(Z),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(Z){if((Z=Z==null?60:Z)>60)throw new Error("maxPitch must be less than or equal to 60");if(Z>=this.transform.minPitch)return this.transform.maxPitch=Z,this._update(),this.getPitch()>Z&&this.setPitch(Z),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(Z){return this.transform.renderWorldCopies=Z,this._update()},I.prototype.project=function(Z){return this.transform.locationPoint(y.LngLat.convert(Z))},I.prototype.unproject=function(Z){return this.transform.pointLocation(y.Point.convert(Z))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(Z,ut,St){var At,te=this;if(Z==="mouseenter"||Z==="mouseover"){var we=!1;return{layer:ut,listener:St,delegates:{mousemove:function(Ke){var nr=te.getLayer(ut)?te.queryRenderedFeatures(Ke.point,{layers:[ut]}):[];nr.length?we||(we=!0,St.call(te,new Hu(Z,te,Ke.originalEvent,{features:nr}))):we=!1},mouseout:function(){we=!1}}}}if(Z==="mouseleave"||Z==="mouseout"){var Oe=!1;return{layer:ut,listener:St,delegates:{mousemove:function(Ke){(te.getLayer(ut)?te.queryRenderedFeatures(Ke.point,{layers:[ut]}):[]).length?Oe=!0:Oe&&(Oe=!1,St.call(te,new Hu(Z,te,Ke.originalEvent)))},mouseout:function(Ke){Oe&&(Oe=!1,St.call(te,new Hu(Z,te,Ke.originalEvent)))}}}}return{layer:ut,listener:St,delegates:(At={},At[Z]=function(Ke){var nr=te.getLayer(ut)?te.queryRenderedFeatures(Ke.point,{layers:[ut]}):[];nr.length&&(Ke.features=nr,St.call(te,Ke),delete Ke.features)},At)}},I.prototype.on=function(Z,ut,St){if(St===void 0)return E.prototype.on.call(this,Z,ut);var At=this._createDelegatedListener(Z,ut,St);for(var te in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Z]=this._delegatedListeners[Z]||[],this._delegatedListeners[Z].push(At),At.delegates)this.on(te,At.delegates[te]);return this},I.prototype.once=function(Z,ut,St){if(St===void 0)return E.prototype.once.call(this,Z,ut);var At=this._createDelegatedListener(Z,ut,St);for(var te in At.delegates)this.once(te,At.delegates[te]);return this},I.prototype.off=function(Z,ut,St){var At=this;return St===void 0?E.prototype.off.call(this,Z,ut):(this._delegatedListeners&&this._delegatedListeners[Z]&&function(te){for(var we=te[Z],Oe=0;Oe<we.length;Oe++){var Ke=we[Oe];if(Ke.layer===ut&&Ke.listener===St){for(var nr in Ke.delegates)At.off(nr,Ke.delegates[nr]);return we.splice(Oe,1),At}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(Z,ut){if(!this.style)return[];var St;if(ut!==void 0||Z===void 0||Z instanceof y.Point||Array.isArray(Z)||(ut=Z,Z=void 0),ut=ut||{},(Z=Z||[[0,0],[this.transform.width,this.transform.height]])instanceof y.Point||typeof Z[0]=="number")St=[y.Point.convert(Z)];else{var At=y.Point.convert(Z[0]),te=y.Point.convert(Z[1]);St=[At,new y.Point(te.x,At.y),te,new y.Point(At.x,te.y),At]}return this.style.queryRenderedFeatures(St,ut,this.transform)},I.prototype.querySourceFeatures=function(Z,ut){return this.style.querySourceFeatures(Z,ut)},I.prototype.setStyle=function(Z,ut){return(ut=y.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ut)).diff!==!1&&ut.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Z?(this._diffStyle(Z,ut),this):(this._localIdeographFontFamily=ut.localIdeographFontFamily,this._updateStyle(Z,ut))},I.prototype._getUIString=function(Z){var ut=this._locale[Z];if(ut==null)throw new Error("Missing UI string '"+Z+"'");return ut},I.prototype._updateStyle=function(Z,ut){return this.style&&(this.style.setEventedParent(null),this.style._remove()),Z?(this.style=new ou(this,ut||{}),this.style.setEventedParent(this,{style:this.style}),typeof Z=="string"?this.style.loadURL(Z):this.style.loadJSON(Z),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ou(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(Z,ut){var St=this;if(typeof Z=="string"){var At=this._requestManager.normalizeStyleURL(Z),te=this._requestManager.transformRequest(At,y.ResourceType.Style);y.getJSON(te,function(we,Oe){we?St.fire(new y.ErrorEvent(we)):Oe&&St._updateDiff(Oe,ut)})}else typeof Z=="object"&&this._updateDiff(Z,ut)},I.prototype._updateDiff=function(Z,ut){try{this.style.setState(Z)&&this._update(!0)}catch(St){y.warnOnce("Unable to perform style diff: "+(St.message||St.error||St)+".  Rebuilding the style from scratch."),this._updateStyle(Z,ut)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():y.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(Z,ut){return this._lazyInitEmptyStyle(),this.style.addSource(Z,ut),this._update(!0)},I.prototype.isSourceLoaded=function(Z){var ut=this.style&&this.style.sourceCaches[Z];if(ut!==void 0)return ut.loaded();this.fire(new y.ErrorEvent(new Error("There is no source with ID '"+Z+"'")))},I.prototype.areTilesLoaded=function(){var Z=this.style&&this.style.sourceCaches;for(var ut in Z){var St=Z[ut]._tiles;for(var At in St){var te=St[At];if(te.state!=="loaded"&&te.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(Z,ut,St){return this._lazyInitEmptyStyle(),this.style.addSourceType(Z,ut,St)},I.prototype.removeSource=function(Z){return this.style.removeSource(Z),this._update(!0)},I.prototype.getSource=function(Z){return this.style.getSource(Z)},I.prototype.addImage=function(Z,ut,St){St===void 0&&(St={});var At=St.pixelRatio;At===void 0&&(At=1);var te=St.sdf;te===void 0&&(te=!1);var we=St.stretchX,Oe=St.stretchY,Ke=St.content;if(this._lazyInitEmptyStyle(),ut instanceof rd||Zs&&ut instanceof Zs){var nr=y.browser.getImageData(ut);this.style.addImage(Z,{data:new y.RGBAImage({width:nr.width,height:nr.height},nr.data),pixelRatio:At,stretchX:we,stretchY:Oe,content:Ke,sdf:te,version:0})}else{if(ut.width===void 0||ut.height===void 0)return this.fire(new y.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $e=ut;this.style.addImage(Z,{data:new y.RGBAImage({width:ut.width,height:ut.height},new Uint8Array(ut.data)),pixelRatio:At,stretchX:we,stretchY:Oe,content:Ke,sdf:te,version:0,userImage:$e}),$e.onAdd&&$e.onAdd(this,Z)}},I.prototype.updateImage=function(Z,ut){var St=this.style.getImage(Z);if(!St)return this.fire(new y.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var At=ut instanceof rd||Zs&&ut instanceof Zs?y.browser.getImageData(ut):ut,te=At.width,we=At.height,Oe=At.data;return te===void 0||we===void 0?this.fire(new y.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):te!==St.data.width||we!==St.data.height?this.fire(new y.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(St.data.replace(Oe,!(ut instanceof rd||Zs&&ut instanceof Zs)),void this.style.updateImage(Z,St))},I.prototype.hasImage=function(Z){return Z?!!this.style.getImage(Z):(this.fire(new y.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(Z){this.style.removeImage(Z)},I.prototype.loadImage=function(Z,ut){y.getImage(this._requestManager.transformRequest(Z,y.ResourceType.Image),ut)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(Z,ut){return this._lazyInitEmptyStyle(),this.style.addLayer(Z,ut),this._update(!0)},I.prototype.moveLayer=function(Z,ut){return this.style.moveLayer(Z,ut),this._update(!0)},I.prototype.removeLayer=function(Z){return this.style.removeLayer(Z),this._update(!0)},I.prototype.getLayer=function(Z){return this.style.getLayer(Z)},I.prototype.setLayerZoomRange=function(Z,ut,St){return this.style.setLayerZoomRange(Z,ut,St),this._update(!0)},I.prototype.setFilter=function(Z,ut,St){return St===void 0&&(St={}),this.style.setFilter(Z,ut,St),this._update(!0)},I.prototype.getFilter=function(Z){return this.style.getFilter(Z)},I.prototype.setPaintProperty=function(Z,ut,St,At){return At===void 0&&(At={}),this.style.setPaintProperty(Z,ut,St,At),this._update(!0)},I.prototype.getPaintProperty=function(Z,ut){return this.style.getPaintProperty(Z,ut)},I.prototype.setLayoutProperty=function(Z,ut,St,At){return At===void 0&&(At={}),this.style.setLayoutProperty(Z,ut,St,At),this._update(!0)},I.prototype.getLayoutProperty=function(Z,ut){return this.style.getLayoutProperty(Z,ut)},I.prototype.setLight=function(Z,ut){return ut===void 0&&(ut={}),this._lazyInitEmptyStyle(),this.style.setLight(Z,ut),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(Z,ut){return this.style.setFeatureState(Z,ut),this._update()},I.prototype.removeFeatureState=function(Z,ut){return this.style.removeFeatureState(Z,ut),this._update()},I.prototype.getFeatureState=function(Z){return this.style.getFeatureState(Z)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var Z=0,ut=0;return this._container&&(Z=this._container.clientWidth||400,ut=this._container.clientHeight||300),[Z,ut]},I.prototype._detectMissingCSS=function(){y.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&y.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var Z=this._container;Z.classList.add("mapboxgl-map"),(this._missingCSSCanary=F.create("div","mapboxgl-canary",Z)).style.visibility="hidden",this._detectMissingCSS();var ut=this._canvasContainer=F.create("div","mapboxgl-canvas-container",Z);this._interactive&&ut.classList.add("mapboxgl-interactive"),this._canvas=F.create("canvas","mapboxgl-canvas",ut),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var St=this._containerDimensions();this._resizeCanvas(St[0],St[1]);var At=this._controlContainer=F.create("div","mapboxgl-control-container",Z),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(we){te[we]=F.create("div","mapboxgl-ctrl-"+we,At)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(Z,ut){var St=y.browser.devicePixelRatio||1;this._canvas.width=St*Z,this._canvas.height=St*ut,this._canvas.style.width=Z+"px",this._canvas.style.height=ut+"px"},I.prototype._setupPainter=function(){var Z=y.extend({},U.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ut=this._canvas.getContext("webgl",Z)||this._canvas.getContext("experimental-webgl",Z);ut?(this.painter=new Ms(ut,this.transform),y.webpSupported.testSupport(ut)):this.fire(new y.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(Z){Z.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new y.Event("webglcontextlost",{originalEvent:Z}))},I.prototype._contextRestored=function(Z){this._setupPainter(),this.resize(),this._update(),this.fire(new y.Event("webglcontextrestored",{originalEvent:Z}))},I.prototype._onMapScroll=function(Z){if(Z.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(Z){return this.style?(this._styleDirty=this._styleDirty||Z,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(Z){return this._update(),this._renderTaskQueue.add(Z)},I.prototype._cancelRenderFrame=function(Z){this._renderTaskQueue.remove(Z)},I.prototype._render=function(Z){var ut,St=this,At=0,te=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ut=te.createQueryEXT(),te.beginQueryEXT(te.TIME_ELAPSED_EXT,ut),At=y.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Z),!this._removed){var we=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Oe=this.transform.zoom,Ke=y.browser.now();this.style.zoomHistory.update(Oe,Ke);var nr=new y.EvaluationParameters(Oe,{now:Ke,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$e=nr.crossFadingFactor();$e===1&&$e===this._crossFadingFactor||(we=!0,this._crossFadingFactor=$e),this.style.update(nr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new y.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new y.Event("load"))),this.style&&(this.style.hasTransitions()||we)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var pr=y.browser.now()-At;te.endQueryEXT(te.TIME_ELAPSED_EXT,ut),setTimeout(function(){var dr=te.getQueryObjectEXT(ut,te.QUERY_RESULT_EXT)/1e6;te.deleteQueryEXT(ut),St.fire(new y.Event("gpu-timing-frame",{cpuTime:pr,gpuTime:dr}))},50)}if(this.listens("gpu-timing-layer")){var Sr=this.painter.collectGpuTimers();setTimeout(function(){var dr=St.painter.queryGpuTimers(Sr);St.fire(new y.Event("gpu-timing-layer",{layerTimes:dr}))},50)}var zr=this._sourcesDirty||this._styleDirty||this._placementDirty;return zr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new y.Event("idle")),!this._loaded||this._fullyLoaded||zr||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var Z=0,ut=this._controls;Z<ut.length;Z+=1)ut[Z].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),y.window!==void 0&&(y.window.removeEventListener("resize",this._onWindowResize,!1),y.window.removeEventListener("orientationchange",this._onWindowResize,!1),y.window.removeEventListener("online",this._onWindowOnline,!1));var St=this.painter.context.gl.getExtension("WEBGL_lose_context");St&&St.loseContext(),Cf(this._canvasContainer),Cf(this._controlContainer),Cf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new y.Event("remove"))},I.prototype.triggerRepaint=function(){var Z=this;this.style&&!this._frame&&(this._frame=y.browser.frame(function(ut){Z._frame=null,Z._render(ut)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(Z){this._trackResize&&this.resize({originalEvent:Z})._update()},C.showTileBoundaries.get=function(){return!!this._showTileBoundaries},C.showTileBoundaries.set=function(Z){this._showTileBoundaries!==Z&&(this._showTileBoundaries=Z,this._update())},C.showPadding.get=function(){return!!this._showPadding},C.showPadding.set=function(Z){this._showPadding!==Z&&(this._showPadding=Z,this._update())},C.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},C.showCollisionBoxes.set=function(Z){this._showCollisionBoxes!==Z&&(this._showCollisionBoxes=Z,Z?this.style._generateCollisionBoxes():this._update())},C.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},C.showOverdrawInspector.set=function(Z){this._showOverdrawInspector!==Z&&(this._showOverdrawInspector=Z,this._update())},C.repaint.get=function(){return!!this._repaint},C.repaint.set=function(Z){this._repaint!==Z&&(this._repaint=Z,this.triggerRepaint())},C.vertices.get=function(){return!!this._vertices},C.vertices.set=function(Z){this._vertices=Z,this._update()},I.prototype._setCacheLimits=function(Z,ut){y.setCacheLimits(Z,ut)},C.version.get=function(){return y.version},Object.defineProperties(I.prototype,C),I}(qu);function Cf(E){E.parentNode&&E.parentNode.removeChild(E)}var Vc={showCompass:!0,showZoom:!0,visualizePitch:!1},as=function(E){var I=this;this.options=y.extend({},Vc,E),this._container=F.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(C){return C.preventDefault()}),this.options.showZoom&&(y.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(C){return I._map.zoomIn({},{originalEvent:C})}),F.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(C){return I._map.zoomOut({},{originalEvent:C})}),F.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(y.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(C){I.options.visualizePitch?I._map.resetNorthPitch({},{originalEvent:C}):I._map.resetNorth({},{originalEvent:C})}),this._compassIcon=F.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};as.prototype._updateZoomButtons=function(){var E=this._map.getZoom(),I=E===this._map.getMaxZoom(),C=E===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},as.prototype._rotateCompassArrow=function(){var E=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=E},as.prototype.onAdd=function(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gu(this._map,this._compass,this.options.visualizePitch)),this._container},as.prototype.onRemove=function(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},as.prototype._createButton=function(E,I){var C=F.create("button",E,this._container);return C.type="button",C.addEventListener("click",I),C},as.prototype._setButtonTitle=function(E,I){var C=this._map._getUIString("NavigationControl."+I);E.title=C,E.setAttribute("aria-label",C)};var gu=function(E,I,C){C===void 0&&(C=!1),this._clickTolerance=10,this.element=I,this.mouseRotate=new ws({clickTolerance:E.dragRotate._mouseRotate._clickTolerance}),this.map=E,C&&(this.mousePitch=new lf({clickTolerance:E.dragRotate._mousePitch._clickTolerance})),y.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),F.addEventListener(I,"mousedown",this.mousedown),F.addEventListener(I,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(I,"touchmove",this.touchmove),F.addEventListener(I,"touchend",this.touchend),F.addEventListener(I,"touchcancel",this.reset)};function pc(E,I,C){if(E=new y.LngLat(E.lng,E.lat),I){var Z=new y.LngLat(E.lng-360,E.lat),ut=new y.LngLat(E.lng+360,E.lat),St=C.locationPoint(E).distSqr(I);C.locationPoint(Z).distSqr(I)<St?E=Z:C.locationPoint(ut).distSqr(I)<St&&(E=ut)}for(;Math.abs(E.lng-C.center.lng)>180;){var At=C.locationPoint(E);if(At.x>=0&&At.y>=0&&At.x<=C.width&&At.y<=C.height)break;E.lng>C.center.lng?E.lng-=360:E.lng+=360}return E}gu.prototype.down=function(E,I){this.mouseRotate.mousedown(E,I),this.mousePitch&&this.mousePitch.mousedown(E,I),F.disableDrag()},gu.prototype.move=function(E,I){var C=this.map,Z=this.mouseRotate.mousemoveWindow(E,I);if(Z&&Z.bearingDelta&&C.setBearing(C.getBearing()+Z.bearingDelta),this.mousePitch){var ut=this.mousePitch.mousemoveWindow(E,I);ut&&ut.pitchDelta&&C.setPitch(C.getPitch()+ut.pitchDelta)}},gu.prototype.off=function(){var E=this.element;F.removeEventListener(E,"mousedown",this.mousedown),F.removeEventListener(E,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(E,"touchmove",this.touchmove),F.removeEventListener(E,"touchend",this.touchend),F.removeEventListener(E,"touchcancel",this.reset),this.offTemp()},gu.prototype.offTemp=function(){F.enableDrag(),F.removeEventListener(y.window,"mousemove",this.mousemove),F.removeEventListener(y.window,"mouseup",this.mouseup)},gu.prototype.mousedown=function(E){this.down(y.extend({},E,{ctrlKey:!0,preventDefault:function(){return E.preventDefault()}}),F.mousePos(this.element,E)),F.addEventListener(y.window,"mousemove",this.mousemove),F.addEventListener(y.window,"mouseup",this.mouseup)},gu.prototype.mousemove=function(E){this.move(E,F.mousePos(this.element,E))},gu.prototype.mouseup=function(E){this.mouseRotate.mouseupWindow(E),this.mousePitch&&this.mousePitch.mouseupWindow(E),this.offTemp()},gu.prototype.touchstart=function(E){E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,E.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return E.preventDefault()}},this._startPos))},gu.prototype.touchmove=function(E){E.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,E.targetTouches)[0],this.move({preventDefault:function(){return E.preventDefault()}},this._lastPos))},gu.prototype.touchend=function(E){E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},gu.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var dc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Th(E,I,C){var Z=E.classList;for(var ut in dc)Z.remove("mapboxgl-"+C+"-anchor-"+ut);Z.add("mapboxgl-"+C+"-anchor-"+I)}var Af,Ph=function(E){function I(C,Z){if(E.call(this),(C instanceof y.window.HTMLElement||Z)&&(C=y.extend({element:C},Z)),y.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=C&&C.anchor||"center",this._color=C&&C.color||"#3FB1CE",this._scale=C&&C.scale||1,this._draggable=C&&C.draggable||!1,this._clickTolerance=C&&C.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=C&&C.rotation||0,this._rotationAlignment=C&&C.rotationAlignment||"auto",this._pitchAlignment=C&&C.pitchAlignment&&C.pitchAlignment!=="auto"?C.pitchAlignment:this._rotationAlignment,C&&C.element)this._element=C.element,this._offset=y.Point.convert(C&&C.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div"),this._element.setAttribute("aria-label","Map marker");var ut=F.createNS("http://www.w3.org/2000/svg","svg");ut.setAttributeNS(null,"display","block"),ut.setAttributeNS(null,"height","41px"),ut.setAttributeNS(null,"width","27px"),ut.setAttributeNS(null,"viewBox","0 0 27 41");var St=F.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"stroke","none"),St.setAttributeNS(null,"stroke-width","1"),St.setAttributeNS(null,"fill","none"),St.setAttributeNS(null,"fill-rule","evenodd");var At=F.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"fill-rule","nonzero");var te=F.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(3.0, 29.0)"),te.setAttributeNS(null,"fill","#000000");for(var we=0,Oe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];we<Oe.length;we+=1){var Ke=Oe[we],nr=F.createNS("http://www.w3.org/2000/svg","ellipse");nr.setAttributeNS(null,"opacity","0.04"),nr.setAttributeNS(null,"cx","10.5"),nr.setAttributeNS(null,"cy","5.80029008"),nr.setAttributeNS(null,"rx",Ke.rx),nr.setAttributeNS(null,"ry",Ke.ry),te.appendChild(nr)}var $e=F.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"fill",this._color);var pr=F.createNS("http://www.w3.org/2000/svg","path");pr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$e.appendChild(pr);var Sr=F.createNS("http://www.w3.org/2000/svg","g");Sr.setAttributeNS(null,"opacity","0.25"),Sr.setAttributeNS(null,"fill","#000000");var zr=F.createNS("http://www.w3.org/2000/svg","path");zr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Sr.appendChild(zr);var dr=F.createNS("http://www.w3.org/2000/svg","g");dr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),dr.setAttributeNS(null,"fill","#FFFFFF");var Ur=F.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"transform","translate(8.0, 8.0)");var en=F.createNS("http://www.w3.org/2000/svg","circle");en.setAttributeNS(null,"fill","#000000"),en.setAttributeNS(null,"opacity","0.25"),en.setAttributeNS(null,"cx","5.5"),en.setAttributeNS(null,"cy","5.5"),en.setAttributeNS(null,"r","5.4999962");var Sn=F.createNS("http://www.w3.org/2000/svg","circle");Sn.setAttributeNS(null,"fill","#FFFFFF"),Sn.setAttributeNS(null,"cx","5.5"),Sn.setAttributeNS(null,"cy","5.5"),Sn.setAttributeNS(null,"r","5.4999962"),Ur.appendChild(en),Ur.appendChild(Sn),At.appendChild(te),At.appendChild($e),At.appendChild(Sr),At.appendChild(dr),At.appendChild(Ur),ut.appendChild(At),ut.setAttributeNS(null,"height",41*this._scale+"px"),ut.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(ut),this._offset=y.Point.convert(C&&C.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Zn){Zn.preventDefault()}),this._element.addEventListener("mousedown",function(Zn){Zn.preventDefault()}),Th(this._element,this._anchor,"marker"),this._popup=null}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.addTo=function(C){return this.remove(),this._map=C,C.getCanvasContainer().appendChild(this._element),C.on("move",this._update),C.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(C){return this._lngLat=y.LngLat.convert(C),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(C){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),C){if(!("offset"in C.options)){var Z=Math.sqrt(Math.pow(13.5,2)/2);C.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Z,-1*(24.6+Z)],"bottom-right":[-Z,-1*(24.6+Z)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=C,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(C){var Z=C.code,ut=C.charCode||C.keyCode;Z!=="Space"&&Z!=="Enter"&&ut!==32&&ut!==13||this.togglePopup()},I.prototype._onMapClick=function(C){var Z=C.originalEvent.target,ut=this._element;this._popup&&(Z===ut||ut.contains(Z))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var C=this._popup;return C?(C.isOpen()?C.remove():C.addTo(this._map),this):this},I.prototype._update=function(C){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=pc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Z="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?Z="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(Z="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ut="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?ut="rotateX(0deg)":this._pitchAlignment==="map"&&(ut="rotateX("+this._map.getPitch()+"deg)"),C&&C.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,dc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ut+" "+Z)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(C){return this._offset=y.Point.convert(C),this._update(),this},I.prototype._onMove=function(C){if(!this._isDragging){var Z=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=Z}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new y.Event("dragstart"))),this.fire(new y.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new y.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(C){this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(C){return this._draggable=!!C,this._map&&(C?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(C){return this._rotation=C||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(C){return this._rotationAlignment=C||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(C){return this._pitchAlignment=C&&C!=="auto"?C:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(y.Evented),ju={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ap=0,Qf=!1,Rp=function(E){function I(C){E.call(this),this.options=y.extend({},ju,C),y.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.onAdd=function(C){var Z;return this._map=C,this._container=F.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Z=this._setupUI,Af!==void 0?Z(Af):y.window.navigator.permissions!==void 0?y.window.navigator.permissions.query({name:"geolocation"}).then(function(ut){Z(Af=ut.state!=="denied")}):Z(Af=!!y.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(y.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ap=0,Qf=!1},I.prototype._isOutOfMapMaxBounds=function(C){var Z=this._map.getMaxBounds(),ut=C.coords;return Z&&(ut.longitude<Z.getWest()||ut.longitude>Z.getEast()||ut.latitude<Z.getSouth()||ut.latitude>Z.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new y.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new y.Event("geolocate",C)),this._finish()}},I.prototype._updateCamera=function(C){var Z=new y.LngLat(C.coords.longitude,C.coords.latitude),ut=C.coords.accuracy,St=this._map.getBearing(),At=y.extend({bearing:St},this.options.fitBoundsOptions);this._map.fitBounds(Z.toBounds(ut),At,{geolocateSource:!0})},I.prototype._updateMarker=function(C){if(C){var Z=new y.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(Z).addTo(this._map),this._userLocationDotMarker.setLngLat(Z).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var C=this._map._container.clientHeight/2,Z=this._map.unproject([0,C]),ut=this._map.unproject([1,C]),St=Z.distanceTo(ut),At=Math.ceil(2*this._accuracy/St);this._circleElement.style.width=At+"px",this._circleElement.style.height=At+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&Qf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new y.Event("error",C)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(C){var Z=this;if(this._container.addEventListener("contextmenu",function(At){return At.preventDefault()}),this._geolocateButton=F.create("button","mapboxgl-ctrl-geolocate",this._container),F.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",C===!1){y.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ut=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ut,this._geolocateButton.setAttribute("aria-label",ut)}else{var St=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=St,this._geolocateButton.setAttribute("aria-label",St)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ph(this._dotElement),this._circleElement=F.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ph({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(At){At.geolocateSource||Z._watchState!=="ACTIVE_LOCK"||At.originalEvent&&At.originalEvent.type==="resize"||(Z._watchState="BACKGROUND",Z._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Z._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Z.fire(new y.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return y.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new y.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ap--,Qf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new y.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new y.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ap>1?(C={maximumAge:6e5,timeout:0},Qf=!0):(C=this.options.positionOptions,Qf=!1),this._geolocationWatchID=y.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else y.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){y.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(y.Evented),qf={maxWidth:100,unit:"metric"},Jf=function(E){this.options=y.extend({},qf,E),y.bindAll(["_onMove","setUnit"],this)};function op(E,I,C){var Z=C&&C.maxWidth||100,ut=E._container.clientHeight/2,St=E.unproject([0,ut]),At=E.unproject([Z,ut]),te=St.distanceTo(At);if(C&&C.unit==="imperial"){var we=3.2808*te;we>5280?pf(I,Z,we/5280,E._getUIString("ScaleControl.Miles")):pf(I,Z,we,E._getUIString("ScaleControl.Feet"))}else C&&C.unit==="nautical"?pf(I,Z,te/1852,E._getUIString("ScaleControl.NauticalMiles")):te>=1e3?pf(I,Z,te/1e3,E._getUIString("ScaleControl.Kilometers")):pf(I,Z,te,E._getUIString("ScaleControl.Meters"))}function pf(E,I,C,Z){var ut,St,At,te=(ut=C,(St=Math.pow(10,(""+Math.floor(ut)).length-1))*(At=(At=ut/St)>=10?10:At>=5?5:At>=3?3:At>=2?2:At>=1?1:function(we){var Oe=Math.pow(10,Math.ceil(-Math.log(we)/Math.LN10));return Math.round(we*Oe)/Oe}(At)));E.style.width=I*(te/C)+"px",E.innerHTML=te+"&nbsp;"+Z}Jf.prototype.getDefaultPosition=function(){return"bottom-left"},Jf.prototype._onMove=function(){op(this._map,this._container,this.options)},Jf.prototype.onAdd=function(E){return this._map=E,this._container=F.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Jf.prototype.onRemove=function(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Jf.prototype.setUnit=function(E){this.options.unit=E,op(this._map,this._container,this.options)};var Cc=function(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof y.window.HTMLElement?this._container=E.container:y.warnOnce("Full screen control 'container' must be a DOM element.")),y.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in y.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in y.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in y.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in y.window.document&&(this._fullscreenchange="MSFullscreenChange")};Cc.prototype.onAdd=function(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",y.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Cc.prototype.onRemove=function(){F.remove(this._controlContainer),this._map=null,y.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Cc.prototype._checkFullscreenSupport=function(){return!!(y.window.document.fullscreenEnabled||y.window.document.mozFullScreenEnabled||y.window.document.msFullscreenEnabled||y.window.document.webkitFullscreenEnabled)},Cc.prototype._setupUI=function(){var E=this._fullscreenButton=F.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F.create("span","mapboxgl-ctrl-icon",E).setAttribute("aria-hidden",!0),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),y.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Cc.prototype._updateTitle=function(){var E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E},Cc.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Cc.prototype._isFullscreen=function(){return this._fullscreen},Cc.prototype._changeIcon=function(){(y.window.document.fullscreenElement||y.window.document.mozFullScreenElement||y.window.document.webkitFullscreenElement||y.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Cc.prototype._onClickFullscreen=function(){this._isFullscreen()?y.window.document.exitFullscreen?y.window.document.exitFullscreen():y.window.document.mozCancelFullScreen?y.window.document.mozCancelFullScreen():y.window.document.msExitFullscreen?y.window.document.msExitFullscreen():y.window.document.webkitCancelFullScreen&&y.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var th={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ih=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),id=function(E){function I(C){E.call(this),this.options=y.extend(Object.create(th),C),y.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return E&&(I.__proto__=E),(I.prototype=Object.create(E&&E.prototype)).constructor=I,I.prototype.addTo=function(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new y.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new y.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(C){return this._lngLat=y.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(C){return this.setDOMContent(y.window.document.createTextNode(C))},I.prototype.setHTML=function(C){var Z,ut=y.window.document.createDocumentFragment(),St=y.window.document.createElement("body");for(St.innerHTML=C;Z=St.firstChild;)ut.appendChild(Z);return this.setDOMContent(ut)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(C){return this.options.maxWidth=C,this._update(),this},I.prototype.setDOMContent=function(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(C){this._container&&this._container.classList.add(C)},I.prototype.removeClassName=function(C){this._container&&this._container.classList.remove(C)},I.prototype.setOffset=function(C){return this.options.offset=C,this._update(),this},I.prototype.toggleClassName=function(C){if(this._container)return this._container.classList.toggle(C)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=F.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(C){this._update(C.point)},I.prototype._onMouseMove=function(C){this._update(C.point)},I.prototype._onDrag=function(C){this._update(C.point)},I.prototype._update=function(C){var Z=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=F.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=F.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(nr){return Z._container.classList.add(nr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pc(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||C)){var ut=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat),St=this.options.anchor,At=function nr($e){if($e){if(typeof $e=="number"){var pr=Math.round(Math.sqrt(.5*Math.pow($e,2)));return{center:new y.Point(0,0),top:new y.Point(0,$e),"top-left":new y.Point(pr,pr),"top-right":new y.Point(-pr,pr),bottom:new y.Point(0,-$e),"bottom-left":new y.Point(pr,-pr),"bottom-right":new y.Point(-pr,-pr),left:new y.Point($e,0),right:new y.Point(-$e,0)}}if($e instanceof y.Point||Array.isArray($e)){var Sr=y.Point.convert($e);return{center:Sr,top:Sr,"top-left":Sr,"top-right":Sr,bottom:Sr,"bottom-left":Sr,"bottom-right":Sr,left:Sr,right:Sr}}return{center:y.Point.convert($e.center||[0,0]),top:y.Point.convert($e.top||[0,0]),"top-left":y.Point.convert($e["top-left"]||[0,0]),"top-right":y.Point.convert($e["top-right"]||[0,0]),bottom:y.Point.convert($e.bottom||[0,0]),"bottom-left":y.Point.convert($e["bottom-left"]||[0,0]),"bottom-right":y.Point.convert($e["bottom-right"]||[0,0]),left:y.Point.convert($e.left||[0,0]),right:y.Point.convert($e.right||[0,0])}}return nr(new y.Point(0,0))}(this.options.offset);if(!St){var te,we=this._container.offsetWidth,Oe=this._container.offsetHeight;te=ut.y+At.bottom.y<Oe?["top"]:ut.y>this._map.transform.height-Oe?["bottom"]:[],ut.x<we/2?te.push("left"):ut.x>this._map.transform.width-we/2&&te.push("right"),St=te.length===0?"bottom":te.join("-")}var Ke=ut.add(At[St]).round();F.setTransform(this._container,dc[St]+" translate("+Ke.x+"px,"+Ke.y+"px)"),Th(this._container,St,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var C=this._container.querySelector(Ih);C&&C.focus()}},I.prototype._onClose=function(){this.remove()},I}(y.Evented),Oh={version:y.version,supported:U,setRTLTextPlugin:y.setRTLTextPlugin,getRTLTextPluginStatus:y.getRTLTextPluginStatus,Map:Cv,NavigationControl:as,GeolocateControl:Rp,AttributionControl:Zo,ScaleControl:Jf,FullscreenControl:Cc,Popup:id,Marker:Ph,Style:ou,LngLat:y.LngLat,LngLatBounds:y.LngLatBounds,Point:y.Point,MercatorCoordinate:y.MercatorCoordinate,Evented:y.Evented,config:y.config,prewarm:function(){Jr().acquire(tn)},clearPrewarmedResources:function(){var E=$n;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(tn),$n=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return y.config.ACCESS_TOKEN},set accessToken(E){y.config.ACCESS_TOKEN=E},get baseApiUrl(){return y.config.API_URL},set baseApiUrl(E){y.config.API_URL=E},get workerCount(){return _n.workerCount},set workerCount(E){_n.workerCount=E},get maxParallelImageRequests(){return y.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){y.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage:function(E){y.clearTileCache(E)},workerUrl:""};return Oh}),T})},92077:function(Vt,P,S){var T,j;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(y,U){T=U,j=typeof T=="function"?T.call(P,S,P,Vt):T,j!==void 0&&(Vt.exports=j)})(this,function(){var y,U,F="2.0.6",B={},R={},N={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},A={currentLocale:N.currentLocale,zeroFormat:N.zeroFormat,nullFormat:N.nullFormat,defaultFormat:N.defaultFormat,scalePercentBy100:N.scalePercentBy100};function D(M,O){this._input=M,this._value=O}return y=function(M){var O,k,V,X;if(y.isNumeral(M))O=M.value();else if(M===0||typeof M=="undefined")O=0;else if(M===null||U.isNaN(M))O=null;else if(typeof M=="string")if(A.zeroFormat&&M===A.zeroFormat)O=0;else if(A.nullFormat&&M===A.nullFormat||!M.replace(/[^0-9]+/g,"").length)O=null;else{for(k in B)if(X=typeof B[k].regexps.unformat=="function"?B[k].regexps.unformat():B[k].regexps.unformat,X&&M.match(X)){V=B[k].unformat;break}V=V||y._.stringToNumber,O=V(M)}else O=Number(M)||null;return new D(M,O)},y.version=F,y.isNumeral=function(M){return M instanceof D},y._=U={numberToFormat:function(M,O,k){var V=R[y.options.currentLocale],X=!1,K=!1,q=0,ct="",_t=1e12,yt=1e9,lt=1e6,Lt=1e3,wt="",Gt=!1,re,Qt,it,dt,gt,vt,Y,ot,nt,rt;if(M=M||0,Qt=Math.abs(M),y._.includes(O,"(")?(X=!0,O=O.replace(/[\(|\)]/g,"")):(y._.includes(O,"+")||y._.includes(O,"-"))&&(ot=y._.includes(O,"+")?O.indexOf("+"):M<0?O.indexOf("-"):-1,O=O.replace(/[\+|\-]/g,"")),y._.includes(O,"a")&&(re=O.match(/a(k|m|b|t)?/),re=re?re[1]:!1,y._.includes(O," a")&&(ct=" "),O=O.replace(new RegExp(ct+"a[kmbt]?"),""),Qt>=_t&&!re||re==="t"?(ct+=V.abbreviations.trillion,M=M/_t):Qt<_t&&Qt>=yt&&!re||re==="b"?(ct+=V.abbreviations.billion,M=M/yt):Qt<yt&&Qt>=lt&&!re||re==="m"?(ct+=V.abbreviations.million,M=M/lt):(Qt<lt&&Qt>=Lt&&!re||re==="k")&&(ct+=V.abbreviations.thousand,M=M/Lt)),y._.includes(O,"[.]")&&(K=!0,O=O.replace("[.]",".")),vt=M.toString().split(".")[0],Y=O.split(".")[1],nt=O.indexOf(","),q=(O.split(".")[0].split(",")[0].match(/0/g)||[]).length,Y?(y._.includes(Y,"[")?(Y=Y.replace("]",""),Y=Y.split("["),wt=y._.toFixed(M,Y[0].length+Y[1].length,k,Y[1].length)):wt=y._.toFixed(M,Y.length,k),vt=wt.split(".")[0],y._.includes(wt,".")?wt=V.delimiters.decimal+wt.split(".")[1]:wt="",K&&Number(wt.slice(1))===0&&(wt="")):vt=y._.toFixed(M,0,k),ct&&!re&&Number(vt)>=1e3&&ct!==V.abbreviations.trillion)switch(vt=String(Number(vt)/1e3),ct){case V.abbreviations.thousand:ct=V.abbreviations.million;break;case V.abbreviations.million:ct=V.abbreviations.billion;break;case V.abbreviations.billion:ct=V.abbreviations.trillion;break}if(y._.includes(vt,"-")&&(vt=vt.slice(1),Gt=!0),vt.length<q)for(var st=q-vt.length;st>0;st--)vt="0"+vt;return nt>-1&&(vt=vt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+V.delimiters.thousands)),O.indexOf(".")===0&&(vt=""),rt=vt+wt+(ct||""),X?rt=(X&&Gt?"(":"")+rt+(X&&Gt?")":""):ot>=0?rt=ot===0?(Gt?"-":"+")+rt:rt+(Gt?"-":"+"):Gt&&(rt="-"+rt),rt},stringToNumber:function(M){var O=R[A.currentLocale],k=M,V={thousand:3,million:6,billion:9,trillion:12},X,K,q,ct;if(A.zeroFormat&&M===A.zeroFormat)K=0;else if(A.nullFormat&&M===A.nullFormat||!M.replace(/[^0-9]+/g,"").length)K=null;else{K=1,O.delimiters.decimal!=="."&&(M=M.replace(/\./g,"").replace(O.delimiters.decimal,"."));for(X in V)if(ct=new RegExp("[^a-zA-Z]"+O.abbreviations[X]+"(?:\\)|(\\"+O.currency.symbol+")?(?:\\))?)?$"),k.match(ct)){K*=Math.pow(10,V[X]);break}K*=(M.split("-").length+Math.min(M.split("(").length-1,M.split(")").length-1))%2?1:-1,M=M.replace(/[^0-9\.]+/g,""),K*=Number(M)}return K},isNaN:function(M){return typeof M=="number"&&isNaN(M)},includes:function(M,O){return M.indexOf(O)!==-1},insert:function(M,O,k){return M.slice(0,k)+O+M.slice(k)},reduce:function(M,O){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof O!="function")throw new TypeError(O+" is not a function");var k=Object(M),V=k.length>>>0,X=0,K;if(arguments.length===3)K=arguments[2];else{for(;X<V&&!(X in k);)X++;if(X>=V)throw new TypeError("Reduce of empty array with no initial value");K=k[X++]}for(;X<V;X++)X in k&&(K=O(K,k[X],X,k));return K},multiplier:function(M){var O=M.toString().split(".");return O.length<2?1:Math.pow(10,O[1].length)},correctionFactor:function(){var M=Array.prototype.slice.call(arguments);return M.reduce(function(O,k){var V=U.multiplier(k);return O>V?O:V},1)},toFixed:function(M,O,k,V){var X=M.toString().split("."),K=O-(V||0),q,ct,_t,yt;return X.length===2?q=Math.min(Math.max(X[1].length,K),O):q=K,_t=Math.pow(10,q),yt=(k(M+"e+"+q)/_t).toFixed(q),V>O-q&&(ct=new RegExp("\\.?0{1,"+(V-(O-q))+"}$"),yt=yt.replace(ct,"")),yt}},y.options=A,y.formats=B,y.locales=R,y.locale=function(M){return M&&(A.currentLocale=M.toLowerCase()),A.currentLocale},y.localeData=function(M){if(!M)return R[A.currentLocale];if(M=M.toLowerCase(),!R[M])throw new Error("Unknown locale : "+M);return R[M]},y.reset=function(){for(var M in N)A[M]=N[M]},y.zeroFormat=function(M){A.zeroFormat=typeof M=="string"?M:null},y.nullFormat=function(M){A.nullFormat=typeof M=="string"?M:null},y.defaultFormat=function(M){A.defaultFormat=typeof M=="string"?M:"0.0"},y.register=function(M,O,k){if(O=O.toLowerCase(),this[M+"s"][O])throw new TypeError(O+" "+M+" already registered.");return this[M+"s"][O]=k,k},y.validate=function(M,O){var k,V,X,K,q,ct,_t,yt;if(typeof M!="string"&&(M+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",M)),M=M.trim(),M.match(/^\d+$/))return!0;if(M==="")return!1;try{_t=y.localeData(O)}catch(lt){_t=y.localeData(y.locale())}return X=_t.currency.symbol,q=_t.abbreviations,k=_t.delimiters.decimal,_t.delimiters.thousands==="."?V="\\.":V=_t.delimiters.thousands,yt=M.match(/^[^\d]+/),yt!==null&&(M=M.substr(1),yt[0]!==X)||(yt=M.match(/[^\d]+$/),yt!==null&&(M=M.slice(0,-1),yt[0]!==q.thousand&&yt[0]!==q.million&&yt[0]!==q.billion&&yt[0]!==q.trillion))?!1:(ct=new RegExp(V+"{2}"),M.match(/[^\d.,]/g)?!1:(K=M.split(k),K.length>2?!1:K.length<2?!!K[0].match(/^\d+.*\d$/)&&!K[0].match(ct):K[0].length===1?!!K[0].match(/^\d+$/)&&!K[0].match(ct)&&!!K[1].match(/^\d+$/):!!K[0].match(/^\d+.*\d$/)&&!K[0].match(ct)&&!!K[1].match(/^\d+$/)))},y.fn=D.prototype={clone:function(){return y(this)},format:function(M,O){var k=this._value,V=M||A.defaultFormat,X,K,q;if(O=O||Math.round,k===0&&A.zeroFormat!==null)K=A.zeroFormat;else if(k===null&&A.nullFormat!==null)K=A.nullFormat;else{for(X in B)if(V.match(B[X].regexps.format)){q=B[X].format;break}q=q||y._.numberToFormat,K=q(k,V,O)}return K},value:function(){return this._value},input:function(){return this._input},set:function(M){return this._value=Number(M),this},add:function(M){var O=U.correctionFactor.call(null,this._value,M);function k(V,X,K,q){return V+Math.round(O*X)}return this._value=U.reduce([this._value,M],k,0)/O,this},subtract:function(M){var O=U.correctionFactor.call(null,this._value,M);function k(V,X,K,q){return V-Math.round(O*X)}return this._value=U.reduce([M],k,Math.round(this._value*O))/O,this},multiply:function(M){function O(k,V,X,K){var q=U.correctionFactor(k,V);return Math.round(k*q)*Math.round(V*q)/Math.round(q*q)}return this._value=U.reduce([this._value,M],O,1),this},divide:function(M){function O(k,V,X,K){var q=U.correctionFactor(k,V);return Math.round(k*q)/Math.round(V*q)}return this._value=U.reduce([this._value,M],O),this},difference:function(M){return Math.abs(y(this._value).subtract(M).value())}},y.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(M){var O=M%10;return~~(M%100/10)==1?"th":O===1?"st":O===2?"nd":O===3?"rd":"th"},currency:{symbol:"$"}}),function(){y.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(M,O,k){var V=y._.includes(O," BPS")?" ":"",X;return M=M*1e4,O=O.replace(/\s?BPS/,""),X=y._.numberToFormat(M,O,k),y._.includes(X,")")?(X=X.split(""),X.splice(-1,0,V+"BPS"),X=X.join("")):X=X+V+"BPS",X},unformat:function(M){return+(y._.stringToNumber(M)*1e-4).toFixed(15)}})}(),function(){var M={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},O={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},k=M.suffixes.concat(O.suffixes.filter(function(X){return M.suffixes.indexOf(X)<0})),V=k.join("|");V="("+V.replace("B","B(?!PS)")+")",y.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(V)},format:function(X,K,q){var ct,_t=y._.includes(K,"ib")?O:M,yt=y._.includes(K," b")||y._.includes(K," ib")?" ":"",lt,Lt,wt;for(K=K.replace(/\s?i?b/,""),lt=0;lt<=_t.suffixes.length;lt++)if(Lt=Math.pow(_t.base,lt),wt=Math.pow(_t.base,lt+1),X===null||X===0||X>=Lt&&X<wt){yt+=_t.suffixes[lt],Lt>0&&(X=X/Lt);break}return ct=y._.numberToFormat(X,K,q),ct+yt},unformat:function(X){var K=y._.stringToNumber(X),q,ct;if(K){for(q=M.suffixes.length-1;q>=0;q--){if(y._.includes(X,M.suffixes[q])){ct=Math.pow(M.base,q);break}if(y._.includes(X,O.suffixes[q])){ct=Math.pow(O.base,q);break}}K*=ct||1}return K}})}(),function(){y.register("format","currency",{regexps:{format:/(\$)/},format:function(M,O,k){var V=y.locales[y.options.currentLocale],X={before:O.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:O.match(/([\+|\-|\)|\s|\$]*)$/)[0]},K,q,ct;for(O=O.replace(/\s?\$\s?/,""),K=y._.numberToFormat(M,O,k),M>=0?(X.before=X.before.replace(/[\-\(]/,""),X.after=X.after.replace(/[\-\)]/,"")):M<0&&!y._.includes(X.before,"-")&&!y._.includes(X.before,"(")&&(X.before="-"+X.before),ct=0;ct<X.before.length;ct++)switch(q=X.before[ct],q){case"$":K=y._.insert(K,V.currency.symbol,ct);break;case" ":K=y._.insert(K," ",ct+V.currency.symbol.length-1);break}for(ct=X.after.length-1;ct>=0;ct--)switch(q=X.after[ct],q){case"$":K=ct===X.after.length-1?K+V.currency.symbol:y._.insert(K,V.currency.symbol,-(X.after.length-(1+ct)));break;case" ":K=ct===X.after.length-1?K+" ":y._.insert(K," ",-(X.after.length-(1+ct)+V.currency.symbol.length-1));break}return K}})}(),function(){y.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(M,O,k){var V,X=typeof M=="number"&&!y._.isNaN(M)?M.toExponential():"0e+0",K=X.split("e");return O=O.replace(/e[\+|\-]{1}0/,""),V=y._.numberToFormat(Number(K[0]),O,k),V+"e"+K[1]},unformat:function(M){var O=y._.includes(M,"e+")?M.split("e+"):M.split("e-"),k=Number(O[0]),V=Number(O[1]);V=y._.includes(M,"e-")?V*=-1:V;function X(K,q,ct,_t){var yt=y._.correctionFactor(K,q),lt=K*yt*(q*yt)/(yt*yt);return lt}return y._.reduce([k,Math.pow(10,V)],X,1)}})}(),function(){y.register("format","ordinal",{regexps:{format:/(o)/},format:function(M,O,k){var V=y.locales[y.options.currentLocale],X,K=y._.includes(O," o")?" ":"";return O=O.replace(/\s?o/,""),K+=V.ordinal(M),X=y._.numberToFormat(M,O,k),X+K}})}(),function(){y.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(M,O,k){var V=y._.includes(O," %")?" ":"",X;return y.options.scalePercentBy100&&(M=M*100),O=O.replace(/\s?\%/,""),X=y._.numberToFormat(M,O,k),y._.includes(X,")")?(X=X.split(""),X.splice(-1,0,V+"%"),X=X.join("")):X=X+V+"%",X},unformat:function(M){var O=y._.stringToNumber(M);return y.options.scalePercentBy100?O*.01:O}})}(),function(){y.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(M,O,k){var V=Math.floor(M/60/60),X=Math.floor((M-V*60*60)/60),K=Math.round(M-V*60*60-X*60);return V+":"+(X<10?"0"+X:X)+":"+(K<10?"0"+K:K)},unformat:function(M){var O=M.split(":"),k=0;return O.length===3?(k=k+Number(O[0])*60*60,k=k+Number(O[1])*60,k=k+Number(O[2])):O.length===2&&(k=k+Number(O[0])*60,k=k+Number(O[1])),Number(k)}})}(),y})},28660:function(Vt,P,S){var T=S(34155);/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var j;(function(y){(function(U){var F=typeof S.g=="object"?S.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),B=R(y);typeof F.Reflect=="undefined"?F.Reflect=y:B=R(F.Reflect,B),U(B);function R(N,A){return function(D,M){typeof N[D]!="function"&&Object.defineProperty(N,D,{configurable:!0,writable:!0,value:M}),A&&A(D,M)}}})(function(U){var F=Object.prototype.hasOwnProperty,B=typeof Symbol=="function",R=B&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",N=B&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",A=typeof Object.create=="function",D={__proto__:[]}instanceof Array,M=!A&&!D,O={create:A?function(){return la(Object.create(null))}:D?function(){return la({__proto__:null})}:function(){return la({})},has:M?function(Or,ln){return F.call(Or,ln)}:function(Or,ln){return ln in Or},get:M?function(Or,ln){return F.call(Or,ln)?Or[ln]:void 0}:function(Or,ln){return Or[ln]}},k=Object.getPrototypeOf(Function),V=typeof T=="object"&&{NODE_ENV:"production"}&&{NODE_ENV:"production"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",X=!V&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ee(),K=!V&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:yn(),q=!V&&typeof WeakMap=="function"?WeakMap:ui(),ct=new q;function _t(Or,ln,Kn,jn){if(Xt(Kn)){if(!Yt(Or))throw new TypeError;if(!Nt(ln))throw new TypeError;return gt(Or,ln)}else{if(!Yt(Or))throw new TypeError;if(!ue(ln))throw new TypeError;if(!ue(jn)&&!Xt(jn)&&!Kt(jn))throw new TypeError;return Kt(jn)&&(jn=void 0),Kn=Pt(Kn),vt(Or,ln,Kn,jn)}}U("decorate",_t);function yt(Or,ln){function Kn(jn,wi){if(!ue(jn))throw new TypeError;if(!Xt(wi)&&!ne(wi))throw new TypeError;d(Or,ln,jn,wi)}return Kn}U("metadata",yt);function lt(Or,ln,Kn,jn){if(!ue(Kn))throw new TypeError;return Xt(jn)||(jn=Pt(jn)),d(Or,ln,Kn,jn)}U("defineMetadata",lt);function Lt(Or,ln,Kn){if(!ue(ln))throw new TypeError;return Xt(Kn)||(Kn=Pt(Kn)),ot(Or,ln,Kn)}U("hasMetadata",Lt);function wt(Or,ln,Kn){if(!ue(ln))throw new TypeError;return Xt(Kn)||(Kn=Pt(Kn)),nt(Or,ln,Kn)}U("hasOwnMetadata",wt);function Gt(Or,ln,Kn){if(!ue(ln))throw new TypeError;return Xt(Kn)||(Kn=Pt(Kn)),rt(Or,ln,Kn)}U("getMetadata",Gt);function re(Or,ln,Kn){if(!ue(ln))throw new TypeError;return Xt(Kn)||(Kn=Pt(Kn)),st(Or,ln,Kn)}U("getOwnMetadata",re);function Qt(Or,ln){if(!ue(Or))throw new TypeError;return Xt(ln)||(ln=Pt(ln)),It(Or,ln)}U("getMetadataKeys",Qt);function it(Or,ln){if(!ue(Or))throw new TypeError;return Xt(ln)||(ln=Pt(ln)),Ht(Or,ln)}U("getOwnMetadataKeys",it);function dt(Or,ln,Kn){if(!ue(ln))throw new TypeError;Xt(Kn)||(Kn=Pt(Kn));var jn=Y(ln,Kn,!1);if(Xt(jn)||!jn.delete(Or))return!1;if(jn.size>0)return!0;var wi=ct.get(ln);return wi.delete(Kn),wi.size>0||ct.delete(ln),!0}U("deleteMetadata",dt);function gt(Or,ln){for(var Kn=Or.length-1;Kn>=0;--Kn){var jn=Or[Kn],wi=jn(ln);if(!Xt(wi)&&!Kt(wi)){if(!Nt(wi))throw new TypeError;ln=wi}}return ln}function vt(Or,ln,Kn,jn){for(var wi=Or.length-1;wi>=0;--wi){var Sa=Or[wi],to=Sa(ln,Kn,jn);if(!Xt(to)&&!Kt(to)){if(!ue(to))throw new TypeError;jn=to}}return jn}function Y(Or,ln,Kn){var jn=ct.get(Or);if(Xt(jn)){if(!Kn)return;jn=new X,ct.set(Or,jn)}var wi=jn.get(ln);if(Xt(wi)){if(!Kn)return;wi=new X,jn.set(ln,wi)}return wi}function ot(Or,ln,Kn){var jn=nt(Or,ln,Kn);if(jn)return!0;var wi=Qr(ln);return Kt(wi)?!1:ot(Or,wi,Kn)}function nt(Or,ln,Kn){var jn=Y(ln,Kn,!1);return Xt(jn)?!1:Ut(jn.has(Or))}function rt(Or,ln,Kn){var jn=nt(Or,ln,Kn);if(jn)return st(Or,ln,Kn);var wi=Qr(ln);if(!Kt(wi))return rt(Or,wi,Kn)}function st(Or,ln,Kn){var jn=Y(ln,Kn,!1);if(!Xt(jn))return jn.get(Or)}function d(Or,ln,Kn,jn){var wi=Y(Kn,jn,!0);wi.set(Or,ln)}function It(Or,ln){var Kn=Ht(Or,ln),jn=Qr(Or);if(jn===null)return Kn;var wi=It(jn,ln);if(wi.length<=0)return Kn;if(Kn.length<=0)return wi;for(var Sa=new K,to=[],qa=0,Ui=Kn;qa<Ui.length;qa++){var Ue=Ui[qa],We=Sa.has(Ue);We||(Sa.add(Ue),to.push(Ue))}for(var fr=0,Ar=wi;fr<Ar.length;fr++){var Ue=Ar[fr],We=Sa.has(Ue);We||(Sa.add(Ue),to.push(Ue))}return to}function Ht(Or,ln){var Kn=[],jn=Y(Or,ln,!1);if(Xt(jn))return Kn;for(var wi=jn.keys(),Sa=Re(wi),to=0;;){var qa=Cr(Sa);if(!qa)return Kn.length=to,Kn;var Ui=je(qa);try{Kn[to]=Ui}catch(Ue){try{$r(Sa)}finally{throw Ue}}to++}}function kt(Or){if(Or===null)return 1;switch(typeof Or){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Or===null?1:6;default:return 6}}function Xt(Or){return Or===void 0}function Kt(Or){return Or===null}function Jt(Or){return typeof Or=="symbol"}function ue(Or){return typeof Or=="object"?Or!==null:typeof Or=="function"}function ce(Or,ln){switch(kt(Or)){case 0:return Or;case 1:return Or;case 2:return Or;case 3:return Or;case 4:return Or;case 5:return Or}var Kn=ln===3?"string":ln===5?"number":"default",jn=ve(Or,R);if(jn!==void 0){var wi=jn.call(Or,Kn);if(ue(wi))throw new TypeError;return wi}return $t(Or,Kn==="default"?"number":Kn)}function $t(Or,ln){if(ln==="string"){var Kn=Or.toString;if(Dt(Kn)){var jn=Kn.call(Or);if(!ue(jn))return jn}var wi=Or.valueOf;if(Dt(wi)){var jn=wi.call(Or);if(!ue(jn))return jn}}else{var wi=Or.valueOf;if(Dt(wi)){var jn=wi.call(Or);if(!ue(jn))return jn}var Sa=Or.toString;if(Dt(Sa)){var jn=Sa.call(Or);if(!ue(jn))return jn}}throw new TypeError}function Ut(Or){return!!Or}function Rt(Or){return""+Or}function Pt(Or){var ln=ce(Or,3);return Jt(ln)?ln:Rt(ln)}function Yt(Or){return Array.isArray?Array.isArray(Or):Or instanceof Object?Or instanceof Array:Object.prototype.toString.call(Or)==="[object Array]"}function Dt(Or){return typeof Or=="function"}function Nt(Or){return typeof Or=="function"}function ne(Or){switch(kt(Or)){case 3:return!0;case 4:return!0;default:return!1}}function ve(Or,ln){var Kn=Or[ln];if(Kn!=null){if(!Dt(Kn))throw new TypeError;return Kn}}function Re(Or){var ln=ve(Or,N);if(!Dt(ln))throw new TypeError;var Kn=ln.call(Or);if(!ue(Kn))throw new TypeError;return Kn}function je(Or){return Or.value}function Cr(Or){var ln=Or.next();return ln.done?!1:ln}function $r(Or){var ln=Or.return;ln&&ln.call(Or)}function Qr(Or){var ln=Object.getPrototypeOf(Or);if(typeof Or!="function"||Or===k||ln!==k)return ln;var Kn=Or.prototype,jn=Kn&&Object.getPrototypeOf(Kn);if(jn==null||jn===Object.prototype)return ln;var wi=jn.constructor;return typeof wi!="function"||wi===Or?ln:wi}function Ee(){var Or={},ln=[],Kn=function(){function to(qa,Ui,Ue){this._index=0,this._keys=qa,this._values=Ui,this._selector=Ue}return to.prototype["@@iterator"]=function(){return this},to.prototype[N]=function(){return this},to.prototype.next=function(){var qa=this._index;if(qa>=0&&qa<this._keys.length){var Ui=this._selector(this._keys[qa],this._values[qa]);return qa+1>=this._keys.length?(this._index=-1,this._keys=ln,this._values=ln):this._index++,{value:Ui,done:!1}}return{value:void 0,done:!0}},to.prototype.throw=function(qa){throw this._index>=0&&(this._index=-1,this._keys=ln,this._values=ln),qa},to.prototype.return=function(qa){return this._index>=0&&(this._index=-1,this._keys=ln,this._values=ln),{value:qa,done:!0}},to}();return function(){function to(){this._keys=[],this._values=[],this._cacheKey=Or,this._cacheIndex=-2}return Object.defineProperty(to.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),to.prototype.has=function(qa){return this._find(qa,!1)>=0},to.prototype.get=function(qa){var Ui=this._find(qa,!1);return Ui>=0?this._values[Ui]:void 0},to.prototype.set=function(qa,Ui){var Ue=this._find(qa,!0);return this._values[Ue]=Ui,this},to.prototype.delete=function(qa){var Ui=this._find(qa,!1);if(Ui>=0){for(var Ue=this._keys.length,We=Ui+1;We<Ue;We++)this._keys[We-1]=this._keys[We],this._values[We-1]=this._values[We];return this._keys.length--,this._values.length--,qa===this._cacheKey&&(this._cacheKey=Or,this._cacheIndex=-2),!0}return!1},to.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Or,this._cacheIndex=-2},to.prototype.keys=function(){return new Kn(this._keys,this._values,jn)},to.prototype.values=function(){return new Kn(this._keys,this._values,wi)},to.prototype.entries=function(){return new Kn(this._keys,this._values,Sa)},to.prototype["@@iterator"]=function(){return this.entries()},to.prototype[N]=function(){return this.entries()},to.prototype._find=function(qa,Ui){return this._cacheKey!==qa&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=qa)),this._cacheIndex<0&&Ui&&(this._cacheIndex=this._keys.length,this._keys.push(qa),this._values.push(void 0)),this._cacheIndex},to}();function jn(to,qa){return to}function wi(to,qa){return qa}function Sa(to,qa){return[to,qa]}}function yn(){return function(){function Or(){this._map=new X}return Object.defineProperty(Or.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Or.prototype.has=function(ln){return this._map.has(ln)},Or.prototype.add=function(ln){return this._map.set(ln,ln),this},Or.prototype.delete=function(ln){return this._map.delete(ln)},Or.prototype.clear=function(){this._map.clear()},Or.prototype.keys=function(){return this._map.keys()},Or.prototype.values=function(){return this._map.values()},Or.prototype.entries=function(){return this._map.entries()},Or.prototype["@@iterator"]=function(){return this.keys()},Or.prototype[N]=function(){return this.keys()},Or}()}function ui(){var Or=16,ln=O.create(),Kn=jn();return function(){function Ui(){this._key=jn()}return Ui.prototype.has=function(Ue){var We=wi(Ue,!1);return We!==void 0?O.has(We,this._key):!1},Ui.prototype.get=function(Ue){var We=wi(Ue,!1);return We!==void 0?O.get(We,this._key):void 0},Ui.prototype.set=function(Ue,We){var fr=wi(Ue,!0);return fr[this._key]=We,this},Ui.prototype.delete=function(Ue){var We=wi(Ue,!1);return We!==void 0?delete We[this._key]:!1},Ui.prototype.clear=function(){this._key=jn()},Ui}();function jn(){var Ui;do Ui="@@WeakMap@@"+qa();while(O.has(ln,Ui));return ln[Ui]=!0,Ui}function wi(Ui,Ue){if(!F.call(Ui,Kn)){if(!Ue)return;Object.defineProperty(Ui,Kn,{value:O.create()})}return Ui[Kn]}function Sa(Ui,Ue){for(var We=0;We<Ue;++We)Ui[We]=Math.random()*255|0;return Ui}function to(Ui){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ui)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ui)):Sa(new Uint8Array(Ui),Ui):Sa(new Array(Ui),Ui)}function qa(){var Ui=to(Or);Ui[6]=Ui[6]&79|64,Ui[8]=Ui[8]&191|128;for(var Ue="",We=0;We<Or;++We){var fr=Ui[We];(We===4||We===6||We===8)&&(Ue+="-"),fr<16&&(Ue+="0"),Ue+=fr.toString(16).toLowerCase()}return Ue}}function la(Or){return Or.__=void 0,delete Or.__,Or}})})(j||(j={}))},86851:function(Vt,P,S){"use strict";var T=S(89594),j=Array.prototype.concat,y=Array.prototype.slice,U=Vt.exports=function(B){for(var R=[],N=0,A=B.length;N<A;N++){var D=B[N];T(D)?R=j.call(R,y.call(D)):R.push(D)}return R};U.wrap=function(F){return function(){return F(U(arguments))}}},89594:function(Vt){Vt.exports=function(S){return!S||typeof S=="string"?!1:S instanceof Array||Array.isArray(S)||S.length>=0&&(S.splice instanceof Function||Object.getOwnPropertyDescriptor(S,S.length-1)&&S.constructor.name!=="String")}},69848:function(Vt){(function(P,S){Vt.exports=S()})(this,function(){"use strict";function P(wt,Gt,re,Qt,it,dt){if(!(it-Qt<=re)){var gt=Qt+it>>1;S(wt,Gt,gt,Qt,it,dt%2),P(wt,Gt,re,Qt,gt-1,dt+1),P(wt,Gt,re,gt+1,it,dt+1)}}function S(wt,Gt,re,Qt,it,dt){for(;it>Qt;){if(it-Qt>600){var gt=it-Qt+1,vt=re-Qt+1,Y=Math.log(gt),ot=.5*Math.exp(2*Y/3),nt=.5*Math.sqrt(Y*ot*(gt-ot)/gt)*(vt-gt/2<0?-1:1),rt=Math.max(Qt,Math.floor(re-vt*ot/gt+nt)),st=Math.min(it,Math.floor(re+(gt-vt)*ot/gt+nt));S(wt,Gt,re,rt,st,dt)}var d=Gt[2*re+dt],It=Qt,Ht=it;for(T(wt,Gt,Qt,re),Gt[2*it+dt]>d&&T(wt,Gt,Qt,it);It<Ht;){for(T(wt,Gt,It,Ht),It++,Ht--;Gt[2*It+dt]<d;)It++;for(;Gt[2*Ht+dt]>d;)Ht--}Gt[2*Qt+dt]===d?T(wt,Gt,Qt,Ht):(Ht++,T(wt,Gt,Ht,it)),Ht<=re&&(Qt=Ht+1),re<=Ht&&(it=Ht-1)}}function T(wt,Gt,re,Qt){j(wt,re,Qt),j(Gt,2*re,2*Qt),j(Gt,2*re+1,2*Qt+1)}function j(wt,Gt,re){var Qt=wt[Gt];wt[Gt]=wt[re],wt[re]=Qt}function y(wt,Gt,re,Qt,it,dt,gt){for(var vt=[0,wt.length-1,0],Y=[],ot,nt;vt.length;){var rt=vt.pop(),st=vt.pop(),d=vt.pop();if(st-d<=gt){for(var It=d;It<=st;It++)ot=Gt[2*It],nt=Gt[2*It+1],ot>=re&&ot<=it&&nt>=Qt&&nt<=dt&&Y.push(wt[It]);continue}var Ht=Math.floor((d+st)/2);ot=Gt[2*Ht],nt=Gt[2*Ht+1],ot>=re&&ot<=it&&nt>=Qt&&nt<=dt&&Y.push(wt[Ht]);var kt=(rt+1)%2;(rt===0?re<=ot:Qt<=nt)&&(vt.push(d),vt.push(Ht-1),vt.push(kt)),(rt===0?it>=ot:dt>=nt)&&(vt.push(Ht+1),vt.push(st),vt.push(kt))}return Y}function U(wt,Gt,re,Qt,it,dt){for(var gt=[0,wt.length-1,0],vt=[],Y=it*it;gt.length;){var ot=gt.pop(),nt=gt.pop(),rt=gt.pop();if(nt-rt<=dt){for(var st=rt;st<=nt;st++)F(Gt[2*st],Gt[2*st+1],re,Qt)<=Y&&vt.push(wt[st]);continue}var d=Math.floor((rt+nt)/2),It=Gt[2*d],Ht=Gt[2*d+1];F(It,Ht,re,Qt)<=Y&&vt.push(wt[d]);var kt=(ot+1)%2;(ot===0?re-it<=It:Qt-it<=Ht)&&(gt.push(rt),gt.push(d-1),gt.push(kt)),(ot===0?re+it>=It:Qt+it>=Ht)&&(gt.push(d+1),gt.push(nt),gt.push(kt))}return vt}function F(wt,Gt,re,Qt){var it=wt-re,dt=Gt-Qt;return it*it+dt*dt}var B=function(wt){return wt[0]},R=function(wt){return wt[1]},N=function(Gt,re,Qt,it,dt){re===void 0&&(re=B),Qt===void 0&&(Qt=R),it===void 0&&(it=64),dt===void 0&&(dt=Float64Array),this.nodeSize=it,this.points=Gt;for(var gt=Gt.length<65536?Uint16Array:Uint32Array,vt=this.ids=new gt(Gt.length),Y=this.coords=new dt(Gt.length*2),ot=0;ot<Gt.length;ot++)vt[ot]=ot,Y[2*ot]=re(Gt[ot]),Y[2*ot+1]=Qt(Gt[ot]);P(vt,Y,it,0,vt.length-1,0)};N.prototype.range=function(Gt,re,Qt,it){return y(this.ids,this.coords,Gt,re,Qt,it,this.nodeSize)},N.prototype.within=function(Gt,re,Qt){return U(this.ids,this.coords,Gt,re,Qt,this.nodeSize)};var A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(wt){return wt}},D=Math.fround||function(wt){return function(Gt){return wt[0]=+Gt,wt[0]}}(new Float32Array(1)),M=function(Gt){this.options=yt(Object.create(A),Gt),this.trees=new Array(this.options.maxZoom+1)};M.prototype.load=function(Gt){var re=this.options,Qt=re.log,it=re.minZoom,dt=re.maxZoom,gt=re.nodeSize;Qt&&console.time("total time");var vt="prepare "+Gt.length+" points";Qt&&console.time(vt),this.points=Gt;for(var Y=[],ot=0;ot<Gt.length;ot++)!Gt[ot].geometry||Y.push(k(Gt[ot],ot));this.trees[dt+1]=new N(Y,lt,Lt,gt,Float32Array),Qt&&console.timeEnd(vt);for(var nt=dt;nt>=it;nt--){var rt=+Date.now();Y=this._cluster(Y,nt),this.trees[nt]=new N(Y,lt,Lt,gt,Float32Array),Qt&&console.log("z%d: %d clusters in %dms",nt,Y.length,+Date.now()-rt)}return Qt&&console.timeEnd("total time"),this},M.prototype.getClusters=function(Gt,re){var Qt=((Gt[0]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,Gt[1])),dt=Gt[2]===180?180:((Gt[2]+180)%360+360)%360-180,gt=Math.max(-90,Math.min(90,Gt[3]));if(Gt[2]-Gt[0]>=360)Qt=-180,dt=180;else if(Qt>dt){var vt=this.getClusters([Qt,it,180,gt],re),Y=this.getClusters([-180,it,dt,gt],re);return vt.concat(Y)}for(var ot=this.trees[this._limitZoom(re)],nt=ot.range(K(Qt),q(gt),K(dt),q(it)),rt=[],st=0,d=nt;st<d.length;st+=1){var It=d[st],Ht=ot.points[It];rt.push(Ht.numPoints?V(Ht):this.points[Ht.index])}return rt},M.prototype.getChildren=function(Gt){var re=this._getOriginId(Gt),Qt=this._getOriginZoom(Gt),it="No cluster with the specified id.",dt=this.trees[Qt];if(!dt)throw new Error(it);var gt=dt.points[re];if(!gt)throw new Error(it);for(var vt=this.options.radius/(this.options.extent*Math.pow(2,Qt-1)),Y=dt.within(gt.x,gt.y,vt),ot=[],nt=0,rt=Y;nt<rt.length;nt+=1){var st=rt[nt],d=dt.points[st];d.parentId===Gt&&ot.push(d.numPoints?V(d):this.points[d.index])}if(ot.length===0)throw new Error(it);return ot},M.prototype.getLeaves=function(Gt,re,Qt){re=re||10,Qt=Qt||0;var it=[];return this._appendLeaves(it,Gt,re,Qt,0),it},M.prototype.getTile=function(Gt,re,Qt){var it=this.trees[this._limitZoom(Gt)],dt=Math.pow(2,Gt),gt=this.options,vt=gt.extent,Y=gt.radius,ot=Y/vt,nt=(Qt-ot)/dt,rt=(Qt+1+ot)/dt,st={features:[]};return this._addTileFeatures(it.range((re-ot)/dt,nt,(re+1+ot)/dt,rt),it.points,re,Qt,dt,st),re===0&&this._addTileFeatures(it.range(1-ot/dt,nt,1,rt),it.points,dt,Qt,dt,st),re===dt-1&&this._addTileFeatures(it.range(0,nt,ot/dt,rt),it.points,-1,Qt,dt,st),st.features.length?st:null},M.prototype.getClusterExpansionZoom=function(Gt){for(var re=this._getOriginZoom(Gt)-1;re<=this.options.maxZoom;){var Qt=this.getChildren(Gt);if(re++,Qt.length!==1)break;Gt=Qt[0].properties.cluster_id}return re},M.prototype._appendLeaves=function(Gt,re,Qt,it,dt){for(var gt=this.getChildren(re),vt=0,Y=gt;vt<Y.length;vt+=1){var ot=Y[vt],nt=ot.properties;if(nt&&nt.cluster?dt+nt.point_count<=it?dt+=nt.point_count:dt=this._appendLeaves(Gt,nt.cluster_id,Qt,it,dt):dt<it?dt++:Gt.push(ot),Gt.length===Qt)break}return dt},M.prototype._addTileFeatures=function(Gt,re,Qt,it,dt,gt){for(var vt=0,Y=Gt;vt<Y.length;vt+=1){var ot=Y[vt],nt=re[ot],rt=nt.numPoints,st=void 0,d=void 0,It=void 0;if(rt)st=X(nt),d=nt.x,It=nt.y;else{var Ht=this.points[nt.index];st=Ht.properties,d=K(Ht.geometry.coordinates[0]),It=q(Ht.geometry.coordinates[1])}var kt={type:1,geometry:[[Math.round(this.options.extent*(d*dt-Qt)),Math.round(this.options.extent*(It*dt-it))]],tags:st},Xt=void 0;rt?Xt=nt.id:this.options.generateId?Xt=nt.index:this.points[nt.index].id&&(Xt=this.points[nt.index].id),Xt!==void 0&&(kt.id=Xt),gt.features.push(kt)}},M.prototype._limitZoom=function(Gt){return Math.max(this.options.minZoom,Math.min(+Gt,this.options.maxZoom+1))},M.prototype._cluster=function(Gt,re){for(var Qt=[],it=this.options,dt=it.radius,gt=it.extent,vt=it.reduce,Y=it.minPoints,ot=dt/(gt*Math.pow(2,re)),nt=0;nt<Gt.length;nt++){var rt=Gt[nt];if(!(rt.zoom<=re)){rt.zoom=re;for(var st=this.trees[re+1],d=st.within(rt.x,rt.y,ot),It=rt.numPoints||1,Ht=It,kt=0,Xt=d;kt<Xt.length;kt+=1){var Kt=Xt[kt],Jt=st.points[Kt];Jt.zoom>re&&(Ht+=Jt.numPoints||1)}if(Ht>It&&Ht>=Y){for(var ue=rt.x*It,ce=rt.y*It,$t=vt&&It>1?this._map(rt,!0):null,Ut=(nt<<5)+(re+1)+this.points.length,Rt=0,Pt=d;Rt<Pt.length;Rt+=1){var Yt=Pt[Rt],Dt=st.points[Yt];if(!(Dt.zoom<=re)){Dt.zoom=re;var Nt=Dt.numPoints||1;ue+=Dt.x*Nt,ce+=Dt.y*Nt,Dt.parentId=Ut,vt&&($t||($t=this._map(rt,!0)),vt($t,this._map(Dt)))}}rt.parentId=Ut,Qt.push(O(ue/Ht,ce/Ht,Ut,Ht,$t))}else if(Qt.push(rt),Ht>1)for(var ne=0,ve=d;ne<ve.length;ne+=1){var Re=ve[ne],je=st.points[Re];je.zoom<=re||(je.zoom=re,Qt.push(je))}}}return Qt},M.prototype._getOriginId=function(Gt){return Gt-this.points.length>>5},M.prototype._getOriginZoom=function(Gt){return(Gt-this.points.length)%32},M.prototype._map=function(Gt,re){if(Gt.numPoints)return re?yt({},Gt.properties):Gt.properties;var Qt=this.points[Gt.index].properties,it=this.options.map(Qt);return re&&it===Qt?yt({},it):it};function O(wt,Gt,re,Qt,it){return{x:D(wt),y:D(Gt),zoom:Infinity,id:re,parentId:-1,numPoints:Qt,properties:it}}function k(wt,Gt){var re=wt.geometry.coordinates,Qt=re[0],it=re[1];return{x:D(K(Qt)),y:D(q(it)),zoom:Infinity,index:Gt,parentId:-1}}function V(wt){return{type:"Feature",id:wt.id,properties:X(wt),geometry:{type:"Point",coordinates:[ct(wt.x),_t(wt.y)]}}}function X(wt){var Gt=wt.numPoints,re=Gt>=1e4?Math.round(Gt/1e3)+"k":Gt>=1e3?Math.round(Gt/100)/10+"k":Gt;return yt(yt({},wt.properties),{cluster:!0,cluster_id:wt.id,point_count:Gt,point_count_abbreviated:re})}function K(wt){return wt/360+.5}function q(wt){var Gt=Math.sin(wt*Math.PI/180),re=.5-.25*Math.log((1+Gt)/(1-Gt))/Math.PI;return re<0?0:re>1?1:re}function ct(wt){return(wt-.5)*360}function _t(wt){var Gt=(180-wt*360)*Math.PI/180;return 360*Math.atan(Math.exp(Gt))/Math.PI-90}function yt(wt,Gt){for(var re in Gt)wt[re]=Gt[re];return wt}function lt(wt){return wt.x}function Lt(wt){return wt.y}return M})},91496:function(Vt){typeof Object.create=="function"?Vt.exports=function(S,T){S.super_=T,S.prototype=Object.create(T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}})}:Vt.exports=function(S,T){S.super_=T;var j=function(){};j.prototype=T.prototype,S.prototype=new j,S.prototype.constructor=S}},20384:function(Vt){Vt.exports=function(S){return S&&typeof S=="object"&&typeof S.copy=="function"&&typeof S.fill=="function"&&typeof S.readUInt8=="function"}},89539:function(Vt,P,S){var T=S(34155),j=Object.getOwnPropertyDescriptors||function(kt){for(var Xt=Object.keys(kt),Kt={},Jt=0;Jt<Xt.length;Jt++)Kt[Xt[Jt]]=Object.getOwnPropertyDescriptor(kt,Xt[Jt]);return Kt},y=/%[sdj%]/g;P.format=function(Ht){if(!lt(Ht)){for(var kt=[],Xt=0;Xt<arguments.length;Xt++)kt.push(B(arguments[Xt]));return kt.join(" ")}for(var Xt=1,Kt=arguments,Jt=Kt.length,ue=String(Ht).replace(y,function($t){if($t==="%%")return"%";if(Xt>=Jt)return $t;switch($t){case"%s":return String(Kt[Xt++]);case"%d":return Number(Kt[Xt++]);case"%j":try{return JSON.stringify(Kt[Xt++])}catch(Ut){return"[Circular]"}default:return $t}}),ce=Kt[Xt];Xt<Jt;ce=Kt[++Xt])ct(ce)||!re(ce)?ue+=" "+ce:ue+=" "+B(ce);return ue},P.deprecate=function(Ht,kt){if(typeof T!="undefined"&&T.noDeprecation===!0)return Ht;if(typeof T=="undefined")return function(){return P.deprecate(Ht,kt).apply(this,arguments)};var Xt=!1;function Kt(){if(!Xt){if(T.throwDeprecation)throw new Error(kt);T.traceDeprecation?console.trace(kt):console.error(kt),Xt=!0}return Ht.apply(this,arguments)}return Kt};var U={},F;P.debuglog=function(Ht){if(wt(F)&&(F={NODE_ENV:"production"}.NODE_DEBUG||""),Ht=Ht.toUpperCase(),!U[Ht])if(new RegExp("\\b"+Ht+"\\b","i").test(F)){var kt=T.pid;U[Ht]=function(){var Xt=P.format.apply(P,arguments);console.error("%s %d: %s",Ht,kt,Xt)}}else U[Ht]=function(){};return U[Ht]};function B(Ht,kt){var Xt={seen:[],stylize:N};return arguments.length>=3&&(Xt.depth=arguments[2]),arguments.length>=4&&(Xt.colors=arguments[3]),q(kt)?Xt.showHidden=kt:kt&&P._extend(Xt,kt),wt(Xt.showHidden)&&(Xt.showHidden=!1),wt(Xt.depth)&&(Xt.depth=2),wt(Xt.colors)&&(Xt.colors=!1),wt(Xt.customInspect)&&(Xt.customInspect=!0),Xt.colors&&(Xt.stylize=R),D(Xt,Ht,Xt.depth)}P.inspect=B,B.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},B.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function R(Ht,kt){var Xt=B.styles[kt];return Xt?"["+B.colors[Xt][0]+"m"+Ht+"["+B.colors[Xt][1]+"m":Ht}function N(Ht,kt){return Ht}function A(Ht){var kt={};return Ht.forEach(function(Xt,Kt){kt[Xt]=!0}),kt}function D(Ht,kt,Xt){if(Ht.customInspect&&kt&&dt(kt.inspect)&&kt.inspect!==P.inspect&&!(kt.constructor&&kt.constructor.prototype===kt)){var Kt=kt.inspect(Xt,Ht);return lt(Kt)||(Kt=D(Ht,Kt,Xt)),Kt}var Jt=M(Ht,kt);if(Jt)return Jt;var ue=Object.keys(kt),ce=A(ue);if(Ht.showHidden&&(ue=Object.getOwnPropertyNames(kt)),it(kt)&&(ue.indexOf("message")>=0||ue.indexOf("description")>=0))return O(kt);if(ue.length===0){if(dt(kt)){var $t=kt.name?": "+kt.name:"";return Ht.stylize("[Function"+$t+"]","special")}if(Gt(kt))return Ht.stylize(RegExp.prototype.toString.call(kt),"regexp");if(Qt(kt))return Ht.stylize(Date.prototype.toString.call(kt),"date");if(it(kt))return O(kt)}var Ut="",Rt=!1,Pt=["{","}"];if(K(kt)&&(Rt=!0,Pt=["[","]"]),dt(kt)){var Yt=kt.name?": "+kt.name:"";Ut=" [Function"+Yt+"]"}if(Gt(kt)&&(Ut=" "+RegExp.prototype.toString.call(kt)),Qt(kt)&&(Ut=" "+Date.prototype.toUTCString.call(kt)),it(kt)&&(Ut=" "+O(kt)),ue.length===0&&(!Rt||kt.length==0))return Pt[0]+Ut+Pt[1];if(Xt<0)return Gt(kt)?Ht.stylize(RegExp.prototype.toString.call(kt),"regexp"):Ht.stylize("[Object]","special");Ht.seen.push(kt);var Dt;return Rt?Dt=k(Ht,kt,Xt,ce,ue):Dt=ue.map(function(Nt){return V(Ht,kt,Xt,ce,Nt,Rt)}),Ht.seen.pop(),X(Dt,Ut,Pt)}function M(Ht,kt){if(wt(kt))return Ht.stylize("undefined","undefined");if(lt(kt)){var Xt="'"+JSON.stringify(kt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Ht.stylize(Xt,"string")}if(yt(kt))return Ht.stylize(""+kt,"number");if(q(kt))return Ht.stylize(""+kt,"boolean");if(ct(kt))return Ht.stylize("null","null")}function O(Ht){return"["+Error.prototype.toString.call(Ht)+"]"}function k(Ht,kt,Xt,Kt,Jt){for(var ue=[],ce=0,$t=kt.length;ce<$t;++ce)rt(kt,String(ce))?ue.push(V(Ht,kt,Xt,Kt,String(ce),!0)):ue.push("");return Jt.forEach(function(Ut){Ut.match(/^\d+$/)||ue.push(V(Ht,kt,Xt,Kt,Ut,!0))}),ue}function V(Ht,kt,Xt,Kt,Jt,ue){var ce,$t,Ut;if(Ut=Object.getOwnPropertyDescriptor(kt,Jt)||{value:kt[Jt]},Ut.get?Ut.set?$t=Ht.stylize("[Getter/Setter]","special"):$t=Ht.stylize("[Getter]","special"):Ut.set&&($t=Ht.stylize("[Setter]","special")),rt(Kt,Jt)||(ce="["+Jt+"]"),$t||(Ht.seen.indexOf(Ut.value)<0?(ct(Xt)?$t=D(Ht,Ut.value,null):$t=D(Ht,Ut.value,Xt-1),$t.indexOf(`
`)>-1&&(ue?$t=$t.split(`
`).map(function(Rt){return"  "+Rt}).join(`
`).substr(2):$t=`
`+$t.split(`
`).map(function(Rt){return"   "+Rt}).join(`
`))):$t=Ht.stylize("[Circular]","special")),wt(ce)){if(ue&&Jt.match(/^\d+$/))return $t;ce=JSON.stringify(""+Jt),ce.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ce=ce.substr(1,ce.length-2),ce=Ht.stylize(ce,"name")):(ce=ce.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ce=Ht.stylize(ce,"string"))}return ce+": "+$t}function X(Ht,kt,Xt){var Kt=0,Jt=Ht.reduce(function(ue,ce){return Kt++,ce.indexOf(`
`)>=0&&Kt++,ue+ce.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Jt>60?Xt[0]+(kt===""?"":kt+`
 `)+" "+Ht.join(`,
  `)+" "+Xt[1]:Xt[0]+kt+" "+Ht.join(", ")+" "+Xt[1]}function K(Ht){return Array.isArray(Ht)}P.isArray=K;function q(Ht){return typeof Ht=="boolean"}P.isBoolean=q;function ct(Ht){return Ht===null}P.isNull=ct;function _t(Ht){return Ht==null}P.isNullOrUndefined=_t;function yt(Ht){return typeof Ht=="number"}P.isNumber=yt;function lt(Ht){return typeof Ht=="string"}P.isString=lt;function Lt(Ht){return typeof Ht=="symbol"}P.isSymbol=Lt;function wt(Ht){return Ht===void 0}P.isUndefined=wt;function Gt(Ht){return re(Ht)&&vt(Ht)==="[object RegExp]"}P.isRegExp=Gt;function re(Ht){return typeof Ht=="object"&&Ht!==null}P.isObject=re;function Qt(Ht){return re(Ht)&&vt(Ht)==="[object Date]"}P.isDate=Qt;function it(Ht){return re(Ht)&&(vt(Ht)==="[object Error]"||Ht instanceof Error)}P.isError=it;function dt(Ht){return typeof Ht=="function"}P.isFunction=dt;function gt(Ht){return Ht===null||typeof Ht=="boolean"||typeof Ht=="number"||typeof Ht=="string"||typeof Ht=="symbol"||typeof Ht=="undefined"}P.isPrimitive=gt,P.isBuffer=S(20384);function vt(Ht){return Object.prototype.toString.call(Ht)}function Y(Ht){return Ht<10?"0"+Ht.toString(10):Ht.toString(10)}var ot=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function nt(){var Ht=new Date,kt=[Y(Ht.getHours()),Y(Ht.getMinutes()),Y(Ht.getSeconds())].join(":");return[Ht.getDate(),ot[Ht.getMonth()],kt].join(" ")}P.log=function(){console.log("%s - %s",nt(),P.format.apply(P,arguments))},P.inherits=S(91496),P._extend=function(Ht,kt){if(!kt||!re(kt))return Ht;for(var Xt=Object.keys(kt),Kt=Xt.length;Kt--;)Ht[Xt[Kt]]=kt[Xt[Kt]];return Ht};function rt(Ht,kt){return Object.prototype.hasOwnProperty.call(Ht,kt)}var st=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;P.promisify=function(kt){if(typeof kt!="function")throw new TypeError('The "original" argument must be of type Function');if(st&&kt[st]){var Xt=kt[st];if(typeof Xt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Xt,st,{value:Xt,enumerable:!1,writable:!1,configurable:!0}),Xt}function Xt(){for(var Kt,Jt,ue=new Promise(function(Ut,Rt){Kt=Ut,Jt=Rt}),ce=[],$t=0;$t<arguments.length;$t++)ce.push(arguments[$t]);ce.push(function(Ut,Rt){Ut?Jt(Ut):Kt(Rt)});try{kt.apply(this,ce)}catch(Ut){Jt(Ut)}return ue}return Object.setPrototypeOf(Xt,Object.getPrototypeOf(kt)),st&&Object.defineProperty(Xt,st,{value:Xt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Xt,j(kt))},P.promisify.custom=st;function d(Ht,kt){if(!Ht){var Xt=new Error("Promise was rejected with a falsy value");Xt.reason=Ht,Ht=Xt}return kt(Ht)}function It(Ht){if(typeof Ht!="function")throw new TypeError('The "original" argument must be of type Function');function kt(){for(var Xt=[],Kt=0;Kt<arguments.length;Kt++)Xt.push(arguments[Kt]);var Jt=Xt.pop();if(typeof Jt!="function")throw new TypeError("The last argument must be of type Function");var ue=this,ce=function(){return Jt.apply(ue,arguments)};Ht.apply(this,Xt).then(function($t){T.nextTick(ce,null,$t)},function($t){T.nextTick(d,$t,ce)})}return Object.setPrototypeOf(kt,Object.getPrototypeOf(Ht)),Object.defineProperties(kt,j(Ht)),kt}P.callbackify=It},75752:function(Vt){Vt.exports.RADIUS=6378137,Vt.exports.FLATTENING=1/298.257223563,Vt.exports.POLAR_RADIUS=63567523142e-4}}]);
